<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE MudletPackage>
<MudletPackage version="1.001">
	<HostPackage>
		<Host autoClearCommandLineAfterSend="no" disablePasswordMasking="no" HighlightHistory="yes" commandEchoMode="1" printCommand="yes" USE_IRE_DRIVER_BUGFIX="no" mUSE_FORCE_LF_AFTER_PROMPT="no" mUSE_UNIX_EOL="no" mNoAntiAlias="no" mEchoLuaErrors="no" runAllKeyMatches="no" AmbigousWidthGlyphsToBeWide="auto" mRawStreamDump="no" mIsLoggingTimestamps="no" logDirectory="" logFileName="" logFileNameFormat="yyyy-MM-dd#HH-mm-ss" mAlertOnNewData="yes" mFORCE_NO_COMPRESSION="no" mFORCE_GA_OFF="no" mFORCE_SAVE_ON_EXIT="yes" mEnableGMCP="yes" mEnableMSSP="yes" mEnableMSDP="yes" mEnableMSP="yes" mEnableMTTS="yes" mEnableMNES="no" mEnableMXP="yes" mEnableCHARSET="yes" mEnableNEWENVIRON="yes" mMapStrongHighlight="no" mEnableSpellCheck="yes" mEnableUserDictionary="yes" mUseSharedDictionary="no" mAcceptServerGUI="yes" mAcceptServerMedia="yes" mMapperUseAntiAlias="yes" mMapperShowGrid="no" mMapperShowRoomBorders="yes" mVersionInTTYPE="no" mPromptedForVersionInTTYPE="no" mForceMXPProcessorOn="yes" mPromptedForMXPProcessorOn="yes" enableTextAnalyzer="no" mRoomSize="0.5" mLineSize="10.0" mMapGridLineSize="0.5" mBubbleMode="no" mMapViewOnly="yes" mShowRoomIDs="no" mShowPanel="yes" mShow3DView="no" mHaveMapperScript="yes" mEditorAutoComplete="yes" mEditorShowBidi="yes" mEditorTheme="Mudlet" mEditorThemeFile="Mudlet.tmTheme" mThemePreviewItemID="5" mThemePreviewType="trigger" mSearchEngineName="Google" mTimerSupressionInterval="00:00:00.000" mUseProxy="no" mProxyAddress="" mProxyPort="0" mProxyUsername="" mProxyPassword="" mSslTsl="no" mSslIgnoreExpired="no" mSslIgnoreSelfSigned="no" mSslIgnoreAll="no" mAskTlsAvailable="no" mDiscordAccessFlags="2495" mRequiredDiscordUserName="" mRequiredDiscordUserDiscriminator="" mSGRCodeHasColSpaceId="no" mServerMayRedefineColors="no" playerRoomPrimaryColor="#ffff0000" playerRoomSecondaryColor="#ffffffff" playerRoomStyle="0" playerRoomOuterDiameter="120" playerRoomInnerDiameter="70" CompactInputLine="no" CommandLineHistorySaveSize="500" mDoubleClickIgnore="'&quot;" EditorSearchOptions="0" DebugShowAllProblemCodepoints="no" announceIncomingText="yes" advertiseScreenReader="no" f3SearchEnabled="no" enableClosedCaption="no" caretShortcut="None" blankLineBehaviour="Show" NetworkPacketTimeout="300" ShowIDsInEditor="no">
			<name>PKUXKX</name>
			<mInstalledPackages>
				<string>gui-drop</string>
				<string>run-lua-code</string>
				<string>echo</string>
				<string>deleteOldProfiles</string>
				<string>enable-accessibility</string>
				<string>autosave</string>
				<string>gui-drop</string>
				<string>run-lua-code</string>
				<string>echo</string>
				<string>deleteOldProfiles</string>
				<string>enable-accessibility</string>
				<string>2025-04-11#14-26-31</string>
				<string>gui-drop</string>
				<string>run-lua-code</string>
				<string>echo</string>
				<string>deleteOldProfiles</string>
				<string>enable-accessibility</string>
				<string>2025-04-16#08-25-44</string>
				<string>gui-drop</string>
				<string>run-lua-code</string>
				<string>echo</string>
				<string>deleteOldProfiles</string>
				<string>enable-accessibility</string>
				<string>autosave</string>
				<string>gui-drop</string>
				<string>run-lua-code</string>
				<string>echo</string>
				<string>deleteOldProfiles</string>
				<string>enable-accessibility</string>
				<string>2025-04-11#14-26-31</string>
				<string>gui-drop</string>
				<string>run-lua-code</string>
				<string>echo</string>
				<string>deleteOldProfiles</string>
				<string>enable-accessibility</string>
				<string>generic_mapper</string>
			</mInstalledPackages>
			<url>pkuxkx.com</url>
			<serverPackageName>nothing</serverPackageName>
			<serverPackageVersion>-1</serverPackageVersion>
			<port>8081</port>
			<borderTopHeight>0</borderTopHeight>
			<borderBottomHeight>0</borderBottomHeight>
			<borderLeftWidth>0</borderLeftWidth>
			<borderRightWidth>0</borderRightWidth>
			<wrapAt>128</wrapAt>
			<wrapIndentCount>0</wrapIndentCount>
			<wrapHangingIndentCount>0</wrapHangingIndentCount>
			<consoleBufferSize>100000</consoleBufferSize>
			<useMaxConsoleBufferSize>no</useMaxConsoleBufferSize>
			<mFgColor>#c0c0c0</mFgColor>
			<mBgColor>#000000</mBgColor>
			<mCommandFgColor>#717100</mCommandFgColor>
			<mCommandBgColor>#000000</mCommandBgColor>
			<mCommandLineFgColor>#808080</mCommandLineFgColor>
			<mCommandLineBgColor>#000000</mCommandLineBgColor>
			<mBlack>#000000</mBlack>
			<mLightBlack>#808080</mLightBlack>
			<mRed>#800000</mRed>
			<mLightRed>#ff0000</mLightRed>
			<mBlue>#000080</mBlue>
			<mLightBlue>#0000ff</mLightBlue>
			<mGreen>#008000</mGreen>
			<mLightGreen>#00ff00</mLightGreen>
			<mYellow>#808000</mYellow>
			<mLightYellow>#ffff00</mLightYellow>
			<mCyan>#008080</mCyan>
			<mLightCyan>#00ffff</mLightCyan>
			<mMagenta>#800080</mMagenta>
			<mLightMagenta>#ff00ff</mLightMagenta>
			<mWhite>#c0c0c0</mWhite>
			<mLightWhite>#ffffff</mLightWhite>
			<mDisplayFont>LXGW WenKai Mono,17,-1,5,400,0,0,0,1,0,0,0,0,0,0,1</mDisplayFont>
			<mCommandLineFont>LXGW WenKai Mono,17,-1,5,400,0,0,0,1,0,0,0,0,0,0,1</mCommandLineFont>
			<mCommandSeparator>;</mCommandSeparator>
			<commandLineMinimumHeight>30</commandLineMinimumHeight>
			<mFgColor2>#c0c0c0</mFgColor2>
			<mBgColor2 alpha="255">#000000</mBgColor2>
			<mLowerLevelColor>#808080</mLowerLevelColor>
			<mUpperLevelColor>#ffffff</mUpperLevelColor>
			<mRoomBorderColor>#c0c0c0</mRoomBorderColor>
			<mRoomCollisionBorderColor>#ffff00</mRoomCollisionBorderColor>
			<mMapGridColor alpha="64">#d3d3d3</mMapGridColor>
			<mMapInfoBg alpha="120">#969696</mMapInfoBg>
			<mBlack2>#000000</mBlack2>
			<mLightBlack2>#808080</mLightBlack2>
			<mRed2>#800000</mRed2>
			<mLightRed2>#ff0000</mLightRed2>
			<mBlue2>#000080</mBlue2>
			<mLightBlue2>#0000ff</mLightBlue2>
			<mGreen2>#008000</mGreen2>
			<mLightGreen2>#00ff00</mLightGreen2>
			<mYellow2>#808000</mYellow2>
			<mLightYellow2>#ffff00</mLightYellow2>
			<mCyan2>#008080</mCyan2>
			<mLightCyan2>#00ffff</mLightCyan2>
			<mMagenta2>#800080</mMagenta2>
			<mLightMagenta2>#ff00ff</mLightMagenta2>
			<mWhite2>#c0c0c0</mWhite2>
			<mLightWhite2>#ffffff</mLightWhite2>
			<mSpellDic>en_US</mSpellDic>
			<mLineSize>10.0</mLineSize>
			<mRoomSize>0.5</mRoomSize>
			<mapInfoContributor>Short</mapInfoContributor>
			<profileShortcut key="Script editor">Alt+E</profileShortcut>
			<profileShortcut key="Show Map">Alt+M</profileShortcut>
			<profileShortcut key="Compact input line">Alt+L</profileShortcut>
			<profileShortcut key="Preferences">Alt+P</profileShortcut>
			<profileShortcut key="Notepad">Alt+N</profileShortcut>
			<profileShortcut key="Package manager">Alt+O</profileShortcut>
			<profileShortcut key="Module manager">Alt+I</profileShortcut>
			<profileShortcut key="MultiView">Alt+V</profileShortcut>
			<profileShortcut key="Mute all media">Alt+K</profileShortcut>
			<profileShortcut key="Play">Alt+C</profileShortcut>
			<profileShortcut key="Disconnect">Alt+D</profileShortcut>
			<profileShortcut key="Reconnect">Alt+R</profileShortcut>
			<profileShortcut key="Close profile">Alt+W</profileShortcut>
			<profileShortcut key="Toggle Time Stamps">Ctrl+Alt+T</profileShortcut>
			<profileShortcut key="Toggle Replay">Ctrl+Alt+R</profileShortcut>
			<profileShortcut key="Toggle Logging">Ctrl+Alt+L</profileShortcut>
			<profileShortcut key="Toggle Emergency Stop">Ctrl+Alt+S</profileShortcut>
			<stopwatches />
		</Host>
	</HostPackage>
	<TriggerPackage>
		<TriggerGroup isActive="no" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>加内力值</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>打坐完成</name>
				<script>--expandAlias("hb")
if stat.food+0 &lt; 50 then
--if hp_info.food+0 &lt; 100 then
  eat_and_drink()
end
send("dazuo 200")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你运功完毕，深深吸了口气，站了起来</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>气不足</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>sleep</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你现在的气太少了，无法产生内息运行全身经脉</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>补气完成</name>
				<script>--expandAlias("hb")
if stat.food+0 &lt; 50 then
--if hp_info.food+0 &lt; 100 then
  eat_and_drink()
end
send("dazuo 10")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你深深吸了几口气，脸色看起来好多了。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>睡醒</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>dazuo 10</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你一觉醒来，精神抖擞地活动了几下手脚。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>睡多</name>
				<script>tempTimer(10, function() send("dazuo 10") end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你刚刚睡过一觉, 多睡对身体有害无益</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="no" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>交战-武当</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>气势24</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>pc</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你在攻击中不断积蓄攻势。(气势：24%)</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>对手被缠住</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>ps</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^只能见招拆招，疲于应对，不觉已深陷太极剑意之中，无法出招</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>缠被挡住</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>ps</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^只听得「铮」一声清响，剧烈碰撞之下你剑诀为敌所破，无以为继，被迫撤剑收招。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>太极剑 连 CD</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>pz</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>君之「太极剑.*连」尚余</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>对手已经繁忙</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>ps</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你的对手处于繁忙状态，你不需要再用</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>no weapon</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>wield dao</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你手上持有的武器并不能用来发动</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>准备pc</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>pc</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你在攻击中不断积蓄攻势。(气势：12%)</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>气势 32</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>pc</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你在攻击中不断积蓄攻势。(气势：32%)</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>busy 中...</name>
				<script>tempTimer(1, function () expandAlias("ps") end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你刚使完一个绝招，欲要再使，却是有心无力。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="no" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>爵位任务</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="yes" isPerlSlashGOption="yes" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>名字-年龄</name>
				<script>current_luren["chinese_name"]=multimatches[1][2]
current_luren["full_name"]=string.lower(multimatches[1][3])
current_luren["gender"]=multimatches[2][2]
set_gender_type(multimatches[2][2])
current_luren["age"]=multimatches[2][3]
--showMultimatches()
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>3</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>.*\s(.*)\((.*)\)</string>
					<string>.*(\w)看起来约(.*)多岁</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>衣服</name>
				<script>--echo("--"..matches[2])
analyze_luren_cloth(matches[2])
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>.*身穿一件(.*)\(</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>鞋子</name>
				<script>--echo("--"..matches[2])
analyze_luren_shoes(matches[2])</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>.*脚蹬一双(.*)\(</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>身材</name>
				<script>--echo("--&gt;:"..matches[2])
categorize_body(matches[2])</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这是一(.*)的行人</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>消息</name>
				<script>local name = matches[2]
local msg = matches[3]
set_message(name, msg)
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>(.*)说道：「(.*)</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="no" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>凌霄看雪</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>凌霄看雪-xingzou snow</name>
				<script>tempTimer(1, function() send("xingzou snow") end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你突然发现在路旁的一片积雪上行走(xingzou)似乎可以用来练习轻功</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>凌霄看雪-l snow</name>
				<script>tempTimer(1, function() send("l snow") end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>慢慢的，你发现自己可以睁开眼了，只是眼睛似有砂子，疼痛流泪</string>
					<string>雪，雪，还是雪</string>
					<string>你一路走下来，看着脚印回想方才的步法</string>
					<string>洁白的雪地上零星的散落着几朵脚印。</string>
					<string>环顾四周，到处都是白皑皑的积雪。</string>
					<string>你摇摇摆摆走在雪地上，忽然脚底一滑</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="no" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>积攒内力</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>回血完成</name>
				<script>dazuo_max()
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你深深吸了几口气，脸色看起来好多了</string>
					<string>你现在气力充沛</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>打坐完成</name>
				<script>yunqi()
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你运功完毕，深深吸了口气，站了起来。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>force_blood_full</name>
				<script>blood_force_full()
--echo("food - water"..stat.water)
if stat.water+0 &lt; 50 or stat.food+0 &lt; 50 then
  eat_and_drink()
end

send("say jiqi completed")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你现在内力接近圆满状态</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>内力枯竭</name>
				<script>if stat.water+0 &lt; 50 or stat.food+0 &lt; 50 then
  eat_and_drink()
end
tempTimer(10, function() expandAlias("start_jiqi") end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string> 你的内力已经枯竭，不能施用内功。</string>
					<string>你的内力不够。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="no" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>释放内力</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>release force</name>
				<script>if stat.neili+0 &gt; 500 then
  tempTimer(0.1, function() 
    release_force()
    send("say release force 1 round") 
  end)
else 
  expandAlias("start_jiqi")  
end
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>release.*force.*1.*round</string>
					<string>jiqi completed</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>基本功夫高了</name>
				<script>basic_skill_is_higher()
echo("===&gt;切换到高级功夫\n")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你的基本功夫比你的高级功夫还高</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>高级功夫高了</name>
				<script>advanced_skill_is_higher()
echo("===&gt; 切换到基本功\n")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你需要提高基本功，不然练得再多也没有用</string>
					<string>你的基本.*的级别还没有.*的级别高，不能通过练习来提高了。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>空手</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>unwield flute</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你必须空手才能练习兰花拂穴手。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>过滤掉某些行</name>
			<script>if matches[2] ~= "你" then 
  deleteLine()
end
</script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList>
				<string>(.*)运功完毕，深深吸了口气，站了起来。</string>
				<string>(.*)开始修炼内力。</string>
				<string>(.*)走了过来</string>
				<string>陆乘风自言自语道</string>
				<string>(.*)的吐出一口鲜血，脸色看起来好多了</string>
				<string>(.*)深深吸了几口气，脸色看起来好多了</string>
				<string>(.*)向陆乘风打听有关.*的消息</string>
				<string>(.*)对陆乘风道</string>
				<string>陆乘风对着(.*)点了点头</string>
				<string>(.*)吐出一口瘀血，脸色看起来好多了。</string>
				<string>你刚做完鉴定任务，先去休息一会吧。</string>
				<string>黄药师自言自语道</string>
				<string>黄药师喃喃道</string>
			</regexCodeList>
			<regexCodePropertyList>
				<integer>1</integer>
				<integer>1</integer>
				<integer>1</integer>
				<integer>0</integer>
				<integer>1</integer>
				<integer>1</integer>
				<integer>1</integer>
				<integer>1</integer>
				<integer>1</integer>
				<integer>1</integer>
				<integer>0</integer>
				<integer>0</integer>
				<integer>0</integer>
			</regexCodePropertyList>
		</Trigger>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>交战-桃花岛</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>发出弹指</name>
				<script>tanzhi()
echo(" \n========&gt; 发出弹指 =====\n")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^只见你双肩微晃，右手中指曲起，扣在拇指之下弹出，</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>发出拂穴</name>
				<script>fuxue()
echo(" \n========&gt; 发出拂穴 =====\n")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你右手挥出，拇指与食指扣起，余下三指略张，手指如一枝兰花般伸出</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>发出箫花</name>
				<script>xiaohua()
echo(" \n========&gt; 发出箫花 =====\n")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你使出玉箫剑法绝招「箫花齐放」，纵身一跃，</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>任务地址</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>通用地点触发</name>
				<script>set_xkx_room(matches[2])
--find_one_room(matches[2])
--set_room1(matches[2])
--echo("通用地点触发 ===&gt; find one room: "..matches[2].."\n")
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^(.*) - .*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>慕容复</name>
				<script>set_xkx_room("慕容复")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^茶馆</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>破阵-归云庄</name>
				<script>set_xkx_room("归云庄")
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>五湖废人</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>扬子津</name>
				<script>set_xkx_room("扬子津")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^扬子津 - \[</string>
					<string>扬子津 -  ★</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>孟津渡对面</name>
				<script>set_xkx_room("孟津渡对面")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是黄河北岸的渡口，东北通向晋阳，渡过黄河就是洛阳了。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>义兴</name>
				<script>set_xkx_room("义兴")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>义兴县城 -</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>无锡</name>
				<script>set_xkx_room("无锡")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>盛巷桥 -</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>处州府</name>
				<script>set_xkx_room("处州府")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是处州府的中心，四通八达，东面的城隍庙，西面不远的万象山</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>建宁府</name>
				<script>set_xkx_room("建宁府")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是镇安桥南的一处街头，建宁府最繁华的几条街在此汇聚</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>湖州</name>
				<script>set_xkx_room("湖州")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是湖州府城北一座热闹的广场，人来人往，络绎不绝</string>
					<string>赵孟頫</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>铅山</name>
				<script>set_xkx_room("铅山")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>南唐保大十一年置县，因永平镇西四里有铅山，遂以山名县</string>
					<string>你到达了铅山县。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>上饶</name>
				<script>set_xkx_room("上饶")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是上饶县城的中央广场，整个县城最繁华的地方</string>
					<string>你到达了上饶县</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>温州</name>
				<script>set_xkx_room("温州")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是坐落于温州城中心一座热闹的集市，一棵歪脖子树上挂着各种许愿的纸条</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>江州</name>
				<script>set_xkx_room("江州")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是江州的的城中心，可以容纳很多人一起集会的大广场</string>
					<string>你到达了江州</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>雁荡山</name>
				<script>set_xkx_room("雁荡山")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>碧霄峰 -</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>潮州</name>
				<script>set_xkx_room("潮州")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是潮州的中央广场，四条最繁华的大街在此交汇</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>龙泉镇</name>
				<script>set_xkx_room("龙泉镇")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是龙泉镇的一口水井，被镇上居民用了几百年了</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>建康</name>
				<script>set_xkx_room("建康")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string> 这里是建康府的城中心，两旁的店铺林立</string>
					<string>中城 -</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>泉州</name>
				<script>set_xkx_room("泉州")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string> 泉州是一个安静的港口城市。虽然这里是城中心，</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>武夷山</name>
				<script>set_xkx_room("武夷山")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>九龙窠 -</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>衢州</name>
				<script>set_xkx_room("衢州")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>温方悟</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>提督府</name>
				<script>set_xkx_room("提督府")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这是杭州城的政治军事中心：提督府。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>岳王墓</name>
				<script>set_xkx_room("岳王墓")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>岳飞墓 -</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>镇江</name>
				<script>set_xkx_room("镇江")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是一个小广场，平时人来人往，热闹非常。几个游客不知道正议论着什么</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>绍兴</name>
				<script>set_xkx_room("绍兴")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>八字桥 -</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>闽中</name>
				<script>set_xkx_room("闽中")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是福州的城市中心，行人不断从这里经过</string>
					<string>你到达了闽中</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>燕子坞</name>
				<script>set_xkx_room("燕子坞")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>绿衣女郎(Girl)</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>嘉兴</name>
				<script>set_xkx_room("嘉兴")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>嘉兴城 -</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>明州</name>
				<script>set_xkx_room("明州")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>鼓楼 -</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>扬州</name>
				<script>set_xkx_room("扬州")
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>大榕树(Rong shu)</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>代州</name>
				<script>set_xkx_room("代州")
echo ("=====")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string> 这里是代州的府前大街，因北面是代州府衙而得名</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>岳阳</name>
				<script>set_xkx_room("岳阳")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是岳阳城的城中心，路上行人摩肩接踵，络绎不绝。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>ferry</name>
				<script>set_xkx_room("ferry")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>&lt;ferry&gt;</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>黄河渡口</name>
				<script>--set_xkx_room("孟之经")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^黄河渡口</string>
					<string>赤套渡北渡口</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>归云庄的大厅</name>
				<script>set_xkx_room("归云庄的大厅")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string> 这里是归云庄的大厅，是庄主会客的地方</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>桃花岛</name>
				<script>set_xkx_room("桃花岛")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是桃花岛的大厅</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>回疆小镇</name>
				<script>update_location("回疆小镇")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>二位回族妇女</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>梅庄</name>
				<script>cecho("\n&lt;red&gt;===============&gt; 存书==============\n")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>孤山梅庄 -</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>韩世忠</name>
				<script>set_xkx_room("韩世忠")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>韩世忠(</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>孟之经</name>
				<script>set_xkx_room("孟之经")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>(Meng zhijing)</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>潮州</name>
				<script>set_xkx_room("潮州")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>刑捕头(Xing butou)</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>济源渡口</name>
				<script>set_xkx_room("济源渡口")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是黄河北岸的渡口，东北通向晋阳，渡过黄河就是洛阳了</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>张家口</name>
				<script>set_xkx_room("张家口")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>张家口是南北通道，塞外皮毛集散之地</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>晋阳</name>
				<script>set_xkx_room("晋阳")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是一处热闹的广场，游人如织</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>黑木崖</name>
				<script>set_xkx_room("黑木崖")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>据说日月神教的总堂－－黑木崖就在这座山</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>陵矶（北）</name>
				<script>set_xkx_room("陵矶北")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>东面不远就是华容道，关羽义释曹操的地方</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>云冈石窟</name>
				<script>set_xkx_room("云冈石窟")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里大同城西北武周山的一段土路</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>大同-魁星楼</name>
				<script>set_xkx_room("大同魁星楼")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>大同中心的魁星楼</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>神龙岛码头</name>
				<script>set_xkx_room("神龙岛码头")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是神龙岛的码头</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>神龙岛海滩</name>
				<script>set_xkx_room("神龙岛海滩")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>传说这岛上生有仙果，吃了长生不老</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>神龙岛山脚</name>
				<script>set_xkx_room("神龙岛山脚")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>竹林边上有一片开阔的平地，几间小竹屋疏落有致地点缀其中</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>神龙岛山腰</name>
				<script>set_xkx_room("神龙岛山腰")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>行了七八里，来到三间竹屋前停下</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>神龙岛峰顶</name>
				<script>set_xkx_room("神龙岛峰顶")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>神龙岛留言板(Board)</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>公孙止</name>
				<script>set_xkx_room("公孙止")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>绝情谷谷主</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>曲阜</name>
				<script>set_xkx_room("曲阜")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>曲阜鼓楼耸立于城中心</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>荆州码头</name>
				<script>set_xkx_room("荆州码头")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是荆州城南沿江的一处码头</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>泰安</name>
				<script>set_xkx_room("泰安")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里地处泰安县城的中心位置</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>濮阳黄河渡口</name>
				<script>set_xkx_room("濮阳黄河渡口")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>往北通向濮阳。渡过河去就是山东地界</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>登州</name>
				<script>set_xkx_room("登州")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是登州城的中心</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>麒麟村</name>
				<script>set_xkx_room("麒麟村")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string> 这里是麒麟村中的一个小广场</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>信阳</name>
				<script>set_xkx_room("信阳")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>这里是信阳城的中心</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>濠州</name>
				<script>set_xkx_room("濠州")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>在濠州城的中心</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="no" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>加精神</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>吐纳完成</name>
				<script>--expandAlias("hb")
if stat.food+0 &lt; 50 then
--if hp_info.food+0 &lt; 100 then
  eat_and_drink()
end
send("tuna 100")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你吐纳完毕，睁开双眼，站了起来。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>精不足</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>sleep</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你现在精不足，无法修行精力！</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>精神恢复</name>
				<script>--expandAlias("hb")
if stat.food+0 &lt; 50 then
--if hp_info.food+0 &lt; 100 then
  eat_and_drink()
end
send("tuna 10")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你略一凝神，精神看起来好多了。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>wake up</name>
				<script>--expandAlias("hb")
if stat.food+0 &lt; 50 then
--if hp_info.food+0 &lt; 100 then
  eat_and_drink()
end
send("tuna 50")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你一觉醒来，精神抖擞地活动了几下手脚。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>睡多</name>
				<script>tempTimer(10, function() send("tuna 10") end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你刚刚睡过一觉, 多睡对身体有害无益</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>修炼</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand>xiulian bihai-shengong</mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList>
				<string>^你从玄幻之境回过神来，顿觉内功修为增进不小。</string>
			</regexCodeList>
			<regexCodePropertyList>
				<integer>1</integer>
			</regexCodePropertyList>
		</Trigger>
		<Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>yun-qi</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand>yun qi</mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList>
				<string>^你减缓真气运行，让气血运行恢复正常。</string>
			</regexCodeList>
			<regexCodePropertyList>
				<integer>1</integer>
			</regexCodePropertyList>
		</Trigger>
		<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>积蓄攻势</name>
			<script>local qishi = matches[2]
-- 桃花到特技
taohua_perform_skills(qishi)</script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList>
				<string>你在攻击中不断积蓄攻势。\(气势：(.*)%\)</string>
			</regexCodeList>
			<regexCodePropertyList>
				<integer>1</integer>
			</regexCodePropertyList>
		</Trigger>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>孟之经任务</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="yes" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>捕捉任务信息</name>
				<script>showMultimatches()
echo("===&gt; 等候地址：" .. multimatches[2][2])
mrf_or_pozhen = "mzj"
mzj_to_waiting_room(multimatches[2][2])
dest_task_type("mzj")
dest_primary_address("建康", multimatches[2][2])
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>2</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你向孟之经打听.*$</string>
					<string>.*你先到(.*)等候.*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>通传</name>
				<script>tempTimer(1, function() 
  send("ask shiwei about 通传")
end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^都统制府侍卫说道：「没有经过通传，任何人等不得擅闯都统治府。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>准备</name>
				<script>expandAlias("shi")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你定睛一看，.*正是你要找的汉奸卖国贼！</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>韩世忠任务</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="yes" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>启动任务</name>
				<script>showMultimatches()
mrf_or_pozhen="hsz"
local city = multimatches[3][2]
local room = multimatches[3][3]
echo("city =&gt; "..city.." : room =&gt;"..room)
init_hsz(city, room)
dest_task_type("hsz")
dest_primary_address(city, room)
local dest = hsz_go()
send(dest)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>3</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你向韩世忠打听有关.*</string>
					<string>^韩世忠点了点头.*</string>
					<string>.*我听说有一群异族奸细在(.*)的(.*)附近出没.*</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>进副本准备工作</name>
				<script>tempTimer(2, function() 
  expandAlias("shi")
end)
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你进入了破阵任务副本</string>
					<string>^你进入了韩世忠任务副本</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>万安塔任务</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>发现番邦武士</name>
				<script>--番邦武士 日洛(Ri luo) &lt;战斗中&gt;
echo ("===")
echo("--&gt; "..matches[3])
local name = matches[3]
expandAlias("tan "..name)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>.*番邦武士.*\((.*) (.*)\) &lt;.*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>进塔</name>
				<script>expandAlias("shi")
expandAlias("tan wushi")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你进入了万安塔副本，可以通过leave gegewudaren命令来回到主站。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>陆家庄任务</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>陆-占挂</name>
				<script>select_one_gua(matches[2])
send("e;;e;;e;;e")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^陆乘风说道：「格格恶，我为你占得一卦：(.*)。」</string>
					<string>^系统回馈：(.*) = 0</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>开始桃花林任务</name>
				<script>take_one_step()</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你来到了一片桃花林里，立刻迷失了方向。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>桃花林任务结束</name>
				<script>tempTimer(2, function() 
  send("leave") 
  tempTimer(2, function() send("w;;w;;w;;") end)
end)
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^天色大变，陆乘风给你算的卦也不那么准了。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>单步走太快</name>
				<script>tempTimer(1, function() take_one_step() end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你的动作还没有完成，不能移动。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>继续桃花林任务</name>
				<script>increase_step()
tempTimer(2, function() take_one_step() end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你顺利地回到了起点。</string>
					<string>^你充满自信的向前走去，桃花阵看来也不在话下。</string>
					<string>^你渐渐发现，桃林的路径你烂熟于心，对你已不是挑战。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>回到大厅</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>ask lu about job</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>大厅 - </string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>走错</name>
				<script>tempTimer(2, function() restart_zhen() end)
--restart_zhen()</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你胡乱走着，像个没头苍蝇一样，有个声音冷笑：</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="yes" isPerlSlashGOption="yes" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>鉴定任务</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>1</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>s;;s;;na</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你向陆乘风打听有关『job』的消息。</string>
					<string>^陆乘风道：“师父喜爱古玩字画，</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>捡起古玩</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>jianding guwan</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你拣起了一套古玩。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>鉴定完毕</name>
				<script>identify_gudong(matches[2])
send("id")
send("n;;n;;w;;w")
tempTimer(1, function() 
  expandAlias("ggd")
  tempTimer(1, function() send("e;;e") end)
end)
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你发现手中的竟是(.*)。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>map古董id</name>
				<script>--echo("==&gt;"..matches[2]..":"..matches[3])
--^(.*)\s+=\s (\w*)$
map_gudong_to_id(matches[2], matches[3])
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^(.*)\s+= (.*)$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>捡起字画</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>jianding zihua</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你拣起了一套字画。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="yes" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>鉴定冷却</name>
				<script>tempTimer(10, function() send("ask lu about job") end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>1</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你向陆乘风打听有关『job』的消息。</string>
					<string>^陆乘风说道：「你刚做完鉴定任务，先去休息一会吧。」</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>慕容任务</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>发现家贼</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>walk -p;; follow jiazei</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>Benboba's murong jiazei</string>
					<string>Gegewudaren's murong jiazei</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>家贼卸下武士刀</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>wield jian</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^慕容世家家贼卸除了你的兵器武士刀</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>家贼死了</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>gz</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^慕容世家家贼死了。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>慕容任务完成</name>
				<script>murong_task["is_murong_task_done"] = "initial"</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^仆人在你的耳边悄声说道：为了表达对你的谢意，我已经在你的帐户存了一些辛苦费！</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>任务启动</name>
				<script>--echo("\n~~&gt;捕捉到家贼地址在："..matches[2].."\n")
murong_task["is_murong_task_done"] = "in_progress"
murong_task["murong_target_city"] = matches[2]
murong_task["murong_target_room"] = matches[3]
mrf_or_pozhen = "mrf"
dest_task_type("mrf")
dest_primary_address(matches[2], matches[3])
expandAlias("mgo")
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^仆人叹道：家贼难防，有人偷走了少爷的信件，据传曾在『(.*)的(.*)』附近出现，你去把它找回来吧！$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>任务启动-1</name>
				<script>murong_task["is_murong_task_done"] = "in_progress"
murong_task["current_mrf_location"] = ""
mrf_or_pozhen = "mrf"</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^仆人叹道：家贼难防，有人偷走了少爷的信件，据传曾在以下地点附近出现，你去把它找回来吧！$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>任务失败</name>
				<script>murong_task["is_murong_task_done"] = "initial"</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^由于你没有找回慕容复丢失的信件，被扣除：</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>途中发现家贼</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>walk -p</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>奔波灞发现的 慕容世家家贼</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>家贼卸下玄铁剑</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>wield dao</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^慕容世家家贼卸除了你的兵器玄铁剑</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>任务启动2</name>
				<script>murong_task["murong_target_city"] = matches[2]
murong_task["murong_target_room"] = matches[3]
dest_task_type("mrf")
dest_primary_address(matches[2], matches[3])
expandAlias("mgo")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^仆人叹道：家贼难防，有人偷走了少爷的信件，听说在(.*)的(.*)留下了线索，你去看看.*</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>破阵任务</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>reset 破阵环境</name>
				<script>disableTrigger("开战大恶")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>set wimpy 50;;unset forced_act</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>赶走冒充桃花岛的恶人之后，你可以回去向陆庄主复命了</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>开战大恶</name>
				<script>--echo("==find==")
local name = string.lower(matches[2])
echo("===&gt;"..name)
--expandAlias("tan "..name)
send("kill "..name)
--expandAlias("phf")
expandAlias("ps")
--send("perform sword.xiaohua "..name)

--.*大 恶.*\((.*)\) .*$</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>2</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>大 恶.*\((.*)\)</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="yes" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>领破阵任务</name>
				<script>--echo("===========\n")
--showMultimatches()
mrf_or_pozhen = "pozhen"
local city = multimatches[1][2]
local room = multimatches[1][3]
dest_task_type("pozhen")
dest_primary_address(city, room)
init_pozhen(city, room)

local dest = pozhen_go()
send(dest)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>1</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你对陆乘风道：“听闻近来有人冒名桃花岛弟子在(.*)的(.*)布下迷阵行恶.*$</string>
					<string>^陆乘风说道：「好吧，这件事就交给你了。」</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>南国围猎任务</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>画线索</name>
				<script>--刑捕头在你的耳边悄声说道：我们的线人在温州府的五马街留下了一幅图，看清楚之后找画师画好一样的送到桃花岛的草地。
mrf_or_pozhen="nanguo-1"
image_address(matches[2], matches[3])
reciever_address(matches[4],matches[5])

dest_task_type("nanguo-1")
dest_primary_address(matches[2], matches[3])
dest_secondary_addr(matches[4], matches[5])
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^.*我们的线人在(.*)的(.*)留下了一幅图.*画好一样的送到(.*)的(.*)。$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>狗窝线索</name>
				<script>-- 李悦翠在你的耳边悄声说道：腩虾的下三滥一直躲在潮州的南靖附近一处狗窝，只有jin 狗窝才能发现它们。
mrf_or_pozhen="nanguo-2"
dog_address(matches[2],matches[3])
dest_task_type("nanguo-2")
dest_primary_address(matches[2], matches[3])</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^.*下三滥一直躲在(.*)的(.*)附近一处狗窝.*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>显示图</name>
				<script>local action = matches[2]
--echo(action)
checking_image(action)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>.*如果中意，你可以买下\((.*)\)。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>intro</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>ask xing butou about intro</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^刑捕头说道：「你不想听我介绍(ask xing butou about intro)一下这伙人的来历吗？.*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>纪晓芙任务</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>启动任务</name>
				<script>-- 纪晓芙在你耳边轻声说道：“据说他们会在濠州府的富绅家密谋。”
mrf_or_pozhen="jxf"
init_jxf(matches[2],matches[3])
dest_task_type("jxf")
dest_primary_address(matches[2], matches[3])</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^纪晓芙在你耳边轻声说道.*会在(.*)的(.*)密谋.*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>胡一刀任务</name>
			<script>-- 你仔细观察之后，觉得很可能应该就在南大街。
-- 你仔细观察之后，觉得很可能应该就在魁星楼。
-- 和周围的人打听之后，你判断应该是在总镇署。
-- 你来到了大同，直觉告诉你到官道也许能找到些线索。
-- 直觉告诉你，下一步的线索应该在官道。
-- 和周围的人打听之后，你判断应该是在官道。
-- 你来到了河北，直觉告诉你到官道也许能找到些线索。
-- 
-- 
-- 你仔细观察之后，觉得很可能应该就在太平楼。
-- 和周围的人打听之后，你判断应该是在南门。
-- 你来到了大同，直觉告诉你到客栈也许能找到些线索。
-- 
-- 颜露绅说道：「你有种去河北找我兄弟，他会给我报仇的！」
-- 石万说道：「你有种去大同找我兄弟，他会给我报仇的！」
</script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="yes" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>启动任务</name>
				<script>local city = multimatches[2][2]
echo("===&gt; "..city)
dest_task_type("hyd-1")
dest_primary_address(city, "null")
kaiba() -- 开拔
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>1</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你向胡一刀打听有关『job』的消息.*$</string>
					<string>^胡一刀说道：「我收到消息，听说在(.*)有盗宝人找到了闯王宝藏的地图，你可否帮.*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>有种pattern</name>
				<script>-- 颜露绅说道：「你有种去河北找我兄弟，他会给我报仇的！」
local city = matches[2]
echo("===&gt; "..city)
dest_task_type("hyd-2")
dest_primary_address(city, "null")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>.*说道：「你有种去(.*)找我兄弟，他会给我报仇的！」</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>仔细观察</name>
				<script>-- 你仔细观察之后，觉得很可能应该就在南大街。
local room = matches[2]
echo("===&gt; "..room)
dest_task_type("hyd-3")
dest_primary_address("null", room)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>.*你仔细观察之后，觉得很可能应该就在(.*)。</string>
					<string>.*和周围的人打听之后，你判断应该是在(.*)。</string>
					<string>.*你来到了.*，直觉告诉你到(.*)也许能找到些线索。</string>
					<string>.*直觉告诉你，下一步的线索应该在(.*)。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
					<integer>1</integer>
					<integer>1</integer>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>合并图</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>combine</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^.*说道：「人算不如天算，想不到我兄弟.*都栽在你的手中.*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>按图索骥</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>启动任务</name>
				<script>dest_task_type("ywp") --- 余五婆
dest_primary_address(matches[2], matches[3])</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^余五婆(Yu wupo)告诉你：据说这个叛徒在(.*)的(.*)出现过.*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>萧峰</name>
			<script>-- 你向萧峰打听有关『job』的消息。
-- 萧峰点了点头：好！
-- 萧峰道：「传闻西夏一品堂派出了若干蒙面杀手，最近出现在小山村附近。
          -- 此人加入西夏一品堂不久，尚可教化，你去劝劝(quan)他吧。
          -- 此人武功深不可测，千万小心！」
-- 萧峰拍拍你的肩，说道：「格先生，就交给你了！珍重！」
-- 
-- 萧峰道：「传闻西夏一品堂派出了若干蒙面杀手，最近出现在洛阳附近。
          -- 此人于中原武林颇为有用，你去将他擒回这里交给我。打晕其之后若他再醒来，可直接点晕(dian)他。
          -- 此人武功颇强，务须准备周全。」
          -- 
-- 萧峰道：「传闻西夏一品堂派出了若干蒙面杀手，最近出现在小山村附近。
          -- 此人加入西夏一品堂不久，尚可教化，你去劝劝(quan)他吧。
          -- 此人武功深不可测，千万小心！」
-- 萧峰拍拍你的肩，说道：「格先生，就交给你了！珍重！」
-- 」
-- 萧峰道：「传闻西夏一品堂派出了若干蒙面杀手，最近出现在洛阳附近。
          -- 此人于中原武林颇为有用，你去将他擒回这里交给我。打晕其之后若他再醒来，可直接点晕(dian)他。
          -- 此人武功颇强，务须准备周全。」
-- 
-- 萧峰点了点头：好！
-- 萧峰道：「传闻西夏一品堂派出了若干蒙面杀手，最近出现在南阳附近。
          -- 此人气焰甚是嚣张，你去给他点颜色瞧瞧，让他认输就好。
          -- 此人武功应是你我之大敌，应以智取，不可硬拼。」
-- 
-- 萧峰点了点头：好！
-- 萧峰道：「传闻西夏一品堂派出了若干蒙面杀手，最近出现在泰山附近。
          -- 此人为非作歹，早已恶贯满盈。你去将他除掉，取其首级回来。
          -- 此人武功应该和你相仿，但务必不可掉以轻心。         </script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>推车</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>重置推车</name>
				<script>tempTimer(1.5, function()
  send("ask lin about 重置任务")
end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>林震南(Lin zhennan)告诉你：壮士果然是栋梁之才</string>
					<string>林震南(Lin zhennan)告诉你：这点小事你都办不好，还能指望你作些什么呢？</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>弹劫匪</name>
				<script>expandAlias("tan robber")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^劫匪突然从暗处跳了出来，阴笑道.*4</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>兵器被下</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand>wield flute;;wield flute 2</mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList>
				<string>^.*卸除了你的兵器.*$</string>
			</regexCodeList>
			<regexCodePropertyList>
				<integer>1</integer>
			</regexCodePropertyList>
		</Trigger>
		<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>继续走</name>
			<script>tempTimer(1, function() send("walk") end)</script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList>
				<string>你因为种种原因停了下来，可以用walk继续进行。</string>
			</regexCodeList>
			<regexCodePropertyList>
				<integer>0</integer>
			</regexCodePropertyList>
		</Trigger>
		<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>下车</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand>xia</mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList>
				<string>大车停稳了下来，你可以下车(xia)了</string>
			</regexCodeList>
			<regexCodePropertyList>
				<integer>0</integer>
			</regexCodePropertyList>
		</Trigger>
		<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>下船</name>
			<script>--display_node_list()</script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand>out</mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList>
				<string>到啦，上岸吧</string>
				<string>船工放下跳板，招呼大家下船了。</string>
			</regexCodeList>
			<regexCodePropertyList>
				<integer>0</integer>
				<integer>0</integer>
			</regexCodePropertyList>
		</Trigger>
		<Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>记录房间文本</name>
			<script>if not mapper then
  return
end

-- 从 matches[2] 取真实的文本
local txt = matches[2] or ""
-- echo("=========== text: "..txt.."=====\n")
-- 如果这一行本来就是空行，就算了
if txt == "" then
  return
end

-- 调试用：先看看是不是真的有东西
--echo("[CAPTURE] [" .. txt .. "]\n")

if not mapper.lastRoomText or mapper.lastRoomText == "" then
  mapper.lastRoomText = txt
else
  mapper.lastRoomText = mapper.lastRoomText .. "\n" .. txt
end
</script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList>
				<string>^(.*)$</string>
			</regexCodeList>
			<regexCodePropertyList>
				<integer>1</integer>
			</regexCodePropertyList>
		</Trigger>
		<Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>prompt触发器</name>
			<script>if mapper then
  mapper:checkSearchAfterRoomText()
end
</script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList>
				<string></string>
			</regexCodeList>
			<regexCodePropertyList>
				<integer>7</integer>
			</regexCodePropertyList>
		</Trigger>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>行走中的trigger</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Parse NPC</name>
				<script>-- echo("\ntitle = "..matches[2].."\n")
-- echo("name = "..matches[3].."\n")
local title = matches[2]
local name = matches[3]
find_npc(title, name)
if name == "刑捕头" then 
  expandAlias("mload cz")
elseif title == "卢氏县百姓" then
  expandAlias("mload lushi")  
elseif title == "泰安百姓" then
  expandAlias("mload taian")
elseif title == "代州百姓" then
  expandAlias("mload dzhou")  
elseif title == "明州平民" then
  expandAlias("mload mz")  
elseif title == "衡州百姓" then
  expandAlias("mload hengz")   
elseif title == "长沙府平民" then
  expandAlias("mload csha")     
elseif title == "耍猴艺人" then
  expandAlias("mload sr")   
elseif title == "处州府百姓" then
  expandAlias("mload chuz")   
elseif title == "绍兴府百姓" then
  expandAlias("mload sx")   
elseif title == "大同百姓" then
  expandAlias("mload datong")      
elseif title == "衢州平民" then
  expandAlias("mload quz")     
elseif title == "小贩" and name == "曹云" then
  expandAlias("mload wenz")  
elseif title == "明州平民" then
  expandAlias("mload mz")   
elseif title == "南阳平民" then
  expandAlias("mload nanyang")   
elseif name == "柳快嘴" then
  expandAlias("mload tt")     
end</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^\s+(.*) (.*)\(.*\)$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>你到达了...</name>
				<script>-- walk的时候，到达了目的地
local name = matches[2]
local map_code = get_map_code(name)
expandAlias("mload "..map_code)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^你到达了(.*)。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="no" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>walk信息采集</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>抓表头</name>
				<script>walkcap = walkcap or {}
walkcap.active = true
walkcap.rows = {}

local hub = matches[2]  -- 捕获的城市名，比如 扬州
walkcap.hub = hub

cecho(string.format("\n&lt;green&gt;[WalkCap] START hub=%s&lt;/green&gt;\n", hub))

</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^\s*┌.*?([^\s─┬┐]+).*?┐\s*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>抓目的地</name>
				<script>if not (walkcap and walkcap.active) then return end

local s = line:gsub("^%s+", "")  -- 去掉行首空格
local left, py = s:match("^│(.-)│%s*([a-z0-9_]+)%s*│")
if not left or not py then return end

-- left 形如： "建康府  ◇ 长江渡口"
local nodeCN = left:match("^(.-)%s*◇") or left
nodeCN = nodeCN:gsub("%s+$","")

table.insert(walkcap.rows, { node = nodeCN, py = py })

cecho(string.format("\n&lt;cyan&gt;[WalkCap]&lt;/cyan&gt; + %s -&gt; %s", nodeCN, py))
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^\s*│.*◇.*│\s*[a-z0-9_]+\s*│\s*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>抓表尾</name>
				<script>if not (walkcap and walkcap.active) then return end
walkcap.active = false

-- 去重（同一表格偶尔会重复行）
local seen = {}
local edges = {}
for _, r in ipairs(walkcap.rows or {}) do
  local k = r.node .. "|" .. r.py
  if not seen[k] then
    seen[k] = true
    table.insert(edges, r)
  end
end

table.sort(edges, function(a,b)
  return (a.node .. a.py) &lt; (b.node .. b.py)
end)

local hub = walkcap.hub or "UNKNOWN"
cecho(string.format("\n&lt;green&gt;[WalkCap] DONE&lt;/green&gt; hub=%s, edges=%d\n", hub, #edges))

-- ===== 输出 walk_node 片段（可直接 paste）=====
cecho("\n&lt;yellow&gt;----- COPY BELOW -----&lt;/yellow&gt;\n")
cecho(string.format('walk_node["%s"] = {region = "%s", map = "",\n', hub, hub))
cecho("  edges = {\n")
for _, e in ipairs(edges) do
  cecho(string.format('    {node = "%s", path = "walk %s"},\n', e.node, e.py))
end
cecho("  }\n}\n")
cecho("&lt;yellow&gt;----- COPY ABOVE -----&lt;/yellow&gt;\n")
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^\s*│walk\s+\[拼音名\].*$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>DBG_WALK_BOX</name>
				<script>-- 只在你输入 walk 之后的 3 秒内打印，避免刷屏
walk_capture_dbg = walk_capture_dbg or { until_ts = 0 }

local now = getEpoch()
if now &lt;= (walk_capture_dbg.until_ts or 0) then
  cecho("\n&lt;yellow&gt;[DBG]&lt;/yellow&gt; " .. line .. "\n")
end
</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>^(.*)$</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>1</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="no" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>搬砖</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>回白家</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand>do 3 s;e;n;ask bai about help;ban brick</mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你把砖头重重地堆在这里，舒坦地活动了一下肩膀</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>放砖</name>
				<script>tempTimer(3, function() send("dui") end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>地上堆了一堆砖头(bricks)</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>放砖2</name>
				<script>tempTimer(1, function() send("dui") end)</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你背砖头走的太急了，歇会再堆砖头吧！</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>开始搬砖</name>
				<script>expandAlias("go")</script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>你抱起了一块青砖。</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>0</integer>
				</regexCodePropertyList>
			</Trigger>
		</TriggerGroup>
		<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>generic_mapper</name>
			<script></script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName>generic_mapper</packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList />
			<regexCodePropertyList />
			<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>onNewLine Trigger</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList>
					<string>raiseEvent("onNewLine")</string>
				</regexCodeList>
				<regexCodePropertyList>
					<integer>4</integer>
				</regexCodePropertyList>
			</Trigger>
			<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>English Trigger Group</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList />
				<regexCodePropertyList />
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>English Exits Trigger</name>
					<script>raiseEvent("onNewRoom",matches[2] or "")</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>(?i)^\s*\[\s*Exits:\s*(.*)\]</string>
						<string>^\s*There (?:is|are) \w+ (?:visible|obvious) exit[s]?:\s*(.*)</string>
						<string>^\[?[\s\w]*(?:[Vv]isible|[Oo]bvious) (?:[Pp]ath|[Ee]xit)[s]?(?: is| are)?:?\s*(.*)\]?</string>
						<string>^\s*You see[\w\s]* exit[s]? leading (.*)</string>
						<string>Exits:\s*(.*)</string>
						<string>There are no obvious exits.</string>
						<string>^\s*The (?:only )?obvious exit[s]? (?:is|are):? (.*)</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>2</integer>
						<integer>1</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>English Failed Move Trigger</name>
					<script>raiseEvent("onMoveFail")</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>^(?:Alas, )?[Yy]ou can(?:no|')t (?:go|move) .*$</string>
						<string>^The .+ (?:is|seems to be) closed.$</string>
						<string>.+ (?:is not going to|will not) let you pass.$</string>
						<string>^That exit is blocked.$</string>
						<string>^You are blocked by .*$</string>
						<string>^There is no exit in that direction.$</string>
						<string>^The .* is locked.$</string>
						<string>^Alas, you cannot go that way\.\.\.$</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>English Vision Fail Trigger</name>
					<script>raiseEvent("onVisionFail")</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>^It is pitch black...</string>
						<string>^It(?:'s| is) too dark</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>1</integer>
						<integer>1</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>English Forced Move Trigger</name>
					<script>raiseEvent("onForcedMove",matches[2])</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>^Carefully getting your bearings, you set off (\w+) toward your goal.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>1</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="no" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>English Multi-Line Exits Trigger</name>
					<script>map.prompt.exits = ""</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>1</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>(?i:^(obvious|visible) exits:)</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>1</integer>
					</regexCodePropertyList>
					<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
						<name>Exit Line Trigger</name>
						<script>map.prompt.exits = map.prompt.exits .. ", " .. string.trim(matches[2])
setTriggerStayOpen("English Multi-Line Exits Trigger",1)</script>
						<triggerType>0</triggerType>
						<conditonLineDelta>0</conditonLineDelta>
						<mStayOpen>0</mStayOpen>
						<mCommand></mCommand>
						<packageName></packageName>
						<mFgColor>#ff0000</mFgColor>
						<mBgColor>#ffff00</mBgColor>
						<mSoundFile></mSoundFile>
						<colorTriggerFgColor>#000000</colorTriggerFgColor>
						<colorTriggerBgColor>#000000</colorTriggerBgColor>
						<regexCodeList>
							<string>^([\w\s]+)\s*: [\w\s]+</string>
						</regexCodeList>
						<regexCodePropertyList>
							<integer>1</integer>
						</regexCodePropertyList>
					</Trigger>
				</Trigger>
			</TriggerGroup>
			<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Russian Trigger Group</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList />
				<regexCodePropertyList />
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Russian Exits Trigger</name>
					<script>raiseEvent("onNewRoom",matches[2] or "")</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>^\s*\[\s*Выходы:\s*(.*)\]</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>1</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Russian Failed Move Trigger</name>
					<script>raiseEvent("onMoveFail")</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Извини, но ты не можешь туда идти.</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Russian Vision Fail Trigger</name>
					<script>raiseEvent("onVisionFail")</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>Здесь слишком темно ...</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
					</regexCodePropertyList>
				</Trigger>
			</TriggerGroup>
			<TriggerGroup isActive="yes" isFolder="yes" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
				<name>Chinese Trigger Group</name>
				<script></script>
				<triggerType>0</triggerType>
				<conditonLineDelta>0</conditonLineDelta>
				<mStayOpen>0</mStayOpen>
				<mCommand></mCommand>
				<packageName></packageName>
				<mFgColor>#ff0000</mFgColor>
				<mBgColor>#ffff00</mBgColor>
				<mSoundFile></mSoundFile>
				<colorTriggerFgColor>#000000</colorTriggerFgColor>
				<colorTriggerBgColor>#000000</colorTriggerBgColor>
				<regexCodeList />
				<regexCodePropertyList />
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Chinese Exits Trigger</name>
					<script>raiseEvent("onNewRoom",matches[2] or "")</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>^\s*这里明显的方向有 (.*)。</string>
						<string>^\s*这里明显的出口有 (.*)。</string>
						<string>^\s*这里明显的出口是 (.*)。</string>
						<string>^\s*这里唯一的出口是 (.*)。</string>
						<string>^\s*這裏明顯的出口是 (.*)。</string>
						<string>^\s*這裏唯一的出口是 (.*)。</string>
						<string>^\s*這裏明顯的方向有 (.*)。</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
						<integer>1</integer>
					</regexCodePropertyList>
				</Trigger>
				<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
					<name>Chinese Failed Movement Trigger</name>
					<script>raiseEvent("onMoveFail")</script>
					<triggerType>0</triggerType>
					<conditonLineDelta>0</conditonLineDelta>
					<mStayOpen>0</mStayOpen>
					<mCommand></mCommand>
					<packageName></packageName>
					<mFgColor>#ff0000</mFgColor>
					<mBgColor>#ffff00</mBgColor>
					<mSoundFile></mSoundFile>
					<colorTriggerFgColor>#000000</colorTriggerFgColor>
					<colorTriggerBgColor>#000000</colorTriggerBgColor>
					<regexCodeList>
						<string>你又渴又饿，浑身无力，根本就走不动路。</string>
						<string>这个方向没有出路。</string>
						<string>^看来(\w+)不打算让你过去。</string>
					</regexCodeList>
					<regexCodePropertyList>
						<integer>0</integer>
						<integer>0</integer>
						<integer>1</integer>
					</regexCodePropertyList>
				</Trigger>
			</TriggerGroup>
		</TriggerGroup>
		<Trigger isActive="yes" isFolder="no" isTempTrigger="no" isMultiline="no" isPerlSlashGOption="no" isColorizerTrigger="no" isFilterTrigger="no" isSoundTrigger="no" isColorTrigger="no" isColorTriggerFg="no" isColorTriggerBg="no">
			<name>fullme</name>
			<script>local url = matches[2]
--echo("-===&gt; fullme url: "..url)
fullme.showFromUrl(url)
</script>
			<triggerType>0</triggerType>
			<conditonLineDelta>0</conditonLineDelta>
			<mStayOpen>0</mStayOpen>
			<mCommand></mCommand>
			<packageName></packageName>
			<mFgColor>#ff0000</mFgColor>
			<mBgColor>#ffff00</mBgColor>
			<mSoundFile></mSoundFile>
			<colorTriggerFgColor>#000000</colorTriggerFgColor>
			<colorTriggerBgColor>#000000</colorTriggerBgColor>
			<regexCodeList>
				<string>^(http://fullme\.pkuxkx\.(?:com|net)/robot\.php\?filename=\d+)$</string>
			</regexCodeList>
			<regexCodePropertyList>
				<integer>1</integer>
			</regexCodePropertyList>
		</Trigger>
	</TriggerPackage>
	<TimerPackage>
		<Timer isActive="no" isFolder="no" isTempTimer="no" isOffsetTimer="no">
			<name>study-advanced</name>
			<script>--expandAlias("hb")
send("yun qi")
local level = 50
if stat.food+0 &lt; level or stat.water+0 &lt; level then
  eat_and_drink()
end
--lingwu finger</script>
			<command>do 6 lian parry 1</command>
			<packageName></packageName>
			<time>00:00:01.000</time>
		</Timer>
		<Timer isActive="no" isFolder="no" isTempTimer="no" isOffsetTimer="no">
			<name>disable script</name>
			<script>-- status_handler
disableScript("status_handler")</script>
			<command></command>
			<packageName></packageName>
			<time>01:00:00.000</time>
		</Timer>
		<Timer isActive="no" isFolder="no" isTempTimer="no" isOffsetTimer="no">
			<name>练dodge的调度</name>
			<script>if hp_info.current_neili &gt; 1400 and hp_info.current_xue &gt; 600 then
  enableScript("study")
  enableTrigger("yun-qi")
  disableTrigger("dazuo-yc")
  echo(" ==&gt; neili &gt; 1400 and xue &gt; 600")
elseif hp_info.current_neili &lt; 400 or hp_info.current_xue &lt; 200 then
  echo(" --&gt; neili &lt; 400 or xue &lt; 600")
  enableTrigger("dazuo-yc")
  disableScript("study")
  disableTrigger("yun-qi")    
  send("dazuo 10")  
end</script>
			<command></command>
			<packageName></packageName>
			<time>00:02:00.000</time>
		</Timer>
		<Timer isActive="no" isFolder="no" isTempTimer="no" isOffsetTimer="no">
			<name>study - basic</name>
			<script>--expandAlias("hb")
--echo("---==&gt; food: "..stat.food)
--echo("---==&gt; water: "..stat.water)
send("yun jing")
local level = 50
if stat.food+0 &lt; level or stat.water+0 &lt; level then
  eat_and_drink()
end
--lingwu finger</script>
			<command>lingwu sword</command>
			<packageName></packageName>
			<time>00:00:01.000</time>
		</Timer>
		<Timer isActive="no" isFolder="no" isTempTimer="no" isOffsetTimer="no">
			<name>练dodge</name>
			<script>if stat.food+0 &lt; 50 or stat.water+0 &lt; 50 then
   eat_and_drink()
end

if stat.qi+0 &gt; 900 then
  send("lian dodge 10")
end</script>
			<command></command>
			<packageName></packageName>
			<time>00:00:10.000</time>
		</Timer>
		<Timer isActive="no" isFolder="no" isTempTimer="no" isOffsetTimer="no">
			<name>New timer</name>
			<script></script>
			<command>cai zhuang</command>
			<packageName></packageName>
			<time>00:00:00.900</time>
		</Timer>
	</TimerPackage>
	<AliasPackage>
		<AliasGroup isActive="no" isFolder="yes">
			<name>run-lua-code</name>
			<script></script>
			<command></command>
			<packageName>run-lua-code</packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>run lua code</name>
				<script>local f, e = loadstring("return "..matches[2])
if not f then
  f, e = assert(loadstring(matches[2]))
end

local r =
  function(...)
    if not table.is_empty({...}) then
      display(...)
    end
  end
r(f())</script>
				<command></command>
				<packageName></packageName>
				<regex>^lua (.*)$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="no" isFolder="yes">
			<name>echo</name>
			<script></script>
			<command></command>
			<packageName>echo</packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>`echo</name>
				<script>local s = matches[2]

s = string.gsub(s, "%$", "\n")
feedTriggers("\n" .. s .. "\n")
echo("\n")</script>
				<command></command>
				<packageName></packageName>
				<regex>`echo (.+)</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>`cecho</name>
				<script>local s = matches[2]

s = string.gsub(s, "%$", "\n")
cfeedTriggers("\n" .. s .. "\n")
echo("\n")</script>
				<command></command>
				<packageName></packageName>
				<regex>`cecho (.+)</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>`decho</name>
				<script>local s = matches[2]

s = string.gsub(s, "%$", "\n")
dfeedTriggers("\n" .. s .. "\n")
echo("\n")</script>
				<command></command>
				<packageName></packageName>
				<regex>`decho (.+)</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>`hecho</name>
				<script>local s = matches[2]

s = string.gsub(s, "%$", "\n")
hfeedTriggers("\n" .. s .. "\n")
echo("\n")</script>
				<command></command>
				<packageName></packageName>
				<regex>`hecho (.+)</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="no" isFolder="yes">
			<name>deleteOldProfiles</name>
			<script></script>
			<command></command>
			<packageName>deleteOldProfiles</packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>delete old profiles</name>
				<script>deleteOldProfiles(matches[3], matches[2])

--Syntax examples: "delete old profiles"  -&gt; deletes profiles older than 31 days
--					"delete old maps 10"	-&gt; deletes maps older than 10 days</script>
				<command></command>
				<packageName></packageName>
				<regex>^delete old (profiles|maps|modules)(?: (\d+))?$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="no" isFolder="yes">
			<name>enable-accessibility</name>
			<script></script>
			<command></command>
			<packageName>enable-accessibility</packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>mudlet accessibility on</name>
				<script>echo("Welcome to Mudlet!\n")
echo("Let's adjust a few preferences to improve the visually impaired experience:\n")

setConfig("autoClearInputLine", true)
echo("Text will now be removed from the input line after it was sent ✓\n")
setConfig("showSentText", false)
echo("Text sent to the game will not appear in the main window ✓\n")

setConfig("caretShortcut", "ctrltab")
echo("Shortcut to switch between input line and main window set to Ctrl+Tab. You can also change it to either Tab or F6 in settings.\n")

if getOS() == "windows" then
  setConfig("blankLinesBehaviour", "hide")
  echo("Blank lines will be removed from the output ✓\n")
end

if getOS() == "mac" then
  echo("\nYou're on a mac and VoiceOver will skip reading text when there's lots of it coming in. Would you like to install a third-party TTS plugin to alleviate this issue?\n")
  echo("Type 'mudlet access reader' if so.\n")
  echo("See https://wiki.mudlet.org/w/Accessibility_on_OSX if you'd like to learn more.\n")
end

echo("\nThat's all, enjoy Mudlet!\n")</script>
				<command></command>
				<packageName></packageName>
				<regex>^mudlet access(?:ibility)? on$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>mudlet accessibility reader</name>
				<script>uninstallPackage"reader"
installPackage"https://github.com/tspivey/mudlet-reader/releases/latest/download/reader.mpackage"</script>
				<command></command>
				<packageName></packageName>
				<regex>^mudlet access(?:ibility)? reader$</regex>
			</Alias>
		</AliasGroup>
		<Alias isActive="yes" isFolder="no">
			<name>hb brief</name>
			<script></script>
			<command>hpbrief</command>
			<packageName></packageName>
			<regex>^hb$</regex>
		</Alias>
		<Alias isActive="yes" isFolder="no">
			<name>where</name>
			<script>if get_task_type() == "mrf" then
  echo("mrf: --&gt; "..primary_dest().city..":"..primary_dest().room)
elseif get_task_type() == "pozhen" then
  echo("pozhen: --&gt; "..pozhen_task.city..":"..pozhen_task.room)
elseif get_task_type() == "hsz" then
  echo("hsz: --&gt; ".._task.city..":".._task.room)
elseif get_task_type() == "mzj" then 
  echo("mzj: --&gt; waiting room: "..mzj.waiting_room)
elseif get_task_type() == "jxf" then 
  echo("jxf: --&gt; "..jxf.city..": "..jxf.room)  
elseif get_task_type() == "nanguo-1" then 
  echo("nanguo 1: --&gt; \nimage address -&gt; "..nanguo.image_city..":"..nanguo.image_room)
  echo("\n reciever address -&gt; "..nanguo.reciever_city..":"..nanguo.reciever_room)
elseif get_task_type() == "nanguo-2" then 
  echo("dog: --&gt; "..nanguo.dog_city..":"..nanguo.dog_room)
elseif get_task_type() == "hyd-1" or get_task_type() == "hyd-2" then 
  cecho("&lt;yellow&gt; 盗宝人目标城市: &lt;red&gt;"..primary_dest().city)
elseif get_task_type() == "hyd-3" then 
  cecho("&lt;yellow&gt; 盗宝人目标&lt;房间&gt;: &lt;red&gt;"..primary_dest().room)       
elseif get_task_type() == "ywp" then 
  cecho("&lt;yellow&gt;叛徒在: &lt;red&gt;"..primary_dest().city.." : &lt;red&gt;"..primary_dest().room)      
else

end
</script>
			<command></command>
			<packageName></packageName>
			<regex>^where$</regex>
		</Alias>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>杂项</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>回血</name>
				<script></script>
				<command>yun recover</command>
				<packageName></packageName>
				<regex>^yc$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>回气</name>
				<script></script>
				<command>yun regenerate</command>
				<packageName></packageName>
				<regex>^yr$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>最大打坐</name>
				<script></script>
				<command>dazuo max</command>
				<packageName></packageName>
				<regex>^dm$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>get all</name>
				<script>tempTimer(1, function() 
  expandAlias("gc2")
  tempTimer(1, function() 
    expandAlias("gc3")
    tempTimer(1, function() expandAlias("gc4") end)
  end)
end)


</script>
				<command>get all from corpse</command>
				<packageName></packageName>
				<regex>^gc$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>抄经</name>
				<script></script>
				<command>ask sengren about job;;node walk sms_sjy</command>
				<packageName></packageName>
				<regex>^chaojing$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>抄经返回</name>
				<script></script>
				<command>node walk sjy_sms</command>
				<packageName></packageName>
				<regex>^jing_back$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>疗伤</name>
				<script></script>
				<command>yun heal</command>
				<packageName></packageName>
				<regex>^yh$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>加力</name>
				<script></script>
				<command>yun powerup;;yun qi</command>
				<packageName></packageName>
				<regex>^yp$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>get all</name>
				<script></script>
				<command>get all</command>
				<packageName></packageName>
				<regex>^ga$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>gz</name>
				<script></script>
				<command>get xin from corpse;;get gold from corpse;;get silver from corpse</command>
				<packageName></packageName>
				<regex>^gz$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>node walk</name>
				<script>send("node walk "..matches[2])</script>
				<command></command>
				<packageName></packageName>
				<regex>^# (.*)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>回兰</name>
				<script></script>
				<command>yun inspire</command>
				<packageName></packageName>
				<regex>^yi$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>walk-p</name>
				<script></script>
				<command>walk -p</command>
				<packageName></packageName>
				<regex>^wp$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>cancel任务</name>
				<script>job_fail()</script>
				<command></command>
				<packageName></packageName>
				<regex>^fail$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>任务完成</name>
				<script>job_done()</script>
				<command></command>
				<packageName></packageName>
				<regex>^done$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>要任务</name>
				<script>ask_job()</script>
				<command></command>
				<packageName></packageName>
				<regex>^job$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>jifa_all</name>
				<script>send("jifa force bihai-shengong")
send("jifa dodge luoying-shenfa")
send("jifa parry yuxiao-jian")
send("jifa sword yuxiao-jian")
send("jifa throwing tanzhi-shentong")
send("jifa strike luoying-zhang")
send("jifa hand fuxue-shou")
send("jifa finger tanzhi-shentong")
send("bei tanzhi-shentong")
send("bei fuxue-shou")
</script>
				<command></command>
				<packageName></packageName>
				<regex>^jifa_all$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>kill</name>
				<script>send("kill "..matches[2])</script>
				<command></command>
				<packageName></packageName>
				<regex>^k (.*)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>gc2</name>
				<script></script>
				<command>get all from corpse 2</command>
				<packageName></packageName>
				<regex>^gc2$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>gc3</name>
				<script></script>
				<command>get all from corpse 3</command>
				<packageName></packageName>
				<regex>^gc3$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>gc4</name>
				<script></script>
				<command>get all from corpse 4</command>
				<packageName></packageName>
				<regex>^gc4$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>gc1</name>
				<script></script>
				<command>get all from corpse</command>
				<packageName></packageName>
				<regex>^gc1$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>捡石头</name>
				<script></script>
				<command>get stone from corpse;get gold from corpse;get silver from corpse;get coin from corpse;get xin from corpse</command>
				<packageName></packageName>
				<regex>^ggs$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>上装备</name>
				<script>send("wear newam_41")
send("wear newam_42")
send("wear newam_45")
send("wear newam_46")
send("wear newam_47")
send("wear newam_48")
send("wear am_39")
send("wear am_38")
send("wear am_37")
send("wear am_36")
send("wear am_40")
send("wear am_35")
send("wear am_34")
send("wear am_44")
send("wear am_43")
send("wield wp_18")
send("wear lupi dai")
</script>
				<command></command>
				<packageName></packageName>
				<regex>^install_all$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>慕容</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>杀贼</name>
				<script>expandAlias("kill jiazei")
--expandAlias("pft jiazei")</script>
				<command></command>
				<packageName></packageName>
				<regex>^kz$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>mback</name>
				<script>send(murong_task["current_mrf_location"])</script>
				<command></command>
				<packageName></packageName>
				<regex>^mback$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>拜庄</name>
				<script></script>
				<command>ask girl about 拜庄;;enter boat</command>
				<packageName></packageName>
				<regex>^baizhuang$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>murong go</name>
				<script>if murong_task["murong_target_city"] == "衢州" then
  send("node walk mrf_qz1")
elseif murong_task["murong_target_city"] == "温州府" then
  send("node walk mrf_wenz")
elseif murong_task["murong_target_city"] == "上饶" then
  send("node walk mrf_sr")
elseif murong_task["murong_target_city"] == "临安府" then
  send("node walk mrf_hz")
elseif murong_task["murong_target_city"] == "义兴县" then
  send("node walk mrf_yx")
elseif murong_task["murong_target_city"] == "南昌" then
  send("node walk mrf_nc")
elseif murong_task["murong_target_city"] == "嘉兴" then
  send("node walk mrf_jx")  
  
elseif murong_task["murong_target_city"] == "处州府" then
  send("node walk mrf_czf1")  
elseif murong_task["murong_target_city"] == "姑苏慕容" then
  send("node walk mrf_gsmr")   
elseif murong_task["murong_target_city"] == "岳王墓" then
  send("node walk mrf_yfm")  
elseif murong_task["murong_target_city"] == "建宁府" then
  send("node walk mrf_jn")  
elseif murong_task["murong_target_city"] == "建康府北城" then
  send("node walk mrf_jk")  
elseif murong_task["murong_target_city"] == "建康府南城" then
  send("node walk mrf_cym")  
  
elseif murong_task["murong_target_city"] == "归云庄" then
  send("node walk mrf_gyz")  
elseif murong_task["murong_target_city"] == "明州" then
  send("node walk mrf_mz")   
elseif murong_task["murong_target_city"] == "杭州提督府" then
  send("node walk mrf_tdf")  
elseif murong_task["murong_target_city"] == "武夷山" then
  send("node walk mrf_wuyi")  
elseif murong_task["murong_target_city"] == "江州" then
  send("node walk mrf_jz")  
elseif murong_task["murong_target_city"] == "泉州" then
  send("node walk mrf_qz")  
  
elseif murong_task["murong_target_city"] == "湖州" then
  send("node walk mrf_hzf")  
elseif murong_task["murong_target_city"] == "潮州" then
  send("node walk mrf_cz")   
elseif murong_task["murong_target_city"] == "绍兴府" then
  send("node walk mrf_sx")  
elseif murong_task["murong_target_city"] == "西湖" then
  send("node walk mrf_xhab")  
elseif murong_task["murong_target_city"] == "铜官山" then
  send("node walk mrf_tgz")  
elseif murong_task["murong_target_city"] == "镇江" then
  send("node walk mrf_zj")    
  
elseif murong_task["murong_target_city"] == "闽中" then
  send("node walk mrf_fz") 
elseif murong_task["murong_target_city"] == "雁荡山" then
  send("node walk mrf_yds")   
elseif murong_task["murong_target_city"] == "龙泉镇" then
  send("node walk mrf_lqz") 
elseif murong_task["murong_target_city"] == "雁荡山" then
  send("node walk mrf_yds")   
  
elseif murong_task["murong_target_city"] == "桃花岛" then
  send("node walk mrf_mz")  
  elseif murong_task["murong_target_city"] == "无锡" then
  send("node walk mrf_wx") 
               
end</script>
				<command></command>
				<packageName></packageName>
				<regex>^mgo$</regex>
			</Alias>
		</AliasGroup>
		<Alias isActive="yes" isFolder="no">
			<name>Test script</name>
			<script>local url = "http://fullme.pkuxkx.com/robot.php?filename=1769910110136544"
fullme.showFromUrl(url)
</script>
			<command></command>
			<packageName></packageName>
			<regex>^testscript$</regex>
		</Alias>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>爵位任务</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>add luren</name>
				<script>add_to_luren_set()</script>
				<command></command>
				<packageName></packageName>
				<regex>^addlr$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>clear luren set</name>
				<script>clear_luren_set()
echo("--done!--\n")</script>
				<command></command>
				<packageName></packageName>
				<regex>^cluren$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>请求任务</name>
				<script></script>
				<command>ask shaoyin about 任务信息</command>
				<packageName></packageName>
				<regex>^jjob$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>处理路人</name>
				<script>local target = matches[2]
send("l "..target)
tempTimer(2, function()
  add_to_luren_set()
  tempTimer(2, function()
    send("ask "..target.." about 消息")
  end) 
end)
</script>
				<command></command>
				<packageName></packageName>
				<regex>^ll (.*)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>补消息</name>
				<script>--echo("--&gt;:"..matches[2])
--echo("++&gt;:"..matches[3])

if matches[2] and matches[3] then
  set_message(matches[2], matches[3])
end</script>
				<command></command>
				<packageName></packageName>
				<regex>^bu (.*)\s+(.*)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>领赏</name>
				<script></script>
				<command>ask shaoyin about 领赏</command>
				<packageName></packageName>
				<regex>^jdone$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>指认</name>
				<script>if matches[2] then
  send("ask "..matches[2].." about 盗贼")
end</script>
				<command></command>
				<packageName></packageName>
				<regex>^zr\s(.*)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>结果</name>
				<script>get_result()</script>
				<command></command>
				<packageName></packageName>
				<regex>^jresult$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>人工分析</name>
				<script>identify_all_luren_with_true_clue()
identify_all_luren_with_opposite_clue()</script>
				<command></command>
				<packageName></packageName>
				<regex>^jshougong$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>back_to_somewhere</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>回扬州</name>
				<script>back_to_yangzhou()</script>
				<command></command>
				<packageName></packageName>
				<regex>^byz$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>扬州去江边</name>
				<script></script>
				<command>s;;s;;s;;s;;su;;se;;su;;e;;ask guan about jiang</command>
				<packageName></packageName>
				<regex>^jiangbian$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>回杭州</name>
				<script>back_to_hz()</script>
				<command></command>
				<packageName></packageName>
				<regex>^bhz$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>回破阵</name>
				<script>back_to_pozhen()</script>
				<command></command>
				<packageName></packageName>
				<regex>^bp$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>回长安</name>
				<script>back_to_changan()</script>
				<command></command>
				<packageName></packageName>
				<regex>^bca$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>回洛阳</name>
				<script>back_to_luoyang()</script>
				<command></command>
				<packageName></packageName>
				<regex>^bly$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>交花</name>
				<script>back_to_hua()</script>
				<command></command>
				<packageName></packageName>
				<regex>^hua$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>回韩世忠</name>
				<script>back_to_hsz()</script>
				<command></command>
				<packageName></packageName>
				<regex>^bh$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>回孟之经</name>
				<script>back_to_mzj()</script>
				<command></command>
				<packageName></packageName>
				<regex>^bmeng$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>back to mrf</name>
				<script>back_to_mrf()</script>
				<command></command>
				<packageName></packageName>
				<regex>^bmr$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>back to hyd</name>
				<script>back_to_hyd()</script>
				<command></command>
				<packageName></packageName>
				<regex>^bhu$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>陆家庄</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>交古董</name>
				<script>send("give lu "..lujiazhuang.gudong_id)</script>
				<command></command>
				<packageName></packageName>
				<regex>^ggd$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>普通任务</name>
				<script></script>
				<command>unset forced_act;;jiali 0;;ask lu about job</command>
				<packageName></packageName>
				<regex>^quest$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>pozhen</name>
				<script>enableTrigger("开战大恶")</script>
				<command>yp;;zhanbu -maze</command>
				<packageName></packageName>
				<regex>^zhen$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>桃花岛</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>拂穴</name>
				<script></script>
				<command>perform hand.fuxue</command>
				<packageName></packageName>
				<regex>^phf$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>软猬甲</name>
				<script>send("e;;n;;w;;ask cheng about 黄蓉;;e;;s;;w")
tempTimer(1, function() 
  send("w;;w;;s;;s")
  tempTimer(2, function() 
    send("ask gu about 蓉姐姐;;n;;n;;w;;nu;;ed;;enter door")
    tempTimer(3, function() send("ask huang about 软猬甲;;out;;wu;;sd;;e;;e;;e") end)
  end)
end)
</script>
				<command></command>
				<packageName></packageName>
				<regex>^rwj$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>弹指</name>
				<script>send("perform finger.tan "..matches[2])</script>
				<command></command>
				<packageName></packageName>
				<regex>^tan (.*)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>箫花</name>
				<script></script>
				<command>perform sword.xiaohua</command>
				<packageName></packageName>
				<regex>^ps$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>奇门</name>
				<script></script>
				<command>yun qimen</command>
				<packageName></packageName>
				<regex>^qm$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>home</name>
				<script></script>
				<command>n;n;ride diao;node walk ht_hys</command>
				<packageName></packageName>
				<regex>^home$</regex>
			</Alias>
		</AliasGroup>
		<Alias isActive="yes" isFolder="no">
			<name>start jiqi</name>
			<script>start_jiqi()</script>
			<command></command>
			<packageName></packageName>
			<regex>^start_jiqi$</regex>
		</Alias>
		<Alias isActive="no" isFolder="no">
			<name>new_dir</name>
			<script>go_dir(matches[1])
--mapper:go(matches[1])</script>
			<command></command>
			<packageName></packageName>
			<regex>^(e|s|w|n|u|d|ne|nw|sw|se|eu|ed|su|sd|wu|wd|nu|nd|enter|out|neu|ned|nwu|nwd|swu|swd|seu|sed)$</regex>
		</Alias>
		<Alias isActive="yes" isFolder="no">
			<name>装coin</name>
			<script></script>
			<command>put coin in lupi dai</command>
			<packageName></packageName>
			<regex>^coin$</regex>
		</Alias>
		<Alias isActive="yes" isFolder="no">
			<name>装石子</name>
			<script></script>
			<command>put shi zi in lupi dai</command>
			<packageName></packageName>
			<regex>^shi$</regex>
		</Alias>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>万安塔</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>进塔</name>
				<script></script>
				<command>ask ke about 进塔</command>
				<packageName></packageName>
				<regex>^wanan$</regex>
			</Alias>
		</AliasGroup>
		<Alias isActive="yes" isFolder="no">
			<name>short_cut</name>
			<script>short_cut_to(matches[2])</script>
			<command></command>
			<packageName></packageName>
			<regex>^@ (.*)$</regex>
		</Alias>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>迷宫</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>梅庄</name>
				<script></script>
				<command>knock gate 4;;knock gate 2;;knock gate 5;;knock gate 3</command>
				<packageName></packageName>
				<regex>^mei$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>曼陀小路</name>
				<script></script>
				<command>n;;w;;s;;s;;e;;e;;w</command>
				<packageName></packageName>
				<regex>^xiaolu$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>曼陀小路回</name>
				<script></script>
				<command>e;;s;;n;;w;;n;;n;;e;;s;;e</command>
				<packageName></packageName>
				<regex>^xiaoluhui$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>临安小院</name>
				<script></script>
				<command>say 红花老祖本姓朱 为救苍生下凡来</command>
				<packageName></packageName>
				<regex>^xiaoyuan$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>迷魂阵</name>
				<script></script>
				<command>e;;n;;w;;s;;w;;e;;e;;e;;n</command>
				<packageName></packageName>
				<regex>^mihun$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>去梅庄</name>
				<script></script>
				<command>w;;nw;;n;;e;;s;;se;;sw</command>
				<packageName></packageName>
				<regex>^tomei$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>梅庄回</name>
				<script></script>
				<command>ne;;nw;;n;;w;;s;;se;;e</command>
				<packageName></packageName>
				<regex>^meihui$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>纪晓芙</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>进茅屋</name>
				<script></script>
				<command>act zuan to mao wu</command>
				<packageName></packageName>
				<regex>^mao$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>地图相关</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>显示当前xkx房间</name>
				<script>show_xkx_room()</script>
				<command></command>
				<packageName></packageName>
				<regex>^show$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>跑图</name>
				<script>mapper.start()
</script>
				<command></command>
				<packageName></packageName>
				<regex>^map draw$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>保存地图</name>
				<script>local name = matches[2] or "mapper_map"
mapper.save(getMudletHomeDir() .. "/maps/"..name..".lua")</script>
				<command></command>
				<packageName></packageName>
				<regex>^msave(?:\s+(\S+))?$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>加载地图</name>
				<script>-- trigger: ^mload(?:\s+(\S+))?$
local name = matches[2]

-- 如果没写参数，且之前加载过，就用上一次的
if not name or name == "" then
  if nav.currentRegionKey then
    name = nav.currentRegionKey
  else
    echo("\n用法：mload &lt;region&gt;（例如 mload wx）\n")
    return
  end
end

nav.loadMap(name)

-- 记住当前 region 名
nav.currentRegion = name
nav.currentRegionKey = name
echo(string.format("\n当前 region 已设置为：%s\n", nav.currentRegion))
expandAlias("zone "..name)
</script>
				<command></command>
				<packageName></packageName>
				<regex>^mload(?:\s+(\S+))?$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>mgoto</name>
				<script>nav.gotoToken(matches[2])
</script>
				<command></command>
				<packageName></packageName>
				<regex>^goto (\S+)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>暂停测绘</name>
				<script>mapper.mapping = false
mapper.mappingEnabled = false
cecho("&lt;yellow&gt;[Mapper] 测绘已关闭。\n")
</script>
				<command></command>
				<packageName></packageName>
				<regex>^map off$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>继续测绘</name>
				<script>mapper.mapping = true
mapper.mappingEnabled = true
cecho("&lt;green&gt;[Mapper] 测绘已开启。\n")
</script>
				<command></command>
				<packageName></packageName>
				<regex>^map on$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>reset 地图</name>
				<script>mapper.resetRuntimeMap()</script>
				<command></command>
				<packageName></packageName>
				<regex>^map reset$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>显示两个房间之间的路径</name>
				<script>local a = matches[2]
local b   = matches[3]
nav.pathCommand(a, b)
</script>
				<command></command>
				<packageName></packageName>
				<regex>^path\s+(\S+)\s*(\S*)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>检查区域地图</name>
				<script>local r = matches[2]
if not map_check then
  cecho("\n&lt;red&gt;[mcheck]&lt;reset&gt; map_check 还没加载。请先 dofile('map_check.lua') 或把脚本放进 Mudlet。\n")
  return
end
map_check.runAll(r)
</script>
				<command></command>
				<packageName></packageName>
				<regex>^mcheck\s+(\w+)\s*$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>GCMP mode</name>
				<script>if not gmcp_router then
  echo("\n&lt;red&gt;[mode] gmcp_router 未加载，无法切换模式或控制 GMCP。\n")
  return
end

local arg = matches[2] or ""
arg = arg:lower()

-- 没参数：查看当前状态
if arg == "" then
  gmcp_router.status()
  return
end

-- mode off → 关闭 GMCP
if arg == "off" then
  gmcp_router.unregister()
  gmcp_router.status()
  return
end

-- helper: 确保已经注册
local function ensureOn()
  if not gmcp_router.enabled then
    gmcp_router.register()
  end
end

if arg == "mapper" or arg == "m" then
  ensureOn()
  gmcp_router.useMapper()
  gmcp_router.status()
elseif arg == "nav" or arg == "n" or arg == "navigator" then
  ensureOn()
  gmcp_router.useNav()
  gmcp_router.status()
elseif arg == "both" or arg == "b" then
  ensureOn()
  gmcp_router.useBoth()
  gmcp_router.status()
else
  echo("\n&lt;yellow&gt;[mode] 无效参数: " .. arg .. "\n")
  echo("用法：\n")
  echo("  mode           → 查看当前 GMCP 状态\n")
  echo("  mode mapper    → 打开 GMCP，并只用 mapper\n")
  echo("  mode nav       → 打开 GMCP，并只用 nav\n")
  echo("  mode both      → 打开 GMCP，并双开 mapper+nav\n")
  echo("  mode off       → 关闭 GMCP（不再处理 gmcp.GMCP.Move）\n")
end
</script>
				<command></command>
				<packageName></packageName>
				<regex>^mode(?:\s+(\w+))?$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>back到区域原点</name>
				<script>local path = nav.origin()
send(path)</script>
				<command></command>
				<packageName></packageName>
				<regex>^back$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>设定当前区域</name>
				<script>nav.setRegion(matches[2])</script>
				<command></command>
				<packageName></packageName>
				<regex>^zone (\w+)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>go - 确认路径后开走</name>
				<script>-- go (ACK version)

if not nav or not nav.lastResult then
  cecho("\n&lt;red&gt;[Go]&lt;reset&gt; 没有缓存路径，请先用 path ...\n")
  return
end

if not walker or not walker.start then
  cecho("\n&lt;red&gt;[Go]&lt;reset&gt; walker 未加载，无法执行。\n")
  return
end

-- 防止重复执行
if walker.active then
  cecho("\n&lt;yellow&gt;[Go]&lt;reset&gt; walker 正在行走中，请先 stop。\n")
  return
end

walker.start(nav.lastResult.dirs, {
  ackMode       = true,   -- ★ 关键：开启确认模式
  delayMs       = 50,    -- 正常步进延迟
  backoffFactor = 1.8,    -- 指数退避倍率
  maxDelayMs    = 3000,   -- 最大等待
  maxFails      = 8,      -- 连续失败上限
})
</script>
				<command></command>
				<packageName></packageName>
				<regex>^go$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>GMCP reset</name>
				<script>gmcp_router.register()
gmcp_router.status()
mapper_core.printCurrent()
</script>
				<command></command>
				<packageName></packageName>
				<regex>^greset$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>设置here</name>
				<script>-- here alias
local arg = matches[2] or ""
arg = arg:gsub("^%s+", ""):gsub("%s+$", "")

if here and here.set then
  here.set(arg)
else
  cecho("\n&lt;red&gt;[Here] here.lua 未加载。\n")
end
</script>
				<command></command>
				<packageName></packageName>
				<regex>^here\s*(.*)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>房间指纹fp</name>
				<script>if mapper_core and mapper_core.printCurrent then
  mapper_core.printCurrent()
else
  cecho("\n&lt;red&gt;[FP] mapper_core 未加载。\n")
end
</script>
				<command></command>
				<packageName></packageName>
				<regex>^fp$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>^fpnew$</name>
				<script>if fpnew and fpnew.run then
  fpnew.run()
else
  cecho("\n&lt;red&gt;[FPNEW] fpnew.lua 未加载。\n")
end
</script>
				<command></command>
				<packageName></packageName>
				<regex>^fpnew$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>show busy room</name>
				<script>walker.printBusyRooms()</script>
				<command></command>
				<packageName></packageName>
				<regex>^show busy$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>fast go</name>
				<script>--echo(" ===: "..nav.lastResult.seq)
send(nav.lastResult.seq)</script>
				<command></command>
				<packageName></packageName>
				<regex>^fg$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>pw</name>
				<script>local a = primary_dest().room
local b = matches[3]
nav.pathCommand(a, b)
</script>
				<command></command>
				<packageName></packageName>
				<regex>^pw$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>赶车</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>north</name>
				<script></script>
				<command>gan che to north</command>
				<packageName></packageName>
				<regex>^gn$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>south</name>
				<script></script>
				<command>gan che to south</command>
				<packageName></packageName>
				<regex>^gs$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>east</name>
				<script></script>
				<command>gan che to east</command>
				<packageName></packageName>
				<regex>^ge$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>west</name>
				<script></script>
				<command>gan che to west</command>
				<packageName></packageName>
				<regex>^gw$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>ne</name>
				<script></script>
				<command>gan che to northeast</command>
				<packageName></packageName>
				<regex>^gne$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>nw</name>
				<script></script>
				<command>gan che to northwest</command>
				<packageName></packageName>
				<regex>^gnw$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>se</name>
				<script></script>
				<command>gan che to southeast</command>
				<packageName></packageName>
				<regex>^gse$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>sw</name>
				<script></script>
				<command>gan che to southwest</command>
				<packageName></packageName>
				<regex>^gsw$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>nu</name>
				<script></script>
				<command>gan che to northup</command>
				<packageName></packageName>
				<regex>^gnu$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>nd</name>
				<script></script>
				<command>gan che to northdown</command>
				<packageName></packageName>
				<regex>^gnd$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>eu</name>
				<script></script>
				<command>gan che to eastup</command>
				<packageName></packageName>
				<regex>^geu$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>ed</name>
				<script></script>
				<command>gan che to eastdown</command>
				<packageName></packageName>
				<regex>^ged$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>wu</name>
				<script></script>
				<command>gan che to westup</command>
				<packageName></packageName>
				<regex>^gwu$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>wd</name>
				<script></script>
				<command>gan che to westdown</command>
				<packageName></packageName>
				<regex>^gwd$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>su</name>
				<script></script>
				<command>gan che to southup</command>
				<packageName></packageName>
				<regex>^gsu$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>sd</name>
				<script></script>
				<command>gan che to southdown</command>
				<packageName></packageName>
				<regex>^gsd$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>lin</name>
				<script></script>
				<command>e;n;n</command>
				<packageName></packageName>
				<regex>^lin$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>胡一刀</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>tohu</name>
				<script></script>
				<command>node walk yz_lydk</command>
				<packageName></packageName>
				<regex>^tohu$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>南国围列</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>deal with image</name>
				<script>deal_with_image()</script>
				<command></command>
				<packageName></packageName>
				<regex>^deal$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>跨城路由相关</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>travel to</name>
				<script>travel.to(matches[2])
</script>
				<command></command>
				<packageName></packageName>
				<regex>^travel\s+(\S+)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>travel show</name>
				<script>travel.show()</script>
				<command></command>
				<packageName></packageName>
				<regex>^travel show$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>travel reset</name>
				<script>travel.reset()</script>
				<command></command>
				<packageName></packageName>
				<regex>^travel reset$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>set from</name>
				<script>travel.setFrom(matches[2])
</script>
				<command></command>
				<packageName></packageName>
				<regex>^set from\s+(\S+)$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>move</name>
				<script>echo ("=======\n")
travel.move()</script>
				<command></command>
				<packageName></packageName>
				<regex>^move$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>胡一刀</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>给杀手补血</name>
				<script></script>
				<command>yun lifeheal shashou</command>
				<packageName></packageName>
				<regex>^yls$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>神龙岛</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>fd</name>
				<script>local room = get_current_room_name()
if room == "神龙岛山腰" then
  send("node walk sldsy_sldfd")
  return
end  

if room == "神龙岛山脚" then
  send("node walk aldsj_sldfd")
  return
end  </script>
				<command></command>
				<packageName></packageName>
				<regex>^fd$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>sj</name>
				<script>local room = get_current_room_name()
if room == "神龙岛峰顶" then
  send("node walk sldfd_sldsj")
  return
end  

if room == "神龙岛山腰" then
  send("node walk sldsy_sldsj")
  return
end  

if room == "神龙岛海滩" then
  send("node walk sldht_sldsj")
  return
end  </script>
				<command></command>
				<packageName></packageName>
				<regex>^sj$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>sy</name>
				<script>local room = get_current_room_name()
if room == "神龙岛峰顶" then
  send("node walk sldfd_sldsy")
  return
end  

if room == "神龙岛山脚" then
  send("node walk sldsj_sldsy")
  return
end  

if room == "神龙岛海滩" then
  send("node walk sldht_sldsy")
  return
end  </script>
				<command></command>
				<packageName></packageName>
				<regex>^sy$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>ht</name>
				<script>local room = get_current_room_name()
if room == "神龙岛峰顶" then
  send("node walk sldfd_sldht")
  return
end  

if room == "神龙岛山腰" then
  send("node walk sldsy_sldht")
  return
end  

if room == "神龙岛山脚" then
  send("node walk sldsj_sldht")
  return
end  </script>
				<command></command>
				<packageName></packageName>
				<regex>^ht$</regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>公孙止</name>
			<script></script>
			<command></command>
			<packageName></packageName>
			<regex></regex>
			<Alias isActive="yes" isFolder="no">
				<name>进谷</name>
				<script>send("e;northwest;enter;enter;move zuo;move you;move hou;move zuo;e;do 5 n")</script>
				<command></command>
				<packageName></packageName>
				<regex>^jingu$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>出谷</name>
				<script>send("do 5 s;w;enter;move zuo;move hou;move you;move zuo;out;southeast;w")</script>
				<command></command>
				<packageName></packageName>
				<regex>^chugu$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>渡口去明教</name>
				<script>-- 从长安 -&gt; ca_lzdk</script>
				<command>nw;do 7 w;do 3 n;do 3 w;nw;n;nw;nu;do 3 nu;</command>
				<packageName></packageName>
				<regex>^mj$</regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>怎么去星宿</name>
				<script>-- 从长安 -&gt; ca_xxdk
-- 1. 先到湟中，然后 walk xingxiu
-- 2. 这里是黄河北岸，已经接近源头，河道变窄，应该可以涉水(sheshui)抵达对岸。
  -- 从这里sheshui
-- 3. 南面一片荆棘林(jingji lin)长得非常密，挡住了视线。
-- 4. look jinji lin，会出现southwest -&gt; 荆棘林入口
-- 5. walk xingxiu 到巨岩</script>
				<command></command>
				<packageName></packageName>
				<regex></regex>
			</Alias>
			<Alias isActive="yes" isFolder="no">
				<name>怎么去白陀山</name>
				<script>-- 凉州和皇中坐车去苦泉镇</script>
				<command></command>
				<packageName></packageName>
				<regex></regex>
			</Alias>
		</AliasGroup>
		<AliasGroup isActive="yes" isFolder="yes">
			<name>generic_mapper</name>
			<script></script>
			<command></command>
			<packageName>generic_mapper</packageName>
			<regex></regex>
			<AliasGroup isActive="yes" isFolder="yes">
				<name>Setup Aliases</name>
				<script></script>
				<command></command>
				<packageName></packageName>
				<regex></regex>
				<Alias isActive="yes" isFolder="no">
					<name>Map Show Alias</name>
					<script>map.showMap()</script>
					<command></command>
					<packageName></packageName>
					<regex>^map show$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Find Map Prompt Alias</name>
					<script>map.find_prompt()</script>
					<command></command>
					<packageName></packageName>
					<regex>^find prompt$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Set Map Prompt Alias</name>
					<script>-- USE PATTERNS FOR STRING.GSUB
if matches[2] then
  map.make_prompt_pattern(matches[2])
else
  display(map.save.prompt_pattern)
end</script>
					<command></command>
					<packageName></packageName>
					<regex>^map prompt(?: (.*))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Set Map Ignore Alias</name>
					<script>-- USE PATTERNS FOR STRING.GSUB
if matches[2] then
  map.make_ignore_pattern(matches[2])
else
  display(map.save.ignore_patterns)
end</script>
					<command></command>
					<packageName></packageName>
					<regex>^map ignore(?: (.*))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Set Move Method Alias</name>
					<script>
if matches[2] then
  map.make_move_method(matches[2])
else
  display(map.save.move_methods)
end</script>
					<command></command>
					<packageName></packageName>
					<regex>^map movemethod(?: (.*))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Map Debug Alias</name>
					<script>map.configs.debug = not map.configs.debug
map.echo("Map debug set to: " .. (map.configs.debug and "on" or "off"))</script>
					<command></command>
					<packageName></packageName>
					<regex>^map debug$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Map Update Alias</name>
					<script>map.silentUpdate = false
map.updateVersion()</script>
					<command></command>
					<packageName></packageName>
					<regex>^map update$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Map Config Alias</name>
					<script>-- adjust pattern to allow no argument, if no argument show general help about configs
if not matches[2] then
	cecho(map.help.config)
else
  local startStr, endStr = string.match(matches[2],"(.*) ([%w%.]+)")
  local vals = {'on', 'off', 'true', 'false'}
  local modes = {'lazy','simple','normal','complex'}
  if (table.contains(vals, endStr) or tonumber(endStr)) or (startStr == "mode" and table.contains(modes, endStr)) then
  	map.setConfigs(startStr, endStr)
  else
  	map.setConfigs(matches[2])
  end
end</script>
					<command></command>
					<packageName></packageName>
					<regex>^map config(?: ([\w\s\.]+))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Map Window Config Alias</name>
					<script>map.setConfigs("map_window",matches[3],matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^map window (x|y|w|h|origin|shown)(?: ([\w%]+))?</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Map Translate Config Alias</name>
					<script>map.setConfigs("lang_dirs", {matches[3], matches[4]}, matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^map translate (\w+) (\w+) (\w+)$</regex>
				</Alias>
			</AliasGroup>
			<AliasGroup isActive="yes" isFolder="yes">
				<name>Information Aliases</name>
				<script></script>
				<command></command>
				<packageName></packageName>
				<regex></regex>
				<Alias isActive="yes" isFolder="no">
					<name>Map Quick Start Alias</name>
					<script>map.show_help("quick_start")</script>
					<command></command>
					<packageName></packageName>
					<regex>^map basics$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Map Help Alias</name>
					<script>map.show_help(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^map help(?: (.*))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Map Rooms Alias</name>
					<script>-- map rooms &lt;area&gt; - shows the list of rooms in an area
map.echoRoomList(matches[2] or getRoomArea(map.currentRoom))</script>
					<command></command>
					<packageName></packageName>
					<regex>^map rooms(?: (.+))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Map Areas Alias</name>
					<script>-- area list - shows the known area list
-- functionality already exists in generic_mapper alias 'map areas'

map.echoAreaList()</script>
					<command></command>
					<packageName></packageName>
					<regex>^map areas$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Room Find Alias</name>
					<script>-- rf &lt;name&gt;, room find &lt;name&gt; - searches for a room of a given name

map.roomFind(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^(?:rf|room find) (.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Room Look Alias</name>
					<script>-- rl or room look - displays information about the room you're in
-- rl roomID - displays information on a given room ID (ie, rl 34)
-- rl room name  - displays information on a given room, by it's 
--    name (ie, rl tavern of blah)
map.roomLook(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^(?:rl|room look)(?: (.+))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Show Path Alias</name>
					<script>-- showpath roomID - shows you a path from where you are to another room (by it's ID)
-- showpath fromID toID - shows you a path from a given room to another given to 
--                        another room
if not matches[2] and not matches[3] then
  map.echo("Where do you want to showpath to?")
elseif matches[2] and not matches[3] then
  map.echoPath(map.currentRoom, matches[2])
else
  map.echoPath(matches[2], matches[3])
end</script>
					<command></command>
					<packageName></packageName>
					<regex>^showpath(?: (\d+))?(?: (\d+))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>List Special Exits Alias</name>
					<script>-- spe list - shows you the list of all known special exists
-- spe list filter - shows you a list of all known special exits, 
--                   filtered by a command (ie. spe list worm warp)
map.listSpecialExits(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^spe list(?: (.+))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>List Map Features Alias</name>
					<script>-- feature list - lists all map features created via feature create and the
-- associated room characters

map.listMapFeatures()</script>
					<command></command>
					<packageName></packageName>
					<regex>^feature list$</regex>
				</Alias>
			</AliasGroup>
			<AliasGroup isActive="yes" isFolder="yes">
				<name>Regular Use Aliases</name>
				<script></script>
				<command></command>
				<packageName></packageName>
				<regex></regex>
				<Alias isActive="yes" isFolder="no">
					<name>Map Me Alias</name>
					<script>map.find_me(nil, nil, nil, true)</script>
					<command></command>
					<packageName></packageName>
					<regex>^map me$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Map Path Alias</name>
					<script>map.find_path(matches[2],matches[3])</script>
					<command></command>
					<packageName></packageName>
					<regex>^map path ([^;]+)(?:\s*;\s*(.+))?</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Set Recall Alias</name>
					<script>map.set_recall()</script>
					<command></command>
					<packageName></packageName>
					<regex>^map recall$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Set Character Alias</name>
					<script>map.character = matches[2]</script>
					<command></command>
					<packageName></packageName>
					<regex>^map character (.*)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Map Stop Alias</name>
					<script>raiseEvent("mapStop")
raiseEvent("sysSpeedwalkStopped")</script>
					<command></command>
					<packageName></packageName>
					<regex>^map stop$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Toggle Speedwalk Alias</name>
					<script>map.toggleSpeedwalk(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^mpp(?:\s?(on|off))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Area Lock Alias</name>
					<script>-- arealock, arealock &lt;area&gt; - displays a list of areas you can
-- lock/unlock, can also give it an area name to filter by. If
-- an area is locked the mapper will not attempt to walk through
-- or go through any of the rooms in the area
map.doLockArea(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^arealock(?: (.*))?$</regex>
				</Alias>
			</AliasGroup>
			<AliasGroup isActive="yes" isFolder="yes">
				<name>Map Creation Aliases</name>
				<script></script>
				<command></command>
				<packageName></packageName>
				<regex></regex>
				<Alias isActive="yes" isFolder="no">
					<name>Set Room Area Alias</name>
					<script>map.set_area(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^set area (.*)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Start Mapping Alias</name>
					<script>map.start_mapping(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^start mapping(?: (.*))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Stop Mapping Alias</name>
					<script>map.stop_mapping()</script>
					<command></command>
					<packageName></packageName>
					<regex>^stop mapping$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Shift Room Alias</name>
					<script>map.shift_room(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^shift (.*)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Add Portal Alias</name>
					<script>map.set_portal(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^add portal (.*)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Show Moves Alias</name>
					<script>map.show_moves()</script>
					<command></command>
					<packageName></packageName>
					<regex>^show moves$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Clear Moves Alias</name>
					<script>map.clear_moves()</script>
					<command></command>
					<packageName></packageName>
					<regex>^clear moves$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Add Door Alias</name>
					<script>map.set_door(matches[2],matches[3],matches[4])</script>
					<command></command>
					<packageName></packageName>
					<regex>^add door (\w+)(?: (none|open|closed|locked))?(?: (yes|no))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Merge Rooms Alias</name>
					<script>map.merge_rooms()</script>
					<command></command>
					<packageName></packageName>
					<regex>^merge rooms$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Set Map Mode Alias</name>
					<script>map.set_mode(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^map mode (\w+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Set Room Exit Alias</name>
					<script>map.set_exit(matches[2],matches[3])</script>
					<command></command>
					<packageName></packageName>
					<regex>^set exit (.+) (\d+)</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Move A Room Alias</name>
					<script>-- rc or room coords [v&lt;id&gt;] &lt;option&gt;, where option will specify the new
-- location of the room. The room ID is optional, it'll move the current
-- room if you don't provide one.


-- want the current room, but we're lost
if matches[2] == '' and (not map.currentRoom or not map.roomexists(map.currentRoom)) then map.echo("Don't know where we are at the moment.") return end

-- want another room, but it doesn't actually exist
if matches[2] ~= '' and not map.roomexists(matches[2]) then map.echo("v"..matches[2].." doesn't exist.") return end

local m = matches[3]
local rid, rname = (matches[2] ~= "" and matches[2] or map.currentRoom),
  (matches[2] ~= "" and getRoomName(matches[2]) or getRoomName(map.currentRoom))
local x,y,z

local function set() -- small func to set things
  setRoomCoordinates(rid, x, y, z)
  map.echo(string.format("%s (%d) is now at %dx, %dy, %dz.\n", rname, rid, x,y,z))
  centerview(rid)
end

-- let's be flexible and allow several ways if giving an arg
-- rc x y z
x,y,z = string.match(m, "(%-?%d+) (%-?%d+) (%-?%d+)")
if x then
  set(); return
end

-- rc xx? yy? zz?
x,y,z = string.match(m, "(%-?%d+)x"), string.match(m, "(%-?%d+)y"), string.match(m, "(%-?%d+)z")
if x or y or z then
  -- merge w/ old coords if any are missing
  local ox, oy, oz = getRoomCoordinates(rid)
  x = x or ox; y = y or oy; z = z or oz
  set(); return
end

-- rc left/west, right/east, ...
local ox, oy, oz = getRoomCoordinates(rid)
local has = table.contains
for w in string.gmatch(m, "%a+") do
  if has({"west", "left", "w", "l"}, w) then
    x = (x or ox) - 1; y = (y or oy); z = (z or oz)
  elseif has({"east", "right", "e", "r"}, w) then
    x = (x or ox) + 1; y = (y or oy); z = (z or oz)
  elseif has({"north", "top", "n", "t"}, w) then
    x = (x or ox); y = (y or oy) + 1; z = (z or oz)
  elseif has({"south", "bottom", "s", "b"}, w) then
    x = (x or ox); y = (y or oy) - 1; z = (z or oz)
  elseif has({"northwest", "topleft", "nw", "tl"}, w) then
    x = (x or ox) - 1; y = (y or oy) + 1; z = (z or oz)
  elseif has({"northeast", "topright", "ne", "tr"}, w) then
    x = (x or ox) + 1; y = (y or oy) + 1; z = (z or oz)
  elseif has({"southeast", "bottomright", "se", "br"}, w) then
    x = (x or ox) + 1; y = (y or oy) - 1; z = (z or oz)
  elseif has({"southwest", "bottomleft", "sw", "bl"}, w) then
    x = (x or ox) - 1; y = (y or oy) - 1; z = (z or oz)
  elseif has({"up", "u"}, w) then
    x = (x or ox); y = (y or oy); z = (z or oz) + 1
  elseif has({"down", "d"}, w) then
    x = (x or ox); y = (y or oy); z = (z or oz) - 1
  end

end
if x then set(); return end

map.echo([[Where do you want to move the room to?
  You can use direct coordinates or relative directions.]])</script>
					<command></command>
					<packageName></packageName>
					<regex>^(?:rc|room coords) (?:v(\d+) )?(.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Delete A Room Alias</name>
					<script>-- rld or room delete &lt;option&gt; - where option is the location or ID of the room
-- you'd like to delete

-- want the current room, but we're lost
if not matches[2] and (not map.currentRoom or not map.roomexists(map.currentRoom)) then map.echo("Don't know where we are at the moment.") return end

-- want another room, but it doesn't exist
if matches[2] and tonumber(matches[2]) and not map.roomexists(matches[2]) then map.echo("v"..matches[2].." doesn't exist.") return end

-- or a relative one
if matches[2] and not tonumber(matches[2]) and not map.relativeroom(map.currentRoom, matches[2]) then map.echo("There is no room "..matches[2].. " of us.") return end

local rid = (not matches[2] and map.currentRoom or (tonumber(matches[2]) or map.relativeroom(map.currentRoom, matches[2])))

local n = getRoomName(rid)
deleteRoom(rid)
map.echo(string.format("Deleted the %s (%d) room.\n", (n ~= "" and n or "''"), rid))
centerview(map.currentRoom)</script>
					<command></command>
					<packageName></packageName>
					<regex>^(?:rld|room delete) ?(\w+)?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Set Room Weight Alias</name>
					<script>-- rw &lt;optional room ID or direction&gt; &lt;weight&gt;, where option is the location
-- or ID of the room whose weight you'd like to change.

local weight = tonumber(matches[3]), room
if matches[2] == '' then room = map.currentRoom
else
  room = tonumber(matches[2]) or map.relativeroom(map.currentRoom, matches[2])
end

if not room or not map.roomexists(room) then
  map.echo("Sorry - which room do you want to set the weight on? I don't know where you are at the moment, if you want to do the current room.")
  return
end

if not weight then
  map.echo("What weight do you want to set on #"..room.."?")
end

local oldweight = getRoomWeight(room)
setRoomWeight(room, weight)

if weight &gt; oldweight then
  map.echo("Increased the room weight on #"..room.." ("..getRoomName(room)..") by "..(weight-oldweight).." to "..weight.." - making it less desirable to travel through.")
elseif weight &lt; oldweight then
  map.echo("Decreased the room weight on #"..room.." ("..getRoomName(room)..") by "..(oldweight-weight).." to "..weight.." - making it more desirable to travel through.")
else
  map.echo("The room weight on #"..room.." ("..getRoomName(room)..") is already "..weight..".")
end</script>
					<command></command>
					<packageName></packageName>
					<regex>^rw(?: (\w+))? (\d+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Set Exit Weight Alias</name>
					<script>-- rwe &lt;optional room ID, otherwise current&gt; &lt;weight&gt; &lt;exit&gt;, where the weight
-- is a positive number (default for exits is 0). Setting a higher weight will
-- make the exit be less likely to be used.

local room = (matches[2] ~= "" and tonumber(matches[2]) or map.currentRoom)

local weight, exit = tonumber(matches[3]), matches[4]

if not roomExists(room) then map.echo("Room "..room.." doesn't exist. It has to before we can set weights on exits.") return end

setExitWeight(room, exit, weight)

map.echo(string.format("Set the weight on the %d room going %s to %s. If it's a two-way exit, please set the reverse exit as well.", room, exit, weight))</script>
					<command></command>
					<packageName></packageName>
					<regex>^rwe(?: (\d+))? (\d+) (.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Create a Link Between Two Rooms Alias</name>
					<script>-- rlk or room link &lt;option&gt; [one] - where option will specify the room and exit
-- to link with. You can also tack on 'one' at the end to make it be a one-way link


-- need the current room, but we're lost
if not map.currentRoom or not map.roomexists(map.currentRoom) then map.echo("Don't know where we are at the moment.") return end

-- make sure the dir is valid
local dir = map.anytolong(matches[3])
if not dir then map.echo(matches[3].." isn't a valid normal exit.") return end

-- if we don't give a room number, then we want to auto-locate an appropriate room nearby.
local otherroom
if matches[2] == "" then
  local w = matches[3]
  local ox, oy, oz, x,y,z = getRoomCoordinates(map.currentRoom)
  local has = table.contains
  if has({"west", "left", "w", "l"}, w) then
    x = (x or ox) - 1; y = (y or oy); z = (z or oz)
  elseif has({"east", "right", "e", "r"}, w) then
    x = (x or ox) + 1; y = (y or oy); z = (z or oz)
  elseif has({"north", "top", "n", "t"}, w) then
    x = (x or ox); y = (y or oy) + 1; z = (z or oz)
  elseif has({"south", "bottom", "s", "b"}, w) then
    x = (x or ox); y = (y or oy) - 1; z = (z or oz)
  elseif has({"northwest", "topleft", "nw", "tl"}, w) then
    x = (x or ox) - 1; y = (y or oy) + 1; z = (z or oz)
  elseif has({"northeast", "topright", "ne", "tr"}, w) then
    x = (x or ox) + 1; y = (y or oy) + 1; z = (z or oz)
  elseif has({"southeast", "bottomright", "se", "br"}, w) then
    x = (x or ox) + 1; y = (y or oy) - 1; z = (z or oz)
  elseif has({"southwest", "bottomleft", "sw", "bl"}, w) then
    x = (x or ox) - 1; y = (y or oy) - 1; z = (z or oz)
  elseif has({"up", "u"}, w) then
    x = (x or ox); y = (y or oy); z = (z or oz) + 1
  elseif has({"down", "d"}, w) then
    x = (x or ox); y = (y or oy); z = (z or oz) - 1
  end

  local carea = getRoomArea(map.currentRoom)
  if not carea then map.echo("Don't know what area are we in.") return end

  otherroom = select(2, next(getRoomsByPosition(carea,x,y,z)))

  if not otherroom then
    map.echo("There isn't a room to the "..w.." that I see - try with an exact room id.") return
  end

else
  if not map.roomexists(matches[2]) then -- check that an explicit other room ID is valid
    map.echo("A room with id "..matches[2].. " doesn't exist.") return
  else
    otherroom = tonumber(matches[2])
  end
end

if map.setExit(map.currentRoom, otherroom, matches[3]) then
  if not matches[4] then map.setExit(otherroom, map.currentRoom, map.ranytolong(matches[3])) end

  map.echo(string.format("Linked %s (%d) to %s (%d) via a %s%s exit.",
    (getRoomName(map.currentRoom) ~= "" and getRoomName(map.currentRoom) or "''"), map.currentRoom, (getRoomName(otherroom) ~= "" and getRoomName(otherroom) or "''"), otherroom, (matches[4] and "one-way " or ''), matches[3]))
else
  map.echo("Couldn't create an exit.")
end
centerview(map.currentRoom)</script>
					<command></command>
					<packageName></packageName>
					<regex>^(?:rlk|room link) ?(\d+)? (\w+)( one)?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Delete a Link Alias</name>
					<script>-- urlk or room unlink &lt;direction&gt; - where direction will specify the direction
-- of the exit to unlink. This function will unlink exits both ways, or one way
-- if there is no incoming exit. 


-- need the current room, but we're lost
if not map.currentRoom or not map.roomexists(map.currentRoom) then map.echo("Don't know where we are at the moment.") return end

-- make sure the dir is valid
local dir = map.anytolong(matches[2])
if not dir then map.echo(matches[2].." isn't a valid normal exit.") return end

-- gone already?
if not getRoomExits(map.currentRoom)[dir] then map.echo(dir.." link doesn't exist already.") end

-- locate the room on the other end, so we can unlink it from there as well if necessary
local otherroom
if getRoomExits(getRoomExits(map.currentRoom)[dir])[map.ranytolong(dir)] then
  otherroom = getRoomExits(map.currentRoom)[dir]
end

if map.setExit(map.currentRoom, -1, dir) then
  if otherroom then
    if map.setExit(otherroom, -1, map.ranytolong(dir)) then
      map.echo(string.format("Deleted the %s exit from %s (%d).",
        dir, getRoomName(map.currentRoom), map.currentRoom))
     else map.echo("Couldn't delete the incoming exit.") end
  else
    map.echo(string.format("Deleted the one-way %s exit from %s (%d).",
      dir, getRoomName(map.currentRoom), map.currentRoom))
  end
else
  map.echo("Couldn't delete the outgoing exit.")
end
centerview(map.currentRoom)</script>
					<command></command>
					<packageName></packageName>
					<regex>^(?:urlk|room unlink) (\w+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Add/delete Doors Alias</name>
					<script>-- rd &lt;optional room ID, or current if none&gt; &lt;direction&gt; &lt;door status&gt;
-- Direction can be one of the following: e,s,w,n,ne,se,sw,ne. 
-- Door status can be open or o, closed or c, locked or l, clear or gone.
-- To delete a room, use clear or gone. Setting doors is one-way - to set
-- two-way doors, use the alias from the opposite direction.

local room = (matches[2] ~= "" and tonumber(matches[2]) or map.currentRoom)

local direction, status = matches[3], matches[4]

if not roomExists(room) then map.echo("Room "..room.." doesn't exist. It has to before we can make doors in it.") return end

local validdirs = {'e', 's', 'w', 'n', 'ne', 'se', 'sw', 'nw', 'in', 'out', 'up', 'down'}

if not table.contains(validdirs, direction) then
  map.echo("Can't make a door in the '"..direction.."' direction - available choices are:\n  "..table.concat(validdirs, ', '))
  return
end

local statusnum

if status == "" or status == "open" or status == "o" then
  statusnum = 1
elseif status == "closed" or status ==  "c" then
  statusnum = 2
elseif status == "locked" or status ==  "l" then
  statusnum = 3
elseif status == "clear" or status == "gone" then
  statusnum = 0
end

if not statusnum then map.echo("Unrecognized option - a door can be open, closed, locked or gone.") return end

setDoor(room, direction, statusnum)

if statusnum == 0 then
  map.echo("OK, door removed.")
else
  map.echo("OK, door added/adjusted.")
end</script>
					<command></command>
					<packageName></packageName>
					<regex>^rd(?: (\d+))? (\w+)(?: (\w+))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Set a Room Character Alias</name>
					<script>-- rcc &lt;character&gt; or rcc &lt;character&gt; &lt;room ID&gt; - where the character is one 
-- letter/number/symbol.

local room = matches[3] or map.currentRoom
room = tonumber(room) or map.relativeroom(map.currentRoom, room)
if not room or not map.roomexists(room) then
  map.echo("Sorry - which room do you want to put this character in? I don't know where you are at the moment, if you want to do the current room.")
  return
end

local char = matches[2]

if char == "clear" then
  setRoomChar(room, ' ')
  map.echo("Cleared the character from "..room.." ("..getRoomName(room)..")")
else
  setRoomChar(room, char)
  map.echo("Set the "..char:sub(1,1).." character on "..room.." ("..getRoomName(room)..")")
end
centerview(map.currentRoom)</script>
					<command></command>
					<packageName></packageName>
					<regex>^rcc ([^ ]+)(?: (\w+))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Add a Special Exit Alias</name>
					<script>-- spe &lt;other room&gt; &lt;command&gt; or exit special &lt;other room&gt; &lt;command&gt;, where other
-- room will specify the room to link with, and command the command to us to get
-- to that room.

-- spe clear and spe list match on this
if matches[2] == "clear" or matches[2] == "list" then return end

-- need the current room, but we're lost
if not map.currentRoom or not map.roomexists(map.currentRoom) then map.echo("Don't know where we are at the moment.") return end

local otherroom = tonumber(matches[2]) or map.relativeroom(map.currentRoom, matches[2])

-- need the another room, but it doesn't actually exist
if not otherroom or not map.roomexists(otherroom) then map.echo(matches[2].." doesn't exist.") return end

addSpecialExit(map.currentRoom, tonumber(otherroom), matches[3])
addSpecialExit(map.currentRoom, tonumber(otherroom), matches[3])
map.echo(string.format("Added special exit with command '%s' to %s (%d).", matches[3], getRoomName(otherroom), otherroom))
centerview(map.currentRoom)</script>
					<command></command>
					<packageName></packageName>
					<regex>^(?:spe|exit special) (\w+) (.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Add a Special Exit From One Remote Room To Another Alias</name>
					<script>-- spev &lt;from room&gt; &lt;to room&gt; &lt;command&gt; - This different than spe, which allows
-- you to link only the current room to another room - this command doesn't
-- require you to be in the starting room. 

local room1, room2 = tonumber(matches[2]), tonumber(matches[3])

if not room1 or not map.roomexists(room1) then
  map.echo("Room #"..matches[2].." doesn't exist - create it first, or make sure you got the room ID right?")
  return
end

if not room2 or not map.roomexists(room2) then
  map.echo("Room #"..matches[3].." doesn't exist - create it first, or make sure you got the room ID right?")
  return
end

addSpecialExit(room1, room2, matches[4])
map.echo(string.format("Added special exit with command '%s' to from %s (%d) to %s (%d).", matches[4], getRoomName(room1), room1, getRoomName(room2), room2))</script>
					<command></command>
					<packageName></packageName>
					<regex>^spev (\d+) (\d+) (.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Clear All Special Exits Alias</name>
					<script>-- spe clear &lt;option&gt; or exit special clear &lt;option&gt; - where option is the
-- location or the ID of the room you'd like to clear all special exits in. 

-- want the current room, but we're lost
if not matches[2] and (not map.currentRoom or not map.roomexists(map.currentRoom)) then map.echo("Don't know where we are at the moment.") return end

-- want another room, but it doesn't exist
if matches[2] and tonumber(matches[2]) and not map.roomexists(matches[2]) then map.echo("v"..matches[2].." doesn't exist.") return end

-- or a relative one
if matches[2] and not tonumber(matches[2]) and not map.relativeroom(map.currentRoom, matches[2]) then map.echo("There is no room "..matches[2].. " of us.") return end

local rid = (not matches[2] and map.currentRoom or (tonumber(matches[2]) or map.relativeroom(map.currentRoom, matches[2])))

clearSpecialExits(rid)
map.echo(string.format("Cleared all special exits in %s (%d).\n", getRoomName(rid), rid))</script>
					<command></command>
					<packageName></packageName>
					<regex>^(?:spe clear|exit special clear) ?(\w+)?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Move Room To Another Area Alias</name>
					<script>-- room area &lt;different area&gt; - will move the current room to another area you're in

map.roomArea(matches[2], matches[3])</script>
					<command></command>
					<packageName></packageName>
					<regex>^room area (?:v(\d+) )?(.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Add a Room Label Alias</name>
					<script>-- room label &lt;optional another room ID&gt; &lt;optional foreground color&gt; &lt;optional background color&gt; my message

map.roomLabel(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^room label (.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>View/delete Area Labels Alias</name>
					<script>-- area labels &lt;area name&gt; - will show the labels in the given area
map.areaLabels(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^area labels ?(.+)?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Create An Area Alias</name>
					<script>-- area add &lt;area name&gt; - will create a new area and automatically give it an ID.

local t = getAreaTable(); local tr = {}; for k,v in pairs(t) do tr[v] = k end
local newid = table.maxn(tr) + 1

setAreaName( newid, matches[2] )
map.echo(string.format("Created new area %s (%d)", matches[2], newid))
centerview(map.currentRoom)</script>
					<command></command>
					<packageName></packageName>
					<regex>^area add (.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Delete An Area Alias</name>
					<script>-- area delete &lt;area name&gt; - will delete the given area

map.deleteArea(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^area delete (.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Cancel Area Deletion Alias</name>
					<script>-- cancel area deletion - stop area deletion. This will not restore deleted rooms,
-- merely pauses the process.

if not map.deletingarea then map.echo("I wasn't deleting any areas already.") return end

local areaname = map.deletingarea.areaname
map.deletingarea = nil

map.echo("Stopped deleting rooms in the '"..areaname.."'. The area is partially missing its rooms now, you'll want to restart the process to finish it.")</script>
					<command></command>
					<packageName></packageName>
					<regex>^cancel area deletion$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Rename An Area Alias</name>
					<script>-- area rename &lt;new area name&gt; - will rename the current area you're in to the new name
map.renameArea(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^area rename (.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Create Map Feature Alias</name>
					<script>-- feature create &lt;feature&gt; [char &lt;room character&gt;] - will create a new map
-- feature for use on rooms. You can also optionally add a character mark to
-- the feature, which will be set when a map feature is added to a room. 
-- Note: Map feature names are not allowed to contain numbers. 

map.createMapFeature(matches[2]:trim(), (matches[3] and matches[3]:trim()))</script>
					<command></command>
					<packageName></packageName>
					<regex>^feature create (.+?)(?: char (.+))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Add Map Feature To Room Alias</name>
					<script>-- room create feature [v&lt;room id&gt;] &lt;feature&gt;* or *rcf [v&lt;room id&gt;] &lt;feature&gt;
-- adds a created map feature to the room. If the map feature is associated with
-- a character mark, it will be set on the room and existing marks get overwritten.
-- The room number to add the feature to can be given with the optional argument
-- (note that there is no space between the v and the ID). 

map.roomCreateMapFeature(matches[3], matches[2] == "" and map.currentRoom or tonumber(matches[2]))</script>
					<command></command>
					<packageName></packageName>
					<regex>^(?:room create feature|rcf) (?:v(\d+) )?(.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Delete Map Feature From Room Alias</name>
					<script>-- room delete feature [v&lt;room id&gt;] &lt;feature&gt;* or *rdf [v&lt;room id&gt;] &lt;feature&gt;
-- removes a map feature from the room. If the map feature is associated with
-- a character mark and its set on the room, a random character mark from the
-- other map features on the room is chosen to replace it. The room number to
-- delete the feature from can be given with the optional argument (note that
-- there is no space between the v and the ID). 

map.roomDeleteMapFeature(matches[3], matches[2] == "" and map.currentRoom or tonumber(matches[2]))</script>
					<command></command>
					<packageName></packageName>
					<regex>^(?:room delete feature|rdf) (?:v(\d+) )?(.+)$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Delete Map Feature Alias</name>
					<script>-- feature delete &lt;feature&gt;* deletes a map feature and removes it from all rooms

map.deleteMapFeature(matches[2]:trim())</script>
					<command></command>
					<packageName></packageName>
					<regex>^feature delete (.+)$</regex>
				</Alias>
			</AliasGroup>
			<AliasGroup isActive="yes" isFolder="yes">
				<name>Map Sharing Aliases</name>
				<script></script>
				<command></command>
				<packageName></packageName>
				<regex></regex>
				<Alias isActive="yes" isFolder="no">
					<name>Save Map Alias</name>
					<script>if saveMap(getMudletHomeDir() .. "/map.dat") then
  map.echo("Map saved.\n")
else
  map.echo("Error.  Map NOT saved.\n")
end
				</script>
					<command></command>
					<packageName></packageName>
					<regex>^map save$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Load Map Alias</name>
					<script>map.load_map(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^map load(?: (.*))?$</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Import Map Area Alias</name>
					<script>map.import_area(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^map import (.*)</regex>
				</Alias>
				<Alias isActive="yes" isFolder="no">
					<name>Export Map Area Alias</name>
					<script>map.export_area(matches[2])</script>
					<command></command>
					<packageName></packageName>
					<regex>^map export (.*)</regex>
				</Alias>
			</AliasGroup>
		</AliasGroup>
		<Alias isActive="yes" isFolder="no">
			<name>fmreload</name>
			<script>fullme.reload()
</script>
			<command></command>
			<packageName></packageName>
			<regex>^fmreload$</regex>
		</Alias>
	</AliasPackage>
	<ActionPackage />
	<ScriptPackage>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>gui-drop</name>
			<packageName>gui-drop</packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>workaround for add</name>
				<packageName></packageName>
				<script>-- Once Geyser.add2 is in this is not needed anymore
local addwrapper = Adjustable.Container.add
function Adjustable.Container:add(window, cons)
  addwrapper(self, window, cons)
  if self.hidden then
    tempTimer(0, function() self:hide() end)
  end
  if self.auto_hidden then
    tempTimer(0, function() self:hide(true) end)
  end
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>createDropManager</name>
				<packageName></packageName>
				<script>GUIDropManager = GUIDropManager or {}
GUIDropImages = GUIDropImages or {}
function GUIDropManager.createDropManager()
    GUIDropManager.script = "--GUIDropManager\n"
    
    local labelscript = [[%s = %s or Geyser.Label:new({name = "%s", x="%s", y="%s", width="%s", height="%s"%s}, %s)
    %s:setStyleSheet("border-image: url(%s);")
    %s.imgName = "%s"
    %s:setDropImg()
    
    ]]
    local containerscript = [[%s = %s or Adjustable.Container:new({name = "%s", x = "%s", y = "%s", width = "%s", height = "%s", lockStyle = "full", padding = 0, noLimit = true%s%s}%s)
    
    ]]
    local function createFname(imgName)
        return [["..getMudletHomeDir().."/GUIDropImages/]].. imgName
    end
    for k,v in pairs(GUIDropImages) do
        
        if v.type == "adjustablecontainer" then
            local container = ""
            local containervar = ""
            local locked = ""
            if v.windowname ~= "main" then
                container = v.containervar or getKeyFrom(v.container, ".container")
                if not container then
                    container = "Geyser.windowList."..v.windowname.."Container.windowList."..v.windowname
                end
                containervar = [[, containervar = "]]..container..[["]]
                v.containervar = container
                container = ", "..container
            end
            if v.locked then
                locked = ", locked = true"
            end
            GUIDropManager.script = GUIDropManager.script..string.format(containerscript, v.name, v.name, v.name, v.x, v.y, v.width, v.height, locked, containervar, container)
        end
        
    end
    
    
    for k,v in pairs(GUIDropImages) do    
        if v.type == "label" then
            v.fname = v.fname or createFname(v.imgName)
            local clickthrough = ""
            if v.clickthrough then
                clickthrough = ", clickthrough = true"
            end
            GUIDropManager.script = GUIDropManager.script..string.format(labelscript, v.name, v.name, v.name, v.x, v.y, v.width, v.height, clickthrough, v.container.container.name, v.name, v.fname, v.name, v.imgName, v.container.container.name)
        end    
    end
    
    if not setScript("GUIDropManager", GUIDropManager.script, 2) then
        display(setScript("GUIDropManager", GUIDropManager.script, 2))
    end
    
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>Global Variable Functions</name>
				<packageName></packageName>
				<script>function GUIDropManager.getKeyFrom(value, exclude, depth, table, iteration)
    exclude = exclude or false
    depth = depth or 3
    table = table or _G
    local tempTable = {}
    iteration = iteration or 1
    if iteration &gt; depth then
        return nil, "key not found"
    end
    for k,v in pairs(table) do
        if type(v) == "table" and k ~= "_G" then
            for k1,v1 in pairs(v) do
                tempTable[k.."."..k1] = v1
            end
        end
        if v == value and not string.find(k, exclude) then
            return k
        end
    end
    return GUIDropManager.getKeyFrom(value, exclude, depth, tempTable, iteration + 1)    
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>createDropScript</name>
				<packageName></packageName>
				<script>function GUIDropManager.createDropScript()
    if exists("GUIDropManager", "script") == 0 then
        permGroup("GUIDropManager", "script")
    end
    if exists("GUIDropManager", "script") &lt; 2 then
        permScript("GUIDropManager", "GUIDropManager","--GUIDropManager Script")
        enableScript("GUIDropManager")
        echo("DropScript created!")
    end
    GUIDropManager.createDropManager()
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>ImageDrop</name>
				<packageName></packageName>
				<script>function GUIDropManager.ImageDrop(event, fname, suffix, posx, posy, consoleName)
    Adjustable.Container:saveAll()
    local acceptable_suffix = {"png", "jpg", "bmp", "jpeg"}
    
    if not table.contains(acceptable_suffix, suffix) then
        return
    end
    local main_width, main_height = getMainWindowSize()
    local image_width, image_height = getImageSize(fname)
    
    if not image_width then 
        return 
    end
    local image_ratio = image_height / image_width
    if image_width &gt; main_width-50 or image_height &gt; main_height-50 then
        image_height = main_height-50
        image_width = (main_height-50) / image_ratio
    end
    
    posx = math.max(0, posx - (image_width/10))
    posy = math.max(0, posy - (image_height/10))
    local imgName = fname:match("([^%/]+)%..+$")
    
    if not (io.exists(getMudletHomeDir() .. "/GUIDropImages/")) then
        lfs.mkdir(getMudletHomeDir() .. "/GUIDropImages/")
    end
    
    --copy file to my profile location
    local imgLocation = getMudletHomeDir() .. "/GUIDropImages/".. imgName.. ".".. suffix
    local infile = io.open(fname, "rb")
    if not (io.exists(imgLocation)) then 
        local instr = infile:read("*ab")
        infile:close()
        local outfile = io.open(imgLocation, "wb")
        outfile:write(instr)
        outfile:close()
    end
    
    local acontainer
    if consoleName == "main" then
        acontainer = Geyser
    else
        acontainer = Geyser.windowList[consoleName.."Container"].windowList[consoleName]
    end
    --convert filename to be a feasible variablename
    local containername = string.gsub(imgName,"[^_%w]","")
    --if filename is only composed of number convert it
    if not containername:match("%D+") then
        containername = "defaultName"
    end
    
    --Check if image exists already and create new containername by adding +1 to the name
    if GUIDropImages[containername] or _G[containername] then 
        while GUIDropImages[containername] or _G[containername] do
            counter = containername:match("%d+$")
            if counter ~= nil then     
                containername = containername:sub(1,-(string.len(counter)+1))
            end
            counter = counter or 0
            counter = counter + 1
            containername = containername..counter
        end
    end
    
    containername = containername
    local labelname = containername.."Label"
    
    GUIDropImages[containername] = Adjustable.Container:new({name="GUIDropImages."..containername, lockStyle = "full", padding = 0, noLimit = true, autoLoad = false, autoSave = false} , acontainer)
    GUIDropImages[containername]:move(posx, posy)
    GUIDropImages[containername]:resize(image_width, image_height)
    GUIDropImages[containername]:setPercent(true, true)
    GUIDropImages[labelname] = Geyser.Label:new({name = "GUIDropImages."..labelname, x=0, y=0, width="100%", height="100%", clickthrough = true}, GUIDropImages[containername])
    
    GUIDropImages[labelname].fname = [["..getMudletHomeDir().."/GUIDropImages/]].. imgName .. ".".. suffix
    GUIDropImages[labelname].imgName = imgName .. ".".. suffix
    GUIDropManager.createDropScript()
end
registerAnonymousEventHandler("sysDropEvent", "GUIDropManager.ImageDrop")</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>AdjustableContainer Additions</name>
				<packageName></packageName>
				<script>local function deleteImage(s) 
    GUIDropImages[string.gsub(s.name,"GUIDropImages%.","")] = nil  
    GUIDropImages[string.gsub(s.name.."Label", "GUIDropImages%.","")] = nil
    table.remove(Adjustable.Container.all_windows, table.index_of(Adjustable.Container.all_windows, s.name))
    Adjustable.Container.all[s.name] = nil
    if io.exists(getMudletHomeDir().."/AdjustableContainer/"..s.name..".lua") then
        os.remove(getMudletHomeDir().."/AdjustableContainer/"..s.name..".lua")
    end    
    s:hide()
end

local function convertToLabel(s)
    local labelscript = [[%s = %s or Geyser.Label:new({name = "%s", x="%s", y="%s", width="%s", height="%s"}%s)
    %s:setStyleSheet("border-image: url(%s);")
    ]]
    local container = GUIDropImages[string.gsub(s.name,"GUIDropImages%.","")]
    local labelname = string.gsub(s.name.."Label", "GUIDropImages%.","")
    GUIDropImages[labelname]:changeContainer(container.container)
    GUIDropImages[labelname]:move(container.x, container.y)
    GUIDropImages[labelname]:resize(container.width, container.height)
    
    if exists("GUIDropManager", "script") == 0 then
        permGroup("GUIDropManager", "script")
    end
    
    if exists("GUIDropLabels", "script") == 0 then
        permScript("GUIDropLabels", "GUIDropManager","--GUIDropLabels Script")
        enableScript("GUIDropLabels")
        echo("LabelScript created!")
    end
    
    if container.containervar then
        container.containervar = ","..container.containervar
    else
        container.containervar = ""
    end
    
    local label = GUIDropImages[string.gsub(s.name.."Label", "GUIDropImages%.","")]
    labelname = labelname:sub(1,-6)
    labelscript = string.format(labelscript, labelname, labelname, labelname, label.x, label.y, label.width, label.height, container.containervar, labelname, [["..getMudletHomeDir().."/GUIDropImages/]].. label.imgName)
    
    appendScript("GUIDropLabels", labelscript)
    
    GUIDropImages[string.gsub(s.name,"GUIDropImages%.","")]:hide()
    GUIDropImages[string.gsub(s.name,"GUIDropImages%.","")] = nil
    GUIDropImages[string.gsub(s.name.."Label", "GUIDropImages%.","")] = nil
    table.remove(Adjustable.Container.all_windows, table.index_of(Adjustable.Container.all_windows, s.name))
    Adjustable.Container.all[s.name] = nil
    if io.exists(getMudletHomeDir().."/AdjustableContainer/"..s.name..".lua") then
        os.remove(getMudletHomeDir().."/AdjdustableContainer/"..s.name..".lua")
    end  
end


function Adjustable.Container:setDropImg()
    if self.dropImg then
        return
    end
    
    self.dropImg = true
    self.adjLabelstyle =[[
    QLabel::hover{ background-color: rgba(0,0,0,0%); border: 1px solid grey;}
    QLabel::!hover{ background-color: rgba(0,0,0,0%);}]]
    if not self.locked then
        self.adjLabel:setStyleSheet(self.adjLabelstyle)
    else
        self.adjLabel:setStyleSheet([[border:0;]])
    end
    self:setTitle(" ")
    self.minimizeLabel:raise()
    self.exitLabel:raise()
    
    self:newCustomItem("setAbsolute", function(s) s:setAbsolute(true, true) self:save() end)
    self:newCustomItem("setPercent",  function(s) s:setPercent(true, true)  self:save() end)
    self:newCustomItem("deleteImage", function(s) deleteImage(s) GUIDropManager.createDropManager() Adjustable.Container:saveAll() end)
    self:newCustomItem("convertToLabel",  function(s) convertToLabel(s) GUIDropManager.createDropManager() Adjustable.Container:saveAll() end)
    self:newCustomItem("saveAll",  function(s) Adjustable.Container:saveAll() end)
    self:newCustomItem("loadAll",  function(s) Adjustable.Container:saveAll() end)
    self:newCustomItem("updateScript",  function(s) Adjustable.Container:saveAll() GUIDropManager.createDropManager() end)
end</script>
				<eventHandlerList />
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>deleteOldProfiles</name>
			<packageName>deleteOldProfiles</packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>deleteOldProfiles script</name>
				<packageName></packageName>
				<script>function deleteOldProfiles(keepdays_arg, delete_folder)
  --[[
  Deletes old profiles/maps/modules in the "current"/"map"/"moduleBackups" folders of the Mudlet home directory.
  The following files are NOT deleted:
  - Files newer than the amount of days specified as an argument to deleteOldProfiles(), or 31 days if not specified.
  - One file for every month before that. Specifically: The first available file of every month prior to this.
  Setting the second argument to true will delete maps instead of profiles. (e.g. deleteOldProfiles(10, true))
  --]]

  -- Ensure correct value is passed for second argument
  assert(type(delete_folder) == "string", "Wrong type for delete_folder; expected string, got " .. type(delete_folder))
  assert(table.contains({"profiles", "maps", "modules"}, delete_folder), "delete_folder must be profiles, maps or modules")

  local keepdays = tonumber(keepdays_arg) or 31
  local profile_table = {}
  local used_last_mod_months = {}
  local slash = (string.char(getMudletHomeDir():byte()) == "/") and "/" or "\\"
  local delnum = 0

  local to_folder = {
    profiles = "current",
    maps = "map",
  }

  local dirpath = delete_folder == "modules"
    and getMudletHomeDir()..slash..".."..slash..".."..slash.."moduleBackups"
    or getMudletHomeDir()..slash..to_folder[delete_folder]

  -- Traverse the profiles folder and create a table of files:
  for filename in lfs.dir(dirpath) do
    if filename~="." and filename~=".." then
      profile_table[#profile_table+1] = {
        name = filename,
        last_mod = lfs.attributes(dirpath..slash..filename, "modification")
      }
    end
  end

  -- Sort the table according to last modification date from old to new:
  table.sort(profile_table, function (a,b) return a.last_mod &lt; b.last_mod end)

  echo(string.format(
    "\nDeleting old %s. Files newer than %d days and one for every month before that will be kept.",
    delete_folder,
    keepdays
  ))

  for i, v in ipairs(profile_table) do
    local days = math.floor(os.difftime(os.time(), v.last_mod) / 86400)
    local last_mod_month = os.date("%Y/%m", v.last_mod)
    if days &gt; keepdays then
      -- For profiles older than X days, check if we already kept a table for this month:
      if not table.contains(used_last_mod_months, last_mod_month) then
        -- If not, do nothing and mark this month as "kept".
        used_last_mod_months[#used_last_mod_months+1] = last_mod_month
      else
        -- Otherwise remove the file:
        local success, errorstring = os.remove(dirpath..slash..v.name)
        if success then
          delnum = delnum + 1
        else
          cecho("\n&lt;red&gt;ERROR: "..errorstring)
        end
      end
    end
  end

  echo(string.format("\nDeletion complete. %d/%d files were removed successfully.", delnum, #profile_table))
end
</script>
				<eventHandlerList />
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>autosave</name>
			<packageName>autosave</packageName>
			<script></script>
			<eventHandlerList />
			<ScriptGroup isActive="yes" isFolder="yes">
				<name>gui-drop</name>
				<packageName>gui-drop</packageName>
				<script></script>
				<eventHandlerList />
				<Script isActive="yes" isFolder="no">
					<name>workaround for add</name>
					<packageName></packageName>
					<script>-- Once Geyser.add2 is in this is not needed anymore
local addwrapper = Adjustable.Container.add
function Adjustable.Container:add(window, cons)
  addwrapper(self, window, cons)
  if self.hidden then
    tempTimer(0, function() self:hide() end)
  end
  if self.auto_hidden then
    tempTimer(0, function() self:hide(true) end)
  end
end</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>createDropManager</name>
					<packageName></packageName>
					<script>GUIDropManager = GUIDropManager or {}
GUIDropImages = GUIDropImages or {}
function GUIDropManager.createDropManager()
    GUIDropManager.script = "--GUIDropManager\n"
    
    local labelscript = [[%s = %s or Geyser.Label:new({name = "%s", x="%s", y="%s", width="%s", height="%s"%s}, %s)
    %s:setStyleSheet("border-image: url(%s);")
    %s.imgName = "%s"
    %s:setDropImg()
    
    ]]
    local containerscript = [[%s = %s or Adjustable.Container:new({name = "%s", x = "%s", y = "%s", width = "%s", height = "%s", lockStyle = "full", padding = 0, noLimit = true%s%s}%s)
    
    ]]
    local function createFname(imgName)
        return [["..getMudletHomeDir().."/GUIDropImages/]].. imgName
    end
    for k,v in pairs(GUIDropImages) do
        
        if v.type == "adjustablecontainer" then
            local container = ""
            local containervar = ""
            local locked = ""
            if v.windowname ~= "main" then
                container = v.containervar or getKeyFrom(v.container, ".container")
                if not container then
                    container = "Geyser.windowList."..v.windowname.."Container.windowList."..v.windowname
                end
                containervar = [[, containervar = "]]..container..[["]]
                v.containervar = container
                container = ", "..container
            end
            if v.locked then
                locked = ", locked = true"
            end
            GUIDropManager.script = GUIDropManager.script..string.format(containerscript, v.name, v.name, v.name, v.x, v.y, v.width, v.height, locked, containervar, container)
        end
        
    end
    
    
    for k,v in pairs(GUIDropImages) do    
        if v.type == "label" then
            v.fname = v.fname or createFname(v.imgName)
            local clickthrough = ""
            if v.clickthrough then
                clickthrough = ", clickthrough = true"
            end
            GUIDropManager.script = GUIDropManager.script..string.format(labelscript, v.name, v.name, v.name, v.x, v.y, v.width, v.height, clickthrough, v.container.container.name, v.name, v.fname, v.name, v.imgName, v.container.container.name)
        end    
    end
    
    if not setScript("GUIDropManager", GUIDropManager.script, 2) then
        display(setScript("GUIDropManager", GUIDropManager.script, 2))
    end
    
end</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>Global Variable Functions</name>
					<packageName></packageName>
					<script>function GUIDropManager.getKeyFrom(value, exclude, depth, table, iteration)
    exclude = exclude or false
    depth = depth or 3
    table = table or _G
    local tempTable = {}
    iteration = iteration or 1
    if iteration &gt; depth then
        return nil, "key not found"
    end
    for k,v in pairs(table) do
        if type(v) == "table" and k ~= "_G" then
            for k1,v1 in pairs(v) do
                tempTable[k.."."..k1] = v1
            end
        end
        if v == value and not string.find(k, exclude) then
            return k
        end
    end
    return GUIDropManager.getKeyFrom(value, exclude, depth, tempTable, iteration + 1)    
end</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>createDropScript</name>
					<packageName></packageName>
					<script>function GUIDropManager.createDropScript()
    if exists("GUIDropManager", "script") == 0 then
        permGroup("GUIDropManager", "script")
    end
    if exists("GUIDropManager", "script") &lt; 2 then
        permScript("GUIDropManager", "GUIDropManager","--GUIDropManager Script")
        enableScript("GUIDropManager")
        echo("DropScript created!")
    end
    GUIDropManager.createDropManager()
end</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>ImageDrop</name>
					<packageName></packageName>
					<script>function GUIDropManager.ImageDrop(event, fname, suffix, posx, posy, consoleName)
    Adjustable.Container:saveAll()
    local acceptable_suffix = {"png", "jpg", "bmp", "jpeg"}
    
    if not table.contains(acceptable_suffix, suffix) then
        return
    end
    local main_width, main_height = getMainWindowSize()
    local image_width, image_height = getImageSize(fname)
    
    if not image_width then 
        return 
    end
    local image_ratio = image_height / image_width
    if image_width &gt; main_width-50 or image_height &gt; main_height-50 then
        image_height = main_height-50
        image_width = (main_height-50) / image_ratio
    end
    
    posx = math.max(0, posx - (image_width/10))
    posy = math.max(0, posy - (image_height/10))
    local imgName = fname:match("([^%/]+)%..+$")
    
    if not (io.exists(getMudletHomeDir() .. "/GUIDropImages/")) then
        lfs.mkdir(getMudletHomeDir() .. "/GUIDropImages/")
    end
    
    --copy file to my profile location
    local imgLocation = getMudletHomeDir() .. "/GUIDropImages/".. imgName.. ".".. suffix
    local infile = io.open(fname, "rb")
    if not (io.exists(imgLocation)) then 
        local instr = infile:read("*ab")
        infile:close()
        local outfile = io.open(imgLocation, "wb")
        outfile:write(instr)
        outfile:close()
    end
    
    local acontainer
    if consoleName == "main" then
        acontainer = Geyser
    else
        acontainer = Geyser.windowList[consoleName.."Container"].windowList[consoleName]
    end
    --convert filename to be a feasible variablename
    local containername = string.gsub(imgName,"[^_%w]","")
    --if filename is only composed of number convert it
    if not containername:match("%D+") then
        containername = "defaultName"
    end
    
    --Check if image exists already and create new containername by adding +1 to the name
    if GUIDropImages[containername] or _G[containername] then 
        while GUIDropImages[containername] or _G[containername] do
            counter = containername:match("%d+$")
            if counter ~= nil then     
                containername = containername:sub(1,-(string.len(counter)+1))
            end
            counter = counter or 0
            counter = counter + 1
            containername = containername..counter
        end
    end
    
    containername = containername
    local labelname = containername.."Label"
    
    GUIDropImages[containername] = Adjustable.Container:new({name="GUIDropImages."..containername, lockStyle = "full", padding = 0, noLimit = true, autoLoad = false, autoSave = false} , acontainer)
    GUIDropImages[containername]:move(posx, posy)
    GUIDropImages[containername]:resize(image_width, image_height)
    GUIDropImages[containername]:setPercent(true, true)
    GUIDropImages[labelname] = Geyser.Label:new({name = "GUIDropImages."..labelname, x=0, y=0, width="100%", height="100%", clickthrough = true}, GUIDropImages[containername])
    
    GUIDropImages[labelname].fname = [["..getMudletHomeDir().."/GUIDropImages/]].. imgName .. ".".. suffix
    GUIDropImages[labelname].imgName = imgName .. ".".. suffix
    GUIDropManager.createDropScript()
end
registerAnonymousEventHandler("sysDropEvent", "GUIDropManager.ImageDrop")</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>AdjustableContainer Additions</name>
					<packageName></packageName>
					<script>local function deleteImage(s) 
    GUIDropImages[string.gsub(s.name,"GUIDropImages%.","")] = nil  
    GUIDropImages[string.gsub(s.name.."Label", "GUIDropImages%.","")] = nil
    table.remove(Adjustable.Container.all_windows, table.index_of(Adjustable.Container.all_windows, s.name))
    Adjustable.Container.all[s.name] = nil
    if io.exists(getMudletHomeDir().."/AdjustableContainer/"..s.name..".lua") then
        os.remove(getMudletHomeDir().."/AdjustableContainer/"..s.name..".lua")
    end    
    s:hide()
end

local function convertToLabel(s)
    local labelscript = [[%s = %s or Geyser.Label:new({name = "%s", x="%s", y="%s", width="%s", height="%s"}%s)
    %s:setStyleSheet("border-image: url(%s);")
    ]]
    local container = GUIDropImages[string.gsub(s.name,"GUIDropImages%.","")]
    local labelname = string.gsub(s.name.."Label", "GUIDropImages%.","")
    GUIDropImages[labelname]:changeContainer(container.container)
    GUIDropImages[labelname]:move(container.x, container.y)
    GUIDropImages[labelname]:resize(container.width, container.height)
    
    if exists("GUIDropManager", "script") == 0 then
        permGroup("GUIDropManager", "script")
    end
    
    if exists("GUIDropLabels", "script") == 0 then
        permScript("GUIDropLabels", "GUIDropManager","--GUIDropLabels Script")
        enableScript("GUIDropLabels")
        echo("LabelScript created!")
    end
    
    if container.containervar then
        container.containervar = ","..container.containervar
    else
        container.containervar = ""
    end
    
    local label = GUIDropImages[string.gsub(s.name.."Label", "GUIDropImages%.","")]
    labelname = labelname:sub(1,-6)
    labelscript = string.format(labelscript, labelname, labelname, labelname, label.x, label.y, label.width, label.height, container.containervar, labelname, [["..getMudletHomeDir().."/GUIDropImages/]].. label.imgName)
    
    appendScript("GUIDropLabels", labelscript)
    
    GUIDropImages[string.gsub(s.name,"GUIDropImages%.","")]:hide()
    GUIDropImages[string.gsub(s.name,"GUIDropImages%.","")] = nil
    GUIDropImages[string.gsub(s.name.."Label", "GUIDropImages%.","")] = nil
    table.remove(Adjustable.Container.all_windows, table.index_of(Adjustable.Container.all_windows, s.name))
    Adjustable.Container.all[s.name] = nil
    if io.exists(getMudletHomeDir().."/AdjustableContainer/"..s.name..".lua") then
        os.remove(getMudletHomeDir().."/AdjdustableContainer/"..s.name..".lua")
    end  
end


function Adjustable.Container:setDropImg()
    if self.dropImg then
        return
    end
    
    self.dropImg = true
    self.adjLabelstyle =[[
    QLabel::hover{ background-color: rgba(0,0,0,0%); border: 1px solid grey;}
    QLabel::!hover{ background-color: rgba(0,0,0,0%);}]]
    if not self.locked then
        self.adjLabel:setStyleSheet(self.adjLabelstyle)
    else
        self.adjLabel:setStyleSheet([[border:0;]])
    end
    self:setTitle(" ")
    self.minimizeLabel:raise()
    self.exitLabel:raise()
    
    self:newCustomItem("setAbsolute", function(s) s:setAbsolute(true, true) self:save() end)
    self:newCustomItem("setPercent",  function(s) s:setPercent(true, true)  self:save() end)
    self:newCustomItem("deleteImage", function(s) deleteImage(s) GUIDropManager.createDropManager() Adjustable.Container:saveAll() end)
    self:newCustomItem("convertToLabel",  function(s) convertToLabel(s) GUIDropManager.createDropManager() Adjustable.Container:saveAll() end)
    self:newCustomItem("saveAll",  function(s) Adjustable.Container:saveAll() end)
    self:newCustomItem("loadAll",  function(s) Adjustable.Container:saveAll() end)
    self:newCustomItem("updateScript",  function(s) Adjustable.Container:saveAll() GUIDropManager.createDropManager() end)
end</script>
					<eventHandlerList />
				</Script>
			</ScriptGroup>
			<ScriptGroup isActive="yes" isFolder="yes">
				<name>deleteOldProfiles</name>
				<packageName>deleteOldProfiles</packageName>
				<script></script>
				<eventHandlerList />
				<Script isActive="yes" isFolder="no">
					<name>deleteOldProfiles script</name>
					<packageName></packageName>
					<script>function deleteOldProfiles(keepdays_arg, delete_folder)
  --[[
  Deletes old profiles/maps/modules in the "current"/"map"/"moduleBackups" folders of the Mudlet home directory.
  The following files are NOT deleted:
  - Files newer than the amount of days specified as an argument to deleteOldProfiles(), or 31 days if not specified.
  - One file for every month before that. Specifically: The first available file of every month prior to this.
  Setting the second argument to true will delete maps instead of profiles. (e.g. deleteOldProfiles(10, true))
  --]]

  -- Ensure correct value is passed for second argument
  assert(type(delete_folder) == "string", "Wrong type for delete_folder; expected string, got " .. type(delete_folder))
  assert(table.contains({"profiles", "maps", "modules"}, delete_folder), "delete_folder must be profiles, maps or modules")

  local keepdays = tonumber(keepdays_arg) or 31
  local profile_table = {}
  local used_last_mod_months = {}
  local slash = (string.char(getMudletHomeDir():byte()) == "/") and "/" or "\\"
  local delnum = 0

  local to_folder = {
    profiles = "current",
    maps = "map",
  }

  local dirpath = delete_folder == "modules"
    and getMudletHomeDir()..slash..".."..slash..".."..slash.."moduleBackups"
    or getMudletHomeDir()..slash..to_folder[delete_folder]

  -- Traverse the profiles folder and create a table of files:
  for filename in lfs.dir(dirpath) do
    if filename~="." and filename~=".." then
      profile_table[#profile_table+1] = {
        name = filename,
        last_mod = lfs.attributes(dirpath..slash..filename, "modification")
      }
    end
  end

  -- Sort the table according to last modification date from old to new:
  table.sort(profile_table, function (a,b) return a.last_mod &lt; b.last_mod end)

  echo(string.format(
    "\nDeleting old %s. Files newer than %d days and one for every month before that will be kept.",
    delete_folder,
    keepdays
  ))

  for i, v in ipairs(profile_table) do
    local days = math.floor(os.difftime(os.time(), v.last_mod) / 86400)
    local last_mod_month = os.date("%Y/%m", v.last_mod)
    if days &gt; keepdays then
      -- For profiles older than X days, check if we already kept a table for this month:
      if not table.contains(used_last_mod_months, last_mod_month) then
        -- If not, do nothing and mark this month as "kept".
        used_last_mod_months[#used_last_mod_months+1] = last_mod_month
      else
        -- Otherwise remove the file:
        local success, errorstring = os.remove(dirpath..slash..v.name)
        if success then
          delnum = delnum + 1
        else
          cecho("\n&lt;red&gt;ERROR: "..errorstring)
        end
      end
    end
  end

  echo(string.format("\nDeletion complete. %d/%d files were removed successfully.", delnum, #profile_table))
end
</script>
					<eventHandlerList />
				</Script>
			</ScriptGroup>
			<ScriptGroup isActive="yes" isFolder="yes">
				<name>generic_mapper</name>
				<packageName>generic_mapper</packageName>
				<script></script>
				<eventHandlerList />
				<Script isActive="yes" isFolder="no">
					<name>Map Script</name>
					<packageName></packageName>
					<script>-- Jor'Mox's Generic Map Script
-- the script self-updates, changing this value will bring an update to all installations
-- make sure versions.lua has the latest version in it
local version = "2.1.7"

    -- look into options for non-standard door usage for speedwalk
    -- come up with aliases to set translations and custom exits, add appropriate help info

mudlet = mudlet or {}
mudlet.mapper_script = true
map = map or {}

map.help = {[[
    &lt;cyan&gt;Generic Map Script&lt;reset&gt;

    This script allows for semi-automatic mapping using the included triggers.
    While different games can have dramatically different ways of displaying
    information, some effort has been put into giving the script a wide range of
    potential patterns to look for, so that it can work with minimal effort in
    many cases. The script locates the room name by searching up from the
    detected exits line until a prompt is found or it runs out of text to
    search, clearing saved text each time a prompt is detected or a movement
    command is sent, with the room name being set to the last line of text
    found. An accurate prompt pattern is necessary for this to work well, and
    sometimes other text can end up being shown between the prompt and the room
    name, or on the same line as the room name, which can be handled by
    providing appropriate patterns telling the script to ignore that text. Below
    is an overview of the included commands and important events that this
    script uses to work. Additional information on each command or event is
    available in individual help files.

    &lt;cyan&gt;Fundamental Commands:&lt;reset&gt;
        These are commands used to get the mapper functional on a basic level.

        &lt;link: show&gt;map show&lt;/link&gt; - Displays or hides a map window.
        &lt;link: quick start&gt;map basics&lt;/link&gt; - Shows a quick-start guide with some basic information to
            help get the script working.
        &lt;link: 1&gt;map help [command name]&lt;/link&gt; - Shows either this help file or the help file for the
            command given.
        &lt;link: find prompt&gt;find prompt&lt;/link&gt; - Instructs the script to look for a prompt that matches
            a known pattern.
        &lt;link: prompt&gt;map prompt &lt;pattern&gt;&lt;/link&gt; - Provides a specific pattern to the script that
            matches your prompt, uses &lt;urllink: https://www.lua.org/pil/20.2.html&gt;Lua string-library patterns&lt;/urllink&gt;.
        &lt;link: ignore&gt;map ignore &lt;pattern&gt;&lt;/link&gt; - Provides a specific pattern for the script to
            ignore, uses &lt;urllink: https://www.lua.org/pil/20.2.html&gt;Lua string-library patterns&lt;/urllink&gt;.
        &lt;link: movemethod&gt;map movemethod &lt;word&gt;&lt;/link&gt; - Adds a movement method for the script to
            look for when mapping.
        &lt;link: debug&gt;map debug&lt;/link&gt; - Toggles on debug mode, in which extra messages are shown with
            the intent of assisting in troubleshooting getting the script setup.
        &lt;link: me&gt;map me&lt;/link&gt; - Locates the user on the map, if possible.
        &lt;link: path&gt;map path &lt;room name&gt; [; area name]&lt;/link&gt; - Finds a walking path to the named
            room, in the named area if specified.
        &lt;link: character&gt;map character &lt;name&gt;&lt;/link&gt; - Sets a given name as the current character for
            the purposes of the script, used for different prompt patterns and
            recall locations.
        &lt;link: recall&gt;map recall&lt;/link&gt; - Sets the current room as the recall location of the
            current character
        &lt;link: config&gt;map config &lt;configuration&gt; [value]&lt;/link&gt; - Sets or toggles the given
            configuration either turning it on or off, if no value is given, or sets it to the given
            value.
        &lt;link: window&gt;map window &lt;configuration&gt; [value]&lt;/link&gt; - Sets the given configuration for the
            map window to the given value.
        &lt;link: translate&gt;map translate &lt;english direction&gt; &lt;translated long direction&gt;&lt;/link&gt;
        &lt;link: translate&gt;&lt;translated short direction&gt;&lt;/link&gt; - Sets the provided translations for the
            given english direction word.

    &lt;cyan&gt;Map Information Commands:&lt;reset&gt;
        These commands show detailed information about your current map.

        &lt;link: areas&gt;map areas&lt;/link&gt; - Shows a list of all areas, with links to show a list of
            rooms in the area.
        &lt;link: rooms&gt;map rooms &lt;area name&gt;&lt;/link&gt; - Shows a list of rooms in the named area.
        &lt;link: room_find&gt;room find|rf &lt;room name&gt;&lt;/link&gt; - Searches for a room of a given name.
        &lt;link: room_look&gt;room look|rl [roomID]&lt;/link&gt; - Displays detailed information about a room.
        &lt;link: showpath&gt;showpath &lt;roomID&gt;&lt;/link&gt; - Shows you a path from your current location to the
            roomID.
        &lt;link: showpath&gt;showpath &lt;fromID&gt; &lt;toID&gt;&lt;/link&gt; - Shows you a path from a given location to
            another location.
        &lt;link: spe_list&gt;spe list [filter]&lt;/link&gt; - Display a list of all known special exits.
        &lt;link: feature_list&gt;feature list&lt;/link&gt; - Lists all map features created via feature create and
            the associated room characters.

    &lt;cyan&gt;Map Creation Commands:&lt;reset&gt;
        These are commands used in the process of actually creating a map.

        &lt;link: start mapping&gt;start mapping [area name]&lt;/link&gt; - Starts adding content to the map, using
            either the area of the room the user is currently in or the area
            name provided.
        &lt;link: stop mapping&gt;stop mapping&lt;/link&gt; - Stops adding content to the map.
        &lt;link: area_add&gt;area add &lt;area name&gt;&lt;/link&gt; - Creates a new area.
        &lt;link: area_delete&gt;area delete &lt;area name&gt;&lt;/link&gt; - Deletes a given area and all rooms within.
        &lt;link: area_cancel&gt;cancel area deletion&lt;/link&gt; - Pauses deletion of an area.  This will NOT
            restore delete rooms.
        &lt;link: area_rename&gt;area rename &lt;new area name&gt;&lt;/link&gt; - Renames the current area you're in.
        &lt;link: set area&gt;set area &lt;area name&gt;&lt;/link&gt; - Moves the current room to the named area.
        &lt;link: mode&gt;map mode &lt;lazy, simple, normal or complex&gt;&lt;/link&gt; - Sets the mapping mode, which
            defines how new rooms are added to the map.
        &lt;link: add door&gt;add door &lt;direction&gt; [door status] [one way]&lt;/link&gt; - Creates a door in
            the given direction, with the given status(default closed), in both
            directions, unless a one-direction door is specified.
        &lt;link: add portal&gt;add portal [-f] &lt;entry command&gt;&lt;/link&gt; - Creates a portal in the current room,
            using the given command for entry.
        &lt;link: shift&gt;shift &lt;direction&gt;&lt;/link&gt; - Moves the current room on the map in the given direction.
        &lt;link: merge rooms&gt;merge rooms&lt;/link&gt; - Combines overlapping rooms that have the same name into
            a single room.
        &lt;link: clear moves&gt;clear moves&lt;/link&gt; - Clears the list of movement commands maintained by the
            script.
        &lt;link: set exit&gt;set exit &lt;direction&gt; &lt;roomID&gt;&lt;/link&gt; - Creates a one-way exit in the given
            direction to the room with the specified roomID, can also be used with portals.
        &lt;link: arealock&gt;arealock [area name]&lt;/link&gt; - Displays a list of areas you can lock/unlock.
        &lt;link: room_coords&gt;room coords|rc [v&lt;roomID&gt;] &lt;x&gt; &lt;y&gt; &lt;z&gt;&lt;/link&gt; - Move a room to new map coordinates.
        &lt;link: room_delete&gt;room delete|rld &lt;direction|roomID&gt;&lt;/link&gt; - Delete a room given a direction or roomID.
        &lt;link: room_weight&gt;rw [direction|roomID] &lt;weight&gt;&lt;/link&gt; - Set a room weight given a direction or roomID.
        &lt;link: room_weight_exit&gt;rwe [roomID] &lt;weight&gt; &lt;exit&gt;&lt;/link&gt; - Set the weight of a given exit in
            the current room, or optional roomID.
        &lt;link: room_link&gt;room link|rlk &lt;direction&gt; [one]&lt;/link&gt; - Create a link to a room given a direction.
            Optional 'one' to create a one-way link.
        &lt;link: room_unlink&gt;room unlink|urlk &lt;direction&gt;&lt;/link&gt; - Delete a link in the specified direction.
        &lt;link: room_door&gt;rd [roomID] &lt;direction&gt; &lt;open|closed|locked|clear&gt;&lt;/link&gt; - Create or delete a door
            from the current room, or optional location.
        &lt;link: room_character&gt;rcc &lt;character&gt; [roomID]&lt;/link&gt; - Assign a single character, letter or
            number to the current room, or optional location.
        &lt;link: exit_special&gt;exit special|spe &lt;direction|roomID&gt; &lt;command&gt;&lt;/link&gt; - Add a special exit
            to a room.
        &lt;link: spev&gt;spev &lt;fromID&gt; &lt;toID&gt; &lt;command&gt;&lt;/link&gt; - Add a special exit to two remote rooms.
        &lt;link: spe_clear&gt;exit special clear|spe clear &lt;direction|roomID&gt;&lt;/link&gt; - Delete a special exit.
        &lt;link: room_area&gt;room area [v&lt;roomID&gt;] &lt;area name&gt;&lt;/link&gt; - Moves a room to the given area.
        &lt;link: room_label&gt;room label [roomID] [fgColor] [bgColor] &lt;message&gt;&lt;/link&gt; - Adds a label to a room.
        &lt;link: area_labels&gt;area labels &lt;area name&gt;&lt;/link&gt; - Display all labels in a given area with an
            option to delete.
        &lt;link: feature_create&gt;feature create &lt;feature&gt; [char &lt;room character&gt;]&lt;/link&gt; - Create a new
            global map feature.
        &lt;link: room_feature_create&gt;room create feature|rcf [v&lt;room id&gt;] &lt;feature&gt;&lt;/link&gt; - Adds a map
            feature to the current room, or optional location.
        &lt;link: room_feature_delete&gt;room delete feature|rdf [v&lt;room id&gt;] &lt;feature&gt;&lt;/link&gt; - Removes a
            map feature from the current room or optional location.
        &lt;link: feature_delete&gt;feature delete &lt;feature&gt;&lt;/link&gt; - Deletes a global map feature and
            removes it from all rooms.

    &lt;cyan&gt;Sharing and Backup Commands:&lt;reset&gt;

        &lt;link: save&gt;map save&lt;/link&gt; - Creates a backup of the map.
        &lt;link: load&gt;map load &lt;remote address&gt;&lt;/link&gt; - Loads a map backup, or a map file from a
            remote address.
        &lt;link: export&gt;map export &lt;area name&gt;&lt;/link&gt; - Creates a file from the named area that can
            be shared.
        &lt;link: import&gt;map import &lt;area name&gt;&lt;/link&gt; - Loads an area from a file.

    &lt;cyan&gt;Mapping Events:&lt;reset&gt;
        These events are used by triggers to direct the script's behavior.

        &lt;link: onNewRoom&gt;onNewRoom&lt;/link&gt; - Signals that a room has been detected, optional exits
            argument.
        &lt;link: onMoveFail&gt;onMoveFail&lt;/link&gt; - Signals that an attempted move failed.
        &lt;link: onForcedMove&gt;onForcedMove&lt;/link&gt; - Signals that the character moved without a command
            being entered, required direction argument.
        &lt;link: onRandomMove&gt;onRandomMove&lt;/link&gt; - Signals that the character moved in an unknown
            direction without a command being entered.
        &lt;link: onVisionFail&gt;onVisionFail&lt;/link&gt; - Signals that the character moved but some or all of
            the room information was not able to be gathered.

    &lt;cyan&gt;Key Variables:&lt;reset&gt;
        These variables are used by the script to keep track of important
            information.

        &lt;yellow&gt;map.prompt.room&lt;reset&gt; - Can be set to specify the room name.
        &lt;yellow&gt;map.prompt.exits&lt;reset&gt; - Can be set to specify the room exits.
        &lt;yellow&gt;map.prompt.hash&lt;reset&gt; - Can be set to specify the room hash.
            Notice: if you set this, mapper will only find room by
            getRoomIDbyHash(hash)
        &lt;yellow&gt;map.character&lt;reset&gt; - Contains the current character name.
        &lt;yellow&gt;map.save.recall&lt;reset&gt; - Contains a table of recall roomIDs for all
            characters.
        &lt;yellow&gt;map.save.prompt_pattern&lt;reset&gt; - Contains a table of prompt patterns for all
            characters.
        &lt;yellow&gt;map.save.ignore_patterns&lt;reset&gt; - Contains a table of patterns of text the
            script ignores.
        &lt;yellow&gt;map.configs&lt;reset&gt; - Contains a number of different options that can be set
            to modify script behavior.
        &lt;yellow&gt;map.currentRoom&lt;reset&gt; - Contains the roomID of the room your character is
            in, according to the script.
        &lt;yellow&gt;map.currentName&lt;reset&gt; - Contains the name of the room your character is in,
            according to the script.
        &lt;yellow&gt;map.currentExits&lt;reset&gt; - Contains a table of the exits of the room your
            character is in, according to the script.
        &lt;yellow&gt;map.currentArea&lt;reset&gt; - Contains the areaID of the area your character is
            in, according to the script.
]]}
map.help.save = [[
    &lt;cyan&gt;Map Save&lt;reset&gt;
        syntax: &lt;yellow&gt;map save&lt;reset&gt;

        This command creates a copy of the current map and stores it in the
        profile folder as map.dat. This can be useful for creating a backup
        before adding new content, in case of problems, and as a way to share an
        entire map at once.
]]
map.help.load = [[
    &lt;cyan&gt;Map Load&lt;reset&gt;
        syntax: &lt;yellow&gt;map load &lt;optional download address&gt;&lt;reset&gt;

        This command replaces the current map with the map stored as map.dat in
        the profile folder. Alternatively, if a download address is provided, a
        map is downloaded from that location and loaded to replace the current
        map. If no filename is given with the download address, the script tries
        to download map.dat. If a filename is given it MUST end with .dat.
]]
map.help.show = [[
    &lt;cyan&gt;Map Show&lt;reset&gt;
        syntax: &lt;yellow&gt;map show&lt;reset&gt;

        This command shows a map window, as specified by the window configs set
        via the &lt;link: window&gt;map window command&lt;/link&gt;. It isn't necessary to use this method to
        show a map window to use this script, any map window will work.
]]
map.help.export = [[
    &lt;cyan&gt;Map Export&lt;reset&gt;
        syntax: &lt;yellow&gt;map export &lt;area name&gt;&lt;reset&gt;

        This command creates a file containing all the informatino about the
        named area and stores it in the profile folder, with a file name based
        on the area name. This file can then be imported, allowing for easy
        sharing of single map areas. The file name will be the name of the area
        in all lower case, with spaces replaced with underscores, and a .dat
        file extension.
]]
map.help.import = [[
    &lt;cyan&gt;Map Import&lt;reset&gt;
        syntax: &lt;yellow&gt;map import &lt;area name&gt;&lt;reset&gt;

        This command imports a file from the profile folder with a name matching
        the name of the file, and uses it to create an area on the map. The area
        name used can be capitalized or not, and may have either spaces or
        underscores between words. The actual area name is stored within the
        file, and is not set by the area name used in this command.
]]
map.help.start_mapping = [[
    &lt;cyan&gt;Start Mapping&lt;reset&gt;
        syntax: &lt;yellow&gt;start mapping [area name]&lt;reset&gt;

        This command instructs the script to add new content to the map when it
        is seen. When first used, an area name is mandatory, so that an area is
        created for new rooms to be placed in. If used with an area name while
        the map shows the character within a room on the map, that room will be
        moved to be in the named area, if it is not already in it. If used
        without an area name, the room is not moved, and mapping begins in the
        area the character is currently located in.
]]
map.help.stop_mapping = [[
    &lt;cyan&gt;Stop Mapping&lt;reset&gt;
        syntax: &lt;yellow&gt;stop mapping&lt;reset&gt;

        This command instructs the script to stop adding new content until
        mapping is resumed at a later time. The map will continue to perform
        other functions.
]]
map.help.find_prompt = [[
    &lt;cyan&gt;Find Prompt&lt;reset&gt;
        syntax: &lt;yellow&gt;find prompt&lt;reset&gt;

        This command instructs the script to begin searching newly arriving text
        for something that matches one of its known prompt patterns. If one is
        found, that pattern will be set as the current prompt pattern. This
        should typically be the first command used to set up this script with a
        new profile. If your prompt appears after using this command, but there
        is no message saying that the prompt has been found, it will be
        necessary to use the map prompt command to manually set a pattern.
]]
map.help.prompt = [[
    &lt;cyan&gt;Map Prompt&lt;reset&gt;
        syntax: &lt;yellow&gt;map prompt &lt;prompt pattern&gt;&lt;reset&gt;

        This command manually sets a prompt pattern for the script to use.
        Because of the way this script works, the prompt pattern should match
        the entire prompt, so that if the text matching the pattern were
        removed, the line with the prompt would be blank. The patterns must be
        of the type used by the Lua string library. If you are unsure about what
        pattern to use, seek assistance on the Mudlet Forums or the Mudlet
        Discord channel.
]]
map.help.debug = [[
    &lt;cyan&gt;Map Debug&lt;reset&gt;
        syntax: &lt;yellow&gt;map debug&lt;reset&gt;

        This command toggles the map script's debug mode on or off when it is
        used. Debug mode provides some extra messages to help with setting up
        the script and identifying problems to help with troubleshooting. If you
        are getting assistance with setting up this script, using debug mode may
        make the process faster and easier.
]]
map.help.ignore = [[
    &lt;cyan&gt;Map Ignore&lt;reset&gt;
        syntax: &lt;yellow&gt;map ignore &lt;ignore pattern&gt;&lt;reset&gt;

        This command adds the given pattern to a list the script maintains to
        help it locate the room name. Any text that might appear after a command
        is sent to move and before the room name appears, or after the prompt
        and before the room name if several movement commands are sent at once,
        should have an ignore pattern added for it.

        If the given pattern is already in the list of ignore patterns, that
        pattern will be removed from the list.

        Example: &lt;yellow&gt;map ignore ^You are hungry%.$&lt;reset&gt; - match exactly one line
                 &lt;yellow&gt;map ignore ^The clock strikes %d+%.$&lt;reset&gt; - match a number
                 &lt;yellow&gt;map ignore ^You walk %a+%.$&lt;reset&gt; - match a word, e.g. east
]]
map.help.movemethod = [[
    &lt;cyan&gt;Move Method&lt;reset&gt;
        syntax: &lt;yellow&gt;map movemethod &lt;movement word&gt;&lt;reset&gt;

        This command will add a movement method for the script to look for
        when moving between rooms. If your game has methods such as "walk north",
        "swim south" or similar, add "walk" or "swim" as necessary. For single
        room movement only.

        If the given method is already in the list of movement methods, that
        method will be removed from the list.
]]
map.help.areas = [[
    &lt;cyan&gt;Map Areas&lt;reset&gt;
        syntax: &lt;yellow&gt;map areas&lt;reset&gt;

        This command displays a linked list of all areas in the map. When
        clicked, the rooms in the selected area will be displayed, as if the
        'map rooms' command had been used with that area as an argument.
]]
map.help.rooms = [[
    &lt;cyan&gt;Map Rooms&lt;reset&gt;
        syntax: &lt;yellow&gt;map rooms &lt;area name&gt;&lt;reset&gt;

        This command shows a list of all rooms in the area, with the roomID and
        the room name, as well as a count of how many rooms are in the area
        total. Note that the area name argument is not case sensitive.
]]
map.help.set_area = [[
    &lt;cyan&gt;Set Area&lt;reset&gt;
        syntax: &lt;yellow&gt;set area &lt;area name&gt;&lt;reset&gt;

        This command move the current room into the named area, creating the
        area if needed.
]]
map.help.mode = [[
    &lt;cyan&gt;Map Mode&lt;reset&gt;
        syntax: &lt;yellow&gt;map mode &lt;lazy, simple, normal, or complex&gt;&lt;reset&gt;

        This command changes the current mapping mode, which determines what
        happens when new rooms are added to the map.

        In lazy mode, connecting exits aren't checked and a room is only added if
        there isn't an adjacent room with the same name.

        In simple mode, if an adjacent room has an exit stub pointing toward the
        newly created room, and the new room has an exit in that direction,
        those stubs are connected in both directions.

        In normal mode (default), the newly created room is connected to the room you left
        from, so long as it has an exit leading in that direction.

        In complex mode, none of the exits of the newly connected room are
        connected automatically when it is created.
]]
map.help.add_door = [[
    &lt;cyan&gt;Add Door&lt;reset&gt;
        syntax: &lt;yellow&gt;add door &lt;direction&gt; [none|open|closed|locked] [yes|no]&lt;reset&gt;

        This command places a door on the exit in the given direction, or
        removes it if "none" is given as the second argument. The door status is
        set as given by the second argument, default "closed". The third
        argument determines if the door is a one-way door, default "no".
]]
map.help.add_portal = [[
    &lt;cyan&gt;Add Portal&lt;reset&gt;
        syntax: &lt;yellow&gt;add portal [-f] &lt;entry command&gt;&lt;reset&gt;

        This command creates a special exit in the current room that is entered
        by using the given entry command. The given entry command is then sent,
        moving to the destination room. If the destination room matches an
        existing room, the special exit will link to that room, and if not a new
        room will be created. If the optional "-f" argument is given, a new room
        will be created for the destination regardless of if an existing room
        matches the room seen when arriving at the destination.
]]
map.help.shift = [[
    &lt;cyan&gt;Shift&lt;reset&gt;
        syntax: &lt;yellow&gt;shift &lt;direction&gt;&lt;reset&gt;

        This command moves the current room one step in the direction given, on
        the map.
]]
map.help.merge_rooms = [[
    &lt;cyan&gt;Merge Rooms&lt;reset&gt;
        syntax: &lt;yellow&gt;merge rooms&lt;reset&gt;

        This command combines all rooms that share the same coordinates and the
        same room name into a single room, with all of the exits preserved and
        combined.
]]
map.help.clear_moves = [[
    &lt;cyan&gt;Clear Moves&lt;reset&gt;
        syntax: &lt;yellow&gt;clear moves&lt;reset&gt;

        This command clears the script's queue of movement commands, and is
        intended to be used after you attempt to move while mapping but the
        movement is prevented in some way that is not caught and handled by a
        trigger that raises the onMoveFail event.
]]
map.help.set_exit = [[
    &lt;cyan&gt;Set Exit&lt;reset&gt;
        syntax: &lt;yellow&gt;set exit &lt;direction&gt; &lt;destination roomID&gt;&lt;reset&gt;

        This command sets the exit in the current room in the given direction to
        connect to the target room, as specified by the roomID. This is a
        one-way connection.
]]
map.help.onnewroom = [[
    &lt;cyan&gt;onNewRoom Event&lt;reset&gt;

        This event is raised to inform the script that a room has been detected.
        When raised, a string containing the exits from the detected room should
        be passed as a second argument to the raiseEvent function, unless those
        exits have previously been stored in map.prompt.exits.
]]
map.help.onmovefail = [[
    &lt;cyan&gt;onMoveFail Event&lt;reset&gt;

        This event is raised to inform the script that a move was attempted but
        the character was unable to move in the given direction, causing that
        movement command to be removed from the script's movement queue.
]]
map.help.onforcedmove = [[
    &lt;cyan&gt;onForcedMove Event&lt;reset&gt;

        This event is raised to inform the script that the character moved in a
        specified direction without a command being entered. When raised, a
        string containing the movement direction must be passed as a second
        argument to the raiseEvent function.

        The most common reason for this event to be raised is when a character
        is following someone else.
]]
map.help.onrandommove = [[
    &lt;cyan&gt;onRandomMove Event&lt;reset&gt;

        This event is raised to inform the script that the character has moved
        in an unknown direction. The script will compare the next room seen with
        rooms that are adjacent to the current room to try to determine the best
        match for where the character has gone.

        In some situations, multiple options are equally viable, so mistakes may
        result. The script will automatically keep verifying positioning with
        each step, and automatically correct the shown location on the map when
        possible.
]]
map.help.onvisionfail = [[
    &lt;cyan&gt;onVisionFail Event&lt;reset&gt;

        This event is raised to inform the script that some or all of the room
        information was not able to be gathered, but the character still
        successfully moved between rooms in the intended direction.
]]
map.help.onprompt = [[
    &lt;cyan&gt;onPrompt Event&lt;reset&gt;

        This event can be raised when using a non-conventional setup to trigger
        waiting messages from the script to be displayed. Additionally, if
        map.prompt.exits exists and isn't simply an empty string, raising this
        event will cause the onNewRoom event to be raised as well. This
        functionality is intended to allow people who have used the older
        version of this script to use this script instead, without having to
        modify the triggers they created for it.
]]
map.help.me = [[
    &lt;cyan&gt;Map Me&lt;reset&gt;
        syntax: &lt;yellow&gt;map me&lt;reset&gt;

        This command forces the script to look at the currently captured room
        name and exits, and search for a potentially matching room, moving the
        map if applicable. Note that this command is generally never needed, as
        the script performs a similar search any time the room name and exits
        don't match expectations.
]]
map.help.path = [[
    &lt;cyan&gt;Map Path&lt;reset&gt;
        syntax: &lt;yellow&gt;map path &lt;room name&gt; [; area name]&lt;reset&gt;

        This command tries to find a walking path from the current room to the
        named room. If an area name is given, only rooms within that area that
        is given are checked. Neither the room name nor the area name are case
        sensitive, but otherwise an exact match is required. Note that a
        semicolon is required between the room name and area name, if an area
        name is given, but spaces before or after the semicolon are optional.

        Example: &lt;yellow&gt;map path main street ; newbie town&lt;reset&gt;
]]
map.help.character = [[
    &lt;cyan&gt;Map Character&lt;reset&gt;
        syntax: &lt;yellow&gt;map character &lt;name&gt;&lt;reset&gt;

        This command tells the script what character is currently being used.
        Setting a character is optional, but recall locations and prompt
        patterns are stored by character name, so using this command allows for
        easy switching between different setups. The name given is stored in
        map.character. The name is a case sensitive exact match. The value of
        map.character is not saved between sessions, so this must be set again
        if needed each time the profile is opened.
]]
map.help.recall = [[
    &lt;cyan&gt;Map Recall&lt;reset&gt;
        syntax: &lt;yellow&gt;map recall&lt;reset&gt;

        This command tells the script that the current room is the recall point
        for the current character, as stored in map.character. This information
        is stored in map.save.recall[map.character], and is remembered between
        sessions.
]]
map.help.config = [[
    &lt;cyan&gt;Map Config&lt;reset&gt;
        syntax: &lt;yellow&gt;map config &lt;setting&gt; &lt;optional value&gt;&lt;reset&gt;

        This command changes any of the available configurations listed below.
        If no value is given, and the setting is either 'on' or 'off', then the
        value is switched. When naming a setting, spaces can be used in place of
        underscores. Details of what options are available and what each one
        does are provided.

        &lt;yellow&gt;speedwalk_delay&lt;reset&gt; - When using the speedwalk function of the script,
            this is the amount of time the script waits after either sending
            a command or, if speedwalk_wait is set, after arriving in a new
            room, before the next command is sent. This may be any number 0
            or higher.

        &lt;yellow&gt;speedwalk_wait&lt;reset&gt; - When using the speedwalk function of the script,
            this indicates if the script waits for your character to move
            into a new room before sending the next command. This may be true
            or false.

        &lt;yellow&gt;speedwalk_random&lt;reset&gt; - When using the speedwalk function of the script
            with a speedwalk_delay value, introduces a randomness to the wait
            time by adding some amount up to the speedwalk_delay value. This
            may be true or false.

        &lt;yellow&gt;stretch_map&lt;reset&gt; - When adding a new room that would overlap an existing
            room, if this is set the map will stretch out to prevent the
            overlap, with all rooms further in the direction moved getting
            pushed one further in that direction. This may be true or false.

        &lt;yellow&gt;max_search_distance&lt;reset&gt; - When mapping, this is the maximum number of
            rooms that the script will search in the movement direction for a
            matching room before deciding to create a new room. This may be
            false, or any positive whole number. This can also be set to 0,
            which is the same as setting it to false.

        &lt;yellow&gt;search_on_look&lt;reset&gt; - When this is set, using the "look" command causes
            the map to verify your position using the room name and exits
            seen following using the command. This may be true or false.

        &lt;yellow&gt;clear_lines_on_send&lt;reset&gt; - When this is set, any time a command is sent,
            any lines stored from the game used to search for the room name
            are cleared. This may be true or false.

        &lt;yellow&gt;mode&lt;reset&gt; - This is the default mapping mode on startup, and defines how
            new rooms are added to the map. May be "lazy", "simple",
            "normal" or "complex".

        &lt;yellow&gt;download_path&lt;reset&gt; - This is the path that updates are downloaded from.
            This may be any web address where the versions.lua and
            generic_mapper.xml files can be downloaded from.

        &lt;yellow&gt;prompt_test_patterns&lt;reset&gt; - This is a table of default patterns checked
            when using the "find prompt" command. The patterns in this table
            should start with a '^', and be written to be used with the Lua
            string library. Most importantly, '%' is used as the escape
            character instead of '\' as in trigger regex patterns.

        &lt;yellow&gt;custom_exits&lt;reset&gt; - This is a table of custom exit directions and their
            relevant extra pieces of info. Each entry should have the short
            direction as the keyword for a table containing first the long
            direction, then the long direction of the reverse of this
            direction, and then the x, y, and z change in map position
            corresponding to the movement. As an example: us = {'upsouth',
            'downnorth', 0, -1, 1}

        &lt;yellow&gt;custom_name_search&lt;reset&gt; - When this is set, instead of running the default
            function name_search, a user-defined function called
            'mudlet.custom_name_search' is used instead. This may be true or false.

        &lt;yellow&gt;use_translation&lt;reset&gt; - When this is set, the lang_dirs table is used to
            translate movement and status commands in some other language
            into the English used by the script. This may be true or false.

        &lt;yellow&gt;debug&lt;reset&gt; - When this is set, the script will start in debug mode. This
            may be true or false.
]]
map.help.window = [[
    &lt;yellow&gt;Map Window&lt;reset&gt;
        syntax: &lt;yellow&gt;map window &lt;setting&gt; &lt;value&gt;&lt;reset&gt;

        This command changes any of the available configurations listed below,
        which determine the appearance and positioning of the map window when
        the 'map show' command is used. Details of what options are available
        and what each one does are provided.

        &lt;yellow&gt;x&lt;reset&gt; - This is the x position of the map window, and should be a
            positive number of pixels or a percentage of the screen width.

        &lt;yellow&gt;y&lt;reset&gt; - This is the y position of the map window, and should be a
            positive number of pixels or a percentage of the screen height.

        &lt;yellow&gt;w&lt;reset&gt; - This is the width of the map window, and should be a positive
            number of pixels or a percentage of the screen width.

        &lt;yellow&gt;h&lt;reset&gt; - This is the height of the map window, and should be a positive
            number of pixels or a percentage of the screen height.

        &lt;yellow&gt;origin&lt;reset&gt; - This is the corner from which the window position is
            measured, and may be 'topright', 'topleft', 'bottomright', or
            'bottomleft'.

        &lt;yellow&gt;shown&lt;reset&gt; - This determines if the map window is shown immediately upon
            connecting to the game. This may be true or false. If you intend
            to have some other script control the map window, this should be
            set to false.
]]
map.help.translate = [[
    &lt;yellow&gt;Map Translate&lt;reset&gt;
        syntax: &lt;yellow&gt;map translate &lt;english direction&gt; &lt;translated long direction&gt;
            &lt;translated short direction&gt;&lt;reset&gt;

        This command sets direction translations for the script to use, either
        for commands entered to move around, or listed exits the game shows when
        you enter a room. Available directions: north, south, east, west,
        northwest, northeast, southwest, southeast, up, down, in, and out.
        Also you can customize special commands sent to mud like 'look'.
]]
map.help.quick_start = [[
    &lt;link: quick_start&gt;map basics&lt;/link&gt; (quick start guide)
    ----------------------------------------

    Mudlet Mapper works in tandem with a script, and this generic mapper script needs
    to know 2 things to work:
      - &lt;dim_grey&gt;room name&lt;reset&gt; $ROOM_NAME_STATUS ($ROOM_NAME)
      - &lt;dim_grey&gt;exits&lt;reset&gt;     $ROOM_EXITS_STATUS ($ROOM_EXITS)

    1. &lt;link: start mapping&gt;start mapping &lt;optional area name&gt;&lt;/link&gt;
       If both room name and exits are good, you can start mapping! Give it the
       area name you're currently in, usually optional but required for the first one.
    2. &lt;link: find prompt&gt;find prompt&lt;/link&gt;
       Room name or exits aren't recognised? Try this command then. It will make
       the script start looking for a prompt using several standard prompt
       patterns. If a prompt is found, you will be notified, if not, you will
       need to set a prompt pattern yourself using &lt;link: prompt&gt;map prompt&lt;/link&gt;.
       Reach out to the &lt;urllink: https://discord.gg/kuYvMQ9&gt;Mudlet community&lt;/urllink&gt; for help, we'd be happy to help
       you figure it out!
    3. &lt;link: debug&gt;map debug&lt;/link&gt;
       This toggles debug mode. When on, messages will be displayed showing what
       information is captured and a few additional error messages that can help
       with getting the script fully compatible with your game.
    4. &lt;link: 1&gt;map help&lt;/link&gt;
       This will bring up a more detailed help file, starting with the available
       help topics.
]]
map.help.room_find = [[
    &lt;cyan&gt;Room Find&lt;reset&gt;
        syntax: &lt;yellow&gt;room find &lt;room name&gt;&lt;reset&gt;
                &lt;yellow&gt;rf &lt;room name&gt;&lt;reset&gt;

        This command will search all rooms and return a list of matches.
]]
map.help.room_look = [[
    &lt;cyan&gt;Room Look&lt;reset&gt;
        syntax: &lt;yellow&gt;room look [roomID]&lt;reset&gt;
                &lt;yellow&gt;rl [roomID]&lt;reset&gt;

        This command will display detailed information about the current room.
        Optionally a roomID can be provided.
]]
map.help.showpath = [[
    &lt;cyan&gt;Showpath&lt;reset&gt;
        syntax: &lt;yellow&gt;showpath &lt;roomID&gt;&lt;reset&gt;
                &lt;yellow&gt;showpath &lt;fromID&gt; &lt;toID&gt;&lt;reset&gt;

        This command displays a path from your current room to the roomID specified.
        If two roomID's are specifed it will display a path from a remote room to another room.
]]
map.help.spe_list = [[
    &lt;cyan&gt;Special Exits List&lt;reset&gt;
        syntax: &lt;yellow&gt;spe list [filter]&lt;reset&gt;

        This command displays a list of all known special exits.  You can alternatively provide an
        optional filter to return a list containing those words.

        Example: &lt;yellow&gt;spe list worm warp&lt;reset&gt;
]]
map.help.feature_list = [[
    &lt;cyan&gt;Feature List&lt;reset&gt;
        syntax: &lt;yellow&gt;feature list&lt;reset&gt;

        This command displays a list of all map features created via feature create and the associated room characters.
]]
map.help.area_add = [[
    &lt;cyan&gt;Area Add&lt;reset&gt;
        syntax: &lt;yellow&gt;area add &lt;area name&gt;&lt;reset&gt;

        This command will create a new area and automatically give it an ID.

        Example: &lt;yellow&gt;area add My City&lt;reset&gt; - create a new area called My City
]]
map.help.area_delete = [[
    &lt;cyan&gt;Area Delete&lt;reset&gt;
        syntax: &lt;yellow&gt;area delete &lt;area name&gt;&lt;reset&gt;

        This command will delete the given area. If the area is really big
        (thousands of rooms), deleting it at once would take a really long
        while and freeze your Mudlet while doing so. To combat the unpleasant
        experience, the script breaks up area deletion into batches of rooms
        (100 by default). While this still heavily impacts Mudlets performance,
        it allows you to see a progress meter of how far it has gotten and gives
        you an ability to pause it at any time by doing 'cancel area deletion'.

        Example: &lt;yellow&gt;area delete My City&lt;reset&gt; - delete an area called My City
]]
map.help.area_cancel = [[
    &lt;cyan&gt;Cancel Area Deletion&lt;reset&gt;
        syntax: &lt;yellow&gt;cancel area deletion&lt;reset&gt;

        This comand will stop an area deletion that has started. This will NOT
        restore deleted rooms - it merely pauses the process, so you can resume
        it with 'area delete' later on. You can type this in while Mudlet is
        deleting an area - it'll take a short while for letters to show up, but
        they will eventually.
]]
map.help.area_rename = [[
    &lt;cyan&gt;Area Rename&lt;reset&gt;
        syntax: &lt;yellow&gt;area rename &lt;name&gt;&lt;reset&gt;

        This command will rename the current area you're in to the new name.

        Example: &lt;yellow&gt;area rename My City&lt;reset&gt; - call the area you're in My City from now on

]]
map.help.arealock = [[
    &lt;cyan&gt;Arealock&lt;reset&gt;
        syntax: &lt;yellow&gt;arealock [filter]&lt;reset&gt;

        This command displays a list of areas you can lock/unlock, you can also
        give it an area name to filter by. If an area is locked the mapper will
        not attempt to speedwalk or go through any of the rooms in the area.

        Example: &lt;yellow&gt;arealock City&lt;reset&gt;
]]
map.help.room_coords = [[
    &lt;cyan&gt;Room Coordinates&lt;reset&gt;
        syntax: &lt;yellow&gt;room coords [v&lt;roomID&gt;] &lt;x&gt; &lt;y&gt; &lt;z&gt;&lt;reset&gt;
                &lt;yellow&gt;rc [v&lt;roomID&gt;] &lt;x&gt; &lt;y&gt; &lt;z&gt;&lt;reset&gt;

        This command will move a room to the new map coordinates. x,y and z will
        specify the new location of the room. The room ID is optional, it'll move
        the current room if you don't provide one.

        Example: &lt;yellow&gt;rc nw&lt;reset&gt; - move the room to be nw of the current location
                 &lt;yellow&gt;rc v34 w&lt;reset&gt; - move the room ID 34 west, note the letter 'v' in the command
                 &lt;yellow&gt;rc 1 -5 10&lt;reset&gt; - move the current room to those exact coordinates
                 &lt;yellow&gt;rc v12 8 3 -8&lt;reset&gt; - move the room #12 to 8x, 3y and -8z
                 &lt;yellow&gt;rc 14x 5y&lt;reset&gt; - move the current room to be at 14x and 5y, but the
                    same z-level you're on. You can include all three of x, y, z coordinates
                    or only one as you wish
]]
map.help.room_delete = [[
    &lt;cyan&gt;Room Delete&lt;reset&gt;
        syntax: &lt;yellow&gt;room delete &lt;direction|roomID&gt;&lt;reset&gt;
                &lt;yellow&gt;rld &lt;direction|roomID&gt;&lt;reset&gt;

        This command will delete a room given a relative direction or roomID.

        Example: &lt;yellow&gt;rld&lt;reset&gt; - current room, will delete the room you're currently in
                 &lt;yellow&gt;rld n&lt;reset&gt; - relative direction, will delete the room that's north of you
                 &lt;yellow&gt;rld 513&lt;reset&gt; - using roomID, will delete the room with ID 513
]]
map.help.room_weight = [[
    &lt;cyan&gt;Room Weight&lt;reset&gt;
        syntax: &lt;yellow&gt;room weight [direction|roomID] &lt;weight&gt;&lt;reset&gt;
                &lt;yellow&gt;rw [direction|roomID] &lt;weight&gt;&lt;reset&gt;

        This command updates the weight of a room, making it more or less
        desirable to travel through.  Direction or roomID is optional and
        defaults to the current room.

        Example: &lt;yellow&gt;rw 10&lt;reset&gt; - will set the room weight of the room you're standing in to 10
                 &lt;yellow&gt;rw n 4&lt;reset&gt; - relative direction, will set the room weight of the room that's
                    to the north of you to four
                 &lt;yellow&gt;rw 2343 2&lt;reset&gt; - using roomID, will set the room weight of room 2343 to 2
]]
map.help.room_weight_exit = [[
    &lt;cyan&gt;Room Weight Exit&lt;reset&gt;
        syntax: &lt;yellow&gt;rwe [roomID] &lt;weight&gt; &lt;exit&gt;&lt;reset&gt;

        This command updates the weight of a room exit, where weight is a
        positive number (default for exits is 0). Setting a higher weight will
        make the exit be less likely to be used. The exit can be a cardinal
        direction of either n,e,s,w,ne,se,sw,ne,up,down,in,out or the exact
        special exit text (including the script: part). This alias sets a weight
        one way only, so if you want to set it both ways, use it on the opposite
        side as well. Use 'rl' to check exit weights.

        Example: &lt;yellow&gt;rwe 1 n&lt;reset&gt; -  will set the weight of the exit north to 1
                 &lt;yellow&gt;rwe 2434 0 e&lt;reset&gt; - will reset the exit weight of an east exit that
                    leads out from the 2434 room
]]
map.help.room_link = [[
    &lt;cyan&gt;Room Link&lt;reset&gt;
        syntax: &lt;yellow&gt;room link [roomID] &lt;direction&gt; [one]&lt;reset&gt;
                &lt;yellow&gt;rlk [roomID] &lt;direction&gt; [one]&lt;reset&gt;

        This command will link a room given a direction and optional roomID.
        You can also add 'one' at the end of the command to make it be a one-way
        link.

        Example: &lt;yellow&gt;rlk n&lt;reset&gt; - relative direction, will link if exists
                    a room to the north of this one to your current location
                 &lt;yellow&gt;rlk 351 n&lt;reset&gt; - exact roomID and direction, will
                    link the current room to room #351 via a north exit
                 &lt;yellow&gt;rlk n one&lt;reset&gt; - will make an exit north one-way
]]
map.help.room_unlink = [[
    &lt;cyan&gt;Room Unlink&lt;reset&gt;
        syntax: &lt;yellow&gt;room unlink &lt;direction&gt;&lt;reset&gt;
                &lt;yellow&gt;urlk &lt;direction&gt;&lt;reset&gt;

                Unlink a room given a direction.  This function will unlink
                exits both ways, or one way if there is no incoming exit.

        Example: &lt;yellow&gt;urlk nw&lt;reset&gt; - relative direction, will unlink to the
                    northwest, and from the northwest room to the southeast
]]
map.help.room_door = [[
    &lt;cyan&gt;Room Door&lt;reset&gt;
        syntax: &lt;yellow&gt;rd [roomID] &lt;direction&gt; &lt;open|closed|locked|clear&gt;&lt;reset&gt;

                Will create a door from the current room to a direction
                specified.  Door status can be open or o, closed or c, locked or
                l, clear or gone. To delete a room, use clear or gone. Setting
                doors is one-way - to set two-way doors, use the alias from the
                opposite direction.


        Example: &lt;yellow&gt;rd n&lt;reset&gt; - add a one-way door north from the current room
                 &lt;yellow&gt;rd 23 w closed&lt;reset&gt; - add a closed door leading west in room 23
                 &lt;yellow&gt;rd n clear&lt;reset&gt; - remove the door to the north from the current
                    room on this side only
]]
map.help.room_character = [[
    &lt;cyan&gt;Room Character&lt;reset&gt;
        syntax: &lt;yellow&gt;rcc &lt;character|clear&gt; [roomID]&lt;reset&gt;

        This command will assign a single character, letter or number to the
        current room, or an optional given room.  Using clear will remove any
        characters.

        Example: &lt;yellow&gt;rcc $&lt;reset&gt; - put the dollar sign in the current room 
                    (e.g. to indicate a shop or bank)
                 &lt;yellow&gt;rcc C 234&lt;reset&gt; - put the letter C onto room 234
                 &lt;yellow&gt;rcc clear&lt;reset&gt; - remove any letter from the current
                 room
]]
map.help.exit_special = [[
    &lt;cyan&gt;Special Exits&lt;reset&gt;
        syntax: &lt;yellow&gt;exit special &lt;direction|roomID&gt; &lt;command&gt;&lt;reset&gt;
                &lt;yellow&gt;spe &lt;direction|roomID&gt; &lt;command&gt;&lt;reset&gt;

        This command will link two rooms via custom or special exit/script.

        Example: &lt;yellow&gt;spe n push rock&lt;reset&gt; - relative direction, will go to
                    the room that's north of you by doing 'push rock'
                 &lt;yellow&gt;spe 125 pull lever&lt;reset&gt; - will go to room 125 from the
                    current one by pulling a lever

        You can also specify a script to do code for you, by starting the exit
        command with script.

        Example: &lt;yellow&gt;spe 125 script: sendAll("pull lever", "enter gate")&lt;reset&gt;


]]
map.help.spev = [[
    &lt;cyan&gt;Remote Special Exits&lt;reset&gt;
        syntax: &lt;yellow&gt;spev &lt;fromID&gt; &lt;toID&gt; &lt;command&gt;&lt;reset&gt;

        This command will add a special exit between two remote rooms.

        Example: &lt;yellow&gt;spe 125 560 push rock&lt;reset&gt; - will link room 125 to room 560 with
                    the command 'push rock'
]]
map.help.spe_clear = [[
    &lt;cyan&gt;Clear Special Exits&lt;reset&gt;
        syntax: &lt;yellow&gt;exit special clear &lt;direction|roomID&gt;&lt;reset&gt;
                &lt;yellow&gt;spe clear &lt;direction|roomID&gt;&lt;reset&gt;

        This command will clear all special exits from the current, relative or
        given roomID.

        Example: &lt;yellow&gt;spe clear&lt;reset&gt; - delete all special exits in the room you're currently in
                 &lt;yellow&gt;spe clear n&lt;reset&gt; - delete all special exits in the room that's north of you
                 &lt;yellow&gt;spe clear 513&lt;reset&gt; - delete all special exits in room #513
]]
map.help.room_area = [[
    &lt;cyan&gt;Room Area&lt;reset&gt;
        syntax: &lt;yellow&gt;room area [v&lt;roomID&gt;] &lt;area name|areaID&gt;&lt;reset&gt;

        This command moves the current room to another area or a given optional
        room.

        Example: &lt;yellow&gt;room area My New Area&lt;reset&gt; - move the room you're in to 'My New Area'.
                 &lt;yellow&gt;room area v123 My New Area&lt;reset&gt; - move room 123 to My New Area
                 &lt;yellow&gt;room area 44&lt;reset&gt; - move the current room to the area ID 44
]]
map.help.room_label = [[
    &lt;cyan&gt;Room Label&lt;reset&gt;
        syntax: &lt;yellow&gt;room label [roomID] [fgColor] [bgColor] &lt;message&gt;&lt;reset&gt;

        This command adds a label to the current or specified room.  Foreground
        and background color are optional.

        Example: &lt;yellow&gt;room label My Label&lt;reset&gt; - adds a 'My Label' label to the current room
                 &lt;yellow&gt;room label 342 My Label&lt;reset&gt; - adds a label to room #342
                 &lt;yellow&gt;room label green My Label&lt;reset&gt; - adds a green label with a transparent
                    background to the current room
                 &lt;yellow&gt;room label green black My Label&lt;reset&gt; - adds a label with a green
                    foreground and black background to the current room
                 &lt;yellow&gt;room label 34 green black My Label&lt;reset&gt; - adds a label with a green
                    foreground and black background to room #34
]]
map.help.area_labels = [[
    &lt;cyan&gt;Area Labels&lt;reset&gt;
        syntax: &lt;yellow&gt;area labels &lt;area name&gt;&lt;reset&gt;

        This command displays all labels in a given area, with a link to delete.

        Example: &lt;yellow&gt;area label My Area&lt;reset&gt;
]]
map.help.feature_create = [[
    &lt;cyan&gt;Feature Create&lt;reset&gt;
        syntax: &lt;yellow&gt;feature create &lt;feature&gt; [char &lt;room character&gt;]&lt;reset&gt;

        This command will create a new map feature for use on rooms. You can
        also optionally add a character mark to the feature, which will be set
        when a map feature is added to a room. Note: Map feature names are not
        allowed to contain numbers.

        Example: &lt;yellow&gt;feature create A Nexus Point char N&lt;reset&gt; - creates a new feature
                    'A Nexus Point' with an assigned room character 'N'
]]
map.help.room_feature_create = [[
    &lt;cyan&gt;Room Create Feature&lt;reset&gt;
        syntax: &lt;yellow&gt;room create feature [v&lt;room id&gt;] &lt;feature&gt;&lt;reset&gt;
                &lt;yellow&gt;rcf [v&lt;room id&gt;] &lt;feature&gt;&lt;reset&gt;

        This command will add a created map feature to the room. If the map
        feature is associated with a character mark, it will be set on the room
        and existing marks get overwritten. The room number to add the feature
        to can be given with the optional argument (note: there is no space
        between the v and the ID).

        Example: &lt;yellow&gt;rcf A Nexus Point&lt;reset&gt; - add the feature 'A Nexus Point' to
                    the current room
                 &lt;yellow&gt;rcf v123 A Nexus Point&lt;reset&gt; - add the feature 'A Nexus Point'
                    to room #123
]]
map.help.room_feature_delete = [[
    &lt;cyan&gt;Room Delete Feature&lt;reset&gt;
        syntax: &lt;yellow&gt;room delete feature [v&lt;room id&gt;] &lt;feature&gt;&lt;reset&gt;
                &lt;yellow&gt;rdf [v&lt;room id&gt;] &lt;feature&gt;&lt;reset&gt;

        This command removes a map feature from the room. If the map feature is
        associated with a character mark and its set on the room, a random
        character mark from the other map features on the room is chosen to
        replace it. The room number to delete the feature from can be given with
        the optional argument (note: there is no space between the v and the
        ID).

        Example: &lt;yellow&gt;rdf v123 A Nexus Point&lt;reset&gt; - removes the feature 'A Nexus Point'
                    from the room #123
]]
map.help.feature_delete = [[
    &lt;cyan&gt;Feature Delete&lt;reset&gt;
        syntax: &lt;yellow&gt;feature delete &lt;feature&gt;&lt;reset&gt;

        This command deletes a global map feature and removes it from all rooms.

        Example: &lt;yellow&gt;feature delete A Nexus Point&lt;reset&gt; - removes the global feature
                    'A Nexus Point' and removes it from all rooms
]]



map.character = map.character or ""
map.prompt = map.prompt or {}
map.save = map.save or {}
map.save.recall = map.save.recall or {}
map.save.prompt_pattern = map.save.prompt_pattern or {}
map.save.ignore_patterns = map.save.ignore_patterns or {}
map.save.move_methods = map.save.move_methods or {}
map.silentUpdate = map.silentUpdate or true

local oldstring = string
local string = utf8
string.format = oldstring.format
string.trim = oldstring.trim
string.starts = oldstring.starts
string.split = oldstring.split
string.ends = oldstring.ends


local profilePath = getMudletHomeDir()
profilePath = profilePath:gsub("\\","/")

map.defaults = {
    mode = "normal", -- can be lazy, simple, normal, or complex
    stretch_map = true,
    search_on_look = true,
    speedwalk_delay = 1,
    speedwalk_wait = true,
    speedwalk_random = true,
    max_search_distance = 1,
    clear_lines_on_send = true,
    map_window = {
        x = 0,
        y = 0,
        w = "30%",
        h = "40%",
        origin = "topright",
        shown = false,
    },
    prompt_test_patterns = {"^%[?%a*%]?&lt;.*&gt;", "^%[.*%]%s*&gt;", "^%w*[%.?!:]*&gt;", "^%[.*%]", "^[Hh][Pp]:.*&gt;"},
    custom_exits = {},  -- format: short_exit = {long_exit, reverse_exit, x_dif, y_dif, z_dif}
                        -- ex: { us = {"upsouth", "downnorth", 0, -1, 1}, dn = {"downnorth", "upsouth", 0, 1, -1} }
    custom_name_search = false,
    use_translation = true,
    lang_dirs = {n = 'n', ne = 'ne', nw = 'nw', e = 'e', w = 'w', s = 's', se = 'se', sw = 'sw',
        u = 'u', d = 'd', ["in"] = 'in', out = 'out', north = 'north', northeast = 'northeast',
        east = 'east', west = 'west', south = 'south', southeast = 'southeast', southwest = 'southwest',
        northwest = 'northwest', up = 'up', down = 'down', l = 'l', look = 'look',
        ed = 'ed', eu = 'eu', eastdown = 'eastdown', eastup = 'eastup',
        nd = 'nd', nu = 'nu', northdown = 'northdown', northup = 'northup',
        sd = 'sd', su = 'su', southdown = 'southdown', southup = 'southup',
        wd = 'wd', wu = 'wu', westdown = 'westdown', westup = 'westup',
    },
    debug = false,
    download_path = "https://raw.githubusercontent.com/Mudlet/Mudlet/development/src/mudlet-lua/lua/generic-mapper",
}

local move_queue, lines = {}, {}
local find_portal, vision_fail, room_detected, random_move, force_portal, find_prompt, downloading, walking, help_shown
local mt = getmetatable(map) or {}

local exitmap = {
    n = 'north',    ne = 'northeast',   nw = 'northwest',   e = 'east',
    w = 'west',     s = 'south',        se = 'southeast',   sw = 'southwest',
    u = 'up',       d = 'down',         ["in"] = 'in',      out = 'out',
    l = 'look',
    ed = 'eastdown',    eu = 'eastup',  nd = 'northdown',   nu = 'northup',
    sd = 'southdown',   su = 'southup', wd = 'westdown',    wu = 'westup',
}

local short = {}
for k,v in pairs(exitmap) do
    short[v] = k
end

local stubmap = {
    north = 1,      northeast = 2,      northwest = 3,      east = 4,
    west = 5,       south = 6,          southeast = 7,      southwest = 8,
    up = 9,         down = 10,          ["in"] = 11,        out = 12,
    northup = 13,   southdown = 14,     southup = 15,       northdown = 16,
    eastup = 17,    westdown = 18,      westup = 19,        eastdown = 20,
    [1] = "north",  [2] = "northeast",  [3] = "northwest",  [4] = "east",
    [5] = "west",   [6] = "south",      [7] = "southeast",  [8] = "southwest",
    [9] = "up",     [10] = "down",      [11] = "in",        [12] = "out",
    [13] = "northup", [14] = "southdown", [15] = "southup", [16] = "northdown",
    [17] = "eastup", [18] = "westdown", [19] = "westup",    [20] = "eastdown",
}

local coordmap = {
    [1] = {0,1,0},      [2] = {1,1,0},      [3] = {-1,1,0},     [4] = {1,0,0},
    [5] = {-1,0,0},     [6] = {0,-1,0},     [7] = {1,-1,0},     [8] = {-1,-1,0},
    [9] = {0,0,1},      [10] = {0,0,-1},    [11] = {0,0,0},     [12] = {0,0,0},
    [13] = {0,1,1},     [14] = {0,-1,-1},   [15] = {0,-1,1},    [16] = {0,1,-1},
    [17] = {1,0,1},     [18] = {-1,0,-1},   [19] = {-1,0,1},    [20] = {1,0,-1},
}

local reverse_dirs = {
    north = "south", south = "north", west = "east", east = "west", up = "down",
    down = "up", northwest = "southeast", northeast = "southwest", southwest = "northeast",
    southeast = "northwest", ["in"] = "out", out = "in",
    northup = "southdown", southdown = "northup", southup = "northdown", northdown = "southup",
    eastup = "westdown", westdown = "eastup", westup = "eastdown", eastdown = "westup",
}

local wait_echo = {}
local mapper_tag = "&lt;112,229,0&gt;(&lt;73,149,0&gt;mapper&lt;112,229,0&gt;): &lt;255,255,255&gt;"
local debug_tag = "&lt;255,165,0&gt;(&lt;200,120,0&gt;debug&lt;255,165,0&gt;): &lt;255,255,255&gt;"
local err_tag = "&lt;255,0,0&gt;(&lt;178,34,34&gt;error&lt;255,0,0&gt;): &lt;255,255,255&gt;"

local function config()
    local defaults = map.defaults
    local configs = map.configs or {}
    local path = profilePath.."/map downloads"
    if not io.exists(path) then lfs.mkdir(path) end
    -- load stored configs from file if it exists
    if io.exists(path.."/configs.lua") then
        table.load(path.."/configs.lua",configs)
    end
    -- overwrite default values with stored config values
    configs = table.update(defaults, configs)
    map.configs = configs
    map.configs.translate = {}
    for k, v in pairs(map.configs.lang_dirs) do
        map.configs.translate[v] = k
    end
    -- incorporate custom exits
    for k,v in pairs(map.configs.custom_exits) do
        exitmap[k] = v[1]
        reverse_dirs[v[1]] = v[2]
        short[v[1]] = k
        local count = #coordmap + 1
        coordmap[count] = {v[3],v[4],v[5]}
        stubmap[count] = v[1]
        stubmap[v[1]] = count
    end
    -- update to the current download path
    if map.configs.download_path == "https://raw.githubusercontent.com/JorMox/Mudlet/development/src/mudlet-lua/lua/generic-mapper" then
        map.configs.download_path = "https://raw.githubusercontent.com/Mudlet/Mudlet/development/src/mudlet-lua/lua/generic-mapper"
    end

    -- setup metatable to store sensitive values
    local protected = {"mapping", "currentRoom", "currentName", "currentExits", "currentArea",
        "prevRoom", "prevName", "prevExits", "mode", "version"}
    mt = getmetatable(map) or {}
    mt.__index = mt
    mt.__newindex = function(tbl, key, value)
            if not table.contains(protected, key) then
                rawset(tbl, key, value)
            else
                error("Protected Map Table Value")
            end
        end
    mt.set = function(key, value)
            if table.contains(protected, key) then
                mt[key] = value
            end
        end
    setmetatable(map, mt)
    map.set("mode", configs.mode)
    map.set("version", version)

    local saves = {}
    if io.exists(path.."/map_save.dat") then
        table.load(path.."/map_save.dat",saves)
    end
    saves.prompt_pattern = saves.prompt_pattern or {}
    saves.ignore_patterns = saves.ignore_patterns or {}
    saves.move_methods = saves.move_methods or {}
    saves.recall = saves.recall or {}
    map.save = saves

    if map.configs.map_window.shown then
        map.showMap(true)
    end
end

local function parse_help_text(text)
  text = text:gsub("%$ROOM_NAME_STATUS", (map.currentName and map.currentName ~= "") and '✔️' or '❌')
  text = text:gsub("%$ROOM_NAME", map.currentName or '')

  text = text:gsub("%$ROOM_EXITS_STATUS", (not map.currentExits or table.is_empty(map.currentExits)) and '❌' or '✔️')
  text = text:gsub("%$ROOM_EXITS", map.currentExits and table.concat(map.currentExits, ' ') or '')

  return text
end

function map.show_help(cmd)
    if cmd and cmd ~= "" then
        if cmd:starts("map ") then cmd = cmd:sub(5) end
        cmd = cmd:lower():gsub(" ","_")
        if not map.help[cmd] then
            map.echo("No help file on that command.")
        end
    else
        cmd = 1
    end

    for w in parse_help_text(map.help[cmd]):gmatch("[^\n]*\n") do
        local url, target = rex.match(w, [[&lt;(url)?link: ([^&gt;]+)&gt;]])
        -- lrexlib returns a non-capture as 'false', so determine which variable the capture went into
        if target == nil then target = url end
        if target then
            local before, linktext, _, link, _, after, ok = rex.match(w,
                          [[(.*)&lt;((url)?link): [^&gt;]+&gt;(.*)&lt;\/(url)?link&gt;(.*)]], 0, 'm')
            -- could not get rex.match to capture the newline - fallback to string.match
            local _, _, after = w:match("(.*)&lt;u?r?l?link: [^&gt;]+&gt;(.*)&lt;/u?r?l?link&gt;(.*)")

            cecho(before)
            fg("yellow")
            setUnderline(true)
            if linktext == "urllink" then
                echoLink(link, [[openWebPage("]]..target..[[")]], "Open webpage", true)
            elseif target ~= "1" then
                echoLink(link,[[map.show_help("]]..target..[[")]],"View: map help " .. target,true)
            else
                echoLink(link,[[map.show_help()]],"View: map help",true)
            end
            setUnderline(false)
            resetFormat()
            if after then cecho(after) end
        else
            cecho(w)
        end
    end
    echo("\n")
end

local bool_configs = {'stretch_map', 'search_on_look', 'speedwalk_wait', 'speedwalk_random',
    'clear_lines_on_send', 'debug', 'custom_name_search', 'use_translation'}
-- function intended to be used by an alias to change config values and save them to a file for later
function map.setConfigs(key, val, sub_key)
    if val == "off" or val == "false" then
        val = false
    elseif val == "on" or val == "true" then
        val = true
    end
    local toggle = false
    if val == nil or val == "" then toggle = true end
    key = key:gsub(" ","_")
    if tonumber(val) then val = tonumber(val) end
    if not toggle then
        if key == "map_window" then
            if map.configs.map_window[sub_key] then
                map.configs.map_window[sub_key] = val
                map.echo(string.format("Map config %s set to: %s", sub_key, tostring(val)))
            else
                map.echo("Unknown map config.",false, true)
            end
        elseif key =="lang_dirs" then
            sub_key = exitmap[sub_key] or sub_key
            if map.configs.lang_dirs[sub_key] then
                local long_dir, short_dir = val[1],val[2]
                if #long_dir &lt; #short_dir then long_dir, short_dir = short_dir, long_dir end
                map.configs.lang_dirs[sub_key] = long_dir
                map.configs.lang_dirs[short[sub_key]] = short_dir
                map.echo(string.format("Direction/command %s, abbreviated as %s, now interpreted as %s.", long_dir, short_dir, sub_key))
                map.configs.translate = {}
                for k, v in pairs(map.configs.lang_dirs) do
                    map.configs.translate[v] = k
                end
            else
                map.echo("Invalid direction/command.", false, true)
            end
        elseif key == "prompt_test_patterns" then
            if not table.contains(map.configs.prompt_test_patterns) then
                table.insert(map.configs.prompt_test_patterns, val)
                map.echo("Prompt pattern added to list: " .. val)
            else
                table.remove(map.configs.prompt_test_patterns, table.index_of(map.configs.prompt_test_patterns, val))
                map.echo("Prompt pattern removed from list: " .. val)
            end
        elseif key == "custom_exits" then
            if type(val) == "table" then
                for k, v in pairs(val) do
                    map.configs.custom_exits[k] = v
                    map.echo(string.format("Custom Exit short direction %s, long direction %s",k,v[1]))
                    map.echo(string.format("    set to: x: %s, y: %s, z: %s, reverse: %s",v[3],v[4],v[5],v[2]))
                end
            else
                map.echo("Custom Exit config must be in the form of a table.", false, true)
            end
        elseif map.configs[key] ~= nil then
            map.configs[key] = val
            map.echo(string.format("Config %s set to: %s", key, tostring(val)))
        else
            map.echo("Unknown configuration.",false,true)
            return
        end
    elseif toggle then
        if (type(map.configs[key]) == "boolean" and table.contains(bool_configs, key)) then
            map.configs[key] = not map.configs[key]
            map.echo(string.format("Config %s set to: %s", key, tostring(map.configs[key])))
        elseif key == "map_window" and sub_key == "shown" then
            map.configs.map_window.shown = not map.configs.map_window.shown
            map.echo(string.format("Map config %s set to: %s", "shown", tostring(map.configs.map_window.shown)))
        else
            map.echo("Unknown configuration.",false,true)
            return
        end
    end
    table.save(profilePath.."/map downloads/configs.lua",map.configs)
    config()
end

local function show_err(msg,debug)
    map.echo(msg,debug,true)
    error(msg,2)
end

local function print_echoes(what, debug, err)
    moveCursorEnd("main")
    local curline = getCurrentLine()
    if curline ~= "" then echo("\n") end
    decho(mapper_tag)
    if debug then decho(debug_tag) end
    if err then decho(err_tag) end
    cecho(what)
    echo("\n")
end

local function print_wait_echoes()
    for k,v in ipairs(wait_echo) do
        print_echoes(v[1],v[2],v[3])
    end
    wait_echo = {}
end

function map.echo(what, debug, err, wait)
    if debug and not map.configs.debug then return end
    what = tostring(what) or ""
    if wait then
        table.insert(wait_echo,{what, debug, err})
        return
    end
    print_wait_echoes()
    print_echoes(what, debug, err)
end

local function set_room(roomID)
    -- moves the map to the new room
    if map.currentRoom ~= roomID then
        map.set("prevRoom", map.currentRoom)
        map.set("currentRoom", roomID)
    end
    if getRoomName(map.currentRoom) ~= map.currentName then
        map.set("prevName", map.currentName)
        map.set("prevExits", map.currentExits)
        map.set("currentName", getRoomName(map.currentRoom))
        map.set("currentExits", getRoomExits(map.currentRoom))
        -- check handling of custom exits here
        for i = 13,#stubmap do
            map.currentExits[stubmap[i]] = tonumber(getRoomUserData(map.currentRoom,"exit " .. stubmap[i]))
        end
    end
    map.set("currentArea", getRoomArea(map.currentRoom))
    centerview(map.currentRoom)
    raiseEvent("onMoveMap", map.currentRoom)
end

local function add_door(roomID, dir, status)
    -- create or remove a door in the designated direction
    -- consider options for adding pickable and passable information
    dir = exitmap[dir] or dir
    if not table.contains(exitmap,dir) then
        error("Add Door: invalid direction.",2)
    end
    if type(status) ~= "number" then
        status = assert(table.index_of({"none","open","closed","locked"},status),
            "Add Door: Invalid status, must be none, open, closed, or locked") - 1
    end
    local exits = getRoomExits(roomID)
    -- check handling of custom exits here
    if not exits[dir] then
        setExitStub(roomID,stubmap[dir],true)
    end
    -- check handling of custom exits here
    if not table.contains({'u','d'},short[dir]) then
        setDoor(roomID,short[dir],status)
    else
        setDoor(roomID,dir,status)
    end
end

local function check_doors(roomID,exits)
    -- looks to see if there are doors in designated directions
    -- used for room comparison, can also be used for pathing purposes
    if type(exits) == "string" then exits = {exits} end
    local statuses = {}
    local doors = getDoors(roomID)
    local dir
    for k,v in pairs(exits) do
        dir = short[k] or short[v]
        if table.contains({'u','d'},dir) then
            dir = exitmap[dir]
        end
        if not doors[dir] or doors[dir] == 0 then
            return false
        else
            statuses[dir] = doors[dir]
        end
    end
    return statuses
end

local function find_room(name, area)
    -- looks for rooms with a particular name, and if given, in a specific area
    local rooms = searchRoom(name)
    if type(area) == "string" then
        local areas = getAreaTable() or {}
        for k,v in pairs(areas) do
            if string.lower(k) == string.lower(area) then
                area = v
                break
            end
        end
        area = areas[area] or nil
    end
    for k,v in pairs(rooms) do
        if string.lower(v) ~= string.lower(name) then
            rooms[k] = nil
        elseif area and getRoomArea(k) ~= area then
            rooms[k] = nil
        end
    end
    return rooms
end

local function getRoomStubs(roomID)
    -- turns stub info into table similar to exit table
    local stubs = getExitStubs(roomID)
    if type(stubs) ~= "table" then stubs = {} end
    -- check handling of custom exits here
    local tmp
    for i = 13,#stubmap do
        tmp = tonumber(getRoomUserData(roomID,"stub "..stubmap[i])) or tonumber(getRoomUserData(roomID,"stub"..stubmap[i])) -- for old version
        if tmp then table.insert(stubs,tmp) end
    end

    local exits = {}
    for k,v in pairs(stubs) do
        exits[stubmap[v]] = 0
    end
    return exits
end

local function connect_rooms(ID1, ID2, dir1, dir2, no_check)
    -- makes a connection between rooms
    -- can make backwards connection without a check
    local match = false
    if not ID1 and ID2 and dir1 then
        error("Connect Rooms: Missing Required Arguments.",2)
    end
    dir2 = dir2 or reverse_dirs[dir1]
    -- check handling of custom exits here
    if stubmap[dir1] &lt;= 12 then
        setExit(ID1,ID2,stubmap[dir1])
    else
        addSpecialExit(ID1, ID2, dir1)
        setRoomUserData(ID1,"exit " .. dir1,ID2)
    end
    if stubmap[dir1] &gt; 12 then
        -- check handling of custom exits here
        setRoomUserData(ID1,"stub "..dir1, stubmap[dir1])
    end
    local doors1, doors2 = getDoors(ID1), getDoors(ID2)
    local dstatus1, dstatus2 = doors1[short[dir1]] or doors1[dir1], doors2[short[dir2]] or doors2[dir2]
    if dstatus1 ~= dstatus2 then
        if not dstatus1 then
            add_door(ID1,dir1,dstatus2)
        elseif not dstatus2 then
            add_door(ID2,dir2,dstatus1)
        end
    end
    if map.mode ~= "complex" then
        local stubs = getRoomStubs(ID2)
        if stubs[dir2] then match = true end
        if (match or no_check) then
            -- check handling of custom exits here
            if stubmap[dir1] &lt;= 12 then
                setExit(ID2,ID1,stubmap[dir2])
            else
                addSpecialExit(ID2, ID1, dir2)
                setRoomUserData(ID2,"exit " .. dir2,ID1)
            end
            if stubmap[dir2] &gt; 12 then
                -- check handling of custom exits here
                setRoomUserData(ID2,"stub "..dir2, stubmap[dir2])
            end
        end
    end
end

local function check_room(roomID, name, exits, onlyName)
    -- check to see if room name or/and exits match expectations
    if not roomID then
        error("Check Room Error: No ID",2)
    end
    -- check with room hash id
    if map.prompt.hash then
        if map.prompt.hash == getRoomHashByID(roomID) then
            return true
        else
            return false
        end
    end

    if name ~= getRoomName(roomID) then return false end

    -- used in mode "lazy" to match only the room name
    if onlyName then return true end

    local t_exits = table.union(getRoomExits(roomID),getRoomStubs(roomID))
    -- check handling of custom exits here
    for i = 13,#stubmap do
        t_exits[stubmap[i]] = tonumber(getRoomUserData(roomID,"exit " .. stubmap[i])) or (tonumber(getRoomUserData(roomID,"stub " .. stubmap[i])) and 0) or (tonumber(getRoomUserData(roomID,"stub" .. stubmap[i])) and 0) -- for old version
    end
    for k,v in ipairs(exits) do
        if short[v] and not table.contains(t_exits,v) then return false end
        t_exits[v] = nil
    end
    return table.is_empty(t_exits) or check_doors(roomID,t_exits)
end

local function stretch_map(dir,x,y,z)
    -- stretches a map to make room for just added room that would overlap with existing room
    local dx,dy,dz
    if not dir then return end
    for k,v in pairs(getAreaRooms(map.currentArea)) do
        if v ~= map.currentRoom then
            dx,dy,dz = getRoomCoordinates(v)
            if dx &gt;= x and string.find(dir,"east") then
                dx = dx + 1
            elseif dx &lt;= x and string.find(dir,"west") then
                dx = dx - 1
            end
            if dy &gt;= y and string.find(dir,"north") then
                dy = dy + 1
            elseif dy &lt;= y and string.find(dir,"south") then
                dy = dy - 1
            end
            if dz &gt;= z and string.find(dir,"up") then
                dz = dz + 1
            elseif dz &lt;= z and string.find(dir,"down") then
                dz = dz - 1
            end
            setRoomCoordinates(v,dx,dy,dz)
        end
    end
end

local function create_room(name, exits, dir, coords)
    -- makes a new room with captured name and exits
    -- links with other rooms as appropriate
    -- links to adjacent rooms in direction of exits if in simple mode
    if map.mapping then
        name = map.sanitizeRoomName(name)
        map.echo("New Room: " .. name,false,false,(dir or find_portal or force_portal) and true or false)
        local newID = createRoomID()
        addRoom(newID)
        setRoomArea(newID, map.currentArea)
        setRoomName(newID, name)
        if map.prompt.hash then
            setRoomIDbyHash(newID, map.prompt.hash)
        end
        for k,v in ipairs(exits) do
            if stubmap[v] then
                if stubmap[v] &lt;= 12 then
                    setExitStub(newID, stubmap[v], true)
                else
                    -- add special char to prompt special exit
                    if string.find(v, "up") or string.find(v, "down") then
                        setRoomChar(newID, "◎")
                    end
                    -- check handling of custom exits here
                    setRoomUserData(newID, "stub "..v,stubmap[v])
                end
            end
        end
        if dir then
            connect_rooms(map.currentRoom, newID, dir)
        elseif find_portal or force_portal then
            addSpecialExit(map.currentRoom, newID, (find_portal or force_portal))
            setRoomUserData(newID,"portals",tostring(map.currentRoom)..":"..(find_portal or force_portal))
        end
        setRoomCoordinates(newID,unpack(coords))
        local pos_rooms = getRoomsByPosition(map.currentArea,unpack(coords))
        if not (find_portal or force_portal) and map.configs.stretch_map and table.size(pos_rooms) &gt; 1 then
            set_room(newID)
            stretch_map(dir,unpack(coords))
        end
        if map.mode == "simple" then
            local x,y,z = unpack(coords)
            local dx,dy,dz,rooms
            for k,v in ipairs(exits) do
                if stubmap[v] then
                    dx,dy,dz = unpack(coordmap[stubmap[v]])
                    rooms = getRoomsByPosition(map.currentArea,x+dx,y+dy,z+dz)
                    if table.size(rooms) == 1 then
                        connect_rooms(newID,rooms[0],v)
                    end
                end
            end
        end
        set_room(newID)
    end
end

local function find_area_limits(areaID)
    -- used to find min and max coordinate limits for an area
    if not areaID then
        error("Find Limits: Missing area ID",2)
    end
    local rooms = getAreaRooms(areaID)
    local minx, miny, minz = getRoomCoordinates(rooms[0])
    local maxx, maxy, maxz = minx, miny, minz
    local x,y,z
    for k,v in pairs(rooms) do
        x,y,z = getRoomCoordinates(v)
        minx = math.min(x,minx)
        maxx = math.max(x,maxx)
        miny = math.min(y,miny)
        maxy = math.max(y,maxy)
        minz = math.min(z,minz)
        maxz = math.max(z,maxz)
    end
    return minx, maxx, miny, maxy, minz, maxz
end

local function find_link(name, exits, dir, max_distance)
    -- search for matching room in desired direction
    -- in lazy mode check_room search only by name
    local x,y,z = getRoomCoordinates(map.currentRoom)
    if map.mapping and x then
        if max_distance &lt; 1 then
            max_distance = nil
        else
            max_distance = max_distance - 1
        end
        if not stubmap[dir] or not coordmap[stubmap[dir]] then return end
        local dx,dy,dz = unpack(coordmap[stubmap[dir]])
        local minx, maxx, miny, maxy, minz, maxz = find_area_limits(map.currentArea)
        local rooms, match, stubs
        if max_distance then
            minx, maxx = x - max_distance, x + max_distance
            miny, maxy = y - max_distance, y + max_distance
            minz, maxz = z - max_distance, z + max_distance
        end
        -- find link from room hash first
        if map.prompt.hash then
            local room = getRoomIDbyHash(map.prompt.hash)
            if room &gt; 0 then
                match = room
            end
        else
            repeat
                x, y, z = x + dx, y + dy, z + dz
                rooms = getRoomsByPosition(map.currentArea,x,y,z)
            until (x &gt; maxx or x &lt; minx or y &gt; maxy or y &lt; miny or z &gt; maxz or z &lt; minz or not table.is_empty(rooms))
            for k,v in pairs(rooms) do
                if check_room(v,name,exits,false) then
                    match = v
                    break
                elseif map.mode == "lazy" and check_room(v,name,exits,true) then
                    match = v
                    break
                end
            end
        end
        if match then
            connect_rooms(map.currentRoom, match, dir)
            set_room(match)
        else
            x,y,z = getRoomCoordinates(map.currentRoom)
            create_room(name, exits, dir,{x+dx,y+dy,z+dz})
        end
    end
end

local function move_map()
    -- tries to move the map to the next room
    local move = table.remove(move_queue,1)
    if move or random_move then
        local exits = (map.currentRoom and getRoomExits(map.currentRoom)) or {}
        -- check handling of custom exits here
        if map.currentRoom then
            for i = 13, #stubmap do
                exits[stubmap[i]] = tonumber(getRoomUserData(map.currentRoom,"exit " .. stubmap[i]))
            end
        end
        local special = (map.currentRoom and getSpecialExitsSwap(map.currentRoom)) or {}
        if move and not exits[move] and not special[move] then
            for k,v in pairs(special) do
                if string.starts(k,move) then
                    move = k
                    break
                end
            end
        end
        if find_portal then
            map.find_me(map.currentName,map.currentExits,move)
            find_portal = false
        elseif force_portal then
            find_portal = false
            map.echo("Creating portal destination")
            create_room(map.currentName, map.currentExits, nil, {getRoomCoordinates(map.currentRoom)})
            force_portal = false
        elseif move == "recall" and map.save.recall[map.character] then
            set_room(map.save.recall[map.character])
        elseif move == map.configs.lang_dirs['look'] and map.currentRoom and not check_room(map.currentRoom, map.currentName, map.currentExits) then
            -- this check isn't working as intended, find out why
            map.find_me(map.currentName,map.currentExits)
        else
            local onlyName
            if map.mode == "lazy" then
              onlyName = true
            else
              onlyName = false
            end
            if exits[move] and (vision_fail or check_room(exits[move], map.currentName, map.currentExits, onlyName)) then
                set_room(exits[move])
            elseif special[move] and (vision_fail or check_room(special[move], map.currentName, map.currentExits, onlyName)) then
                set_room(special[move])
            elseif not vision_fail then
                if map.mapping and move then
                    find_link(map.currentName, map.currentExits, move, map.configs.max_search_distance)
                else
                    map.find_me(map.currentName,map.currentExits, move)
                end
            end
        end
        vision_fail = false
    end
end

local function capture_move_cmd(dir,priority)
    -- captures valid movement commands
    local configs = map.configs
    if configs.clear_lines_on_send then
        lines = {}
    end
    dir = string.lower(dir)
    if dir == "/" then dir = "recall" end
    if dir == configs.lang_dirs['l'] then dir = configs.lang_dirs['look'] end
    if configs.use_translation then
        dir = configs.translate[dir] or dir
    end
    local door = string.match(dir,"open (%a+)")
    if map.mapping and door and (exitmap[door] or short[door]) then
        local doors = getDoors(map.currentRoom)
        if not doors[door] and not doors[short[door]] then
            map.set_door(door,"","")
        end
    end
    for i,v in ipairs(map.save.move_methods) do
    	local str = string.match(dir, v .. " (%a+)")
    	if str then 
    		dir = str
    		break
    	end
    end
    local portal = string.match(dir,"enter (%a+)")
    if map.mapping and portal then
        local portals = getSpecialExitsSwap(map.currentRoom)
        if not portals[dir] then
            map.set_portal(dir, true)
        end
    end
    if table.contains(exitmap,dir) or string.starts(dir,"enter ") or dir == "recall" then
      if dir ~= configs.lang_dirs['look'] then
        if priority then
            table.insert(move_queue,1,exitmap[dir] or dir)
        else
            table.insert(move_queue,exitmap[dir] or dir)
        end
      else
        if configs.search_on_look == true then
          table.insert(move_queue, dir)
        end
    end				
    elseif map.currentRoom then
        local special = getSpecialExitsSwap(map.currentRoom) or {}
        if special[dir] then
            if priority then
                table.insert(move_queue,1,dir)
            else
                table.insert(move_queue,dir)
            end
        end
    end
end

local function deduplicate_exits(exits)
  local deduplicated_exits = {}
  for _, v in ipairs(exits) do
    deduplicated_exits[v] = true
  end

  return table.keys(deduplicated_exits)
end
local function capture_room_info(name, exits)
    -- captures room info, and tries to move map to match
    if (not vision_fail) and name and exits then
        map.set("prevName", map.currentName)
        map.set("prevExits", map.currentExits)
        name = string.trim(name)
        map.set("currentName", name)
        if exits:ends(".") then exits = exits:sub(1,#exits-1) end
        if not map.configs.use_translation then
            exits = string.gsub(string.lower(exits)," and "," ")
        end
        map.set("currentExits", {})
        for w in string.gmatch(exits,"%a+") do
            if map.configs.use_translation then
                local dir = map.configs.translate and map.configs.translate[w]
                if dir then table.insert(map.currentExits,dir) end
            else
                table.insert(map.currentExits,w)
            end
        end
        undupeExits = deduplicate_exits(map.currentExits)
        map.set("currentExits", undupeExits)
        map.echo(string.format("Exits Captured: %s (%s)",exits, table.concat(map.currentExits, " ")),true)
        move_map()
    elseif vision_fail then
        move_map()
    end
end

local function find_area(name)
    -- searches for the named area, and creates it if necessary
    local areas = getAreaTable()
    local areaID
    for k,v in pairs(areas) do
        if string.lower(name) == string.lower(k) then
            areaID = v
            break
        end
    end
    if not areaID then areaID = addAreaName(name) end
    if not areaID then
        show_err("Invalid Area. No such area found, and area could not be added.",true)
    end
    map.set("currentArea", areaID)
end

function map.load_map(address)
    local path = profilePath .. "/map downloads/map.dat"
    if not address then
        loadMap(path)
        map.echo("Map reloaded from local copy.")
    else
        if not string.match(address,"/[%a_]+%.dat$") then
            address = address .. "/map.dat"
        end
        downloading = true
        downloadFile(path, address)
        map.echo(string.format("Downloading map file from: %s.",address))
    end
end

function map.set_exit(dir,roomID)
    -- used to set unusual exits from the room you are standing in
    if map.mapping then
        roomID = tonumber(roomID)
        if not roomID then
            show_err("Set Exit: Invalid Room ID")
        end
        if not table.contains(exitmap,dir) and not string.starts(dir, "-p ") then
            show_err("Set Exit: Invalid Direction")
        end

        if not string.starts(dir, "-p ") then
            local exit
            if stubmap[exitmap[dir] or dir] &lt;= 12 then
                exit = short[exitmap[dir] or dir]
                setExit(map.currentRoom,roomID,exit)
            else
                -- check handling of custom exits here
                exit = exitmap[dir] or dir
                exit = "exit " .. exit
                setRoomUserData(map.currentRoom,exit,roomID)
            end
            map.echo("Exit " .. dir .. " now goes to roomID " .. roomID)
        else
            dir = string.gsub(dir,"^-p ","")
            addSpecialExit(map.currentRoom,roomID,dir)
            map.echo("Special exit '" .. dir .. "' now goes to roomID " .. roomID)
        end
    else
        map.echo("Not mapping",false,true)
    end
end

function map.find_path(roomName,areaName,return_tables)
    areaName = (areaName ~= "" and areaName) or nil
    local rooms = find_room(roomName,areaName)
    local found,dirs = false,{}
    local path = {}
    for k,v in pairs(rooms) do
        found = getPath(map.currentRoom,k)
        if found and (#dirs == 0 or #dirs &gt; #speedWalkDir) then
            dirs = speedWalkDir
            path = speedWalkPath
        end
    end
    if return_tables then
        if table.is_empty(path) then
            path, dirs = nil, nil
        end
        return path, dirs
    else
        if #dirs &gt; 0 then
            map.echo("Path to " .. roomName .. ((areaName and " in " .. areaName) or "") .. ": " .. table.concat(dirs,", "))
        else
            map.echo("No path found to " .. roomName .. ((areaName and " in " .. areaName) or "") .. ".",false,true)
        end
    end
end

function map.export_area(name)
    -- used to export a single area to a file
    local areas = getAreaTable()
    name = string.lower(name)
    for k,v in pairs(areas) do
        if name == string.lower(k) then name = k end
    end
    if not areas[name] then
        show_err("No such area.")
    end
    local rooms = getAreaRooms(areas[name])
    local tmp = {}
    for k,v in pairs(rooms) do
        tmp[v] = v
    end
    rooms = tmp
    local tbl = {}
    tbl.name = name
    tbl.rooms = {}
    tbl.exits = {}
    tbl.special = {}
    local rname, exits, stubs, doors, special, portals, door_up, door_down, coords, environment, roomChar
    for k,v in pairs(rooms) do
        rname = getRoomName(v)
        exits = getRoomExits(v)
        stubs = getExitStubs(v)
        doors = getDoors(v)
        special = getSpecialExitsSwap(v)
        portals = getRoomUserData(v,"portals") or ""
	environment = getRoomEnv(v)
	roomChar = getRoomChar(v)
        coords = {getRoomCoordinates(v)}
        tbl.rooms[v] = {name = rname, coords = coords, exits = exits, stubs = stubs, doors = doors, door_up = door_up,
            door_down = door_down, door_in = door_in, door_out = door_out, special = special, portals = portals, environment = environment, roomChar = roomChar}
        tmp = {}
        for k1,v1 in pairs(exits) do
            if not table.contains(rooms,v1) then
                tmp[k1] = {v1, getRoomName(v1)}
            end
        end
        if not table.is_empty(tmp) then
            tbl.exits[v] = tmp
        end
        tmp = {}
        for k1,v1 in pairs(special) do
            if not table.contains(rooms,v1) then
                tmp[k1] = {v1, getRoomName(v1)}
            end
        end
        if not table.is_empty(tmp) then
            tbl.special[v] = tmp
        end
    end
    local path = profilePath.."/"..string.gsub(string.lower(name),"%s","_")..".dat"
    table.save(path,tbl)
    map.echo("Area " .. name .. " exported to " .. path)
end

function map.import_area(name)
    name = profilePath .. "/" .. string.gsub(string.lower(name),"%s","_") .. ".dat"
    local tbl = {}
    table.load(name,tbl)
    if table.is_empty(tbl) then
        show_err("No file found")
    end
    local areas = getAreaTable()
    local areaID = areas[tbl.name] or addAreaName(tbl.name)
    local rooms = {}
    local ID
    for k,v in pairs(tbl.rooms) do
        ID = createRoomID()
        rooms[k] = ID
        addRoom(ID)
        setRoomName(ID,v.name)
        setRoomArea(ID,areaID)
        setRoomCoordinates(ID,unpack(v.coords))
        if type(v.stubs) == "table" then
            for i,j in pairs(v.stubs) do
                setExitStub(ID,j,true)
            end
        end
        for i,j in pairs(v.doors) do
            setDoor(ID,i,j)
        end
        setRoomUserData(ID,"portals",v.portals)
	setRoomEnv(ID,v.environment)
	setRoomChar(ID,v.roomChar)
    end
    for k,v in pairs(tbl.rooms) do
        for i,j in pairs(v.exits) do
            if rooms[j] then
                connect_rooms(rooms[k],rooms[j],i)
            end
        end
        for i,j in pairs(v.special) do
            if rooms[j] then
                addSpecialExit(rooms[k],rooms[j],i)
            end
        end
    end
    for k,v in pairs(tbl.exits) do
        for i,j in pairs(v) do
            if getRoomName(j[1]) == j[2] then
                connect_rooms(rooms[k],j[1],i)
            end
        end
    end
    for k,v in pairs(tbl.special) do
        for i,j in pairs(v) do
            addSpecialExit(k,j[1],i)
        end
    end
    map.fix_portals()
    map.echo("Area " .. tbl.name .. " imported from " .. name)
end

function map.set_recall()
    -- assigned the current room to be recall for the current character
    map.save.recall[map.character] = map.currentRoom
    table.save(profilePath .. "/map downloads/map_save.dat",map.save)
    map.echo("Recall room set to: " .. getRoomName(map.currentRoom) .. ".")
end

function map.set_portal(name, is_auto)
    -- creates a new portal in the room
    if map.mapping then
        if not string.starts(name,"-f ") then
            find_portal = name
        else
            name = string.gsub(name,"^-f ","")
            force_portal = name
        end
        move_queue = {name}
        if not is_auto then
            send(name)
        end
    else
        map.echo("Not mapping",false,true)
    end
end

function map.set_mode(mode)
    -- switches mapping modes
    if not table.contains({"lazy","simple","normal","complex"},mode) then
        show_err("Invalid Map Mode, must be 'lazy', 'simple', 'normal' or 'complex'.")
    end
    map.set("mode", mode)
    map.echo("Current mode set to: " .. mode)
end

function map.start_mapping(area_name)
    -- starts mapping, and sets the current area to the given one, or uses the current one
    if not map.currentName then
        show_err("Room detection not yet working, see &lt;yellow&gt;map basics&lt;reset&gt; for guidance.")
    end
    local rooms
    move_queue = {}
    area_name = area_name ~= "" and area_name or nil
    if map.currentArea and not area_name then
        local areas = getAreaTableSwap()
        area_name = areas[map.currentArea]
    end
    if not area_name then
        show_err("You haven't started mapping yet, how should the first area be called? Set it with: &lt;yellow&gt;start mapping &lt;area name&gt;&lt;reset&gt;")
    end
    map.echo("Now mapping in area: " .. area_name)
    map.set("mapping", true)
    find_area(area_name)
    rooms = find_room(map.currentName, map.currentArea)
    if table.is_empty(rooms) then
        if map.currentRoom and getRoomName(map.currentRoom) == map.currentName then
            map.set_area(area_name)
        else
            create_room(map.currentName, map.currentExits, nil, {0,0,0})
        end
    elseif map.currentRoom and map.currentArea ~= getRoomArea(map.currentRoom) then
        map.set_area(area_name)
    end
end

function map.stop_mapping()
    map.set("mapping", false)
    map.echo("Mapping off.")
end

function map.clear_moves()
    local commands_in_queue = #move_queue
    move_queue = {}
    map.echo("Move queue cleared, "..commands_in_queue.." commands removed.")
end

function map.show_moves()
    map.echo("Moves: "..(move_queue and table.concat(move_queue, ', ') or '(queue empty)'))
end

function map.set_area(name)
    -- assigns the current room to the area given, creates the area if necessary
    if map.mapping then
        find_area(name)
        if map.currentRoom and getRoomArea(map.currentRoom) ~= map.currentArea then
            setRoomArea(map.currentRoom,map.currentArea)
            set_room(map.currentRoom)
        end
    else
        map.echo("Not mapping",false,true)
    end
end

function map.set_door(dir,status,one_way)
    -- adds a door on a given exit
    if map.mapping then
        if not map.currentRoom then
            show_err("Make Door: No room found.")
        end
        dir = exitmap[dir] or dir
        if not stubmap[dir] then
            show_err("Make Door: Invalid direction.")
        end
        status = (status ~= "" and status) or "closed"
        one_way = (one_way ~= "" and one_way) or "no"
        if not table.contains({"yes","no"},one_way) then
            show_err("Make Door: Invalid one-way status, must be yes or no.")
        end

        local exits = getRoomExits(map.currentRoom)
        local exit
        -- check handling of custom exits here
        for i = 13,#stubmap do
            exit = "exit " .. stubmap[i]
            exits[stubmap[i]] = tonumber(getRoomUserData(map.currentRoom,exit))
        end
        local target_room = exits[dir]
        if target_room then
            exits = getRoomExits(target_room)
            -- check handling of custom exits here
            for i = 13,#stubmap do
                exit = "exit " .. stubmap[i]
                exits[stubmap[i]] = tonumber(getRoomUserData(target_room,exit))
            end
        end
        if one_way == "no" and (target_room and exits[reverse_dirs[dir]] == map.currentRoom) then
            add_door(target_room,reverse_dirs[dir],status)
        end
        add_door(map.currentRoom,dir,status)
        map.echo(string.format("Adding %s door to the %s", status, dir))
    else
        map.echo("Not mapping",false,true)
    end
end

function map.shift_room(dir)
    -- shifts a room around on the map
    if map.mapping then
        dir = exitmap[dir] or (table.contains(exitmap,dir) and dir)
        if not dir then
            show_err("Shift Room: Exit not found")
        end
        local x,y,z = getRoomCoordinates(map.currentRoom)
        dir = stubmap[dir]
        local coords = coordmap[dir]
        x = x + coords[1]
        y = y + coords[2]
        z = z + coords[3]
        setRoomCoordinates(map.currentRoom,x,y,z)
        centerview(map.currentRoom)
        map.echo("Shifting room",true)
    else
        map.echo("Not mapping",false,true)
    end
end

local function check_link(firstID, secondID, dir)
    -- check to see if two rooms are connected in a given direction
    if not firstID then error("Check Link Error: No first ID",2) end
    if not secondID then error("Check Link Error: No second ID",2) end
    local name = getRoomName(firstID)
    local exits1 = table.union(getRoomExits(firstID),getRoomStubs(firstID))
    local exits2 = table.union(getRoomExits(secondID),getRoomStubs(secondID))
    local exit
    -- check handling of custom exits here
    for i = 13,#stubmap do
        exit = "exit " .. stubmap[i]
        exits1[stubmap[i]] = tonumber(getRoomUserData(firstID,exit))
        exits2[stubmap[i]] = tonumber(getRoomUserData(secondID,exit))
    end
    local checkID = exits2[reverse_dirs[dir]]
    local exits = {}
    for k,v in pairs(exits1) do
        table.insert(exits,k)
    end
    return checkID and check_room(checkID,name,exits)
end

function map.find_me(name, exits, dir, manual)
    -- tries to locate the player using the current room name and exits, and if provided, direction of movement
    -- if direction of movement is given, narrows down possibilities using previous room info
    if move ~= "recall" then move_queue = {} end
    -- find from room hash id - map.find_me(nil, nil, nil, false)
    if map.prompt.hash then
        local room = getRoomIDbyHash(map.prompt.hash)
        if room &gt; 0 then
            set_room(room)
            map.echo("Room found, ID: " .. room, true)
            return
        else
            map.echo("Room not found in map database!", not manual, true)
            return
        end
    end
    local check = dir and map.currentRoom and table.contains(exitmap,dir)
    name = name or map.currentName
    exits = exits or map.currentExits
    if not name and not exits then
        show_err("Room not found, complete room name and exit data not available.")
    end
    local rooms = find_room(name)
    local match_IDs = {}
    for k,v in pairs(rooms) do
        if check_room(k, name, exits) then
            table.insert(match_IDs,k)
        end
    end
    rooms = match_IDs
    match_IDs = {}
    if table.size(rooms) &gt; 1 and check then
        for k,v in pairs(rooms) do
            if check_link(map.currentRoom,v,dir) then
                table.insert(match_IDs,v)
            end
        end
    elseif random_move then
        for k,v in pairs(getRoomExits(map.currentRoom)) do
            if check_room(v,map.currentName,map.currentExits) then
                table.insert(match_IDs,v)
            end
        end
    end
    if table.size(match_IDs) == 0 then
        match_IDs = rooms
    end
    if table.index_of(match_IDs,map.currentRoom) then
        match_IDs = {map.currentRoom}
    end
    if not table.is_empty(match_IDs) and not find_portal then
        set_room(match_IDs[1])
        map.echo("Room found, ID: " .. match_IDs[1],true)
    elseif find_portal then
        if not table.is_empty(match_IDs) then
            map.echo("Found portal destination, linking rooms",false,false,true)
            addSpecialExit(map.currentRoom,match_IDs[1],find_portal)
            local portals = getRoomUserData(match_IDs[1],"portals") or ""
            portals = portals .. "," .. tostring(map.currentRoom)..":"..find_portal
            setRoomUserData(match_IDs[1],"portals",portals)
            set_room(match_IDs[1])
            map.echo("Room found, ID: " .. match_IDs[1],true)
        else
            map.echo("Creating portal destination",false,false,true)
            create_room(map.currentName, map.currentExits, nil, {getRoomCoordinates(map.currentRoom)})
        end
        find_portal = false
    elseif table.is_empty(match_IDs) then
        map.echo("Room not found in map database", not manual, true)
    end
end

function map.fix_portals()
    if map.mapping then
        -- used to clear and update data for portal back-referencing
        local rooms = getRooms()
        local portals
        for k,v in pairs(rooms) do
            setRoomUserData(k,"portals","")
        end
        for k,v in pairs(rooms) do
            for cmd,room in pairs(getSpecialExitsSwap(k)) do
                portals = getRoomUserData(room,"portals") or ""
                if portals ~= "" then portals = portals .. "," end
                portals = portals .. tostring(k) .. ":" .. cmd
                setRoomUserData(room,"portals",portals)
            end
        end
        map.echo("Portals Fixed")
    else
        map.echo("Not mapping",false,true)
    end
end

function map.merge_rooms()
    -- used to combine essentially identical rooms with the same coordinates
    -- typically, these are generated due to mapping errors
    if map.mapping then
        map.echo("Merging rooms")
        local x,y,z = getRoomCoordinates(map.currentRoom)
        local rooms = getRoomsByPosition(map.currentArea,x,y,z)
        local exits, portals, room, cmd, curportals
        local room_count = 1
        for k,v in pairs(rooms) do
            if v ~= map.currentRoom then
                if getRoomName(v) == getRoomName(map.currentRoom) then
                    room_count = room_count + 1
                    for k1,v1 in pairs(getRoomExits(v)) do
                        setExit(map.currentRoom,v1,stubmap[k1])
                        exits = getRoomExits(v1)
                        if exits[reverse_dirs[k1]] == v then
                            setExit(v1,map.currentRoom,stubmap[reverse_dirs[k1]])
                        end
                    end
                    for k1,v1 in pairs(getDoors(v)) do
                        setDoor(map.currentRoom,k1,v1)
                    end
                    for k1,v1 in pairs(getSpecialExitsSwap(v)) do
                        addSpecialExit(map.currentRoom,v1,k1)
                    end
                    portals = getRoomUserData(v,"portals") or ""
                    if portals ~= "" then
                        portals = string.split(portals,",")
                        for k1,v1 in ipairs(portals) do
                            room,cmd = unpack(string.split(v1,":"))
                            addSpecialExit(tonumber(room),map.currentRoom,cmd)
                            curportals = getRoomUserData(map.currentRoom,"portals") or ""
                            if not string.find(curportals,room) then
                                curportals = curportals .. "," .. room .. ":" .. cmd
                                setRoomUserData(map.currentRoom,"portals",curportals)
                            end
                        end
                    end
                    -- check handling of custom exits here for doors and exits, and reverse exits
                    for i = 13,#stubmap do
                        local door = "door " .. stubmap[i]
                        local tmp = tonumber(getRoomUserData(v,door))
                        if tmp then
                            setRoomUserData(map.currentRoom,door,tmp)
                        end
                        local exit = "exit " .. stubmap[i]
                        tmp = tonumber(getRoomUserData(v,exit))
                        if tmp then
                            setRoomUserData(map.currentRoom,exit,tmp)
                            if tonumber(getRoomUserData(tmp, "exit " .. reverse_dirs[stubmap[i]])) == v then
                                setRoomUserData(tmp, exit, map.currentRoom)
                            end
                        end
                    end
                    deleteRoom(v)
                end
            end
        end
        if room_count &gt; 1 then
            map.echo(room_count .. " rooms merged", true)
        end
    else
        map.echo("Not mapping",false,true)
    end
end

function map.findAreaID(areaname, exact)
    local areaname = areaname:lower()
    local list = getAreaTable()

    -- iterate over the list of areas, matching them with substring match.
    -- if we get match a single area, then return its ID, otherwise return
    -- 'false' and a message that there are than one are matches
    local returnid, fullareaname, multipleareas = nil, nil, {}
    for area, id in pairs(list) do
        if (not exact and area:lower():find(areaname, 1, true)) or (exact and areaname == area:lower()) then
            returnid = id
            fullareaname = area
            multipleareas[#multipleareas+1] = area
        end
    end

    if #multipleareas == 1 then
        return returnid, fullareaname
    else
        return nil, nil, multipleareas
    end
end

function map.echoRoomList(areaname, exact)
    local areaid, msg, multiples
    local listcolor, othercolor = "DarkSlateGrey","LightSlateGray"
    if tonumber(areaname) then
        areaid = tonumber(areaname)
        msg = getAreaTableSwap()[areaid]
    else
        areaid, msg, multiples = map.findAreaID(areaname, exact)
    end
    if areaid then
        local roomlist, endresult = getAreaRooms(areaid) or {}, {}

        -- obtain a room list for each of the room IDs we got
        local getRoomName = getRoomName
        for _, id in pairs(roomlist) do
            endresult[id] = getRoomName(id)
        end
        roomlist[#roomlist+1], roomlist[0] = roomlist[0], nil
        -- sort room IDs so we can display them in order
        table.sort(roomlist)

        local echoLink, format, fg, echo = echoLink, string.format, fg, cecho
        -- now display something half-decent looking
        cecho(format("&lt;%s&gt;List of all rooms in &lt;%s&gt;%s&lt;%s&gt; (areaID &lt;%s&gt;%s&lt;%s&gt; - &lt;%s&gt;%d&lt;%s&gt; rooms):\n",
            listcolor, othercolor, msg, listcolor, othercolor, areaid, listcolor, othercolor, #roomlist, listcolor))
        -- use pairs, as we can have gaps between room IDs
        for _, roomid in pairs(roomlist) do
            local roomname = endresult[roomid]
            cechoLink(format("&lt;%s&gt;%7s",othercolor,roomid), 'map.speedwalk('..roomid..')',
                format("Go to %s (%s)", roomid, tostring(roomname)), true)
            cecho(format("&lt;%s&gt;: &lt;%s&gt;%s&lt;%s&gt;.\n", listcolor, othercolor, roomname, listcolor))
        end
    elseif not areaid and #multiples &gt; 0 then
        local allareas, format = getAreaTable(), string.format
        local function countrooms(areaname)
            local areaid = allareas[areaname]
            local allrooms = getAreaRooms(areaid) or {}
            local areac = (#allrooms or 0) + (allrooms[0] and 1 or 0)
            return areac
        end
        map.echo("For which area would you want to list rooms for?")
        for _, areaname in ipairs(multiples) do
            echo("  ")
            setUnderline(true)
            cechoLink(format("&lt;%s&gt;%-40s (%d rooms)", othercolor, areaname, countrooms(areaname)),
                'map.echoRoomList("'..areaname..'", true)', "Click to view the room list for "..areaname, true)
            setUnderline(false)
            echo("\n")
        end
    else
        map.echo(string.format("Don't know of any area named '%s'.", areaname),false,true)
    end
    resetFormat()
end

function map.echoAreaList()
    local totalroomcount = 0
    local rlist = getAreaTableSwap()
    local listcolor, othercolor = "DarkSlateGrey","LightSlateGray"

    -- count the amount of rooms in an area, taking care to count the room in the 0th
    -- index as well if there is one
    -- saves the total room count on the side as well
    local function countrooms(areaid)
        local allrooms = getAreaRooms(areaid) or {}
        local areac = (#allrooms or 0) + (allrooms[0] and 1 or 0)
        totalroomcount = totalroomcount + areac
        return areac
    end

    local getAreaRooms, cecho, fg, echoLink = getAreaRooms, cecho, fg, echoLink
    cecho(string.format("&lt;%s&gt;List of all areas we know of (click to view room list):\n",listcolor))
    for id = 1,table.maxn(rlist) do
        if rlist[id] then
            cecho(string.format("&lt;%s&gt;%7d ", othercolor, id))
            fg(listcolor)
            echoLink(string.format("%-40s (%d rooms)",rlist[id],countrooms(id)), 'map.echoRoomList("'..id..'", true)',
                "View the room list for "..rlist[id], true)
            echo("\n")
        end
    end
    cecho(string.format("&lt;%s&gt;Total amount of rooms in this map: %s\n", listcolor, totalroomcount))
end

function map.search_timer_check()
    if find_prompt then
        map.echo("Prompt not auto-detected, use 'map prompt' to set a prompt pattern.",false,true)
        find_prompt = false
    end
end

function map.find_prompt()
    find_prompt = true
    map.echo("Searching for prompt.")
    send("\n", false)
    tempTimer(5, "map.search_timer_check()")
end

function map.make_prompt_pattern(str)
    if not str:starts("^") then str = "^"..str end
    map.save.prompt_pattern[map.character] = str
    find_prompt = false
    table.save(profilePath .. "/map downloads/map_save.dat",map.save)
    map.echo("Prompt pattern set: " .. str)
end

function map.make_ignore_pattern(str)
    map.save.ignore_patterns = map.save.ignore_patterns or {}
    if not table.contains(map.save.ignore_patterns,str) then
        table.insert(map.save.ignore_patterns,str)
        map.echo("Ignore pattern added: " .. str)
    else
        table.remove(map.save.ignore_patterns, table.index_of(map.save.ignore_patterns, str))
        map.echo("Ignore pattern removed: " .. str)
    end
    table.save(profilePath .. "/map downloads/map_save.dat",map.save)
end

function map.make_move_method(str)
    map.save.move_methods = map.save.move_methods or {}
    if not table.contains(map.save.move_methods,str) then
        table.insert(map.save.move_methods,str)
        map.echo("Move method added: " .. str)
    else
        table.remove(map.save.move_methods, table.index_of(map.save.move_methods, str))
        map.echo("Move method removed: " .. str)
    end
    table.save(profilePath .. "/map downloads/map_save.dat",map.save)
end

local function grab_line()
    table.insert(lines,line)
    if map.save.prompt_pattern[map.character] and string.match(line, map.save.prompt_pattern[map.character]) then
        if map.prompt.exits and map.prompt.exits ~= "" then
            raiseEvent("onNewRoom")
        end
        print_wait_echoes()
        map.echo("Prompt captured",true)
    end
    if find_prompt then
        for k,v in ipairs(map.configs.prompt_test_patterns) do
            if string.match(line,v) then
                map.save.prompt_pattern[map.character] = v
                table.save(profilePath .. "/map downloads/map_save.dat",map.save)
                find_prompt = false
                map.echo("Prompt found")
                break
            end
        end
    end
end

local function name_search()
    local room_name
    if map.configs.custom_name_search then
        room_name = mudlet.custom_name_search(lines)
    else
        local line_count = #lines + 1
        local cur_line, last_line
        local prompt_pattern = map.save.prompt_pattern[map.character]
        if not prompt_pattern then return end
        while not room_name do
            line_count = line_count - 1
            if not lines[line_count] then break end
            cur_line = lines[line_count]
            for k,v in ipairs(map.save.ignore_patterns) do
                cur_line = string.trim(string.gsub(cur_line,v,""))
            end
            if string.find(cur_line,prompt_pattern) then
                cur_line = string.trim(string.gsub(cur_line,prompt_pattern,""))
                if cur_line ~= "" then
                    room_name = cur_line
                else
                    room_name = last_line
                end
            elseif line_count == 1 then
                cur_line = string.trim(cur_line)
                if cur_line ~= "" then
                    room_name = cur_line
                else
                    room_name = last_line
                end
            elseif not string.match(cur_line,"^%s*$") then
                last_line = cur_line
            end
        end
        lines = {}
        room_name = room_name:sub(1,100)
    end
    return room_name
end

local function handle_exits(exits)
    local room = map.prompt.room or name_search()
    room = map.sanitizeRoomName(room)
    exits = map.prompt.exits or exits
    exits = string.lower(exits)
    exits = string.gsub(exits,"%a+", exitmap)
    if room then
        map.echo("Room Name Captured: " .. room, true)
        room = string.trim(room)
        capture_room_info(room, exits)
        map.prompt.room = nil
        map.prompt.exits = nil
    end
end

local continue_walk, timerID
continue_walk = function(new_room)
    if not walking then return end
    -- calculate wait time until next command, with randomness
    local wait = map.configs.speedwalk_delay or 0
    if wait &gt; 0 and map.configs.speedwalk_random then
        wait = wait * (1 + math.random(0,100)/100)
    end
    -- if no wait after new room, move immediately
    if new_room and map.configs.speedwalk_wait and wait == 0 then
        new_room = false
    end
    -- send command if we don't need to wait
    if not new_room then
        --handle script exits
        if string.starts(map.walkDirs[1], "script:") then
          map.walkDirs[1] = string.gsub(map.walkDirs[1], "script:", "")
          loadstring(table.remove(map.walkDirs,1))()
        else
          send(table.remove(map.walkDirs,1))
        end
        -- check to see if we are done
        if #map.walkDirs == 0 then
            walking = false
            speedWalkPath, speedWalkWeight = {}, {}
            raiseEvent("sysSpeedwalkFinished")
        end
    end
    -- make tempTimer to send next command if necessary
    if walking and (not map.configs.speedwalk_wait or (map.configs.speedwalk_wait and wait &gt; 0)) then
        if timerID then killTimer(timerID) end
        timerID = tempTimer(wait, function() continue_walk() end)
    end
end

function map.speedwalk(roomID, walkPath, walkDirs)
    roomID = roomID or speedWalkPath[#speedWalkPath]
    getPath(map.currentRoom, roomID)
    walkPath = speedWalkPath
    walkDirs = speedWalkDir
    if #speedWalkPath == 0 then
        map.echo("No path to chosen room found.",false,true)
        return
    end
    table.insert(walkPath, 1, map.currentRoom)
    -- go through dirs to find doors that need opened, etc
    -- add in necessary extra commands to walkDirs table
    local k = 1
    repeat
        local id, dir = walkPath[k], walkDirs[k]
        if exitmap[dir] or short[dir] then
            local door = check_doors(id, exitmap[dir] or dir)
            local status = door and door[dir]
            if status and status &gt; 1 then
                -- if locked, unlock door
                if status == 3 then
                    table.insert(walkPath,k,id)
                    table.insert(walkDirs,k,"unlock " .. (exitmap[dir] or dir))
                    k = k + 1
                end
                -- if closed, open door
                table.insert(walkPath,k,id)
                table.insert(walkDirs,k,"open " .. (exitmap[dir] or dir))
                k = k + 1
            end
        end
        k = k + 1
    until k &gt; #walkDirs
    if map.configs.use_translation then
        for k, v in ipairs(walkDirs) do
            walkDirs[k] = map.configs.lang_dirs[v] or v
        end
    end
    -- perform walk
    walking = true
    if map.configs.speedwalk_wait or map.configs.speedwalk_delay &gt; 0 then
        map.walkDirs = walkDirs
        continue_walk()
    else
        for _,dir in ipairs(walkDirs) do
           if string.starts(dir, "script:") then
              dir = string.gsub(dir, "script:", "")
              loadstring(dir)()
            else
              send(dir)
           end
        end
        walking = false
        raiseEvent("sysSpeedwalkFinished")
    end
end

function doSpeedWalk()
    if #speedWalkPath ~= 0 then
        raiseEvent("sysSpeedwalkStarted")
        map.speedwalk(nil, speedWalkPath, speedWalkDir)
    else
        map.echo("No path to chosen room found.",false,true)
    end
end

function map.pauseSpeedwalk()
    if #speedWalkDir ~= 0 then
        walking = false
        raiseEvent("sysSpeedwalkPaused")
        map.echo("Speedwalking paused.")
    else
        map.echo("Not currently speedwalking.")
    end
end

function map.resumeSpeedwalk(delay)
    if #speedWalkDir ~= 0 then
        map.find_me(nil, nil, nil, true)
        raiseEvent("sysSpeedwalkResumed")
        map.echo("Speedwalking resumed.")
        tempTimer(delay or 0, function() map.speedwalk(nil, speedWalkPath, speedWalkDir) end)
    else
        map.echo("Not currently speedwalking.")
    end
end

function map.stopSpeedwalk()
    if #speedWalkDir ~= 0 then
        walking = false
        map.walkDirs, speedWalkDir, speedWalkPath, speedWalkWeight = {}, {}, {}, {}
        raiseEvent("sysSpeedwalkStopped")
        map.echo("Speedwalking stopped.")
    else
        map.echo("Not currently speedwalking.")
    end
end

function map.toggleSpeedwalk(what)
    assert(what == nil or what == "on" or what == "off", "map.toggleSpeedwalk wants 'on', 'off' or nothing as an argument")

    if what == "on" or (what == nil and walking) then
        map.pauseSpeedwalk()
    elseif what == "off" or (what == nil and not walking) then
        map.resumeSpeedwalk()
    end
end

local function check_version()
    downloading = false
    local path = profilePath .. "/map downloads/versions.lua"
    local versions = {}
    table.load(path, versions)
    local pos = table.index_of(versions, map.version) or 0
    if pos ~= #versions then
        enableAlias("Map Update Alias")
        if not map.silentUpdate then
          map.echo(string.format("The Generic Mapping Script is currently &lt;red&gt;%d&lt;reset&gt; versions behind.",#versions - pos))
          map.echo("To update now, please type: &lt;yellow&gt;map update&lt;reset&gt;")
        else
          map.updateVersion()
        end
    end
    map.update_timer = tempTimer(3600, [[map.checkVersion()]])
end

function map.checkVersion()
    if #getRooms() &gt; 0 then
      map.silentUpdate = false
    end    
    if map.update_timer then
        killTimer(map.update_timer)
        map.update_timer = nil
    end
    if not map.update_waiting and map.configs.download_path ~= "" then
        local path, file = profilePath .. "/map downloads", "/versions.lua"
        downloading = true
        downloadFile(path .. file, map.configs.download_path .. file)
        map.update_waiting = true
    end
end

local function update_version()
    downloading = false
    local path = profilePath .. "/map downloads/generic_mapper.xml"
    disableAlias("Map Update Alias")
    map.updatingMapper = true
    uninstallPackage("generic_mapper")
    installPackage(path)
    map.updatingMapper = nil
    if not map.silentUpdate then
      map.echo("Generic Mapping Script updated successfully.")
    end
end

function map.updateVersion()
    local path, file = profilePath .. "/map downloads", "/generic_mapper.xml"
    downloading = true
    downloadFile(path .. file, map.configs.download_path .. file)
end

function map.showMap(shown)
    local configs = map.configs.map_window
    shown = shown or not configs.shown
    map.configs.map_window.shown = shown
    map.silentUpdate = false
    local x, y, w, h, origin = configs.x, configs.y, configs.w, configs.h, configs.origin
    if string.find(origin,"bottom") then
        if y == 0 or y == "0%" then
            y = h
        end
        if type(y) == "number" then
            y = -y
        else
            y = "-"..y
        end
    end
    if string.find(origin,"right") then
        if x == 0 or x == "0%" then
            x = w
        end
        if type(x) == "number" then
            x = -x
        else
            x = "-"..x
        end
    end
    local mapper = Geyser.Mapper:new({name = "my_mapper", x = x, y = y, w = w, h = h})
    mapper:resize(w,h)
    mapper:move(x,y)
    if shown then
        mapper:show()
    else
        mapper:hide()
    end
end

-- some games embed an ASCII map on the same line, which messes up the room room name
-- extract the longest continuous piece of text from the line to be the room name
function map.sanitizeRoomName(roomtitle)
  -- sometimes we get 'nil' for a room title - ignore that silently
  if type(roomtitle) ~= "string" then
    return roomtitle
  end

  if not roomtitle:match("   ") then
    -- if the whole line does not contain a run of three consecutive spaces then
    -- consider the whole line as the room name; this was previously two spaces
    -- but some MUDs do have titles that are multiple (short) sentances AND
    -- put TWO spaces after a full-stop for the first (e.g. After the Plague MUD
    -- on telnet://atp.pedia.szote.u-szeged.hu:3000)
    return roomtitle
  end

  -- otherwise split the text up in double-spaced chunks and return the longest
  -- run of bytes found in those chunks
  local parts = roomtitle:split("  ")
  table.sort(parts, function(a,b) return #a &lt; #b end)
  local longestpart = parts[#parts]

  local trimmed = utf8.match(longestpart, "[%w ]+"):trim()
  return trimmed
end

function map.eventHandler(event, ...)
    if event == "onNewRoom" then
        handle_exits(arg[1])
        if walking and map.configs.speedwalk_wait then
            continue_walk(true)
        end
    elseif event == "onPrompt" then
        if map.prompt.exits and map.prompt.exits ~= "" then
            raiseEvent("onNewRoom")
        end
        print_wait_echoes()
        map.echo("Prompt Captured",true)
    elseif event == "onMoveFail" then
        map.echo("onMoveFail",true)
        table.remove(move_queue,1)
    elseif event == "onVisionFail" then
        map.echo("onVisionFail",true)
        vision_fail = true
        capture_room_info()
    elseif event == "onRandomMove" then
        map.echo("onRandomMove",true)
        random_move = true
        move_queue = {}
    elseif event == "onForcedMove" then
        map.echo("onForcedMove",true)
        capture_move_cmd(arg[1],arg[2]=="true")
    elseif event == "onNewLine" then
        grab_line()
    elseif event == "sysDataSendRequest" then
        capture_move_cmd(arg[1])
        -- check to prevent multiple version checks in a row without user intervention
        if map.update_waiting and map.update_timer then
            map.update_waiting = nil
        -- check to ensure version check cycle is started
        elseif not map.update_waiting and not map.update_timer then
            map.checkVersion()
        end
    elseif event == "sysDownloadDone" and downloading then
        local file = arg[1]
        if string.ends(file,"/map.dat") then
            loadMap(file)
            downloading = false
            map.echo("Map File Loaded.")
        elseif string.ends(file,"/versions.lua") then
            check_version()
        elseif string.ends(file,"/generic_mapper.xml") then
            update_version()
        end
    elseif event == "sysDownloadError" and downloading then
        local file = arg[1]
        if string.ends(file,"/versions.lua") and mudlet.translations.interfacelanguage == "zh_CN" then
            -- update to the current download path for chinese user
            if map.configs.download_path == "https://raw.githubusercontent.com/Mudlet/Mudlet/development/src/mudlet-lua/lua/generic-mapper" then
                map.configs.download_path = "https://gitee.com/mudlet/Mudlet/raw/development/src/mudlet-lua/lua/generic-mapper"
                map.checkVersion()
            end
        end
    elseif event == "sysLoadEvent" or event == "sysInstall" then
        config()
        raiseEvent("mapperScriptLoaded", "generic_mapper")
    elseif event == "mapOpenEvent" then
        if not help_shown and not map.save.prompt_pattern[map.character or ""] then
            map.find_prompt()
            send(map.configs.lang_dirs['look'], true)
            tempTimer(3, function() map.show_help("quick_start"); help_shown = true end)
        end
    elseif event == "mapStop" then
        map.set("mapping", false)
        walking = false
        map.echo("Mapping and speedwalking stopped.")
    elseif event == "sysManualLocationSetEvent" then
      set_room(arg[1])
    elseif event == "sysUninstallPackage" and not map.updatingMapper and arg[1] == "generic_mapper" then
        for _,id in ipairs(map.registeredEvents) do
            killAnonymousEventHandler(id)
        end
    end
end

map.registeredEvents = {
registerAnonymousEventHandler("sysDownloadDone", "map.eventHandler"),
registerAnonymousEventHandler("sysDownloadError", "map.eventHandler"),
registerAnonymousEventHandler("sysLoadEvent", "map.eventHandler"),
registerAnonymousEventHandler("sysConnectionEvent", "map.eventHandler"),
registerAnonymousEventHandler("sysInstall", "map.eventHandler"),
registerAnonymousEventHandler("sysDataSendRequest", "map.eventHandler"),
registerAnonymousEventHandler("onMoveFail", "map.eventHandler"),
registerAnonymousEventHandler("onVisionFail", "map.eventHandler"),
registerAnonymousEventHandler("onRandomMove", "map.eventHandler"),
registerAnonymousEventHandler("onForcedMove", "map.eventHandler"),
registerAnonymousEventHandler("onNewRoom", "map.eventHandler"),
registerAnonymousEventHandler("onNewLine", "map.eventHandler"),
registerAnonymousEventHandler("mapOpenEvent", "map.eventHandler"),
registerAnonymousEventHandler("mapStop", "map.eventHandler"),
registerAnonymousEventHandler("onPrompt", "map.eventHandler"),
registerAnonymousEventHandler("sysManualLocationSetEvent", "map.eventHandler"),
registerAnonymousEventHandler("sysUninstallPackage", "map.eventHandler")
}


function map.echon(what)
  moveCursorEnd("main") if getCurrentLine() ~= "" then echo"\n" end
  decho("&lt;112,229,0&gt;(&lt;73,149,0&gt;mapper&lt;112,229,0&gt;): &lt;255,255,255&gt;")
  cecho(tostring(what))
end

function map.roomexists(num)
  if not num then return false end
  if roomExists then return roomExists(num) end

  local s,m = pcall(getRoomArea, tonumber(num))
  return (s and true or false)
end

-- translates n to north and so forth
-- should incorporate generic_mappers exit_map, stub_map
local tempDir = {
    n = "north",
    e = "east",
    s = "south",
    w = "west",
    ne = "northeast",
    se = "southeast",
    sw = "southwest",
    nw = "northwest",
    u = "up",
    d = "down",
    i = "in",
    o = "out",
    ["in"] = "in"
}
local anytolongmap = {}
for s, l in pairs(tempDir) do anytolongmap[l] = l; anytolongmap[s] = l end

function map.anytolong(exit)

  return anytolongmap[exit]
end

function map.anytoshort(exit)
  local t = {
    n = "north",
    e = "east",
    s = "south",
    w = "west",
    ne = "northeast",
    se = "southeast",
    sw = "southwest",
    nw = "northwest",
    u = "up",
    d = "down",
    ["in"] = "in",
    out = "out"
  }
  local rt = {}
  for s,l in pairs(t) do
    rt[l] = s; rt[s] = s
  end

  return rt[exit]
end


function map.ranytolong(exit)
  local t = {
    n = "south",
    north = "south",
    e = "west",
    east = "west",
    s = "north",
    south = "north",
    w = "east",
    west = "east",
    ne = "southwest",
    northeast = "southwest",
    se = "northwest",
    southeast = "northwest",
    sw = "northeast",
    southwest = "northeast",
    nw = "southeast",
    northwest = "southeast",
    u = "down",
    up = "down",
    d = "up",
    down = "up",
    i = "out",
    ["in"] = "out",
    o = "in",
    out = "in"
  }

  return t[exit]
end

-- returns nil or the room number relative to this one
function map.relativeroom(from, dir)
  if not map.roomexists(from) then return end

  local exits = getRoomExits(tonumber(from))
  return exits[map.anytolong(dir)]
end

function map.roomFind(query, lines)
  if query:ends('.') then
    query = query:sub(1, -2)
  end
  local defaultLine = 30 -- this could this to a setting instead of a static number
  local result = map.searchRoom(query)
  if lines == 'all' then
    lines = table.size(result)
  end
  lines = (lines ~= '') and tonumber(lines) or defaultLine

  --create a new table (roomsTable) with keys and add areas to the table
  local roomsTable = {}
  for k, v in pairs(result) do
    local a = getRoomArea(k) or "unknown"
    roomsTable[#roomsTable + 1] = {num = k, area = a, name = v}
  end
  --sort roomsTable by area name
  table.sort(
    roomsTable,
    function(a, b)
      return a.area &lt; b.area
    end
  )
  --start displaying info
  if type(result) == "string" or not next(result) then
    cecho("&lt;grey&gt;You have no recollection of any room with that name.")
    return
  end
  cecho("&lt;DarkSlateGrey&gt;You know the following relevant rooms:\n")

  local i = 1
  if not tonumber(select(2, next(result))) then
    cecho(string.format("&lt;white&gt; %-10s%-40s%s\n", "ROOM ID", "ROOM NAME", "ROOM AREA"))
    for _, v in ipairs(roomsTable) do
      if i &gt; lines then
        break
      end
      roomid = tonumber(v.num)
      roomname = v.name
      roomarea = v.area
      cechoLink(
        string.format("&lt;cyan&gt; %-10s", roomid),
        'gotoRoom(' .. roomid .. ')',
        string.format("Go to %s (%s)", roomid, tostring(roomname)),
        true
      )
      cecho(string.format("&lt;LightSlateGray&gt;%-40s", string.sub(tostring(roomname), 1, 39)))
      cechoLink(
        string.format(
          "&lt;DarkSlateGrey&gt;%s&lt;DarkSlateGrey&gt;\n", getRoomAreaName(getRoomArea(roomid))
        ),
        [[map.echoPath(map.currentRoom, ]] .. roomid .. [[)]],
        "Display directions from here to " .. roomname,
        true
      )
      resetFormat()
      i = i + 1
    end
  else
    -- new style
    --- not sure what this new area code is but it doesn't seem to fire
    for roomname, roomid in pairs(result) do
      roomid = tonumber(roomid)
      cecho(string.format("  &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt; (", tostring(roomname)))
      cechoLink(
        "&lt;cyan&gt;" .. roomid,
        'gotoRoom(' .. roomid .. ')',
        string.format("Go to %s (%s)", roomid, tostring(roomname)),
        true
      )
      cecho(
        string.format(
          "&lt;DarkSlateGrey&gt;) in &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt;.", getRoomAreaName(getRoomArea(roomid))
        )
      )
      fg("DarkSlateGrey")
      echoLink(
        " &gt; Show path\n",
        [[map.echoPath(map.currentRoom, ]] .. roomid .. [[)]],
        "Display directions from here to " .. roomname,
        true
      )
      resetFormat()
    end
  end
  if table.size(result) &lt;= lines then
    cecho(string.format("&lt;DarkSlateGrey&gt;%d rooms found.\n", table.size(result)))
  else
    lastRoomQuery = query
    cechoLink(
      string.format(
        "&lt;DarkSlateGrey&gt;%d of %d rooms shown. Click to see all rooms.\n", lines, table.size(result)
      ),
      'map.roomFind(lastRoomQuery, "all")',
      string.format("Show all %d rooms.", table.size(result)),
      true
    )
  end
end

function map.searchRoom(what)
  local result = searchRoom(what)
  local realResult = {}
  for key, value in pairs(type(result) == "table" and result or {}) do
      -- both ways, because searchRoom can return either id-room name or the reverse
      if type(key) == "string" then
        realResult[key:ends(" (road)") and key:sub(1, -8) or key] = value
      else
        realResult[key] = value:ends(" (road)") and value:sub(1, -8) or value
      end
  end
  result = realResult
  return result
end


-- Lock Area

map.locked = map.locked or {}
map.lastLockSearch = map.lastLockSearch or nil

function map.doLockArea(search)
	local areaList
	if search ~= nil then
		local r = rex.new(string.lower(search))
		map.lastLockSearch = search
		for name, id in pairs(getAreaTable()) do
			if r:match(string.lower(name)) then
				areaList = areaList or {}
				areaList[name] = id
			end
		end
		if areaList == nil then
			map.echo("'" .. search .. "' did not match any known areas!")
			return
		end
	else
		map.lastLockSearch = nil
		areaList = getAreaTable()
	end

	for name, id in pairs(areaList) do
    map.echon(string.format("%-40s %s", name, " "))
--		map.echon(name .. string.rep(" ", 40 - string.len(name)))
		if not map.locked[id] then
			setFgColor(0, 200, 0)
			setUnderline(true)
			echoLink("Lock!", [[map.lockArea( ']] .. name:gsub("'", [[\']]) .. [[', true )]], "Click to lock area '" .. name .. "'", true)
		else
			setFgColor(200, 0, 0)
			setUnderline(true)
			echoLink("Unlock!", [[map.lockArea( ']] .. name:gsub("'", [[\']]) .. [[', false )]], "Click to unlock area '" .. name .. "'", true)
		end
	end

	if not search then
		echo"\n\n" map.echo("Use &lt;green&gt;arealock &lt;area&gt;&lt;white&gt; to filter areas.")
	end
end

function map.lockArea(name, lock, dontreshow)
	local areas = getAreaTable()
	local rooms = getAreaRooms(areas[name]) or {}
    local lockRoom = lockRoom
    local count = 0
	for _, room in pairs(rooms) do
		lockRoom(room, lock)
        count = count + 1
	end

	map.locked[areas[name]] = lock and true or nil
	map.echo(string.format("Area '%s' %slocked! All %s room%s within it.", name, (lock and '' or 'un'), count, (count == 1 and '' or 's')))

	if not dontreshow then map.doLockArea(map.lastLockSearch) end
end


function map.roomLook(input)
  -- we can do a report with a number

  local function handle_number(num)
    -- compile all available data
    if not map.roomexists(num) then
      map.echo(num .. " doesn't seem to exist.")
      return
    end
    local s, areanum = pcall(getRoomArea, num)
    if not s then
      map.echo(areanum);
      return ;
    end
    local exits = getRoomExits(num)
    local name = getRoomName(num)
    local islocked = roomLocked(num)
    local weight = (getRoomWeight(num) and getRoomWeight(num) or "?")
    -- getRoomWeight is buggy in one of the versions, is actually linked to setRoomWeight and thus returns nil
    local exitweights = (getExitWeights and getExitWeights(num) or {})
    local coords = {getRoomCoordinates(num)}
    local specexits = getSpecialExits(num)
    local env = getRoomEnv(num)
    -- generic_mapper doesn't have support for environments like IRE_mapper
    local envname = (map.envidsr and map.envidsr[env]) or "?"
    -- generate a report
    map.echo(
      string.format(
        "Room: %s #: %d area: %s (%d)", name, num, getRoomAreaName(areanum), areanum
      )
    )
    map.echo(
      string.format(
        "Coordinates: x:%d, y:%d, z:%d, locked: %s, weight: %s",
        coords[1],
        coords[2],
        coords[3],
        (islocked and "yes" or "no"),
        tostring(weight)
      )
    )
    map.echo(
      string.format(
        "Environment: %s (%d)%s",
        tostring(envname),
        env,
        (getRoomUserData(num, "indoors") ~= '' and ", indoors" or '')
      )
    )
    map.echo(string.format("Exits (%d):", table.size(exits)))
    for exit, leadsto in pairs(exits) do
      echo(
        string.format(
          "  %s -&gt; %s (%d)%s%s\n",
          exit,
          getRoomName(leadsto),
          leadsto,
          (
            (getRoomArea(leadsto) or "?") == areanum and
            "" or
            " (in " ..
            (getRoomAreaName(getRoomArea(leadsto)) or "?") ..
            ")"
          ),
          (
            (not exitweights[map.anytoshort(exit)] or exitweights[map.anytoshort(exit)] == 0) and
            "" or
            " (weight: " ..
            exitweights[map.anytoshort(exit)] ..
            ")"
          )
        )
      )
    end
    -- display special exits if we got any
    if next(specexits) then
      map.echo(string.format("Special exits (%d):", table.size(specexits)))
      for leadsto, command in pairs(specexits) do
        if type(command) == "string" then
          echo(string.format("  %s -&gt; %s (%d)\n", command, getRoomName(leadsto), leadsto))
        else
          -- new format - exit name, command
          for cmd, locked in pairs(command) do
            if locked == '1' then
              cecho(
                string.format(
                  "&lt;DarkSlateGrey&gt;  %s -&gt; %s (%d) (locked)\n", cmd, getRoomName(leadsto), leadsto
                )
              )
            else
              echo(string.format("  %s -&gt; %s (%d)\n", cmd, getRoomName(leadsto), leadsto))
            end
          end
        end
      end
    end
    local message = "This room has the feature '%s'."
    for _, mapFeature in pairs(map.getRoomMapFeatures(num)) do
      map.echo(string.format(message, mapFeature))
    end
    -- actions we can do. This will be a short menu of sorts for actions
    map.echo("Stuff you can do:")
    echo("  ")
    echo("Clear all labels ")
    setUnderline(true)
    echoLink("(in area)", 'map.clearLabels(' .. areanum .. ')', '', true)
    setUnderline(false)
    echo(" ")
    setUnderline(true)
    echoLink(
      "(whole map)",
      [[
    if not map.clearinglabels then
      map.echo("Are you sure you want to clear all of your labels on this map? If yes, click the link again.")
      map.clearinglabels = true
    else
      map.clearLabels("map")
      map.clearinglabels = nil
    end
    ]],
      '',
      true
    )
    setUnderline(false)
    echo("\n")
  end

  -- see if we can do anything with the name

  local function handle_name(name)
    local result = map.searchRoom(name)
    if type(result) == "string" then
      cecho("&lt;grey&gt;You have no recollection of any room with that name.")
      return
    end
    -- if we got one result, then act on it
    if table.size(result) == 1 then
      if type(next(result)) == "number" then
        handle_number(next(result))
      else
        handle_number(select(2, next(result)))
      end
      return
    end
    -- if not, then ask the user to clarify which one would they want
    map.echo("Which room specifically would you like to look up?")
    if not select(2, next(result)) or not tonumber(select(2, next(result))) then
      for roomid, roomname in pairs(result) do
        roomid = tonumber(roomid)
        cecho(string.format("  &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt; (", tostring(roomname)))
        cechoLink(
          "&lt;cyan&gt;" .. roomid,
          'map.roomLook(' .. roomid .. ')',
          string.format("View room details for %s (%s)", roomid, tostring(roomname)),
          true
        )
        cecho(
          string.format(
            "&lt;DarkSlateGrey&gt;) in the &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt;.\n",
            getRoomAreaName(getRoomArea(roomid))
          )
        )
      end
    else
      for roomname, roomid in pairs(result) do
        roomid = tonumber(roomid)
        cecho(string.format("  &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt; (", tostring(roomname)))
        cechoLink(
          "&lt;cyan&gt;" .. roomid,
          'map.roomLook(' .. roomid .. ')',
          string.format("View room details for %s (%s)", roomid, tostring(roomname)),
          true
        )
        cecho(
          string.format(
            "&lt;DarkSlateGrey&gt;) in the &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt;.\n",
            getRoomAreaName(getRoomArea(roomid))
          )
        )
      end
    end
  end

  if not input then
    if not map.roomexists(map.currentRoom) then
      map.echo(map.currentRoom .. " doesn't seem to be mapped yet.")
      echo("\n")
      map.echo(string.format("version %s.", tostring(map.version)))
      return
    else
      input = map.currentRoom
    end
  end
  if tonumber(input) then
    handle_number(tonumber(input))
  else
    handle_name(input)
  end
  map.echo(string.format("version %s.", tostring(map.version)))
end


local function loadMapFeatures()
  local mapFeaturesString = getMapUserData("mapFeatures")
  local mapFeatures
  if mapFeaturesString and mapFeaturesString ~= "" then
    mapFeatures = yajl.to_value(mapFeaturesString)
  else
    mapFeatures = {}
  end
  return mapFeatures
end

local function saveMapFeatures(mapFeaturesToSave)
  local mapFeaturesString = yajl.to_string(mapFeaturesToSave)
  setMapUserData("mapFeatures", mapFeaturesString)
end

function map.createMapFeature(featureName, roomCharacter)
  if not featureName or featureName == "" then
    map.echo("Can't create an empty map feature.")
    return
  end
  if featureName:find("%d") then
    map.echo("Map feature names must not contain numbers.")
    return
  end
  roomCharacter = roomCharacter or ""
  if type(roomCharacter) ~= "string" then
    map.echo(
      "The new room character must be either a string or nil. " ..
      type(roomCharacter) ..
      " is not allowed."
    )
    return
  end
  local lowerFeatureName = featureName:lower()
  local mapFeatures = loadMapFeatures()
  if not mapFeatures[lowerFeatureName] then
    mapFeatures[lowerFeatureName] = roomCharacter
    saveMapFeatures(mapFeatures)
    map.echo(
      "Created map feature '" ..
      featureName ..
      "' with the room character '" ..
      roomCharacter ..
      "'."
    )
  else
    map.echo("A map feature with the name '" .. featureName .. "' already exists.")
    return
  end
  return true
end

function map.listMapFeatures()
  local mapFeatures = loadMapFeatures()
  map.echo("This map has the following features:")
  echo(string.format("    %-25s | %s\n", "feature name", "room character"))
  echo(string.format("    ---------------------------------------------\n"))
--  echo(string.format("    %s\n", string.rep("-", 45)))
  for featureName, roomCharacter in pairs(mapFeatures) do
    echo(string.format("    %-25s | %s\n", featureName, roomCharacter))
  end
  return true
end

function map.roomCreateMapFeature(featureName, roomId)
  -- checks for the feature name
  if not featureName then
    map.echo("Which feature would you like to create?")
    return
  end
  local lowerFeatureName = featureName:lower()
  local mapFeatures = loadMapFeatures()
  if not mapFeatures[lowerFeatureName] then
    map.echo(
      "A feature with name '" ..
      featureName ..
      "' does not exist. You need to use 'feature create' first."
    )
    return
  end
  -- checks for the room ID
  if not roomId then
    if not map.currentRoom then
      map.echo("Don't know where we are at the moment.")
      return
    end
    roomId = map.currentRoom
  else
    if type(roomId) ~= "number" then
      map.echo("Need a room ID as number for creating a map feature on a room.")
      return
    end
  end
  if not getRoomName(roomId) then
    map.echo("Room number '" .. roomId .. "' does not exist.")
    return
  end
  -- check if feature already exists
  if table.contains(map.getRoomMapFeatures(roomId), lowerFeatureName) then
    map.echo("Room '" .. roomId .. "' has already map feature '" .. featureName .. "'.")
    return
  end
  -- create map feature in room
  setRoomUserData(roomId, "feature-" .. lowerFeatureName, "true")
  map.echo(string.format("Map feature '%s' created in room number '%d'.", featureName, roomId))
  local featureRoomChar = mapFeatures[lowerFeatureName]
  if featureRoomChar ~= "" then
    setRoomChar(roomId, featureRoomChar)
    map.echo("The room now carries the room char '" .. featureRoomChar .. "'.")
  end
  return true
end

function map.roomDeleteMapFeature(featureName, roomId)
  -- checks for the feature name
  if not featureName then
    map.echo("Which feature would you like to delete?")
    return
  end
  local lowerFeatureName = featureName:lower()
  -- checks for the room ID
  if not roomId then
    if not map.currentRoom then
      map.echo("Don't know where we are at the moment.")
      return
    end
    roomId = map.currentroom
  else
    if type(roomId) ~= "number" then
      map.echo("Need a room ID as number for deleting a map feature from a room.")
      return
    end
  end
  if not getRoomName(roomId) then
    map.echo("Room number '" .. roomId .. "' does not exist.")
    return
  end
  -- check if feature exists
  local roomMapFeatures = map.getRoomMapFeatures(roomId)
  if not table.contains(roomMapFeatures, lowerFeatureName) then
    map.echo("Room '" .. roomId .. "' doesn't have map feature '" .. featureName .. "'.")
    return
  end
  -- delete map feature from room
  setRoomUserData(roomId, "feature-" .. lowerFeatureName, "")
  map.echo(string.format("Map feature '%s' deleted from room number '%d'.", featureName, roomId))
  -- now update room char if needed.
  -- first update current map features of this room
  roomMapFeatures = map.getRoomMapFeatures(roomId)
  local mapFeatures = loadMapFeatures()
  -- find out if we need to set a new room character
  if getRoomChar(roomId) == mapFeatures[lowerFeatureName] and getRoomChar(roomId) ~= "" then
    local index, otherRoomMapFeature
    -- find another usable room character
    repeat
      index, otherRoomMapFeature = next(roomMapFeatures, index)
    until not otherRoomMapFeature or mapFeatures[otherRoomMapFeature] ~= ""
    if otherRoomMapFeature then
      -- we found a usable room character, now set it
      local newRoomChar = mapFeatures[otherRoomMapFeature]
      setRoomChar(roomId, newRoomChar)
      map.echo("Using '" .. newRoomChar .. "' as new room character.")
    else
      -- we didn't find a usable room character, delete it.
      setRoomChar(roomId, "")
      map.echo("Deleted the current room character.")
    end
  end
  return true
end

function map.getRoomMapFeatures(roomId)
  -- checks for the room ID
  if not roomId then
    if not map.currentRoom then
      map.echo("Don't know where we are at the moment.")
      return
    end
    roomId = map.currentRoom
  else
    if type(roomId) ~= "number" then
      map.echo("Need a room ID as number for getting all map features of a room.")
      return
    end
  end
  if not getRoomName(roomId) then
    map.echo("Room number '" .. roomId .. "' does not exist.")
    return
  end
  local result = {}
  local mapFeatures = loadMapFeatures()
  for mapFeature in pairs(mapFeatures) do
    if getRoomUserData(roomId, "feature-" .. mapFeature) == "true" then
      result[#result + 1] = mapFeature
    end
  end
  return result
end

function map.deleteMapFeature(featureName)
  if not featureName or featureName == "" then
    map.echo("Which map feature would you like to delete?")
    return
  end
  local lowerFeatureName = featureName:lower()
  local mapFeatures = loadMapFeatures()
  if not mapFeatures[lowerFeatureName] then
    map.echo("Map feature '" .. featureName .. "' does not exist.")
    return
  end
  local roomsWithFeature = searchRoomUserData("feature-" .. lowerFeatureName, "true")
  for _, roomId in pairs(roomsWithFeature) do
    local deletionResult = map.roomDeleteMapFeature(lowerFeatureName, roomId)
    if not deletionResult then
      map.echo(
        "Something went wrong deleting the map feature '" ..
        featureName ..
        "' from all rooms. Deletion incomplete."
      )
      return
    end
  end
  mapFeatures[lowerFeatureName] = nil
  saveMapFeatures(mapFeatures)
  map.echo("Deleted map feature '" .. featureName .. "' from map.")
  return true
end

function map.getMapFeatures()
  return loadMapFeatures()
end


function map.echoPath(from, to)
  assert(tonumber(from) and tonumber(to), "map.echoPath: both from and to have to be room IDs")
  if getPath(from, to) then
    map.echo(
      "&lt;white&gt;Directions from &lt;yellow&gt;" ..
      string.upper(searchRoom(from)) ..
      " &lt;white&gt;to &lt;yellow&gt;" ..
      string.upper(searchRoom(to)) ..
      "&lt;white&gt;:"
    )
    map.echo(table.concat(speedWalkDir, ", "))
    return map.speedWalkDir
  else
    map.echo(
      "&lt;white&gt;I can't find a way from &lt;yellow&gt;" ..
      string.upper(searchRoom(from)) ..
      " &lt;white&gt;to &lt;yellow&gt;" ..
      string.upper(searchRoom(to)) ..
      "&lt;white&gt;"
    )
  end
end


function map.listSpecialExits(filter)
  local c = 0
  map.echo("Listing special exits...")
  for area, areaname in pairs(getAreaTableSwap()) do
    local rooms = getAreaRooms(area) or {}
    for i = 0, #rooms do
      local exits = getSpecialExits(rooms[i] or 0)
      if exits and next(exits) then
        for exit, cmd in pairs(exits) do
          if type(cmd) == "table" then
            cmd = next(cmd)
          end
          if cmd:match("^%d") then
            cmd = cmd:sub(2)
          end
          if not filter or cmd:lower():find(filter, 1, true) then
            if getRoomArea(exit) ~= area then
              cecho(
                string.format(
                  "&lt;dark_slate_grey&gt;%s &lt;LightSlateGray&gt;(%d, in %s)&lt;dark_slate_grey&gt; &lt;MediumSlateBlue&gt;-&gt; &lt;coral&gt;%s -&lt;MediumSlateBlue&gt;&gt;&lt;dark_slate_grey&gt; %s &lt;LightSlateGray&gt;(%d, in %s)\n",
                  getRoomName(rooms[i]),
                  rooms[i],
                  areaname,
                  cmd,
                  getRoomName(exit),
                  exit,
                  getRoomAreaName(getRoomArea(exit)) or '?'
                )
              )
            else
              cecho(
                string.format(
                  "&lt;dark_slate_grey&gt;%s &lt;LightSlateGray&gt;(%d)&lt;dark_slate_grey&gt; &lt;MediumSlateBlue&gt;-&gt; &lt;coral&gt;%s &lt;MediumSlateBlue&gt;-&gt;&lt;dark_slate_grey&gt; %s &lt;LightSlateGray&gt;(%d)&lt;dark_slate_grey&gt; in %s\n",
                  getRoomName(rooms[i]),
                  rooms[i],
                  cmd,
                  getRoomName(exit),
                  exit,
                  areaname
                )
              )
            end
            c = c + 1
          end
        end
      end
    end
  end
  map.echo(
    string.format(
      "%d exits listed%s.", c, (not filter and '' or ", with for the filter '" .. filter .. "'")
    )
  )
end

function map.delSpecialExits(filter)
  local c = 0
  for area, areaname in pairs(getAreaTableSwap()) do
    local rooms = getAreaRooms(area) or {}
    for i = 0, #rooms do
      local exits = getSpecialExits(rooms[i] or 0)
      if exits and next(exits) then
        for exit, cmd in pairs(exits) do
          if type(cmd) == "table" then
            cmd = next(cmd)
          end
          if cmd:match("^%d") then
            cmd = cmd:sub(2)
          end
          if not filter or cmd:lower():find(filter, 1, true) then
            local rid, action
            local originalExits = {}
            local e = getSpecialExits(rooms[i])
            for t, n in pairs(e) do
              rid = tonumber(t)
              for a, l in pairs(n) do
                action = tostring(a)
              end
              if not action:find(filter, 1, true) then
                originalExits[rid] = action
              end
            end
            clearSpecialExits(rooms[i])
            for rid, act in pairs(originalExits) do
              addSpecialExit(rooms[i], tonumber(rid), tostring(act))
            end
            c = c + 1
          end
        end
      end
    end
  end
  map.echo(
    string.format(
      "%d exits deleted%s.", c, (not filter and '' or ", with for the filter '" .. filter .. "'")
    )
  )
end


do
local oldsetExit = setExit

local exitmap = {
  n = 1,
  north = 1,
  ne = 2,
  northeast = 2,
  nw = 3,
  northwest = 3,
  e = 4,
  east = 4,
  w = 5,
  west = 5,
  s = 6,
  south = 6,
  se = 7,
  southeast = 7,
  sw = 8,
  southwest = 8,
  u = 9,
  up = 9,
  d = 10,
  down = 10,
  ["in"] = 11,
  out = 12
}

function map.setExit(from, to, direction)
  if type(direction) == "string" and not exitmap[direction] then return false end

  return oldsetExit(from, to, type(direction) == "string" and exitmap[direction] or direction)
end
end


function map.deleteArea(name, exact)
  local id, fname, ma = map.findAreaID(name, exact)
  if id then
    map.doareadelete(id)
  elseif next(ma) then
    map.echo("Which one of these specifically would you like to delete?")
    fg("DimGrey")
    for _, name in ipairs(ma) do
      echo("  ")
      setUnderline(true)
      echoLink(name, [[map.deleteArea("]] .. name .. [[", true)]], "Delete " .. name, true)
      setUnderline(false)
      echo("\n")
    end
    resetFormat()
  else
    map.echo("Don't know of that area.")
  end
end

-- the function actually doing area deletion

function map.doareadelete(areaid)
  map.deletingarea = {}
  local t = map.deletingarea
  local rooms = getAreaRooms(areaid)
  t.roomcount = table.size(rooms)
  t.roombatches = {}
  t.currentbatch = 1
  t.areaid = areaid
  t.areaname = getAreaTableSwap()[areaid]
  -- delete the area right away if there's nothing in it
  if t.roomcount == 0 then
    deleteArea(t.areaid)
    map.echo("All done! The area was already gone/empty.")
  end
  local rooms_per_batch = 100
  -- split up rooms into tables of tables, to be deleted in batches so
  -- that our print statements in between get a chance to be processed
  for batch = 1, t.roomcount, 100 do
    t.roombatches[#t.roombatches + 1] = {}
    local onebatch = t.roombatches[#t.roombatches]
    for inbatch = 1, 100 do
      onebatch[#onebatch + 1] = rooms[batch + inbatch]
    end
  end

  function map.deletenextbatch()
    local t = map.deletingarea
    if not t then
      return
    end
    local currentbatch = t.roombatches[t.currentbatchi]
    if currentbatch == nil then
      deleteArea(t.areaid)
      map.echo("All done! Deleted the '" .. t.areaname .. "' area.")
      map.deletingarea = nil
      centerview(map.currentRoom)
      return
    end
    local deleteRoom = deleteRoom
    for i = 1, #currentbatch do
      deleteRoom(currentbatch[i])
    end
    map.echo(
      string.format(
        "Deleted %d batch%s so far, %d left to go - %.2f%% done out of %d needed",
        t.currentbatchi,
        (t.currentbatchi == 1 and '' or 'es'),
        #t.roombatches - t.currentbatchi,
        (100 / #t.roombatches) * t.currentbatchi,
        #t.roombatches
      )
    )
    t.currentbatchi = t.currentbatchi + 1
    tempTimer(0.010, map.deletenextbatch)
  end

  t.currentbatchi = 1
  map.echo("Prepped room batches, starting deletion...")
  tempTimer(0.010, map.deletenextbatch)
end

function map.renameArea(name, exact)
  if not (map.currentroom or getRoomArea(map.currentRoom)) then
    map.echo("Don't know what area are we in at the moment, to rename it.")
  else
    map.echo(
      string.format(
        "Renamed %s to %s (%d).",
        getRoomAreaName(getRoomArea(map.currentRoom)),
        name,
        getRoomArea(map.currentRoom)
      )
    )
    setAreaName(getRoomArea(map.currentRoom), name)			
    centerview(map.currentRoom)
  end
end

function map.roomArea(otherroom, name, exact)
  local id, fname, ma
  if tonumber(name) then
    id = tonumber(name);
    fname = getAreaTableSwap()[id]
  else
    id, fname, ma = map.findAreaID(name, exact)
  end
  if fname == nil then
    map.echo("Area unknown, can't move room.")
    return
  end
  if otherroom ~= "" and not map.roomexists(otherroom) then
    map.echo("Room id " .. otherroom .. " doesn't seem to exist.")
    return
  elseif otherroom == "" and not map.roomexists(map.currentRoom) then
    map.echo("Don't know where we are at the moment.")
    return
  end
  otherroom = otherroom ~= "" and otherroom or map.currentRoom
  if id then
    setRoomArea(otherroom, id)
    map.echo(
      string.format(
        "Moved %s to %s (%d).",
        (getRoomName(otherroom) ~= "" and getRoomName(otherroom) or "''"),
        fname,
        id
      )
    )
    centerview(otherroom)
  elseif next(ma) then
    map.echo("Into which area exactly would you like to move the room?")
    fg("DimGrey")
    for _, name in ipairs(ma) do
      echo("  ")
      setUnderline(true)
      echoLink(
        name, [[map.roomArea('', "]] .. name .. [[", true)]], "Move the room to " .. name, true
      )
      setUnderline(false)
      echo("\n")
    end
    resetFormat()
  else
    map.echo("Don't know of that area.")
  end
end


function map.clearLabels(areaid)
  local function clearlabels(areaid)
    local t = getMapLabels(areaid)
    if type(t) ~= "table" then
      return
    end
    for labelid, _ in pairs(t) do
      deleteMapLabel(areaid, labelid)
    end
  end

  if areaid == "map" then
    for areaid in pairs(getAreaTableSwap()) do
      clearlabels(areaid)
    end
    map.echo("Cleared labels in all of the map.")
    return
  end
  clearlabels(areaid)
  map.echo(string.format("Cleared all labels in '%s'.", map.getAreaTableSwap()[areaid]))
end

function map.roomLabel(input)
  if not createMapLabel then
    map.echo(
      "Your Mudlet doesn't support createMapLabel() yet - please update to 2.0-test3 or better."
    )
    return
  end
  local tk = input:split(" ")
  local room, fg, bg, message = map.currentRoom, "yellow", "red", "Some room label"
  -- input always have to be something, so tk[1] at least always exists
  if tonumber(tk[1]) then
    room = tonumber(table.remove(tk, 1))
    -- remove the number, so we're left with the colors or msg
  end
  -- next: is this a foreground color?
  if tk[1] and color_table[tk[1]] then
    fg = table.remove(tk, 1)
  end
  -- next: is this a background color?
  if tk[1] and color_table[tk[1]] then
    bg = table.remove(tk, 1)
  end
  -- the rest would be our message
  if tk[1] then
    message = table.concat(tk, " ")
  end
  -- if we haven't provided a room ID and we don't know where we are yet, we can't make a label
  if not room then
    map.echo("We don't know where we are to make a label here.")
    return
  end
  local x, y, z = getRoomCoordinates(room)
  local f1, f2, f3 = unpack(color_table[fg])
  local b1, b2, b3 = unpack(color_table[bg])
  -- finally: do it :)
  local lid = createMapLabel(getRoomArea(room), message, x, y, z, f1, f2, f3, b1, b2, b3)
  map.echo(
    string.format(
      "Created new label #%d '%s' in %s.", lid, message, getRoomAreaName(getRoomArea(room))
    )
  )
end

function map.areaLabels(where, exact)
  if not getMapLabels then
    map.echo(
      "Your Mudlet doesn't support getMapLabels() yet - please update to 2.0-test3 or better."
    )
    return
  end
  if (not where or not type(where) == "string") and not map.currentRoom then
    map.echo("For which area would you like to view labels?")
    return
  end
  if not where then
    exact = true
    where = getRoomAreaName(getRoomArea(map.currentRoom))
  end
  local areaid, msg, multiples = map.findAreaID(where, exact)
  if areaid then
    local t = getMapLabels(areaid)
    if type(t) ~= "table" or not next(t) then
      map.echo(string.format("'%s' doesn't seem to have any labels.", getRoomAreaName(areaid)))
      return
    end
    map.echo(string.format("Area labels for '%s'", getRoomAreaName(areaid)))
    for labelid, labeltext in pairs(t) do
      fg("DimGrey")
      echo(string.format("  %d) %s (", labelid, labeltext))
      fg("orange_red")
      setUnderline(true)
      echoLink(
        'delete',
        string.format(
          'deleteMapLabel(%d, %d); map.echo("Deleted label #' .. labelid .. '")', areaid, labelid
        ),
        "Delete label #" .. labelid .. " from " .. getRoomAreaName(areaid)
      )
      setUnderline(false)
      echo(")\n")
    end
    resetFormat()
  elseif not areaid and #multiples &gt; 0 then
    map.echo("Which area would you like to view exactly?")
    fg("DimGrey")
    for _, areaname in ipairs(multiples) do
      echo("  ");
      setUnderline(true)
      echoLink(
        areaname,
        'map.areaLabels("' .. areaname .. '", true)',
        "Click to view labels in " .. areaname,
        true
      )
      setUnderline(false)
      echo("\n")
    end
    resetFormat()
    return
  else
    map.echo(string.format("Don't know of any area named '%s'.", where))
    return
  end
end

</script>
					<eventHandlerList />
				</Script>
			</ScriptGroup>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>generic_mapper</name>
			<packageName>generic_mapper</packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>Map Script</name>
				<packageName></packageName>
				<script>-- Jor'Mox's Generic Map Script
-- the script self-updates, changing this value will bring an update to all installations
-- make sure versions.lua has the latest version in it
local version = "2.1.8"

    -- look into options for non-standard door usage for speedwalk
    -- come up with aliases to set translations and custom exits, add appropriate help info

mudlet = mudlet or {}
mudlet.mapper_script = true
map = map or {}

map.help = {[[
    &lt;cyan&gt;Generic Map Script&lt;reset&gt;

    This script allows for semi-automatic mapping using the included triggers.
    While different games can have dramatically different ways of displaying
    information, some effort has been put into giving the script a wide range of
    potential patterns to look for, so that it can work with minimal effort in
    many cases. The script locates the room name by searching up from the
    detected exits line until a prompt is found or it runs out of text to
    search, clearing saved text each time a prompt is detected or a movement
    command is sent, with the room name being set to the last line of text
    found. An accurate prompt pattern is necessary for this to work well, and
    sometimes other text can end up being shown between the prompt and the room
    name, or on the same line as the room name, which can be handled by
    providing appropriate patterns telling the script to ignore that text. Below
    is an overview of the included commands and important events that this
    script uses to work. Additional information on each command or event is
    available in individual help files.

    &lt;cyan&gt;Fundamental Commands:&lt;reset&gt;
        These are commands used to get the mapper functional on a basic level.

        &lt;link: show&gt;map show&lt;/link&gt; - Displays or hides a map window.
        &lt;link: quick start&gt;map basics&lt;/link&gt; - Shows a quick-start guide with some basic information to
            help get the script working.
        &lt;link: 1&gt;map help [command name]&lt;/link&gt; - Shows either this help file or the help file for the
            command given.
        &lt;link: find prompt&gt;find prompt&lt;/link&gt; - Instructs the script to look for a prompt that matches
            a known pattern.
        &lt;link: prompt&gt;map prompt &lt;pattern&gt;&lt;/link&gt; - Provides a specific pattern to the script that
            matches your prompt, uses &lt;urllink: https://www.lua.org/pil/20.2.html&gt;Lua string-library patterns&lt;/urllink&gt;.
        &lt;link: ignore&gt;map ignore &lt;pattern&gt;&lt;/link&gt; - Provides a specific pattern for the script to
            ignore, uses &lt;urllink: https://www.lua.org/pil/20.2.html&gt;Lua string-library patterns&lt;/urllink&gt;.
        &lt;link: movemethod&gt;map movemethod &lt;word&gt;&lt;/link&gt; - Adds a movement method for the script to
            look for when mapping.
        &lt;link: debug&gt;map debug&lt;/link&gt; - Toggles on debug mode, in which extra messages are shown with
            the intent of assisting in troubleshooting getting the script setup.
        &lt;link: me&gt;map me&lt;/link&gt; - Locates the user on the map, if possible.
        &lt;link: path&gt;map path &lt;room name&gt; [; area name]&lt;/link&gt; - Finds a walking path to the named
            room, in the named area if specified.
        &lt;link: character&gt;map character &lt;name&gt;&lt;/link&gt; - Sets a given name as the current character for
            the purposes of the script, used for different prompt patterns and
            recall locations.
        &lt;link: recall&gt;map recall&lt;/link&gt; - Sets the current room as the recall location of the
            current character
        &lt;link: config&gt;map config &lt;configuration&gt; [value]&lt;/link&gt; - Sets or toggles the given
            configuration either turning it on or off, if no value is given, or sets it to the given
            value.
        &lt;link: window&gt;map window &lt;configuration&gt; [value]&lt;/link&gt; - Sets the given configuration for the
            map window to the given value.
        &lt;link: translate&gt;map translate &lt;english direction&gt; &lt;translated long direction&gt;&lt;/link&gt;
        &lt;link: translate&gt;&lt;translated short direction&gt;&lt;/link&gt; - Sets the provided translations for the
            given english direction word.

    &lt;cyan&gt;Map Information Commands:&lt;reset&gt;
        These commands show detailed information about your current map.

        &lt;link: areas&gt;map areas&lt;/link&gt; - Shows a list of all areas, with links to show a list of
            rooms in the area.
        &lt;link: rooms&gt;map rooms &lt;area name&gt;&lt;/link&gt; - Shows a list of rooms in the named area.
        &lt;link: room_find&gt;room find|rf &lt;room name&gt;&lt;/link&gt; - Searches for a room of a given name.
        &lt;link: room_look&gt;room look|rl [roomID]&lt;/link&gt; - Displays detailed information about a room.
        &lt;link: showpath&gt;showpath &lt;roomID&gt;&lt;/link&gt; - Shows you a path from your current location to the
            roomID.
        &lt;link: showpath&gt;showpath &lt;fromID&gt; &lt;toID&gt;&lt;/link&gt; - Shows you a path from a given location to
            another location.
        &lt;link: spe_list&gt;spe list [filter]&lt;/link&gt; - Display a list of all known special exits.
        &lt;link: feature_list&gt;feature list&lt;/link&gt; - Lists all map features created via feature create and
            the associated room characters.

    &lt;cyan&gt;Map Creation Commands:&lt;reset&gt;
        These are commands used in the process of actually creating a map.

        &lt;link: start mapping&gt;start mapping [area name]&lt;/link&gt; - Starts adding content to the map, using
            either the area of the room the user is currently in or the area
            name provided.
        &lt;link: stop mapping&gt;stop mapping&lt;/link&gt; - Stops adding content to the map.
        &lt;link: area_add&gt;area add &lt;area name&gt;&lt;/link&gt; - Creates a new area.
        &lt;link: area_delete&gt;area delete &lt;area name&gt;&lt;/link&gt; - Deletes a given area and all rooms within.
        &lt;link: area_cancel&gt;cancel area deletion&lt;/link&gt; - Pauses deletion of an area.  This will NOT
            restore delete rooms.
        &lt;link: area_rename&gt;area rename &lt;new area name&gt;&lt;/link&gt; - Renames the current area you're in.
        &lt;link: set area&gt;set area &lt;area name&gt;&lt;/link&gt; - Moves the current room to the named area.
        &lt;link: mode&gt;map mode &lt;lazy, simple, normal or complex&gt;&lt;/link&gt; - Sets the mapping mode, which
            defines how new rooms are added to the map.
        &lt;link: add door&gt;add door &lt;direction&gt; [door status] [one way]&lt;/link&gt; - Creates a door in
            the given direction, with the given status(default closed), in both
            directions, unless a one-direction door is specified.
        &lt;link: add portal&gt;add portal [-f] &lt;entry command&gt;&lt;/link&gt; - Creates a portal in the current room,
            using the given command for entry.
        &lt;link: shift&gt;shift &lt;direction&gt;&lt;/link&gt; - Moves the current room on the map in the given direction.
        &lt;link: merge rooms&gt;merge rooms&lt;/link&gt; - Combines overlapping rooms that have the same name into
            a single room.
        &lt;link: clear moves&gt;clear moves&lt;/link&gt; - Clears the list of movement commands maintained by the
            script.
        &lt;link: set exit&gt;set exit &lt;direction&gt; &lt;roomID&gt;&lt;/link&gt; - Creates a one-way exit in the given
            direction to the room with the specified roomID, can also be used with portals.
        &lt;link: arealock&gt;arealock [area name]&lt;/link&gt; - Displays a list of areas you can lock/unlock.
        &lt;link: room_coords&gt;room coords|rc [v&lt;roomID&gt;] &lt;x&gt; &lt;y&gt; &lt;z&gt;&lt;/link&gt; - Move a room to new map coordinates.
        &lt;link: room_delete&gt;room delete|rld &lt;direction|roomID&gt;&lt;/link&gt; - Delete a room given a direction or roomID.
        &lt;link: room_weight&gt;rw [direction|roomID] &lt;weight&gt;&lt;/link&gt; - Set a room weight given a direction or roomID.
        &lt;link: room_weight_exit&gt;rwe [roomID] &lt;weight&gt; &lt;exit&gt;&lt;/link&gt; - Set the weight of a given exit in
            the current room, or optional roomID.
        &lt;link: room_link&gt;room link|rlk &lt;direction&gt; [one]&lt;/link&gt; - Create a link to a room given a direction.
            Optional 'one' to create a one-way link.
        &lt;link: room_unlink&gt;room unlink|urlk &lt;direction&gt;&lt;/link&gt; - Delete a link in the specified direction.
        &lt;link: room_door&gt;rd [roomID] &lt;direction&gt; &lt;open|closed|locked|clear&gt;&lt;/link&gt; - Create or delete a door
            from the current room, or optional location.
        &lt;link: room_character&gt;rcc &lt;character&gt; [roomID]&lt;/link&gt; - Assign a single character, letter or
            number to the current room, or optional location.
        &lt;link: exit_special&gt;exit special|spe &lt;direction|roomID&gt; &lt;command&gt;&lt;/link&gt; - Add a special exit
            to a room.
        &lt;link: spev&gt;spev &lt;fromID&gt; &lt;toID&gt; &lt;command&gt;&lt;/link&gt; - Add a special exit to two remote rooms.
        &lt;link: spe_clear&gt;exit special clear|spe clear &lt;direction|roomID&gt;&lt;/link&gt; - Delete a special exit.
        &lt;link: room_area&gt;room area [v&lt;roomID&gt;] &lt;area name&gt;&lt;/link&gt; - Moves a room to the given area.
        &lt;link: room_label&gt;room label [roomID] [fgColor] [bgColor] &lt;message&gt;&lt;/link&gt; - Adds a label to a room.
        &lt;link: area_labels&gt;area labels &lt;area name&gt;&lt;/link&gt; - Display all labels in a given area with an
            option to delete.
        &lt;link: feature_create&gt;feature create &lt;feature&gt; [char &lt;room character&gt;]&lt;/link&gt; - Create a new
            global map feature.
        &lt;link: room_feature_create&gt;room create feature|rcf [v&lt;room id&gt;] &lt;feature&gt;&lt;/link&gt; - Adds a map
            feature to the current room, or optional location.
        &lt;link: room_feature_delete&gt;room delete feature|rdf [v&lt;room id&gt;] &lt;feature&gt;&lt;/link&gt; - Removes a
            map feature from the current room or optional location.
        &lt;link: feature_delete&gt;feature delete &lt;feature&gt;&lt;/link&gt; - Deletes a global map feature and
            removes it from all rooms.

    &lt;cyan&gt;Sharing and Backup Commands:&lt;reset&gt;

        &lt;link: save&gt;map save&lt;/link&gt; - Creates a backup of the map.
        &lt;link: load&gt;map load &lt;remote address&gt;&lt;/link&gt; - Loads a map backup, or a map file from a
            remote address.
        &lt;link: export&gt;map export &lt;area name&gt;&lt;/link&gt; - Creates a file from the named area that can
            be shared.
        &lt;link: import&gt;map import &lt;area name&gt;&lt;/link&gt; - Loads an area from a file.

    &lt;cyan&gt;Mapping Events:&lt;reset&gt;
        These events are used by triggers to direct the script's behavior.

        &lt;link: onNewRoom&gt;onNewRoom&lt;/link&gt; - Signals that a room has been detected, optional exits
            argument.
        &lt;link: onMoveFail&gt;onMoveFail&lt;/link&gt; - Signals that an attempted move failed.
        &lt;link: onForcedMove&gt;onForcedMove&lt;/link&gt; - Signals that the character moved without a command
            being entered, required direction argument.
        &lt;link: onRandomMove&gt;onRandomMove&lt;/link&gt; - Signals that the character moved in an unknown
            direction without a command being entered.
        &lt;link: onVisionFail&gt;onVisionFail&lt;/link&gt; - Signals that the character moved but some or all of
            the room information was not able to be gathered.

    &lt;cyan&gt;Key Variables:&lt;reset&gt;
        These variables are used by the script to keep track of important
            information.

        &lt;yellow&gt;map.prompt.room&lt;reset&gt; - Can be set to specify the room name.
        &lt;yellow&gt;map.prompt.exits&lt;reset&gt; - Can be set to specify the room exits.
        &lt;yellow&gt;map.prompt.hash&lt;reset&gt; - Can be set to specify the room hash.
            Notice: if you set this, mapper will only find room by
            getRoomIDbyHash(hash)
        &lt;yellow&gt;map.character&lt;reset&gt; - Contains the current character name.
        &lt;yellow&gt;map.save.recall&lt;reset&gt; - Contains a table of recall roomIDs for all
            characters.
        &lt;yellow&gt;map.save.prompt_pattern&lt;reset&gt; - Contains a table of prompt patterns for all
            characters.
        &lt;yellow&gt;map.save.ignore_patterns&lt;reset&gt; - Contains a table of patterns of text the
            script ignores.
        &lt;yellow&gt;map.configs&lt;reset&gt; - Contains a number of different options that can be set
            to modify script behavior.
        &lt;yellow&gt;map.currentRoom&lt;reset&gt; - Contains the roomID of the room your character is
            in, according to the script.
        &lt;yellow&gt;map.currentName&lt;reset&gt; - Contains the name of the room your character is in,
            according to the script.
        &lt;yellow&gt;map.currentExits&lt;reset&gt; - Contains a table of the exits of the room your
            character is in, according to the script.
        &lt;yellow&gt;map.currentArea&lt;reset&gt; - Contains the areaID of the area your character is
            in, according to the script.
]]}
map.help.save = [[
    &lt;cyan&gt;Map Save&lt;reset&gt;
        syntax: &lt;yellow&gt;map save&lt;reset&gt;

        This command creates a copy of the current map and stores it in the
        profile folder as map.dat. This can be useful for creating a backup
        before adding new content, in case of problems, and as a way to share an
        entire map at once.
]]
map.help.load = [[
    &lt;cyan&gt;Map Load&lt;reset&gt;
        syntax: &lt;yellow&gt;map load &lt;optional download address&gt;&lt;reset&gt;

        This command replaces the current map with the map stored as map.dat in
        the profile folder. Alternatively, if a download address is provided, a
        map is downloaded from that location and loaded to replace the current
        map. If no filename is given with the download address, the script tries
        to download map.dat. If a filename is given it MUST end with .dat.
]]
map.help.show = [[
    &lt;cyan&gt;Map Show&lt;reset&gt;
        syntax: &lt;yellow&gt;map show&lt;reset&gt;

        This command shows a map window, as specified by the window configs set
        via the &lt;link: window&gt;map window command&lt;/link&gt;. It isn't necessary to use this method to
        show a map window to use this script, any map window will work.
]]
map.help.export = [[
    &lt;cyan&gt;Map Export&lt;reset&gt;
        syntax: &lt;yellow&gt;map export &lt;area name&gt;&lt;reset&gt;

        This command creates a file containing all the informatino about the
        named area and stores it in the profile folder, with a file name based
        on the area name. This file can then be imported, allowing for easy
        sharing of single map areas. The file name will be the name of the area
        in all lower case, with spaces replaced with underscores, and a .dat
        file extension.
]]
map.help.import = [[
    &lt;cyan&gt;Map Import&lt;reset&gt;
        syntax: &lt;yellow&gt;map import &lt;area name&gt;&lt;reset&gt;

        This command imports a file from the profile folder with a name matching
        the name of the file, and uses it to create an area on the map. The area
        name used can be capitalized or not, and may have either spaces or
        underscores between words. The actual area name is stored within the
        file, and is not set by the area name used in this command.
]]
map.help.start_mapping = [[
    &lt;cyan&gt;Start Mapping&lt;reset&gt;
        syntax: &lt;yellow&gt;start mapping [area name]&lt;reset&gt;

        This command instructs the script to add new content to the map when it
        is seen. When first used, an area name is mandatory, so that an area is
        created for new rooms to be placed in. If used with an area name while
        the map shows the character within a room on the map, that room will be
        moved to be in the named area, if it is not already in it. If used
        without an area name, the room is not moved, and mapping begins in the
        area the character is currently located in.
]]
map.help.stop_mapping = [[
    &lt;cyan&gt;Stop Mapping&lt;reset&gt;
        syntax: &lt;yellow&gt;stop mapping&lt;reset&gt;

        This command instructs the script to stop adding new content until
        mapping is resumed at a later time. The map will continue to perform
        other functions.
]]
map.help.find_prompt = [[
    &lt;cyan&gt;Find Prompt&lt;reset&gt;
        syntax: &lt;yellow&gt;find prompt&lt;reset&gt;

        This command instructs the script to begin searching newly arriving text
        for something that matches one of its known prompt patterns. If one is
        found, that pattern will be set as the current prompt pattern. This
        should typically be the first command used to set up this script with a
        new profile. If your prompt appears after using this command, but there
        is no message saying that the prompt has been found, it will be
        necessary to use the map prompt command to manually set a pattern.
]]
map.help.prompt = [[
    &lt;cyan&gt;Map Prompt&lt;reset&gt;
        syntax: &lt;yellow&gt;map prompt &lt;prompt pattern&gt;&lt;reset&gt;

        This command manually sets a prompt pattern for the script to use.
        Because of the way this script works, the prompt pattern should match
        the entire prompt, so that if the text matching the pattern were
        removed, the line with the prompt would be blank. The patterns must be
        of the type used by the Lua string library. If you are unsure about what
        pattern to use, seek assistance on the Mudlet Forums or the Mudlet
        Discord channel.
]]
map.help.debug = [[
    &lt;cyan&gt;Map Debug&lt;reset&gt;
        syntax: &lt;yellow&gt;map debug&lt;reset&gt;

        This command toggles the map script's debug mode on or off when it is
        used. Debug mode provides some extra messages to help with setting up
        the script and identifying problems to help with troubleshooting. If you
        are getting assistance with setting up this script, using debug mode may
        make the process faster and easier.
]]
map.help.ignore = [[
    &lt;cyan&gt;Map Ignore&lt;reset&gt;
        syntax: &lt;yellow&gt;map ignore &lt;ignore pattern&gt;&lt;reset&gt;

        This command adds the given pattern to a list the script maintains to
        help it locate the room name. Any text that might appear after a command
        is sent to move and before the room name appears, or after the prompt
        and before the room name if several movement commands are sent at once,
        should have an ignore pattern added for it.

        If the given pattern is already in the list of ignore patterns, that
        pattern will be removed from the list.

        Example: &lt;yellow&gt;map ignore ^You are hungry%.$&lt;reset&gt; - match exactly one line
                 &lt;yellow&gt;map ignore ^The clock strikes %d+%.$&lt;reset&gt; - match a number
                 &lt;yellow&gt;map ignore ^You walk %a+%.$&lt;reset&gt; - match a word, e.g. east
]]
map.help.movemethod = [[
    &lt;cyan&gt;Move Method&lt;reset&gt;
        syntax: &lt;yellow&gt;map movemethod &lt;movement word&gt;&lt;reset&gt;

        This command will add a movement method for the script to look for
        when moving between rooms. If your game has methods such as "walk north",
        "swim south" or similar, add "walk" or "swim" as necessary. For single
        room movement only.

        If the given method is already in the list of movement methods, that
        method will be removed from the list.
]]
map.help.areas = [[
    &lt;cyan&gt;Map Areas&lt;reset&gt;
        syntax: &lt;yellow&gt;map areas&lt;reset&gt;

        This command displays a linked list of all areas in the map. When
        clicked, the rooms in the selected area will be displayed, as if the
        'map rooms' command had been used with that area as an argument.
]]
map.help.rooms = [[
    &lt;cyan&gt;Map Rooms&lt;reset&gt;
        syntax: &lt;yellow&gt;map rooms &lt;area name&gt;&lt;reset&gt;

        This command shows a list of all rooms in the area, with the roomID and
        the room name, as well as a count of how many rooms are in the area
        total. Note that the area name argument is not case sensitive.
]]
map.help.set_area = [[
    &lt;cyan&gt;Set Area&lt;reset&gt;
        syntax: &lt;yellow&gt;set area &lt;area name&gt;&lt;reset&gt;

        This command move the current room into the named area, creating the
        area if needed.
]]
map.help.mode = [[
    &lt;cyan&gt;Map Mode&lt;reset&gt;
        syntax: &lt;yellow&gt;map mode &lt;lazy, simple, normal, or complex&gt;&lt;reset&gt;

        This command changes the current mapping mode, which determines what
        happens when new rooms are added to the map.

        In lazy mode, connecting exits aren't checked and a room is only added if
        there isn't an adjacent room with the same name.

        In simple mode, if an adjacent room has an exit stub pointing toward the
        newly created room, and the new room has an exit in that direction,
        those stubs are connected in both directions.

        In normal mode (default), the newly created room is connected to the room you left
        from, so long as it has an exit leading in that direction.

        In complex mode, none of the exits of the newly connected room are
        connected automatically when it is created.
]]
map.help.add_door = [[
    &lt;cyan&gt;Add Door&lt;reset&gt;
        syntax: &lt;yellow&gt;add door &lt;direction&gt; [none|open|closed|locked] [yes|no]&lt;reset&gt;

        This command places a door on the exit in the given direction, or
        removes it if "none" is given as the second argument. The door status is
        set as given by the second argument, default "closed". The third
        argument determines if the door is a one-way door, default "no".
]]
map.help.add_portal = [[
    &lt;cyan&gt;Add Portal&lt;reset&gt;
        syntax: &lt;yellow&gt;add portal [-f] &lt;entry command&gt;&lt;reset&gt;

        This command creates a special exit in the current room that is entered
        by using the given entry command. The given entry command is then sent,
        moving to the destination room. If the destination room matches an
        existing room, the special exit will link to that room, and if not a new
        room will be created. If the optional "-f" argument is given, a new room
        will be created for the destination regardless of if an existing room
        matches the room seen when arriving at the destination.
]]
map.help.shift = [[
    &lt;cyan&gt;Shift&lt;reset&gt;
        syntax: &lt;yellow&gt;shift &lt;direction&gt;&lt;reset&gt;

        This command moves the current room one step in the direction given, on
        the map.
]]
map.help.merge_rooms = [[
    &lt;cyan&gt;Merge Rooms&lt;reset&gt;
        syntax: &lt;yellow&gt;merge rooms&lt;reset&gt;

        This command combines all rooms that share the same coordinates and the
        same room name into a single room, with all of the exits preserved and
        combined.
]]
map.help.clear_moves = [[
    &lt;cyan&gt;Clear Moves&lt;reset&gt;
        syntax: &lt;yellow&gt;clear moves&lt;reset&gt;

        This command clears the script's queue of movement commands, and is
        intended to be used after you attempt to move while mapping but the
        movement is prevented in some way that is not caught and handled by a
        trigger that raises the onMoveFail event.
]]
map.help.set_exit = [[
    &lt;cyan&gt;Set Exit&lt;reset&gt;
        syntax: &lt;yellow&gt;set exit &lt;direction&gt; &lt;destination roomID&gt;&lt;reset&gt;

        This command sets the exit in the current room in the given direction to
        connect to the target room, as specified by the roomID. This is a
        one-way connection.
]]
map.help.onnewroom = [[
    &lt;cyan&gt;onNewRoom Event&lt;reset&gt;

        This event is raised to inform the script that a room has been detected.
        When raised, a string containing the exits from the detected room should
        be passed as a second argument to the raiseEvent function, unless those
        exits have previously been stored in map.prompt.exits.
]]
map.help.onmovefail = [[
    &lt;cyan&gt;onMoveFail Event&lt;reset&gt;

        This event is raised to inform the script that a move was attempted but
        the character was unable to move in the given direction, causing that
        movement command to be removed from the script's movement queue.
]]
map.help.onforcedmove = [[
    &lt;cyan&gt;onForcedMove Event&lt;reset&gt;

        This event is raised to inform the script that the character moved in a
        specified direction without a command being entered. When raised, a
        string containing the movement direction must be passed as a second
        argument to the raiseEvent function.

        The most common reason for this event to be raised is when a character
        is following someone else.
]]
map.help.onrandommove = [[
    &lt;cyan&gt;onRandomMove Event&lt;reset&gt;

        This event is raised to inform the script that the character has moved
        in an unknown direction. The script will compare the next room seen with
        rooms that are adjacent to the current room to try to determine the best
        match for where the character has gone.

        In some situations, multiple options are equally viable, so mistakes may
        result. The script will automatically keep verifying positioning with
        each step, and automatically correct the shown location on the map when
        possible.
]]
map.help.onvisionfail = [[
    &lt;cyan&gt;onVisionFail Event&lt;reset&gt;

        This event is raised to inform the script that some or all of the room
        information was not able to be gathered, but the character still
        successfully moved between rooms in the intended direction.
]]
map.help.onprompt = [[
    &lt;cyan&gt;onPrompt Event&lt;reset&gt;

        This event can be raised when using a non-conventional setup to trigger
        waiting messages from the script to be displayed. Additionally, if
        map.prompt.exits exists and isn't simply an empty string, raising this
        event will cause the onNewRoom event to be raised as well. This
        functionality is intended to allow people who have used the older
        version of this script to use this script instead, without having to
        modify the triggers they created for it.
]]
map.help.me = [[
    &lt;cyan&gt;Map Me&lt;reset&gt;
        syntax: &lt;yellow&gt;map me&lt;reset&gt;

        This command forces the script to look at the currently captured room
        name and exits, and search for a potentially matching room, moving the
        map if applicable. Note that this command is generally never needed, as
        the script performs a similar search any time the room name and exits
        don't match expectations.
]]
map.help.path = [[
    &lt;cyan&gt;Map Path&lt;reset&gt;
        syntax: &lt;yellow&gt;map path &lt;room name&gt; [; area name]&lt;reset&gt;

        This command tries to find a walking path from the current room to the
        named room. If an area name is given, only rooms within that area that
        is given are checked. Neither the room name nor the area name are case
        sensitive, but otherwise an exact match is required. Note that a
        semicolon is required between the room name and area name, if an area
        name is given, but spaces before or after the semicolon are optional.

        Example: &lt;yellow&gt;map path main street ; newbie town&lt;reset&gt;
]]
map.help.character = [[
    &lt;cyan&gt;Map Character&lt;reset&gt;
        syntax: &lt;yellow&gt;map character &lt;name&gt;&lt;reset&gt;

        This command tells the script what character is currently being used.
        Setting a character is optional, but recall locations and prompt
        patterns are stored by character name, so using this command allows for
        easy switching between different setups. The name given is stored in
        map.character. The name is a case sensitive exact match. The value of
        map.character is not saved between sessions, so this must be set again
        if needed each time the profile is opened.
]]
map.help.recall = [[
    &lt;cyan&gt;Map Recall&lt;reset&gt;
        syntax: &lt;yellow&gt;map recall&lt;reset&gt;

        This command tells the script that the current room is the recall point
        for the current character, as stored in map.character. This information
        is stored in map.save.recall[map.character], and is remembered between
        sessions.
]]
map.help.config = [[
    &lt;cyan&gt;Map Config&lt;reset&gt;
        syntax: &lt;yellow&gt;map config &lt;setting&gt; &lt;optional value&gt;&lt;reset&gt;

        This command changes any of the available configurations listed below.
        If no value is given, and the setting is either 'on' or 'off', then the
        value is switched. When naming a setting, spaces can be used in place of
        underscores. Details of what options are available and what each one
        does are provided.

        &lt;yellow&gt;speedwalk_delay&lt;reset&gt; - When using the speedwalk function of the script,
            this is the amount of time the script waits after either sending
            a command or, if speedwalk_wait is set, after arriving in a new
            room, before the next command is sent. This may be any number 0
            or higher.

        &lt;yellow&gt;speedwalk_wait&lt;reset&gt; - When using the speedwalk function of the script,
            this indicates if the script waits for your character to move
            into a new room before sending the next command. This may be true
            or false.

        &lt;yellow&gt;speedwalk_random&lt;reset&gt; - When using the speedwalk function of the script
            with a speedwalk_delay value, introduces a randomness to the wait
            time by adding some amount up to the speedwalk_delay value. This
            may be true or false.

        &lt;yellow&gt;stretch_map&lt;reset&gt; - When adding a new room that would overlap an existing
            room, if this is set the map will stretch out to prevent the
            overlap, with all rooms further in the direction moved getting
            pushed one further in that direction. This may be true or false.

        &lt;yellow&gt;max_search_distance&lt;reset&gt; - When mapping, this is the maximum number of
            rooms that the script will search in the movement direction for a
            matching room before deciding to create a new room. This may be
            false, or any positive whole number. This can also be set to 0,
            which is the same as setting it to false.

        &lt;yellow&gt;search_on_look&lt;reset&gt; - When this is set, using the "look" command causes
            the map to verify your position using the room name and exits
            seen following using the command. This may be true or false.

        &lt;yellow&gt;clear_lines_on_send&lt;reset&gt; - When this is set, any time a command is sent,
            any lines stored from the game used to search for the room name
            are cleared. This may be true or false.

        &lt;yellow&gt;mode&lt;reset&gt; - This is the default mapping mode on startup, and defines how
            new rooms are added to the map. May be "lazy", "simple",
            "normal" or "complex".

        &lt;yellow&gt;download_path&lt;reset&gt; - This is the path that updates are downloaded from.
            This may be any web address where the versions.lua and
            generic_mapper.xml files can be downloaded from.

        &lt;yellow&gt;prompt_test_patterns&lt;reset&gt; - This is a table of default patterns checked
            when using the "find prompt" command. The patterns in this table
            should start with a '^', and be written to be used with the Lua
            string library. Most importantly, '%' is used as the escape
            character instead of '\' as in trigger regex patterns.

        &lt;yellow&gt;custom_exits&lt;reset&gt; - This is a table of custom exit directions and their
            relevant extra pieces of info. Each entry should have the short
            direction as the keyword for a table containing first the long
            direction, then the long direction of the reverse of this
            direction, and then the x, y, and z change in map position
            corresponding to the movement. As an example: us = {'upsouth',
            'downnorth', 0, -1, 1}

        &lt;yellow&gt;custom_name_search&lt;reset&gt; - When this is set, instead of running the default
            function name_search, a user-defined function called
            'mudlet.custom_name_search' is used instead. This may be true or false.

        &lt;yellow&gt;use_description_matching&lt;reset&gt; - When this is set, room descriptions are used
            in addition to room names and exits when matching rooms. The
            description is captured from lines between the room name and the
            prompt, and stored as room user data. This helps distinguish between
            rooms that have the same name but different descriptions. This may
            be true or false.

        &lt;yellow&gt;use_translation&lt;reset&gt; - When this is set, the lang_dirs table is used to
            translate movement and status commands in some other language
            into the English used by the script. This may be true or false.

        &lt;yellow&gt;debug&lt;reset&gt; - When this is set, the script will start in debug mode. This
            may be true or false.
]]
map.help.window = [[
    &lt;yellow&gt;Map Window&lt;reset&gt;
        syntax: &lt;yellow&gt;map window &lt;setting&gt; &lt;value&gt;&lt;reset&gt;

        This command changes any of the available configurations listed below,
        which determine the appearance and positioning of the map window when
        the 'map show' command is used. Details of what options are available
        and what each one does are provided.

        &lt;yellow&gt;x&lt;reset&gt; - This is the x position of the map window, and should be a
            positive number of pixels or a percentage of the screen width.

        &lt;yellow&gt;y&lt;reset&gt; - This is the y position of the map window, and should be a
            positive number of pixels or a percentage of the screen height.

        &lt;yellow&gt;w&lt;reset&gt; - This is the width of the map window, and should be a positive
            number of pixels or a percentage of the screen width.

        &lt;yellow&gt;h&lt;reset&gt; - This is the height of the map window, and should be a positive
            number of pixels or a percentage of the screen height.

        &lt;yellow&gt;origin&lt;reset&gt; - This is the corner from which the window position is
            measured, and may be 'topright', 'topleft', 'bottomright', or
            'bottomleft'.

        &lt;yellow&gt;shown&lt;reset&gt; - This determines if the map window is shown immediately upon
            connecting to the game. This may be true or false. If you intend
            to have some other script control the map window, this should be
            set to false.
]]
map.help.translate = [[
    &lt;yellow&gt;Map Translate&lt;reset&gt;
        syntax: &lt;yellow&gt;map translate &lt;english direction&gt; &lt;translated long direction&gt;
            &lt;translated short direction&gt;&lt;reset&gt;

        This command sets direction translations for the script to use, either
        for commands entered to move around, or listed exits the game shows when
        you enter a room. Available directions: north, south, east, west,
        northwest, northeast, southwest, southeast, up, down, in, and out.
        Also you can customize special commands sent to mud like 'look'.
]]
map.help.quick_start = [[
    &lt;link: quick_start&gt;map basics&lt;/link&gt; (quick start guide)
    ----------------------------------------

    Mudlet Mapper works in tandem with a script, and this generic mapper script needs
    to know 2 things to work:
      - &lt;dim_grey&gt;room name&lt;reset&gt; $ROOM_NAME_STATUS ($ROOM_NAME)
      - &lt;dim_grey&gt;exits&lt;reset&gt;     $ROOM_EXITS_STATUS ($ROOM_EXITS)

    1. &lt;link: start mapping&gt;start mapping &lt;optional area name&gt;&lt;/link&gt;
       If both room name and exits are good, you can start mapping! Give it the
       area name you're currently in, usually optional but required for the first one.
    2. &lt;link: find prompt&gt;find prompt&lt;/link&gt;
       Room name or exits aren't recognised? Try this command then. It will make
       the script start looking for a prompt using several standard prompt
       patterns. If a prompt is found, you will be notified, if not, you will
       need to set a prompt pattern yourself using &lt;link: prompt&gt;map prompt&lt;/link&gt;.
       Reach out to the &lt;urllink: https://discord.gg/kuYvMQ9&gt;Mudlet community&lt;/urllink&gt; for help, we'd be happy to help
       you figure it out!
    3. &lt;link: debug&gt;map debug&lt;/link&gt;
       This toggles debug mode. When on, messages will be displayed showing what
       information is captured and a few additional error messages that can help
       with getting the script fully compatible with your game.
    4. &lt;link: 1&gt;map help&lt;/link&gt;
       This will bring up a more detailed help file, starting with the available
       help topics.
]]
map.help.room_find = [[
    &lt;cyan&gt;Room Find&lt;reset&gt;
        syntax: &lt;yellow&gt;room find &lt;room name&gt;&lt;reset&gt;
                &lt;yellow&gt;rf &lt;room name&gt;&lt;reset&gt;

        This command will search all rooms and return a list of matches.
]]
map.help.room_look = [[
    &lt;cyan&gt;Room Look&lt;reset&gt;
        syntax: &lt;yellow&gt;room look [roomID]&lt;reset&gt;
                &lt;yellow&gt;rl [roomID]&lt;reset&gt;

        This command will display detailed information about the current room.
        Optionally a roomID can be provided.
]]
map.help.showpath = [[
    &lt;cyan&gt;Showpath&lt;reset&gt;
        syntax: &lt;yellow&gt;showpath &lt;roomID&gt;&lt;reset&gt;
                &lt;yellow&gt;showpath &lt;fromID&gt; &lt;toID&gt;&lt;reset&gt;

        This command displays a path from your current room to the roomID specified.
        If two roomID's are specifed it will display a path from a remote room to another room.
]]
map.help.spe_list = [[
    &lt;cyan&gt;Special Exits List&lt;reset&gt;
        syntax: &lt;yellow&gt;spe list [filter]&lt;reset&gt;

        This command displays a list of all known special exits.  You can alternatively provide an
        optional filter to return a list containing those words.

        Example: &lt;yellow&gt;spe list worm warp&lt;reset&gt;
]]
map.help.feature_list = [[
    &lt;cyan&gt;Feature List&lt;reset&gt;
        syntax: &lt;yellow&gt;feature list&lt;reset&gt;

        This command displays a list of all map features created via feature create and the associated room characters.
]]
map.help.area_add = [[
    &lt;cyan&gt;Area Add&lt;reset&gt;
        syntax: &lt;yellow&gt;area add &lt;area name&gt;&lt;reset&gt;

        This command will create a new area and automatically give it an ID.

        Example: &lt;yellow&gt;area add My City&lt;reset&gt; - create a new area called My City
]]
map.help.area_delete = [[
    &lt;cyan&gt;Area Delete&lt;reset&gt;
        syntax: &lt;yellow&gt;area delete &lt;area name&gt;&lt;reset&gt;

        This command will delete the given area. If the area is really big
        (thousands of rooms), deleting it at once would take a really long
        while and freeze your Mudlet while doing so. To combat the unpleasant
        experience, the script breaks up area deletion into batches of rooms
        (100 by default). While this still heavily impacts Mudlets performance,
        it allows you to see a progress meter of how far it has gotten and gives
        you an ability to pause it at any time by doing 'cancel area deletion'.

        Example: &lt;yellow&gt;area delete My City&lt;reset&gt; - delete an area called My City
]]
map.help.area_cancel = [[
    &lt;cyan&gt;Cancel Area Deletion&lt;reset&gt;
        syntax: &lt;yellow&gt;cancel area deletion&lt;reset&gt;

        This comand will stop an area deletion that has started. This will NOT
        restore deleted rooms - it merely pauses the process, so you can resume
        it with 'area delete' later on. You can type this in while Mudlet is
        deleting an area - it'll take a short while for letters to show up, but
        they will eventually.
]]
map.help.area_rename = [[
    &lt;cyan&gt;Area Rename&lt;reset&gt;
        syntax: &lt;yellow&gt;area rename &lt;name&gt;&lt;reset&gt;

        This command will rename the current area you're in to the new name.

        Example: &lt;yellow&gt;area rename My City&lt;reset&gt; - call the area you're in My City from now on

]]
map.help.arealock = [[
    &lt;cyan&gt;Arealock&lt;reset&gt;
        syntax: &lt;yellow&gt;arealock [filter]&lt;reset&gt;

        This command displays a list of areas you can lock/unlock, you can also
        give it an area name to filter by. If an area is locked the mapper will
        not attempt to speedwalk or go through any of the rooms in the area.

        Example: &lt;yellow&gt;arealock City&lt;reset&gt;
]]
map.help.room_coords = [[
    &lt;cyan&gt;Room Coordinates&lt;reset&gt;
        syntax: &lt;yellow&gt;room coords [v&lt;roomID&gt;] &lt;x&gt; &lt;y&gt; &lt;z&gt;&lt;reset&gt;
                &lt;yellow&gt;rc [v&lt;roomID&gt;] &lt;x&gt; &lt;y&gt; &lt;z&gt;&lt;reset&gt;

        This command will move a room to the new map coordinates. x,y and z will
        specify the new location of the room. The room ID is optional, it'll move
        the current room if you don't provide one.

        Example: &lt;yellow&gt;rc nw&lt;reset&gt; - move the room to be nw of the current location
                 &lt;yellow&gt;rc v34 w&lt;reset&gt; - move the room ID 34 west, note the letter 'v' in the command
                 &lt;yellow&gt;rc 1 -5 10&lt;reset&gt; - move the current room to those exact coordinates
                 &lt;yellow&gt;rc v12 8 3 -8&lt;reset&gt; - move the room #12 to 8x, 3y and -8z
                 &lt;yellow&gt;rc 14x 5y&lt;reset&gt; - move the current room to be at 14x and 5y, but the
                    same z-level you're on. You can include all three of x, y, z coordinates
                    or only one as you wish
]]
map.help.room_delete = [[
    &lt;cyan&gt;Room Delete&lt;reset&gt;
        syntax: &lt;yellow&gt;room delete &lt;direction|roomID&gt;&lt;reset&gt;
                &lt;yellow&gt;rld &lt;direction|roomID&gt;&lt;reset&gt;

        This command will delete a room given a relative direction or roomID.

        Example: &lt;yellow&gt;rld&lt;reset&gt; - current room, will delete the room you're currently in
                 &lt;yellow&gt;rld n&lt;reset&gt; - relative direction, will delete the room that's north of you
                 &lt;yellow&gt;rld 513&lt;reset&gt; - using roomID, will delete the room with ID 513
]]
map.help.room_weight = [[
    &lt;cyan&gt;Room Weight&lt;reset&gt;
        syntax: &lt;yellow&gt;room weight [direction|roomID] &lt;weight&gt;&lt;reset&gt;
                &lt;yellow&gt;rw [direction|roomID] &lt;weight&gt;&lt;reset&gt;

        This command updates the weight of a room, making it more or less
        desirable to travel through.  Direction or roomID is optional and
        defaults to the current room.

        Example: &lt;yellow&gt;rw 10&lt;reset&gt; - will set the room weight of the room you're standing in to 10
                 &lt;yellow&gt;rw n 4&lt;reset&gt; - relative direction, will set the room weight of the room that's
                    to the north of you to four
                 &lt;yellow&gt;rw 2343 2&lt;reset&gt; - using roomID, will set the room weight of room 2343 to 2
]]
map.help.room_weight_exit = [[
    &lt;cyan&gt;Room Weight Exit&lt;reset&gt;
        syntax: &lt;yellow&gt;rwe [roomID] &lt;weight&gt; &lt;exit&gt;&lt;reset&gt;

        This command updates the weight of a room exit, where weight is a
        positive number (default for exits is 0). Setting a higher weight will
        make the exit be less likely to be used. The exit can be a cardinal
        direction of either n,e,s,w,ne,se,sw,ne,up,down,in,out or the exact
        special exit text (including the script: part). This alias sets a weight
        one way only, so if you want to set it both ways, use it on the opposite
        side as well. Use 'rl' to check exit weights.

        Example: &lt;yellow&gt;rwe 1 n&lt;reset&gt; -  will set the weight of the exit north to 1
                 &lt;yellow&gt;rwe 2434 0 e&lt;reset&gt; - will reset the exit weight of an east exit that
                    leads out from the 2434 room
]]
map.help.room_link = [[
    &lt;cyan&gt;Room Link&lt;reset&gt;
        syntax: &lt;yellow&gt;room link [roomID] &lt;direction&gt; [one]&lt;reset&gt;
                &lt;yellow&gt;rlk [roomID] &lt;direction&gt; [one]&lt;reset&gt;

        This command will link a room given a direction and optional roomID.
        You can also add 'one' at the end of the command to make it be a one-way
        link.

        Example: &lt;yellow&gt;rlk n&lt;reset&gt; - relative direction, will link if exists
                    a room to the north of this one to your current location
                 &lt;yellow&gt;rlk 351 n&lt;reset&gt; - exact roomID and direction, will
                    link the current room to room #351 via a north exit
                 &lt;yellow&gt;rlk n one&lt;reset&gt; - will make an exit north one-way
]]
map.help.room_unlink = [[
    &lt;cyan&gt;Room Unlink&lt;reset&gt;
        syntax: &lt;yellow&gt;room unlink &lt;direction&gt;&lt;reset&gt;
                &lt;yellow&gt;urlk &lt;direction&gt;&lt;reset&gt;

                Unlink a room given a direction.  This function will unlink
                exits both ways, or one way if there is no incoming exit.

        Example: &lt;yellow&gt;urlk nw&lt;reset&gt; - relative direction, will unlink to the
                    northwest, and from the northwest room to the southeast
]]
map.help.room_door = [[
    &lt;cyan&gt;Room Door&lt;reset&gt;
        syntax: &lt;yellow&gt;rd [roomID] &lt;direction&gt; &lt;open|closed|locked|clear&gt;&lt;reset&gt;

                Will create a door from the current room to a direction
                specified.  Door status can be open or o, closed or c, locked or
                l, clear or gone. To delete a room, use clear or gone. Setting
                doors is one-way - to set two-way doors, use the alias from the
                opposite direction.


        Example: &lt;yellow&gt;rd n&lt;reset&gt; - add a one-way door north from the current room
                 &lt;yellow&gt;rd 23 w closed&lt;reset&gt; - add a closed door leading west in room 23
                 &lt;yellow&gt;rd n clear&lt;reset&gt; - remove the door to the north from the current
                    room on this side only
]]
map.help.room_character = [[
    &lt;cyan&gt;Room Character&lt;reset&gt;
        syntax: &lt;yellow&gt;rcc &lt;character|clear&gt; [roomID]&lt;reset&gt;

        This command will assign a single character, letter or number to the
        current room, or an optional given room.  Using clear will remove any
        characters.

        Example: &lt;yellow&gt;rcc $&lt;reset&gt; - put the dollar sign in the current room 
                    (e.g. to indicate a shop or bank)
                 &lt;yellow&gt;rcc C 234&lt;reset&gt; - put the letter C onto room 234
                 &lt;yellow&gt;rcc clear&lt;reset&gt; - remove any letter from the current
                 room
]]
map.help.exit_special = [[
    &lt;cyan&gt;Special Exits&lt;reset&gt;
        syntax: &lt;yellow&gt;exit special &lt;direction|roomID&gt; &lt;command&gt;&lt;reset&gt;
                &lt;yellow&gt;spe &lt;direction|roomID&gt; &lt;command&gt;&lt;reset&gt;

        This command will link two rooms via custom or special exit/script.

        Example: &lt;yellow&gt;spe n push rock&lt;reset&gt; - relative direction, will go to
                    the room that's north of you by doing 'push rock'
                 &lt;yellow&gt;spe 125 pull lever&lt;reset&gt; - will go to room 125 from the
                    current one by pulling a lever

        You can also specify a script to do code for you, by starting the exit
        command with script.

        Example: &lt;yellow&gt;spe 125 script: sendAll("pull lever", "enter gate")&lt;reset&gt;


]]
map.help.spev = [[
    &lt;cyan&gt;Remote Special Exits&lt;reset&gt;
        syntax: &lt;yellow&gt;spev &lt;fromID&gt; &lt;toID&gt; &lt;command&gt;&lt;reset&gt;

        This command will add a special exit between two remote rooms.

        Example: &lt;yellow&gt;spe 125 560 push rock&lt;reset&gt; - will link room 125 to room 560 with
                    the command 'push rock'
]]
map.help.spe_clear = [[
    &lt;cyan&gt;Clear Special Exits&lt;reset&gt;
        syntax: &lt;yellow&gt;exit special clear &lt;direction|roomID&gt;&lt;reset&gt;
                &lt;yellow&gt;spe clear &lt;direction|roomID&gt;&lt;reset&gt;

        This command will clear all special exits from the current, relative or
        given roomID.

        Example: &lt;yellow&gt;spe clear&lt;reset&gt; - delete all special exits in the room you're currently in
                 &lt;yellow&gt;spe clear n&lt;reset&gt; - delete all special exits in the room that's north of you
                 &lt;yellow&gt;spe clear 513&lt;reset&gt; - delete all special exits in room #513
]]
map.help.room_area = [[
    &lt;cyan&gt;Room Area&lt;reset&gt;
        syntax: &lt;yellow&gt;room area [v&lt;roomID&gt;] &lt;area name|areaID&gt;&lt;reset&gt;

        This command moves the current room to another area or a given optional
        room.

        Example: &lt;yellow&gt;room area My New Area&lt;reset&gt; - move the room you're in to 'My New Area'.
                 &lt;yellow&gt;room area v123 My New Area&lt;reset&gt; - move room 123 to My New Area
                 &lt;yellow&gt;room area 44&lt;reset&gt; - move the current room to the area ID 44
]]
map.help.room_label = [[
    &lt;cyan&gt;Room Label&lt;reset&gt;
        syntax: &lt;yellow&gt;room label [roomID] [fgColor] [bgColor] &lt;message&gt;&lt;reset&gt;

        This command adds a label to the current or specified room.  Foreground
        and background color are optional.

        Example: &lt;yellow&gt;room label My Label&lt;reset&gt; - adds a 'My Label' label to the current room
                 &lt;yellow&gt;room label 342 My Label&lt;reset&gt; - adds a label to room #342
                 &lt;yellow&gt;room label green My Label&lt;reset&gt; - adds a green label with a transparent
                    background to the current room
                 &lt;yellow&gt;room label green black My Label&lt;reset&gt; - adds a label with a green
                    foreground and black background to the current room
                 &lt;yellow&gt;room label 34 green black My Label&lt;reset&gt; - adds a label with a green
                    foreground and black background to room #34
]]
map.help.area_labels = [[
    &lt;cyan&gt;Area Labels&lt;reset&gt;
        syntax: &lt;yellow&gt;area labels &lt;area name&gt;&lt;reset&gt;

        This command displays all labels in a given area, with a link to delete.

        Example: &lt;yellow&gt;area label My Area&lt;reset&gt;
]]
map.help.feature_create = [[
    &lt;cyan&gt;Feature Create&lt;reset&gt;
        syntax: &lt;yellow&gt;feature create &lt;feature&gt; [char &lt;room character&gt;]&lt;reset&gt;

        This command will create a new map feature for use on rooms. You can
        also optionally add a character mark to the feature, which will be set
        when a map feature is added to a room. Note: Map feature names are not
        allowed to contain numbers.

        Example: &lt;yellow&gt;feature create A Nexus Point char N&lt;reset&gt; - creates a new feature
                    'A Nexus Point' with an assigned room character 'N'
]]
map.help.room_feature_create = [[
    &lt;cyan&gt;Room Create Feature&lt;reset&gt;
        syntax: &lt;yellow&gt;room create feature [v&lt;room id&gt;] &lt;feature&gt;&lt;reset&gt;
                &lt;yellow&gt;rcf [v&lt;room id&gt;] &lt;feature&gt;&lt;reset&gt;

        This command will add a created map feature to the room. If the map
        feature is associated with a character mark, it will be set on the room
        and existing marks get overwritten. The room number to add the feature
        to can be given with the optional argument (note: there is no space
        between the v and the ID).

        Example: &lt;yellow&gt;rcf A Nexus Point&lt;reset&gt; - add the feature 'A Nexus Point' to
                    the current room
                 &lt;yellow&gt;rcf v123 A Nexus Point&lt;reset&gt; - add the feature 'A Nexus Point'
                    to room #123
]]
map.help.room_feature_delete = [[
    &lt;cyan&gt;Room Delete Feature&lt;reset&gt;
        syntax: &lt;yellow&gt;room delete feature [v&lt;room id&gt;] &lt;feature&gt;&lt;reset&gt;
                &lt;yellow&gt;rdf [v&lt;room id&gt;] &lt;feature&gt;&lt;reset&gt;

        This command removes a map feature from the room. If the map feature is
        associated with a character mark and its set on the room, a random
        character mark from the other map features on the room is chosen to
        replace it. The room number to delete the feature from can be given with
        the optional argument (note: there is no space between the v and the
        ID).

        Example: &lt;yellow&gt;rdf v123 A Nexus Point&lt;reset&gt; - removes the feature 'A Nexus Point'
                    from the room #123
]]
map.help.feature_delete = [[
    &lt;cyan&gt;Feature Delete&lt;reset&gt;
        syntax: &lt;yellow&gt;feature delete &lt;feature&gt;&lt;reset&gt;

        This command deletes a global map feature and removes it from all rooms.

        Example: &lt;yellow&gt;feature delete A Nexus Point&lt;reset&gt; - removes the global feature
                    'A Nexus Point' and removes it from all rooms
]]



map.character = map.character or ""
map.prompt = map.prompt or {}
map.save = map.save or {}
map.save.recall = map.save.recall or {}
map.save.prompt_pattern = map.save.prompt_pattern or {}
map.save.ignore_patterns = map.save.ignore_patterns or {}
map.save.move_methods = map.save.move_methods or {}
map.silentUpdate = map.silentUpdate or true

local oldstring = string
local string = utf8
string.format = oldstring.format
string.trim = oldstring.trim
string.starts = oldstring.starts
string.split = oldstring.split
string.ends = oldstring.ends


local profilePath = getMudletHomeDir()
profilePath = profilePath:gsub("\\","/")

map.defaults = {
    mode = "normal", -- can be lazy, simple, normal, or complex
    stretch_map = true,
    search_on_look = true,
    speedwalk_delay = 1,
    speedwalk_wait = true,
    speedwalk_random = true,
    max_search_distance = 1,
    clear_lines_on_send = true,
    map_window = {
        x = 0,
        y = 0,
        w = "30%",
        h = "40%",
        origin = "topright",
        shown = false,
    },
    prompt_test_patterns = {"^%[?%a*%]?&lt;.*&gt;", "^%[.*%]%s*&gt;", "^%w*[%.?!:]*&gt;", "^%[.*%]", "^[Hh][Pp]:.*&gt;"},
    custom_exits = {},  -- format: short_exit = {long_exit, reverse_exit, x_dif, y_dif, z_dif}
                        -- ex: { us = {"upsouth", "downnorth", 0, -1, 1}, dn = {"downnorth", "upsouth", 0, 1, -1} }
    custom_name_search = false,
    use_description_matching = false,
    use_translation = true,
    lang_dirs = {n = 'n', ne = 'ne', nw = 'nw', e = 'e', w = 'w', s = 's', se = 'se', sw = 'sw',
        u = 'u', d = 'd', ["in"] = 'in', out = 'out', north = 'north', northeast = 'northeast',
        east = 'east', west = 'west', south = 'south', southeast = 'southeast', southwest = 'southwest',
        northwest = 'northwest', up = 'up', down = 'down', l = 'l', look = 'look',
        ed = 'ed', eu = 'eu', eastdown = 'eastdown', eastup = 'eastup',
        nd = 'nd', nu = 'nu', northdown = 'northdown', northup = 'northup',
        sd = 'sd', su = 'su', southdown = 'southdown', southup = 'southup',
        wd = 'wd', wu = 'wu', westdown = 'westdown', westup = 'westup',
    },
    debug = false,
    download_path = "https://raw.githubusercontent.com/Mudlet/Mudlet/development/src/mudlet-lua/lua/generic-mapper",
}

local move_queue, lines = {}, {}
local find_portal, vision_fail, room_detected, random_move, force_portal, find_prompt, downloading, walking, help_shown
local mt = getmetatable(map) or {}

local exitmap = {
    n = 'north',    ne = 'northeast',   nw = 'northwest',   e = 'east',
    w = 'west',     s = 'south',        se = 'southeast',   sw = 'southwest',
    u = 'up',       d = 'down',         ["in"] = 'in',      out = 'out',
    l = 'look',
    ed = 'eastdown',    eu = 'eastup',  nd = 'northdown',   nu = 'northup',
    sd = 'southdown',   su = 'southup', wd = 'westdown',    wu = 'westup',
}

local short = {}
for k,v in pairs(exitmap) do
    short[v] = k
end

local stubmap = {
    north = 1,      northeast = 2,      northwest = 3,      east = 4,
    west = 5,       south = 6,          southeast = 7,      southwest = 8,
    up = 9,         down = 10,          ["in"] = 11,        out = 12,
    northup = 13,   southdown = 14,     southup = 15,       northdown = 16,
    eastup = 17,    westdown = 18,      westup = 19,        eastdown = 20,
    [1] = "north",  [2] = "northeast",  [3] = "northwest",  [4] = "east",
    [5] = "west",   [6] = "south",      [7] = "southeast",  [8] = "southwest",
    [9] = "up",     [10] = "down",      [11] = "in",        [12] = "out",
    [13] = "northup", [14] = "southdown", [15] = "southup", [16] = "northdown",
    [17] = "eastup", [18] = "westdown", [19] = "westup",    [20] = "eastdown",
}

local coordmap = {
    [1] = {0,1,0},      [2] = {1,1,0},      [3] = {-1,1,0},     [4] = {1,0,0},
    [5] = {-1,0,0},     [6] = {0,-1,0},     [7] = {1,-1,0},     [8] = {-1,-1,0},
    [9] = {0,0,1},      [10] = {0,0,-1},    [11] = {0,0,0},     [12] = {0,0,0},
    [13] = {0,1,1},     [14] = {0,-1,-1},   [15] = {0,-1,1},    [16] = {0,1,-1},
    [17] = {1,0,1},     [18] = {-1,0,-1},   [19] = {-1,0,1},    [20] = {1,0,-1},
}

local reverse_dirs = {
    north = "south", south = "north", west = "east", east = "west", up = "down",
    down = "up", northwest = "southeast", northeast = "southwest", southwest = "northeast",
    southeast = "northwest", ["in"] = "out", out = "in",
    northup = "southdown", southdown = "northup", southup = "northdown", northdown = "southup",
    eastup = "westdown", westdown = "eastup", westup = "eastdown", eastdown = "westup",
}

local wait_echo = {}
local mapper_tag = "&lt;112,229,0&gt;(&lt;73,149,0&gt;mapper&lt;112,229,0&gt;): &lt;255,255,255&gt;"
local debug_tag = "&lt;255,165,0&gt;(&lt;200,120,0&gt;debug&lt;255,165,0&gt;): &lt;255,255,255&gt;"
local err_tag = "&lt;255,0,0&gt;(&lt;178,34,34&gt;error&lt;255,0,0&gt;): &lt;255,255,255&gt;"

local function config()
    local defaults = map.defaults
    local configs = map.configs or {}
    local path = profilePath.."/map downloads"
    if not io.exists(path) then lfs.mkdir(path) end
    -- load stored configs from file if it exists
    if io.exists(path.."/configs.lua") then
        table.load(path.."/configs.lua",configs)
    end
    -- overwrite default values with stored config values
    configs = table.update(defaults, configs)
    map.configs = configs
    map.configs.translate = {}
    for k, v in pairs(map.configs.lang_dirs) do
        map.configs.translate[v] = k
    end
    -- incorporate custom exits
    for k,v in pairs(map.configs.custom_exits) do
        exitmap[k] = v[1]
        reverse_dirs[v[1]] = v[2]
        short[v[1]] = k
        local count = #coordmap + 1
        coordmap[count] = {v[3],v[4],v[5]}
        stubmap[count] = v[1]
        stubmap[v[1]] = count
    end
    -- update to the current download path
    if map.configs.download_path == "https://raw.githubusercontent.com/JorMox/Mudlet/development/src/mudlet-lua/lua/generic-mapper" then
        map.configs.download_path = "https://raw.githubusercontent.com/Mudlet/Mudlet/development/src/mudlet-lua/lua/generic-mapper"
    end

    -- setup metatable to store sensitive values
    local protected = {"mapping", "currentRoom", "currentName", "currentExits", "currentArea",
        "prevRoom", "prevName", "prevExits", "mode", "version"}
    mt = getmetatable(map) or {}
    mt.__index = mt
    mt.__newindex = function(tbl, key, value)
            if not table.contains(protected, key) then
                rawset(tbl, key, value)
            else
                error("Protected Map Table Value")
            end
        end
    mt.set = function(key, value)
            if table.contains(protected, key) then
                mt[key] = value
            end
        end
    setmetatable(map, mt)
    map.set("mode", configs.mode)
    map.set("version", version)

    local saves = {}
    if io.exists(path.."/map_save.dat") then
        table.load(path.."/map_save.dat",saves)
    end
    saves.prompt_pattern = saves.prompt_pattern or {}
    saves.ignore_patterns = saves.ignore_patterns or {}
    saves.move_methods = saves.move_methods or {}
    saves.recall = saves.recall or {}
    map.save = saves

    if map.configs.map_window.shown then
        map.showMap(true)
    end
end

local function parse_help_text(text)
  text = text:gsub("%$ROOM_NAME_STATUS", (map.currentName and map.currentName ~= "") and '✔️' or '❌')
  text = text:gsub("%$ROOM_NAME", map.currentName or '')

  text = text:gsub("%$ROOM_EXITS_STATUS", (not map.currentExits or table.is_empty(map.currentExits)) and '❌' or '✔️')
  text = text:gsub("%$ROOM_EXITS", map.currentExits and table.concat(map.currentExits, ' ') or '')

  return text
end

function map.show_help(cmd)
    if cmd and cmd ~= "" then
        if cmd:starts("map ") then cmd = cmd:sub(5) end
        cmd = cmd:lower():gsub(" ","_")
        if not map.help[cmd] then
            map.echo("No help file on that command.")
        end
    else
        cmd = 1
    end

    for w in parse_help_text(map.help[cmd]):gmatch("[^\n]*\n") do
        local url, target = rex.match(w, [[&lt;(url)?link: ([^&gt;]+)&gt;]])
        -- lrexlib returns a non-capture as 'false', so determine which variable the capture went into
        if target == nil then target = url end
        if target then
            local before, linktext, _, link, _, after, ok = rex.match(w,
                          [[(.*)&lt;((url)?link): [^&gt;]+&gt;(.*)&lt;\/(url)?link&gt;(.*)]], 0, 'm')
            -- could not get rex.match to capture the newline - fallback to string.match
            local _, _, after = w:match("(.*)&lt;u?r?l?link: [^&gt;]+&gt;(.*)&lt;/u?r?l?link&gt;(.*)")

            cecho(before)
            fg("yellow")
            setUnderline(true)
            if linktext == "urllink" then
                echoLink(link, [[openWebPage("]]..target..[[")]], "Open webpage", true)
            elseif target ~= "1" then
                echoLink(link,[[map.show_help("]]..target..[[")]],"View: map help " .. target,true)
            else
                echoLink(link,[[map.show_help()]],"View: map help",true)
            end
            setUnderline(false)
            resetFormat()
            if after then cecho(after) end
        else
            cecho(w)
        end
    end
    echo("\n")
end

local bool_configs = {'stretch_map', 'search_on_look', 'speedwalk_wait', 'speedwalk_random',
    'clear_lines_on_send', 'debug', 'custom_name_search', 'use_translation'}
-- function intended to be used by an alias to change config values and save them to a file for later
function map.setConfigs(key, val, sub_key)
    if val == "off" or val == "false" then
        val = false
    elseif val == "on" or val == "true" then
        val = true
    end
    local toggle = false
    if val == nil or val == "" then toggle = true end
    key = key:gsub(" ","_")
    if tonumber(val) then val = tonumber(val) end
    if not toggle then
        if key == "map_window" then
            if map.configs.map_window[sub_key] then
                map.configs.map_window[sub_key] = val
                map.echo(string.format("Map config %s set to: %s", sub_key, tostring(val)))
            else
                map.echo("Unknown map config.",false, true)
            end
        elseif key =="lang_dirs" then
            sub_key = exitmap[sub_key] or sub_key
            if map.configs.lang_dirs[sub_key] then
                local long_dir, short_dir = val[1],val[2]
                if #long_dir &lt; #short_dir then long_dir, short_dir = short_dir, long_dir end
                map.configs.lang_dirs[sub_key] = long_dir
                map.configs.lang_dirs[short[sub_key]] = short_dir
                map.echo(string.format("Direction/command %s, abbreviated as %s, now interpreted as %s.", long_dir, short_dir, sub_key))
                map.configs.translate = {}
                for k, v in pairs(map.configs.lang_dirs) do
                    map.configs.translate[v] = k
                end
            else
                map.echo("Invalid direction/command.", false, true)
            end
        elseif key == "prompt_test_patterns" then
            if not table.contains(map.configs.prompt_test_patterns) then
                table.insert(map.configs.prompt_test_patterns, val)
                map.echo("Prompt pattern added to list: " .. val)
            else
                table.remove(map.configs.prompt_test_patterns, table.index_of(map.configs.prompt_test_patterns, val))
                map.echo("Prompt pattern removed from list: " .. val)
            end
        elseif key == "custom_exits" then
            if type(val) == "table" then
                for k, v in pairs(val) do
                    map.configs.custom_exits[k] = v
                    map.echo(string.format("Custom Exit short direction %s, long direction %s",k,v[1]))
                    map.echo(string.format("    set to: x: %s, y: %s, z: %s, reverse: %s",v[3],v[4],v[5],v[2]))
                end
            else
                map.echo("Custom Exit config must be in the form of a table.", false, true)
            end
        elseif map.configs[key] ~= nil then
            map.configs[key] = val
            map.echo(string.format("Config %s set to: %s", key, tostring(val)))
        else
            map.echo("Unknown configuration.",false,true)
            return
        end
    elseif toggle then
        if (type(map.configs[key]) == "boolean" and table.contains(bool_configs, key)) then
            map.configs[key] = not map.configs[key]
            map.echo(string.format("Config %s set to: %s", key, tostring(map.configs[key])))
        elseif key == "map_window" and sub_key == "shown" then
            map.configs.map_window.shown = not map.configs.map_window.shown
            map.echo(string.format("Map config %s set to: %s", "shown", tostring(map.configs.map_window.shown)))
        else
            map.echo("Unknown configuration.",false,true)
            return
        end
    end
    table.save(profilePath.."/map downloads/configs.lua",map.configs)
    config()
end

local function show_err(msg,debug)
    map.echo(msg,debug,true)
    error(msg,2)
end

local function print_echoes(what, debug, err)
    moveCursorEnd("main")
    local curline = getCurrentLine()
    if curline ~= "" then echo("\n") end
    decho(mapper_tag)
    if debug then decho(debug_tag) end
    if err then decho(err_tag) end
    cecho(what)
    echo("\n")
end

local function print_wait_echoes()
    for k,v in ipairs(wait_echo) do
        print_echoes(v[1],v[2],v[3])
    end
    wait_echo = {}
end

function map.echo(what, debug, err, wait)
    if debug and not map.configs.debug then return end
    what = tostring(what) or ""
    if wait then
        table.insert(wait_echo,{what, debug, err})
        return
    end
    print_wait_echoes()
    print_echoes(what, debug, err)
end

local function set_room(roomID)
    -- moves the map to the new room
    if map.currentRoom ~= roomID then
        map.set("prevRoom", map.currentRoom)
        map.set("currentRoom", roomID)
    end
    if getRoomName(map.currentRoom) ~= map.currentName then
        map.set("prevName", map.currentName)
        map.set("prevExits", map.currentExits)
        map.set("currentName", getRoomName(map.currentRoom))
        map.set("currentExits", getRoomExits(map.currentRoom))
        -- check handling of custom exits here
        for i = 13,#stubmap do
            map.currentExits[stubmap[i]] = tonumber(getRoomUserData(map.currentRoom,"exit " .. stubmap[i]))
        end
    end
    map.set("currentArea", getRoomArea(map.currentRoom))
    centerview(map.currentRoom)
    raiseEvent("onMoveMap", map.currentRoom)
end

local function add_door(roomID, dir, status)
    -- create or remove a door in the designated direction
    -- consider options for adding pickable and passable information
    dir = exitmap[dir] or dir
    if not table.contains(exitmap,dir) then
        error("Add Door: invalid direction.",2)
    end
    if type(status) ~= "number" then
        status = assert(table.index_of({"none","open","closed","locked"},status),
            "Add Door: Invalid status, must be none, open, closed, or locked") - 1
    end
    local exits = getRoomExits(roomID)
    -- check handling of custom exits here
    if not exits[dir] then
        setExitStub(roomID,stubmap[dir],true)
    end
    -- check handling of custom exits here
    if not table.contains({'u','d'},short[dir]) then
        setDoor(roomID,short[dir],status)
    else
        setDoor(roomID,dir,status)
    end
end

local function check_doors(roomID,exits)
    -- looks to see if there are doors in designated directions
    -- used for room comparison, can also be used for pathing purposes
    if type(exits) == "string" then exits = {exits} end
    local statuses = {}
    local doors = getDoors(roomID)
    local dir
    for k,v in pairs(exits) do
        dir = short[k] or short[v]
        if table.contains({'u','d'},dir) then
            dir = exitmap[dir]
        end
        if not doors[dir] or doors[dir] == 0 then
            return false
        else
            statuses[dir] = doors[dir]
        end
    end
    return statuses
end

local function find_room(name, area)
    -- looks for rooms with a particular name, and if given, in a specific area
    local rooms = searchRoom(name)
    if type(area) == "string" then
        local areas = getAreaTable() or {}
        for k,v in pairs(areas) do
            if string.lower(k) == string.lower(area) then
                area = v
                break
            end
        end
        area = areas[area] or nil
    end
    for k,v in pairs(rooms) do
        if string.lower(v) ~= string.lower(name) then
            rooms[k] = nil
        elseif area and getRoomArea(k) ~= area then
            rooms[k] = nil
        end
    end
    return rooms
end

local function getRoomStubs(roomID)
    -- turns stub info into table similar to exit table
    local stubs = getExitStubs(roomID)
    if type(stubs) ~= "table" then stubs = {} end
    -- check handling of custom exits here
    local tmp
    for i = 13,#stubmap do
        tmp = tonumber(getRoomUserData(roomID,"stub "..stubmap[i])) or tonumber(getRoomUserData(roomID,"stub"..stubmap[i])) -- for old version
        if tmp then table.insert(stubs,tmp) end
    end

    local exits = {}
    for k,v in pairs(stubs) do
        exits[stubmap[v]] = 0
    end
    return exits
end

local function connect_rooms(ID1, ID2, dir1, dir2, no_check)
    -- makes a connection between rooms
    -- can make backwards connection without a check
    local match = false
    if not ID1 and ID2 and dir1 then
        error("Connect Rooms: Missing Required Arguments.",2)
    end
    dir2 = dir2 or reverse_dirs[dir1]
    -- check handling of custom exits here
    if stubmap[dir1] &lt;= 12 then
        setExit(ID1,ID2,stubmap[dir1])
    else
        addSpecialExit(ID1, ID2, dir1)
        setRoomUserData(ID1,"exit " .. dir1,ID2)
    end
    if stubmap[dir1] &gt; 12 then
        -- check handling of custom exits here
        setRoomUserData(ID1,"stub "..dir1, stubmap[dir1])
    end
    local doors1, doors2 = getDoors(ID1), getDoors(ID2)
    local dstatus1, dstatus2 = doors1[short[dir1]] or doors1[dir1], doors2[short[dir2]] or doors2[dir2]
    if dstatus1 ~= dstatus2 then
        if not dstatus1 then
            add_door(ID1,dir1,dstatus2)
        elseif not dstatus2 then
            add_door(ID2,dir2,dstatus1)
        end
    end
    if map.mode ~= "complex" then
        local stubs = getRoomStubs(ID2)
        if stubs[dir2] then match = true end
        if (match or no_check) then
            -- check handling of custom exits here
            if stubmap[dir1] &lt;= 12 then
                setExit(ID2,ID1,stubmap[dir2])
            else
                addSpecialExit(ID2, ID1, dir2)
                setRoomUserData(ID2,"exit " .. dir2,ID1)
            end
            if stubmap[dir2] &gt; 12 then
                -- check handling of custom exits here
                setRoomUserData(ID2,"stub "..dir2, stubmap[dir2])
            end
        end
    end
end

local function check_room(roomID, name, exits, onlyName)
    -- check to see if room name or/and exits match expectations
    if not roomID then
        error("Check Room Error: No ID",2)
    end
    -- check with room hash id
    if map.prompt.hash then
        if map.prompt.hash == getRoomHashByID(roomID) then
            return true
        else
            return false
        end
    end

    if name ~= getRoomName(roomID) then return false end

    -- used in mode "lazy" to match only the room name
    if onlyName then return true end

    local t_exits = table.union(getRoomExits(roomID),getRoomStubs(roomID))
    -- check handling of custom exits here
    for i = 13,#stubmap do
        t_exits[stubmap[i]] = tonumber(getRoomUserData(roomID,"exit " .. stubmap[i])) or (tonumber(getRoomUserData(roomID,"stub " .. stubmap[i])) and 0) or (tonumber(getRoomUserData(roomID,"stub" .. stubmap[i])) and 0) -- for old version
    end
    for k,v in ipairs(exits) do
        if short[v] and not table.contains(t_exits,v) then return false end
        t_exits[v] = nil
    end
    local exits_match = table.is_empty(t_exits) or check_doors(roomID,t_exits)
    if not exits_match then return false end

    -- check room description if enabled
    if map.configs.use_description_matching and map.prompt.description then
        local room_desc = getRoomUserData(roomID, "description")
        if room_desc and room_desc ~= "" then
            if room_desc ~= map.prompt.description then
                map.echo("Room " .. roomID .. " rejected: description mismatch", true)
                return false
            end
        else
            -- room matched by name+exits, store the description
            setRoomUserData(roomID, "description", map.prompt.description)
            map.echo("Stored description for room " .. roomID, true)
        end
    end

    return true
end

local function stretch_map(dir,x,y,z)
    -- stretches a map to make room for just added room that would overlap with existing room
    local dx,dy,dz
    if not dir then return end
    for k,v in pairs(getAreaRooms(map.currentArea)) do
        if v ~= map.currentRoom then
            dx,dy,dz = getRoomCoordinates(v)
            if dx &gt;= x and string.find(dir,"east") then
                dx = dx + 1
            elseif dx &lt;= x and string.find(dir,"west") then
                dx = dx - 1
            end
            if dy &gt;= y and string.find(dir,"north") then
                dy = dy + 1
            elseif dy &lt;= y and string.find(dir,"south") then
                dy = dy - 1
            end
            if dz &gt;= z and string.find(dir,"up") then
                dz = dz + 1
            elseif dz &lt;= z and string.find(dir,"down") then
                dz = dz - 1
            end
            setRoomCoordinates(v,dx,dy,dz)
        end
    end
end

local function create_room(name, exits, dir, coords)
    -- makes a new room with captured name and exits
    -- links with other rooms as appropriate
    -- links to adjacent rooms in direction of exits if in simple mode
    if map.mapping then
        name = map.sanitizeRoomName(name)
        map.echo("New Room: " .. name,false,false,(dir or find_portal or force_portal) and true or false)
        local newID = createRoomID()
        addRoom(newID)
        setRoomArea(newID, map.currentArea)
        setRoomName(newID, name)
        if map.prompt.hash then
            setRoomIDbyHash(newID, map.prompt.hash)
        end
        if map.configs.use_description_matching and map.prompt.description then
            setRoomUserData(newID, "description", map.prompt.description)
            map.echo("Stored description for room " .. newID, true)
        end
        for k,v in ipairs(exits) do
            if stubmap[v] then
                if stubmap[v] &lt;= 12 then
                    setExitStub(newID, stubmap[v], true)
                else
                    -- add special char to prompt special exit
                    if string.find(v, "up") or string.find(v, "down") then
                        setRoomChar(newID, "◎")
                    end
                    -- check handling of custom exits here
                    setRoomUserData(newID, "stub "..v,stubmap[v])
                end
            end
        end
        if dir then
            connect_rooms(map.currentRoom, newID, dir)
        elseif find_portal or force_portal then
            addSpecialExit(map.currentRoom, newID, (find_portal or force_portal))
            setRoomUserData(newID,"portals",tostring(map.currentRoom)..":"..(find_portal or force_portal))
        end
        setRoomCoordinates(newID,unpack(coords))
        local pos_rooms = getRoomsByPosition(map.currentArea,unpack(coords))
        if not (find_portal or force_portal) and map.configs.stretch_map and table.size(pos_rooms) &gt; 1 then
            set_room(newID)
            stretch_map(dir,unpack(coords))
        end
        if map.mode == "simple" then
            local x,y,z = unpack(coords)
            local dx,dy,dz,rooms
            for k,v in ipairs(exits) do
                if stubmap[v] then
                    dx,dy,dz = unpack(coordmap[stubmap[v]])
                    rooms = getRoomsByPosition(map.currentArea,x+dx,y+dy,z+dz)
                    if table.size(rooms) == 1 then
                        connect_rooms(newID,rooms[0],v)
                    end
                end
            end
        end
        set_room(newID)
    end
end

local function find_area_limits(areaID)
    -- used to find min and max coordinate limits for an area
    if not areaID then
        error("Find Limits: Missing area ID",2)
    end
    local rooms = getAreaRooms(areaID)
    local minx, miny, minz = getRoomCoordinates(rooms[0])
    local maxx, maxy, maxz = minx, miny, minz
    local x,y,z
    for k,v in pairs(rooms) do
        x,y,z = getRoomCoordinates(v)
        minx = math.min(x,minx)
        maxx = math.max(x,maxx)
        miny = math.min(y,miny)
        maxy = math.max(y,maxy)
        minz = math.min(z,minz)
        maxz = math.max(z,maxz)
    end
    return minx, maxx, miny, maxy, minz, maxz
end

local function find_link(name, exits, dir, max_distance)
    -- search for matching room in desired direction
    -- in lazy mode check_room search only by name
    local x,y,z = getRoomCoordinates(map.currentRoom)
    if map.mapping and x then
        if max_distance &lt; 1 then
            max_distance = nil
        else
            max_distance = max_distance - 1
        end
        if not stubmap[dir] or not coordmap[stubmap[dir]] then return end
        local dx,dy,dz = unpack(coordmap[stubmap[dir]])
        local minx, maxx, miny, maxy, minz, maxz = find_area_limits(map.currentArea)
        local rooms, match, stubs
        if max_distance then
            minx, maxx = x - max_distance, x + max_distance
            miny, maxy = y - max_distance, y + max_distance
            minz, maxz = z - max_distance, z + max_distance
        end
        -- find link from room hash first
        if map.prompt.hash then
            local room = getRoomIDbyHash(map.prompt.hash)
            if room &gt; 0 then
                match = room
            end
        else
            repeat
                x, y, z = x + dx, y + dy, z + dz
                rooms = getRoomsByPosition(map.currentArea,x,y,z)
            until (x &gt; maxx or x &lt; minx or y &gt; maxy or y &lt; miny or z &gt; maxz or z &lt; minz or not table.is_empty(rooms))
            for k,v in pairs(rooms) do
                if check_room(v,name,exits,false) then
                    match = v
                    break
                elseif map.mode == "lazy" and check_room(v,name,exits,true) then
                    match = v
                    break
                end
            end
        end
        if match then
            connect_rooms(map.currentRoom, match, dir)
            set_room(match)
        else
            x,y,z = getRoomCoordinates(map.currentRoom)
            create_room(name, exits, dir,{x+dx,y+dy,z+dz})
        end
    end
end

local function move_map()
    -- tries to move the map to the next room
    local move = table.remove(move_queue,1)
    if move or random_move then
        local exits = (map.currentRoom and getRoomExits(map.currentRoom)) or {}
        -- check handling of custom exits here
        if map.currentRoom then
            for i = 13, #stubmap do
                exits[stubmap[i]] = tonumber(getRoomUserData(map.currentRoom,"exit " .. stubmap[i]))
            end
        end
        local special = (map.currentRoom and getSpecialExitsSwap(map.currentRoom)) or {}
        if move and not exits[move] and not special[move] then
            for k,v in pairs(special) do
                if string.starts(k,move) then
                    move = k
                    break
                end
            end
        end
        if find_portal then
            map.find_me(map.currentName,map.currentExits,move)
            find_portal = false
        elseif force_portal then
            find_portal = false
            map.echo("Creating portal destination")
            create_room(map.currentName, map.currentExits, nil, {getRoomCoordinates(map.currentRoom)})
            force_portal = false
        elseif move == "recall" and map.save.recall[map.character] then
            set_room(map.save.recall[map.character])
        elseif move == map.configs.lang_dirs['look'] and map.currentRoom and not check_room(map.currentRoom, map.currentName, map.currentExits) then
            -- this check isn't working as intended, find out why
            map.find_me(map.currentName,map.currentExits)
        else
            local onlyName
            if map.mode == "lazy" then
              onlyName = true
            else
              onlyName = false
            end
            if exits[move] and (vision_fail or check_room(exits[move], map.currentName, map.currentExits, onlyName)) then
                set_room(exits[move])
            elseif special[move] and (vision_fail or check_room(special[move], map.currentName, map.currentExits, onlyName)) then
                set_room(special[move])
            elseif not vision_fail then
                if map.mapping and move then
                    find_link(map.currentName, map.currentExits, move, map.configs.max_search_distance)
                else
                    map.find_me(map.currentName,map.currentExits, move)
                end
            end
        end
        vision_fail = false
    end
end

local function capture_move_cmd(dir,priority)
    -- captures valid movement commands
    local configs = map.configs
    if configs.clear_lines_on_send then
        lines = {}
    end
    dir = string.lower(dir)
    if dir == "/" then dir = "recall" end
    if dir == configs.lang_dirs['l'] then dir = configs.lang_dirs['look'] end
    if configs.use_translation then
        dir = configs.translate[dir] or dir
    end
    local door = string.match(dir,"open (%a+)")
    if map.mapping and door and (exitmap[door] or short[door]) then
        local doors = getDoors(map.currentRoom)
        if not doors[door] and not doors[short[door]] then
            map.set_door(door,"","")
        end
    end
    for i,v in ipairs(map.save.move_methods) do
    	local str = string.match(dir, v .. " (%a+)")
    	if str then 
    		dir = str
    		break
    	end
    end
    local portal = string.match(dir,"enter (%a+)")
    if map.mapping and portal then
        local portals = getSpecialExitsSwap(map.currentRoom)
        if not portals[dir] then
            map.set_portal(dir, true)
        end
    end
    if table.contains(exitmap,dir) or string.starts(dir,"enter ") or dir == "recall" then
      if dir ~= configs.lang_dirs['look'] then
        if priority then
            table.insert(move_queue,1,exitmap[dir] or dir)
        else
            table.insert(move_queue,exitmap[dir] or dir)
        end
      else
        if configs.search_on_look == true then
          table.insert(move_queue, dir)
        end
    end				
    elseif map.currentRoom then
        local special = getSpecialExitsSwap(map.currentRoom) or {}
        if special[dir] then
            if priority then
                table.insert(move_queue,1,dir)
            else
                table.insert(move_queue,dir)
            end
        end
    end
end

local function deduplicate_exits(exits)
  local deduplicated_exits = {}
  for _, v in ipairs(exits) do
    deduplicated_exits[v] = true
  end

  return table.keys(deduplicated_exits)
end
local function capture_room_info(name, exits)
    -- captures room info, and tries to move map to match
    if (not vision_fail) and name and exits then
        map.set("prevName", map.currentName)
        map.set("prevExits", map.currentExits)
        name = string.trim(name)
        map.set("currentName", name)
        if exits:ends(".") then exits = exits:sub(1,#exits-1) end
        if not map.configs.use_translation then
            exits = string.gsub(string.lower(exits)," and "," ")
        end
        map.set("currentExits", {})
        for w in string.gmatch(exits,"%a+") do
            if map.configs.use_translation then
                local dir = map.configs.translate and map.configs.translate[w]
                if dir then table.insert(map.currentExits,dir) end
            else
                table.insert(map.currentExits,w)
            end
        end
        undupeExits = deduplicate_exits(map.currentExits)
        map.set("currentExits", undupeExits)
        map.echo(string.format("Exits Captured: %s (%s)",exits, table.concat(map.currentExits, " ")),true)
        move_map()
    elseif vision_fail then
        move_map()
    end
end

local function find_area(name)
    -- searches for the named area, and creates it if necessary
    local areas = getAreaTable()
    local areaID
    for k,v in pairs(areas) do
        if string.lower(name) == string.lower(k) then
            areaID = v
            break
        end
    end
    if not areaID then areaID = addAreaName(name) end
    if not areaID then
        show_err("Invalid Area. No such area found, and area could not be added.",true)
    end
    map.set("currentArea", areaID)
end

function map.load_map(address)
    local path = profilePath .. "/map downloads/map.dat"
    if not address then
        loadMap(path)
        map.echo("Map reloaded from local copy.")
    else
        if not string.match(address,"/[%a_]+%.dat$") then
            address = address .. "/map.dat"
        end
        downloading = true
        downloadFile(path, address)
        map.echo(string.format("Downloading map file from: %s.",address))
    end
end

function map.set_exit(dir,roomID)
    -- used to set unusual exits from the room you are standing in
    if map.mapping then
        roomID = tonumber(roomID)
        if not roomID then
            show_err("Set Exit: Invalid Room ID")
        end
        if not table.contains(exitmap,dir) and not string.starts(dir, "-p ") then
            show_err("Set Exit: Invalid Direction")
        end

        if not string.starts(dir, "-p ") then
            local exit
            if stubmap[exitmap[dir] or dir] &lt;= 12 then
                exit = short[exitmap[dir] or dir]
                setExit(map.currentRoom,roomID,exit)
            else
                -- check handling of custom exits here
                exit = exitmap[dir] or dir
                exit = "exit " .. exit
                setRoomUserData(map.currentRoom,exit,roomID)
            end
            map.echo("Exit " .. dir .. " now goes to roomID " .. roomID)
        else
            dir = string.gsub(dir,"^-p ","")
            addSpecialExit(map.currentRoom,roomID,dir)
            map.echo("Special exit '" .. dir .. "' now goes to roomID " .. roomID)
        end
    else
        map.echo("Not mapping",false,true)
    end
end

function map.find_path(roomName,areaName,return_tables)
    areaName = (areaName ~= "" and areaName) or nil
    local rooms = find_room(roomName,areaName)
    local found,dirs = false,{}
    local path = {}
    for k,v in pairs(rooms) do
        found = getPath(map.currentRoom,k)
        if found and (#dirs == 0 or #dirs &gt; #speedWalkDir) then
            dirs = speedWalkDir
            path = speedWalkPath
        end
    end
    if return_tables then
        if table.is_empty(path) then
            path, dirs = nil, nil
        end
        return path, dirs
    else
        if #dirs &gt; 0 then
            map.echo("Path to " .. roomName .. ((areaName and " in " .. areaName) or "") .. ": " .. table.concat(dirs,", "))
        else
            map.echo("No path found to " .. roomName .. ((areaName and " in " .. areaName) or "") .. ".",false,true)
        end
    end
end

function map.export_area(name)
    -- used to export a single area to a file
    local areas = getAreaTable()
    name = string.lower(name)
    for k,v in pairs(areas) do
        if name == string.lower(k) then name = k end
    end
    if not areas[name] then
        show_err("No such area.")
    end
    local rooms = getAreaRooms(areas[name])
    local tmp = {}
    for k,v in pairs(rooms) do
        tmp[v] = v
    end
    rooms = tmp
    local tbl = {}
    tbl.name = name
    tbl.rooms = {}
    tbl.exits = {}
    tbl.special = {}
    local rname, exits, stubs, doors, special, portals, door_up, door_down, coords, environment, roomChar
    for k,v in pairs(rooms) do
        rname = getRoomName(v)
        exits = getRoomExits(v)
        stubs = getExitStubs(v)
        doors = getDoors(v)
        special = getSpecialExitsSwap(v)
        portals = getRoomUserData(v,"portals") or ""
	environment = getRoomEnv(v)
	roomChar = getRoomChar(v)
        coords = {getRoomCoordinates(v)}
        tbl.rooms[v] = {name = rname, coords = coords, exits = exits, stubs = stubs, doors = doors, door_up = door_up,
            door_down = door_down, door_in = door_in, door_out = door_out, special = special, portals = portals, environment = environment, roomChar = roomChar}
        tmp = {}
        for k1,v1 in pairs(exits) do
            if not table.contains(rooms,v1) then
                tmp[k1] = {v1, getRoomName(v1)}
            end
        end
        if not table.is_empty(tmp) then
            tbl.exits[v] = tmp
        end
        tmp = {}
        for k1,v1 in pairs(special) do
            if not table.contains(rooms,v1) then
                tmp[k1] = {v1, getRoomName(v1)}
            end
        end
        if not table.is_empty(tmp) then
            tbl.special[v] = tmp
        end
    end
    local path = profilePath.."/"..string.gsub(string.lower(name),"%s","_")..".dat"
    table.save(path,tbl)
    map.echo("Area " .. name .. " exported to " .. path)
end

function map.import_area(name)
    name = profilePath .. "/" .. string.gsub(string.lower(name),"%s","_") .. ".dat"
    local tbl = {}
    table.load(name,tbl)
    if table.is_empty(tbl) then
        show_err("No file found")
    end
    local areas = getAreaTable()
    local areaID = areas[tbl.name] or addAreaName(tbl.name)
    local rooms = {}
    local ID
    for k,v in pairs(tbl.rooms) do
        ID = createRoomID()
        rooms[k] = ID
        addRoom(ID)
        setRoomName(ID,v.name)
        setRoomArea(ID,areaID)
        setRoomCoordinates(ID,unpack(v.coords))
        if type(v.stubs) == "table" then
            for i,j in pairs(v.stubs) do
                setExitStub(ID,j,true)
            end
        end
        for i,j in pairs(v.doors) do
            setDoor(ID,i,j)
        end
        setRoomUserData(ID,"portals",v.portals)
	setRoomEnv(ID,v.environment)
	setRoomChar(ID,v.roomChar)
    end
    for k,v in pairs(tbl.rooms) do
        for i,j in pairs(v.exits) do
            if rooms[j] then
                connect_rooms(rooms[k],rooms[j],i)
            end
        end
        for i,j in pairs(v.special) do
            if rooms[j] then
                addSpecialExit(rooms[k],rooms[j],i)
            end
        end
    end
    for k,v in pairs(tbl.exits) do
        for i,j in pairs(v) do
            if getRoomName(j[1]) == j[2] then
                connect_rooms(rooms[k],j[1],i)
            end
        end
    end
    for k,v in pairs(tbl.special) do
        for i,j in pairs(v) do
            addSpecialExit(k,j[1],i)
        end
    end
    map.fix_portals()
    map.echo("Area " .. tbl.name .. " imported from " .. name)
end

function map.set_recall()
    -- assigned the current room to be recall for the current character
    map.save.recall[map.character] = map.currentRoom
    table.save(profilePath .. "/map downloads/map_save.dat",map.save)
    map.echo("Recall room set to: " .. getRoomName(map.currentRoom) .. ".")
end

function map.set_portal(name, is_auto)
    -- creates a new portal in the room
    if map.mapping then
        if not string.starts(name,"-f ") then
            find_portal = name
        else
            name = string.gsub(name,"^-f ","")
            force_portal = name
        end
        move_queue = {name}
        if not is_auto then
            send(name)
        end
    else
        map.echo("Not mapping",false,true)
    end
end

function map.set_mode(mode)
    -- switches mapping modes
    if not table.contains({"lazy","simple","normal","complex"},mode) then
        show_err("Invalid Map Mode, must be 'lazy', 'simple', 'normal' or 'complex'.")
    end
    map.set("mode", mode)
    map.echo("Current mode set to: " .. mode)
end

function map.start_mapping(area_name)
    -- starts mapping, and sets the current area to the given one, or uses the current one
    if not map.currentName then
        show_err("Room detection not yet working, see &lt;yellow&gt;map basics&lt;reset&gt; for guidance.")
    end
    local rooms
    move_queue = {}
    area_name = area_name ~= "" and area_name or nil
    if map.currentArea and not area_name then
        local areas = getAreaTableSwap()
        area_name = areas[map.currentArea]
    end
    if not area_name then
        show_err("You haven't started mapping yet, how should the first area be called? Set it with: &lt;yellow&gt;start mapping &lt;area name&gt;&lt;reset&gt;")
    end
    map.echo("Now mapping in area: " .. area_name)
    map.set("mapping", true)
    find_area(area_name)
    rooms = find_room(map.currentName, map.currentArea)
    if table.is_empty(rooms) then
        if map.currentRoom and getRoomName(map.currentRoom) == map.currentName then
            map.set_area(area_name)
        else
            create_room(map.currentName, map.currentExits, nil, {0,0,0})
        end
    elseif map.currentRoom and map.currentArea ~= getRoomArea(map.currentRoom) then
        map.set_area(area_name)
    end
end

function map.stop_mapping()
    map.set("mapping", false)
    map.echo("Mapping off.")
end

function map.clear_moves()
    local commands_in_queue = #move_queue
    move_queue = {}
    map.echo("Move queue cleared, "..commands_in_queue.." commands removed.")
end

function map.show_moves()
    map.echo("Moves: "..(move_queue and table.concat(move_queue, ', ') or '(queue empty)'))
end

function map.set_area(name)
    -- assigns the current room to the area given, creates the area if necessary
    if map.mapping then
        find_area(name)
        if map.currentRoom and getRoomArea(map.currentRoom) ~= map.currentArea then
            setRoomArea(map.currentRoom,map.currentArea)
            set_room(map.currentRoom)
        end
    else
        map.echo("Not mapping",false,true)
    end
end

function map.set_door(dir,status,one_way)
    -- adds a door on a given exit
    if map.mapping then
        if not map.currentRoom then
            show_err("Make Door: No room found.")
        end
        dir = exitmap[dir] or dir
        if not stubmap[dir] then
            show_err("Make Door: Invalid direction.")
        end
        status = (status ~= "" and status) or "closed"
        one_way = (one_way ~= "" and one_way) or "no"
        if not table.contains({"yes","no"},one_way) then
            show_err("Make Door: Invalid one-way status, must be yes or no.")
        end

        local exits = getRoomExits(map.currentRoom)
        local exit
        -- check handling of custom exits here
        for i = 13,#stubmap do
            exit = "exit " .. stubmap[i]
            exits[stubmap[i]] = tonumber(getRoomUserData(map.currentRoom,exit))
        end
        local target_room = exits[dir]
        if target_room then
            exits = getRoomExits(target_room)
            -- check handling of custom exits here
            for i = 13,#stubmap do
                exit = "exit " .. stubmap[i]
                exits[stubmap[i]] = tonumber(getRoomUserData(target_room,exit))
            end
        end
        if one_way == "no" and (target_room and exits[reverse_dirs[dir]] == map.currentRoom) then
            add_door(target_room,reverse_dirs[dir],status)
        end
        add_door(map.currentRoom,dir,status)
        map.echo(string.format("Adding %s door to the %s", status, dir))
    else
        map.echo("Not mapping",false,true)
    end
end

function map.shift_room(dir)
    -- shifts a room around on the map
    if map.mapping then
        dir = exitmap[dir] or (table.contains(exitmap,dir) and dir)
        if not dir then
            show_err("Shift Room: Exit not found")
        end
        local x,y,z = getRoomCoordinates(map.currentRoom)
        dir = stubmap[dir]
        local coords = coordmap[dir]
        x = x + coords[1]
        y = y + coords[2]
        z = z + coords[3]
        setRoomCoordinates(map.currentRoom,x,y,z)
        centerview(map.currentRoom)
        map.echo("Shifting room",true)
    else
        map.echo("Not mapping",false,true)
    end
end

local function check_link(firstID, secondID, dir)
    -- check to see if two rooms are connected in a given direction
    if not firstID then error("Check Link Error: No first ID",2) end
    if not secondID then error("Check Link Error: No second ID",2) end
    local name = getRoomName(firstID)
    local exits1 = table.union(getRoomExits(firstID),getRoomStubs(firstID))
    local exits2 = table.union(getRoomExits(secondID),getRoomStubs(secondID))
    local exit
    -- check handling of custom exits here
    for i = 13,#stubmap do
        exit = "exit " .. stubmap[i]
        exits1[stubmap[i]] = tonumber(getRoomUserData(firstID,exit))
        exits2[stubmap[i]] = tonumber(getRoomUserData(secondID,exit))
    end
    local checkID = exits2[reverse_dirs[dir]]
    local exits = {}
    for k,v in pairs(exits1) do
        table.insert(exits,k)
    end
    return checkID and check_room(checkID,name,exits)
end

function map.find_me(name, exits, dir, manual)
    -- tries to locate the player using the current room name and exits, and if provided, direction of movement
    -- if direction of movement is given, narrows down possibilities using previous room info
    if move ~= "recall" then move_queue = {} end
    -- find from room hash id - map.find_me(nil, nil, nil, false)
    if map.prompt.hash then
        local room = getRoomIDbyHash(map.prompt.hash)
        if room &gt; 0 then
            set_room(room)
            map.echo("Room found, ID: " .. room, true)
            return
        else
            map.echo("Room not found in map database!", not manual, true)
            return
        end
    end
    local check = dir and map.currentRoom and table.contains(exitmap,dir)
    name = name or map.currentName
    exits = exits or map.currentExits
    if not name and not exits then
        show_err("Room not found, complete room name and exit data not available.")
    end
    local rooms = find_room(name)
    local match_IDs = {}
    for k,v in pairs(rooms) do
        if check_room(k, name, exits) then
            table.insert(match_IDs,k)
        end
    end
    rooms = match_IDs
    match_IDs = {}
    if table.size(rooms) &gt; 1 and check then
        for k,v in pairs(rooms) do
            if check_link(map.currentRoom,v,dir) then
                table.insert(match_IDs,v)
            end
        end
    elseif random_move then
        for k,v in pairs(getRoomExits(map.currentRoom)) do
            if check_room(v,map.currentName,map.currentExits) then
                table.insert(match_IDs,v)
            end
        end
    end
    if table.size(match_IDs) == 0 then
        match_IDs = rooms
    end
    if table.index_of(match_IDs,map.currentRoom) then
        match_IDs = {map.currentRoom}
    end
    if not table.is_empty(match_IDs) and not find_portal then
        set_room(match_IDs[1])
        map.echo("Room found, ID: " .. match_IDs[1],true)
    elseif find_portal then
        if not table.is_empty(match_IDs) then
            map.echo("Found portal destination, linking rooms",false,false,true)
            addSpecialExit(map.currentRoom,match_IDs[1],find_portal)
            local portals = getRoomUserData(match_IDs[1],"portals") or ""
            portals = portals .. "," .. tostring(map.currentRoom)..":"..find_portal
            setRoomUserData(match_IDs[1],"portals",portals)
            set_room(match_IDs[1])
            map.echo("Room found, ID: " .. match_IDs[1],true)
        else
            map.echo("Creating portal destination",false,false,true)
            create_room(map.currentName, map.currentExits, nil, {getRoomCoordinates(map.currentRoom)})
        end
        find_portal = false
    elseif table.is_empty(match_IDs) then
        map.echo("Room not found in map database", not manual, true)
    end
end

function map.fix_portals()
    if map.mapping then
        -- used to clear and update data for portal back-referencing
        local rooms = getRooms()
        local portals
        for k,v in pairs(rooms) do
            setRoomUserData(k,"portals","")
        end
        for k,v in pairs(rooms) do
            for cmd,room in pairs(getSpecialExitsSwap(k)) do
                portals = getRoomUserData(room,"portals") or ""
                if portals ~= "" then portals = portals .. "," end
                portals = portals .. tostring(k) .. ":" .. cmd
                setRoomUserData(room,"portals",portals)
            end
        end
        map.echo("Portals Fixed")
    else
        map.echo("Not mapping",false,true)
    end
end

function map.merge_rooms()
    -- used to combine essentially identical rooms with the same coordinates
    -- typically, these are generated due to mapping errors
    if map.mapping then
        map.echo("Merging rooms")
        local x,y,z = getRoomCoordinates(map.currentRoom)
        local rooms = getRoomsByPosition(map.currentArea,x,y,z)
        local exits, portals, room, cmd, curportals
        local room_count = 1
        for k,v in pairs(rooms) do
            if v ~= map.currentRoom then
                if getRoomName(v) == getRoomName(map.currentRoom) then
                    room_count = room_count + 1
                    for k1,v1 in pairs(getRoomExits(v)) do
                        setExit(map.currentRoom,v1,stubmap[k1])
                        exits = getRoomExits(v1)
                        if exits[reverse_dirs[k1]] == v then
                            setExit(v1,map.currentRoom,stubmap[reverse_dirs[k1]])
                        end
                    end
                    for k1,v1 in pairs(getDoors(v)) do
                        setDoor(map.currentRoom,k1,v1)
                    end
                    for k1,v1 in pairs(getSpecialExitsSwap(v)) do
                        addSpecialExit(map.currentRoom,v1,k1)
                    end
                    portals = getRoomUserData(v,"portals") or ""
                    if portals ~= "" then
                        portals = string.split(portals,",")
                        for k1,v1 in ipairs(portals) do
                            room,cmd = unpack(string.split(v1,":"))
                            addSpecialExit(tonumber(room),map.currentRoom,cmd)
                            curportals = getRoomUserData(map.currentRoom,"portals") or ""
                            if not string.find(curportals,room) then
                                curportals = curportals .. "," .. room .. ":" .. cmd
                                setRoomUserData(map.currentRoom,"portals",curportals)
                            end
                        end
                    end
                    -- check handling of custom exits here for doors and exits, and reverse exits
                    for i = 13,#stubmap do
                        local door = "door " .. stubmap[i]
                        local tmp = tonumber(getRoomUserData(v,door))
                        if tmp then
                            setRoomUserData(map.currentRoom,door,tmp)
                        end
                        local exit = "exit " .. stubmap[i]
                        tmp = tonumber(getRoomUserData(v,exit))
                        if tmp then
                            setRoomUserData(map.currentRoom,exit,tmp)
                            if tonumber(getRoomUserData(tmp, "exit " .. reverse_dirs[stubmap[i]])) == v then
                                setRoomUserData(tmp, exit, map.currentRoom)
                            end
                        end
                    end
                    deleteRoom(v)
                end
            end
        end
        if room_count &gt; 1 then
            map.echo(room_count .. " rooms merged", true)
        end
    else
        map.echo("Not mapping",false,true)
    end
end

function map.findAreaID(areaname, exact)
    local areaname = areaname:lower()
    local list = getAreaTable()

    -- iterate over the list of areas, matching them with substring match.
    -- if we get match a single area, then return its ID, otherwise return
    -- 'false' and a message that there are than one are matches
    local returnid, fullareaname, multipleareas = nil, nil, {}
    for area, id in pairs(list) do
        if (not exact and area:lower():find(areaname, 1, true)) or (exact and areaname == area:lower()) then
            returnid = id
            fullareaname = area
            multipleareas[#multipleareas+1] = area
        end
    end

    if #multipleareas == 1 then
        return returnid, fullareaname
    else
        return nil, nil, multipleareas
    end
end

function map.echoRoomList(areaname, exact)
    local areaid, msg, multiples
    local listcolor, othercolor = "DarkSlateGrey","LightSlateGray"
    if tonumber(areaname) then
        areaid = tonumber(areaname)
        msg = getAreaTableSwap()[areaid]
    else
        areaid, msg, multiples = map.findAreaID(areaname, exact)
    end
    if areaid then
        local roomlist, endresult = getAreaRooms(areaid) or {}, {}

        -- obtain a room list for each of the room IDs we got
        local getRoomName = getRoomName
        for _, id in pairs(roomlist) do
            endresult[id] = getRoomName(id)
        end
        roomlist[#roomlist+1], roomlist[0] = roomlist[0], nil
        -- sort room IDs so we can display them in order
        table.sort(roomlist)

        local echoLink, format, fg, echo = echoLink, string.format, fg, cecho
        -- now display something half-decent looking
        cecho(format("&lt;%s&gt;List of all rooms in &lt;%s&gt;%s&lt;%s&gt; (areaID &lt;%s&gt;%s&lt;%s&gt; - &lt;%s&gt;%d&lt;%s&gt; rooms):\n",
            listcolor, othercolor, msg, listcolor, othercolor, areaid, listcolor, othercolor, #roomlist, listcolor))
        -- use pairs, as we can have gaps between room IDs
        for _, roomid in pairs(roomlist) do
            local roomname = endresult[roomid]
            cechoLink(format("&lt;%s&gt;%7s",othercolor,roomid), 'map.speedwalk('..roomid..')',
                format("Go to %s (%s)", roomid, tostring(roomname)), true)
            cecho(format("&lt;%s&gt;: &lt;%s&gt;%s&lt;%s&gt;.\n", listcolor, othercolor, roomname, listcolor))
        end
    elseif not areaid and #multiples &gt; 0 then
        local allareas, format = getAreaTable(), string.format
        local function countrooms(areaname)
            local areaid = allareas[areaname]
            local allrooms = getAreaRooms(areaid) or {}
            local areac = (#allrooms or 0) + (allrooms[0] and 1 or 0)
            return areac
        end
        map.echo("For which area would you want to list rooms for?")
        for _, areaname in ipairs(multiples) do
            echo("  ")
            setUnderline(true)
            cechoLink(format("&lt;%s&gt;%-40s (%d rooms)", othercolor, areaname, countrooms(areaname)),
                'map.echoRoomList("'..areaname..'", true)', "Click to view the room list for "..areaname, true)
            setUnderline(false)
            echo("\n")
        end
    else
        map.echo(string.format("Don't know of any area named '%s'.", areaname),false,true)
    end
    resetFormat()
end

function map.echoAreaList()
    local totalroomcount = 0
    local rlist = getAreaTableSwap()
    local listcolor, othercolor = "DarkSlateGrey","LightSlateGray"

    -- count the amount of rooms in an area, taking care to count the room in the 0th
    -- index as well if there is one
    -- saves the total room count on the side as well
    local function countrooms(areaid)
        local allrooms = getAreaRooms(areaid) or {}
        local areac = (#allrooms or 0) + (allrooms[0] and 1 or 0)
        totalroomcount = totalroomcount + areac
        return areac
    end

    local getAreaRooms, cecho, fg, echoLink = getAreaRooms, cecho, fg, echoLink
    cecho(string.format("&lt;%s&gt;List of all areas we know of (click to view room list):\n",listcolor))
    for id = 1,table.maxn(rlist) do
        if rlist[id] then
            cecho(string.format("&lt;%s&gt;%7d ", othercolor, id))
            fg(listcolor)
            echoLink(string.format("%-40s (%d rooms)",rlist[id],countrooms(id)), 'map.echoRoomList("'..id..'", true)',
                "View the room list for "..rlist[id], true)
            echo("\n")
        end
    end
    cecho(string.format("&lt;%s&gt;Total amount of rooms in this map: %s\n", listcolor, totalroomcount))
end

function map.search_timer_check()
    if find_prompt then
        map.echo("Prompt not auto-detected, use 'map prompt' to set a prompt pattern.",false,true)
        find_prompt = false
    end
end

function map.find_prompt()
    find_prompt = true
    map.echo("Searching for prompt.")
    send("\n", false)
    tempTimer(5, "map.search_timer_check()")
end

function map.make_prompt_pattern(str)
    if not str:starts("^") then str = "^"..str end
    map.save.prompt_pattern[map.character] = str
    find_prompt = false
    table.save(profilePath .. "/map downloads/map_save.dat",map.save)
    map.echo("Prompt pattern set: " .. str)
end

function map.make_ignore_pattern(str)
    map.save.ignore_patterns = map.save.ignore_patterns or {}
    if not table.contains(map.save.ignore_patterns,str) then
        table.insert(map.save.ignore_patterns,str)
        map.echo("Ignore pattern added: " .. str)
    else
        table.remove(map.save.ignore_patterns, table.index_of(map.save.ignore_patterns, str))
        map.echo("Ignore pattern removed: " .. str)
    end
    table.save(profilePath .. "/map downloads/map_save.dat",map.save)
end

function map.make_move_method(str)
    map.save.move_methods = map.save.move_methods or {}
    if not table.contains(map.save.move_methods,str) then
        table.insert(map.save.move_methods,str)
        map.echo("Move method added: " .. str)
    else
        table.remove(map.save.move_methods, table.index_of(map.save.move_methods, str))
        map.echo("Move method removed: " .. str)
    end
    table.save(profilePath .. "/map downloads/map_save.dat",map.save)
end

local function grab_line()
    table.insert(lines,line)
    if map.save.prompt_pattern[map.character] and string.match(line, map.save.prompt_pattern[map.character]) then
        if map.prompt.exits and map.prompt.exits ~= "" then
            raiseEvent("onNewRoom")
        end
        print_wait_echoes()
        map.echo("Prompt captured",true)
    end
    if find_prompt then
        for k,v in ipairs(map.configs.prompt_test_patterns) do
            if string.match(line,v) then
                map.save.prompt_pattern[map.character] = v
                table.save(profilePath .. "/map downloads/map_save.dat",map.save)
                find_prompt = false
                map.echo("Prompt found")
                break
            end
        end
    end
end

local function name_search()
    local room_name
    local description_lines = {}
    if map.configs.custom_name_search then
        room_name = mudlet.custom_name_search(lines)
    else
        local line_count = #lines + 1
        local cur_line, last_line, last_line_index
        local room_name_line
        local prompt_pattern = map.save.prompt_pattern[map.character]
        if not prompt_pattern then return end
        while not room_name do
            line_count = line_count - 1
            if not lines[line_count] then break end
            cur_line = lines[line_count]
            for k,v in ipairs(map.save.ignore_patterns) do
                cur_line = string.trim(string.gsub(cur_line,v,""))
            end
            if string.find(cur_line,prompt_pattern) then
                cur_line = string.trim(string.gsub(cur_line,prompt_pattern,""))
                if cur_line ~= "" then
                    room_name = cur_line
                    room_name_line = line_count
                else
                    room_name = last_line
                    room_name_line = last_line_index
                end
            elseif line_count == 1 then
                cur_line = string.trim(cur_line)
                if cur_line ~= "" then
                    room_name = cur_line
                    room_name_line = line_count
                else
                    room_name = last_line
                    room_name_line = last_line_index
                end
            elseif not string.match(cur_line,"^%s*$") then
                last_line = cur_line
                last_line_index = line_count
            end
        end
        -- extract description lines (lines after the room name but before prompt/exits)
        if map.configs.use_description_matching and room_name_line then
            for i = room_name_line + 1, #lines do
                local desc_line = lines[i]
                -- skip empty lines and lines matching the prompt pattern
                if desc_line and not string.match(desc_line, "^%s*$") and not string.find(desc_line, prompt_pattern) then
                    for k,v in ipairs(map.save.ignore_patterns) do
                        desc_line = string.trim(string.gsub(desc_line,v,""))
                    end
                    if desc_line ~= "" then
                        table.insert(description_lines, desc_line)
                    end
                end
            end
        end
        lines = {}
        room_name = room_name:sub(1,100)
    end
    -- store description for later use in room matching
    if map.configs.use_description_matching and #description_lines &gt; 0 then
        map.prompt.description = table.concat(description_lines, "\n")
        map.echo("Description captured: " .. map.prompt.description:sub(1, 100) .. (#map.prompt.description &gt; 100 and "..." or ""), true)
    else
        map.prompt.description = nil
    end
    return room_name
end

local function handle_exits(exits)
    local room = map.prompt.room or name_search()
    room = map.sanitizeRoomName(room)
    exits = map.prompt.exits or exits
    exits = string.lower(exits)
    exits = string.gsub(exits,"%a+", exitmap)
    if room then
        map.echo("Room Name Captured: " .. room, true)
        room = string.trim(room)
        capture_room_info(room, exits)
        map.prompt.room = nil
        map.prompt.exits = nil
        map.prompt.description = nil
    end
end

local continue_walk, timerID
continue_walk = function(new_room)
    if not walking then return end
    -- calculate wait time until next command, with randomness
    local wait = map.configs.speedwalk_delay or 0
    if wait &gt; 0 and map.configs.speedwalk_random then
        wait = wait * (1 + math.random(0,100)/100)
    end
    -- if no wait after new room, move immediately
    if new_room and map.configs.speedwalk_wait and wait == 0 then
        new_room = false
    end
    -- send command if we don't need to wait
    if not new_room then
        --handle script exits
        if string.starts(map.walkDirs[1], "script:") then
          map.walkDirs[1] = string.gsub(map.walkDirs[1], "script:", "")
          loadstring(table.remove(map.walkDirs,1))()
        else
          send(table.remove(map.walkDirs,1))
        end
        -- check to see if we are done
        if #map.walkDirs == 0 then
            walking = false
            speedWalkPath, speedWalkWeight = {}, {}
            raiseEvent("sysSpeedwalkFinished")
        end
    end
    -- make tempTimer to send next command if necessary
    if walking and (not map.configs.speedwalk_wait or (map.configs.speedwalk_wait and wait &gt; 0)) then
        if timerID then killTimer(timerID) end
        timerID = tempTimer(wait, function() continue_walk() end)
    end
end

function map.speedwalk(roomID, walkPath, walkDirs)
    roomID = roomID or speedWalkPath[#speedWalkPath]
    getPath(map.currentRoom, roomID)
    walkPath = speedWalkPath
    walkDirs = speedWalkDir
    if #speedWalkPath == 0 then
        map.echo("No path to chosen room found.",false,true)
        return
    end
    table.insert(walkPath, 1, map.currentRoom)
    -- go through dirs to find doors that need opened, etc
    -- add in necessary extra commands to walkDirs table
    local k = 1
    repeat
        local id, dir = walkPath[k], walkDirs[k]
        if exitmap[dir] or short[dir] then
            local door = check_doors(id, exitmap[dir] or dir)
            local status = door and door[dir]
            if status and status &gt; 1 then
                -- if locked, unlock door
                if status == 3 then
                    table.insert(walkPath,k,id)
                    table.insert(walkDirs,k,"unlock " .. (exitmap[dir] or dir))
                    k = k + 1
                end
                -- if closed, open door
                table.insert(walkPath,k,id)
                table.insert(walkDirs,k,"open " .. (exitmap[dir] or dir))
                k = k + 1
            end
        end
        k = k + 1
    until k &gt; #walkDirs
    if map.configs.use_translation then
        for k, v in ipairs(walkDirs) do
            walkDirs[k] = map.configs.lang_dirs[v] or v
        end
    end
    -- perform walk
    walking = true
    if map.configs.speedwalk_wait or map.configs.speedwalk_delay &gt; 0 then
        map.walkDirs = walkDirs
        continue_walk()
    else
        for _,dir in ipairs(walkDirs) do
           if string.starts(dir, "script:") then
              dir = string.gsub(dir, "script:", "")
              loadstring(dir)()
            else
              send(dir)
           end
        end
        walking = false
        raiseEvent("sysSpeedwalkFinished")
    end
end

function doSpeedWalk()
    if #speedWalkPath ~= 0 then
        raiseEvent("sysSpeedwalkStarted")
        map.speedwalk(nil, speedWalkPath, speedWalkDir)
    else
        map.echo("No path to chosen room found.",false,true)
    end
end

function map.pauseSpeedwalk()
    if #speedWalkDir ~= 0 then
        walking = false
        raiseEvent("sysSpeedwalkPaused")
        map.echo("Speedwalking paused.")
    else
        map.echo("Not currently speedwalking.")
    end
end

function map.resumeSpeedwalk(delay)
    if #speedWalkDir ~= 0 then
        map.find_me(nil, nil, nil, true)
        raiseEvent("sysSpeedwalkResumed")
        map.echo("Speedwalking resumed.")
        tempTimer(delay or 0, function() map.speedwalk(nil, speedWalkPath, speedWalkDir) end)
    else
        map.echo("Not currently speedwalking.")
    end
end

function map.stopSpeedwalk()
    if #speedWalkDir ~= 0 then
        walking = false
        map.walkDirs, speedWalkDir, speedWalkPath, speedWalkWeight = {}, {}, {}, {}
        raiseEvent("sysSpeedwalkStopped")
        map.echo("Speedwalking stopped.")
    else
        map.echo("Not currently speedwalking.")
    end
end

function map.toggleSpeedwalk(what)
    assert(what == nil or what == "on" or what == "off", "map.toggleSpeedwalk wants 'on', 'off' or nothing as an argument")

    if what == "on" or (what == nil and walking) then
        map.pauseSpeedwalk()
    elseif what == "off" or (what == nil and not walking) then
        map.resumeSpeedwalk()
    end
end

local function check_version()
    downloading = false
    local path = profilePath .. "/map downloads/versions.lua"
    local versions = {}
    table.load(path, versions)
    local pos = table.index_of(versions, map.version) or 0
    if pos ~= #versions then
        enableAlias("Map Update Alias")
        if not map.silentUpdate then
          map.echo(string.format("The Generic Mapping Script is currently &lt;red&gt;%d&lt;reset&gt; versions behind.",#versions - pos))
          map.echo("To update now, please type: &lt;yellow&gt;map update&lt;reset&gt;")
        else
          map.updateVersion()
        end
    end
    map.update_timer = tempTimer(3600, [[map.checkVersion()]])
end

function map.checkVersion()
    if #getRooms() &gt; 0 then
      map.silentUpdate = false
    end    
    if map.update_timer then
        killTimer(map.update_timer)
        map.update_timer = nil
    end
    if not map.update_waiting and map.configs.download_path ~= "" then
        local path, file = profilePath .. "/map downloads", "/versions.lua"
        downloading = true
        downloadFile(path .. file, map.configs.download_path .. file)
        map.update_waiting = true
    end
end

local function update_version()
    downloading = false
    local path = profilePath .. "/map downloads/generic_mapper.xml"
    disableAlias("Map Update Alias")
    map.updatingMapper = true
    uninstallPackage("generic_mapper")
    installPackage(path)
    map.updatingMapper = nil
    if not map.silentUpdate then
      map.echo("Generic Mapping Script updated successfully.")
    end
end

function map.updateVersion()
    local path, file = profilePath .. "/map downloads", "/generic_mapper.xml"
    downloading = true
    downloadFile(path .. file, map.configs.download_path .. file)
end

function map.showMap(shown)
    local configs = map.configs.map_window
    shown = shown or not configs.shown
    map.configs.map_window.shown = shown
    map.silentUpdate = false
    local x, y, w, h, origin = configs.x, configs.y, configs.w, configs.h, configs.origin
    if string.find(origin,"bottom") then
        if y == 0 or y == "0%" then
            y = h
        end
        if type(y) == "number" then
            y = -y
        else
            y = "-"..y
        end
    end
    if string.find(origin,"right") then
        if x == 0 or x == "0%" then
            x = w
        end
        if type(x) == "number" then
            x = -x
        else
            x = "-"..x
        end
    end
    local mapper = Geyser.Mapper:new({name = "my_mapper", x = x, y = y, w = w, h = h})
    mapper:resize(w,h)
    mapper:move(x,y)
    if shown then
        mapper:show()
    else
        mapper:hide()
    end
end

-- some games embed an ASCII map on the same line, which messes up the room room name
-- extract the longest continuous piece of text from the line to be the room name
function map.sanitizeRoomName(roomtitle)
  -- sometimes we get 'nil' for a room title - ignore that silently
  if type(roomtitle) ~= "string" then
    return roomtitle
  end

  if not roomtitle:match("   ") then
    -- if the whole line does not contain a run of three consecutive spaces then
    -- consider the whole line as the room name; this was previously two spaces
    -- but some MUDs do have titles that are multiple (short) sentances AND
    -- put TWO spaces after a full-stop for the first (e.g. After the Plague MUD
    -- on telnet://atp.pedia.szote.u-szeged.hu:3000)
    return roomtitle
  end

  -- otherwise split the text up in double-spaced chunks and return the longest
  -- run of bytes found in those chunks
  local parts = roomtitle:split("  ")
  table.sort(parts, function(a,b) return #a &lt; #b end)
  local longestpart = parts[#parts]

  local trimmed = utf8.match(longestpart, "[%w ]+"):trim()
  return trimmed
end

function map.eventHandler(event, ...)
    if event == "onNewRoom" then
        handle_exits(arg[1])
        if walking and map.configs.speedwalk_wait then
            continue_walk(true)
        end
    elseif event == "onPrompt" then
        if map.prompt.exits and map.prompt.exits ~= "" then
            raiseEvent("onNewRoom")
        end
        print_wait_echoes()
        map.echo("Prompt Captured",true)
    elseif event == "onMoveFail" then
        map.echo("onMoveFail",true)
        table.remove(move_queue,1)
    elseif event == "onVisionFail" then
        map.echo("onVisionFail",true)
        vision_fail = true
        capture_room_info()
    elseif event == "onRandomMove" then
        map.echo("onRandomMove",true)
        random_move = true
        move_queue = {}
    elseif event == "onForcedMove" then
        map.echo("onForcedMove",true)
        capture_move_cmd(arg[1],arg[2]=="true")
    elseif event == "onNewLine" then
        grab_line()
    elseif event == "sysDataSendRequest" then
        capture_move_cmd(arg[1])
        -- check to prevent multiple version checks in a row without user intervention
        if map.update_waiting and map.update_timer then
            map.update_waiting = nil
        -- check to ensure version check cycle is started
        elseif not map.update_waiting and not map.update_timer then
            map.checkVersion()
        end
    elseif event == "sysDownloadDone" and downloading then
        local file = arg[1]
        if string.ends(file,"/map.dat") then
            loadMap(file)
            downloading = false
            map.echo("Map File Loaded.")
        elseif string.ends(file,"/versions.lua") then
            check_version()
        elseif string.ends(file,"/generic_mapper.xml") then
            update_version()
        end
    elseif event == "sysDownloadError" and downloading then
        local file = arg[1]
        if string.ends(file,"/versions.lua") and mudlet.translations.interfacelanguage == "zh_CN" then
            -- update to the current download path for chinese user
            if map.configs.download_path == "https://raw.githubusercontent.com/Mudlet/Mudlet/development/src/mudlet-lua/lua/generic-mapper" then
                map.configs.download_path = "https://gitee.com/mudlet/Mudlet/raw/development/src/mudlet-lua/lua/generic-mapper"
                map.checkVersion()
            end
        end
    elseif event == "sysLoadEvent" or event == "sysInstall" then
        config()
        raiseEvent("mapperScriptLoaded", "generic_mapper")
    elseif event == "mapOpenEvent" then
        if not help_shown and not map.save.prompt_pattern[map.character or ""] then
            map.find_prompt()
            send(map.configs.lang_dirs['look'], true)
            tempTimer(3, function() map.show_help("quick_start"); help_shown = true end)
        end
    elseif event == "mapStop" then
        map.set("mapping", false)
        walking = false
        map.echo("Mapping and speedwalking stopped.")
    elseif event == "sysManualLocationSetEvent" then
      set_room(arg[1])
    elseif event == "sysUninstallPackage" and not map.updatingMapper and arg[1] == "generic_mapper" then
        for _,id in ipairs(map.registeredEvents) do
            killAnonymousEventHandler(id)
        end
    end
end

map.registeredEvents = {
registerAnonymousEventHandler("sysDownloadDone", "map.eventHandler"),
registerAnonymousEventHandler("sysDownloadError", "map.eventHandler"),
registerAnonymousEventHandler("sysLoadEvent", "map.eventHandler"),
registerAnonymousEventHandler("sysConnectionEvent", "map.eventHandler"),
registerAnonymousEventHandler("sysInstall", "map.eventHandler"),
registerAnonymousEventHandler("sysDataSendRequest", "map.eventHandler"),
registerAnonymousEventHandler("onMoveFail", "map.eventHandler"),
registerAnonymousEventHandler("onVisionFail", "map.eventHandler"),
registerAnonymousEventHandler("onRandomMove", "map.eventHandler"),
registerAnonymousEventHandler("onForcedMove", "map.eventHandler"),
registerAnonymousEventHandler("onNewRoom", "map.eventHandler"),
registerAnonymousEventHandler("onNewLine", "map.eventHandler"),
registerAnonymousEventHandler("mapOpenEvent", "map.eventHandler"),
registerAnonymousEventHandler("mapStop", "map.eventHandler"),
registerAnonymousEventHandler("onPrompt", "map.eventHandler"),
registerAnonymousEventHandler("sysManualLocationSetEvent", "map.eventHandler"),
registerAnonymousEventHandler("sysUninstallPackage", "map.eventHandler")
}


function map.echon(what)
  moveCursorEnd("main") if getCurrentLine() ~= "" then echo"\n" end
  decho("&lt;112,229,0&gt;(&lt;73,149,0&gt;mapper&lt;112,229,0&gt;): &lt;255,255,255&gt;")
  cecho(tostring(what))
end

function map.roomexists(num)
  if not num then return false end
  if roomExists then return roomExists(num) end

  local s,m = pcall(getRoomArea, tonumber(num))
  return (s and true or false)
end

-- translates n to north and so forth
-- should incorporate generic_mappers exit_map, stub_map
local tempDir = {
    n = "north",
    e = "east",
    s = "south",
    w = "west",
    ne = "northeast",
    se = "southeast",
    sw = "southwest",
    nw = "northwest",
    u = "up",
    d = "down",
    i = "in",
    o = "out",
    ["in"] = "in"
}
local anytolongmap = {}
for s, l in pairs(tempDir) do anytolongmap[l] = l; anytolongmap[s] = l end

function map.anytolong(exit)

  return anytolongmap[exit]
end

function map.anytoshort(exit)
  local t = {
    n = "north",
    e = "east",
    s = "south",
    w = "west",
    ne = "northeast",
    se = "southeast",
    sw = "southwest",
    nw = "northwest",
    u = "up",
    d = "down",
    ["in"] = "in",
    out = "out"
  }
  local rt = {}
  for s,l in pairs(t) do
    rt[l] = s; rt[s] = s
  end

  return rt[exit]
end


function map.ranytolong(exit)
  local t = {
    n = "south",
    north = "south",
    e = "west",
    east = "west",
    s = "north",
    south = "north",
    w = "east",
    west = "east",
    ne = "southwest",
    northeast = "southwest",
    se = "northwest",
    southeast = "northwest",
    sw = "northeast",
    southwest = "northeast",
    nw = "southeast",
    northwest = "southeast",
    u = "down",
    up = "down",
    d = "up",
    down = "up",
    i = "out",
    ["in"] = "out",
    o = "in",
    out = "in"
  }

  return t[exit]
end

-- returns nil or the room number relative to this one
function map.relativeroom(from, dir)
  if not map.roomexists(from) then return end

  local exits = getRoomExits(tonumber(from))
  return exits[map.anytolong(dir)]
end

function map.roomFind(query, lines)
  if query:ends('.') then
    query = query:sub(1, -2)
  end
  local defaultLine = 30 -- this could this to a setting instead of a static number
  local result = map.searchRoom(query)
  if lines == 'all' then
    lines = table.size(result)
  end
  lines = (lines ~= '') and tonumber(lines) or defaultLine

  --create a new table (roomsTable) with keys and add areas to the table
  local roomsTable = {}
  for k, v in pairs(result) do
    local a = getRoomArea(k) or "unknown"
    roomsTable[#roomsTable + 1] = {num = k, area = a, name = v}
  end
  --sort roomsTable by area name
  table.sort(
    roomsTable,
    function(a, b)
      return a.area &lt; b.area
    end
  )
  --start displaying info
  if type(result) == "string" or not next(result) then
    cecho("&lt;grey&gt;You have no recollection of any room with that name.")
    return
  end
  cecho("&lt;DarkSlateGrey&gt;You know the following relevant rooms:\n")

  local i = 1
  if not tonumber(select(2, next(result))) then
    cecho(string.format("&lt;white&gt; %-10s%-40s%s\n", "ROOM ID", "ROOM NAME", "ROOM AREA"))
    for _, v in ipairs(roomsTable) do
      if i &gt; lines then
        break
      end
      roomid = tonumber(v.num)
      roomname = v.name
      roomarea = v.area
      cechoLink(
        string.format("&lt;cyan&gt; %-10s", roomid),
        'gotoRoom(' .. roomid .. ')',
        string.format("Go to %s (%s)", roomid, tostring(roomname)),
        true
      )
      cecho(string.format("&lt;LightSlateGray&gt;%-40s", string.sub(tostring(roomname), 1, 39)))
      cechoLink(
        string.format(
          "&lt;DarkSlateGrey&gt;%s&lt;DarkSlateGrey&gt;\n", getRoomAreaName(getRoomArea(roomid))
        ),
        [[map.echoPath(map.currentRoom, ]] .. roomid .. [[)]],
        "Display directions from here to " .. roomname,
        true
      )
      resetFormat()
      i = i + 1
    end
  else
    -- new style
    --- not sure what this new area code is but it doesn't seem to fire
    for roomname, roomid in pairs(result) do
      roomid = tonumber(roomid)
      cecho(string.format("  &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt; (", tostring(roomname)))
      cechoLink(
        "&lt;cyan&gt;" .. roomid,
        'gotoRoom(' .. roomid .. ')',
        string.format("Go to %s (%s)", roomid, tostring(roomname)),
        true
      )
      cecho(
        string.format(
          "&lt;DarkSlateGrey&gt;) in &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt;.", getRoomAreaName(getRoomArea(roomid))
        )
      )
      fg("DarkSlateGrey")
      echoLink(
        " &gt; Show path\n",
        [[map.echoPath(map.currentRoom, ]] .. roomid .. [[)]],
        "Display directions from here to " .. roomname,
        true
      )
      resetFormat()
    end
  end
  if table.size(result) &lt;= lines then
    cecho(string.format("&lt;DarkSlateGrey&gt;%d rooms found.\n", table.size(result)))
  else
    lastRoomQuery = query
    cechoLink(
      string.format(
        "&lt;DarkSlateGrey&gt;%d of %d rooms shown. Click to see all rooms.\n", lines, table.size(result)
      ),
      'map.roomFind(lastRoomQuery, "all")',
      string.format("Show all %d rooms.", table.size(result)),
      true
    )
  end
end

function map.searchRoom(what)
  local result = searchRoom(what)
  local realResult = {}
  for key, value in pairs(type(result) == "table" and result or {}) do
      -- both ways, because searchRoom can return either id-room name or the reverse
      if type(key) == "string" then
        realResult[key:ends(" (road)") and key:sub(1, -8) or key] = value
      else
        realResult[key] = value:ends(" (road)") and value:sub(1, -8) or value
      end
  end
  result = realResult
  return result
end


-- Lock Area

map.locked = map.locked or {}
map.lastLockSearch = map.lastLockSearch or nil

function map.doLockArea(search)
	local areaList
	if search ~= nil then
		local r = rex.new(string.lower(search))
		map.lastLockSearch = search
		for name, id in pairs(getAreaTable()) do
			if r:match(string.lower(name)) then
				areaList = areaList or {}
				areaList[name] = id
			end
		end
		if areaList == nil then
			map.echo("'" .. search .. "' did not match any known areas!")
			return
		end
	else
		map.lastLockSearch = nil
		areaList = getAreaTable()
	end

	for name, id in pairs(areaList) do
    map.echon(string.format("%-40s %s", name, " "))
--		map.echon(name .. string.rep(" ", 40 - string.len(name)))
		if not map.locked[id] then
			setFgColor(0, 200, 0)
			setUnderline(true)
			echoLink("Lock!", [[map.lockArea( ']] .. name:gsub("'", [[\']]) .. [[', true )]], "Click to lock area '" .. name .. "'", true)
		else
			setFgColor(200, 0, 0)
			setUnderline(true)
			echoLink("Unlock!", [[map.lockArea( ']] .. name:gsub("'", [[\']]) .. [[', false )]], "Click to unlock area '" .. name .. "'", true)
		end
	end

	if not search then
		echo"\n\n" map.echo("Use &lt;green&gt;arealock &lt;area&gt;&lt;white&gt; to filter areas.")
	end
end

function map.lockArea(name, lock, dontreshow)
	local areas = getAreaTable()
	local rooms = getAreaRooms(areas[name]) or {}
    local lockRoom = lockRoom
    local count = 0
	for _, room in pairs(rooms) do
		lockRoom(room, lock)
        count = count + 1
	end

	map.locked[areas[name]] = lock and true or nil
	map.echo(string.format("Area '%s' %slocked! All %s room%s within it.", name, (lock and '' or 'un'), count, (count == 1 and '' or 's')))

	if not dontreshow then map.doLockArea(map.lastLockSearch) end
end


function map.roomLook(input)
  -- we can do a report with a number

  local function handle_number(num)
    -- compile all available data
    if not map.roomexists(num) then
      map.echo(num .. " doesn't seem to exist.")
      return
    end
    local s, areanum = pcall(getRoomArea, num)
    if not s then
      map.echo(areanum);
      return ;
    end
    local exits = getRoomExits(num)
    local name = getRoomName(num)
    local islocked = roomLocked(num)
    local weight = (getRoomWeight(num) and getRoomWeight(num) or "?")
    -- getRoomWeight is buggy in one of the versions, is actually linked to setRoomWeight and thus returns nil
    local exitweights = (getExitWeights and getExitWeights(num) or {})
    local coords = {getRoomCoordinates(num)}
    local specexits = getSpecialExits(num)
    local env = getRoomEnv(num)
    -- generic_mapper doesn't have support for environments like IRE_mapper
    local envname = (map.envidsr and map.envidsr[env]) or "?"
    -- generate a report
    map.echo(
      string.format(
        "Room: %s #: %d area: %s (%d)", name, num, getRoomAreaName(areanum), areanum
      )
    )
    map.echo(
      string.format(
        "Coordinates: x:%d, y:%d, z:%d, locked: %s, weight: %s",
        coords[1],
        coords[2],
        coords[3],
        (islocked and "yes" or "no"),
        tostring(weight)
      )
    )
    map.echo(
      string.format(
        "Environment: %s (%d)%s",
        tostring(envname),
        env,
        (getRoomUserData(num, "indoors") ~= '' and ", indoors" or '')
      )
    )
    local description = getRoomUserData(num, "description")
    if description and description ~= "" then
      map.echo("Description:")
      for line in description:gmatch("[^\n]+") do
        echo("  " .. line .. "\n")
      end
    end
    map.echo(string.format("Exits (%d):", table.size(exits)))
    for exit, leadsto in pairs(exits) do
      echo(
        string.format(
          "  %s -&gt; %s (%d)%s%s\n",
          exit,
          getRoomName(leadsto),
          leadsto,
          (
            (getRoomArea(leadsto) or "?") == areanum and
            "" or
            " (in " ..
            (getRoomAreaName(getRoomArea(leadsto)) or "?") ..
            ")"
          ),
          (
            (not exitweights[map.anytoshort(exit)] or exitweights[map.anytoshort(exit)] == 0) and
            "" or
            " (weight: " ..
            exitweights[map.anytoshort(exit)] ..
            ")"
          )
        )
      )
    end
    -- display special exits if we got any
    if next(specexits) then
      map.echo(string.format("Special exits (%d):", table.size(specexits)))
      for leadsto, command in pairs(specexits) do
        if type(command) == "string" then
          echo(string.format("  %s -&gt; %s (%d)\n", command, getRoomName(leadsto), leadsto))
        else
          -- new format - exit name, command
          for cmd, locked in pairs(command) do
            if locked == '1' then
              cecho(
                string.format(
                  "&lt;DarkSlateGrey&gt;  %s -&gt; %s (%d) (locked)\n", cmd, getRoomName(leadsto), leadsto
                )
              )
            else
              echo(string.format("  %s -&gt; %s (%d)\n", cmd, getRoomName(leadsto), leadsto))
            end
          end
        end
      end
    end
    local message = "This room has the feature '%s'."
    for _, mapFeature in pairs(map.getRoomMapFeatures(num)) do
      map.echo(string.format(message, mapFeature))
    end
    -- actions we can do. This will be a short menu of sorts for actions
    map.echo("Stuff you can do:")
    echo("  ")
    echo("Clear all labels ")
    setUnderline(true)
    echoLink("(in area)", 'map.clearLabels(' .. areanum .. ')', '', true)
    setUnderline(false)
    echo(" ")
    setUnderline(true)
    echoLink(
      "(whole map)",
      [[
    if not map.clearinglabels then
      map.echo("Are you sure you want to clear all of your labels on this map? If yes, click the link again.")
      map.clearinglabels = true
    else
      map.clearLabels("map")
      map.clearinglabels = nil
    end
    ]],
      '',
      true
    )
    setUnderline(false)
    echo("\n")
  end

  -- see if we can do anything with the name

  local function handle_name(name)
    local result = map.searchRoom(name)
    if type(result) == "string" then
      cecho("&lt;grey&gt;You have no recollection of any room with that name.")
      return
    end
    -- if we got one result, then act on it
    if table.size(result) == 1 then
      if type(next(result)) == "number" then
        handle_number(next(result))
      else
        handle_number(select(2, next(result)))
      end
      return
    end
    -- if not, then ask the user to clarify which one would they want
    map.echo("Which room specifically would you like to look up?")
    if not select(2, next(result)) or not tonumber(select(2, next(result))) then
      for roomid, roomname in pairs(result) do
        roomid = tonumber(roomid)
        cecho(string.format("  &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt; (", tostring(roomname)))
        cechoLink(
          "&lt;cyan&gt;" .. roomid,
          'map.roomLook(' .. roomid .. ')',
          string.format("View room details for %s (%s)", roomid, tostring(roomname)),
          true
        )
        cecho(
          string.format(
            "&lt;DarkSlateGrey&gt;) in the &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt;.\n",
            getRoomAreaName(getRoomArea(roomid))
          )
        )
      end
    else
      for roomname, roomid in pairs(result) do
        roomid = tonumber(roomid)
        cecho(string.format("  &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt; (", tostring(roomname)))
        cechoLink(
          "&lt;cyan&gt;" .. roomid,
          'map.roomLook(' .. roomid .. ')',
          string.format("View room details for %s (%s)", roomid, tostring(roomname)),
          true
        )
        cecho(
          string.format(
            "&lt;DarkSlateGrey&gt;) in the &lt;LightSlateGray&gt;%s&lt;DarkSlateGrey&gt;.\n",
            getRoomAreaName(getRoomArea(roomid))
          )
        )
      end
    end
  end

  if not input then
    if not map.roomexists(map.currentRoom) then
      map.echo(map.currentRoom .. " doesn't seem to be mapped yet.")
      echo("\n")
      map.echo(string.format("version %s.", tostring(map.version)))
      return
    else
      input = map.currentRoom
    end
  end
  if tonumber(input) then
    handle_number(tonumber(input))
  else
    handle_name(input)
  end
  map.echo(string.format("version %s.", tostring(map.version)))
end


local function loadMapFeatures()
  local mapFeaturesString = getMapUserData("mapFeatures")
  local mapFeatures
  if mapFeaturesString and mapFeaturesString ~= "" then
    mapFeatures = yajl.to_value(mapFeaturesString)
  else
    mapFeatures = {}
  end
  return mapFeatures
end

local function saveMapFeatures(mapFeaturesToSave)
  local mapFeaturesString = yajl.to_string(mapFeaturesToSave)
  setMapUserData("mapFeatures", mapFeaturesString)
end

function map.createMapFeature(featureName, roomCharacter)
  if not featureName or featureName == "" then
    map.echo("Can't create an empty map feature.")
    return
  end
  if featureName:find("%d") then
    map.echo("Map feature names must not contain numbers.")
    return
  end
  roomCharacter = roomCharacter or ""
  if type(roomCharacter) ~= "string" then
    map.echo(
      "The new room character must be either a string or nil. " ..
      type(roomCharacter) ..
      " is not allowed."
    )
    return
  end
  local lowerFeatureName = featureName:lower()
  local mapFeatures = loadMapFeatures()
  if not mapFeatures[lowerFeatureName] then
    mapFeatures[lowerFeatureName] = roomCharacter
    saveMapFeatures(mapFeatures)
    map.echo(
      "Created map feature '" ..
      featureName ..
      "' with the room character '" ..
      roomCharacter ..
      "'."
    )
  else
    map.echo("A map feature with the name '" .. featureName .. "' already exists.")
    return
  end
  return true
end

function map.listMapFeatures()
  local mapFeatures = loadMapFeatures()
  map.echo("This map has the following features:")
  echo(string.format("    %-25s | %s\n", "feature name", "room character"))
  echo(string.format("    ---------------------------------------------\n"))
--  echo(string.format("    %s\n", string.rep("-", 45)))
  for featureName, roomCharacter in pairs(mapFeatures) do
    echo(string.format("    %-25s | %s\n", featureName, roomCharacter))
  end
  return true
end

function map.roomCreateMapFeature(featureName, roomId)
  -- checks for the feature name
  if not featureName then
    map.echo("Which feature would you like to create?")
    return
  end
  local lowerFeatureName = featureName:lower()
  local mapFeatures = loadMapFeatures()
  if not mapFeatures[lowerFeatureName] then
    map.echo(
      "A feature with name '" ..
      featureName ..
      "' does not exist. You need to use 'feature create' first."
    )
    return
  end
  -- checks for the room ID
  if not roomId then
    if not map.currentRoom then
      map.echo("Don't know where we are at the moment.")
      return
    end
    roomId = map.currentRoom
  else
    if type(roomId) ~= "number" then
      map.echo("Need a room ID as number for creating a map feature on a room.")
      return
    end
  end
  if not getRoomName(roomId) then
    map.echo("Room number '" .. roomId .. "' does not exist.")
    return
  end
  -- check if feature already exists
  if table.contains(map.getRoomMapFeatures(roomId), lowerFeatureName) then
    map.echo("Room '" .. roomId .. "' has already map feature '" .. featureName .. "'.")
    return
  end
  -- create map feature in room
  setRoomUserData(roomId, "feature-" .. lowerFeatureName, "true")
  map.echo(string.format("Map feature '%s' created in room number '%d'.", featureName, roomId))
  local featureRoomChar = mapFeatures[lowerFeatureName]
  if featureRoomChar ~= "" then
    setRoomChar(roomId, featureRoomChar)
    map.echo("The room now carries the room char '" .. featureRoomChar .. "'.")
  end
  return true
end

function map.roomDeleteMapFeature(featureName, roomId)
  -- checks for the feature name
  if not featureName then
    map.echo("Which feature would you like to delete?")
    return
  end
  local lowerFeatureName = featureName:lower()
  -- checks for the room ID
  if not roomId then
    if not map.currentRoom then
      map.echo("Don't know where we are at the moment.")
      return
    end
    roomId = map.currentroom
  else
    if type(roomId) ~= "number" then
      map.echo("Need a room ID as number for deleting a map feature from a room.")
      return
    end
  end
  if not getRoomName(roomId) then
    map.echo("Room number '" .. roomId .. "' does not exist.")
    return
  end
  -- check if feature exists
  local roomMapFeatures = map.getRoomMapFeatures(roomId)
  if not table.contains(roomMapFeatures, lowerFeatureName) then
    map.echo("Room '" .. roomId .. "' doesn't have map feature '" .. featureName .. "'.")
    return
  end
  -- delete map feature from room
  setRoomUserData(roomId, "feature-" .. lowerFeatureName, "")
  map.echo(string.format("Map feature '%s' deleted from room number '%d'.", featureName, roomId))
  -- now update room char if needed.
  -- first update current map features of this room
  roomMapFeatures = map.getRoomMapFeatures(roomId)
  local mapFeatures = loadMapFeatures()
  -- find out if we need to set a new room character
  if getRoomChar(roomId) == mapFeatures[lowerFeatureName] and getRoomChar(roomId) ~= "" then
    local index, otherRoomMapFeature
    -- find another usable room character
    repeat
      index, otherRoomMapFeature = next(roomMapFeatures, index)
    until not otherRoomMapFeature or mapFeatures[otherRoomMapFeature] ~= ""
    if otherRoomMapFeature then
      -- we found a usable room character, now set it
      local newRoomChar = mapFeatures[otherRoomMapFeature]
      setRoomChar(roomId, newRoomChar)
      map.echo("Using '" .. newRoomChar .. "' as new room character.")
    else
      -- we didn't find a usable room character, delete it.
      setRoomChar(roomId, "")
      map.echo("Deleted the current room character.")
    end
  end
  return true
end

function map.getRoomMapFeatures(roomId)
  -- checks for the room ID
  if not roomId then
    if not map.currentRoom then
      map.echo("Don't know where we are at the moment.")
      return
    end
    roomId = map.currentRoom
  else
    if type(roomId) ~= "number" then
      map.echo("Need a room ID as number for getting all map features of a room.")
      return
    end
  end
  if not getRoomName(roomId) then
    map.echo("Room number '" .. roomId .. "' does not exist.")
    return
  end
  local result = {}
  local mapFeatures = loadMapFeatures()
  for mapFeature in pairs(mapFeatures) do
    if getRoomUserData(roomId, "feature-" .. mapFeature) == "true" then
      result[#result + 1] = mapFeature
    end
  end
  return result
end

function map.deleteMapFeature(featureName)
  if not featureName or featureName == "" then
    map.echo("Which map feature would you like to delete?")
    return
  end
  local lowerFeatureName = featureName:lower()
  local mapFeatures = loadMapFeatures()
  if not mapFeatures[lowerFeatureName] then
    map.echo("Map feature '" .. featureName .. "' does not exist.")
    return
  end
  local roomsWithFeature = searchRoomUserData("feature-" .. lowerFeatureName, "true")
  for _, roomId in pairs(roomsWithFeature) do
    local deletionResult = map.roomDeleteMapFeature(lowerFeatureName, roomId)
    if not deletionResult then
      map.echo(
        "Something went wrong deleting the map feature '" ..
        featureName ..
        "' from all rooms. Deletion incomplete."
      )
      return
    end
  end
  mapFeatures[lowerFeatureName] = nil
  saveMapFeatures(mapFeatures)
  map.echo("Deleted map feature '" .. featureName .. "' from map.")
  return true
end

function map.getMapFeatures()
  return loadMapFeatures()
end


function map.echoPath(from, to)
  assert(tonumber(from) and tonumber(to), "map.echoPath: both from and to have to be room IDs")
  if getPath(from, to) then
    map.echo(
      "&lt;white&gt;Directions from &lt;yellow&gt;" ..
      string.upper(searchRoom(from)) ..
      " &lt;white&gt;to &lt;yellow&gt;" ..
      string.upper(searchRoom(to)) ..
      "&lt;white&gt;:"
    )
    map.echo(table.concat(speedWalkDir, ", "))
    return map.speedWalkDir
  else
    map.echo(
      "&lt;white&gt;I can't find a way from &lt;yellow&gt;" ..
      string.upper(searchRoom(from)) ..
      " &lt;white&gt;to &lt;yellow&gt;" ..
      string.upper(searchRoom(to)) ..
      "&lt;white&gt;"
    )
  end
end


function map.listSpecialExits(filter)
  local c = 0
  map.echo("Listing special exits...")
  for area, areaname in pairs(getAreaTableSwap()) do
    local rooms = getAreaRooms(area) or {}
    for i = 0, #rooms do
      local exits = getSpecialExits(rooms[i] or 0)
      if exits and next(exits) then
        for exit, cmd in pairs(exits) do
          if type(cmd) == "table" then
            cmd = next(cmd)
          end
          if cmd:match("^%d") then
            cmd = cmd:sub(2)
          end
          if not filter or cmd:lower():find(filter, 1, true) then
            if getRoomArea(exit) ~= area then
              cecho(
                string.format(
                  "&lt;dark_slate_grey&gt;%s &lt;LightSlateGray&gt;(%d, in %s)&lt;dark_slate_grey&gt; &lt;MediumSlateBlue&gt;-&gt; &lt;coral&gt;%s -&lt;MediumSlateBlue&gt;&gt;&lt;dark_slate_grey&gt; %s &lt;LightSlateGray&gt;(%d, in %s)\n",
                  getRoomName(rooms[i]),
                  rooms[i],
                  areaname,
                  cmd,
                  getRoomName(exit),
                  exit,
                  getRoomAreaName(getRoomArea(exit)) or '?'
                )
              )
            else
              cecho(
                string.format(
                  "&lt;dark_slate_grey&gt;%s &lt;LightSlateGray&gt;(%d)&lt;dark_slate_grey&gt; &lt;MediumSlateBlue&gt;-&gt; &lt;coral&gt;%s &lt;MediumSlateBlue&gt;-&gt;&lt;dark_slate_grey&gt; %s &lt;LightSlateGray&gt;(%d)&lt;dark_slate_grey&gt; in %s\n",
                  getRoomName(rooms[i]),
                  rooms[i],
                  cmd,
                  getRoomName(exit),
                  exit,
                  areaname
                )
              )
            end
            c = c + 1
          end
        end
      end
    end
  end
  map.echo(
    string.format(
      "%d exits listed%s.", c, (not filter and '' or ", with for the filter '" .. filter .. "'")
    )
  )
end

function map.delSpecialExits(filter)
  local c = 0
  for area, areaname in pairs(getAreaTableSwap()) do
    local rooms = getAreaRooms(area) or {}
    for i = 0, #rooms do
      local exits = getSpecialExits(rooms[i] or 0)
      if exits and next(exits) then
        for exit, cmd in pairs(exits) do
          if type(cmd) == "table" then
            cmd = next(cmd)
          end
          if cmd:match("^%d") then
            cmd = cmd:sub(2)
          end
          if not filter or cmd:lower():find(filter, 1, true) then
            local rid, action
            local originalExits = {}
            local e = getSpecialExits(rooms[i])
            for t, n in pairs(e) do
              rid = tonumber(t)
              for a, l in pairs(n) do
                action = tostring(a)
              end
              if not action:find(filter, 1, true) then
                originalExits[rid] = action
              end
            end
            clearSpecialExits(rooms[i])
            for rid, act in pairs(originalExits) do
              addSpecialExit(rooms[i], tonumber(rid), tostring(act))
            end
            c = c + 1
          end
        end
      end
    end
  end
  map.echo(
    string.format(
      "%d exits deleted%s.", c, (not filter and '' or ", with for the filter '" .. filter .. "'")
    )
  )
end


do
local oldsetExit = setExit

local exitmap = {
  n = 1,
  north = 1,
  ne = 2,
  northeast = 2,
  nw = 3,
  northwest = 3,
  e = 4,
  east = 4,
  w = 5,
  west = 5,
  s = 6,
  south = 6,
  se = 7,
  southeast = 7,
  sw = 8,
  southwest = 8,
  u = 9,
  up = 9,
  d = 10,
  down = 10,
  ["in"] = 11,
  out = 12
}

function map.setExit(from, to, direction)
  if type(direction) == "string" and not exitmap[direction] then return false end

  return oldsetExit(from, to, type(direction) == "string" and exitmap[direction] or direction)
end
end


function map.deleteArea(name, exact)
  local id, fname, ma = map.findAreaID(name, exact)
  if id then
    map.doareadelete(id)
  elseif next(ma) then
    map.echo("Which one of these specifically would you like to delete?")
    fg("DimGrey")
    for _, name in ipairs(ma) do
      echo("  ")
      setUnderline(true)
      echoLink(name, [[map.deleteArea("]] .. name .. [[", true)]], "Delete " .. name, true)
      setUnderline(false)
      echo("\n")
    end
    resetFormat()
  else
    map.echo("Don't know of that area.")
  end
end

-- the function actually doing area deletion

function map.doareadelete(areaid)
  map.deletingarea = {}
  local t = map.deletingarea
  local rooms = getAreaRooms(areaid)
  t.roomcount = table.size(rooms)
  t.roombatches = {}
  t.currentbatch = 1
  t.areaid = areaid
  t.areaname = getAreaTableSwap()[areaid]
  -- delete the area right away if there's nothing in it
  if t.roomcount == 0 then
    deleteArea(t.areaid)
    map.echo("All done! The area was already gone/empty.")
  end
  local rooms_per_batch = 100
  -- split up rooms into tables of tables, to be deleted in batches so
  -- that our print statements in between get a chance to be processed
  for batch = 1, t.roomcount, 100 do
    t.roombatches[#t.roombatches + 1] = {}
    local onebatch = t.roombatches[#t.roombatches]
    for inbatch = 1, 100 do
      onebatch[#onebatch + 1] = rooms[batch + inbatch]
    end
  end

  function map.deletenextbatch()
    local t = map.deletingarea
    if not t then
      return
    end
    local currentbatch = t.roombatches[t.currentbatchi]
    if currentbatch == nil then
      deleteArea(t.areaid)
      map.echo("All done! Deleted the '" .. t.areaname .. "' area.")
      map.deletingarea = nil
      centerview(map.currentRoom)
      return
    end
    local deleteRoom = deleteRoom
    for i = 1, #currentbatch do
      deleteRoom(currentbatch[i])
    end
    map.echo(
      string.format(
        "Deleted %d batch%s so far, %d left to go - %.2f%% done out of %d needed",
        t.currentbatchi,
        (t.currentbatchi == 1 and '' or 'es'),
        #t.roombatches - t.currentbatchi,
        (100 / #t.roombatches) * t.currentbatchi,
        #t.roombatches
      )
    )
    t.currentbatchi = t.currentbatchi + 1
    tempTimer(0.010, map.deletenextbatch)
  end

  t.currentbatchi = 1
  map.echo("Prepped room batches, starting deletion...")
  tempTimer(0.010, map.deletenextbatch)
end

function map.renameArea(name, exact)
  if not (map.currentroom or getRoomArea(map.currentRoom)) then
    map.echo("Don't know what area are we in at the moment, to rename it.")
  else
    map.echo(
      string.format(
        "Renamed %s to %s (%d).",
        getRoomAreaName(getRoomArea(map.currentRoom)),
        name,
        getRoomArea(map.currentRoom)
      )
    )
    setAreaName(getRoomArea(map.currentRoom), name)			
    centerview(map.currentRoom)
  end
end

function map.roomArea(otherroom, name, exact)
  local id, fname, ma
  if tonumber(name) then
    id = tonumber(name);
    fname = getAreaTableSwap()[id]
  else
    id, fname, ma = map.findAreaID(name, exact)
  end
  if fname == nil then
    map.echo("Area unknown, can't move room.")
    return
  end
  if otherroom ~= "" and not map.roomexists(otherroom) then
    map.echo("Room id " .. otherroom .. " doesn't seem to exist.")
    return
  elseif otherroom == "" and not map.roomexists(map.currentRoom) then
    map.echo("Don't know where we are at the moment.")
    return
  end
  otherroom = otherroom ~= "" and otherroom or map.currentRoom
  if id then
    setRoomArea(otherroom, id)
    map.echo(
      string.format(
        "Moved %s to %s (%d).",
        (getRoomName(otherroom) ~= "" and getRoomName(otherroom) or "''"),
        fname,
        id
      )
    )
    centerview(otherroom)
  elseif next(ma) then
    map.echo("Into which area exactly would you like to move the room?")
    fg("DimGrey")
    for _, name in ipairs(ma) do
      echo("  ")
      setUnderline(true)
      echoLink(
        name, [[map.roomArea('', "]] .. name .. [[", true)]], "Move the room to " .. name, true
      )
      setUnderline(false)
      echo("\n")
    end
    resetFormat()
  else
    map.echo("Don't know of that area.")
  end
end


function map.clearLabels(areaid)
  local function clearlabels(areaid)
    local t = getMapLabels(areaid)
    if type(t) ~= "table" then
      return
    end
    for labelid, _ in pairs(t) do
      deleteMapLabel(areaid, labelid)
    end
  end

  if areaid == "map" then
    for areaid in pairs(getAreaTableSwap()) do
      clearlabels(areaid)
    end
    map.echo("Cleared labels in all of the map.")
    return
  end
  clearlabels(areaid)
  map.echo(string.format("Cleared all labels in '%s'.", map.getAreaTableSwap()[areaid]))
end

function map.roomLabel(input)
  if not createMapLabel then
    map.echo(
      "Your Mudlet doesn't support createMapLabel() yet - please update to 2.0-test3 or better."
    )
    return
  end
  local tk = input:split(" ")
  local room, fg, bg, message = map.currentRoom, "yellow", "red", "Some room label"
  -- input always have to be something, so tk[1] at least always exists
  if tonumber(tk[1]) then
    room = tonumber(table.remove(tk, 1))
    -- remove the number, so we're left with the colors or msg
  end
  -- next: is this a foreground color?
  if tk[1] and color_table[tk[1]] then
    fg = table.remove(tk, 1)
  end
  -- next: is this a background color?
  if tk[1] and color_table[tk[1]] then
    bg = table.remove(tk, 1)
  end
  -- the rest would be our message
  if tk[1] then
    message = table.concat(tk, " ")
  end
  -- if we haven't provided a room ID and we don't know where we are yet, we can't make a label
  if not room then
    map.echo("We don't know where we are to make a label here.")
    return
  end
  local x, y, z = getRoomCoordinates(room)
  local f1, f2, f3 = unpack(color_table[fg])
  local b1, b2, b3 = unpack(color_table[bg])
  -- finally: do it :)
  local lid = createMapLabel(getRoomArea(room), message, x, y, z, f1, f2, f3, b1, b2, b3)
  map.echo(
    string.format(
      "Created new label #%d '%s' in %s.", lid, message, getRoomAreaName(getRoomArea(room))
    )
  )
end

function map.areaLabels(where, exact)
  if not getMapLabels then
    map.echo(
      "Your Mudlet doesn't support getMapLabels() yet - please update to 2.0-test3 or better."
    )
    return
  end
  if (not where or not type(where) == "string") and not map.currentRoom then
    map.echo("For which area would you like to view labels?")
    return
  end
  if not where then
    exact = true
    where = getRoomAreaName(getRoomArea(map.currentRoom))
  end
  local areaid, msg, multiples = map.findAreaID(where, exact)
  if areaid then
    local t = getMapLabels(areaid)
    if type(t) ~= "table" or not next(t) then
      map.echo(string.format("'%s' doesn't seem to have any labels.", getRoomAreaName(areaid)))
      return
    end
    map.echo(string.format("Area labels for '%s'", getRoomAreaName(areaid)))
    for labelid, labeltext in pairs(t) do
      fg("DimGrey")
      echo(string.format("  %d) %s (", labelid, labeltext))
      fg("orange_red")
      setUnderline(true)
      echoLink(
        'delete',
        string.format(
          'deleteMapLabel(%d, %d); map.echo("Deleted label #' .. labelid .. '")', areaid, labelid
        ),
        "Delete label #" .. labelid .. " from " .. getRoomAreaName(areaid)
      )
      setUnderline(false)
      echo(")\n")
    end
    resetFormat()
  elseif not areaid and #multiples &gt; 0 then
    map.echo("Which area would you like to view exactly?")
    fg("DimGrey")
    for _, areaname in ipairs(multiples) do
      echo("  ");
      setUnderline(true)
      echoLink(
        areaname,
        'map.areaLabels("' .. areaname .. '", true)',
        "Click to view labels in " .. areaname,
        true
      )
      setUnderline(false)
      echo("\n")
    end
    resetFormat()
    return
  else
    map.echo(string.format("Don't know of any area named '%s'.", where))
    return
  end
end

</script>
				<eventHandlerList />
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>任务集</name>
			<packageName></packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>武当任务</name>
				<packageName></packageName>
				<script>current_position = ""

wuxing = { 
    mu = {p_pos = "huo", n_pos = "tu", name="木"},
    huo = {p_pos = "tu", n_pos = "jin", name="火"},
    tu = {p_pos = "jin", n_pos = "shui", name="土"},
    jin = {p_pos = "shui", n_pos = "mu", name="金"},
    shui = {p_pos = "mu", n_pos = "huo", name="水"},
}

local function wuxing_ch_2_en(name)
  if name == "木" then 
    return "mu"
  elseif name == "火" then
    return "huo"
  elseif name == "土" then
    return "tu"
  elseif name == "金" then
    return "jin"
  else
    return "shui"   
  end   
end
-- direction = {正, 反}
-- position = {"木", "火", "土", "金", "水"}
-- return = new position as {"木", "火", "土", "金", "水"}
function initialize_wuxing(direction, position)
  wuxing_direction = direction
  current_position = wuxing_ch_2_en(position)
  return current_position
end

-- direction = {正, 反}
-- return = new position as {"木", "火", "土", "金", "水"}

function wuxing_zouwei(direction)
  local dir = "p_pos"
  if direction == "反" then dir = "n_pos" end
  current_position =  wuxing[current_position][dir]
  return current_position
end

jing_content = ""
function reset_jing_content()
  jing_content = ""
end
function build_jing_content(sentence)
  jing_content = jing_content..sentence
  --echo("build_jing_content =&gt; :"..jing_content.."\n")
end
function get_jing_content()
  return jing_content
end

songjing_info = {
  address = "", 
  book_name = "", -- 庄子·外篇「上卷」
  book_chapter = "", -- 庄子·外篇·天地
  page_number_in_chapter = 0,
  chapter_start_page_number = 0,
  chapter = "" -- 天地
}

function page_number()
  return songjing_info.chapter_start_page_number + songjing_info.page_number_in_chapter - 1
end

local function parse_jing(addr, book, whole_chapter, page)
  songjing_info.address = addr
  songjing_info.book_name = book
  songjing_info.book_chapter = whole_chapter
  songjing_info.page_number_in_chapter = page
  songjing_info.chapter = get_chapter(whole_chapter)
  songjing_info.chapter_start_page_number = find_zhuangzi_chapter_start_page(songjing_info.chapter)
end

local zhuangzi = {
  --庄子·外篇「下卷」(Zhuang zi)
  {start = 1, name = "秋水"},
  {start = 51, name = "至乐"},
  {start = 69, name = "达生"},
  {start = 107, name = "山木"},
  {start = 143, name = "田子方"},
  {start = 177, name = "知北游"},
  --庄子·杂篇「上卷」
  {start = 1, name = "庚桑楚"},
  {start = 42, name = "徐无鬼"},
  {start = 98, name = "则阳"},
  {start = 141, name = "外物"},
  {start = 168, name = "寓言"},
  --庄子·外篇「上卷」
  {start = 1, name = "骈拇"},
  {start = 4, name = "马蹄"},
  {start = 12, name = "胠箧"},
  {start = 31, name = "在宥"},
  {start = 66, name = "天地"},
  {start = 116, name = "天道"},
  {start = 151, name = "天运"},
  {start = 190, name = "刻意"},
  {start = 201, name = "缮性"},
  --庄子·内篇「下卷」(Zhuang zi)
  {start = 1, name = "人间世"},
  {start = 46, name = "德充符"},
  {start = 77, name = "大宗师"},
  {start = 124, name = "应帝王"},
  --庄子·杂篇「下卷」(Zhuang zi)
  {start = 1, name = "让王"},
  {start = 47, name = "盗跖"},
  {start = 99, name = "说剑"},
  {start = 114, name = "渔父"},
  {start = 139, name = "列御寇"},
  {start = 169, name = "天下"},
  --庄子·内篇「上卷」(Zhuang zi)
  {start = 169, name = "逍遥游"},
  {start = 169, name = "齐物论"},
  {start = 169, name = "养身主"}
}

local function get_chapter(whole_chapter)
  local str = split_string(whole_chapter, "·")
  local chapter = str[#str]
  echo("===&gt; chapter: "..chapter)
  return chapter
end

local function find_zhuangzi_chapter_start_page(chapter)
  for k, v in pairs(zhuangzi) do
    if chapter == v["name"] then
      echo("--&gt;page: "..v["start"].."\n")
      return v["start"]
    end
  end
  echo("===&gt; 没有发现章节: "..chapter.."\n")
  return nil
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>爵士任务</name>
				<packageName></packageName>
				<script>function identify_all_luren_with_true_clue()
  echo("----所有嫌疑人有----\n")
  for k, v in pairs(luren_set) do
    --local tclue = analyze_clue(v["msg"])
    --tag_luren_true(k, tclue)
    echo(k.."\t")
  end
  echo("\n------------------\n\n")
  
  for k, v in pairs(luren_set) do
    if v["msg"] == nil then
      echo(v.."没有捕捉到消息\n")
    end
    local tclue = analyze_clue(v["msg"])
    if tclue ~= nil then
      tag_luren_true(k, tclue)
    end
    
  end
end

function tag_luren_true(name, clue)
  local luren = luren_set[name]
  -- 路人A提供特征X，而路人A自身符合特征X，则路人A不是盗贼，特征X为真。
  if luren[clue["key"]] == clue["value"] then
    echo(""..name.."提供真特征 - "..clue["key"]..":"..clue["value"].." - 排除如下人等- \n")
    --echo("排除如下人等:\n")
    for k, v in pairs(luren_set) do   
      if k == name then
         echo(k.."\t")
         -- luren_set[k]["identified"]="negative" 
      elseif luren_set[k][clue["key"]] ~= clue["value"] then
         echo(k.."\t")
         --luren_set[k]["identified"]="negative"
      end   
    end
    echo("\n\n") 
  end
end

function identify_all_luren_with_opposite_clue()
  echo("\n*****************************\n")  
  for k, v in pairs(luren_set) do
    if v["msg"] == nil then
      echo(v.."没有捕捉到消息\n")
    end
    local tclue = analyze_clue(v["msg"])
    if tclue then
      tag_luren_false(k, tclue)
    end
  end
  echo("============================\n\n") 
end

function tag_luren_false(name, clue)
  local luren = luren_set[name]
  if luren[clue["key"]] ~= clue["value"] then
  --路人A提供特征X，那么除了路人A外，所有不符合特征X的其他路人都不是盗贼。
    echo(""..name.."提供反特征 - "..clue["key"]..":"..clue["value"].." - 排除如下人等- \n")
    for k, v in pairs(luren_set) do   
      if k ~= name and luren_set[k][clue["key"]] ~= clue["value"] then
        echo(k.."\t")
        --luren_set[k]["identified"]="negative"
      end   
    end  
    echo("\n\n") 
  end
end

function add_to_luren_set()
  echo("--")
  local person = table.deepcopy(current_luren)
  
  person["identified"] = "undefined"
  echo("++")
  luren_set[person["chinese_name"]]=person
  echo("==")
end

function analyze_luren_cloth(cloth)
  current_luren["cloth"]=cloth
  set_cloth_type(cloth)
  local color = analyze_fg_ansi_color(cloth)
  current_luren["cloth_color"] = color
  current_luren["cloth_color_type"] = color_type(color)
end

function analyze_luren_shoes(shoes)
  current_luren["shoes"]=shoes
  set_shoes_type(shoes)
  local color = analyze_fg_ansi_color(shoes)
  current_luren["shoes_color"] = color
  current_luren["shoes_color_type"] = color_type(color)
end

function color_type(color)
  if table.index_of({1,2,3,4,9,10,11,12}, color) then
    --echo("--&gt; color: ".. color)
    return "深色"
  else
    --echo("++&gt; color: ".. color)
    return "浅色"
  end 
end



function analyze_fg_ansi_color(text) 
  selectString(text, 1)
  if isAnsiFgColor( 1 ) then -- light black
    return 1
  elseif isAnsiFgColor( 2 ) then -- dark black
    return 2
  elseif isAnsiFgColor( 3 ) then -- light red
    return 3
  elseif isAnsiFgColor( 4 ) then -- dark red
    return 4
  elseif isAnsiFgColor( 5 ) then -- light green
    return 5
  elseif isAnsiFgColor( 6 ) then -- dark green
    return 6
  elseif isAnsiFgColor( 7 ) then -- light yellow
    return 7
  elseif isAnsiFgColor( 8 ) then --dark yellow
    return 8
  elseif isAnsiFgColor( 9 ) then -- light blue
    return 9
  elseif isAnsiFgColor( 10 ) then --dark blue
    return 10
  elseif isAnsiFgColor( 11 ) then -- light magenta
    return 11
  elseif isAnsiFgColor( 12 ) then -- dark magenta
    return 12
  elseif isAnsiFgColor( 13 ) then -- light cyan
    return 13
  elseif isAnsiFgColor( 14 ) then -- dark cyan
    return 14
  elseif isAnsiFgColor( 15 ) then --light white
    return 15
  elseif isAnsiFgColor( 16 ) then --dark white
    return 16
  else 
    return 0  --0 = default text color
  end  
end

function set_age_type(age)
  if string.find(age,"二十") then
    current_luren["age_type"] = 20
  elseif string.find(age,"三十") then  
    current_luren["age_type"] = 20
  elseif string.find(age,"四十") then  
    current_luren["age_type"] = 40
  elseif string.find(age,"五十") then  
    current_luren["age_type"] = 40
  elseif string.find(age,"六十") then  
    current_luren["age_type"] = 60
  elseif string.find(age,"七十") then  
    current_luren["age_type"] = 60
  elseif string.find(age,"八十") then  
    current_luren["age_type"] = 80                  
  else
    current_luren["age_type"] = 80
  end
end

function set_gender_type(gender)
  if string.find(gender,"他") then
    current_luren["gender_type"] = "男"
  else
    current_luren["gender_type"] = "女"
  end
end

function set_shoes_type(shoes)
  if string.find(shoes,"靴") then
    current_luren["shoes_type"] = "靴子"
  elseif string.find(shoes,"木屐") then
    current_luren["shoes_type"] = "凉鞋"
  elseif string.find(shoes,"草鞋") then
    current_luren["shoes_type"] = "凉鞋"
  elseif string.find(shoes,"破鞋") then
    current_luren["shoes_type"] = "凉鞋"
  else
    current_luren["shoes_type"] = "布鞋"  
  end            
end

function set_cloth_type(cloth)
  if string.find(cloth,"纱") then
    current_luren["cloth_type"] = "丝绸衣服"
  elseif string.find(cloth,"绸") then
    current_luren["cloth_type"] = "丝绸衣服"
  elseif string.find(cloth,"旗袍") then
    current_luren["cloth_type"] = "丝绸衣服"
  elseif string.find(cloth,"丝") then
    current_luren["cloth_type"] = "丝绸衣服"    
  elseif string.find(cloth,"鹤氅") then
    current_luren["cloth_type"] = "夹袄"
  elseif string.find(cloth,"长袄") then
    current_luren["cloth_type"] = "夹袄"
  elseif string.find(cloth,"棉袄") then
    current_luren["cloth_type"] = "夹袄"
  elseif string.find(cloth,"狼皮袄") then
    current_luren["cloth_type"] = "夹袄"
  elseif string.find(cloth,"短袄") then
    current_luren["cloth_type"] = "夹袄"
  elseif string.find(cloth,"比甲") then
    current_luren["cloth_type"] = "夹袄"   
  else  
    current_luren["cloth_type"] = "布衣"    
  end
end

function categorize_body(shape)
  if string.find(shape,"魁梧高大") then
    current_luren["height"] = "高"
    current_luren["shape"]="胖"
  elseif string.find(shape,"娇小玲珑") then  
    current_luren["height"] = "矮"
    current_luren["shape"]="瘦"
  elseif string.find(shape,"丰满矮小") then  
    current_luren["height"] = "矮"
    current_luren["shape"]="胖"
  elseif string.find(shape,"丰胸细腰，身材苗条挺拔") then  
    current_luren["height"] = "高"
    current_luren["shape"]="瘦"  
  elseif string.find(shape,"一根竹竿") then  
    current_luren["height"] = "高"
    current_luren["shape"]="瘦"  
  elseif string.find(shape,"矮小粗胖") then  
    current_luren["height"] = "矮"
    current_luren["shape"]="胖" 
  elseif string.find(shape,"高大魁梧") then  
    current_luren["height"] = "高"
    current_luren["shape"]="胖"      
  elseif string.find(shape,"矮小灵活") then  
    current_luren["height"] = "矮"
    current_luren["shape"]="瘦"                 
  end
end



function clear_luren_set()
  for k, v in pairs(luren_set) do   
    luren_set[k] = nil   
  end   
end

function analyze_clue(msg) 
  if msg == nil then
    return nil
  end
  local clue = {}
  if string.find(msg,"深色衣服") then 
    clue["key"] = "cloth_color_type"
    clue["value"] = "深色"
  elseif string.find(msg,"浅色衣服") then
    clue["key"] = "cloth_color_type"
    clue["value"] = "浅色"  
  elseif string.find(msg,"深色鞋子") then
    clue["key"] = "shoes_color_type"
    clue["value"] = "深色" 
  elseif string.find(msg,"浅色鞋子") then
    clue["key"] = "shoes_color_type"
    clue["value"] = "浅色"         
  elseif string.find(msg,"丝绸衣服") then
    clue["key"] = "cloth_type"
    clue["value"] = "丝绸衣服"    
  elseif string.find(msg,"布衣") then
    clue["key"] = "cloth_type"
    clue["value"] = "布衣"   
  elseif string.find(msg,"夹袄") then
    clue["key"] = "cloth_type"
    clue["value"] = "夹袄"   
  elseif string.find(msg,"靴子") then
    clue["key"] = "shoes_type"
    clue["value"] = "靴子"   
  elseif string.find(msg,"布鞋") then
    clue["key"] = "shoes_type"
    clue["value"] = "布鞋"    
  elseif string.find(msg,"凉鞋") then
    clue["key"] = "shoes_type"
    clue["value"] = "凉鞋"    
  elseif string.find(msg,"高个子") then
    clue["key"] = "height"
    clue["value"] = "高"     
  elseif string.find(msg,"矮个子") then
    clue["key"] = "height"
    clue["value"] = "矮"   
  elseif string.find(msg,"个子不太高") then
    clue["key"] = "height"
    clue["value"] = "矮"    
  elseif string.find(msg,"竹竿") then
    clue["key"] = "shape"
    clue["value"] = "瘦"   
  elseif string.find(msg,"猴子") then
    clue["key"] = "shape"
    clue["value"] = "瘦"   
  elseif string.find(msg,"偏瘦") then
    clue["key"] = "shape"
    clue["value"] = "瘦"   
  elseif string.find(msg,"有点胖") then
    clue["key"] = "shape"
    clue["value"] = "胖"   
  elseif string.find(msg,"有点发胖") then
    clue["key"] = "shape"
    clue["value"] = "胖"     
  elseif string.find(msg,"发福") then
    clue["key"] = "shape"
    clue["value"] = "胖"   
  elseif string.find(msg,"女") then
    clue["key"] = "gender_type"
    clue["value"] = "女"    
  elseif string.find(msg,"流浪汉") then
    clue["key"] = "gender_type"
    clue["value"] = "男"    
  elseif string.find(msg,"男") then
    clue["key"] = "gender_type"
    clue["value"] = "男"    
  elseif string.find(msg,"花白") then
    clue["key"] = "age_type"
    clue["value"] = "60"     
  elseif string.find(msg,"白发苍苍") then
    clue["key"] = "age_type"
    clue["value"] = "60"   
  elseif string.find(msg,"入棺材") then
    clue["key"] = "age_type"
    clue["value"] = "60"   
  elseif string.find(msg,"老大不小") then
    clue["key"] = "age_type"
    clue["value"] = "40"   
  elseif string.find(msg,"中年") then
    clue["key"] = "age_type"
    clue["value"] = "40"   
  elseif string.find(msg,"青年") then
    clue["key"] = "age_type"
    clue["value"] = "20"   
  elseif string.find(msg,"年轻") then
    clue["key"] = "age_type"
    clue["value"] = "20"   
  else
    --echo("无法分析线索："..msg)
    return nil
  end
  return clue
end


function set_message(name, msg)
  if msg and validate_message(msg) then
    luren_set[name]["msg"] = msg
  end
end


function identify_all_luren()
  for k, v in pairs(luren_set) do
    if v["msg"] == nil then
      echo(v.."没有捕捉到消息\n")
    end
    local tclue = analyze_clue(v["msg"])
    if tclue ~= nil then
      tag_luren(k, tclue)
    end
  end
end



function tag_luren(name, clue)
  local luren = luren_set[name]
  -- 路人A提供特征X，而路人A自身符合特征X，则路人A不是盗贼，特征X为真。
  if luren[clue["key"]] == clue["value"] then
    for k, v in pairs(luren_set) do   
      if k == name then
         luren_set[k]["identified"]="negative" 
      elseif luren_set[k][clue["key"]] ~= clue["value"] then
         luren_set[k]["identified"]="negative"
      end   
    end 
  else --路人A提供特征X，那么除了路人A外，所有不符合特征X的其他路人都不是盗贼。
    for k, v in pairs(luren_set) do   
      if k ~= name and luren_set[k][clue["key"]] ~= clue["value"] then
        luren_set[k]["identified"]="negative"
      end   
    end   
  end  
end

function list_suspect()
  for k, v in pairs(luren_set) do
    if v["identified"] ~= "negative" then
      echo("\n"..v["full_name"]..":"..v["chinese_name"]..":"..v["msg"])
    end
  end
end

function validate_message(msg)
  if msg == nil
    or string.find(msg,"你找错人了吧") 
    or string.find(msg,"敢拦住老子的去路")
    or string.find(msg,"你已经问过了") then
      return false
  end
  return true
end

function get_result()
  identify_all_luren()
  list_suspect()
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>通用任务</name>
				<packageName></packageName>
				<script>
function get_map_code(city_name)
  return city[city_name].map
end

function back_to_hyd()
  local room = get_current_room_name()
  echo ("============&gt;:"..room)
  echo (node_city[room].back_hyd)
  echo("++++++")
  send(node_city[room].back_hyd)
end

function ask_job()
  local room = get_current_room_name()
  --echo("---&gt;room = "..room.."\n")
  send(node_city[room].ask_job)
end 

function job_done()
  local room = get_current_room_name()
  send(node_city[room].job_done)
end

function job_fail()
  local room = get_current_room_name()
  send(node_city[room].job_fail)
end

function back_to_yangzhou()
  local room = get_current_room_name()
  send(node_city[room].back_yangzhou)
end

function back_to_mrf()
  local room = get_current_room_name()
  --echo("[通用任务]----&gt;::"..room)
  send(node_city[room].back_mrf)
end

function back_to_hz()
  local room = get_current_room_name()
  --echo("[通用任务]----&gt;::"..room)
  send(node_city[room].back_hangzhou)
end

function back_to_pozhen()
  local room = get_current_room_name()
  --echo("[通用任务]----&gt;::"..room)
  send(node_city[room].back_pozhen)
end

function back_to_changan()
  local room = get_current_room_name()
  send(node_city[room].back_changan)
end

function back_to_luoyang()
  local room = get_current_room_name()
  send(node_city[room].back_luoyang)
end

function back_to_hua()
  local room = get_current_room_name()
  send(node_city[room].back_hua)
end

function back_to_hsz()
  local room = get_current_room_name()
  send(node_city[room].back_hsz)
end

function back_to_mzj()
  local room = get_current_room_name()
  local back_path = mzj_path_back(room)
  if back_path == nil then
    expandAlias("@ mzj")
  else
    send(back_path)
  end
end

function short_cut_to(target)
  local room = get_current_room_name()
  if node_city[room].short_name == nil then
    echo(" ==&gt; no short name\n")
  else
    send("node walk "..node_city[room].short_name.."_"..target)
  end
end

</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>陆家庄任务</name>
				<packageName></packageName>
				<script>lujiazhuang = {}
pozhen_task = {}
local pozhen_destination = {}

mrf_or_pozhen=""
function init_pozhen(city, room)
  pozhen_task.city = city
  pozhen_task.room = room
end

function pozhen_go()
  return pozhen_destination[pozhen_task.city].path
end

pozhen_destination["上饶"] = { path = "node walk pozhen_sr" }
pozhen_destination["临安府"] = { path = "node walk pozhen_hz" }
pozhen_destination["义兴县"] = { path = "node walk pozhen_yx" }
pozhen_destination["南昌"] = { path = "node walk pozhen_nc" }
pozhen_destination["嘉兴"] = { path = "node walk pozhen_jx" }
pozhen_destination["姑苏慕容"] = { path = "node walk pozhen_mr" }
pozhen_destination["岳王墓"] = { path = "node walk pozhen_yfm" }
pozhen_destination["岳阳"] = { path = "node walk pozhen_yy" }
pozhen_destination["建康府北城"] = { path = "node walk pozhen_jk" }
pozhen_destination["建康府南城"] = { path = "node walk lcf_cym" }
pozhen_destination["无锡"] = { path = "node walk pozhen_wx" }
pozhen_destination["明州"] = { path = "node walk pozhen_mz" }
pozhen_destination["杭州提督府"] = { path = "node walk pozhen_tdf" }
pozhen_destination["江州"] = { path = "node walk pozhen_jz" }
pozhen_destination["湖州"] = { path = "node walk pozhen_hzf" }
pozhen_destination["绍兴府"] = { path = "node walk pozhen_sx" }
pozhen_destination["苏州"] = { path = "node walk pozhen_mrf" }
pozhen_destination["衢州"] = { path = "node walk pozhen_qz" }
pozhen_destination["西湖"] = { path = "node walk pozhen_xhab" }
pozhen_destination["诸军统制府"] = { path = "node walk pozhen_mzj" }
pozhen_destination["铜官山"] = { path = "node walk pozhen_tgz" }
pozhen_destination["镇江"] = { path = "node walk pozhen_zj"}
pozhen_destination["长沙府"] = { path = "node walk pozhen_cs"}

local bagua = {
  qian = {"e","ne","w","s"},
  dui = {"n","sw","nw","s"},
  li = {"s","n","se","nw"},
  zhen = {"w","se","n","n"},
  xun = {"se","e","s","sw"},
  kan = {"ne","n","sw","nw"},
  gen = {"sw","w","w","s"},
  kun = {"nw","nw","s","e"}
}

step = 1
selected_gua = {}

function select_one_gua(gua)
  selected_gua = init_taohuazhen_task(gua)
end

function init_taohuazhen_task(gua)
  step = 1
  if gua == "乾天" then 
    return bagua.qian
  elseif gua == "兑泽" then
    return bagua.dui
  elseif gua == "离火" then
    return bagua.li
  elseif gua == "震雷" then
    return bagua.zhen
  elseif gua == "巽风" then
    return bagua.xun
  elseif gua == "坎水" then
    return bagua.kan
  elseif gua == "艮山" then
    return bagua.gen
  elseif gua == "坤地" then
    return bagua.kun
  end
end

function increase_step()
  step = step + 1
  if step == 5 then
    step = 1
  end
end

function take_one_step()
  send(selected_gua[step])
end

function restart_zhen()
  step = 1
  take_one_step()
end

lujiazhuang.gudong = ""
function identify_gudong(gudong)
  lujiazhuang.gudong = gudong
end

function map_gudong_to_id(name, id)
  if string.find(name, lujiazhuang.gudong) then
    lujiazhuang.gudong_id = id
    --echo("\n======= find:"..lujiazhuang.gudong_id.."--\n")
  end
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>韩世忠任务</name>
				<packageName></packageName>
				<script>_task = {}
function init_hsz(city, room)
  _task.city = city
  _task.room = room
end
local hsz_destination = {}

hsz_destination["上饶"] = { path = "node walk hsz_sr" }
hsz_destination["台州"] = { path = "node walk hsz_mz" }
hsz_destination["杭州提督府"] = { path = "node walk hsz_tdf" }
hsz_destination["归云庄"] = { path = "node walk hsz_gyz" }
hsz_destination["闽中"] = { path = "node walk hsz_fz" }
hsz_destination["建宁"] = { path = "node walk hsz_jn" }
hsz_destination["桃花岛"] = { path = "node walk hsz_mz" }
hsz_destination["龙泉镇"] = { path = "node walk hsz_lq" }
hsz_destination["温州府"] = { path = "node walk hsz_wz" }
hsz_destination["泉州"] = { path = "node walk hsz_qz" }
hsz_destination["雁荡山"] = { path = "node walk hsz_mz" }
hsz_destination["武夷山"] = { path = "node walk hsz_wy" }
hsz_destination["临安府"] = { path = "node walk hsz_hz" }
hsz_destination["处州府"] = { path = "node walk hsz_lq" }
hsz_destination["天台山"] = { path = "node walk hsz_mz" }
hsz_destination["义兴县"] = { path = "node walk hsz_yx" }
hsz_destination["南昌"] = { path = "node walk hsz_nc" }
hsz_destination["嘉兴"] = { path = "node walk hsz_jx" }
hsz_destination["姑苏慕容"] = { path = "node walk hsz_mr" }
hsz_destination["岳王墓"] = { path = "node walk hsz_yfm" }
hsz_destination["岳阳"] = { path = "node walk hsz_yy" }
hsz_destination["建康府北城"] = { path = "node walk hsz_jk" }
hsz_destination["建康府南城"] = { path = "node walk hsz_jk" }
hsz_destination["无锡"] = { path = "node walk hsz_sz" }
hsz_destination["明州"] = { path = "node walk hsz_mz" }
hsz_destination["杭州提督府"] = { path = "node walk hsz_tdf" }
hsz_destination["江州"] = { path = "node walk hsz_jz" }
hsz_destination["湖州"] = { path = "node walk hsz_hzf" }
hsz_destination["绍兴府"] = { path = "node walk hsz_sx" }
hsz_destination["苏州"] = { path = "node walk hsz_mrf" }
hsz_destination["衢州"] = { path = "node walk hsz_qz1" }
hsz_destination["西湖"] = { path = "node walk hsz_xhab" }
hsz_destination["诸军统制府"] = { path = "node walk hsz_mzj" }
hsz_destination["铜官山"] = { path = "node walk hsz_tgz" }
hsz_destination["镇江"] = { path = "node walk hsz_zj" }
hsz_destination["长沙府"] = { path = "node walk hsz_cs" }

function hsz_go()
  echo("city --&gt; ".._task.city)
  echo(" path ---&gt; :"..hsz_destination[_task.city].path.."\n")
  return send(hsz_destination[_task.city].path)
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>孟之经任务</name>
				<packageName></packageName>
				<script>mzj = {}

local mzj_room = {}

mzj_room["正阳门"] = { path = "node walk mzj_jkzym", back_to_meng = "north;northwest;west;north;north;north;north"}
mzj_room["三山街"] = { path = "node walk mzj_jkssj", back_to_meng = "east;north;north;north;north;east;east;east"}
mzj_room["三山门"] = {path = "node walk mzj_jkssm", back_to_meng = "east;east;north;north;north;north;east;east;east"}
mzj_room["亲军营"] = {path = "node walk mzj_jkqjy", back_to_meng = "northwest;west;north;north;north;north"}

mzj_room["云来客栈"] = {path = "node walk mzj_jkylkz", back_to_meng = "north;east;north;north;east;east;east"}
mzj_room["内桥"] = {path = "node walk mzj_jknq", back_to_meng = "north;north;east;east;east"}
mzj_room["南大街"] = {path = "node walk mzj_jkndj", back_to_meng = "north;north;north;east;east;east"}
mzj_room["圣府"] = {path = "node walk mzj_jksf", back_to_meng = "east;north;north;north;north;north"}

mzj_room["城南官道"] = {path = "node walk mzj_jkcngd3", back_to_meng = "north;north;north;north;north;north;north;east;east;east"}
mzj_room["大中街"] = {path = "node walk mzj_jkdzj", back_to_meng = "east;east;north;north;north;north;north"}
mzj_room["太平门"] = {path = "node walk mzj_jktpm", back_to_meng = "southeast;southeast;west;west;west"}
mzj_room["小巷"] = {path = "node walk mzj_jkxx", back_to_meng = "se;do 3 w"}

mzj_room["建康府"] = {path = "node walk mzj_jkf", back_to_meng = "east;north;north;north;east;east;east"}
mzj_room["建康府南城宠物店"] = {path = "node walk mzj_jkcwd", back_to_meng = "e;n;e;e;e"} 
mzj_room["承恩寺"] = {path = "node walk mzj_jkces", back_to_meng = "west;north;north;north;east;east;east"}
mzj_room["朝阳门"] = {path = "node walk mzj_jkcym", back_to_meng = "w;w;w"}
mzj_room["土路"] = {path = "node walk mzj_jkcym", back_to_meng = "w;w;w;w"}
mzj_room["钟山"] = {path = "node walk mzj_jkcym", back_to_meng = "s;w;w;w"}
mzj_room["正阳门"] = {path = "node walk mzj_jkzym", back_to_meng = "north;northwest;west;north;north;north;north"}
mzj_room["青石官道"] = {path = "node walk mzj_jkzym", back_to_meng = "n;north;northwest;west;north;north;north;north"}
mzj_room["淮清桥"] = {path = "node walk mzj_jkhqq", back_to_meng = "do 5 n"}

mzj_room["聚宝门"] = {path = "node walk mzj_jkjbm", back_to_meng = "do 6 n;do 3 e"}
mzj_room["药铺"] = {path = "node walk mzj_jkyp", back_to_meng = "east;east;north;north;east;east;east"}
mzj_room["贡院"] = {path = "node walk mzj_jkgy", back_to_meng = "s;e;do 5 n"}
mzj_room["通济门"] = {path = "node walk mzj_jktjm", back_to_meng = "w;do 5 n"}

mzj_room["金陵镖局"] = {path = "node walk mzj_jkjlbj", back_to_meng = "e;do 5 n;"}
mzj_room["镇淮桥"] = {path = "node walk mzj_jkzhq", back_to_meng = "north;north;north;north;north;east;east;east"}
mzj_room["长街"] = {path = "node walk mzj_jkcj", back_to_meng = "do 3 e"}

function mzj_path_back(room)
  if mzj_room[room] ~= nil then
    return mzj_room[room].back_to_meng
  else
    echo("=== 不存在这个mzj房间\n")
    return nil
  end   
end

function mzj_to_waiting_room(room)
  mzj.waiting_room = room
  local path = mzj_room[room].path
  if path == nil then      
    echo(" == 需要补充这个地点 - "..room)
  else
    send(path)  
  end  
end</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>南国围猎任务</name>
				<packageName></packageName>
				<script>nanguo = {}
function image_address(city, room)
  nanguo.image_city = city
  nanguo.image_room = room
end

function reciever_address(city,room)
  nanguo.reciever_city = city
  nanguo.reciever_room = room
end

function dog_address(city,room)
  nanguo.dog_city = city
  nanguo.dog_room = room
end

function checking_image(buy_image)
  nanguo.buy_image = buy_image
end

function deal_with_image()
  send(nanguo.buy_image)
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>纪晓芙任务</name>
				<packageName></packageName>
				<script>jxf = {}
function init_jxf(city,room)
  jxf.city = city
  jxf.room = room
end</script>
				<eventHandlerList />
			</Script>
		</ScriptGroup>
		<Script isActive="yes" isFolder="no">
			<name>fullme</name>
			<packageName></packageName>
			<script>-- =========================================================
-- fullme.lua  (RIGHT-SIDE, COMPATIBLE, AUTO-FIT JPG VERSION)
-- =========================================================
-- Show PKUxkx fullme image inside Mudlet
-- No LuaSocket required
-- Uses downloadFile + sysDownloadDone
-- Right-side dock, compatible with old/new Mudlet
cecho("&lt;cyan&gt; [fullme] 已加载\n")
fullme = fullme or {}

-- =========================
-- Config
-- =========================
fullme.cfg = {
  windowName = "fullme_img",

  -- Max window size (image will be scaled to fit within this, keeping aspect ratio)
  w = 420,
  h = 420,

  -- Top margin
  y = 20,

  -- Right margin
  margin = 80,

  prefer_net = true,
  cache_dir_name = "fullme_cache",
  debug = false,
}

-- =========================
-- State
-- =========================
fullme._seq   = 0
fullme._jobs  = {}
fullme._eh    = nil
fullme._resizeEH = nil

-- current (actual) window size after autoFit
fullme._curW = fullme._curW or fullme.cfg.w
fullme._curH = fullme._curH or fullme.cfg.h

-- =========================
-- Utils
-- =========================
local function dbg(msg)
  if fullme.cfg.debug then
    cecho("\n&lt;cyan&gt;[fullme]&lt;/cyan&gt; " .. msg .. "\n")
  end
end

local function err(msg)
  cecho("\n&lt;red&gt;[fullme]&lt;/red&gt; " .. msg .. "\n")
end

local function ensureDir(path)
  if lfs and lfs.attributes then
    if not lfs.attributes(path) then
      lfs.mkdir(path)
    end
  end
end

local function cacheDir()
  local dir = getMudletHomeDir() .. "/" .. fullme.cfg.cache_dir_name
  ensureDir(dir)
  return dir
end

-- Main window size (compatible)
function fullme.getMainSize()
  if type(getMainWindowSize) == "function" then
    local w, h = getMainWindowSize()
    return w, h
  end

  if type(getMainWindowDimensions) == "function" then
    local t = getMainWindowDimensions()
    if type(t) == "table" then
      return t.width, t.height
    end
  end

  return 1024, 768
end

function fullme.normalizeUrl(url)
  if fullme.cfg.prefer_net then
    url = url:gsub("^http://fullme%.pkuxkx%.com/robot%.php",
                   "http://fullme.pkuxkx.net/robot.php")
  end
  return url
end

local function fileStartsWith(path, bytes)
  local f = io.open(path, "rb")
  if not f then return false end
  local head = f:read(#bytes) or ""
  f:close()
  return head == bytes
end

local function detectImage(path)
  if fileStartsWith(path, "\137PNG\r\n\026\n") then return true end
  if fileStartsWith(path, "\255\216\255") then return true end
  if fileStartsWith(path, "GIF87a") or fileStartsWith(path, "GIF89a") then return true end
  if fileStartsWith(path, "RIFF") then
    local f = io.open(path, "rb")
    if f then
      local h = f:read(12) or ""
      f:close()
      if h:sub(9,12) == "WEBP" then return true end
    end
  end
  return false
end

local function readAll(path)
  local f = io.open(path, "rb")
  if not f then return nil end
  local s = f:read("*a")
  f:close()
  return s
end

local function absolutize(base, src)
  if not src then return nil end
  if src:match("^https?://") then return src end
  local host = base:match("^(https?://[^/]+)")
  if src:sub(1,1) == "/" then
    return host .. src
  end
  local dir = base:gsub("%?.*$",""):match("^(https?://.*/)")
  return (dir or host.."/") .. src
end

local function extractImg(html, base)
  local img = html:match('&lt;img[^&gt;]-src=["\'](.-)["\']')
  if img then return absolutize(base, img) end

  return html:match("(https?://[%w%._%-%/%%?=&amp;]+%.png[%w%._%-%/%%?=&amp;]*)")
      or html:match("(https?://[%w%._%-%/%%?=&amp;]+%.jpe?g[%w%._%-%/%%?=&amp;]*)")
      or html:match("(https?://[%w%._%-%/%%?=&amp;]+%.gif[%w%._%-%/%%?=&amp;]*)")
      or html:match("(https?://[%w%._%-%/%%?=&amp;]+%.webp[%w%._%-%/%%?=&amp;]*)")
end

-- =========================
-- Image size (JPEG/PNG/GIF) for auto-fit
-- =========================
local function readU16BE(f)
  local b1 = f:read(1)
  local b2 = f:read(1)
  if not b1 or not b2 then return nil end
  return b1:byte() * 256 + b2:byte()
end

local function getJpegSize(path)
  local f = io.open(path, "rb")
  if not f then return nil end

  local b1 = f:read(1)
  local b2 = f:read(1)
  if not b1 or not b2 or b1:byte() ~= 0xFF or b2:byte() ~= 0xD8 then
    f:close()
    return nil
  end

  while true do
    -- seek marker prefix 0xFF
    local c = f:read(1)
    if not c then break end
    while c and c:byte() ~= 0xFF do
      c = f:read(1)
    end
    if not c then break end

    -- skip fill 0xFFs
    local m = f:read(1)
    if not m then break end
    while m and m:byte() == 0xFF do
      m = f:read(1)
    end
    if not m then break end

    local marker = m:byte()

    -- SOS/EOI -&gt; stop
    if marker == 0xDA or marker == 0xD9 then
      break
    end

    local segLen = readU16BE(f)
    if not segLen or segLen &lt; 2 then break end
    local payloadLen = segLen - 2

    local isSOF =
      (marker &gt;= 0xC0 and marker &lt;= 0xC3) or
      (marker &gt;= 0xC5 and marker &lt;= 0xC7) or
      (marker &gt;= 0xC9 and marker &lt;= 0xCB) or
      (marker &gt;= 0xCD and marker &lt;= 0xCF)

    if isSOF then
      f:read(1) -- precision
      local h = readU16BE(f)
      local w = readU16BE(f)
      f:close()
      if w and h then return w, h end
      return nil
    else
      f:seek("cur", payloadLen)
    end
  end

  f:close()
  return nil
end

local function getPngGifSize(path)
  local f = io.open(path, "rb")
  if not f then return nil end
  local head = f:read(24) or ""
  f:close()

  -- PNG
  if head:sub(1,8) == "\137PNG\r\n\026\n" and head:sub(13,16) == "IHDR" then
    local function be32(s, i)
      local b1,b2,b3,b4 = s:byte(i, i+3)
      if not b1 then return nil end
      return ((b1*256 + b2)*256 + b3)*256 + b4
    end
    local w = be32(head, 17)
    local h = be32(head, 21)
    if w and h then return w, h end
  end

  -- GIF
  if head:sub(1,6) == "GIF87a" or head:sub(1,6) == "GIF89a" then
    local b7,b8,b9,b10 = head:byte(7,10)
    if b10 then
      local w = b7 + b8*256
      local h = b9 + b10*256
      return w, h
    end
  end

  return nil
end

function fullme.getImageSize(path)
  local w, h = getJpegSize(path)
  if w and h then return w, h end
  return getPngGifSize(path)
end

function fullme.autoFitFromFile(path)
  local iw, ih = fullme.getImageSize(path)
  if not iw or not ih then
    -- if can't detect size, keep current size
    return
  end

  local maxW = fullme.cfg.w
  local maxH = fullme.cfg.h
  local s = math.min(maxW / iw, maxH / ih, 1) -- do not upscale

  local nw = math.max(1, math.floor(iw * s + 0.5))
  local nh = math.max(1, math.floor(ih * s + 0.5))

  fullme._curW, fullme._curH = nw, nh
  resizeWindow(fullme.cfg.windowName, nw, nh)
  fullme.updatePosition()
end

-- =========================
-- UI
-- =========================
function fullme.updatePosition()
  local mw, _ = fullme.getMainSize()
  local w = fullme._curW or fullme.cfg.w
  local x = mw - w - fullme.cfg.margin
  local y = fullme.cfg.y
  moveWindow(fullme.cfg.windowName, x, y)
end

function fullme.initUI()
  if not getWindowWrap(fullme.cfg.windowName) then
    createLabel(
      fullme.cfg.windowName,
      0,
      0,
      fullme.cfg.w,
      fullme.cfg.h,
      true
    )
    setBackgroundColor(fullme.cfg.windowName, 0, 0, 0, 255)
  end

  -- initialize to current size (may be auto-fitted later)
  resizeWindow(fullme.cfg.windowName, fullme._curW or fullme.cfg.w, fullme._curH or fullme.cfg.h)
  fullme.updatePosition()

  if not fullme._resizeEH then
    fullme._resizeEH = registerAnonymousEventHandler(
      "sysWindowResizeEvent",
      function() fullme.updatePosition() end
    )
  end
end

-- =========================
-- Download pipeline
-- =========================
function fullme.fetchRobot(url)
  fullme.initUI()
  fullme._seq = fullme._seq + 1

  url = fullme.normalizeUrl(url)
  local file = string.format("%s/robot_%d.dat", cacheDir(), fullme._seq)

  fullme._jobs[file] = {
    stage = "robot",
    url = url,
    id = fullme._seq
  }

  downloadFile(file, url)
end

function fullme.fetchImage(url, id)
  url = fullme.normalizeUrl(url)
  local file = string.format("%s/fullme_%d.img", cacheDir(), id)

  fullme._jobs[file] = {
    stage = "img",
    url = url,
    id = id
  }

  downloadFile(file, url)
end

function fullme.onDownloadDone(_, file)
  local job = fullme._jobs[file]
  if not job then return end

  if job.stage == "robot" then
    if detectImage(file) then
      -- robot.php directly returned an image
      fullme.autoFitFromFile(file)
      setBackgroundImage(fullme.cfg.windowName, file)
      fullme._jobs[file] = nil
      return
    end

    local body = readAll(file)
    local img = body and extractImg(body, job.url)
    if not img then
      err("无法解析图片（可能 JS 动态或防盗链）")
      fullme._jobs[file] = nil
      return
    end

    fullme._jobs[file] = nil
    fullme.fetchImage(img, job.id)
    return
  end

  if job.stage == "img" then
    if detectImage(file) then
      fullme.autoFitFromFile(file)
      setBackgroundImage(fullme.cfg.windowName, file)
    else
      err("图片下载失败（非图片内容）")
    end
    fullme._jobs[file] = nil
  end
end

-- =========================
-- Public API
-- =========================
function fullme.showFromUrl(url)
  if not fullme._eh then
    fullme._eh = registerAnonymousEventHandler(
      "sysDownloadDone",
      "fullme.onDownloadDone"
    )
  end
  fullme.fetchRobot(url)
end

-- =========================
-- Reload support
-- =========================
fullme._lastUrl = fullme._lastUrl or nil

-- override/showFromUrl to remember last url
local _old_showFromUrl = fullme.showFromUrl
function fullme.showFromUrl(url)
  fullme._lastUrl = url
  _old_showFromUrl(url)
end

-- reload last url (force re-download)
function fullme.reload(url)
  url = url or fullme._lastUrl
  if not url or url == "" then
    err("reload 失败：没有可用的上一次 URL")
    return
  end
  fullme.fetchRobot(url)
end

-- auto init
fullme.initUI()
</script>
			<eventHandlerList>
				<string>sysProfileLoadEvent</string>
			</eventHandlerList>
		</Script>
		<Script isActive="yes" isFolder="no">
			<name>XKX scripts</name>
			<packageName></packageName>
			<script>local is_full = false
local skill = "strike"

general_scripts = {
  skills_to_learn = "yc;;lian "..skill.." 50"
}

function release_force()
  expandAlias("yr;lingwu blade")
  --expandAlias("yr;;lingwu throwing")
  --expandAlias("yr;;do 4 learn huang for literate 50")
  --expandAlias("yc;;lian parry 50")
  --expandAlias(general_scripts.skills_to_learn)
end

function reset_is_full()
  is_full = false
end
function basic_skill_is_higher()
  general_scripts.skills_to_learn = "yc;;lian "..skill.." 50"
end

function advanced_skill_is_higher()
  general_scripts.skills_to_learn = "yr;;lingwu "..skill..";;yr;;lingwu "..skill
end


function blood_force_full()
  is_full = true
end

function start_jiqi()
  is_full = false
  expandAlias("yr;;yc")
end

function yunqi()
  if is_full then
    echo("====\n")
    return
  end
  echo("---")
  expandAlias("yc")
end

function dazuo_max()
  if is_full then
    return
  end
  expandAlias("dm")  
end



local skill = "dodge"

function lingwu_basic_skill()
  return "lingwu "..skill
end

function lian_advanced_skill()
  return "lian "..skill.." 50"
end

function pick_one_skill()
  -- learning_index = math.fmod(learning_index,8)+1
  -- return skill_learning_set[learning_index]
  learning_index = math.fmod(learning_index,2)+1
  if learning_index == 1 then
    return "lian cuff 40"
  else
    return "lingwu cuff"
  end
end
-- split string
-- str = "庄子·杂篇·庚桑楚"
-- sep = "·"
-- return - {"庄子", "杂篇", "庚桑楚"}
function split_string(str, sep)
  local t = {}
  for part in string.gmatch(str, '([^'..sep..']+)') do
    table.insert(t, part)
  end
  return t
end

function eat_and_drink()
  send("drink;;drink")
  --send("eat gan liang;;eat gan liang;;eat gan liang")
  send("do 3 eat zao")
end

</script>
			<eventHandlerList />
		</Script>
		<Script isActive="yes" isFolder="no">
			<name>发现了npc或关键物品</name>
			<packageName></packageName>
			<script>local last_npc_found = {}
local npc_props = {}
npc_props.title = {}
npc_props.name = {}

function find_npc(title, name)
  last_npc_found.title = title
  last_npc_found.name = name
end

function last_npc()
  return last_npc_found
end

function display_last_npc()
  echo(" \n-- &gt; title: "..last_npc_found.title)
  echo(" \n-- &gt; name: " ..last_npc_found.name)
end</script>
			<eventHandlerList />
		</Script>
		<Script isActive="yes" isFolder="no">
			<name>当前目的地</name>
			<packageName></packageName>
			<script>local dest = {}
dest.primary = {}
dest.secondary = {}

function dest_task_type(type)
  dest.task = type
end

function dest_primary_address(city, room)
  dest["primary"].city = city
  dest["primary"].room = room
end

function dest_secondary_addr(city, room)
  dest["secondary"].city = city
  dest["secondary"].room = room
end

function primary_dest()
  return dest.primary
end

function secondary_dest()
  return dest.secondary
end


function get_task_type()
  return dest.task 
end

</script>
			<eventHandlerList />
		</Script>
		<Script isActive="yes" isFolder="no">
			<name>status_handler</name>
			<packageName></packageName>
			<script>-- stat = {
  -- food = -100,
  -- water= -100,
  -- jing = -100,
  -- qi = -100,
  -- neili = -100,
  -- jingli = -100,
  -- is_busy = ""
-- }

function status_handler()
  --display(gmcp)
  if gmcp.GMCP.Status.food then
    stat.food = gmcp.GMCP.Status.food
  end
  
  if gmcp.GMCP.Status.water then
    stat.water = gmcp.GMCP.Status.water
  end

  if gmcp.GMCP.Status.jing then
    stat.jing = gmcp.GMCP.Status.jing
  end
  
  if gmcp.GMCP.Status.qi then
    stat.qi = gmcp.GMCP.Status.qi
  end

  if gmcp.GMCP.Status.neili then
    stat.neili = gmcp.GMCP.Status.neili
  end

  if gmcp.GMCP.Status.jingli then
    stat.jingli = gmcp.GMCP.Status.jingli
  end

  if gmcp.GMCP.Status.is_busy then
    stat.is_busy = gmcp.GMCP.Status.is_busy
  end
  
end</script>
			<eventHandlerList>
				<string>gmcp.GMCP.Status</string>
			</eventHandlerList>
		</Script>
		<Script isActive="yes" isFolder="no">
			<name>关键节点或npc</name>
			<packageName></packageName>
			<script>key_room = {}

key_room["建宁府"] = {map = "jn"}
key_room["正一观"] = {map = "lhs"}
key_room["闽中"] = {map = "fz"}
key_room["灵江南岸"] = {map = "tzf"}
key_room["灵江西岸"] = {map = "tzf"}
key_room["碧霄峰"] = {map = "yds"}
key_room["濠州"] = {map = "haozhou"}
key_room["信阳"] = {map = "xinyang"}
key_room["麒麟村"] = {map = "qlc"}
key_room["登州"] = {map = "dengzhou"}
key_room["石板桥"] = {map = "luzhou"}
key_room["泉州"] = {map = "qz"}
key_room["九龙窠"] = {map = "wuyi"}
key_room["龙泉镇"] = {map = "lqz"}
key_room["嘉兴城"] = {map = "jx"}
key_room["盛巷桥"] = {map = "wx"}
key_room["镇江"] = {map = "zhenj"}
key_room["岳阳"] = {map = "yy"}
key_room["洛阳中心广场"] = {map = "luoyang"}

key_room["青州府"] = {map = "qingzhou"}

key_room["木扎岭"] = {map = "funiu"}
key_room["孟之经"] = {map = "jk"}
key_room["建康"] = {map = "jk"}
key_room["正阳门"] = {map = "jk"}
key_room["朝阳门"] = {map = "jk"}

key_room["韩世忠"] = {map = "hz"}
key_room["大理寺"] = {map = "hz"}

key_room["湖州"] = {map = "hzf"}

key_room["铜官镇"] = {map = "tgz"}
key_room["江州"] = {map = "jiangz"}

key_room["铅山"] = {map = "sr"}
key_room["上饶"] = {map = "sr"}

key_room["代州"] = {map = "dzhou"}
key_room["金华府"] = {map = "sx"}
key_room["义兴县城"] = {map = "yx"}
key_room["荆州码头"] = {map = "jingzhou"}

key_room["王府大门"] = {map = "kqwf"}

key_room["永安门"] = {map = "bj"}
key_room["德胜门"] = {map = "bj"}
key_room["广安门"] = {map = "bj"}
key_room["高粱地"] = {map = "bj"}
key_room["天安门广场"] = {map = "bj"}
key_room["灵境胡同"] = {map = "bj"}
key_room["辟才胡同"] = {map = "bj"}


key_room["大同魁星楼"] = {map = "datong"}
key_room["云冈石窟"] = {map = "ygsk"}

key_room["恒山山门"] = {map = "hengshan"}
key_room["九天宫"] = {map = "hengshan"}

key_room["小村庄"] = {map = "ry"}
key_room["天安门"] = {map = "zjc"}
key_room["朝曦门"] = {map = "jyang"}
key_room["西天门"] = {map = "tiantan"}
key_room["扬州"] = {map = "yz"}
key_room["神龙岛码头"] = {map = "sld"}
key_room["张家口"] = {map = "zjk"}
key_room["沧浪亭"] = {map = "sz"}

key_room["濮阳"] = {map = "hb"}
key_room["塘沽口"] = {map = "hb"}

key_room["岱宗坊"] = {map = "taishan"}
key_room["威海卫中心"] = {map = "whw"}
key_room["曲阜"] = {map = "qufu"}
key_room["戏马台"] = {map = "xuzhou"}
key_room["晋阳"] = {map = "jyang"}



</script>
			<eventHandlerList />
		</Script>
		<Script isActive="yes" isFolder="no">
			<name>交战-perform</name>
			<packageName></packageName>
			<script>tanzhi_cd = false
fuxue_cd = false
xiaohua_cd = false

function tanzhi()
  tanzhi_cd = true
  tempTimer(5, function()
    tanzhi_cd = false 
  end)
end

function fuxue()
  fuxue_cd = true
  tempTimer(4, function()
    fuxue_cd = false 
  end)
end

function xiaohua()
  xiaohua_cd = true
  tempTimer(10, function()
    xiaohua_cd = false 
  end)
end

function taohua_perform_skills(qishi)
  local qs = qishi+0
  if qs &gt; 7 and not fuxue_cd then
    expandAlias("phf")
  end
  
  if qs &gt; 11 and not tanzhi_cd then
    send("perform finger.tan")
  end
  
  if qs &gt; 15 and not xiaohua_cd then
    expandAlias("ps")
  end
  
end

</script>
			<eventHandlerList />
		</Script>
		<Script isActive="yes" isFolder="no">
			<name>当前位置相关 - non-GMCP</name>
			<packageName></packageName>
			<script>local current_room = {}
local pre_room = {}

function get_current_room_name()
  return current_room.name
end

function set_xkx_room(name)
  pre_room.name = current_room.name or ""
  --cecho(" \n pre room set to: &lt;yellow&gt;"..pre_room.name.."\n")
  cecho(" current room set to: &lt;yellow&gt;"..name.."\n")
  current_room.name = name
  local map_key = key_room[name] and key_room[name].map
  if map_key ~= nil then
    expandAlias("mload "..map_key)
  end  
end

function show_xkx_room()
  cecho(" \nxkx_room: &lt;yellow&gt;"..current_room.name.."\n")
end</script>
			<eventHandlerList />
		</Script>
		<Script isActive="no" isFolder="no">
			<name>move_handler</name>
			<packageName></packageName>
			<script>maps = {}
local city="wuxi"
local current_room = {}
local prev_room = {}
function move_handler()
  current_room = gmcp.GMCP.Move[1]
  display(current_room)
  echo(city.."[\""..current_room.short.."\"] = ")
  display(current_room.dir)

  -- if not current_room.result then
    -- return
  -- end 
  -- if room_exists(current_room.short) then
    -- return
  -- end  
  -- local room = {}
  -- room.short = current_room.short
  -- room.dirs = current_room.dir
  -- table.insert(maps, room)
-- end
end

</script>
			<eventHandlerList>
				<string>gmcp.GMCP.Move</string>
			</eventHandlerList>
		</Script>
		<Script isActive="no" isFolder="no">
			<name>combat_handler</name>
			<packageName></packageName>
			<script>function combat_handler()
  local cmb = gmcp.GMCP.Combat[1]
  display(cmb)
end</script>
			<eventHandlerList>
				<string>gmcp.GMCP.Combat</string>
			</eventHandlerList>
		</Script>
		<Script isActive="yes" isFolder="no">
			<name>util</name>
			<packageName></packageName>
			<script>local function split(str, delimiter)
    local resultTable = {}
    -- The pattern '([^' .. delimiter .. ']+)' matches one or more characters
    -- that are NOT the delimiter, effectively capturing the segments between delimiters.
    for segment in string.gmatch(str, "([^" .. delimiter .. "]+)") do
        table.insert(resultTable, segment)
    end
    return resultTable
end</script>
			<eventHandlerList />
		</Script>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>测绘</name>
			<packageName></packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>mapper_core</name>
				<packageName></packageName>
				<script>-- ======================================================
-- mapper_core.lua
-- 方向规范 + 指纹构造 + 当前房间FP（不涉及区域）
-- ======================================================

mapper_core = mapper_core or {}

-------------------------------------------------------
-- 1. 方向规范化（GMCP方向 → 内部缩写）
-------------------------------------------------------
mapper_core.dirAlias = mapper_core.dirAlias or {
  east="e", west="w", north="n", south="s",
  northeast="ne", northwest="nw",
  southeast="se", southwest="sw",
  up="u", down="d",

  southdown="sd",   southup="su",
  eastdown="ed",    eastup="eu",
  westdown="wd",    westup="wu",
  northup="nu",     northdown="nd",

  northeastup="neu",     northeastdown="ned",
  northwestup="nwu",     northwestdown="nwd",
  southeastup="seu",     southeastdown="sed",
  southwestup="swu",     southwestdown="swd",

  out="out", enter="enter",
  ride="ride",
}

function mapper_core.normalizeDir(dir)
  return mapper_core.dirAlias[dir] or dir
end

-------------------------------------------------------
-- 2. 反向方向（缩写 → 缩写）
-------------------------------------------------------
mapper_core.opposite = mapper_core.opposite or {
  n="s", s="n",
  e="w", w="e",
  ne="sw", sw="ne",
  nw="se", se="nw",
  u="d", d="u",

  sd="nu", nu="sd",
  su="nd", nd="su",

  ed="wu", wu="ed",
  eu="wd", wd="eu",

  neu="swd", swd="neu",
  ned="swu", swu="ned",
  nwu="sed", sed="nwu",
  nwd="seu", seu="nwd",

  out="enter", enter="out",
  ride="ride",
}

function mapper_core.oppositeDir(d)
  return mapper_core.opposite[d]
end

-------------------------------------------------------
-- 3. 排序 + 指纹构造
--    指纹格式:  name|dir1,dir2,dir3
-------------------------------------------------------
function mapper_core.sortedCopy(exits)
  local t = {}
  for i, v in ipairs(exits or {}) do
    t[i] = v
  end
  table.sort(t)
  return t
end

function mapper_core.fingerprint(name, exits)
  local sorted = mapper_core.sortedCopy(exits)
  return name .. "|" .. table.concat(sorted, ",")
end

-------------------------------------------------------
-- 4. 从 GMCP 房间数据构造指纹
-- GMCP.Move[1] 样例:
--   { short="南大街", dir={"south","north","east",...} }
-------------------------------------------------------
function mapper_core.buildFromGMCP(room)
  if not room then return nil end

  local name = room.short
  local dirs = room.dir or {}

  if not name then return nil end

  local normalized = {}
  for _, d in ipairs(dirs) do
    table.insert(normalized, mapper_core.normalizeDir(d))
  end

  return mapper_core.fingerprint(name, normalized)
end

-------------------------------------------------------
-- 5. 当前房间指纹（只记录 FP，不关心区域）
-------------------------------------------------------
mapper_core.currentFP = mapper_core.currentFP or nil

function mapper_core.updateFromGMCP(rawMove)
  local room = rawMove

  if not room and gmcp and gmcp.GMCP and gmcp.GMCP.Move then
    room = gmcp.GMCP.Move[1] or gmcp.GMCP.Move
  end

  if not room then return end

  mapper_core.currentFP = mapper_core.buildFromGMCP(room)
end

function mapper_core.printCurrent()
  cecho(string.format(
    "\n&lt;cyan&gt;[mapper_core] currentFP = %s\n",
    tostring(mapper_core.currentFP)
  ))
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>测绘工具库</name>
				<packageName></packageName>
				<script>-- Script: mapper-core 里放：

mapper = mapper or {}

function mapper.sortedCopy(exits)
  local t = {}
  for i, v in ipairs(exits or {}) do
    t[i] = v
  end
  table.sort(t)
  return t
end

function mapper.fingerprint(name, exits)
  local sorted = mapper.sortedCopy(exits)
  return name .. "|" .. table.concat(sorted, ",")
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>mapper</name>
				<packageName></packageName>
				<script>-- 测绘机器人（基于 gmcp.GMCP.Move[1]）
-- 生成的地图结构：
-- mapper.mapNodes = {
--   ["房间名|按字典序排序的出口缩写，用逗号分隔"] = {
--     name  = "房间名",
--     exits = { ["dir缩写"] = "目标房间指纹", ... },
--   },
-- }

mapper = mapper or {}
mapper.mappingEnabled = true   -- 默认开启测绘

-------------------------------------------------------
-- 边界设置
-------------------------------------------------------

-- ☆☆ 边界房间名字：这些名字的房间会被当成“边缘”，不会从这里继续向外探索 ☆☆
mapper.boundaryNames = mapper.boundaryNames or {
  ["青石大道"] = true, 
  ["长台关"] = true, 
  --["白河东岸"] = true, 
  --["襄城县"] = true, 
  ["大官道"] = true, 
  ["环翠峪"] = true, 
  ["天光云影亭"] = true, 
  ["山间道"] = true,
  ["伊川"] = true, 
  ["嵩县"] = true,
  ["昭平湖"] = true,
  ["黄草山"] = true,
  ["荒地"] = true,  
  ["石拱桥"] = true,
  -- ["东直门"] = true,
  -- ["宣武门"] = true,
  -- ["崇文门"] = true,
  -- ["天安门"] = true,
  -- ["正阳门"] = true,  
}

-------------------------------------------------------
-- 忽略房间设置（新增）
-------------------------------------------------------
-- ☆☆ 这些房间将被当成“不存在”：不会入图，也不会从它继续探索
mapper.ignoreNames = mapper.ignoreNames or {
  --["内城墙"] = true,
  --["城墙脚下"] = true,
  --["小胡同"] = true,
  -- ["宫中小道"] = true,
   --["土路"] = true,
  
  
}
-- 可选：进到忽略房间后，回退是否加延迟
mapper.ignoreBackDelaySec = mapper.ignoreBackDelaySec or 0   -- 0 表示立刻回去；比如 0.2 表示 0.2s 后回去

-------------------------------------------------------
-- Retry 设置（新增）
-------------------------------------------------------
mapper.maxRetryPerExit = mapper.maxRetryPerExit or 5    -- 每个方向失败累计到该次数才判定 badExits
mapper.retryDelaySec   = mapper.retryDelaySec or 0.5   -- 重试之间延迟（秒）
mapper.retryTimer      = mapper.retryTimer or nil       -- 当前重试 timer 句柄（防止堆叠）

-------------------------------------------------------
-- 内部存储结构
-------------------------------------------------------

-- fp（fingerprint） = "房间名|出口缩写1,出口缩写2,..."
-- nodes[fp] = {
--   name       = "房间名",
--   exits      = { ["dir缩写"] = "目标房间fp", ... },
--   exitList   = { "dir缩写1", "dir缩写2", ... }  -- 排序后
--   isBoundary = bool,
--   badExits   = { ["dir缩写"]=true, ... },
--   failCounts = { ["dir缩写"]=n, ... },           -- 新增：方向失败累计次数
-- }

mapper.nodes      = mapper.nodes or {}
mapper.currentFP  = mapper.currentFP or nil   -- 当前房间指纹
mapper.pendingDir = mapper.pendingDir or nil  -- 正在走的方向（缩写）
mapper.moveStack  = mapper.moveStack or {}    -- DFS 路径栈（存方向缩写）
mapper.mapping    = mapper.mapping or false   -- 是否正在测绘

-------------------------------------------------------
-- 工具函数
-------------------------------------------------------

local function mprint(msg)
  if cecho then
    cecho("\n&lt;green&gt;[Mapper]&lt;reset&gt; " .. msg .. "\n")
  else
    print("[Mapper] " .. msg)
  end
end

local function nodeCount()
  local c = 0
  for _ in pairs(mapper.nodes) do c = c + 1 end
  return c
end

local function cancelRetryTimer()
  if mapper.retryTimer then
    killTimer(mapper.retryTimer)
    mapper.retryTimer = nil
  end
end

-------------------------------------------------------
-- GMCP 回调：gmcp.GMCP.Move 更新时调用
-------------------------------------------------------
function mapper.onGMCPMove(fp, move)
  if not move then return end

  ---------------------------------------------------
  -- ✅ 走路失败：先延迟重试，超过上限才 badExits
  ---------------------------------------------------
  if move.result ~= "true" then
    if mapper.mapping and mapper.currentFP and mapper.pendingDir then
      local curFP   = mapper.currentFP
      local dir     = mapper.pendingDir
      local curNode = mapper.nodes[curFP]

      if curNode then
        curNode.badExits   = curNode.badExits or {}
        curNode.failCounts = curNode.failCounts or {}

        -- 累计失败次数
        curNode.failCounts[dir] = (curNode.failCounts[dir] or 0) + 1
        local n    = curNode.failCounts[dir]
        local maxN = mapper.maxRetryPerExit or 3

        -- 未到上限：延迟重试（不回滚栈、不清 pendingDir）
        if n &lt; maxN then
          mprint(string.format("方向失败: %s（第 %d/%d 次失败，%.2fs 后重试）",
            tostring(dir), n, maxN, mapper.retryDelaySec or 0.25
          ))

          -- 防止重复堆叠 timer
          cancelRetryTimer()

          local delay = mapper.retryDelaySec or 0.25
          mapper.retryTimer = tempTimer(delay, function()
            mapper.retryTimer = nil

            -- 触发时再检查状态，避免已经换房/停测绘还在重试
            if not mapper.mapping then return end
            if mapper.mappingEnabled == false then return end
            if mapper.currentFP ~= curFP then return end
            if mapper.pendingDir ~= dir then return end

            local node2 = mapper.nodes[curFP]
            if not node2 then return end
            node2.badExits   = node2.badExits or {}
            node2.failCounts = node2.failCounts or {}

            if node2.badExits[dir] then return end
            local n2 = node2.failCounts[dir] or 0
            if n2 &gt;= maxN then return end

            send(dir)
          end)

          return
        end

        -- 到上限：才正式判定 badExits + 回滚
        curNode.badExits[dir] = true
        mprint(string.format("方向失败: %s（已失败 %d 次，标记为 badExits，继续尝试其他出口）", tostring(dir), n))
      else
        mprint("方向失败，但当前房间节点不存在，停止重试。")
      end

      -- 回滚 DFS 栈顶（如果它就是这次 pendingDir）
      local top = mapper.moveStack[#mapper.moveStack]
      if top == mapper.pendingDir then
        table.remove(mapper.moveStack)
      end

      mapper.pendingDir = nil
      mapper.nextStep()
    end
    return
  end

  ---------------------------------------------------
  -- ✅ 走路成功：取消重试计时器 + 照旧处理房间
  ---------------------------------------------------
  cancelRetryTimer()

  local rawName = move.short or "未知房间"
  rawName = rawName:gsub("^%s+", ""):gsub("%s+$", "")
  local name = rawName

  local exits = {}
  if move.dir then
    for _, d in ipairs(move.dir) do
      table.insert(exits, mapper_core.normalizeDir(d))
    end
  end

  mapper.onRoom(fp, name, exits)
end

-------------------------------------------------------
-- 处理房间（核心逻辑）
-------------------------------------------------------
function mapper.onRoom(fp, name, exits)
  -- 一旦收到房间更新，说明状态前进了，取消可能残留的重试 timer
  cancelRetryTimer()
  -------------------------------------------------------
  -- 忽略房间：当成“不存在”
  -------------------------------------------------------
  if mapper.ignoreNames and mapper.ignoreNames[name] then
    mprint(string.format("进入忽略房间: %s（%s），当成不存在：不入图、标记上个方向为 badExits，并回退。", name, tostring(fp)))

    -- 只有在“测绘中且有来源方向”时才能优雅处理
    if mapper.mapping and mapper.currentFP and mapper.pendingDir then
      local prevFP   = mapper.currentFP
      local prevNode = mapper.nodes[prevFP]
      local dir      = mapper.pendingDir
      local backDir  = mapper_core.opposite[dir] or (mapper_core.oppositeDir and mapper_core.oppositeDir(dir))

      -- 1) 上一个房间：把该方向标坏，避免再试
      if prevNode then
        prevNode.badExits = prevNode.badExits or {}
        prevNode.badExits[dir] = true
      end

      -- 2) DFS 栈：这次前进无效，弹掉它（如果它就是栈顶）
      local top = mapper.moveStack[#mapper.moveStack]
      if top == dir then
        table.remove(mapper.moveStack)
      end

      -- 3) 关键：不记录连接、不更新 currentFP（逻辑上仍停留在 prevFP）
      mapper.pendingDir = nil
      mapper.currentFP  = prevFP

      -- 4) 立刻/延迟回退到上个房间（物理上走回去）
      if backDir then
        local dly = mapper.ignoreBackDelaySec or 0
        if dly &gt; 0 and tempTimer then
          tempTimer(dly, function() send(backDir) end)
        else
          send(backDir)
        end
      else
        mprint("警告：忽略房间无法找到反向方向，无法自动回退。已停止测绘以免乱图。")
        mapper.mapping = false
      end

      return
    else
      -- 没有 prevFP/pendingDir（比如你手动走进来/传送）：
      -- 为了保证“像不存在”，我们直接不入图，并停止自动测绘，避免状态错乱。
      mprint("进入忽略房间但无法确定来源方向（可能手动移动/传送）。为避免乱图：不入图并停止测绘。")
      mapper.mapping = false
      mapper.pendingDir = nil
      return
    end
  end

  local node = mapper.nodes[fp]

  local sortedExits = mapper_core.sortedCopy(exits)
  local isBoundary  = mapper.boundaryNames and mapper.boundaryNames[name] or false

  if not node then
    node = {
      name       = name,
      exits      = {},          -- dir缩写 -&gt; 目标fp
      exitList   = sortedExits, -- 已排序的出口缩写列表
      isBoundary = isBoundary,
      badExits   = {},
      failCounts = {},          -- 新增：失败次数累计
    }
    mapper.nodes[fp] = node

    mprint(string.format(
      '发现新房间 [%s]%s，出口: %s',
      fp,
      isBoundary and "（边界房间）" or "",
      table.concat(sortedExits, ", ")
    ))
  else
    node.name       = name
    node.exitList   = sortedExits
    node.isBoundary = node.isBoundary or isBoundary
    node.badExits   = node.badExits or {}
    node.failCounts = node.failCounts or {}
  end

  -- 如果是从上一个房间走过来的，补全连接关系
  if mapper.currentFP and mapper.pendingDir then
    local prevFP   = mapper.currentFP
    local prevNode = mapper.nodes[prevFP]
    local dir      = mapper.pendingDir -- 缩写

    if prevNode then
      prevNode.exits[dir] = fp
      -- 成功走通该方向：失败计数清零（可选但建议）
      if prevNode.failCounts then
        prevNode.failCounts[dir] = 0
      end
    end

    -- 反向链接：用 mapper_core.opposite
    local backDir = mapper_core.opposite[dir]
    if backDir then
      local curNode = mapper.nodes[fp]
      if curNode then
        curNode.exits[backDir] = prevFP
      end
    end
  end

  mapper.currentFP  = fp
  mapper.pendingDir = nil

  if mapper.mapping then
    mapper.nextStep()
  end
end

-------------------------------------------------------
-- DFS 自动走动逻辑（含边界）
-------------------------------------------------------
function mapper.nextStep()
  ----------------------------------------------------------------
  -- ① 总开关：不在“测绘模式”就什么都不做
  ----------------------------------------------------------------
  if not mapper.mapping then
    return
  end

  ----------------------------------------------------------------
  -- ② 暂停开关：map off 之后，不再自动走路，但保持当前状态
  ----------------------------------------------------------------
  if mapper.mappingEnabled == false then
    mprint("测绘已暂停（mappingEnabled = false），不再自动行走。")
    return
  end

  ----------------------------------------------------------------
  -- ③ 当前房间节点检查
  ----------------------------------------------------------------
  if not mapper.currentFP then
    mprint("当前没有房间指纹（currentFP 为空），等待 GMCP 再次推送位置。")
    return
  end

  local node = mapper.nodes[mapper.currentFP]
  if not node then
    mprint("当前房间 [" .. mapper.currentFP .. "] 不在 nodes 表中，停止测绘。")
    mapper.mapping = false
    cancelRetryTimer()
    return
  end

  node.exitList = node.exitList or {}

  ----------------------------------------------------------------
  -- ④ 在“非边界房间”里，尝试向外扩展还没走过的方向
  ----------------------------------------------------------------
  if not node.isBoundary then
    for _, dir in ipairs(node.exitList) do
      -- 还没有建立过链接的方向，去探路
      if (not node.exits[dir]) and (not node.badExits[dir]) then
        local nd = mapper_core.normalizeDir(dir)  -- 保险起见再规范一下
        mapper.pendingDir = nd
        table.insert(mapper.moveStack, nd)   -- DFS 栈里记录本次前进方向
        mprint("前进方向: " .. nd)
        send(nd)                             -- 给 MUD 发缩写方向命令
        return
      end
    end
  else
    -- 边界房间：只记录，不再继续往外扩展
    mprint("到达边界房间: " .. node.name .. "（" .. mapper.currentFP .. "），不再从这里向外探索。")
  end

  ----------------------------------------------------------------
  -- ⑤ 已经没有新方向可以走（或者当前是边界房间） → 开始回退
  ----------------------------------------------------------------
  if #mapper.moveStack == 0 then
    mapper.mapping = false
    cancelRetryTimer()
    mprint("测绘完成！本区域共发现 " .. nodeCount() .. " 个房间。")
    mapper.dumpAsLua()
    return
  end

  local lastDir = table.remove(mapper.moveStack)  -- 从 DFS 栈里取出上一次走的方向
  local backDir = mapper_core.opposite[lastDir] or (mapper_core.oppositeDir and mapper_core.oppositeDir(lastDir))

  if not backDir then
    mprint("警告：找不到方向 " .. tostring(lastDir) .. " 的反向，停止测绘。")
    mapper.mapping = false
    cancelRetryTimer()
    mapper.dumpAsLua()
    return
  end

  mapper.pendingDir = backDir
  mprint("回退方向: " .. backDir)
  send(backDir)
end

-------------------------------------------------------
-- 对外接口
-------------------------------------------------------

-- 开始测绘
function mapper.start()
  cancelRetryTimer()

  mapper.nodes      = {}
  mapper.currentFP  = nil
  mapper.pendingDir = nil
  mapper.moveStack  = {}
  mapper.mapping    = true

  mprint("开始自动测绘，请不要手动乱走。等待 GMCP 当前房间信息...")
end

-- 停止测绘
function mapper.stop()
  mapper.mapping = false
  cancelRetryTimer()
  mprint("已停止测绘。当前已记录房间数: " .. nodeCount())
end

function mapper.resetRuntimeMap()
  -- 关掉正在测绘
  mapper.mapping        = false
  mapper.mappingEnabled = mapper.mappingEnabled ~= false  -- 保持配置，默认 true

  cancelRetryTimer()

  -- 清空当前这次测绘用到的运行时数据
  mapper.nodes       = {}
  mapper.mapNodes    = {}
  mapper.moveStack   = {}
  mapper.currentFP   = nil
  mapper.pendingDir  = nil
  mapper.lastFP      = nil

  mprint("已清除当前测绘地图数据，可以重新开始测绘。")
end

-- 输出为你想要的 Lua 表结构
function mapper.dumpAsLua()
  mprint("===== 地图 Lua 表结构（mapper.mapNodes） =====")

  local keys = {}
  for fp in pairs(mapper.nodes) do
    table.insert(keys, fp)
  end
  table.sort(keys)

  mapper.mapNodes = {}  -- 真正对外的结构

  if echo then
    echo("\nmapper.mapNodes = {\n")
    for _, fp in ipairs(keys) do
      local node = mapper.nodes[fp]
      mapper.mapNodes[fp] = {
        name  = node.name,
        exits = node.exits,
      }

      local nameEsc = node.name:gsub('"', '\\"')
      echo(string.format('  ["%s"] = {\n', fp))
      echo(string.format('    name = "%s",\n', nameEsc))
      echo('    exits = {\n')

      -- 为了输出顺序稳定一点，排一下方向
      local dirs = {}
      for dir in pairs(node.exits) do
        table.insert(dirs, dir)
      end
      table.sort(dirs)

      for _, dir in ipairs(dirs) do
        local targetFP = node.exits[dir]
        echo(string.format('      ["%s"] = "%s",\n', dir, targetFP))
      end

      echo('    },\n')
      echo('  },\n')
    end
    echo("}\n\n")
  else
    print("mapper.mapNodes = {")
    for _, fp in ipairs(keys) do
      local node = mapper.nodes[fp]
      mapper.mapNodes[fp] = {
        name  = node.name,
        exits = node.exits,
      }

      local nameEsc = node.name:gsub('"', '\\"')
      print(string.format('  ["%s"] = {', fp))
      print(string.format('    name = "%s",', nameEsc))
      print('    exits = {')
      for dir, targetFP in pairs(node.exits) do
        print(string.format('      ["%s"] = "%s",', dir, targetFP))
      end
      print('    },')
      print('  },')
    end
    print("}")
  end

  mprint("===== 结束 =====")
end

-- 保存当前地图到文件
function mapper.save(filename)
  -- 默认保存路径：Mudlet 配置目录下的 mapper_map.lua
  filename = filename or (getMudletHomeDir() .. "/mapper_map.lua")

  -- 确保 mapNodes 最新：从 nodes 重建一遍
  mapper.mapNodes = {}

  local keys = {}
  for fp in pairs(mapper.nodes) do
    table.insert(keys, fp)
  end
  table.sort(keys)

  for _, fp in ipairs(keys) do
    local node = mapper.nodes[fp]
    mapper.mapNodes[fp] = {
      name  = node.name,
      exits = node.exits,
    }
  end

  local f, err = io.open(filename, "w")
  if not f then
    mprint("保存失败，无法打开文件: " .. tostring(err))
    return
  end

  -- 写成一个可以直接 dofile 的 Lua 文件
  f:write("mapper = mapper or {}\n")
  f:write("mapper.mapNodes = {\n")

  for _, fp in ipairs(keys) do
    local node = mapper.nodes[fp]
    local nameEsc = node.name:gsub("\\", "\\\\"):gsub('"', '\\"')

    f:write(string.format('  ["%s"] = {\n', fp))
    f:write(string.format('    name = "%s",\n', nameEsc))
    f:write('    exits = {\n')

    -- 出口按方向排序，方便看
    local dirs = {}
    for dir in pairs(node.exits) do
      table.insert(dirs, dir)
    end
    table.sort(dirs)

    for _, dir in ipairs(dirs) do
      local targetFP = node.exits[dir]
      f:write(string.format('      ["%s"] = "%s",\n', dir, targetFP))
    end

    f:write('    },\n')
    f:write('  },\n')
  end

  f:write("}\n")
  f:close()

  mprint("地图已保存到文件: " .. filename)
end

function mapper.showRoom(fp)
  -- fp 可选，没给时用当前房间
  fp = fp or mapper.currentFP
  if not fp then
    cecho("&lt;red&gt;[Mapper] 当前没有 FP（可能还没收到 GMCP）。\n")
    return
  end

  local node = mapper.mapNodes[fp]
  if not node then
    cecho("&lt;red&gt;[Mapper] 地图中没有找到房间：" .. tostring(fp) .. "\n")
    return
  end

  -- 构造 exits 输出
  local lines = {}
  table.insert(lines, string.format('["%s"] = {', fp))
  table.insert(lines, string.format('  name = "%s",', node.name))
  table.insert(lines, '  exits = {')

  -- 排序方向，输出更可读
  local dirs = {}
  for d in pairs(node.exits) do table.insert(dirs, d) end
  table.sort(dirs)

  for _, d in ipairs(dirs) do
    local tgt = node.exits[d]
    table.insert(lines, string.format('    ["%s"] = "%s",', d, tgt))
  end

  table.insert(lines, '  },')
  table.insert(lines, '},')

  cecho("\n&lt;green&gt;" .. table.concat(lines, "\n") .. "\n")
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>nav</name>
				<packageName></packageName>
				<script>-- ======================================================
-- nav.lua (CLEAN)
-- 只负责：加载地图 / 解析token / 计算路径 / 打印路径 / 缓存 lastResult
-- 不负责：自动行走 / send / GMCP控制 / 地图校验
-- ======================================================

nav = nav or {}
nav.regions = nav.regions or {}

-- “当前位置”只做缓存：来自 gmcp_router 或你手动 here
nav.currentFP        = nav.currentFP or nil
nav.currentRegionKey = nav.currentRegionKey or nil

-- 上一次 path 计算结果（给 go / walker 用）
nav.lastResult       = nav.lastResult or nil

-------------------------------------------------------
-- 工具函数
-------------------------------------------------------
local function nprint(msg)
  if cecho then
    cecho("\n&lt;cyan&gt;[Nav]&lt;reset&gt; " .. msg .. "\n")
  else
    print("[Nav] " .. msg)
  end
end

-------------------------------------------------------
-- 加载地图到 nav.regions
-------------------------------------------------------
function nav.loadMap(regionKey)
  regionKey = tostring(regionKey or "")

  if regionKey == "" then
    nprint('nav.loadMap 需要一个区域 key，比如：nav.loadMap("hz")')
    return
  end

  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    nprint('找不到 mapper.maps["' .. regionKey .. '"]，请确认地图脚本已加载。')
    return
  end

  local m = mapper.maps[regionKey]
  local mapNodes   = m.mapNodes
  local aliases    = m.mapAliases or {}
  local region     = m.region or {}
  local rkey       = region.key or regionKey
  local rname      = region.name or rkey

  if type(mapNodes) ~= "table" then
    nprint('mapper.maps["' .. regionKey .. '"].mapNodes 不是表。')
    return
  end

  -- aliasIndex：简写(value) -&gt; fp 列表
  -- nameIndex ：房间名(node.name) -&gt; fp 列表
  local aliasIndex = {}
  local nameIndex  = {}

  for fp, node in pairs(mapNodes) do
    local name = node and node.name

    -- 1) 中文房间名索引：name -&gt; [fp...]
    if name and name ~= "" then
      nameIndex[name] = nameIndex[name] or {}
      table.insert(nameIndex[name], fp)
    end

    -- 2) 简写索引：alias -&gt; [fp...]
    local alias = name and aliases[name]
    if alias and alias ~= "" then
      aliasIndex[alias] = aliasIndex[alias] or {}
      table.insert(aliasIndex[alias], fp)
    end
  end

  -- 载入时一次性排序，后续 resolve 不再重复 sort
  for _, list in pairs(aliasIndex) do
    table.sort(list)
  end
  for _, list in pairs(nameIndex) do
    table.sort(list)
  end

  nav.regions[rkey] = {
    name       = rname,
    mapNodes   = mapNodes,
    aliases    = aliases,
    aliasIndex = aliasIndex,
    nameIndex  = nameIndex,
  }


  local cNodes, cAliases = 0, 0
  for _ in pairs(mapNodes) do cNodes = cNodes + 1 end
  for _ in pairs(aliases)  do cAliases = cAliases + 1 end

  nprint(string.format(
    "已加载区域[%s] %s：房间 %d，别名 %d",
    rkey, rname, cNodes, cAliases
  ))
end

-------------------------------------------------------
-- BFS 寻路（纯算法）
-------------------------------------------------------
local function findPathInMap(mapNodes, startFP, targetFP)
  if not mapNodes[startFP] then
    nprint("起点不在该区域地图中: " .. tostring(startFP))
    return nil
  end
  if not mapNodes[targetFP] then
    nprint("目标不在该区域地图中: " .. tostring(targetFP))
    return nil
  end
  if startFP == targetFP then
    return {}
  end

  local q = { startFP }
  local head = 1
  local visited = { [startFP] = true }
  local prev = {} -- fp -&gt; { from=fp2, dir=dir }

  while head &lt;= #q do
    local cur = q[head]; head = head + 1
    if cur == targetFP then break end

    local node = mapNodes[cur]
    if node and node.exits then
      for dir, nextFP in pairs(node.exits) do
        if not visited[nextFP] then
          visited[nextFP] = true
          prev[nextFP] = { from = cur, dir = dir }
          table.insert(q, nextFP)
        end
      end
    end
  end

  if not visited[targetFP] then
    nprint("在该区域内找不到路径。")
    return nil
  end

  local steps = {}
  local fp = targetFP
  while fp ~= startFP do
    local p = prev[fp]
    table.insert(steps, 1, { dir = p.dir, from = p.from, to = fp })
    fp = p.from
  end

  return steps
end

function nav.findPath(mapNodes, startFP, targetFP)
  return findPathInMap(mapNodes, startFP, targetFP)
end

-------------------------------------------------------
-- 解析位置 token：返回 rkey, fp, node
-- token 支持：
--   1) "tzf.abc"   区域+别名
--   2) "abc"       只写别名（区域取 defaultRegionKey / currentRegionKey / 唯一区域）
--   3) "tzf.xxx|e,n" 区域+完整fp
--   4) "xxx|e,n"     只写fp（区域同上）
-------------------------------------------------------
function nav.resolveLocationToken(token, defaultRegionKey)
  token = tostring(token or "")

  local rkey, key = token:match("^(%w+)%.(.+)$")
  local regionKey = rkey or defaultRegionKey
  local nameOrFP  = key or token

  -- 没给区域：用 currentRegionKey 或 唯一区域
  if not regionKey then
    if nav.currentRegionKey then
      regionKey = nav.currentRegionKey
    else
      local onlyKey
      for k, _ in pairs(nav.regions or {}) do
        if onlyKey and onlyKey ~= k then
          onlyKey = nil
          break
        end
        onlyKey = k
      end
      if not onlyKey then
        nprint("无法确定区域，请使用 区域.别名，例如: hz.hp")
        return nil
      end
      regionKey = onlyKey
    end
  end

  local region = nav.regions and nav.regions[regionKey]
  if not region then
    nprint("区域[" .. tostring(regionKey) .. "] 未加载地图。先 nav.loadMap(...)")
    return nil
  end

  local mapNodes   = region.mapNodes or {}
  local aliasIndex = region.aliasIndex or {}
  local nameIndex  = region.nameIndex  or {}

  local fp

  -- 1) 先按简写(value) 查：例如 ly / origin / hbgd1
  local list = aliasIndex[nameOrFP]
  if list and #list &gt; 0 then
    fp = list[1]
  end

  -- 2) 再按中文房间名(node.name) 查：例如 溧阳 / 义兴县城 / 湖边官道1
  if not fp then
    local list2 = nameIndex[nameOrFP]
    if list2 and #list2 &gt; 0 then
      fp = list2[1]
    end
  end

  -- 3) 最后把 token 当作完整 fp
  if not fp and mapNodes[nameOrFP] then
    fp = nameOrFP
  end


  if not fp then
    nprint(string.format(
      "在区域[%s]中找不到别名/指纹 [%s]，请检查 mapper.mapAliases 或 mapNodes。",
      regionKey, nameOrFP
    ))
    return nil
  end

  return regionKey, fp, mapNodes[fp]
end

-------------------------------------------------------
-- 决定从哪个房间出发（不主动依赖 GMCP）
-- 规则：
-- 1) 若 nav.currentRegionKey==rkey 且 nav.currentFP 在图中，用它
-- 2) 否则提示用 here（你也可让 gmcp_router 调用 nav.onGMCPMove 仅更新 currentFP）
-------------------------------------------------------
function nav.getStartFP(rkey)
  local region = nav.regions and nav.regions[rkey]
  if not region then
    nprint("区域[" .. tostring(rkey) .. "] 未加载地图。")
    return nil
  end

  local mapNodes = region.mapNodes or {}

  if nav.currentRegionKey == rkey and nav.currentFP and mapNodes[nav.currentFP] then
    return nav.currentFP
  end

  nprint(string.format(
    "不知道你在区域[%s]的哪个房间。\n请先用: here %s.别名   例如: here %s.origin",
    rkey, rkey, rkey
  ))
  return nil
end

-------------------------------------------------------
-- 计算路径：返回 result（并缓存到 nav.lastResult）
-------------------------------------------------------
function nav.computePathInRegion(rkey, startFP, targetFP)
  local region = nav.regions and nav.regions[rkey]
  if not region then
    nprint("区域[" .. tostring(rkey) .. "] 未加载地图。")
    return nil
  end

  local mapNodes = region.mapNodes or {}
  local targetNode = mapNodes[targetFP]

  local path = nav.findPath(mapNodes, startFP, targetFP)
  if not path then
    nprint(string.format("找不到从 [%s] 到 [%s] 的路径。", tostring(startFP), tostring(targetFP)))
    return nil
  end

  local dirs = {}
  for _, step in ipairs(path) do
    table.insert(dirs, step.dir)
  end
  local seq = table.concat(dirs, ";")

  local result = {
    regionKey  = rkey,
    startFP    = startFP,
    targetFP   = targetFP,
    targetName = targetNode and targetNode.name or "",
    path       = path,
    dirs       = dirs,
    seq        = seq,
  }

  nav.lastResult = result
  return result
end

-------------------------------------------------------
-- 打印路径（不会走路）
-------------------------------------------------------
function nav.showPathInRegion(rkey, startFP, targetFP)
  local result = nav.computePathInRegion(rkey, startFP, targetFP)
  if not result then return end

  nprint(string.format(
    "区域[%s]：从 [%s] 到 [%s] %s，共 %d 步。",
    rkey, result.startFP, result.targetFP, result.targetName or "", #result.dirs
  ))
  nprint("路径方向序列: " .. (result.seq ~= "" and result.seq or "(空)"))
  nprint("已缓存本次路径，可执行: go")
end

-------------------------------------------------------
-- path 命令：path 目标  或  path 起点 终点
-------------------------------------------------------
function nav.pathCommand(arg1, arg2)
  if not arg1 or arg1 == "" then
    nprint("用法: path 目标   或   path 起点 终点")
    return
  end
  if arg2 == "" then arg2 = nil end

  if arg2 then
    -- A -&gt; B
    local fromR, fromFP = nav.resolveLocationToken(arg1, nav.currentRegionKey)
    if not fromR then return end

    local toR, toFP = nav.resolveLocationToken(arg2, fromR)
    if not toR then return end

    if fromR ~= toR then
      nprint(string.format("暂不支持跨区域寻路：[%s] -&gt; [%s]", fromR, toR))
      return
    end

    nav.showPathInRegion(fromR, fromFP, toFP)
  else
    -- here -&gt; B
    local toR, toFP = nav.resolveLocationToken(arg1, nav.currentRegionKey)
    if not toR then return end

    local startFP = nav.getStartFP(toR)
    if not startFP then return end

    nav.showPathInRegion(toR, startFP, toFP)
  end
end

-------------------------------------------------------
-- origin：回原点（alias = origin）
-------------------------------------------------------
function nav.getCurrentRegionKey()
  if nav.currentRegionKey then
    return nav.currentRegionKey
  end

  local only
  for k, _ in pairs(nav.regions or {}) do
    if only then only = nil; break end
    only = k
  end
  if only then return only end

  nprint("无法确定当前区域，请先执行 mload &lt;区域&gt; 或 here &lt;区域.别名&gt;")
  return nil
end

function nav.origin()
  local rkey = nav.getCurrentRegionKey()
  if not rkey then return end

  local region = nav.regions[rkey]
  local mapNodes   = region.mapNodes or {}
  local aliasIndex = region.aliasIndex or {}

  local list = aliasIndex["origin"]
  if not list or #list == 0 then
    nprint(string.format("区域[%s] 没有别名 [origin]，请在 mapper.mapAliases 里配置。", rkey))
    return
  end
  table.sort(list)
  local originFP = list[1]
  local originNode = mapNodes[originFP]

  local startFP = nav.getStartFP(rkey)
  if not startFP then return end

  if startFP == originFP then
    nprint(string.format("当前已经在原点：[%s] %s", originFP, originNode and originNode.name or "?"))
    return ""
  end

  local result = nav.computePathInRegion(rkey, startFP, originFP)
  if not result then return end

  nprint(string.format(
    "区域[%s]：从 [%s] 到原点 [%s] %s，共 %d 步。",
    rkey, startFP, originFP, originNode and originNode.name or "", #result.dirs
  ))
  nprint("路径方向序列: " .. result.seq)
  nprint("已缓存本次路径，可执行: go")
  return result.seq
end

-------------------------------------------------------
-- 手工设置当前区域
-------------------------------------------------------
function nav.setRegion(rkey)
  rkey = tostring(rkey or "")
  if rkey == "" then
    cecho("&lt;red&gt;[Nav] setRegion：区域 key 不能为空。\n")
    return
  end
  if not nav.regions or not nav.regions[rkey] then
    cecho(string.format("&lt;red&gt;[Nav] setRegion：区域 [%s] 尚未加载，请先 mload %s\n", rkey, rkey))
    return
  end
  nav.currentRegionKey = rkey
  cecho(string.format("&lt;green&gt;[Nav] 当前区域已设置为：[%s] %s\n", rkey, nav.regions[rkey].name or ""))
end

function nav.getLastResult()
  return nav.lastResult
end

function nav.getLastSeq()
  return nav.lastResult and nav.lastResult.seq or nil
end


-------------------------------------------------------
-- GMCP 回调（可选）：只更新当前位置缓存，不打印，不走路
-- 你也可以完全不让 gmcp_router 调这个函数（nav 仍可用）
-------------------------------------------------------
function nav.onGMCPMove(fp, room)
  local newFP = fp or (mapper_core and mapper_core.currentFP)
  if not newFP then return end
  nav.currentFP = newFP

  -- 尝试自动识别 currentRegionKey（仅当唯一命中时）
  if not nav.currentRegionKey then
    local hit
    for rkey, region in pairs(nav.regions or {}) do
      if region.mapNodes and region.mapNodes[newFP] then
        if hit and hit ~= rkey then
          hit = nil
          break
        end
        hit = rkey
      end
    end
    if hit then nav.currentRegionKey = hit end
  end
end

</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>here</name>
				<packageName></packageName>
				<script>-- here.lua
-- 设置 nav 的当前位置（支持缺省）
-- 用法建议（alias）：
--   ^here\s*(.*)$   -&gt; here.set(matches[2])

here = here or {}

local function hprint(msg)
  if cecho then
    cecho("\n&lt;green&gt;[Here]&lt;reset&gt; " .. msg .. "\n")
  else
    print("[Here] " .. msg)
  end
end

-- 小工具：trim
local function trim(s)
  s = tostring(s or "")
  s = s:gsub("^%s+", ""):gsub("%s+$", "")
  return s
end

function here.set(token)
  token = trim(token)

  -- 必要依赖检查
  if not nav then
    hprint("nav 未加载。")
    return
  end

  ----------------------------------------------------------------
  -- 情况一：显式指定 here 区域.别名 / 区域.fp / 别名 / fp
  -- 说明：
  --   nav.resolveLocationToken 返回 (regionKey, fp, node)
  ----------------------------------------------------------------
  if token ~= "" then
    -- 1) 支持：here hz   （只给区域 key）
    -- 规则：只设置 regionKey；fp 尝试用 mapper_core.currentFP
    if token:match("^%w+$") and (nav.regions and nav.regions[token]) then
      nav.currentRegionKey = token

      -- 尝试把 fp 自动补上（可选）
      local curFP = mapper_core and mapper_core.currentFP
      if curFP and nav.regions[token].mapNodes and nav.regions[token].mapNodes[curFP] then
        nav.currentFP = curFP
        hprint(string.format("已设置当前位置：[%s] %s（来自当前GMCP）", token, curFP))
      else
        hprint(string.format("已设置当前区域：[%s]（房间未设置，可再 here 或 path 先指定起点）", token))
      end
      return
    end

    -- 2) 通用：here hz.hp / here hp / here 某fp
    local rkey, fp = nav.resolveLocationToken(token, nav.currentRegionKey)
    if not rkey then return end  -- resolve 内部会打印原因

    nav.currentRegionKey = rkey
    nav.currentFP        = fp

    hprint(string.format("已设置当前位置：[%s] %s", rkey, fp))
    return
  end

  ----------------------------------------------------------------
  -- 情况二：缺省，用 mapper_core.currentFP 自动反查区域
  ----------------------------------------------------------------
  if not mapper_core or not mapper_core.currentFP then
    hprint("无法自动确定当前位置：mapper_core.currentFP 为空。请使用 here 区域.别名")
    return
  end

  local curFP = mapper_core.currentFP

  -- 在已加载区域中反查：可能命中多个区域
  local hits = {}
  for rkey, region in pairs(nav.regions or {}) do
    if region.mapNodes and region.mapNodes[curFP] then
      table.insert(hits, rkey)
    end
  end

  if #hits == 1 then
    nav.currentRegionKey = hits[1]
    nav.currentFP        = curFP
    hprint(string.format("自动识别当前位置：[%s] %s", hits[1], curFP))
    return
  end

  if #hits &gt; 1 then
    table.sort(hits)
    hprint("当前房间同时命中多个已加载区域：[" .. table.concat(hits, ", ") .. "]")
    hprint("请手动指定区域，例如：here " .. hits[1] .. ".origin（或这里区域.别名）")
    return
  end

  hprint("当前房间不在任何已加载区域地图中，请手动 here 区域.别名")
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>gmcp-router</name>
				<packageName></packageName>
				<script>gmcp_router = gmcp_router or {}

gmcp_router.mode    = gmcp_router.mode    or "mapper" -- 默认模式
gmcp_router.enabled = gmcp_router.enabled or false
gmcp_router._moveHandlerId = gmcp_router._moveHandlerId or nil
-------------------------------------------------------
-- 注册 / 取消注册 GMCP 事件
-------------------------------------------------------

function gmcp_router.register()
  if not registerAnonymousEventHandler then
    echo("\n[gmcp_router] 没有 registerAnonymousEventHandler，无法注册 GMCP 事件。\n")
    return
  end

  -- 防止重复注册，先把旧的删掉
  if gmcp_router._moveHandlerId then
    killAnonymousEventHandler(gmcp_router._moveHandlerId)
    gmcp_router._moveHandlerId = nil
  end

  gmcp_router._moveHandlerId = registerAnonymousEventHandler(
    "gmcp.GMCP.Move",
    "gmcp_router.onGMCPMove"
  )
  gmcp_router.enabled = true
  echo("\n[gmcp_router] 已注册 GMCP 事件处理器 gmcp.GMCP.Move。\n")
end

function gmcp_router.unregister()
  if gmcp_router._moveHandlerId then
    killAnonymousEventHandler(gmcp_router._moveHandlerId)
    gmcp_router._moveHandlerId = nil
    echo("\n[gmcp_router] 已取消 GMCP 事件处理器 gmcp.GMCP.Move。\n")
  else
    echo("\n[gmcp_router] 当前没有已注册的 GMCP 事件处理器。\n")
  end

  -- ✨ 同样别忘了这句
  gmcp_router.enabled = false
end

-------------------------------------------------------
-- 核心路由函数：收到 gmcp.GMCP.Move 时只调用这里
-------------------------------------------------------

function gmcp_router.onGMCPMove()
  -- 1) 从 gmcp 里取出房间数据
  local room = nil

  if gmcp and gmcp.GMCP and gmcp.GMCP.Move then
    -- 兼容两种写法：Move[1] 或 Move 直接就是表
    if type(gmcp.GMCP.Move[1]) == "table" then
      room = gmcp.GMCP.Move[1]
    else
      room = gmcp.GMCP.Move
    end
  end

  -- cecho("\n&lt;yellow&gt;[GMCP DEBUG] gmcp.GMCP.Move =\n")
  -- display(room)
  travel.lockFromByGMCPShort(room.short)
  -- 2) 更新当前房间指纹（单一事实来源）
  if mapper_core and mapper_core.updateFromGMCP then
    mapper_core.updateFromGMCP(room)
  end

  local fp = mapper_core and mapper_core.currentFP

  -- 3) 按模式分发给 mapper/nav，这里把 fp 和 room 一起丢过去

  -- 1) 调 mapper
  if gmcp_router.mode == "mapper" or gmcp_router.mode == "both" then
    if mapper and mapper.onGMCPMove then
      local ok1, err1 = pcall(mapper.onGMCPMove, fp, room)
      if not ok1 then
        echo("\n[gmcp_router] 调用 mapper.onGMCPMove 出错: " .. tostring(err1) .. "\n")
      end
    end
  end

  -- 2) 调 nav
  if gmcp_router.mode == "nav" or gmcp_router.mode == "both" then
    if nav and nav.onGMCPMove then
      local ok2, err2 = pcall(nav.onGMCPMove, fp, room)
      if not ok2 then
        echo("\n[gmcp_router] 调用 nav.onGMCPMove 出错: " .. tostring(err2) .. "\n")
      end
    end
  end

  -- ==================================================
  -- 4) ⭐ walker 移动结果反馈（新增）
  --    room.result: "true" / "false"（你已验证）
  -- ==================================================
  if walker and walker.onMoveResult and type(room) == "table" then
    if room.result ~= nil then
      local moveOk = (tostring(room.result) == "true")
      -- 第二个参数给来源（可选），方便你 debug
      walker.onMoveResult(moveOk, "gmcp")
    end
  end
end


function gmcp_router.status()
  local s = gmcp_router.enabled and "ON" or "OFF"
  echo(string.format(
    "\n[gmcp_router] GMCP: %s，mode: %s\n",
    s,
    gmcp_router.mode or "nil"
  ))
end


-------------------------------------------------------
-- 提供三个切换模式的命令
-------------------------------------------------------

function gmcp_router.useMapper()
  gmcp_router.mode = "mapper"
  echo("\n[gmcp_router] 已切换到【测绘模式】(只调用 mapper.onGMCPMove)\n")
end

function gmcp_router.useNav()
  gmcp_router.mode = "nav"
  echo("\n[gmcp_router] 已切换到【导航模式】(只调用 nav.onGMCPMove)\n")
end

function gmcp_router.useBoth()
  gmcp_router.mode = "both"
  echo("\n[gmcp_router] 已切换到【双开模式】(同时调用 mapper + nav)\n")
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>walker</name>
				<packageName></packageName>
				<script>-- ======================================================
-- walker.lua
-- blind executor + ACK + exponential backoff + fail limit
-- + retry-hotspot stats (retries before success)
-- + busyRooms (IN-MEMORY ONLY, DO NOT MODIFY MAP DATA)
-- + per-step dynamic delay (still supports manual busy fields if you have them)
-- ======================================================

walker = walker or {}

-------------------------------------------------------
-- 状态
-------------------------------------------------------
walker.active   = walker.active or false
walker.queue    = walker.queue  or {}
walker.idx      = walker.idx    or 0
walker.delayMs  = walker.delayMs or 350
walker._timerId = walker._timerId or nil

-- ACK / backoff
walker.ackMode        = walker.ackMode or false
walker.waitingAck     = walker.waitingAck or false
walker.lastSentDir    = walker.lastSentDir or nil
walker.failCount      = walker.failCount or 0

walker.backoffBaseMs  = walker.backoffBaseMs or 500
walker.backoffFactor  = walker.backoffFactor or 1.8
walker.maxDelayMs     = walker.maxDelayMs or 3000

walker.maxFails       = walker.maxFails or 8
walker.stopOnMaxFails = walker.stopOnMaxFails ~= false

walker.debug          = walker.debug ~= false

-------------------------------------------------------
-- retry 热点统计：只统计“成功前需要 retry 的房间+出口”
-- 统计粒度：fromFP|dir  (fromFP = mapper_core.currentFP)
-------------------------------------------------------
walker.retryStats = walker.retryStats or {
  enabled = true,

  -- 当前步的 retry 累计（直到 ok 才结算）
  cur = {
    step    = nil,
    dir     = nil,
    fromFP  = nil,
    retries = 0,
  },

  -- 聚合：fromFP|dir -&gt; {passes, totalRetries, maxRetries, lastAt}
  byEdge = {},
}

local function rs_now() return os.time() end
local function rs_ensure(t, k, init)
  if not t[k] then t[k] = init end
  return t[k]
end

-------------------------------------------------------
-- Busy 房间（内存统计，不修改地图数据）
-------------------------------------------------------
walker.busyRooms = walker.busyRooms or {
  enabled = true,
  threshold = 2, -- retries &gt;= threshold 认为该房间“busy”（你可随时改）
  rooms = {},    -- fp -&gt; stats
}

local function br_now() return os.time() end

local function br_mark(fp, dir, retries)
  if not (walker.busyRooms and walker.busyRooms.enabled) then return end
  if not fp then return end
  retries = tonumber(retries) or 0
  local th = tonumber(walker.busyRooms.threshold) or 2
  if retries &lt; th then return end

  local t = walker.busyRooms.rooms
  local r = t[fp]
  if not r then
    r = { hits=0, totalRetries=0, maxRetries=0, lastAt=0, lastDir=nil }
    t[fp] = r
  end

  r.hits = (r.hits or 0) + 1
  r.totalRetries = (r.totalRetries or 0) + retries
  if retries &gt; (r.maxRetries or 0) then r.maxRetries = retries end
  r.lastAt = br_now()
  r.lastDir = dir
end

function walker.resetBusyRooms()
  walker.busyRooms = walker.busyRooms or {}
  walker.busyRooms.rooms = {}
  wprint("busyRooms 已清空（仅内存）。")
end

function walker.printBusyRooms(topN)
  topN = tonumber(topN) or 30
  if not (walker.busyRooms and walker.busyRooms.enabled) then
    wprint("busyRooms 未启用。")
    return
  end

  local arr = {}
  for fp, r in pairs(walker.busyRooms.rooms or {}) do
    local hits = tonumber(r.hits) or 0
    local total = tonumber(r.totalRetries) or 0
    local maxR = tonumber(r.maxRetries) or 0
    local avg = (hits &gt; 0) and (total / hits) or 0
    local score = maxR * 100000 + avg * 1000 + hits
    arr[#arr+1] = {
      fp=fp, hits=hits, total=total, maxR=maxR, avg=avg,
      lastDir=r.lastDir, lastAt=r.lastAt or 0, score=score
    }
  end

  table.sort(arr, function(a,b) return a.score &gt; b.score end)

  wprint(string.format("====== Busy 房间（内存统计，threshold=%d）======", tonumber(walker.busyRooms.threshold) or 2))
  for i=1, math.min(topN, #arr) do
    local x = arr[i]
    wprint(string.format(
      "#%d fp=%s  hits=%d  avgRetry=%.2f  maxRetry=%d  totalRetry=%d  lastDir=%s  lastAt=%s",
      i,
      tostring(x.fp),
      x.hits,
      x.avg,
      x.maxR,
      x.total,
      tostring(x.lastDir),
      (x.lastAt and x.lastAt &gt; 0) and os.date("%Y-%m-%d %H:%M:%S", x.lastAt) or "-"
    ))
  end
  if #arr == 0 then
    wprint("暂无 busy 房间命中记录（需要：ACK模式 + 先失败后成功 + retries&gt;=threshold）。")
  end
  wprint("====================================================")
end

-------------------------------------------------------
-- Busy（读取 only）：支持你手工在地图节点上写 busy 字段（如果你以后要用）
-- 注意：这里不会写入 mapNodes，更不会修改你的数据文件
-------------------------------------------------------
walker.baseDelayMs = walker.baseDelayMs or walker.delayMs
walker.busyDefaultDelayMs = walker.busyDefaultDelayMs or 900

function walker.getBusyDelayFromMap(fromFP, dir)
  -- 你环境里 mapNodes 可能不在 mapper.mapNodes，所以这里做成“尽力而为”
  if not (mapper and mapper.mapNodes and fromFP) then return nil end
  local node = mapper.mapNodes[fromFP]
  if not node then return nil end

  if dir and node.busyExits and node.busyExits[dir] ~= nil then
    return tonumber(node.busyExits[dir]) or walker.busyDefaultDelayMs
  end
  if node.busyDelayMs ~= nil then
    return tonumber(node.busyDelayMs) or walker.busyDefaultDelayMs
  end
  if node.busy == true then
    return walker.busyDefaultDelayMs
  end
  return nil
end

function walker.getStepDelayMs(fromFP, dir)
  local d = walker.getBusyDelayFromMap(fromFP, dir)
  if d ~= nil then return d end
  return walker.baseDelayMs or walker.delayMs
end

-------------------------------------------------------
-- 打印
-------------------------------------------------------
function wprint(msg)
  if cecho then
    cecho("\n&lt;magenta&gt;[Walker]&lt;reset&gt; " .. msg .. "\n")
  else
    print("[Walker] " .. msg)
  end
end

local function wprintBusy(fp, dir, retries)
  fp = tostring(fp)
  dir = tostring(dir)
  retries = tonumber(retries) or 0

  if cecho then
    cecho("\n&lt;red&gt;&lt;b&gt;[Walker] BUSY 房间：&lt;/b&gt;&lt;reset&gt; ")
    cecho("&lt;yellow&gt;" .. fp .. "&lt;reset&gt; ")
    cecho("(&lt;white&gt;dir=&lt;reset&gt;" .. tostring(dir) .. ", ")
    cecho("&lt;white&gt;retries=&lt;reset&gt;")
    cecho("&lt;red&gt;" .. retries .. "&lt;reset&gt;")
    cecho(")\n")
  else
    print(string.format(
      "[Walker] BUSY 房间：%s (dir=%s, retries=%d)",
      fp, tostring(dir), retries
    ))
  end
end
-------------------------------------------------------
-- Timer
-------------------------------------------------------
local function killWalkerTimer()
  if walker._timerId and killTimer then
    killTimer(walker._timerId)
  end
  walker._timerId = nil
end

local function scheduleAfter(ms, fn)
  killWalkerTimer()
  walker._timerId = tempTimer(ms / 1000, fn)
end

-------------------------------------------------------
-- backoff
-------------------------------------------------------
local function nextWaitMs()
  local ms = walker.backoffBaseMs * (walker.backoffFactor ^ math.max(0, walker.failCount - 1))
  return math.min(ms, walker.maxDelayMs)
end

local function resetBackoff()
  walker.failCount = 0
end

local function bumpBackoff()
  walker.failCount = walker.failCount + 1
end

-------------------------------------------------------
-- 输入归一化
-------------------------------------------------------
local function normalizeDirs(input)
  local out = {}

  if type(input) == "string" then
    for d in input:gmatch("[^;]+") do
      d = d:match("^%s*(.-)%s*$")
      if d ~= "" then out[#out+1] = d end
    end
    return out
  end

  if type(input) == "table" then
    for _, v in ipairs(input) do
      if type(v) == "string" then
        out[#out+1] = v
      elseif type(v) == "table" and v.dir then
        out[#out+1] = v.dir
      end
    end
  end

  return out
end

-------------------------------------------------------
-- retryStats：发送前锁定“fromFP/step/dir”（同一步重试不会重置）
-------------------------------------------------------
local function rs_key(fromFP, dir)
  return tostring(fromFP or "nil") .. "|" .. tostring(dir or "nil")
end

local function rs_markSend(step, dir)
  if not (walker.retryStats and walker.retryStats.enabled) then return end
  if not walker.ackMode then return end

  local fp = (mapper_core and mapper_core.currentFP) or nil
  local c = walker.retryStats.cur

  -- 1) 只要 step/dir 变了，一定重置（新的一步）
  if c.step ~= step or c.dir ~= dir then
    c.step = step
    c.dir = dir
    c.fromFP = fp
    c.retries = 0
    return
  end

  -- 2) step/dir 没变：这是同一步（可能是重试）
  --    如果第一次没拿到 fp（nil），后来拿到了，就“补上 fromFP”，但绝不清零 retries
  if c.fromFP == nil and fp ~= nil then
    c.fromFP = fp
  end

  -- 3) 其它情况：同一步重试，不做任何重置
end


local function rs_onFail()
  if not (walker.retryStats and walker.retryStats.enabled) then return end
  local c = walker.retryStats.cur
  c.retries = (c.retries or 0) + 1
end

local function rs_onOk()
  if not (walker.retryStats and walker.retryStats.enabled) then return end
  local c = walker.retryStats.cur
  local retries = tonumber(c.retries) or 0

  -- 结算 retry 热点（仅 retries&gt;0）
  if retries &gt; 0 then
    local fromFP = c.fromFP or (mapper_core and mapper_core.currentFP) or "nil"
    local dir    = c.dir or walker.lastSentDir or "nil"
    local key    = rs_key(fromFP, dir)

    local e = rs_ensure(walker.retryStats.byEdge, key, {
      fromFP = fromFP,
      dir = dir,
      passes = 0,
      totalRetries = 0,
      maxRetries = 0,
      lastAt = 0,
    })

    e.passes = e.passes + 1
    e.totalRetries = e.totalRetries + retries
    if retries &gt; (e.maxRetries or 0) then e.maxRetries = retries end
    e.lastAt = rs_now()
  end

  -- Busy 房间（内存统计 + 即时提示）
  do
    local fp = c.fromFP
    local dir = c.dir or walker.lastSentDir
    local th = tonumber(walker.busyRooms and walker.busyRooms.threshold) or 2
  
    -- 1) 先做最终统计（是否入 busyRooms 由 br_mark 自己判断）
    br_mark(fp, dir, retries)
  
    -- 2) 即时提示：只看 retries（不看 br_mark 结果）
    if retries &gt;= th then
      wprintBusy(fp, dir, retries)
    end
  end

  -- 成功后清零
  c.retries = 0
end

-------------------------------------------------------
-- 内部发送
-------------------------------------------------------
function walker._sendCurrentStep()
  if not walker.active then return end

  local dir = walker.queue[walker.idx]
  if not dir then
    wprint("路线执行完毕，共 " .. #walker.queue .. " 步。")
    walker.stop()
    return
  end

  walker.lastSentDir = dir
  walker.waitingAck  = walker.ackMode

  if walker.debug then
    wprint(string.format("send %s (step %d/%d)", dir, walker.idx, #walker.queue))
  end

  rs_markSend(walker.idx, dir)

  local fromFP = mapper_core and mapper_core.currentFP or nil
  walker._stepDelayMs = walker.getStepDelayMs(fromFP, dir)

  send(dir)

  if not walker.ackMode then
    scheduleAfter(walker._stepDelayMs or walker.delayMs, function()
      if walker.active then
        walker.idx = walker.idx + 1
        walker._sendCurrentStep()
      end
    end)
  end
end

-------------------------------------------------------
-- ACK 回调（由 trigger 或 GMCP 调用）
-------------------------------------------------------
function walker.onMoveResult(ok, source)
  if not walker.active or not walker.waitingAck then return end

  walker.waitingAck = false

  if ok then
    rs_onOk()

    resetBackoff()
    walker.idx = walker.idx + 1
    scheduleAfter(walker._stepDelayMs or walker.delayMs, function()
      if walker.active then
        walker._sendCurrentStep()
      end
    end)
    return
  end

  bumpBackoff()
  rs_onFail()

  if walker.stopOnMaxFails and walker.failCount &gt;= walker.maxFails then
    wprint(string.format(
      "连续失败已达上限：%d/%d，自动停止。当前步 %d/%d，dir=%s",
      walker.failCount, walker.maxFails,
      walker.idx, #walker.queue,
      tostring(walker.lastSentDir)
    ))
    walker.stop()
    return
  end

  local waitMs = nextWaitMs()

  wprint(string.format(
    "移动失败，%dms 后重试（dir=%s, fail=%d/%d%s）",
    waitMs,
    tostring(walker.lastSentDir),
    walker.failCount,
    walker.maxFails,
    source and (", src=" .. tostring(source)) or ""
  ))

  scheduleAfter(waitMs, function()
    if walker.active then
      walker._sendCurrentStep()
    end
  end)
end

-------------------------------------------------------
-- 对外接口
-------------------------------------------------------
function walker.start(dirsOrSteps, opts)
  opts = opts or {}

  local dirs = normalizeDirs(dirsOrSteps)
  if #dirs == 0 then
    wprint("没有可执行的方向序列。")
    return false
  end

  walker.stop()

  walker.queue         = dirs
  walker.idx           = 1
  walker.delayMs       = tonumber(opts.delayMs) or walker.delayMs
  walker.baseDelayMs   = tonumber(opts.baseDelayMs) or walker.baseDelayMs or walker.delayMs

  walker.ackMode       = opts.ackMode == true
  walker.backoffFactor = tonumber(opts.backoffFactor) or walker.backoffFactor
  walker.maxDelayMs    = tonumber(opts.maxDelayMs) or walker.maxDelayMs
  walker.maxFails      = tonumber(opts.maxFails) or walker.maxFails

  -- busyRooms threshold 可选配置
  if opts.busyRoomThreshold ~= nil then
    walker.busyRooms = walker.busyRooms or {}
    walker.busyRooms.threshold = tonumber(opts.busyRoomThreshold) or walker.busyRooms.threshold or 2
  end

  resetBackoff()
  walker.active = true

  if walker.retryStats and walker.retryStats.enabled then
    walker.retryStats.cur = { step=nil, dir=nil, fromFP=nil, retries=0 }
  end

  wprint(string.format(
    "开始行走：%d 步，ack=%s，baseDelay=%dms，maxFails=%d，busyRoomThreshold=%d",
    #dirs,
    tostring(walker.ackMode),
    tonumber(walker.baseDelayMs) or walker.delayMs,
    walker.maxFails,
    tonumber(walker.busyRooms and walker.busyRooms.threshold) or 2
  ))

  walker._sendCurrentStep()
  return true
end

function walker.stop()
  walker.active = false
  walker.queue  = {}
  walker.idx    = 0
  walker.waitingAck = false
  killWalkerTimer()
  if walker.debug then
    wprint("已停止。")
  end
end

-------------------------------------------------------
-- Retry 热点报告 / 重置
-------------------------------------------------------
function walker.reportRetryHotspots(topN)
  topN = tonumber(topN) or 20
  if not (walker.retryStats and walker.retryStats.enabled) then
    wprint("retryStats 未启用。"); return
  end

  local arr = {}
  for _, e in pairs(walker.retryStats.byEdge or {}) do
    local avg = (e.passes &gt; 0) and (e.totalRetries / e.passes) or 0
    local score = (e.maxRetries or 0) * 100000 + avg * 1000 + (e.totalRetries or 0)
    arr[#arr+1] = {
      fromFP = e.fromFP,
      dir = e.dir,
      passes = e.passes,
      total = e.totalRetries,
      max = e.maxRetries,
      avg = avg,
      lastAt = e.lastAt,
      score = score,
    }
  end
  table.sort(arr, function(a,b) return a.score &gt; b.score end)

  wprint("====== 重试热点榜（成功前需要 retry 的房间+出口）======")
  for i=1, math.min(topN, #arr) do
    local x = arr[i]
    wprint(string.format(
      "#%d fromFP=%s  dir=%s  passes=%d  avgRetry=%.2f  maxRetry=%d  totalRetry=%d  lastAt=%s",
      i,
      tostring(x.fromFP),
      tostring(x.dir),
      x.passes or 0,
      x.avg or 0,
      x.max or 0,
      x.total or 0,
      x.lastAt and os.date("%Y-%m-%d %H:%M:%S", x.lastAt) or "-"
    ))
  end
  if #arr == 0 then
    wprint("暂无（还没出现过 成功前 retries&gt;0 的情况）。")
  end
  wprint("=====================================================")
end

function walker.resetRetryStats()
  if walker.retryStats then
    walker.retryStats.byEdge = {}
    walker.retryStats.cur = { step=nil, dir=nil, fromFP=nil, retries=0 }
  end
  wprint("retryStats 已清空。")
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>fpnew</name>
				<packageName></packageName>
				<script>-- ======================================================
-- fpnew.lua
-- 基于 GMCP / mapper_core.currentFP
-- 用于生成“新房间 mapNodes 模板”
-- ======================================================

fpnew = fpnew or {}

local function fprint(msg)
  if cecho then
    cecho("\n&lt;yellow&gt;[FPNEW]&lt;reset&gt; " .. msg .. "\n")
  else
    print("[FPNEW] " .. msg)
  end
end

-- 判断 FP 是否已存在于任一已加载区域
local function fpExists(fp)
  if not nav or not nav.regions then return false end
  for _, region in pairs(nav.regions) do
    if region.mapNodes and region.mapNodes[fp] then
      return true
    end
  end
  return false
end

-- 主函数
function fpnew.run()
  -- 1) 获取当前 FP
  if not mapper_core or not mapper_core.currentFP then
    fprint("当前没有 GMCP 房间指纹（mapper_core.currentFP 为空）。")
    return
  end

  local fp = mapper_core.currentFP

  -- 2) 是否已存在
  if fpExists(fp) then
    fprint("该房间已存在于地图中：")
    fprint(fp)
    return
  end

  -- 3) 解析 name / exits
  local name, dirstr = fp:match("^(.+)%|(.*)$")
  if not name then
    fprint("指纹格式异常，无法解析： " .. tostring(fp))
    return
  end

  local exits = {}
  for dir in dirstr:gmatch("([^,]+)") do
    table.insert(exits, dir)
  end

  -- 4) 打印模板
  fprint("发现新房间（未在已加载地图中）：\n")

  cecho("&lt;green&gt;[复制以下内容到 mapNodes 中]&lt;reset&gt;\n")
  cecho(string.format(
    '["%s"] = {\n  name = "%s",\n  exits = {\n',
    fp, name
  ))

  for _, d in ipairs(exits) do
    cecho(string.format('    ["%s"] = "",\n', d))
  end

  cecho("  },\n},\n")
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>map checker</name>
				<packageName></packageName>
				<script>-- ======================================================
-- map_check.lua  (独立地图校验模块)
-- - 不依赖 nav / walker
-- - 只读取 mapper.maps[regionKey]
-- - 检查：
--   1) fp 声明的出口集合 vs exits 实际键集合 是否一致
--   2) exits 指向不存在 fp 的断边
--   3) alias 冲突：同一 alias 对应多个 fp
-- ======================================================

map_check = map_check or {}

local function cprint(msg)
  if cecho then
    cecho("\n&lt;orange&gt;[MapCheck]&lt;reset&gt; " .. msg .. "\n")
  else
    print("[MapCheck] " .. msg)
  end
end

local function sortedKeys(t)
  local r = {}
  for k in pairs(t or {}) do table.insert(r, k) end
  table.sort(r)
  return r
end

local function parseFpExits(fp)
  -- fp 格式： name|dir1,dir2,dir3
  local _, list = fp:match("^(.-)%|(.*)$")
  if list == nil then
    return {}, false
  end
  if list == "" then
    return {}, true
  end
  local set = {}
  for dir in list:gmatch("[^,]+") do
    dir = dir:gsub("^%s+", ""):gsub("%s+$", "")
    if dir ~= "" then set[dir] = true end
  end
  return set, true
end

local function toSetFromExits(exits)
  local set = {}
  for dir in pairs(exits or {}) do
    set[dir] = true
  end
  return set
end

local function setDiff(a, b)
  -- 返回 a-b 的元素列表（排序）
  local out = {}
  for k in pairs(a or {}) do
    if not (b and b[k]) then table.insert(out, k) end
  end
  table.sort(out)
  return out
end

local function countTable(t)
  local c = 0
  for _ in pairs(t or {}) do c = c + 1 end
  return c
end

-- ------------------------------------------------------
-- 1) fp vs exits 一致性检查
-- ------------------------------------------------------
function map_check.checkFpExitConsistency(regionKey, opts)
  opts = opts or {}
  local showOk = opts.showOk == true

  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    cprint("找不到 mapper.maps['" .. tostring(regionKey) .. "']，请先加载地图脚本。")
    return
  end

  local m = mapper.maps[regionKey]
  local nodes = m.mapNodes or m.map_nodes
  if type(nodes) ~= "table" then
    cprint("mapper.maps['" .. regionKey .. "'].mapNodes 不是表。")
    return
  end

  local bad = 0
  local total = 0

  for fp, node in pairs(nodes) do
    total = total + 1
    local fpSet, okFp = parseFpExits(fp)
    local exitsSet = toSetFromExits(node and node.exits)

    if not okFp then
      bad = bad + 1
      cprint("⚠️ FP 解析失败（缺少 | ）: " .. tostring(fp))
    else
      local missingInExits = setDiff(fpSet, exitsSet)    -- fp 有但 exits 没有
      local extraInExits   = setDiff(exitsSet, fpSet)    -- exits 有但 fp 没有

      if #missingInExits &gt; 0 or #extraInExits &gt; 0 then
        bad = bad + 1
        local roomName = (node and node.name) or "?"
        cprint(string.format(
          "❌ 不一致：%s  [%s]\n   fp里有但exits没写: %s\n   exits里有但fp没写: %s",
          tostring(fp),
          roomName,
          (#missingInExits &gt; 0 and table.concat(missingInExits, ",") or "-"),
          (#extraInExits   &gt; 0 and table.concat(extraInExits, ",")   or "-")
        ))
      elseif showOk then
        local roomName = (node and node.name) or "?"
        cprint("✅ 一致：" .. tostring(fp) .. " [" .. roomName .. "]")
      end
    end
  end

  cprint(string.format(
    "一致性检查完成：区域[%s] 共 %d 个节点，不一致 %d 个。",
    regionKey, total, bad
  ))
end

-- ------------------------------------------------------
-- 2) 断边检查：exits 指向不存在 fp
-- ------------------------------------------------------
function map_check.checkBrokenExits(regionKey)
  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    cprint("找不到 mapper.maps['" .. tostring(regionKey) .. "']，请先加载地图脚本。")
    return
  end

  local m = mapper.maps[regionKey]
  local nodes = m.mapNodes or m.map_nodes
  if type(nodes) ~= "table" then
    cprint("mapper.maps['" .. regionKey .. "'].mapNodes 不是表。")
    return
  end

  local broken = 0
  for fp, node in pairs(nodes) do
    for dir, tgt in pairs(node.exits or {}) do
      if not nodes[tgt] then
        broken = broken + 1
        cprint(string.format(
          "❌ 断边：from [%s] (%s) --%s--&gt; [%s] 不存在",
          tostring(fp),
          (node and node.name) or "?",
          tostring(dir),
          tostring(tgt)
        ))
      end
    end
  end

  if broken == 0 then
    cprint("✅ 断边检查：区域[" .. regionKey .. "] exits 没有指向不存在 fp 的情况。")
  else
    cprint("断边检查完成：区域[" .. regionKey .. "] 共发现 " .. broken .. " 条断边。")
  end
end

-- ------------------------------------------------------
-- 3) alias 冲突检查：同一个 alias -&gt; 多个 fp
-- ------------------------------------------------------
function map_check.checkAliasConflicts(regionKey)
  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    cprint("找不到 mapper.maps['" .. tostring(regionKey) .. "']，请先加载地图脚本。")
    return
  end

  local m = mapper.maps[regionKey]
  local nodes   = m.mapNodes or m.map_nodes
  local aliases = m.mapAliases or m.map_aliases or {}

  if type(nodes) ~= "table" then
    cprint("mapper.maps['" .. regionKey .. "'].mapNodes 不是表。")
    return
  end

  -- 先建：alias -&gt; { fp, fp, ... }
  local idx = {}
  for fp, node in pairs(nodes) do
    local name = node and node.name
    local a = name and aliases[name]
    if a then
      idx[a] = idx[a] or {}
      table.insert(idx[a], fp)
    end
  end

  local conflicts = 0
  for a, list in pairs(idx) do
    if #list &gt; 1 then
      conflicts = conflicts + 1
      table.sort(list)
      cprint(string.format(
        "⚠️ alias 冲突：[%s] 对应 %d 个房间 fp：%s",
        tostring(a), #list, table.concat(list, " | ")
      ))
    end
  end

  if conflicts == 0 then
    cprint("✅ alias 冲突检查：区域[" .. regionKey .. "] 未发现冲突。")
  else
    cprint("alias 冲突检查完成：区域[" .. regionKey .. "] 共发现 " .. conflicts .. " 组冲突。")
  end
end

-- ------------------------------------------------------
-- 4) 单边检查：A --dir--&gt; B，但 B 没有任何出口回到 A
-- 说明：
-- - 不假设“反向方向”一定是某个固定映射（比如 n&lt;-&gt;s），
--   只要 B 的 exits 里存在任意一个出口指回 A，就算 OK。
-- - opts:
--    includeBroken = false  是否把“断边”也算进来（默认不算）
--    showOk        = false  是否打印 OK 的回链
-- ------------------------------------------------------
function map_check.checkOneWayEdges(regionKey, opts)
  opts = opts or {}
  local includeBroken = opts.includeBroken == true
  local showOk        = opts.showOk == true

  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    cprint("找不到 mapper.maps['" .. tostring(regionKey) .. "']，请先加载地图脚本。")
    return
  end

  local m = mapper.maps[regionKey]
  local nodes = m.mapNodes or m.map_nodes
  if type(nodes) ~= "table" then
    cprint("mapper.maps['" .. regionKey .. "'].mapNodes 不是表。")
    return
  end

  local totalEdges = 0
  local oneWay = 0
  local skippedBroken = 0

  for fromFP, fromNode in pairs(nodes) do
    for dir, toFP in pairs((fromNode and fromNode.exits) or {}) do
      totalEdges = totalEdges + 1

      local toNode = nodes[toFP]
      if not toNode then
        if includeBroken then
          oneWay = oneWay + 1
          cprint(string.format(
            "❌ 单边(断边)：[%s] (%s) --%s--&gt; [%s] 不存在",
            tostring(fromFP),
            (fromNode and fromNode.name) or "?",
            tostring(dir),
            tostring(toFP)
          ))
        else
          skippedBroken = skippedBroken + 1
        end
      else
        -- 检查 toNode 是否存在任意出口指回 fromFP
        local back = false
        for _d2, backFP in pairs(toNode.exits or {}) do
          if backFP == fromFP then
            back = true
            break
          end
        end

        if not back then
          oneWay = oneWay + 1
          cprint(string.format(
            "⚠️ 单边：[%s] (%s) --%s--&gt; [%s] (%s) 但对方无回链",
            tostring(fromFP),
            (fromNode and fromNode.name) or "?",
            tostring(dir),
            tostring(toFP),
            (toNode and toNode.name) or "?"
          ))
        elseif showOk then
          cprint(string.format(
            "✅ 回链OK：[%s] --%s--&gt; [%s] (%s)",
            tostring(fromFP), tostring(dir), tostring(toFP), (toNode and toNode.name) or "?"
          ))
        end
      end
    end
  end

  if oneWay == 0 then
    cprint(string.format(
      "✅ 单边检查：区域[%s] 未发现单边出口。（共检查 %d 条边，跳过断边 %d 条）",
      regionKey, totalEdges, skippedBroken
    ))
  else
    cprint(string.format(
      "单边检查完成：区域[%s] 共发现 %d 条单边出口。（共检查 %d 条边，跳过断边 %d 条）",
      regionKey, oneWay, totalEdges, skippedBroken
    ))
  end
end

-- ------------------------------------------------------
-- 4) 出口目标重复检查：同一个 node 里多个 dir 指向同一个 tgt fp
--    典型错误：e / w 都写成同一个房间（拷贝粘贴造成）
-- ------------------------------------------------------
function map_check.checkDuplicateExitTargets(regionKey, opts)
  opts = opts or {}
  local allowSame = opts.allowSame or {}  -- 可选：允许的重复组合，例如 { ["enter,out"]=true }

  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    cprint("找不到 mapper.maps['" .. tostring(regionKey) .. "']，请先加载地图脚本。")
    return
  end

  local m = mapper.maps[regionKey]
  local nodes = m.mapNodes or m.map_nodes
  if type(nodes) ~= "table" then
    cprint("mapper.maps['" .. regionKey .. "'].mapNodes 不是表。")
    return
  end

  local dupCount = 0

  for fp, node in pairs(nodes) do
    local exits = node and node.exits or {}
    if exits and next(exits) then
      -- tgt -&gt; {dir1, dir2, ...}
      local idx = {}
      for dir, tgt in pairs(exits) do
        if tgt then
          idx[tgt] = idx[tgt] or {}
          table.insert(idx[tgt], dir)
        end
      end

      for tgt, dirs in pairs(idx) do
        if #dirs &gt; 1 then
          table.sort(dirs)
          local key = table.concat(dirs, ",")
          if not allowSame[key] then
            dupCount = dupCount + 1
            cprint(string.format(
              "⚠️ 出口目标重复：from [%s] (%s) 方向[%s] -&gt; 同一目标 [%s]",
              tostring(fp),
              (node and node.name) or "?",
              key,
              tostring(tgt)
            ))
          end
        end
      end
    end
  end

  if dupCount == 0 then
    cprint("✅ 重复出口检查：区域[" .. regionKey .. "] 未发现同目标多方向的情况。")
  else
    cprint("重复出口检查完成：区域[" .. regionKey .. "] 共发现 " .. dupCount .. " 处。")
  end
end

-- ======================================================
-- checkComponents (无向连通分量 / 查地图断块)
-- 用法:
--   map_check.checkComponents("wuyi")
--   map_check.checkComponents("wuyi", { showRooms = true, maxList = 30 })
-- ======================================================

local function undirectedNeighbors(nodes, fp)
  local nb = {}

  -- 正向边：fp -&gt; tgt
  local node = nodes[fp]
  for _, tgt in pairs((node and node.exits) or {}) do
    if nodes[tgt] then nb[tgt] = true end
  end

  -- 反向边：other -&gt; fp
  for ofp, onode in pairs(nodes) do
    for _, tgt in pairs((onode and onode.exits) or {}) do
      if tgt == fp then nb[ofp] = true end
    end
  end

  return nb
end

local function countTable(t)
  local c = 0
  for _ in pairs(t or {}) do c = c + 1 end
  return c
end

-- ------------------------------------------------------
-- 6) 连通分量检查：图是否被分成多个“岛”
-- 说明：
-- - 这里按“无向连通”来算（只要 A-&gt;B 或 B-&gt;A 之一存在，就认为两点相连）
-- - 用于快速发现“地图断开/漏边/漏房间”
-- opts:
--   showRooms = true/false   是否列出每个分量里的 fp（默认 false）
--   maxList   = number       每个分量最多列多少个 fp（默认 15）
-- ------------------------------------------------------
function map_check.checkComponents(regionKey, opts)
  opts = opts or {}
  local showRooms = opts.showRooms == true
  local maxList = tonumber(opts.maxList) or 15

  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    cprint("找不到 mapper.maps['" .. tostring(regionKey) .. "']，请先加载地图脚本。")
    return
  end

  local m = mapper.maps[regionKey]
  local nodes = m.mapNodes or m.map_nodes
  if type(nodes) ~= "table" then
    cprint("mapper.maps['" .. tostring(regionKey) .. "'].mapNodes 不是表。")
    return
  end

  -- 建无向邻接表：只要有单向边，就当作无向相连（更符合“连通性排雷”）
  local adj = {}
  for fp, node in pairs(nodes) do
    adj[fp] = adj[fp] or {}
    for _, tgt in pairs(node.exits or {}) do
      if nodes[tgt] then
        adj[fp][tgt] = true
        adj[tgt] = adj[tgt] or {}
        adj[tgt][fp] = true
      end
    end
  end

  local visited = {}
  local comps = {}

  local function bfs(start)
    local q = { start }
    local head = 1
    visited[start] = true
    local list = { start }

    while head &lt;= #q do
      local cur = q[head]; head = head + 1
      for nxt in pairs(adj[cur] or {}) do
        if not visited[nxt] then
          visited[nxt] = true
          q[#q+1] = nxt
          list[#list+1] = nxt
        end
      end
    end

    table.sort(list)
    return list
  end

  local total = 0
  for _ in pairs(nodes) do total = total + 1 end

  for fp in pairs(nodes) do
    if not visited[fp] then
      local comp = bfs(fp)
      comps[#comps+1] = comp
    end
  end

  table.sort(comps, function(a, b) return #a &gt; #b end)

  if #comps &lt;= 1 then
    cprint(string.format("✅ 连通性检查：区域[%s] 只有 1 个连通分量（节点 %d）。", regionKey, total))
    return
  end

  cprint(string.format(
    "⚠️ 连通性检查：区域[%s] 被分成 %d 个连通分量（节点 %d）。",
    regionKey, #comps, total
  ))

  for i, comp in ipairs(comps) do
    cprint(string.format("  - 分量 #%d：%d 个节点", i, #comp))
    if showRooms then
      local cut = {}
      for j = 1, math.min(#comp, maxList) do cut[#cut+1] = comp[j] end
      local suffix = (#comp &gt; maxList) and (" ... (+" .. tostring(#comp - maxList) .. ")") or ""
      cprint("    " .. table.concat(cut, " | ") .. suffix)
    end
  end
end

-- ------------------------------------------------------
-- X) 疑似漏连节点：无向度数 &lt;= 1 的房间
-- 说明：
-- - 统计“无向邻居数”：只要 A-&gt;B 或 B-&gt;A 有一条，就算相邻
-- - 度数=0：孤岛节点（很可能断边/漏边/漏房间）
-- - 度数=1：单链末端（可能正常，也可能漏连）
-- opts:
--   maxList = number   最多打印多少条（默认 40）
-- ------------------------------------------------------
function map_check.checkLowDegreeNodes(regionKey, opts)
  opts = opts or {}
  local maxList = tonumber(opts.maxList) or 40

  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    cprint("找不到 mapper.maps['" .. tostring(regionKey) .. "']，请先加载地图脚本。")
    return
  end

  local m = mapper.maps[regionKey]
  local nodes = m.mapNodes or m.map_nodes
  if type(nodes) ~= "table" then
    cprint("mapper.maps['" .. tostring(regionKey) .. "'].mapNodes 不是表。")
    return
  end

  -- 建无向邻接：只要单向存在也算邻居
  local adj = {}
  for fp, node in pairs(nodes) do
    adj[fp] = adj[fp] or {}
    for _, tgt in pairs(node.exits or {}) do
      if nodes[tgt] then
        adj[fp][tgt] = true
        adj[tgt] = adj[tgt] or {}
        adj[tgt][fp] = true
      end
    end
  end

  local low = {}      -- { {fp=..., deg=..., expected=..., name=...}, ... }
  local badFp = {}    -- fp 解析失败（缺少 |）
  local total = 0

  for fp, node in pairs(nodes) do
    total = total + 1

    -- 1) 计算无向度数（现有逻辑）
    local deg = 0
    for _ in pairs(adj[fp] or {}) do deg = deg + 1 end

    -- 2) 计算 fp 声明的“应有出口数”
    local fpSet, okFp = parseFpExits(fp)  -- 你模块里已有这个函数
    if not okFp then
      table.insert(badFp, { fp = fp, name = (node and node.name) or "?" })
    else
      local expectedDeg = countTable(fpSet)

      -- ✅ 关键规则：fp 只声明 0/1 个方向 =&gt; 认为是正常叶子，不算可疑
      if expectedDeg &gt; 1 then
        if deg &lt;= 1 then
          table.insert(low, {
            fp = fp,
            deg = deg,
            expected = expectedDeg,
            name = (node and node.name) or "?",
          })
        end
      end
    end
  end

  table.sort(low, function(a, b)
    if a.deg ~= b.deg then return a.deg &lt; b.deg end
    if a.expected ~= b.expected then return a.expected &lt; b.expected end
    return tostring(a.fp) &lt; tostring(b.fp)
  end)

  if #badFp &gt; 0 then
    cprint(string.format("⚠️ 低度节点检查：发现 %d 个 FP 解析失败（缺少 |），这些点建议先修正：", #badFp))
    local nbad = math.min(#badFp, maxList)
    for i = 1, nbad do
      cprint(string.format("  - %s (%s)", tostring(badFp[i].fp), tostring(badFp[i].name)))
    end
    if #badFp &gt; maxList then
      cprint("  ... 还有 " .. tostring(#badFp - maxList) .. " 个未显示（提高 opts.maxList 可看更多）。")
    end
  end

  if #low == 0 then
    cprint(string.format(
      "✅ 低度节点检查：区域[%s] 未发现可疑低度点（仅统计 fp声明出口&gt;1 且 无向度数&lt;=1）。节点 %d。",
      regionKey, total
    ))
    return
  end

  cprint(string.format(
    "⚠️ 低度节点检查：区域[%s] 发现 %d 个可疑低度点（fp声明出口&gt;1 且 无向度数&lt;=1）。节点 %d。",
    regionKey, #low, total
  ))

  local n = math.min(#low, maxList)
  for i = 1, n do
    local x = low[i]
    cprint(string.format(
      "  - deg=%d / expected=%d  %s  (%s)",
      x.deg, x.expected, tostring(x.fp), tostring(x.name)
    ))
  end
  if #low &gt; maxList then
    cprint("  ... 还有 " .. tostring(#low - maxList) .. " 个未显示（提高 opts.maxList 可看更多）。")
  end
end


-- ------------------------------------------------------
-- X) 通名死循环簇检查（山路 / 官道 / 土路 等）
-- ------------------------------------------------------
function map_check.checkGenericLoops(regionKey, opts)
  opts = opts or {}
  local maxList = tonumber(opts.maxList) or 20
  local genericNames = opts.names or {
    ["山路"] = true,
    ["官道"] = true,
    ["土路"] = true,
    ["小路"] = true,
    ["山道"] = true,
    ["林间小路"] = true,
  }

  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    cprint("找不到 mapper.maps['" .. tostring(regionKey) .. "']")
    return
  end

  local nodes = mapper.maps[regionKey].mapNodes
  if type(nodes) ~= "table" then
    cprint("mapNodes 不是表")
    return
  end

  -- 按通名分组
  local byName = {}
  for fp, node in pairs(nodes) do
    if node and genericNames[node.name] then
      byName[node.name] = byName[node.name] or {}
      byName[node.name][fp] = true
    end
  end

  local found = 0

  for name, fpset in pairs(byName) do
    -- 建子图
    local adj = {}
    local hasOutside = {}

    for fp in pairs(fpset) do
      adj[fp] = adj[fp] or {}
      hasOutside[fp] = false

      for _, tgt in pairs(nodes[fp].exits or {}) do
        if nodes[tgt] then
          if fpset[tgt] then
            adj[fp][tgt] = true
            adj[tgt] = adj[tgt] or {}
            adj[tgt][fp] = true
          else
            hasOutside[fp] = true
          end
        end
      end
    end

    -- 连通块检查
    local visited = {}
    local function bfs(start)
      local q = { start }
      local head = 1
      visited[start] = true
      local comp = {}
      local open = false

      while head &lt;= #q do
        local cur = q[head]; head = head + 1
        table.insert(comp, cur)
        if hasOutside[cur] then open = true end

        for nb in pairs(adj[cur] or {}) do
          if not visited[nb] then
            visited[nb] = true
            table.insert(q, nb)
          end
        end
      end

      return comp, open
    end

    for fp in pairs(fpset) do
      if not visited[fp] then
        local comp, open = bfs(fp)
        if not open then
          found = found + 1
          table.sort(comp)
          cprint(string.format(
            "❌ 通名死循环簇 [%s] size=%d",
            name, #comp
          ))
          cprint("   " .. table.concat(comp, " | "))
        end
      end
    end
  end

  if found == 0 then
    cprint("✅ 通名死循环簇检查：未发现问题")
  else
    cprint("❌ 通名死循环簇检查完成：发现 " .. found .. " 个问题簇")
  end
end

-- ------------------------------------------------------
-- X) origin 不在主分量（最大连通分量）——致命
-- ------------------------------------------------------
function map_check.checkOriginInMainComponent(regionKey)
  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    cprint("找不到 mapper.maps['" .. tostring(regionKey) .. "']，请先加载地图脚本。")
    return
  end

  local m = mapper.maps[regionKey]
  local nodes   = m.mapNodes or m.map_nodes
  local aliases = m.mapAliases or m.map_aliases or {}

  if type(nodes) ~= "table" then
    cprint("mapper.maps['" .. tostring(regionKey) .. "'].mapNodes 不是表。")
    return
  end

  -- 反查 alias -&gt; fps
  local idx = {}
  for fp, node in pairs(nodes) do
    local name = node and node.name
    local a = name and aliases[name]
    if a then
      idx[a] = idx[a] or {}
      table.insert(idx[a], fp)
    end
  end

  local originList = idx["origin"]
  if not originList or #originList == 0 then
    cprint("❌ origin 检查：区域[" .. tostring(regionKey) .. "] 未找到 alias=origin（请在 mapAliases 配置）。")
    return
  end
  table.sort(originList)

  if #originList &gt; 1 then
    cprint("⚠️ origin 检查：alias=origin 对应多个 fp（将全部校验）：")
    cprint("   " .. table.concat(originList, " | "))
  end

  -- 建全图无向邻接（只要单向存在也算相邻）
  local adj = {}
  for fp, node in pairs(nodes) do
    adj[fp] = adj[fp] or {}
    for _, tgt in pairs(node.exits or {}) do
      if nodes[tgt] then
        adj[fp][tgt] = true
        adj[tgt] = adj[tgt] or {}
        adj[tgt][fp] = true
      end
    end
  end

  -- 找所有分量，并找最大（主分量）
  local visited = {}
  local comps = {} -- { {size=, set={fp=true...}}, ... }

  local function bfs(start)
    local q = { start }
    local head = 1
    visited[start] = true
    local set = { [start] = true }
    local size = 1

    while head &lt;= #q do
      local cur = q[head]; head = head + 1
      for nb in pairs(adj[cur] or {}) do
        if not visited[nb] then
          visited[nb] = true
          set[nb] = true
          size = size + 1
          table.insert(q, nb)
        end
      end
    end
    return { size = size, set = set }
  end

  for fp in pairs(nodes) do
    if not visited[fp] then
      table.insert(comps, bfs(fp))
    end
  end

  table.sort(comps, function(a, b) return a.size &gt; b.size end)
  local main = comps[1]
  if not main then
    cprint("❌ origin 检查：无法计算主分量（地图为空？）")
    return
  end

  local mainSize = main.size
  local total = 0
  for _ in pairs(nodes) do total = total + 1 end

  local bad = {}
  for _, ofp in ipairs(originList) do
    if not (main.set and main.set[ofp]) then
      table.insert(bad, ofp)
    end
  end

  if #bad == 0 then
    cprint(string.format(
      "✅ origin 主分量检查：origin 在主分量内（主分量 %d/%d 节点）。",
      mainSize, total
    ))
  else
    cprint(string.format(
      "❌ 致命：origin 不在主分量！（主分量 %d/%d 节点）",
      mainSize, total
    ))
    cprint("   不在主分量的 origin fp: " .. table.concat(bad, " | "))
  end
end

-- ------------------------------------------------------
-- X) 从 origin 出发不可达节点列表（致命检查）
-- - origin 定义：mapAliases 里 alias == "origin" 的房间名
-- - 以 exits 作为有向边进行可达性 BFS
-- ------------------------------------------------------
function map_check.listUnreachableFromOrigin(regionKey, opts)
  opts = opts or {}
  local maxList = tonumber(opts.maxList) or 200  -- 最多打印多少条，不想截断就调大

  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    cprint("找不到 mapper.maps['" .. tostring(regionKey) .. "']，请先加载地图脚本。")
    return
  end

  local m = mapper.maps[regionKey]
  local nodes   = m.mapNodes or m.map_nodes
  local aliases = m.mapAliases or m.map_aliases or {}

  if type(nodes) ~= "table" then
    cprint("mapper.maps['" .. tostring(regionKey) .. "'].mapNodes 不是表。")
    return
  end

  -- 1) 找到 alias == "origin" 对应的房间名（可能多个名字都被写成 origin）
  local originNames = {}
  for roomName, a in pairs(aliases) do
    if tostring(a) == "origin" then
      table.insert(originNames, roomName)
    end
  end
  table.sort(originNames)

  if #originNames == 0 then
    cprint("❌ 未配置 origin：请在 mapAliases 里设置某个房间名 = 'origin'")
    return
  end
  if #originNames &gt; 1 then
    cprint("⚠️ 发现多个 origin 名称（alias='origin'）： " .. table.concat(originNames, " / "))
  end

  -- 2) 从 nodes 里找这些房间名对应的 fp
  local originFPs = {}
  local originNameSet = {}
  for _, n in ipairs(originNames) do originNameSet[n] = true end

  for fp, node in pairs(nodes) do
    if node and originNameSet[node.name] then
      table.insert(originFPs, fp)
    end
  end
  table.sort(originFPs)

  if #originFPs == 0 then
    cprint("❌ origin 名称在 mapNodes 中找不到对应房间： " .. table.concat(originNames, " / "))
    return
  end
  if #originFPs &gt; 1 then
    cprint("⚠️ origin 对应多个 fp（同名多房间）：将使用第一个 fp 作为起点：")
    for i, fp in ipairs(originFPs) do
      cprint("   - " .. fp .. " [" .. tostring(nodes[fp] and nodes[fp].name or "?") .. "]")
      if i &gt;= 10 then
        cprint("   ...(仅展示前 10 个)")
        break
      end
    end
  end

  local originFP = originFPs[1]
  local originNode = nodes[originFP]
  cprint(string.format("⭐ origin 起点：[%s] %s", tostring(originFP), originNode and originNode.name or "?"))

  -- 3) BFS（有向边）
  local visited = {}
  local q = { originFP }
  local head = 1
  visited[originFP] = true

  while head &lt;= #q do
    local cur = q[head]; head = head + 1
    local node = nodes[cur]
    for _, tgt in pairs(node and node.exits or {}) do
      if nodes[tgt] and not visited[tgt] then
        visited[tgt] = true
        table.insert(q, tgt)
      end
    end
  end

  -- 4) 收集不可达
  local unreachable = {}
  local total = 0
  for fp, node in pairs(nodes) do
    total = total + 1
    if not visited[fp] then
      table.insert(unreachable, { fp = fp, name = node and node.name or "?" })
    end
  end
  table.sort(unreachable, function(a,b) return tostring(a.fp) &lt; tostring(b.fp) end)

  if #unreachable == 0 then
    cprint(string.format("✅ origin 可达性：全部可达（%d/%d）。", total, total))
    return {}
  end

  cprint(string.format("❌ origin 可达性：不可达 %d / %d（下面列出 fp + name）", #unreachable, total))

  local shown = 0
  for _, item in ipairs(unreachable) do
    shown = shown + 1
    cprint(string.format("   - [%s] %s", tostring(item.fp), tostring(item.name)))
    if shown &gt;= maxList then
      cprint(string.format("   ...(已截断，仅展示前 %d 条，可用 opts.maxList 调大)", maxList))
      break
    end
  end

  return unreachable
end

-- ------------------------------------------------------
-- Y) 回不到 origin 的节点列表（X -&gt; origin 不可达）
-- - 做法：构建反向图（tgt -&gt; from），从 origin 反向 BFS
-- ------------------------------------------------------
function map_check.listCannotReturnToOrigin(regionKey, opts)
  opts = opts or {}
  local maxList = tonumber(opts.maxList) or 200

  if not mapper or not mapper.maps or not mapper.maps[regionKey] then
    cprint("找不到 mapper.maps['" .. tostring(regionKey) .. "']，请先加载地图脚本。")
    return
  end

  local m = mapper.maps[regionKey]
  local nodes   = m.mapNodes or m.map_nodes
  local aliases = m.mapAliases or m.map_aliases or {}

  if type(nodes) ~= "table" then
    cprint("mapper.maps['" .. tostring(regionKey) .. "'].mapNodes 不是表。")
    return
  end

  -- 1) 找 origin 的 fp（逻辑同你之前那段：alias == 'origin' 的房间名 -&gt; fp）
  local originNames = {}
  for roomName, a in pairs(aliases) do
    if tostring(a) == "origin" then table.insert(originNames, roomName) end
  end
  table.sort(originNames)
  if #originNames == 0 then
    cprint("❌ 未配置 origin：请在 mapAliases 里设置某个房间名 = 'origin'")
    return
  end

  local originNameSet = {}
  for _, n in ipairs(originNames) do originNameSet[n] = true end

  local originFPs = {}
  for fp, node in pairs(nodes) do
    if node and originNameSet[node.name] then
      table.insert(originFPs, fp)
    end
  end
  table.sort(originFPs)
  if #originFPs == 0 then
    cprint("❌ origin 名称在 mapNodes 中找不到对应房间： " .. table.concat(originNames, " / "))
    return
  end

  local originFP = originFPs[1]
  cprint("⭐ origin(回溯检查) 起点 fp：" .. tostring(originFP))

  -- 2) 构建反向邻接：rev[tgt] = {from1, from2, ...}
  local rev = {}
  for fromFP, node in pairs(nodes) do
    for _, tgtFP in pairs(node and node.exits or {}) do
      if nodes[tgtFP] then
        rev[tgtFP] = rev[tgtFP] or {}
        table.insert(rev[tgtFP], fromFP)
      end
    end
  end

  -- 3) 反向 BFS：能访问到的点 = 可以回到 origin 的点
  local canReturn = {}
  local q = { originFP }
  local head = 1
  canReturn[originFP] = true

  while head &lt;= #q do
    local cur = q[head]; head = head + 1
    for _, prevFP in ipairs(rev[cur] or {}) do
      if not canReturn[prevFP] then
        canReturn[prevFP] = true
        table.insert(q, prevFP)
      end
    end
  end

  -- 4) 收集回不到 origin 的点
  local cannot = {}
  local total = 0
  for fp, node in pairs(nodes) do
    total = total + 1
    if not canReturn[fp] then
      table.insert(cannot, { fp = fp, name = node and node.name or "?" })
    end
  end
  table.sort(cannot, function(a,b) return tostring(a.fp) &lt; tostring(b.fp) end)

  if #cannot == 0 then
    cprint(string.format("✅ 回溯检查：所有点都能回到 origin（%d/%d）。", total, total))
    return {}
  end

  cprint(string.format("❌ 回溯检查：回不到 origin 的点 %d / %d（列出 fp + name）", #cannot, total))

  local shown = 0
  for _, item in ipairs(cannot) do
    shown = shown + 1
    cprint(string.format("   - [%s] %s", tostring(item.fp), tostring(item.name)))
    if shown &gt;= maxList then
      cprint(string.format("   ...(已截断，仅展示前 %d 条，可用 opts.maxList 调大)", maxList))
      break
    end
  end

  return cannot
end

-- ------------------------------------------------------
-- 一键全检
-- ------------------------------------------------------
function map_check.runAll(regionKey)
  cprint("开始检查区域: " .. tostring(regionKey))
  map_check.checkBrokenExits(regionKey)
  map_check.checkFpExitConsistency(regionKey)
  map_check.checkOneWayEdges(regionKey) 
  map_check.checkAliasConflicts(regionKey)
  map_check.checkDuplicateExitTargets(regionKey)
  map_check.checkComponents(regionKey, { showRooms = true, maxList = 25 })
  map_check.checkLowDegreeNodes(regionKey, { maxList = 50 }) 
  map_check.checkShanluLoops(regionKey, { maxList = 20 }) 
  map_check.checkOriginInMainComponent(regionKey) 
  map_check.listUnreachableFromOrigin(regionKey)
  map_check.listCannotReturnToOrigin(regionKey)
  cprint("全部检查完成。")
end
</script>
				<eventHandlerList />
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>区域地图</name>
			<packageName></packageName>
			<script></script>
			<eventHandlerList />
			<ScriptGroup isActive="yes" isFolder="yes">
				<name>江南</name>
				<packageName></packageName>
				<script></script>
				<eventHandlerList />
				<Script isActive="yes" isFolder="no">
					<name>苏州 - sz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["sz"] = {
  region = {
    key  = "sz",      -- 区域代号，用在 goto wx.xxx 里
    name = "苏州",    -- 纯注释/显示用
  },

  mapNodes = {

    ["三清殿|s"] = {
      name = "三清殿",
      exits = {
        ["s"] = "六角亭|e,n,sd,w",
      },
    },

    ["东大街|e,n,nw,s,se,sw"] = {
      name = "东大街",
      exits = {
        ["e"] = "东大街|e,n,nw,s,sw,w",
        ["n"] = "胡同|n,ne,s,w",
        ["nw"] = "沧浪亭|n,s,se,sw",
        ["s"] = "宝和记|n",
        ["se"] = "观前街|nw,se",
        ["sw"] = "宝带桥|n,ne,nw,s",
      },
    },

    ["东大街|e,n,nw,s,sw,w"] = {
      name = "东大街2", -- 去重：原“东大街”
      exits = {
        ["e"] = "东门|e,w",
        ["n"] = "立春堂|s",
        ["nw"] = "胡同|se,w",
        ["s"] = "打铁铺|n",
        ["sw"] = "观前街|ne,sw",
        ["w"] = "东大街|e,n,nw,s,se,sw",
      },
    },

    ["东门|e,w"] = {
      name = "东门",
      exits = {
        ["w"] = "东大街|e,n,nw,s,sw,w",
      },
    },

    ["书场|s"] = {
      name = "书场",
      exits = {
        ["s"] = "西大街|e,n,s,w",
      },
    },

    ["书院|ne"] = {
      name = "书院",
      exits = {
        ["ne"] = "南大街|e,n,ne,nw,s,sw,w",
      },
    },

    ["六角亭|e,n,sd,w"] = {
      name = "六角亭",
      exits = {
        ["e"] = "财神殿|ne,w",
        ["n"] = "三清殿|s",
        ["sd"] = "正山门|nu,out",
        ["w"] = "雷尊殿|e,nw",
      },
    },

    ["兵营|n"] = {
      name = "兵营",
      exits = {
        ["n"] = "西大街|n,ne,nw,s,se,w",
      },
    },

    ["北大街|e,n,s,sw,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "客店|e,u,w",
        ["n"] = "北大街|e,n,s,w",
        ["s"] = "沧浪亭|n,s,se,sw",
        ["sw"] = "戏园子|n,ne",
        ["w"] = "马厩|e,s",
      },
    },

    ["北大街|e,n,s,w"] = {
      name = "北大街2", -- 去重：原“北大街”
      exits = {
        ["e"] = "春在楼|w",
        ["n"] = "北门|n,s",
        ["s"] = "北大街|e,n,s,sw,w",
        ["w"] = "紫金庵|e",
      },
    },

    ["北门|n,s"] = {
      name = "北门",
      exits = {
        ["s"] = "北大街|e,n,s,w",
        ["n"] = "青石官道|n,s,sw",
      },
    },

    ["南大街|e,n,ne,nw,s,sw,w"] = {
      name = "南大街",
      exits = {
        ["e"] = "狮子林|e,ne,w",
        ["n"] = "宝带桥|n,ne,nw,s",
        ["ne"] = "茶馆|sw",
        ["nw"] = "天人馆|se",
        ["s"] = "南大街|e,n,s,w",
        ["sw"] = "书院|ne",
        ["w"] = "聚宝斋|e",
      },
    },

    ["南大街|e,n,s,w"] = {
      name = "南大街2", -- 去重：原“南大街”
      exits = {
        ["e"] = "听雨轩|w",
        ["n"] = "南大街|e,n,ne,nw,s,sw,w",
        ["s"] = "南门|n,s",
        ["w"] = "留园|e,w",
      },
    },

    ["南门|n,s"] = {
      name = "南门",
      exits = {
        ["n"] = "南大街|e,n,s,w",
      },
    },

    ["古木交诃|e,sw"] = {
      name = "古木交诃",
      exits = {
        ["e"] = "荷花厅|e,w",
        ["sw"] = "池塘|ne",
      },
    },

    ["听雨轩|w"] = {
      name = "听雨轩",
      exits = {
        ["w"] = "南大街|e,n,s,w",
      },
    },

    ["天人馆|se"] = {
      name = "天人馆",
      exits = {
        ["se"] = "南大街|e,n,ne,nw,s,sw,w",
      },
    },

    ["宝和记|n"] = {
      name = "宝和记",
      exits = {
        ["n"] = "东大街|e,n,nw,s,se,sw",
      },
    },

    ["宝带桥|n,ne,nw,s"] = {
      name = "宝带桥",
      exits = {
        ["n"] = "沧浪亭|n,s,se,sw",
        ["ne"] = "东大街|e,n,nw,s,se,sw",
        ["nw"] = "西大街|n,ne,nw,s,se,w",
        ["s"] = "南大街|e,n,ne,nw,s,sw,w",
      },
    },

    ["客店|e,u,w"] = {
      name = "客店",
      exits = {
        ["e"] = "计氏马车分行|w",
        ["u"] = "客店二楼|d,enter",
        ["w"] = "北大街|e,n,s,sw,w",
      },
    },

    ["客店二楼|d,enter"] = {
      name = "客店二楼",
      exits = {
        ["d"] = "客店|e,u,w",
        ["enter"] = "客店二楼|out",
      },
    },

    ["客店二楼|out"] = {
      name = "客店二楼2", -- 去重：原“客店二楼”
      exits = {
        ["out"] = "客店二楼|d,enter",
      },
    },

    ["戏园子|n,ne"] = {
      name = "戏园子",
      exits = {
        ["n"] = "马厩|e,s",
        ["ne"] = "北大街|e,n,s,sw,w",
      },
    },

    ["打铁铺|n"] = {
      name = "打铁铺",
      exits = {
        ["n"] = "东大街|e,n,nw,s,sw,w",
      },
    },

    ["揖峰指柏轩|sw"] = {
      name = "揖峰指柏轩",
      exits = {
        ["sw"] = "狮子林|e,ne,w",
      },
    },

    ["擂台前广场|e"] = {
      name = "擂台前广场",
      exits = {
        ["e"] = "胡同|n,ne,s,w",
      },
    },

    ["昌隆镖局|s"] = {
      name = "昌隆镖局",
      exits = {
        ["s"] = "胡同|n,ne,s,w",
      },
    },

    ["春在楼|w"] = {
      name = "春在楼",
      exits = {
        ["w"] = "北大街|e,n,s,w",
      },
    },

    ["杂货铺|n"] = {
      name = "杂货铺",
      exits = {
        ["n"] = "西大街|e,n,s,w",
      },
    },

    ["正山门|nu,out"] = {
      name = "正山门",
      exits = {
        ["nu"] = "六角亭|e,n,sd,w",
        ["out"] = "观前街|enter,w",
      },
    },

    ["池塘|ne"] = {
      name = "池塘",
      exits = {
        ["ne"] = "古木交诃|e,sw",
      },
    },

    ["沧浪亭|n,s,se,sw"] = {
      name = "沧浪亭", 
      exits = {
        ["n"] = "北大街|e,n,s,sw,w",
        ["s"] = "宝带桥|n,ne,nw,s",
        ["se"] = "东大街|e,n,nw,s,se,sw",
        ["sw"] = "西大街|n,ne,nw,s,se,w",
      },
    },

    ["燕誉堂|e,se,w"] = {
      name = "燕誉堂",
      exits = {
        ["e"] = "观前街|enter,w",
        ["se"] = "真趣亭|e,nw",
        ["w"] = "狮子林|e,ne,w",
      },
    },

    ["狮子林|e,ne,w"] = {
      name = "狮子林",
      exits = {
        ["e"] = "燕誉堂|e,se,w",
        ["ne"] = "揖峰指柏轩|sw",
        ["w"] = "南大街|e,n,ne,nw,s,sw,w",
      },
    },

    ["留园|e,w"] = {
      name = "留园",
      exits = {
        ["e"] = "南大街|e,n,s,w",
        ["w"] = "荷花厅|e,w",
      },
    },

    ["真趣亭|e,nw"] = {
      name = "真趣亭",
      exits = {
        ["e"] = "问梅阁|s,w",
        ["nw"] = "燕誉堂|e,se,w",
      },
    },

    ["立春堂|s"] = {
      name = "立春堂",
      exits = {
        ["s"] = "东大街|e,n,nw,s,sw,w",
      },
    },

    ["立雪堂|n"] = {
      name = "立雪堂",
      exits = {
        ["n"] = "问梅阁|s,w",
      },
    },

    ["紫金庵|e"] = {
      name = "紫金庵",
      exits = {
        ["e"] = "北大街|e,n,s,w",
      },
    },

    ["聚宝斋|e"] = {
      name = "聚宝斋",
      exits = {
        ["e"] = "南大街|e,n,ne,nw,s,sw,w",
      },
    },

    -- 胡同：3 个同名节点，编号去重
    ["胡同|e,sw"] = {
      name = "胡同",
      exits = {
        ["e"] = "胡同|se,w",
        ["sw"] = "胡同|n,ne,s,w",
      },
    },

    ["胡同|n,ne,s,w"] = {
      name = "胡同2", -- 去重：原“胡同”
      exits = {
        ["n"] = "昌隆镖局|s",
        ["ne"] = "胡同|e,sw",
        ["s"] = "东大街|e,n,nw,s,se,sw",
        ["w"] = "擂台前广场|e",
      },
    },

    ["胡同|se,w"] = {
      name = "胡同3", -- 去重：原“胡同”
      exits = {
        ["se"] = "东大街|e,n,nw,s,sw,w",
        ["w"] = "胡同|e,sw",
      },
    },

    ["苏州府衙|s"] = {
      name = "苏州府衙",
      exits = {
        ["s"] = "西大街|n,ne,nw,s,se,w",
      },
    },

    ["茶馆|sw"] = {
      name = "茶馆",
      exits = {
        ["sw"] = "南大街|e,n,ne,nw,s,sw,w",
      },
    },

    ["荷花厅|e,w"] = {
      name = "荷花厅",
      exits = {
        ["e"] = "留园|e,w",
        ["w"] = "古木交诃|e,sw",
      },
    },

    -- 西大街：2 个同名节点，编号去重
    ["西大街|e,n,s,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "西大街|n,ne,nw,s,se,w",
        ["n"] = "书场|s",
        ["s"] = "杂货铺|n",
        ["w"] = "西门|e,w",
      },
    },

    ["西大街|n,ne,nw,s,se,w"] = {
      name = "西大街2", -- 去重：原“西大街”
      exits = {
        ["n"] = "苏州府衙|s",
        ["ne"] = "沧浪亭|n,s,se,sw",
        ["nw"] = "运河码头|se",
        ["s"] = "兵营|n",
        ["se"] = "宝带桥|n,ne,nw,s",
        ["w"] = "西大街|e,n,s,w",
      },
    },

    ["西门|e,w"] = {
      name = "西门",
      exits = {
        ["e"] = "西大街|e,n,s,w",
      },
    },

    -- 观前街：3 个同名节点，编号去重
    ["观前街|enter,w"] = {
      name = "观前街",
      exits = {
        ["enter"] = "正山门|nu,out",
        ["w"] = "燕誉堂|e,se,w",
      },
    },

    ["观前街|ne,sw"] = {
      name = "观前街2", -- 去重：原“观前街”
      exits = {
        ["ne"] = "东大街|e,n,nw,s,sw,w",
        ["sw"] = "财神殿|ne,w",
      },
    },

    ["观前街|nw,se"] = {
      name = "观前街3", -- 去重：原“观前街”
      exits = {
        ["nw"] = "东大街|e,n,nw,s,se,sw",
        ["se"] = "雷尊殿|e,nw",
      },
    },

    ["计氏马车分行|w"] = {
      name = "计氏马车分行",
      exits = {
        ["w"] = "客店|e,u,w",
      },
    },

    ["财神殿|ne,w"] = {
      name = "财神殿",
      exits = {
        ["ne"] = "观前街|ne,sw",
        ["w"] = "六角亭|e,n,sd,w",
      },
    },

    ["运河码头|se"] = {
      name = "运河码头",
      exits = {
        ["se"] = "西大街|n,ne,nw,s,se,w",
      },
    },

    ["问梅阁|s,w"] = {
      name = "问梅阁",
      exits = {
        ["s"] = "立雪堂|n",
        ["w"] = "真趣亭|e,nw",
      },
    },

    ["雷尊殿|e,nw"] = {
      name = "雷尊殿",
      exits = {
        ["e"] = "六角亭|e,n,sd,w",
        ["nw"] = "观前街|nw,se",
      },
    },

    ["马厩|e,s"] = {
      name = "马厩",
      exits = {
        ["e"] = "北大街|e,n,s,sw,w",
        ["s"] = "戏园子|n,ne",
      },
    },

    ["二仙亭|n,w"] = {
      name = "二仙亭",
      exits = {
        ["n"] = "白莲池|s",
        ["w"] = "千人石|e,n,nw",
      },
    },

    ["云岩寺塔|e,eu,wu"] = {
      name = "云岩寺塔",
      exits = {
        ["e"] = "头门山|n,w",
        ["eu"] = "试剑石|n,ne,s,wd",
        ["wu"] = "憨憨泉|ed",
      },
    },

    ["千人石|e,n,nw"] = {
      name = "千人石",
      exits = {
        ["e"] = "二仙亭|n,w",
        ["n"] = "试剑石|n,ne,s,wd",
        ["nw"] = "致爽阁|se",
      },
    },

    ["土路|nw,se"] = {
      name = "土路",
      exits = {
        ["se"] = "青石官道1|ne,nw,s",
      },
    },

    ["头门山|n,w"] = {
      name = "头门山",
      exits = {
        ["n"] = "虎丘山|ne,s",
        ["w"] = "云岩寺塔|e,eu,wu",
      },
    },

    ["孙武亭|s"] = {
      name = "孙武亭",
      exits = {
        ["s"] = "真娘墓|n,sw",
      },
    },

    ["憨憨泉|ed"] = {
      name = "憨憨泉",
      exits = {
        ["ed"] = "云岩寺塔|e,eu,wu",
      },
    },

    ["枕石|s"] = {
      name = "枕石",
      exits = {
        ["s"] = "试剑石|n,ne,s,wd",
      },
    },

    ["白莲池|s"] = {
      name = "白莲池",
      exits = {
        ["s"] = "二仙亭|n,w",
      },
    },

    ["真娘墓|n,sw"] = {
      name = "真娘墓",
      exits = {
        ["n"] = "孙武亭|s",
        ["sw"] = "试剑石|n,ne,s,wd",
      },
    },

    ["致爽阁|se"] = {
      name = "致爽阁",
      exits = {
        ["se"] = "千人石|e,n,nw",
      },
    },

    ["虎丘山|ne,s"] = {
      name = "虎丘山",
      exits = {
        ["ne"] = "青石官道|n,s,sw",
        ["s"] = "头门山|n,w",
      },
    },

    ["试剑石|n,ne,s,wd"] = {
      name = "试剑石",
      exits = {
        ["n"] = "枕石|s",
        ["ne"] = "真娘墓|n,sw",
        ["s"] = "千人石|e,n,nw",
        ["wd"] = "云岩寺塔|e,eu,wu",
      },
    },

    -- 青石官道：8 个同名节点，编号去重（保留第一个为“青石官道”）
    ["青石官道|n,s,sw"] = {
      name = "青石官道",
      exits = {
        ["n"] = "青石官道|nw,s",
        ["s"] = "北门|n,s",
        ["sw"] = "虎丘山|ne,s",
      },
    },

    ["青石官道|n,se"] = {
      name = "青石官道2",
      exits = {
        ["n"] = "青石官道|ne,nw,s",
        ["se"] = "青石官道|nw,s",
      },
    },

    ["青石官道|n,sw"] = {
      name = "青石官道3",
      exits = {
        ["n"] = "青石官道1|ne,nw,s",
        ["sw"] = "青石官道|ne,sw",
      },
    },

    ["青石官道|ne,nw,s"] = {
      name = "青石官道4",
      exits = {
        ["ne"] = "青石官道|ne,sw",
        ["s"] = "青石官道|n,se",
      },
    },

    ["青石官道1|ne,nw,s"] = {
      name = "青石官道5",
      exits = {
        ["ne"] = "青石官道1|ne,sw",
        ["nw"] = "土路|nw,se",
        ["s"] = "青石官道|n,sw",
      },
    },

    ["青石官道|ne,sw"] = {
      name = "青石官道6",
      exits = {
        ["ne"] = "青石官道|n,sw",
        ["sw"] = "青石官道|ne,nw,s",
      },
    },

    ["青石官道1|ne,sw"] = {
      name = "青石官道7",
      exits = {
        ["sw"] = "青石官道1|ne,nw,s",
      },
    },

    ["青石官道|nw,s"] = {
      name = "青石官道8",
      exits = {
        ["nw"] = "青石官道|n,se",
        ["s"] = "青石官道|n,s,sw",
      },
    },

  }, -- mapNodes 结束

  mapAliases = {
    ["三清殿"]       = "sqd",
    ["东大街"]       = "ddj",
    ["东大街2"]      = "ddj2",   -- 新增
    ["东门"]         = "dm",
    ["书场"]         = "sc",
    ["书院"]         = "sy",
    ["六角亭"]       = "ljt",
    ["兵营"]         = "by",
    ["北大街"]       = "bdj",
    ["北大街2"]      = "bdj2",   -- 新增
    ["北门"]         = "bm",
    ["南大街"]       = "ndj",
    ["南大街2"]      = "ndj2",   -- 新增
    ["南门"]         = "nm",
    ["古木交诃"]     = "gmjh",
    ["听雨轩"]       = "tyx",
    ["天人馆"]       = "trg",
    ["宝和记"]       = "bhj",
    ["宝带桥"]       = "bdq",
    ["客店"]         = "kd",
    ["客店二楼"]     = "kdel",
    ["客店二楼2"]    = "kdel2",  -- 新增
    ["戏园子"]       = "xyz",
    ["打铁铺"]       = "dtp",
    ["揖峰指柏轩"]   = "yfzbx",
    ["擂台前广场"]   = "ltqgc",
    ["昌隆镖局"]     = "bj",
    ["春在楼"]       = "czl",
    ["杂货铺"]       = "zhp",
    ["正山门"]       = "zsm",
    ["池塘"]         = "ct",
    ["沧浪亭"]       = "clt",
    ["燕誉堂"]       = "yyt",
    ["狮子林"]       = "szl",
    ["留园"]         = "ly",
    ["真趣亭"]       = "zqt",
    ["立春堂"]       = "lct",
    ["立雪堂"]       = "lxt",
    ["紫金庵"]       = "zja",
    ["聚宝斋"]       = "jbz",

    ["胡同"]         = "ht",
    ["胡同2"]        = "ht2",    -- 新增
    ["胡同3"]        = "ht3",    -- 新增

    ["苏州府衙"]     = "szfy",
    ["茶馆"]         = "origin",
    ["荷花厅"]       = "hht",

    ["西大街"]       = "xdj",
    ["西大街2"]      = "xdj2",   -- 新增
    ["西门"]         = "xm",

    ["观前街"]       = "gqj",
    ["观前街2"]      = "gqj2",   -- 新增
    ["观前街3"]      = "gqj3",   -- 新增

    ["计氏马车分行"] = "mch",
    ["财神殿"]       = "csd",
    ["运河码头"]     = "yhmt",
    ["问梅阁"]       = "wmg",
    ["雷尊殿"]       = "lzd",
    ["马厩"]         = "mj",

    ["二仙亭"]       = "ext",
    ["云岩寺塔"]     = "yyst",
    ["千人石"]       = "qrs",
    ["土路"]         = "tl",
    ["头门山"]       = "tms",
    ["孙武亭"]       = "swt",
    ["憨憨泉"]       = "hhq",
    ["枕石"]         = "zs",
    ["白莲池"]       = "blc",
    ["真娘墓"]       = "znm",
    ["致爽阁"]       = "zsg",
    ["虎丘山"]       = "hqs",
    ["试剑石"]       = "sjs",

    ["青石官道"]     = "qsgd",
    ["青石官道2"]    = "qsgd2",  -- 新增
    ["青石官道3"]    = "qsgd3",  -- 新增
    ["青石官道4"]    = "qsgd4",  -- 新增
    ["青石官道5"]    = "qsgd5",  -- 新增
    ["青石官道6"]    = "qsgd6",  -- 新增
    ["青石官道7"]    = "qsgd7",  -- 新增
    ["青石官道8"]    = "qsgd8",  -- 新增
  },
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>镇江 - zhenj</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["zhenj"]= {

  region = {
    key  = "zhenj",      -- 区域代号，用在 goto wx.xxx 里
    name = "镇江",    -- 纯注释/显示用
  },
mapNodes = {
  ["东大街|e,n,s,w"] = {
    name = "东大街",
    exits = {
      ["e"] = "东大街1|e,n,s,w",
      ["n"] = "梦溪园|s,w",
      ["s"] = "奔月居|enter,n",
      ["w"] = "广场|e,n,s,w",
    },
  },
  ["东大街1|e,n,s,w"] = {
    name = "东大街1",
    exits = {
      ["e"] = "青阳门|e,n,s,w",
      ["n"] = "计氏马车分行|s",
      ["s"] = "天月楼|n",
      ["w"] = "东大街|e,n,s,w",
    },
  },
  ["京口渡|e,se,w"] = {
    name = "京口渡",
    exits = {
      ["se"] = "金山|enter,nw,se,u",
    },
  },
  ["厨房|e"] = {
    name = "厨房",
    exits = {
      ["e"] = "正殿|e,n,out,w",
    },
  },
  ["后院|out,s"] = {
    name = "后院",
    exits = {
      ["out"] = "金山|enter,nw,se,u",
      ["s"] = "正殿|e,n,out,w",
    },
  },
  ["正殿|e,n,out,w"] = {
    name = "正殿",
    exits = {
      ["e"] = "寝室|w",
      ["n"] = "后院|out,s",
      ["w"] = "厨房|e",
      ["out"] = "观门|enter,s"
    },
  },
  ["寝室|w"] = {
    name = "寝室",
    exits = {
      ["w"] = "正殿|e,n,out,w",
    },
  },  
  ["观门|enter,s"] = {
    name = "观门",
    exits = {
      ["enter"] = "正殿|e,n,out,w",
      ["s"] = "土路|n,nw,se",
    },
  },

  -- 土路(1)
  ["土路|n,nw,se"] = {
    name = "土路",
    exits = {
      ["n"] = "观门|enter,s",
      ["se"] = "土路|e,nw,sw",
    },
  },

  ["金山|enter,nw,se,u"] = {
    name = "金山",
    exits = {
      ["enter"] = "后院|out,s",
      ["nw"] = "京口渡|e,se,w",
      ["se"] = "土路|e,nw,s",
      ["u"] = "金山寺|d",
    },
  },

  -- 土路(2)
  ["土路|e,nw,s"] = {
    name = "土路2",
    exits = {
      ["e"] = "土路3|e,w",
      ["nw"] = "金山|enter,nw,se,u",
      ["s"] = "土路|n,s",
    },
  },

  ["金山寺|d"] = {
    name = "金山寺",
    exits = {
      ["d"] = "金山|enter,nw,se,u",
    },
  },
  ["宝华山|ne,sw"] = {
    name = "宝华山",
    exits = {
      ["ne"] = "土路|e,nw,sw",
    },
  },

  ["客店内室|out"] = {
    name = "客店内室",
    exits = {
      ["out"] = "奔月居|enter,n",
    },
  },
  ["青阳门|e,n,s,w"] = {
    name = "青阳门",
    exits = {
      ["e"] = "土路|se,w",
      ["n"] = "土路3|n,s",
      ["s"] = "土路2|n,s",
      ["w"] = "东大街1|e,n,s,w",
    },
  },

  -- 土路(3)
  ["土路|se,w"] = {
    name = "土路3",
    exits = {
      ["se"] = "土路|nw,se",
      ["w"] = "青阳门|e,n,s,w",
    },
  },

  -- 土路(4)
  ["土路|nw,se"] = {
    name = "土路4",
    exits = {
      ["nw"] = "土路|se,w",
    },
  },

  ["奔月居|enter,n"] = {
    name = "奔月居",
    exits = {
      ["enter"] = "客店内室|out",
      ["n"] = "东大街|e,n,s,w",
    },
  },

  ["甘露寺|d"] = {
    name = "甘露寺",
    exits = {
      ["d"] = "北面山|ne,sd,u",
    },
  },
  ["北面山|ne,sd,u"] = {
    name = "北面山",
    exits = {
      ["sd"] = "定波门|e,nu,s,w",
      ["u"] = "甘露寺|d",
    },
  },
  ["定波门|e,nu,s,w"] = {
    name = "定波门",
    exits = {
      ["e"] = "土路2|e,w",
      ["nu"] = "北面山|ne,sd,u",
      ["s"] = "北大街1|e,n,s",
      ["w"] = "土路3|e,w",
    },
  },
  ["飞龙镖局|w"] = {
    name = "飞龙镖局",
    exits = {
      ["w"] = "北大街1|e,n,s",
    },
  },
  ["丹阳|nw,s"] = {
    name = "丹阳",
    exits = {
      ["nw"] = "南水门外|n,s,se",
    },
  },
  ["北大街|e,n,s"] = {
    name = "北大街",
    exits = {
      ["e"] = "梦溪园|s,w",
      ["n"] = "北大街1|e,n,s",
      ["s"] = "广场|e,n,s,w",
    },
  },
  ["北大街1|e,n,s"] = {
    name = "北大街1",
    exits = {
      ["e"] = "飞龙镖局|w",
      ["n"] = "定波门|e,nu,s,w",
      ["s"] = "北大街|e,n,s",
    },
  },
  ["南大街|e,n,s,w"] = {
    name = "南大街",
    exits = {
      ["e"] = "当铺|w",
      ["n"] = "广场|e,n,s,w",
      ["s"] = "南水门|e,n,s,w",
      ["w"] = "月记票号|e",
    },
  },
  ["南水门|e,n,s,w"] = {
    name = "南水门",
    exits = {
      ["e"] = "土路|e,w",
      ["n"] = "南大街|e,n,s,w",
      ["s"] = "南水门外|n,s,se",
      ["w"] = "土路1|e,w",
    },
  },
  ["南水门外|n,s,se"] = {
    name = "南水门外",
    exits = {
      ["n"] = "南水门|e,n,s,w",
      ["s"] = "鸡笼山下|n,s",
      ["se"] = "丹阳|nw,s",
    },
  },

  -- 土路(5)
  ["土路|e,nw,sw"] = {
    name = "土路5",
    exits = {
      ["e"] = "登云门|e,n,s,w",
      ["nw"] = "土路|n,nw,se",
      ["sw"] = "宝华山|ne,sw",
    },
  },

  -- 土路(6)
  ["土路|e,w"] = {
    name = "土路6",
    exits = {
      ["e"] = "南水门|e,n,s,w",
      ["w"] = "土路|e,n",
    },
  },

  -- 土路(7)
  ["土路1|e,w"] = {
    name = "土路7",
    exits = {
      ["e"] = "土路|n,w",
      ["w"] = "南水门|e,n,s,w",
    },
  },

  -- 土路(8)
  ["土路2|e,w"] = {
    name = "土路8",
    exits = {
      ["e"] = "土路|s,w",
      ["w"] = "定波门|e,nu,s,w",
    },
  },

  -- 土路(9)
  ["土路3|e,w"] = {
    name = "土路9",
    exits = {
      ["e"] = "定波门|e,nu,s,w",
      ["w"] = "土路|e,nw,s",
    },
  },

  -- 土路(10)
  ["土路|n,s"] = {
    name = "土路10",
    exits = {
      ["n"] = "土路|e,nw,s",
      ["s"] = "登云门|e,n,s,w"
    },
  },

  -- 土路(11)
  ["土路|e,n"] = {
    name = "土路11",
    exits = {
      ["e"] = "土路|e,w",
      ["n"] = "土路1|n,s"
    },
  },

  -- 土路(12)
  ["土路|n,w"] = {
    name = "土路12",
    exits = {
      ["n"] = "土路2|n,s",
      ["w"] = "土路1|e,w"
    },
  },

  -- 土路(13)
  ["土路|s,w"] = {
    name = "土路13",
    exits = {
      ["s"] = "土路3|n,s",
      ["w"] = "土路2|e,w"
    },
  },

  -- 土路(14)
  ["土路1|n,s"] = {
    name = "土路14",
    exits = {
      ["n"] = "登云门|e,n,s,w",
      ["s"] = "土路|e,n"
    },
  },

  -- 土路(15)
  ["土路2|n,s"] = {
    name = "土路15",
    exits = {
      ["n"] = "青阳门|e,n,s,w",
      ["s"] = "土路|n,w",
    },
  },

  -- 土路(16)
  ["土路3|n,s"] = {
    name = "土路16",
    exits = {
      ["n"] = "土路|s,w",
      ["s"] = "青阳门|e,n,s,w",
    },
  },

  ["天月楼|n"] = {
    name = "天月楼",
    exits = {
      ["n"] = "东大街1|e,n,s,w",
    },
  },
  ["将军府|n"] = {
    name = "将军府",
    exits = {
      ["n"] = "西大街|e,s,w",
    },
  },
  ["广场|e,n,s,w"] = {
    name = "广场",
    exits = {
      ["e"] = "东大街|e,n,s,w",
      ["n"] = "北大街|e,n,s",
      ["s"] = "南大街|e,n,s,w",
      ["w"] = "西大街|e,s,w",
    },
  },
  ["府衙|n"] = {
    name = "府衙",
    exits = {
      ["n"] = "西大街|e,n,s,w",
    },
  },
  ["当铺|w"] = {
    name = "当铺",
    exits = {
      ["w"] = "南大街|e,n,s,w",
    },
  },
  ["月记票号|e"] = {
    name = "月记票号",
    exits = {
      ["e"] = "南大街|e,n,s,w",
    },
  },
  ["梦溪园|s,w"] = {
    name = "梦溪园",
    exits = {
      ["s"] = "东大街|e,n,s,w",
      ["w"] = "北大街|e,n,s",
    },
  },
  ["登云门|e,n,s,w"] = {
    name = "登云门",
    exits = {
      ["e"] = "西大街|e,n,s,w",
      ["n"] = "土路|n,s",
      ["s"] = "土路1|n,s",
      ["w"] = "土路|e,nw,sw",
    },
  },
  ["藩库|e,n,s"] = {
    name = "藩库",
    exits = {
      ["s"] = "西大街|e,n,s,w",
    },
  },

  -- 西大街(1)
  ["西大街|e,n,s,w"] = {
    name = "西大街",
    exits = {
      ["e"] = "西大街|e,s,w",
      ["n"] = "藩库|e,n,s",
      ["s"] = "府衙|n",
      ["w"] = "登云门|e,n,s,w",
    },
  },

  -- 西大街(2)
  ["西大街|e,s,w"] = {
    name = "西大街2",
    exits = {
      ["e"] = "广场|e,n,s,w",
      ["s"] = "将军府|n",
      ["w"] = "西大街|e,n,s,w",
    },
  },

  ["计氏马车分行|s"] = {
    name = "计氏马车分行",
    exits = {
      ["s"] = "东大街1|e,n,s,w",
    },
  },
  ["鸡笼山下|n,s"] = {
    name = "鸡笼山下",
    exits = {
      ["n"] = "南水门外|n,s,se",
    },
  },
}
}

mapper.maps["zhenj"].mapAliases = {

  -- ===== 城内主干 =====
  ["广场"]     = "origin",  -- 你如果想换原点，改这里即可
  ["东大街"]   = "ddj",
  ["东大街1"]  = "ddj1",
  ["北大街"]   = "bdj",
  ["北大街1"]  = "bdj1",
  ["南大街"]   = "ndj",
  ["西大街"]   = "xdj",
  ["西大街2"]  = "xdj2",

  -- ===== 城门/关口 =====
  ["青阳门"]   = "qym",
  ["南水门"]   = "nsm",
  ["南水门外"] = "nsmw",
  ["登云门"]   = "dym",
  ["定波门"]   = "dbm",

  -- ===== 城内建筑/店铺 =====
  ["奔月居"]       = "byj",
  ["客店内室"]     = "kdns",
  ["天月楼"]       = "tyl",
  ["计氏马车分行"] = "mch",
  ["飞龙镖局"]     = "flbj",
  ["当铺"]         = "dp",
  ["月记票号"]     = "yjph",
  ["府衙"]         = "fy",
  ["藩库"]         = "fk",
  ["将军府"]       = "jjf",
  ["梦溪园"]       = "mxy",

  -- ===== 城外/地标 =====
  ["鸡笼山下"] = "jlsx",
  ["丹阳"]     = "dy",

  -- ===== 金山线 =====
  ["京口渡"] = "jkd",
  ["金山"]   = "js",
  ["金山寺"] = "jss",
  ["观门"]   = "gm",
  ["正殿"]   = "zd",
  ["后院"]   = "hy",
  ["厨房"]   = "cf",
  ["寝室"]   = "qs",

  -- ===== 甘露寺线 =====
  ["北面山"] = "bms",
  ["甘露寺"] = "gls",

  -- ===== 宝华山线 =====
  ["宝华山"] = "bhs",

  -- ===== 通名（多 fp）=====
  ["土路"]    = "tl",
  ["土路2"]   = "tl2",
  ["土路3"]   = "tl3",
  ["土路4"]   = "tl4",
  ["土路5"]   = "tl5",
  ["土路6"]   = "tl6",
  ["土路7"]   = "tl7",
  ["土路8"]   = "tl8",
  ["土路9"]   = "tl9",
  ["土路10"]  = "tl10",
  ["土路11"]  = "tl11",
  ["土路12"]  = "tl12",
  ["土路13"]  = "tl13",
  ["土路14"]  = "tl14",
  ["土路15"]  = "tl15",
  ["土路16"]  = "tl16",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>嘉兴 - jx</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["jx"] = {

  region = {
    key  = "jx",      -- 区域代号，用在 goto wx.xxx 里
    name = "嘉兴",    -- 纯注释/显示用
  },
mapNodes = {
  ["乡间小径|ne,sw,w"] = {
    name = "乡间小径",
    exits = {
      ["ne"] = "嘉兴南门|e,n,s,sw",
      ["sw"] = "树林|e,ne,s",
      ["w"] = "河岸|e,nw",
    },
  },
  ["后院|n"] = {
    name = "后院",
    exits = {
      ["n"] = "大厅|out,s",
    },
  },
  ["嘉兴南湖|e,n,nd,s,se,w"] = {
    name = "嘉兴南湖",
    exits = {
      ["e"] = "钱塘江口|w",
      ["n"] = "嘉兴钱庄|s",
      ["nd"] = "无名谷底|e,nu,su,w",
      ["s"] = "铁枪庙|n,s,w",
      ["se"] = "嘉兴南湖|e,nw,s",
      ["w"] = "嘉兴城|e,n,nw,s,w",
    },
  },
  ["嘉兴南湖|e,nw,s"] = {
    name = "嘉兴南湖",
    exits = {
      ["e"] = "秀水客栈|enter,w",
      ["nw"] = "嘉兴南湖|e,n,nd,s,se,w",
      ["s"] = "烟雨楼|n,u",
    },
  },
  ["嘉兴南门|e,n,s,sw"] = {
    name = "嘉兴南门",
    exits = {
      ["e"] = "铁枪庙|n,s,w",
      ["n"] = "嘉兴城|e,n,nw,s,w",
      ["s"] = "城南官道|n,se",
      ["sw"] = "乡间小径|ne,sw,w",
    },
  },
  ["嘉兴城|e,n,nw,s,w"] = {
    name = "嘉兴城",
    exits = {
      ["e"] = "嘉兴南湖|e,n,nd,s,se,w",
      ["n"] = "青石官道|n,s",
      ["nw"] = "落帆亭|se",
      ["s"] = "嘉兴南门|e,n,s,sw",
      ["w"] = "山路|e,nu",
    },
  },
  ["嘉兴钱庄|s"] = {
    name = "嘉兴钱庄",
    exits = {
      ["s"] = "嘉兴南湖|e,n,nd,s,se,w",
    },
  },
  ["坟墓|w"] = {
    name = "坟墓",
    exits = {
      ["w"] = "树林|e,ne,s",
    },
  },
  ["城南官道|n,se"] = {
    name = "城南官道",
    exits = {
      ["n"] = "嘉兴南门|e,n,s,sw",
      ["se"] = "官道|nw,s",
    },
  },
  ["大厅|out,s"] = {
    name = "大厅",
    exits = {
      ["out"] = "天井|enter,out",
      ["s"] = "后院|n",
    },
  },
  ["天井|enter,out"] = {
    name = "天井",
    exits = {
      ["enter"] = "大厅|out,s",
      ["out"] = "陆家庄|enter,n",
    },
  },
  ["太湖码头|se"] = {
    name = "太湖码头",
    exits = {
      ["se"] = "河岸|e,nw",
    },
  },
  ["太湖边|nw,se"] = {
    name = "太湖边",
    exits = {
      ["se"] = "山路|nw,sd",
    },
  },
  ["官道|n,s"] = {
    name = "官道",
    exits = {
      ["n"] = "官道|nw,s",
      ["s"] = "盐官县北门|n,s",
    },
  },
  ["官道|nw,s"] = {
    name = "官道",
    exits = {
      ["nw"] = "城南官道|n,se",
      ["s"] = "官道|n,s",
    },
  },
  ["宴客厅门厅|enter,out"] = {
    name = "宴客厅门厅",
    exits = {
      ["out"] = "烟雨楼二楼|d,enter",
    },
  },
  ["山路|e,nu"] = {
    name = "山路",
    exits = {
      ["e"] = "嘉兴城|e,n,nw,s,w",
      ["nu"] = "山路|nw,sd",
    },
  },
  ["山路|nw,sd"] = {
    name = "山路",
    exits = {
      ["nw"] = "太湖边|nw,se",
      ["sd"] = "山路|e,nu",
    },
  },
  ["无名谷底|e,nu,su,w"] = {
    name = "无名谷底",
    exits = {
      ["e"] = "荒谷|w",
      ["ask chou diao about 独孤求败"] = "杂草森林|nu,sd",
      ["su"] = "嘉兴南湖|e,n,nd,s,se,w",
      ["w"] = "蛇窟|e",
    },
  },
  ["杂草森林|nu,sd"] = {
  name = "杂草森林",
  exits = {
    ["nu"] = "虎溪|sd,se",
    ["sd"] = "无名谷底|e,nu,su,w",
  },
},
["虎溪|sd,se"] = {
  name = "虎溪",
  exits = {
    ["sd"] = "杂草森林|nu,sd",
    ["se"] = "挂剑祠|nw",
  },
},
["挂剑祠|nw"] = {
  name = "挂剑祠",
  exits = {
    ["nw"] = "虎溪|sd,se",
  },
},
  ["树林|e,ne,s"] = {
    name = "树林",
    exits = {
      ["e"] = "坟墓|w",
      ["ne"] = "乡间小径|ne,sw,w",
      ["s"] = "陆家庄|enter,n",
    },
  },
  ["河岸|e,nw"] = {
    name = "河岸",
    exits = {
      ["e"] = "乡间小径|ne,sw,w",
      ["nw"] = "太湖码头|se",
    },
  },
  ["灵塔|e"] = {
    name = "灵塔",
    exits = {
      ["e"] = "盐官镇|eu,ne,s,sw,w",
    },
  },
  ["烟雨楼|n,u"] = {
    name = "烟雨楼",
    exits = {
      ["n"] = "嘉兴南湖|e,nw,s",
      ["u"] = "烟雨楼二楼|d,enter",
    },
  },
  ["烟雨楼二楼|d,enter"] = {
    name = "烟雨楼二楼",
    exits = {
      ["d"] = "烟雨楼|n,u",
      ["enter"] = "宴客厅门厅|enter,out",
    },
  },
  ["盐官县北门|n,s"] = {
    name = "盐官县北门",
    exits = {
      ["n"] = "官道|n,s",
      ["s"] = "盐官县城|n,sw",
    },
  },
  ["盐官县城|n,sw"] = {
    name = "盐官县城",
    exits = {
      ["n"] = "盐官县北门|n,s",
      ["sw"] = "盐官镇|eu,ne,s,sw,w",
    },
  },
  ["盐官镇|eu,ne,s,sw,w"] = {
    name = "盐官镇",
    exits = {
      ["eu"] = "观潮台|se,wd",
      ["ne"] = "盐官县城|n,sw",
      ["s"] = "鱼鳞石塘|e,n",
      ["sw"] = "青石官道|e,ne,w",
      ["w"] = "灵塔|e",
    },
  },
  ["秀水客栈|enter,w"] = {
    name = "秀水客栈",
    exits = {
      ["enter"] = "里间|out",
      ["w"] = "嘉兴南湖|e,nw,s",
    },
  },
  ["荒谷|w"] = {
    name = "荒谷",
    exits = {
      ["w"] = "无名谷底|e,nu,su,w",
    },
  },
  ["落帆亭|se"] = {
    name = "落帆亭",
    exits = {
      ["se"] = "嘉兴城|e,n,nw,s,w",
    },
  },
  ["蛇窟|e"] = {
    name = "蛇窟",
    exits = {
      ["e"] = "无名谷底|e,nu,su,w",
    },
  },
  ["观潮台|se,wd"] = {
    name = "观潮台",
    exits = {
      ["se"] = "鱼鳞石塘|nw,w",
      ["wd"] = "盐官镇|eu,ne,s,sw,w",
    },
  },
  ["计氏马车分行|n"] = {
    name = "计氏马车分行",
    exits = {
      ["n"] = "铁枪庙|n,s,w",
    },
  },
  ["里间|out"] = {
    name = "里间",
    exits = {
      ["out"] = "秀水客栈|enter,w",
    },
  },
  ["钱塘江口|w"] = {
    name = "钱塘江口",
    exits = {
      ["w"] = "嘉兴南湖|e,n,nd,s,se,w",
    },
  },
  ["铁枪庙|n,s,w"] = {
    name = "铁枪庙",
    exits = {
      ["n"] = "嘉兴南湖|e,n,nd,s,se,w",
      ["s"] = "计氏马车分行|n",
      ["w"] = "嘉兴南门|e,n,s,sw",
    },
  },
  ["陆家庄|enter,n"] = {
    name = "陆家庄",
    exits = {
      ["enter"] = "天井|enter,out",
      ["n"] = "树林|e,ne,s",
    },
  },
  ["青石官道|e,ne,w"] = {
    name = "青石官道",
    exits = {
      ["ne"] = "盐官镇|eu,ne,s,sw,w",
    },
  },
  ["青石官道|n,s"] = {
    name = "青石官道",
    exits = {
      ["s"] = "嘉兴城|e,n,nw,s,w",
    },
  },
  ["鱼鳞石塘|e,n"] = {
    name = "鱼鳞石塘",
    exits = {
      ["e"] = "鱼鳞石塘|nw,w",
      ["n"] = "盐官镇|eu,ne,s,sw,w",
    },
  },
  ["鱼鳞石塘|nw,w"] = {
    name = "鱼鳞石塘",
    exits = {
      ["nw"] = "观潮台|se,wd",
      ["w"] = "鱼鳞石塘|e,n",
    },
  },
}
}

mapper.maps["jx"].mapAliases = {
  ["乡间小径"]       = "xjxj",
  ["后院"]           = "hy",
  ["嘉兴南湖"]       = "jxnh",
  ["嘉兴南门"]       = "jxnm",
  ["嘉兴城"]         = "origin",
  ["嘉兴钱庄"]       = "jxqz",
  ["坟墓"]           = "fm",
  ["城南官道"]       = "cngd",
  ["大厅"]           = "dt",
  ["天井"]           = "tj",
  ["太湖码头"]       = "thmt",
  ["太湖边"]         = "thb",

  ["官道"]           = "gd",
  ["宴客厅门厅"]     = "yktmt",
  ["山路"]           = "sl",
  ["无名谷底"]       = "wmgd",
  ["树林"]           = "slin",
  ["河岸"]           = "ha",
  ["灵塔"]           = "lt",
  ["烟雨楼"]         = "yyl",
  ["烟雨楼二楼"]     = "yylel",

  ["盐官县北门"]     = "ygxbm",
  ["盐官县城"]       = "ygxc",
  ["盐官镇"]         = "ygz",
  ["秀水客栈"]       = "xskz",
  ["荒谷"]           = "hg",
  ["落帆亭"]         = "lft",
  ["蛇窟"]           = "sk",
  ["观潮台"]         = "gct",

  ["计氏马车分行"]   = "mch",
  ["里间"]           = "lj",
  ["钱塘江口"]       = "qtjk",
  ["铁枪庙"]         = "tqm",
  ["陆家庄"]         = "ljz",
  ["青石官道"]       = "qsgd",
  ["鱼鳞石塘"]       = "ylst",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>上饶 - sr</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["sr"]= {

  region = {
    key  = "sr",      -- 区域代号，用在 goto wx.xxx 里
    name = "上饶",    -- 纯注释/显示用
  },
mapNodes = {
  ["东大街|e,n,s,w"] = {
    name = "东大街",
    exits = {
      ["e"] = "东门|e,n,s,w",
      ["n"] = "县衙大门|enter,s",
      ["s"] = "龙虎镖局|n,w",
      ["w"] = "中央广场|e,n,nw,s,sw",
    },
  },
  ["东门|e,n,s,w"] = {
    name = "东门",
    exits = {
      ["e"] = "城东小路|ne,w",
      ["w"] = "东大街|e,n,s,w",
    },
  },
  ["中央广场|e,n,nw,s,sw"] = {
    name = "中央广场",
    exits = {
      ["e"] = "东大街|e,n,s,w",
      ["n"] = "北大街|n,s,w",
      ["nw"] = "钱庄|n,s,se,w",
      ["s"] = "南大街|e,n,s,sw",
      ["sw"] = "酒馆|n,ne,s,w",
    },
  },
  ["北大街|n,s,w"] = {
    name = "北大街",
    exits = {
      ["n"] = "北门|e,s,w",
      ["s"] = "中央广场|e,n,nw,s,sw",
      ["w"] = "西大街|e,n,s,w",
    },
  },
  ["北门|e,s,w"] = {
    name = "北门",
    exits = {
      ["s"] = "北大街|n,s,w",
    },
  },

  -- 南大街（同名 3 个）=&gt; 编号到 name 字段：南大街1/2/3
  ["南大街|e,n,s,sw"] = {
    name = "南大街1",
    exits = {
      ["e"] = "龙虎镖局|n,w",
      ["n"] = "中央广场|e,n,nw,s,sw",
      ["s"] = "南大街|e,n,s,w",
      ["sw"] = "杂货铺|n,ne,s,w",
    },
  },
  ["南大街|e,n,s,w"] = {
    name = "南大街2",
    exits = {
      ["e"] = "南大街|e,n,w",
      ["n"] = "南大街|e,n,s,sw",
      ["s"] = "南门|e,n,se,w",
      ["w"] = "当铺|e,n,w",
    },
  },
  ["南大街|e,n,w"] = {
    name = "南大街3",
    exits = {
      ["e"] = "茶山寺|enter,w",
      ["n"] = "药铺|s",
      ["w"] = "南大街|e,n,s,w",
    },
  },

  ["南门|e,n,se,w"] = {
    name = "南门",
    exits = {
      ["n"] = "南大街|e,n,s,w",
      ["se"] = "横山镇|e,nw",
    },
  },
  ["县衙大门|enter,s"] = {
    name = "县衙大门",
    exits = {
      ["enter"] = "大堂|n,out",
      ["s"] = "东大街|e,n,s,w",
    },
  },
  ["后堂|s"] = {
    name = "后堂",
    exits = {
      ["s"] = "大堂|n,out",
    },
  },
  ["城东小路|ne,w"] = {
    name = "城东小路",
    exits = {
      ["ne"] = "武安山|ne,nu,sw",
      ["w"] = "东门|e,n,s,w",
    },
  },
  ["大堂|n,out"] = {
    name = "大堂",
    exits = {
      ["n"] = "后堂|s",
      ["out"] = "县衙大门|enter,s",
    },
  },
  ["客栈|s,u"] = {
    name = "客栈",
    exits = {
      ["s"] = "西大街|e,n,s,w",
      ["u"] = "客栈二楼|d",
    },
  },
  ["客栈二楼|d"] = {
    name = "客栈二楼",
    exits = {
      ["d"] = "客栈|s,u",
    },
  },

  -- 山路（同名 3 个）=&gt; 山路1/2/3（只改 name）
  ["山路|eu,sd"] = {
    name = "山路1",
    exits = {
      ["sd"] = "廿八铺|nu,w",
    },
  },

  ["廿八铺|nu,w"] = {
    name = "廿八铺",
    exits = {
      ["nu"] = "山路|eu,sd",
      ["w"] = "横山镇|e,nw",
    },
  },
  ["当铺|e,n,w"] = {
    name = "当铺",
    exits = {
      ["e"] = "南大街|e,n,s,w",
      ["n"] = "杂货铺|n,ne,s,w",
      ["w"] = "老巷|e,n",
    },
  },
  ["杂货铺|n,ne,s,w"] = {
    name = "杂货铺",
    exits = {
      ["n"] = "酒馆|n,ne,s,w",
      ["ne"] = "南大街|e,n,s,sw",
      ["s"] = "当铺|e,n,w",
      ["w"] = "老巷3|e,n,s",
    },
  },
  ["横山镇|e,nw"] = {
    name = "横山镇",
    exits = {
      ["e"] = "廿八铺|nu,w",
      ["nw"] = "南门|e,n,se,w",
    },
  },
  ["武安山|ne,nu,sw"] = {
    name = "武安山",
    exits = {
      ["ne"] = "玉山县|ne,sw",
      ["nu"] = "阎立本墓|sd",
      ["sw"] = "城东小路|ne,w",
    },
  },
  ["玉山县|ne,sw"] = {
    name = "玉山县",
    exits = {
      ["sw"] = "武安山|ne,nu,sw",
    },
  },

  -- 老巷：有 2 个 name="老巷"（key不同），但同时还存在 老巷1/2/3 这些独立 name
  -- 为避免撞名，两个“老巷”改为 老巷4 / 老巷5（只改 name）
  ["老巷|e,s,w"] = {
    name = "老巷4",
    exits = {
      ["e"] = "西大街|e,n,s,w",
      ["w"] = "西门|e,n,s,w",
      ["s"] = "老巷1|e,n,s",
    },
  },
  ["老巷1|e,n,s"] = {
    name = "老巷1",
    exits = {
      ["e"] = "钱庄|n,s,se,w",
      ["n"] = "老巷|e,s,w",
      ["s"] = "老巷2|e,n,s",
    },
  },
  ["老巷2|e,n,s"] = {
    name = "老巷2",
    exits = {
      ["e"] = "酒馆|n,ne,s,w",
      ["n"] = "老巷1|e,n,s",
      ["s"] = "老巷3|e,n,s",
    },
  },
  ["老巷3|e,n,s"] = {
    name = "老巷3",
    exits = {
      ["e"] = "杂货铺|n,ne,s,w",
      ["n"] = "老巷2|e,n,s",
      ["s"] = "老巷|e,n",
    },
  },
  ["老巷|e,n"] = {
    name = "老巷5",
    exits = {
      ["e"] = "当铺|e,n,w",
      ["n"] = "老巷3|e,n,s",
    },
  },

  ["茶山寺|enter,w"] = {
    name = "茶山寺",
    exits = {
      ["enter"] = "陆羽泉|out",
      ["w"] = "南大街|e,n,w",
    },
  },
  ["药铺|s"] = {
    name = "药铺",
    exits = {
      ["s"] = "南大街|e,n,w",
    },
  },
  ["西大街|e,n,s,w"] = {
    name = "西大街",
    exits = {
      ["e"] = "北大街|n,s,w",
      ["n"] = "客栈|s,u",
      ["s"] = "钱庄|n,s,se,w",
      ["w"] = "老巷|e,s,w",
    },
  },
  ["酒馆|n,ne,s,w"] = {
    name = "酒馆",
    exits = {
      ["n"] = "钱庄|n,s,se,w",
      ["ne"] = "中央广场|e,n,nw,s,sw",
      ["s"] = "杂货铺|n,ne,s,w",
      ["w"] = "老巷2|e,n,s",
    },
  },
  ["钱庄|n,s,se,w"] = {
    name = "钱庄",
    exits = {
      ["n"] = "西大街|e,n,s,w",
      ["s"] = "酒馆|n,ne,s,w",
      ["se"] = "中央广场|e,n,nw,s,sw",
      ["w"] = "老巷1|e,n,s",
    },
  },
  ["阎立本墓|sd"] = {
    name = "阎立本墓",
    exits = {
      ["sd"] = "武安山|ne,nu,sw",
    },
  },
  ["陆羽泉|out"] = {
    name = "陆羽泉",
    exits = {
      ["out"] = "茶山寺|enter,w",
    },
  },
  ["龙虎镖局|n,w"] = {
    name = "龙虎镖局",
    exits = {
      ["n"] = "东大街|e,n,s,w",
      ["w"] = "南大街|e,n,s,sw",
    },
  },

  ["东岳庙|enter,nd"] = {
    name = "东岳庙",
    exits = {
      ["enter"] = "正殿|out,s",
      ["nd"] = "山路|n,su",
    },
  },
  ["南岩寺|enter,se,w"] = {
    name = "南岩寺",
    exits = {
      ["enter"] = "寺内|out",
      ["se"] = "铅山县|ne,nw,s,sw",
      ["w"] = "南岩石龛|e,nw",
    },
  },
  ["南岩石龛|e,nw"] = {
    name = "南岩石龛",
    exits = {
      ["e"] = "南岩寺|enter,se,w",
      ["nw"] = "鄱阳县|e,n,se,w",
    },
  },

  -- 土路（同名 3 个）=&gt; 土路1/2/3（只改 name）
  ["土路|eu,nw,s"] = {
    name = "土路1",
    exits = {
      ["eu"] = "芝山|wd",
      ["nw"] = "青石官道|ne,se,w",
      ["s"] = "鄱阳县|e,n,se,w",
    },
  },
  ["土路|n,sw"] = {
    name = "土路",
    exits = {
      ["n"] = "枫岭头镇|eu,nw,s",
      ["sw"] = "铅山县|ne,nw,s,sw",
    },
  },
  ["土路|nu,sw"] = {
    name = "土路3",
    exits = {
      ["nu"] = "狮子岭|ne,sd",
      ["sw"] = "泸溪河东岸|ne,s",
    },
  },

  ["寺内|out"] = {
    name = "寺内",
    exits = {
      ["out"] = "南岩寺|enter,se,w",
    },
  },

  ["山路|e,wu"] = {
    name = "山路2",
    exits = {
      ["e"] = "西门|e,n,s,w",
      ["wu"] = "琅琊山|ed,s,wd",
    },
  },
  ["山路|n,su"] = {
    name = "山路3",
    exits = {
      ["n"] = "琅琊山|ed,s,wd",
      ["su"] = "东岳庙|enter,nd",
    },
  },

  ["斜坡|e,nd"] = {
    name = "斜坡",
    exits = {
      ["nd"] = "葛仙山|eu,nd,su",
    },
  },
  ["月岩洞|se"] = {
    name = "月岩洞",
    exits = {
      ["se"] = "枫岭头镇|eu,nw,s",
    },
  },
  ["枫岭头镇|eu,nw,s"] = {
    name = "枫岭头镇",
    exits = {
      ["eu"] = "琅琊山|ed,s,wd",
      ["nw"] = "月岩洞|se",
      ["s"] = "土路|n,sw",
    },
  },
  ["正殿|out,s"] = {
    name = "正殿",
    exits = {
      ["out"] = "东岳庙|enter,nd",
      ["s"] = "睢阳祠|n",
    },
  },
  ["泸溪河东岸|ne,s"] = {
    name = "泸溪河东岸",
    exits = {
      ["ne"] = "土路|nu,sw",
    },
  },
  ["狮子岭|ne,sd"] = {
    name = "狮子岭",
    exits = {
      ["ne"] = "田间小路|ne,sw",
      ["sd"] = "土路|nu,sw",
    },
  },
  ["琅琊山|ed,s,wd"] = {
    name = "琅琊山",
    exits = {
      ["ed"] = "山路|e,wu",
      ["s"] = "山路|n,su",
      ["wd"] = "枫岭头镇|eu,nw,s",
    },
  },
  ["田间小路|ne,sw"] = {
    name = "田间小路",
    exits = {
      ["ne"] = "铅山县|ne,nw,s,sw",
      ["sw"] = "狮子岭|ne,sd",
    },
  },
  ["睢阳祠|n"] = {
    name = "睢阳祠",
    exits = {
      ["n"] = "正殿|out,s",
    },
  },
  ["芝山|wd"] = {
    name = "芝山",
    exits = {
      ["wd"] = "土路|eu,nw,s",
    },
  },
  ["葛仙山|eu,nd,su"] = {
    name = "葛仙山",
    exits = {
      ["eu"] = "试剑石|wd",
      ["nd"] = "鹅湖书院|n,su",
      ["su"] = "斜坡|e,nd",
    },
  },
  ["西门|e,n,s,w"] = {
    name = "西门",
    exits = {
      ["e"] = "老巷|e,s,w",
      ["w"] = "山路|e,wu",
    },
  },
  ["试剑石|wd"] = {
    name = "试剑石",
    exits = {
      ["wd"] = "葛仙山|eu,nd,su",
    },
  },
  ["鄱阳县|e,n,se,w"] = {
    name = "鄱阳县",
    exits = {
      ["e"] = "鄱阳帮|w",
      ["n"] = "土路|eu,nw,s",
      ["se"] = "南岩石龛|e,nw",
      ["w"] = "鄱阳湖边|e",
    },
  },
  ["鄱阳帮|w"] = {
    name = "鄱阳帮",
    exits = {
      ["w"] = "鄱阳县|e,n,se,w",
    },
  },
  ["鄱阳湖边|e"] = {
    name = "鄱阳湖边",
    exits = {
      ["e"] = "鄱阳县|e,n,se,w",
    },
  },
  ["铅山县|ne,nw,s,sw"] = {
    name = "铅山县",
    exits = {
      ["ne"] = "土路|n,sw",
      ["nw"] = "南岩寺|enter,se,w",
      ["s"] = "鹅湖书院|n,su",
      ["sw"] = "田间小路|ne,sw",
    },
  },
  ["青石官道|ne,se,w"] = {
    name = "青石官道",
    exits = {
      ["se"] = "土路|eu,nw,s",
    },
  },
  ["鹅湖书院|n,su"] = {
    name = "鹅湖书院",
    exits = {
      ["n"] = "铅山县|ne,nw,s,sw",
      ["su"] = "葛仙山|eu,nd,su",
    },
  },
}
}

-- ✅ mapAliases：按最终 name 全量补齐（包含新增节点 &amp; 编号后的 name）
mapper.maps["sr"].mapAliases = {
  ["东大街"]       = "ddj",
  ["东门"]         = "dm",
  ["中央广场"]     = "origin",
  ["北大街"]       = "bdj",
  ["北门"]         = "bm",

  ["南大街1"]      = "ndj1",
  ["南大街2"]      = "ndj2",
  ["南大街3"]      = "ndj3",
  ["南门"]         = "nm",

  ["县衙大门"]     = "xydm",
  ["大堂"]         = "dt",
  ["后堂"]         = "ht",

  ["城东小路"]     = "cdxl",

  ["客栈"]         = "kz",
  ["客栈二楼"]     = "kzel",

  ["山路1"]        = "sl1",
  ["山路2"]        = "sl2",
  ["山路3"]        = "sl3",
  ["廿八铺"]       = "nbp",

  ["当铺"]         = "dp",
  ["杂货铺"]       = "zhp",
  ["横山镇"]       = "xsz",
  ["武安山"]       = "was",
  ["玉山县"]       = "ysx",

  ["老巷1"]        = "lx1",
  ["老巷2"]        = "lx2",
  ["老巷3"]        = "lx3",
  ["老巷4"]        = "lx4",
  ["老巷5"]        = "lx5",

  ["茶山寺"]       = "css",
  ["药铺"]         = "yp",
  ["西大街"]       = "xdj",
  ["酒馆"]         = "jg",
  ["钱庄"]         = "qz",
  ["阎立本墓"]     = "ylbm",
  ["陆羽泉"]       = "lyq",
  ["龙虎镖局"]     = "lhbj",

  ["东岳庙"]       = "dym",
  ["南岩寺"]       = "nys",
  ["南岩石龛"]     = "nysk",
  ["寺内"]         = "sn",

  ["土路1"]        = "tl1",
  ["土路2"]        = "tl",
  ["土路3"]        = "tl3",

  ["斜坡"]         = "xp",
  ["月岩洞"]       = "yyd",
  ["枫岭头镇"]     = "fltz",
  ["正殿"]         = "zd",
  ["泸溪河东岸"]   = "lxhda",
  ["狮子岭"]       = "szl",
  ["琅琊山"]       = "lys",
  ["田间小路"]     = "tjxl",
  ["睢阳祠"]       = "syc",
  ["芝山"]         = "zs",
  ["葛仙山"]       = "gxs",
  ["西门"]         = "xm",
  ["试剑石"]       = "sjs",

  ["鄱阳县"]       = "pyx",
  ["鄱阳帮"]       = "pyb",
  ["鄱阳湖边"]     = "pyhb",

  ["铅山县"]       = "qsx",
  ["青石官道"]     = "qsgd",
  ["鹅湖书院"]     = "ehsy",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>衢州 - quz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["quz"]= {

  region = {
    key  = "quz",      -- 区域代号，用在 goto wx.xxx 里
    name = "衢州",    -- 纯注释/显示用
  },
mapNodes = {
  ["一线天|e,n,wd"] = {
    name = "一线天",
    exits = {
      ["e"] = "金井玉田|ne,w",
      ["n"] = "樵隐岩|e,s",
      ["wd"] = "石梁|d,eu,ne,nw,w",
    },
  },
  ["乌溪江南岸|eu,sw"] = {
    name = "乌溪江南岸",
    exits = {
      ["eu"] = "山脚|e,wd",
      ["sw"] = "山路|ne,sw",
      ["ride"] = "乌溪江边|n",
    },
  },
  ["仙人棋|w"] = {
    name = "仙人棋",
    exits = {
      ["w"] = "青霞洞|e,s,u",
    },
  },
  ["仙霞关|ne,sd"] = {
    name = "仙霞关",
    exits = {
      ["ne"] = "山路|ne,sw",
    },
  },
  ["山脚|e,wd"] = {
    name = "山脚",
    exits = {
      ["e"] = "石梁|d,eu,ne,nw,w",
      ["wd"] = "乌溪江南岸|eu,sw",
    },
  },

  -- 山路（同名节点）=&gt; 山路 / 山路2
  ["山路|ne,sw"] = {
    name = "山路",
    exits = {
      ["ne"] = "乌溪江南岸|eu,sw",
      ["sw"] = "仙霞关|ne,sd",
    },
  },

  ["山间道|nd,sw"] = {
    name = "山间道",
    exits = {
      ["nd"] = "烂柯山脚|e,ne,su",
      ["sw"] = "石梁|d,eu,ne,nw,w",
    },
  },
  ["日迟亭|n"] = {
    name = "日迟亭",
    exits = {
      ["n"] = "青霞洞|e,s,u",
    },
  },
  ["柯山塔|sw,w"] = {
    name = "柯山塔",
    exits = {
      ["sw"] = "金井玉田|ne,w",
      ["w"] = "樵隐岩|e,s",
    },
  },
  ["樵隐岩|e,s"] = {
    name = "樵隐岩",
    exits = {
      ["e"] = "柯山塔|sw,w",
      ["s"] = "一线天|e,n,wd",
    },
  },
  ["石桥寺|se"] = {
    name = "石桥寺",
    exits = {
      ["se"] = "石梁|d,eu,ne,nw,w",
    },
  },
  ["石梁|d,eu,ne,nw,w"] = {
    name = "石梁",
    exits = {
      ["d"] = "青霞洞|e,s,u",
      ["eu"] = "一线天|e,n,wd",
      ["ne"] = "山间道|nd,sw",
      ["nw"] = "石桥寺|se",
      ["w"] = "山脚|e,wd",
    },
  },
  ["金井玉田|ne,w"] = {
    name = "金井玉田",
    exits = {
      ["ne"] = "柯山塔|sw,w",
      ["w"] = "一线天|e,n,wd",
    },
  },
  ["青霞洞|e,s,u"] = {
    name = "青霞洞",
    exits = {
      ["e"] = "仙人棋|w",
      ["s"] = "日迟亭|n",
      ["u"] = "石梁|d,eu,ne,nw,w",
    },
  },
  ["乌溪江边|n"] = {
    name = "乌溪江边",
    exits = {
      ["n"] = "礼贤门|n,s",
      ["ride"] = "乌溪江南岸|eu,sw"
    },
  },

  -- 南门大街（同名节点）=&gt; 南门大街 / 南门大街1 / 南门大街2 / 南门大街3
  ["南门大街|e,n,s,w"] = {
    name = "南门大街",
    exits = {
      ["e"] = "南门大街|s,w",
      ["n"] = "南广场|e,n,s,w",
      ["s"] = "礼贤门|n,s",
      ["w"] = "南门大街|e,s,w",
    },
  },
  ["南门大街|e,s"] = {
    name = "南门大街1",
    exits = {
      ["e"] = "南门大街|e,s,w",
      ["s"] = "民居|n",
    },
  },
  ["南门大街|e,s,w"] = {
    name = "南门大街2",
    exits = {
      ["e"] = "南门大街|e,n,s,w",
      ["s"] = "米铺|n",
      ["w"] = "南门大街|e,s",
    },
  },
  ["南门大街|s,w"] = {
    name = "南门大街3",
    exits = {
      ["s"] = "酒铺|n",
      ["w"] = "南门大街|e,n,s,w",
    },
  },

  ["民居|n"] = {
    name = "民居",
    exits = {
      ["n"] = "南门大街|e,s",
    },
  },
  ["礼贤门|n,s"] = {
    name = "礼贤门",
    exits = {
      ["n"] = "南门大街|e,n,s,w",
      ["s"] = "乌溪江边|n",
    },
  },
  ["米铺|n"] = {
    name = "米铺",
    exits = {
      ["n"] = "南门大街|e,s,w",
    },
  },
  ["酒铺|n"] = {
    name = "酒铺",
    exits = {
      ["n"] = "南门大街|s,w",
    },
  },
  ["信安当铺|s"] = {
    name = "信安当铺",
    exits = {
      ["s"] = "城北大街|e,n,w",
    },
  },
  ["南广场|e,n,s,w"] = {
    name = "南广场",
    exits = {
      ["e"] = "城南大街1|e,s,w",
      ["n"] = "北广场|e,n,s,w",
      ["w"] = "城南大街|e,s,w",
      ["s"] = "南门大街|e,n,s,w"
    },
  },
  ["和丰门|e"] = {
    name = "和丰门",
    exits = {
      ["e"] = "城北大街|e,n,sw,w",
    },
  },

  -- 城北大街（同名节点）=&gt; 城北大街 / 城北大街2 / 城北大街3
  ["城北大街|e,n,sw,w"] = {
    name = "城北大街",
    exits = {
      ["e"] = "城北大街|e,n,w",
      ["n"] = "大中祥符寺|s",
      ["sw"] = "城南大街|e,ne,s,w",
      ["w"] = "和丰门|e",
    },
  },
  ["城北大街|e,n,w"] = {
    name = "城北大街2",
    exits = {
      ["e"] = "北广场|e,n,s,w",
      ["n"] = "信安当铺|s",
      ["w"] = "城北大街|e,n,sw,w",
    },
  },

  ["城南大街|e,ne,s,w"] = {
    name = "城南大街",
    exits = {
      ["e"] = "城南大街|e,s,w",
      ["ne"] = "城北大街|e,n,sw,w",
      ["s"] = "孔府|n",
      ["w"] = "航运门|e,w",
    },
  },

  -- 城南大街（同名节点）=&gt; 城南大街 / 城南大街1 / 城南大街2 / 城南大街3
  ["城南大街|e,s,w"] = {
    name = "城南大街1",
    exits = {
      ["e"] = "南广场|e,n,s,w",
      ["s"] = "府衙大门|enter,n",
      ["w"] = "城南大街|e,ne,s,w",
    },
  },

  ["城西小路|e,sw,w"] = {
    name = "城西小路",
    exits = {
      ["e"] = "航运门|e,w",
      ["sw"] = "山间小道|ne,sw",
      ["w"] = "码头|e",
    },
  },
  ["大中祥符寺|s"] = {
    name = "大中祥符寺",
    exits = {
      ["s"] = "城北大街|e,n,sw,w",
    },
  },
  ["大堂|out"] = {
    name = "大堂",
    exits = {
      ["out"] = "府衙大门|enter,n",
    },
  },
  ["孔府|n"] = {
    name = "孔府",
    exits = {
      ["n"] = "城南大街|e,ne,s,w",
    },
  },
  ["山间小道|ne,sw"] = {
    name = "山间小道",
    exits = {
      ["ne"] = "城西小路|e,sw,w",
      ["sw"] = "常山县|ne,s,sw",
    },
  },
  ["常山县|ne,s,sw"] = {
    name = "常山县",
    exits = {
      ["ne"] = "山间小道|ne,sw",
      ["s"] = "文峰塔|n",
      ["sw"] = "玉山县|ne,sw",
    },
  },
  ["府衙大门|enter,n"] = {
    name = "府衙大门",
    exits = {
      ["enter"] = "大堂|out",
      ["n"] = "城南大街|e,s,w",
    },
  },
  ["文峰塔|n"] = {
    name = "文峰塔",
    exits = {
      ["n"] = "常山县|ne,s,sw",
    },
  },
  ["玉山县|ne,sw"] = {
    name = "玉山县",
    exits = {
      ["ne"] = "常山县|ne,s,sw",
    },
  },
  ["码头|e"] = {
    name = "码头",
    exits = {
      ["e"] = "城西小路|e,sw,w",
    },
  },
  ["航运门|e,w"] = {
    name = "航运门",
    exits = {
      ["e"] = "城南大街|e,ne,s,w",
      ["w"] = "城西小路|e,sw,w",
    },
  },

  -- 乡间小路（同名节点）=&gt; 乡间小路 / 乡间小路2
  ["乡间小路|e,w"] = {
    name = "乡间小路",
    exits = {
      ["e"] = "乡间小路|ne,s,w",
      ["w"] = "永清门|e,nd,s",
    },
  },
  ["乡间小路|ne,s,w"] = {
    name = "乡间小路2",
    exits = {
      ["ne"] = "官道|e,sw",
      ["s"] = "峥嵘峰|ed,n,s",
      ["w"] = "乡间小路|e,w",
    },
  },

  ["北广场|e,n,s,w"] = {
    name = "北广场",
    exits = {
      ["e"] = "城北大街1|e,n,w",
      ["n"] = "北门大街|n,s",
      ["s"] = "南广场|e,n,s,w",
      ["w"] = "城北大街|e,n,w",
    },
  },
  ["北门大街|n,s"] = {
    name = "北门大街",
    exits = {
      ["n"] = "永清门|e,nd,s",
      ["s"] = "北广场|e,n,s,w",
    },
  },
  ["城北大街1|e,n,w"] = {
    name = "城北大街1",
    exits = {
      ["e"] = "城北大街|n,se,w",
      ["n"] = "钱庄|s",
      ["w"] = "北广场|e,n,s,w",
    },
  },
  ["城北大街|n,se,w"] = {
    name = "城北大街3",
    exits = {
      ["n"] = "杂货铺|s",
      ["se"] = "迎和门|e,n,nw,sw",
      ["w"] = "城北大街1|e,n,w",
    },
  },

  ["城南大街1|e,s,w"] = {
    name = "城南大街2",
    exits = {
      ["e"] = "城南大街|ne,s,w",
      ["s"] = "客店|enter,n",
      ["w"] = "南广场|e,n,s,w",
    },
  },
  ["城南大街|ne,s,w"] = {
    name = "城南大街3",
    exits = {
      ["ne"] = "迎和门|e,n,nw,sw",
      ["s"] = "清辉门|n,s",
      ["w"] = "城南大街1|e,s,w",
    },
  },

  ["官道|e,sw"] = {
    name = "官道",
    exits = {
      ["sw"] = "乡间小路|ne,s,w",
    },
  },
  ["客店|enter,n"] = {
    name = "客店",
    exits = {
      ["enter"] = "里间|out",
      ["n"] = "城南大街1|e,s,w",
    },
  },
  ["山脚小路|n,sw"] = {
    name = "山脚小路",
    exits = {
      ["n"] = "清辉门|n,s",
      ["sw"] = "烂柯山脚|e,ne,su",
    },
  },

  ["山路|s,wu"] = {
    name = "山路2",
    exits = {
      ["s"] = "龟峰|ed,n,w",
      ["wu"] = "峥嵘峰|ed,n,s",
    },
  },

  ["峥嵘峰|ed,n,s"] = {
    name = "峥嵘峰",
    exits = {
      ["ed"] = "山路|s,wu",
      ["n"] = "乡间小路|ne,s,w",
      ["s"] = "迎和门|e,n,nw,sw",
    },
  },
  ["杂货铺|s"] = {
    name = "杂货铺",
    exits = {
      ["s"] = "城北大街|n,se,w",
    },
  },
  ["永清门|e,nd,s"] = {
    name = "永清门",
    exits = {
      ["e"] = "乡间小路|e,w",
      ["nd"] = "衢江南渡|su",
      ["s"] = "北门大街|n,s",
    },
  },
  ["清辉门|n,s"] = {
    name = "清辉门",
    exits = {
      ["n"] = "城南大街|ne,s,w",
      ["s"] = "山脚小路|n,sw",
    },
  },
  ["烂柯山脚|e,ne,su"] = {
    name = "烂柯山脚",
    exits = {
      ["ne"] = "山脚小路|n,sw",
      ["su"] = "山间道|nd,sw"
    },
  },
  ["衢江南渡|su"] = {
    name = "衢江南渡",
    exits = {
      ["su"] = "永清门|e,nd,s",
      ["ride"] = "衢江北渡|nu",
    },
  },
  ["迎和门|e,n,nw,sw"] = {
    name = "迎和门",
    exits = {
      ["e"] = "龟峰|ed,n,w",
      ["n"] = "峥嵘峰|ed,n,s",
      ["nw"] = "城北大街|n,se,w",
      ["sw"] = "城南大街|ne,s,w",
    },
  },
  ["里间|out"] = {
    name = "里间",
    exits = {
      ["out"] = "客店|enter,n",
    },
  },
  ["钱庄|s"] = {
    name = "钱庄",
    exits = {
      ["s"] = "城北大街1|e,n,w",
    },
  },
  ["龟峰|ed,n,w"] = {
    name = "龟峰",
    exits = {
      ["n"] = "山路|s,wu",
      ["w"] = "迎和门|e,n,nw,sw",
    },
  },

  -- 温家（同名节点：厢房）=&gt; 厢房 / 厢房2
  ["厢房|n"] = {
    name = "厢房",
    exits = {
      ["n"] = "大厅|n,out,s,w",
    },
  },
  ["厢房|s"] = {
    name = "厢房2",
    exits = {
      ["s"] = "大厅|n,out,s,w",
    },
  },
  ["后堂|e"] = {
    name = "后堂",
    exits = {
      ["e"] = "大厅|n,out,s,w",
    },
  },
  ["大厅|n,out,s,w"] = {
    name = "大厅",
    exits = {
      ["n"] = "厢房|s",
      ["out"] = "温家|e,enter",
      ["s"] = "厢房|n",
      ["w"] = "后堂|e",
    },
  },
  ["温家|e,enter"] = {
    name = "温家",
    exits = {
      ["e"] = "静岩镇|sd,w",
      ["enter"] = "大厅|n,out,s,w",
    },
  },
  ["衢江北渡|nu"] = {
    name = "衢江北渡",
    exits = {
      ["nu"] = "静岩镇|sd,w",
      ["ride"] = "衢江南渡|su",
    },
  },
  ["静岩镇|sd,w"] = {
    name = "静岩镇",
    exits = {
      ["sd"] = "衢江北渡|nu",
      ["w"] = "温家|e,enter",
    },
  },  
}
}

mapper.maps["quz"].mapAliases = {
  -- 山景区（烂柯山/石梁/青霞洞一带）
  ["一线天"]     = "yxt",
  ["金井玉田"]   = "jjyt",
  ["樵隐岩"]     = "qyy",
  ["柯山塔"]     = "kst",
  ["石梁"]       = "sl",
  ["石桥寺"]     = "sqs",
  ["青霞洞"]     = "qxd",
  ["仙人棋"]     = "xrq",
  ["日迟亭"]     = "rct",
  ["山间道"]     = "sjd",
  ["烂柯山脚"]   = "lksj",

  -- 乌溪江/仙霞关一带（山路重名编号）
  ["乌溪江南岸"] = "uxjna",
  ["山脚"]       = "sj",
  ["山路"]       = "shl",
  ["山路2"]      = "shl2",
  ["仙霞关"]     = "xxg",

  -- 城内（衢州城）
  ["乌溪江边"]   = "uxjb",
  ["礼贤门"]     = "lxm",

  ["南广场"]     = "ngc",

  -- 南门大街重名编号
  ["南门大街"]   = "nmdj",
  ["南门大街1"]  = "nmdj1",
  ["南门大街2"]  = "nmdj2",
  ["南门大街3"]  = "nmdj3",

  ["民居"]       = "mj",
  ["米铺"]       = "mp",
  ["酒铺"]       = "jp",

  -- ★中心点（origin）
  ["北广场"]     = "origin",

  ["北门大街"]   = "bmdj",
  ["永清门"]     = "yqm",

  -- 城北大街重名编号
  ["城北大街"]   = "cbdj",
  ["城北大街1"]  = "cbdj1",
  ["城北大街2"]  = "cbdj2",
  ["城北大街3"]  = "cbdj3",

  ["和丰门"]     = "hfm",
  ["信安当铺"]   = "xadp",
  ["大中祥符寺"] = "dzxfs",
  ["钱庄"]       = "qz",
  ["杂货铺"]     = "zhp",

  -- 城南大街重名编号
  ["城南大街"]   = "cndj",
  ["城南大街1"]  = "cndj1",
  ["城南大街2"]  = "cndj2",
  ["城南大街3"]  = "cndj3",

  ["孔府"]       = "kf",
  ["府衙大门"]   = "fydm",
  ["大堂"]       = "dt",

  ["航运门"]     = "hym",
  ["城西小路"]   = "cxxl",
  ["码头"]       = "mt",
  ["山间小道"]   = "sjxd",
  ["常山县"]     = "csx",
  ["文峰塔"]     = "wft",
  ["玉山县"]     = "ysx",

  ["清辉门"]     = "qhm",
  ["山脚小路"]   = "sjxl",
  ["衢江南渡"]   = "qjnd",
  ["迎和门"]     = "yhm",
  ["里间"]       = "lj",

  -- 城外/官道一带（乡间小路重名编号）
  ["乡间小路"]   = "xjxl",
  ["乡间小路2"]  = "xjxl2",
  ["官道"]       = "gd",
  ["峥嵘峰"]     = "zrf",
  ["龟峰"]       = "gf",

  -- 温家一带（厢房重名编号）
  ["厢房"]       = "xf",
  ["厢房2"]      = "xf2",
  ["后堂"]       = "ht",
  ["大厅"]       = "dting",
  ["温家"]       = "wj",
  ["衢江北渡"]   = "qjbd",
  ["静岩镇"]     = "jyz",
}

</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>无锡 - wx</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["wx"]= {

  region = {
    key  = "wx",      -- 区域代号，用在 goto wx.xxx 里
    name = "无锡",    -- 纯注释/显示用
  },

  mapNodes = {
    ["三茅峰|ed,n"] = {
      name = "三茅峰",
      exits = {
        ["ed"] = "惠山|ed,nd,sd,wu",
        ["n"] = "阳山|s,sw",
      },
    },
    ["东大街|ne,nw,s,se,w"] = {
      name = "东大街",
      exits = {
        ["ne"] = "石皮巷|e,sw",
        ["nw"] = "城隍庙|se",
        ["s"] = "北禅寺|n,s",
        ["se"] = "大市桥|n,nw,se",
        ["w"] = "西大街|e,n,nw,su",
      },
    },
    ["东门|e,wu"] = {
      name = "东门",
      exits = {
        ["e"] = "城外土路|se,w",
        ["wu"] = "营桥|ed,n,wd",
      },
    },
    ["书院街|e,nw,s"] = {
      name = "书院街",
      exits = {
        ["e"] = "城头街|su,w",
        ["nw"] = "打铁桥|e,nw,se",
        ["s"] = "捕快营|enter,n,s,wu",
      },
    },
    ["仓桥|ed,nw"] = {
      name = "仓桥",
      exits = {
        ["ed"] = "捕快营|enter,n,s,wu",
        ["nw"] = "道场巷|se",
      },
    },
    ["北禅寺|n,s"] = {
      name = "北禅寺",
      exits = {
        ["n"] = "东大街|ne,nw,s,se,w",
        ["s"] = "北禅寺巷|e,n,w",
      },
    },

    -- ✅ 北禅寺巷：近的保留“北禅寺巷”，远的编号为“北禅寺巷1”
    ["北禅寺巷|e,n,w"] = {
      name = "北禅寺巷",
      exits = {
        ["e"] = "南大街|e,ne,nw,se,w",
        ["n"] = "北禅寺|n,s",
        ["w"] = "北禅寺巷|e,nu,w",
      },
    },
    ["北禅寺巷|e,nu,w"] = {
      name = "北禅寺巷1",
      exits = {
        ["e"] = "北禅寺巷|e,n,w",
        ["nu"] = "西桥|nd,sd",
        ["w"] = "庙巷|e,n,s",
      },
    },

    ["北门|n,se"] = {
      name = "北门",
      exits = {
        ["n"] = "杏子林|nw,s,se",
        ["se"] = "打铁桥|e,nw,se",
      },
    },
    ["医馆|n"] = {
      name = "医馆",
      exits = {
        ["n"] = "槐树巷|nw,s,w",
      },
    },
    ["南大街|e,ne,nw,se,w"] = {
      name = "南大街",
      exits = {
        ["e"] = "槐树巷|e,nw,s,w",
        ["ne"] = "欢喜巷|e,n,se,sw",
        ["nw"] = "大市桥|n,nw,se",
        ["se"] = "南市桥|nw,sw,w",
        ["w"] = "北禅寺巷|e,n,w",
      },
    },
    ["南市桥|nw,sw,w"] = {
      name = "南市桥",
      exits = {
        ["nw"] = "南大街|e,ne,nw,se,w",
        ["sw"] = "南市桥巷|ne,se",
        ["w"] = "无锡马车行|e",
      },
    },
    ["南市桥巷|ne,se"] = {
      name = "南市桥巷",
      exits = {
        ["ne"] = "南市桥|nw,sw,w",
        ["se"] = "南门|e,nw",
      },
    },
    ["南门|e,nw"] = {
      name = "南门",
      exits = {
        ["nw"] = "南市桥巷|ne,se",
        ["e"] = "青石官道|e,w",
      },
    },
    ["土路|ne,se"] = {
      name = "土路",
      exits = {
        ["ne"] = "惠山寺|nw,sw",
        ["se"] = "西门|nw,se,sw",
      },
    },
    ["城外土路|se,w"] = {
      name = "城外土路",
      exits = {
        ["w"] = "东门|e,wu",
      },
    },
    ["城头街|su,w"] = {
      name = "城头街",
      exits = {
        ["su"] = "黄泥桥|nd,sd",
        ["w"] = "书院街|e,nw,s",
      },
    },
    ["城守营|nw,s"] = {
      name = "城守营",
      exits = {
        ["nw"] = "硝皮巷|nu,s,se",
        ["s"] = "营桥|ed,n,wd",
      },
    },
    ["城隍庙|se"] = {
      name = "城隍庙",
      exits = {
        ["se"] = "东大街|ne,nw,s,se,w",
      },
    },
    ["大厅|out"] = {
      name = "大厅",
      exits = {
        ["out"] = "捕快营|enter,n,s,wu",
      },
    },
    ["大市桥|n,nw,se"] = {
      name = "大市桥",
      exits = {
        ["n"] = "观前街|e,nw,s,w",
        ["nw"] = "东大街|ne,nw,s,se,w",
        ["se"] = "南大街|e,ne,nw,se,w",
      },
    },
    ["太湖湖边|ne"] = {
      name = "太湖湖边",
      exits = {
        ["ne"] = "雪浪山|ne,sw",
      },
    },
    ["山脚下|e,nu,s"] = {
      name = "山脚下",
      exits = {
        ["e"] = "惠山泉|w",
        ["nu"] = "惠山|ed,nd,sd,wu",
        ["s"] = "山路|n,se",
      },
    },

    -- ✅ 山路：近的保留“山路”，远的编号为“山路1”
    ["山路|n,se"] = {
      name = "山路",
      exits = {
        ["n"] = "山脚下|e,nu,s",
        ["se"] = "惠山寺|nw,sw",
      },
    },
    ["山路|nd,su"] = {
      name = "山路1",
      exits = {
        ["nd"] = "常州|n,nw,se,su,sw",
        ["su"] = "惠山|ed,nd,sd,wu",
      },
    },

    ["常州|n,nw,se,su,sw"] = {
      name = "常州",
      exits = {
        ["se"] = "锡山脚下|nw,se",
        ["su"] = "山路|nd,su",
      },
    },
    ["庙巷|e,n,s"] = {
      name = "庙巷",
      exits = {
        ["e"] = "北禅寺巷|e,nu,w",
        ["n"] = "当铺|s",
        ["s"] = "钱庄|n",
      },
    },
    ["府衙|enter,n,s"] = {
      name = "府衙",
      exits = {
        ["n"] = "连元街|e,s",
        ["s"] = "西大街|e,n,nw,su",
      },
    },
    ["当铺|s"] = {
      name = "当铺",
      exits = {
        ["s"] = "庙巷|e,n,s",
      },
    },
    ["惠山|ed,nd,sd,wu"] = {
      name = "惠山",
      exits = {
        ["ed"] = "春申涧|wu",
        ["nd"] = "山路|nd,su",
        ["sd"] = "山脚下|e,nu,s",
        ["wu"] = "三茅峰|ed,n",
      },
    },
    ["惠山寺|nw,sw"] = {
      name = "惠山寺",
      exits = {
        ["nw"] = "山路|n,se",
        ["sw"] = "土路|ne,se",
      },
    },
    ["惠山泉|w"] = {
      name = "惠山泉",
      exits = {
        ["w"] = "山脚下|e,nu,s",
      },
    },
    ["打铁桥|e,nw,se"] = {
      name = "打铁桥",
      exits = {
        ["e"] = "打铁铺|w",
        ["nw"] = "北门|n,se",
        ["se"] = "书院街|e,nw,s",
      },
    },
    ["打铁铺|w"] = {
      name = "打铁铺",
      exits = {
        ["w"] = "打铁桥|e,nw,se",
      },
    },
    ["捕快营|enter,n,s,wu"] = {
      name = "捕快营",
      exits = {
        ["enter"] = "大厅|out",
        ["n"] = "书院街|e,nw,s",
        ["s"] = "盛巷桥|n,se,w",
        ["wu"] = "仓桥|ed,nw",
      },
    },
    ["无锡马车行|e"] = {
      name = "无锡马车行",
      exits = {
        ["e"] = "南市桥|nw,sw,w",
      },
    },
    ["春申涧|wu"] = {
      name = "春申涧",
      exits = {
        ["wu"] = "惠山|ed,nd,sd,wu",
      },
    },
    ["杂货铺|n"] = {
      name = "杂货铺",
      exits = {
        ["n"] = "槐树巷|e,nw,s,w",
      },
    },
    ["杏子林|nw,s,se"] = {
      name = "杏子林",
      exits = {
        ["nw"] = "锡山脚下|nw,se",
        ["s"] = "北门|n,se",
        ["se"] = "青石官道|ne,nw,s",
      },
    },
    ["松鹤楼|s"] = {
      name = "松鹤楼",
      exits = {
        ["s"] = "欢喜巷|e,n,se,sw",
      },
    },

    -- ✅ 槐树巷：近的保留“槐树巷”，远的编号为“槐树巷1”
    ["槐树巷|e,nw,s,w"] = {
      name = "槐树巷",
      exits = {
        ["e"] = "槐树巷|nw,s,w",
        ["nw"] = "欢喜巷|e,n,se,sw",
        ["s"] = "杂货铺|n",
        ["w"] = "南大街|e,ne,nw,se,w",
      },
    },
    ["槐树巷|nw,s,w"] = {
      name = "槐树巷1",
      exits = {
        ["nw"] = "欢喜巷|n,se,w",
        ["s"] = "医馆|n",
        ["w"] = "槐树巷|e,nw,s,w",
      },
    },

    -- ✅ 欢喜巷：近的保留“欢喜巷”，远的编号为“欢喜巷1”
    ["欢喜巷|e,n,se,sw"] = {
      name = "欢喜巷",
      exits = {
        ["e"] = "欢喜巷|n,se,w",
        ["n"] = "松鹤楼|s",
        ["se"] = "槐树巷|e,nw,s,w",
        ["sw"] = "南大街|e,ne,nw,se,w",
      },
    },
    ["欢喜巷|n,se,w"] = {
      name = "欢喜巷1",
      exits = {
        ["n"] = "长风镖局|s",
        ["se"] = "槐树巷|nw,s,w",
        ["w"] = "欢喜巷|e,n,se,sw",
      },
    },

    ["洞虚宫|s"] = {
      name = "洞虚宫",
      exits = {
        ["s"] = "观前街|e,n,w",
      },
    },
    ["盛巷|eu,n,w"] = {
      name = "盛巷",
      exits = {
        ["eu"] = "营桥|ed,n,wd",
        ["n"] = "硝皮巷|nu,s,se",
        ["w"] = "观前街|e,n,w",
      },
    },
    ["盛巷桥|n,se,w"] = {
      name = "盛巷桥",
      exits = {
        ["n"] = "捕快营|enter,n,s,wu",
        ["se"] = "观前街|e,nw,s,w",
        ["w"] = "连元街|e,w",
      },
    },
    ["石皮巷|e,sw"] = {
      name = "石皮巷",
      exits = {
        ["e"] = "观前街|e,nw,s,w",
        ["sw"] = "东大街|ne,nw,s,se,w",
      },
    },
    ["硝皮巷|nu,s,se"] = {
      name = "硝皮巷",
      exits = {
        ["nu"] = "黄泥桥|nd,sd",
        ["s"] = "盛巷|eu,n,w",
        ["se"] = "城守营|nw,s",
      },
    },
    ["营桥|ed,n,wd"] = {
      name = "营桥",
      exits = {
        ["ed"] = "东门|e,wu",
        ["n"] = "城守营|nw,s",
        ["wd"] = "盛巷|eu,n,w",
      },
    },

    -- ✅ 西大街：近的保留“西大街”，远的编号为“西大街1”
    ["西大街|e,n,nw,su"] = {
      name = "西大街",
      exits = {
        ["e"] = "东大街|ne,nw,s,se,w",
        ["n"] = "府衙|enter,n,s",
        ["nw"] = "西门|nw,se,sw",
        ["su"] = "西桥|nd,sd",
      },
    },

    ["西桥|nd,sd"] = {
      name = "西桥",
      exits = {
        ["nd"] = "西大街|e,n,nw,su",
        ["sd"] = "北禅寺巷|e,nu,w",
      },
    },
    ["西门|nw,se,sw"] = {
      name = "西门",
      exits = {
        ["nw"] = "土路|ne,se",
        ["se"] = "西大街|e,n,nw,su",
        ["sw"] = "雪浪山|ne,sw",
      },
    },

    -- ✅ 观前街：近的（靠 origin）保留“观前街”，远的编号为“观前街1”
    ["观前街|e,n,w"] = {
      name = "观前街1",
      exits = {
        ["e"] = "盛巷|eu,n,w",
        ["n"] = "洞虚宫|s",
        ["w"] = "观前街|e,nw,s,w",
      },
    },
    ["观前街|e,nw,s,w"] = {
      name = "观前街",
      exits = {
        ["e"] = "观前街|e,n,w",
        ["nw"] = "盛巷桥|n,se,w",
        ["s"] = "大市桥|n,nw,se",
        ["w"] = "石皮巷|e,sw",
      },
    },

    -- ✅ 连元街：近的保留“连元街”，远的编号为“连元街1”
    ["连元街|e,s"] = {
      name = "连元街1",
      exits = {
        ["e"] = "连元街|e,w",
        ["s"] = "府衙|enter,n,s",
      },
    },
    ["连元街|e,w"] = {
      name = "连元街",
      exits = {
        ["e"] = "盛巷桥|n,se,w",
        ["w"] = "连元街|e,s",
      },
    },

    ["道场巷|se"] = {
      name = "道场巷",
      exits = {
        ["se"] = "仓桥|ed,nw",
      },
    },
    ["钱庄|n"] = {
      name = "钱庄",
      exits = {
        ["n"] = "庙巷|e,n,s",
      },
    },
    ["锡山脚下|nw,se"] = {
      name = "锡山脚下",
      exits = {
        ["nw"] = "常州|n,nw,se,su,sw",
        ["se"] = "杏子林|nw,s,se",
      },
    },
    ["长风镖局|s"] = {
      name = "长风镖局",
      exits = {
        ["s"] = "欢喜巷|n,se,w",
      },
    },
    ["阳山|s,sw"] = {
      name = "阳山",
      exits = {
        ["s"] = "三茅峰|ed,n",
      },
    },
    ["雪浪山|ne,sw"] = {
      name = "雪浪山",
      exits = {
        ["ne"] = "西门|nw,se,sw",
        ["sw"] = "太湖湖边|ne",
      },
    },

    -- ✅ 青石官道：3 个节点，按距离编号为 青石官道 / 青石官道1 / 青石官道2
    ["青石官道|ne,nw,s"] = {
      name = "青石官道",
      exits = {
        ["nw"] = "杏子林|nw,s,se",
      },
    },
    ["青石官道|e,w"] = {
      name = "青石官道1",
      exits = {
        ["e"] = "青石官道1|e,w",
        ["w"] = "南门|e,nw",
      },
    },
    ["青石官道1|e,w"] = {
      name = "青石官道2",
      exits = {
        ["e"] = "御亭镇|nw,se,w",
        ["w"] = "青石官道|e,w",
      },
    },

    ["御亭镇|nw,se,w"] = {
      name = "御亭镇",
      exits = {
        ["w"] = "青石官道1|e,w",
      },
    },
    ["黄泥桥|nd,sd"] = {
      name = "黄泥桥",
      exits = {
        ["nd"] = "城头街|su,w",
        ["sd"] = "硝皮巷|nu,s,se",
      },
    },

    -- 这几个你原图里出现但片段没贴全，我保持不动（如果你 wx 完整图里有它们，这些 name 不影响）
    ["广场|e,n,s,w"] = mapper.maps["wx"] and mapper.maps["wx"].mapNodes and mapper.maps["wx"].mapNodes["广场|e,n,s,w"] or nil,
    ["将军府|n"]     = mapper.maps["wx"] and mapper.maps["wx"].mapNodes and mapper.maps["wx"].mapNodes["将军府|n"] or nil,
  },

  mapAliases = {
    ["三茅峰"]     = "smf",
    ["东大街"]     = "ddj",
    ["东门"]       = "dm",
    ["书院街"]     = "syj",
    ["仓桥"]       = "cq",
    ["北禅寺"]     = "bcs",

    -- ✅ 北禅寺巷
    ["北禅寺巷"]   = "bcsx",
    ["北禅寺巷1"]  = "bcsx1",

    ["北门"]       = "bm",
    ["医馆"]       = "yg",
    ["南大街"]     = "ndj",
    ["南市桥"]     = "nsq",
    ["南市桥巷"]   = "nsqx",
    ["南门"]       = "nm",
    ["土路"]       = "tl",
    ["城外土路"]   = "cwtl",
    ["城头街"]     = "ctj",
    ["城守营"]     = "csy",
    ["城隍庙"]     = "chm",
    ["大厅"]       = "dt",
    ["大市桥"]     = "dsq",
    ["太湖湖边"]   = "thhb",
    ["山脚下"]     = "sjx",

    -- ✅ 山路
    ["山路"]       = "sl",
    ["山路1"]      = "sl1",

    ["常州"]       = "cz",
    ["庙巷"]       = "mx",
    ["府衙"]       = "fy",
    ["当铺"]       = "dp",
    ["惠山"]       = "hs",
    ["惠山寺"]     = "hss",
    ["惠山泉"]     = "hsq",
    ["打铁桥"]     = "dtq",
    ["打铁铺"]     = "dtp",
    ["捕快营"]     = "bky",
    ["无锡马车行"] = "mch",
    ["春申涧"]     = "csj",
    ["杂货铺"]     = "zhp",
    ["杏子林"]     = "xzl",
    ["松鹤楼"]     = "shl",

    -- ✅ 槐树巷 / 欢喜巷
    ["槐树巷"]     = "hsx",
    ["槐树巷1"]    = "hsx1",
    ["欢喜巷"]     = "hxx",
    ["欢喜巷1"]    = "hxx1",

    ["洞虚宫"]     = "dxg",
    ["盛巷"]       = "sx",
    ["盛巷桥"]     = "origin",
    ["石皮巷"]     = "spx",
    ["硝皮巷"]     = "xpx",
    ["营桥"]       = "yq",

    -- ✅ 西大街
    ["西大街"]     = "xdj",
    ["西大街1"]    = "xdj1",

    ["西桥"]       = "xq",
    ["西门"]       = "xm",

    -- ✅ 观前街 / 连元街
    ["观前街"]     = "gqj",
    ["观前街1"]    = "gqj1",
    ["连元街"]     = "lyj",
    ["连元街1"]    = "lyj1",

    ["道场巷"]     = "dcx",
    ["钱庄"]       = "qz",
    ["锡山脚下"]   = "xsjx",
    ["长风镖局"]   = "cfbj",
    ["阳山"]       = "ys",
    ["雪浪山"]     = "xls",

    -- ✅ 青石官道（3 段）
    ["青石官道"]   = "qsgd",
    ["青石官道1"]  = "qsgd1",
    ["青石官道2"]  = "qsgd2",

    ["黄泥桥"]     = "hnq",
    ["御亭镇"]     = "ytz",
  }

}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>建康 - jk</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["jk"] = {

  region = {
    key  = "jk",
    name = "建康",
  },

  mapNodes = {
    ["三山街|e,w"] = {
      name = "三山街",
      exits = {
        ["e"] = "南大街1|e,n,s,w",
        ["w"] = "三山门|e,n,s,w",
      },
    },
    ["三山门|e,n,s,w"] = {
      name = "三山门",
      exits = {
        ["e"] = "三山街|e,w",
      },
    },
    ["下街口|e,n,s,w"] = {
      name = "下街口",
      exits = {
        ["e"] = "中城|e,n,s,w",
        ["n"] = "月记票号|s",
        ["s"] = "当铺|n",
        ["w"] = "朝天宫|e,w",
      },
    },
    ["东广场|e,n,s,w"] = {
      name = "东广场",
      exits = {
        ["e"] = "青石路|e,w",
        ["n"] = "广场东北|s,w",
        ["s"] = "广场东南|n,w",
        ["w"] = "中央广场|e,n,s,w",
      },
    },
    ["中城|e,n,s,w"] = {
      name = "中城",
      exits = {
        ["e"] = "存义街|e,n,s,w",
        ["n"] = "南广场|e,n,s,w",
        ["s"] = "长街|e,n,s",
        ["w"] = "下街口|e,n,s,w",
      },
    },
    ["中央广场|e,n,s,w"] = {
      name = "中央广场",
      exits = {
        ["e"] = "东广场|e,n,s,w",
        ["n"] = "北广场|e,n,s,w",
        ["s"] = "南广场|e,n,s,w",
        ["w"] = "西广场|e,n,nw,s",
      },
    },
    ["乌龙潭|wu"] = {
      name = "乌龙潭",
      exits = {
        ["wu"] = "清凉山|ed,enter,nd,sd,w",
      },
    },
    ["云来客栈|enter,n"] = {
      name = "云来客栈",
      exits = {
        ["enter"] = "睡房|out",
        ["n"] = "小巷|e,s,w",
      },
    },
    ["仪凤门|e,ne,se"] = {
      name = "仪凤门",
      exits = {
        ["e"] = "小路|se,w",
      },
    },
    ["内桥|n,s,w"] = {
      name = "内桥",
      exits = {
        ["n"] = "长街|n,s,w",
        ["s"] = "南大街|e,n,s,w",
        ["w"] = "小巷|e,s,w",
      },
    },
    ["军仓|e,n,su,w"] = {
      name = "军仓",
      exits = {
        ["e"] = "军营|ne,nw,w",
        ["su"] = "山路|nd,se,su,w",
        ["w"] = "军营|e,n,nw,sw,w",
      },
    },

    -- 重名：军营 x2
    ["军营|e,n,nw,sw,w"] = {
      name = "军营1",
      exits = {
        ["e"] = "军仓|e,n,su,w",
        ["n"] = "钟阜门|nw,s,se",
        ["nw"] = "小路|se,w",
        ["sw"] = "定淮门|ne,nw,se",
      },
    },
    ["军营|ne,nw,w"] = {
      name = "军营2",
      exits = {
        ["ne"] = "北城|n,nw,s,se,sw",
        ["w"] = "军仓|e,n,su,w",
      },
    },

    ["北城|n,nw,s,se,sw"] = {
      name = "北城",
      exits = {
        ["n"] = "神策门|e,n,s,w",
        ["nw"] = "金川门|e,se,w",
        ["s"] = "钟楼|n",
        ["se"] = "鼓楼|eu,n,nw,s",
        ["sw"] = "军营|ne,nw,w",
      },
    },
    ["北广场|e,n,s,w"] = {
      name = "北广场",
      exits = {
        ["e"] = "广场东北|s,w",
        ["n"] = "北门桥|e,n,neu,s",
        ["s"] = "中央广场|e,n,s,w",
        ["w"] = "广场西北|e,s",
      },
    },
    ["北门桥|e,n,neu,s"] = {
      name = "北门桥",
      exits = {
        ["e"] = "小酒馆|w",
        ["n"] = "鼓楼|eu,n,nw,s",
        ["neu"] = "鸡鸣山|e,enter,n,swd,wd",
        ["s"] = "北广场|e,n,s,w",
      },
    },

    -- 重名：南大街 x2（按 key 顺序编号）
    ["南大街|e,n,s,w"] = {
      name = "南大街1",
      exits = {
        ["e"] = "承恩寺|w",
        ["n"] = "内桥|n,s,w",
        ["s"] = "南大街1|e,n,s,w",
        ["w"] = "建康府|e",
      },
    },
    ["建康府|e"] = {
      name = "建康府",
      exits = {
        ["e"] = "南大街|e,n,s,w",
      },
    },
    ["南大街1|e,n,s,w"] = {
      name = "南大街2",
      exits = {
        ["e"] = "大中街|e,s,sw,w",
        ["n"] = "南大街|e,n,s,w",
        ["s"] = "镇淮桥|e,n,ne,s,w",
        ["w"] = "三山街|e,w",
      },
    },

    ["南广场|e,n,s,w"] = {
      name = "南广场",
      exits = {
        ["e"] = "广场东南|n,w",
        ["n"] = "中央广场|e,n,s,w",
        ["s"] = "中城|e,n,s,w",
        ["w"] = "广场西南|e,n",
      },
    },

    -- 重名：回廊 x4（按 key 顺序编号）
    ["回廊|enter,out"] = {
      name = "回廊1",
      exits = {
        ["out"] = "状元楼|enter,n",
      },
    },

    -- 重名：土路 x3
    ["土路|ed,nu,w"] = {
      name = "土路1",
      exits = {
        ["ed"] = "土路|ne,se,sw,wu",
        ["nu"] = "钟山|sd",
        ["w"] = "朝阳门|e,n,nw,s,w",
      },
    },
    ["土路|ne,se,sw,wu"] = {
      name = "土路2",
      exits = {
        ["ne"] = "土路|ne,sw",
        ["se"] = "常州|n,nw,se,su,sw",
        ["sw"] = "溧阳|ne,se,sw",
        ["wu"] = "土路|ed,nu,w",
      },
    },
    ["土路|ne,sw"] = {
      name = "土路3",
      exits = {
        ["ne"] = "宝华山|ne,sw",
        ["sw"] = "土路|ne,se,sw,wu",
      },
    },

    -- 重名：城北官道 x2
    ["城北官道|e,nw,sd"] = {
      name = "城北官道1",
      exits = {
        ["e"] = "玄武湖畔|enter,w",
        ["nw"] = "狮子山脚|ne,nwu,se",
        ["sd"] = "城北官道|nu,s,w",
      },
    },
    ["城北官道|nu,s,w"] = {
      name = "城北官道2",
      exits = {
        ["nu"] = "城北官道|e,nw,sd",
        ["s"] = "神策门|e,n,s,w",
        ["w"] = "窝棚|e",
      },
    },

    -- 重名：城西大街 x2
    ["城西大街|e,n,nw,w"] = {
      name = "城西大街1",
      exits = {
        ["e"] = "朝天宫|e,w",
        ["n"] = "灵英观|s,w",
        ["nw"] = "城西大街|e,nu,se,sw,w",
        ["w"] = "石城门|e,nw,se,sw",
      },
    },
    ["城西大街|e,nu,se,sw,w"] = {
      name = "城西大街2",
      exits = {
        ["e"] = "灵英观|s,w",
        ["nu"] = "清凉山|ed,enter,nd,sd,w",
        ["se"] = "城西大街|e,n,nw,w",
        ["w"] = "清凉门|e,nw,s,se,wu",
      },
    },

    ["太平门|e,se,sw,w"] = {
      name = "太平门",
      exits = {
        ["se"] = "小巷|nw,se",
        ["sw"] = "纵星桥|ne,s,sw,w",
      },
    },
    ["存义街|e,n,s,w"] = {
      name = "存义街",
      exits = {
        ["e"] = "里仁街|ne,w",
        ["n"] = "杂货铺|s",
        ["s"] = "状元楼|enter,n",
        ["w"] = "中城|e,n,s,w",
      },
    },

    -- 重名：官道 x2
    ["官道|ed,sw"] = {
      name = "官道1",
      exits = {
        ["ed"] = "清凉门|e,nw,s,se,wu",
        ["sw"] = "官道|ne,nw,s",
      },
    },
    ["官道|ne,nw,s"] = {
      name = "官道2",
      exits = {
        ["ne"] = "官道|ed,sw",
        ["nw"] = "采石矶|ne,se,sw",
        ["s"] = "当涂|n,sw",
      },
    },

    ["定淮门|ne,nw,se"] = {
      name = "定淮门",
      exits = {
        ["ne"] = "军营|e,n,nw,sw,w",
      },
    },
    ["宝华山|ne,sw"] = {
      name = "宝华山",
      exits = {
        ["sw"] = "土路|ne,sw",
      },
    },

    -- 重名：小巷 x2
    ["小巷|e,s,w"] = {
      name = "小巷1",
      exits = {
        ["e"] = "内桥|n,s,w",
        ["s"] = "云来客栈|enter,n",
        ["w"] = "药铺|e,enter",
      },
    },
    ["小巷|nw,se"] = {
      name = "小巷2",
      exits = {
        ["nw"] = "太平门|e,se,sw,w",
        ["se"] = "朝阳门|e,n,nw,s,w",
      },
    },

    ["小路|se,w"] = {
      name = "小路",
      exits = {
        ["se"] = "军营|e,n,nw,sw,w",
        ["w"] = "仪凤门|e,ne,se",
      },
    },
    ["小酒馆|w"] = {
      name = "小酒馆",
      exits = {
        ["w"] = "北门桥|e,n,neu,s",
      },
    },
    ["山路|nd,se,su,w"] = {
      name = "山路",
      exits = {
        ["nd"] = "军仓|e,n,su,w",
        ["se"] = "西广场|e,n,nw,s",
        ["su"] = "清凉山|ed,enter,nd,sd,w",
      },
    },
    ["山顶|sed"] = {
      name = "山顶",
      exits = {
        ["sed"] = "狮子山脚|ne,nwu,se",
      },
    },
    ["常州|n,nw,se,su,sw"] = {
      name = "常州",
      exits = {
        ["nw"] = "土路|ne,se,sw,wu",
      },
    },
    ["广场东北|s,w"] = {
      name = "广场东北",
      exits = {
        ["s"] = "东广场|e,n,s,w",
        ["w"] = "北广场|e,n,s,w",
      },
    },
    ["广场东南|n,w"] = {
      name = "广场东南",
      exits = {
        ["n"] = "东广场|e,n,s,w",
        ["w"] = "南广场|e,n,s,w",
      },
    },
    ["广场西北|e,s"] = {
      name = "广场西北",
      exits = {
        ["e"] = "北广场|e,n,s,w",
        ["s"] = "西广场|e,n,nw,s",
      },
    },
    ["广场西南|e,n"] = {
      name = "广场西南",
      exits = {
        ["e"] = "南广场|e,n,s,w",
        ["n"] = "西广场|e,n,nw,s",
      },
    },
    ["建康府南城宠物店|e"] = {
      name = "建康府南城宠物店",
      exits = {
        ["e"] = "长街|n,s,w",
      },
    },
    ["当涂|n,sw"] = {
      name = "当涂",
      exits = {
        ["n"] = "官道|ne,nw,s",
      },
    },
    ["当铺|n"] = {
      name = "当铺",
      exits = {
        ["n"] = "下街口|e,n,s,w",
      },
    },
    ["承恩寺|w"] = {
      name = "承恩寺",
      exits = {
        ["w"] = "南大街|e,n,s,w",
      },
    },
    ["月记票号|s"] = {
      name = "月记票号",
      exits = {
        ["s"] = "下街口|e,n,s,w",
      },
    },
    ["朝天宫|e,w"] = {
      name = "朝天宫",
      exits = {
        ["e"] = "下街口|e,n,s,w",
        ["w"] = "城西大街|e,n,nw,w",
      },
    },
    ["朝阳门|e,n,nw,s,w"] = {
      name = "朝阳门",
      exits = {
        ["e"] = "土路|ed,nu,w",
        ["nw"] = "小巷|nw,se",
        ["w"] = "都府东门|e,w",
      },
    },
    ["杂货铺|s"] = {
      name = "杂货铺",
      exits = {
        ["s"] = "存义街|e,n,s,w",
      },
    },
    ["永济渡|e,sw,w"] = {
      name = "永济渡",
      exits = {
        ["sw"] = "狮子山脚|ne,nwu,se",
      },
    },
    ["清凉寺|n,out"] = {
      name = "清凉寺",
      exits = {
        ["out"] = "清凉山|ed,enter,nd,sd,w",
      },
    },
    ["清凉山|ed,enter,nd,sd,w"] = {
      name = "清凉山",
      exits = {
        ["ed"] = "乌龙潭|wu",
        ["enter"] = "清凉寺|n,out",
        ["nd"] = "山路|nd,se,su,w",
        ["sd"] = "城西大街|e,nu,se,sw,w",
      },
    },
    ["清凉门|e,nw,s,se,wu"] = {
      name = "清凉门",
      exits = {
        ["e"] = "城西大街|e,nu,se,sw,w",
        ["s"] = "湖边路|n,sd",
        ["wu"] = "官道|ed,sw",
      },
    },
    ["湖边路|n,sd"] = {
      name = "湖边路",
      exits = {
        ["n"] = "清凉门|e,nw,s,se,wu",
      },
    },
    ["溧阳|ne,se,sw"] = {
      name = "溧阳",
      exits = {
        ["ne"] = "土路|ne,se,sw,wu",
      },
    },
    ["灵英观|s,w"] = {
      name = "灵英观",
      exits = {
        ["s"] = "城西大街|e,n,nw,w",
        ["w"] = "城西大街|e,nu,se,sw,w",
      },
    },
    ["状元楼|enter,n"] = {
      name = "状元楼",
      exits = {
        ["enter"] = "回廊|enter,out",
        ["n"] = "存义街|e,n,s,w",
      },
    },
    ["狮子山脚|ne,nwu,se"] = {
      name = "狮子山脚",
      exits = {
        ["ne"] = "永济渡|e,sw,w",
        ["nwu"] = "山顶|sed",
        ["se"] = "城北官道|e,nw,sd",
      },
    },
    ["玄武湖畔|enter,w"] = {
      name = "玄武湖畔",
      exits = {
        ["enter"] = "计氏马车分行|out",
        ["w"] = "城北官道|e,nw,sd",
      },
    },
    ["田间路|ne,sw"] = {
      name = "田间路",
      exits = {
        ["ne"] = "石城门|e,nw,se,sw",
      },
    },
    ["睡房|out"] = {
      name = "睡房",
      exits = {
        ["out"] = "云来客栈|enter,n",
      },
    },
    ["石刻经幢|w"] = {
      name = "石刻经幢",
      exits = {
        ["w"] = "鸡鸣山|e,enter,n,swd,wd",
      },
    },
    ["石城门|e,nw,se,sw"] = {
      name = "石城门",
      exits = {
        ["e"] = "城西大街|e,n,nw,w",
        ["sw"] = "田间路|ne,sw",
      },
    },
    ["神策门|e,n,s,w"] = {
      name = "神策门",
      exits = {
        ["n"] = "城北官道|nu,s,w",
        ["s"] = "北城|n,nw,s,se,sw",
      },
    },
    ["窝棚|e"] = {
      name = "窝棚",
      exits = {
        ["e"] = "城北官道|nu,s,w",
      },
    },
    ["纵星桥|ne,s,sw,w"] = {
      name = "纵星桥",
      exits = {
        ["ne"] = "太平门|e,se,sw,w",
        ["s"] = "都府后门|n,s",
        ["sw"] = "里仁街|ne,w",
        ["w"] = "青石路|e,w",
      },
    },
    ["药铺|e,enter"] = {
      name = "药铺",
      exits = {
        ["e"] = "小巷|e,s,w",
      },
    },
    ["西广场|e,n,nw,s"] = {
      name = "西广场",
      exits = {
        ["e"] = "中央广场|e,n,s,w",
        ["n"] = "广场西北|e,s",
        ["nw"] = "山路|nd,se,su,w",
        ["s"] = "广场西南|e,n",
      },
    },
    ["西门|e,w"] = {
      name = "西门",
      exits = {
        ["w"] = "长街|e,n,s",
        ["e"] = "回廊|e,n,s,w",
      },
    },
    ["计氏马车分行|out"] = {
      name = "计氏马车分行",
      exits = {
        ["out"] = "玄武湖畔|enter,w",
      },
    },
    ["都府东门|e,w"] = {
      name = "都府东门",
      exits = {
        ["e"] = "朝阳门|e,n,nw,s,w",
        ["w"] = "回廊1|e,n,s,w",
      },
    },
    ["都府后门|n,s"] = {
      name = "都府后门",
      exits = {
        ["n"] = "纵星桥|ne,s,sw,w",
      },
    },
    ["采石矶|ne,se,sw"] = {
      name = "采石矶",
      exits = {
        ["se"] = "官道|ne,nw,s",
      },
    },
    ["里仁街|ne,w"] = {
      name = "里仁街",
      exits = {
        ["ne"] = "纵星桥|ne,s,sw,w",
        ["w"] = "存义街|e,n,s,w",
      },
    },
    ["金川门|e,se,w"] = {
      name = "金川门",
      exits = {
        ["se"] = "北城|n,nw,s,se,sw",
      },
    },
    ["钟山|sd"] = {
      name = "钟山",
      exits = {
        ["sd"] = "土路|ed,nu,w",
      },
    },
    ["钟楼|n"] = {
      name = "钟楼",
      exits = {
        ["n"] = "北城|n,nw,s,se,sw",
      },
    },
    ["钟阜门|nw,s,se"] = {
      name = "钟阜门",
      exits = {
        ["s"] = "军营|e,n,nw,sw,w",
      },
    },

    -- 重名：长街 x2
    ["长街|e,n,s"] = {
      name = "长街1",
      exits = {
        ["e"] = "西门|e,w",
        ["n"] = "中城|e,n,s,w",
        ["s"] = "长街|n,s,w",
      },
    },
    ["长街|n,s,w"] = {
      name = "长街2",
      exits = {
        ["n"] = "长街|e,n,s",
        ["s"] = "内桥|n,s,w",
        ["w"] = "建康府南城宠物店|e",
      },
    },

    ["青石路|e,w"] = {
      name = "青石路",
      exits = {
        ["e"] = "纵星桥|ne,s,sw,w",
        ["w"] = "东广场|e,n,s,w",
      },
    },
    ["鸡鸣寺|out"] = {
      name = "鸡鸣寺",
      exits = {
        ["out"] = "鸡鸣山|e,enter,n,swd,wd",
      },
    },
    ["鸡鸣山|e,enter,n,swd,wd"] = {
      name = "鸡鸣山",
      exits = {
        ["e"] = "石刻经幢|w",
        ["enter"] = "鸡鸣寺|out",
        ["swd"] = "北门桥|e,n,neu,s",
        ["wd"] = "鼓楼|eu,n,nw,s",
      },
    },

    -- ====== 新增区块：府衙/内院等（去掉了 key 重复的后拷贝，只保留第一份）======
    ["东耳房|w"] = {
      name = "东耳房",
      exits = {
        ["w"] = "前院|e,n,s,w",
      },
    },
    ["亲军营|nw,s"] = {
      name = "亲军营",
      exits = {
        ["nw"] = "系马石|se,w",
        ["s"] = "正阳门|e,n,s,w",
      },
    },
    ["仆人房|e"] = {
      name = "仆人房",
      exits = {
        ["e"] = "前厅|e,n,s,w",
      },
    },

    -- 重名：侍卫房 x2（按 key 顺序编号）
    ["侍卫房|n"] = {
      name = "侍卫房1",
      exits = {
        ["n"] = "回廊1|e,n,s,w",
      },
    },
    ["侍卫房|w"] = {
      name = "侍卫房2",
      exits = {
        ["w"] = "前厅|e,n,s,w",
      },
    },

    ["前厅|e,n,s,w"] = {
      name = "前厅",
      exits = {
        ["e"] = "侍卫房|w",
        ["n"] = "回廊|n,s",
        ["s"] = "都统制府大门|e,n,s",
        ["w"] = "仆人房|e",
      },
    },
    ["前院|e,n,s,w"] = {
      name = "前院",
      exits = {
        ["e"] = "东耳房|w",
        ["n"] = "大厅|e,n,s,w",
        ["s"] = "回廊|n,s",
        ["w"] = "西耳房|e",
      },
    },
    ["右厢房|s,w"] = {
      name = "右厢房",
      exits = {
        ["w"] = "后厅|e,n,s,w",
      },
    },
    ["后厅|e,n,s,w"] = {
      name = "后厅",
      exits = {
        ["e"] = "右厢房|s,w",
        ["n"] = "后庭|n,s",
        ["s"] = "练武场|e,n,s",
        ["w"] = "左厢房|e",
      },
    },
    ["后庭|n,s"] = {
      name = "后庭",
      exits = {
        ["s"] = "后厅|e,n,s,w",
      },
    },

    ["回廊|e,n,s,w"] = {
      name = "回廊2",
      exits = {
        ["e"] = "大厅|e,n,s,w",
        ["n"] = "小厨房|s",
        ["s"] = "帐房|n",
        ["w"] = "西门|e,w",
      },
    },
    ["小厨房|s"] = {
      name = "小厨房",
      exits = {
        ["s"] = "回廊|e,n,s,w",
      },
    },
    ["帐房|n"] = {
      name = "帐房",
      exits = {
        ["n"] = "回廊|e,n,s,w",
      },
    },

    ["回廊1|e,n,s,w"] = {
      name = "回廊3",
      exits = {
        ["e"] = "都府东门|e,w",
        ["s"] = "侍卫房|n",
        ["w"] = "大厅|e,n,s,w",
      },
    },

    ["回廊|n,s"] = {
      name = "回廊4",
      exits = {
        ["n"] = "前院|e,n,s,w",
        ["s"] = "前厅|e,n,s,w",
      },
    },

    ["圣府|e,n,s,w"] = {
      name = "圣府",
      exits = {
        ["e"] = "淮清桥|e,n,s,w",
        ["n"] = "贡院|s",
        ["w"] = "大中街|e,s,sw,w",
      },
    },
    ["城南官道|n,s"] = {
      name = "城南官道",
      exits = {
        ["n"] = "聚宝门|e,n,s,w",
      },
    },
    ["大中街|e,s,sw,w"] = {
      name = "大中街",
      exits = {
        ["e"] = "圣府|e,n,s,w",
        ["sw"] = "绛云楼|ne,sw",
        ["w"] = "南大街1|e,n,s,w",
      },
    },
    ["大厅|e,n,s,w"] = {
      name = "大厅",
      exits = {
        ["e"] = "回廊1|e,n,s,w",
        ["n"] = "练武场|e,n,s",
        ["s"] = "前院|e,n,s,w",
        ["w"] = "回廊|e,n,s,w",
      },
    },
    ["左厢房|e"] = {
      name = "左厢房",
      exits = {
        ["e"] = "后厅|e,n,s,w",
      },
    },
    ["正阳门|e,n,s,w"] = {
      name = "正阳门",
      exits = {
        ["n"] = "亲军营|nw,s",
        ["s"] = "青石官道|n,se",
      },
    },
    ["淮清桥|e,n,s,w"] = {
      name = "淮清桥",
      exits = {
        ["e"] = "通济门|e,s,se,w",
        ["n"] = "都统制府大门|e,n,s",
        ["w"] = "圣府|e,n,s,w",
      },
    },
    ["石牛堡|nw,s"] = {
      name = "石牛堡",
      exits = {
        ["nw"] = "通济门|e,s,se,w",
      },
    },
    ["系马石|se,w"] = {
      name = "系马石",
      exits = {
        ["se"] = "亲军营|nw,s",
        ["w"] = "都统制府大门|e,n,s",
      },
    },
    ["练武场|e,n,s"] = {
      name = "练武场",
      exits = {
        ["n"] = "后厅|e,n,s,w",
        ["s"] = "大厅|e,n,s,w",
      },
    },
    ["绛云楼|ne,sw"] = {
      name = "绛云楼",
      exits = {
        ["ne"] = "大中街|e,s,sw,w",
        ["sw"] = "镇淮桥|e,n,ne,s,w",
      },
    },
    ["聚宝门|e,n,s,w"] = {
      name = "聚宝门",
      exits = {
        ["n"] = "镇淮桥|e,n,ne,s,w",
        ["s"] = "城南官道|n,s",
      },
    },
    ["西耳房|e"] = {
      name = "西耳房",
      exits = {
        ["e"] = "前院|e,n,s,w",
      },
    },
    ["贡院|s"] = {
      name = "贡院",
      exits = {
        ["s"] = "圣府|e,n,s,w",
      },
    },
    ["通济门|e,s,se,w"] = {
      name = "通济门",
      exits = {
        ["se"] = "石牛堡|nw,s",
        ["w"] = "淮清桥|e,n,s,w",
      },
    },
    ["都统制府大门|e,n,s"] = {
      name = "都统制府大门",
      exits = {
        ["e"] = "系马石|se,w",
        ["n"] = "前厅|e,n,s,w",
        ["s"] = "淮清桥|e,n,s,w",
      },
    },
    ["金陵镖局|e"] = {
      name = "金陵镖局",
      exits = {
        ["e"] = "镇淮桥|e,n,ne,s,w",
      },
    },
    ["镇淮桥|e,n,ne,s,w"] = {
      name = "镇淮桥",
      exits = {
        ["n"] = "南大街1|e,n,s,w",
        ["ne"] = "绛云楼|ne,sw",
        ["s"] = "聚宝门|e,n,s,w",
        ["w"] = "金陵镖局|e",
      },
    },
    ["青石官道|n,se"] = {
      name = "青石官道",
      exits = {
        ["n"] = "正阳门|e,n,s,w",
      },
    },
    ["鼓楼|eu,n,nw,s"] = {
      name = "鼓楼",
      exits = {
        ["eu"] = "鸡鸣山|e,enter,n,swd,wd",
        ["nw"] = "北城|n,nw,s,se,sw",
        ["s"] = "北门桥|e,n,neu,s",
      },
    },
  },
}

-- ====== 为所有房间生成 mapAliases（含编号后的名字）======
mapper.maps["jk"].mapAliases = {

  -- 推荐原点（可按需修改）
  ["中央广场"] = "zygc",

  ["三山街"] = "ssj",
  ["三山门"] = "ssm",
  ["下街口"] = "xjk",
  ["东广场"] = "dgc",
  ["中城"] = "origin",
  ["乌龙潭"] = "wlt",
  ["云来客栈"] = "ylkz",
  ["仪凤门"] = "yfm",
  ["内桥"] = "nq",
  ["军仓"] = "jc",

  ["军营1"] = "jy1",
  ["军营2"] = "jy2",

  ["北城"] = "bc",
  ["北广场"] = "bgc",
  ["北门桥"] = "bmq",

  ["南大街1"] = "ndj1",
  ["南大街2"] = "ndj2",
  ["建康府"] = "jkf",

  ["南广场"] = "ngc",

  ["回廊1"] = "hl",
  ["回廊2"] = "hl2",
  ["回廊3"] = "hl3",
  ["回廊4"] = "hl4",

  ["土路1"] = "tl",
  ["土路2"] = "tl2",
  ["土路3"] = "tl3",

  ["城北官道1"] = "cbgd",
  ["城北官道2"] = "cbgd2",

  ["城西大街1"] = "cxdj",
  ["城西大街2"] = "cxdj2",

  ["太平门"] = "tpm",
  ["存义街"] = "cyj",

  ["官道1"] = "gd",
  ["官道2"] = "gd2",

  ["定淮门"] = "dhm",
  ["宝华山"] = "bhs",

  ["小巷1"] = "xx",
  ["小巷2"] = "xx2",

  ["小路"] = "xl",
  ["小酒馆"] = "xjg",
  ["山路"] = "sl",
  ["山顶"] = "sding",
  ["常州"] = "cz",

  ["广场东北"] = "gcdb",
  ["广场东南"] = "gcdn",
  ["广场西北"] = "gcxb",
  ["广场西南"] = "gcxn",

  ["建康府南城宠物店"] = "cwshop",
  ["当涂"] = "dt",
  ["当铺"] = "dp",
  ["承恩寺"] = "ces",
  ["月记票号"] = "yjph",
  ["朝天宫"] = "ctg",
  ["朝阳门"] = "cym",
  ["杂货铺"] = "zhp",
  ["永济渡"] = "yjd",
  ["清凉寺"] = "qlsi",
  ["清凉山"] = "qlshan",
  ["清凉门"] = "qlm",
  ["湖边路"] = "hbl",
  ["溧阳"] = "ly",
  ["灵英观"] = "lyg",
  ["状元楼"] = "zyl",
  ["狮子山脚"] = "szsj",
  ["玄武湖畔"] = "xwhp",
  ["田间路"] = "tjl",
  ["睡房"] = "sf",
  ["石刻经幢"] = "skjz",
  ["石城门"] = "scm",
  ["神策门"] = "scmen",
  ["窝棚"] = "wp",
  ["纵星桥"] = "zxq",
  ["药铺"] = "yp",
  ["西广场"] = "xgc",
  ["西门"] = "xm",
  ["计氏马车分行"] = "mch",
  ["都府东门"] = "dfdm",
  ["都府后门"] = "dfhm",
  ["采石矶"] = "csj",
  ["里仁街"] = "lrj",
  ["金川门"] = "jcm",
  ["钟山"] = "zs",
  ["钟楼"] = "zl",
  ["钟阜门"] = "zfm",

  ["长街1"] = "cj",
  ["长街2"] = "cj2",

  ["青石路"] = "qsl",
  ["鸡鸣寺"] = "jmsi",
  ["鸡鸣山"] = "jms",
  ["鼓楼"] = "gl",

  -- 新增/府衙区
  ["东耳房"] = "def",
  ["西耳房"] = "xef",
  ["亲军营"] = "qjy",
  ["仆人房"] = "prf",

  ["侍卫房1"] = "swf",
  ["侍卫房2"] = "swf2",

  ["前厅"] = "qt",
  ["前院"] = "qy",
  ["大厅"] = "mzj",
  ["右厢房"] = "yxf",
  ["左厢房"] = "zxf",
  ["后厅"] = "ht",
  ["后庭"] = "hti",
  ["练武场"] = "lwc",

  ["小厨房"] = "xcf",
  ["帐房"] = "zhf",

  ["正阳门"] = "zym",
  ["青石官道"] = "qsgd",

  ["大中街"] = "dzj",
  ["圣府"] = "shf",
  ["贡院"] = "gy",

  ["淮清桥"] = "hqq",
  ["通济门"] = "tjm",
  ["系马石"] = "xms",
  ["石牛堡"] = "snb",

  ["都统制府大门"] = "dtdm",
  ["金陵镖局"] = "jlbj",

  ["聚宝门"] = "jbm",
  ["城南官道"] = "cngd",
  ["镇淮桥"] = "zhq",

  ["绛云楼"] = "jyl",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>义兴 - yx</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["yx"] = {
  region = {
    key  = "yx",      -- 区域代号，用在 goto wx.xxx 里
    name = "义兴",    -- 纯注释/显示用
  },

  mapNodes = {
    ["义兴县城|e,enter,n,s,w"] = {
      name = "义兴县城",
      exits = {
        ["e"] = "周处家|w",
        ["enter"] = "县城府衙|out",
        ["n"] = "北门|n,nw,s",
        ["s"] = "南大街|n,s,se",
        ["w"] = "西门|e,nw,wd",
      },
    },
    ["乱葬岗|se"] = {
      name = "乱葬岗",
      exits = {
        ["se"] = "北门|n,nw,s",
      },
    },
    ["北门|n,nw,s"] = {
      name = "北门",
      exits = {
        ["n"] = "山路|n,ne,s,se",
        ["nw"] = "乱葬岗|se",
        ["s"] = "义兴县城|e,enter,n,s,w",
      },
    },
    ["南大街|n,s,se"] = {
      name = "南大街",
      exits = {
        ["n"] = "义兴县城|e,enter,n,s,w",
        ["s"] = "南门|n,s,se",
        ["se"] = "流云客栈|enter,nw",
      },
    },
    ["南门|n,s,se"] = {
      name = "南门",
      exits = {
        ["n"] = "南大街|n,s,se",
        ["s"] = "湖边官道|n,nw,se",
        ["se"] = "太湖湖畔|nw,se",
      },
    },
    ["县城府衙|out"] = {
      name = "县城府衙",
      exits = {
        ["out"] = "义兴县城|e,enter,n,s,w",
      },
    },
    ["周处家|w"] = {
      name = "周处家",
      exits = {
        ["w"] = "义兴县城|e,enter,n,s,w",
      },
    },
    ["土路|ne,se,sw,wu"] = {
      name = "土路",
      exits = {
        ["sw"] = "溧阳|ne,se,sw",
      },
    },
    ["大湖|eu"] = {
      name = "大湖",
      exits = {
        ["eu"] = "西门|e,nw,wd",
      },
    },
    ["太湖湖畔|nw,se"] = {
      name = "太湖湖畔",
      exits = {
        ["nw"] = "南门|n,s,se",
      },
    },
    ["寨桥镇|ne,s"] = {
      name = "寨桥镇",
      exits = {
        ["s"] = "山路|n,ne,s,se",
      },
    },
    ["小路|ne,s,wu"] = {
      name = "小路",
      exits = {
        ["ne"] = "草地|se,sw",
        ["s"] = "湖边官道|n,se",
        ["wu"] = "张公洞|ed,ne,sw",
      },
    },
    ["山林深处|nw"] = {
      name = "山林深处",
      exits = {
        ["nw"] = "山路|n,ne,s,se",
      },
    },
    ["山路|n,ne,s,se"] = {
      name = "山路",
      exits = {
        ["n"] = "寨桥镇|ne,s",
        ["ne"] = "阳山|s,sw",
        ["s"] = "北门|n,nw,s",
        ["se"] = "山林深处|nw",
      },
    },
    ["张公洞|ed,ne,sw"] = {
      name = "张公洞",
      exits = {
        ["ed"] = "小路|ne,s,wu",
        ["ne"] = "溧阳|ne,se,sw",
        ["sw"] = "江南小道|ne,w",
      },
    },
    ["江南小道|ne,w"] = {
      name = "江南小道",
      exits = {
        ["ne"] = "张公洞|ed,ne,sw",
      },
    },
    ["流云客栈|enter,nw"] = {
      name = "流云客栈",
      exits = {
        ["enter"] = "睡房|out",
        ["nw"] = "南大街|n,s,se",
      },
    },

    -- 重名：湖边官道 x2（按出现顺序编号）
    ["湖边官道|n,nw,se"] = {
      name = "湖边官道1",
      exits = {
        ["n"] = "南门|n,s,se",
      },
    },
    ["湖边官道|n,se"] = {
      name = "湖边官道2",
      exits = {
        ["n"] = "小路|ne,s,wu",
      },
    },

    ["溧阳|ne,se,sw"] = {
      name = "溧阳",
      exits = {
        ["ne"] = "土路|ne,se,sw,wu",
        ["se"] = "西门|e,nw,wd",
        ["sw"] = "张公洞|ed,ne,sw",
      },
    },
    ["睡房|out"] = {
      name = "睡房",
      exits = {
        ["out"] = "流云客栈|enter,nw",
      },
    },
    ["草地|se,sw"] = {
      name = "草地",
      exits = {
        ["sw"] = "小路|ne,s,wu",
      },
    },
    ["西门|e,nw,wd"] = {
      name = "西门",
      exits = {
        ["e"] = "义兴县城|e,enter,n,s,w",
        ["nw"] = "溧阳|ne,se,sw",
        ["wd"] = "大湖|eu",
      },
    },
    ["阳山|s,sw"] = {
      name = "阳山",
      exits = {
        ["sw"] = "山路|n,ne,s,se",
      },
    },
  },
}

-- ====== 为所有房间生成 mapAliases（含编号后的名字）======
mapper.maps["yx"].mapAliases = {

  ["义兴县城"] = "origin",
  ["县城府衙"] = "xcy",
  ["周处家"] = "zcj",

  ["北门"] = "bm",
  ["南大街"] = "ndj",
  ["南门"] = "nm",
  ["西门"] = "xm",

  ["乱葬岗"] = "lzg",
  ["山路"] = "sl",
  ["山林深处"] = "slsc",
  ["寨桥镇"] = "zqz",
  ["阳山"] = "ys",

  ["流云客栈"] = "lykz",
  ["睡房"] = "sf",

  ["太湖湖畔"] = "thhp",
  ["大湖"] = "dh",

  ["小路"] = "xl",
  ["草地"] = "cd",

  ["张公洞"] = "zgd",
  ["江南小道"] = "jnxd",

  ["溧阳"] = "ly",
  ["土路"] = "tl",

  ["湖边官道1"] = "hbgd",
  ["湖边官道2"] = "hbgd2",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>铜官镇 - tgz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["tgz"] = {
  region = {
    key  = "tgz",
    name = "铜官镇",
  },
  mapNodes = {
    ["东麓|se,wu"] = {
      name = "东麓",
      exits = {
        ["wu"] = "凤凰山|ed,ne,se,sw,wd",
      },
    },
    ["凤凰山|ed,ne,se,sw,wd"] = {
      name = "凤凰山",
      exits = {
        ["ed"] = "东麓|se,wu",
        ["ne"] = "山脊|sw",
        ["se"] = "山脚下|nw,se,wu",
        ["sw"] = "山脊|ne,sd,sed",
        ["wd"] = "铜官山|eu,nw",
      },
    },
    ["古矿道|enter,nwu,su"] = {
      name = "古矿道",
      exits = {
        ["enter"] = "矿洞|out",
        ["nwu"] = "山脊|ne,sd,sed",
        ["su"] = "滴水崖|nd",
      },
    },
    ["土路|ne,w"] = {
      name = "土路",
      exits = {
        ["w"] = "官道|e,s",
      },
    },
    ["官道|e,s"] = {
      name = "官道",
      exits = {
        ["e"] = "土路|ne,w",
        ["s"] = "官道|n,sw",
      },
    },
    ["官道|n,sw"] = {
      name = "官道1",
      exits = {
        ["n"] = "官道|e,s",
        ["sw"] = "拱极门|ne,sw",
      },
    },
    ["官道|n,sw,wu"] = {
      name = "官道2",
      exits = {
        ["n"] = "答阳门|ne,s",
        ["sw"] = "池州|ne,wu",
        ["wu"] = "小道|ed,sw",
      },
    },
    ["客店|w"] = {
      name = "客店",
      exits = {
        ["w"] = "铜官镇|e,n,ne,nw,su,sw",
      },
    },
    ["小道|ed,sw"] = {
      name = "小道",
      exits = {
        ["ed"] = "官道|n,sw,wu",
        ["sw"] = "青石官道|ed,ne,wu",
      },
    },
    ["山脊|ne,sd,sed"] = {
      name = "山脊",
      exits = {
        ["ne"] = "凤凰山|ed,ne,se,sw,wd",
        ["sd"] = "桃花潭|nu,s",
        ["sed"] = "古矿道|enter,nwu,su",
      },
    },
    ["山脊|sw"] = {
      name = "山脊1",
      exits = {
        ["sw"] = "凤凰山|ed,ne,se,sw,wd",
      },
    },
    ["山脚下|nw,se,wu"] = {
      name = "山脚下",
      exits = {
        ["nw"] = "凤凰山|ed,ne,se,sw,wd",
      },
    },
    ["山路|nd,su"] = {
      name = "山路",
      exits = {
        ["nd"] = "谷底|n,su",
        ["su"] = "山路|nd,su",
      },
    },
    ["山间小路|nd,se"] = {
      name = "山间小路",
      exits = {
        ["nd"] = "铜官镇|e,n,ne,nw,su,sw",
        ["se"] = "铜官山|eu,nw",
      },
    },
    ["拱极门|ne,sw"] = {
      name = "拱极门",
      exits = {
        ["ne"] = "官道|n,sw",
        ["sw"] = "铜官镇|e,n,ne,nw,su,sw",
      },
    },
    ["桃花潭|nu,s"] = {
      name = "桃花潭",
      exits = {
        ["nu"] = "山脊|ne,sd,sed",
        ["s"] = "谷底|n,su",
      },
    },
    ["江边|nd,se"] = {
      name = "江边",
      exits = {
        ["se"] = "铜官镇|e,n,ne,nw,su,sw",
      },
    },
    ["池州|ne,wu"] = {
      name = "池州",
      exits = {
        ["ne"] = "官道|n,sw,wu",
        ["wu"] = "青石官道|ed,ne,wu",
      },
    },
    ["滴水崖|nd"] = {
      name = "滴水崖",
      exits = {
        ["nd"] = "古矿道|enter,nwu,su",
      },
    },
    ["矿洞|out"] = {
      name = "矿洞",
      exits = {
        ["out"] = "古矿道|enter,nwu,su",
      },
    },
    ["答阳门|ne,s"] = {
      name = "答阳门",
      exits = {
        ["ne"] = "铜官镇|e,n,ne,nw,su,sw",
        ["s"] = "官道|n,sw,wu",
      },
    },
    ["谷底|n,su"] = {
      name = "谷底",
      exits = {
        ["n"] = "桃花潭|nu,s",
        ["su"] = "山路|nd,su",
      },
    },
    ["酒铺|s"] = {
      name = "酒铺",
      exits = {
        ["s"] = "铜官镇|e,n,ne,nw,su,sw",
      },
    },
    ["铜官山|eu,nw"] = {
      name = "铜官山",
      exits = {
        ["eu"] = "凤凰山|ed,ne,se,sw,wd",
        ["nw"] = "山间小路|nd,se",
      },
    },
    ["铜官镇|e,n,ne,nw,su,sw"] = {
      name = "铜官镇",
      exits = {
        ["e"] = "客店|w",
        ["n"] = "酒铺|s",
        ["ne"] = "拱极门|ne,sw",
        ["nw"] = "江边|nd,se",
        ["su"] = "山间小路|nd,se",
        ["sw"] = "答阳门|ne,s",
      },
    },
    ["青石官道|ed,ne,wu"] = {
      name = "青石官道",
      exits = {
        ["ed"] = "池州|ne,wu",
        ["ne"] = "小道|ed,sw",
      },
    },
  },
}

-- 房间名 -&gt; 拼音缩写（按“编号后的房间名”生成）
mapper.maps["tgz"].mapAliases = {
  ["东麓"] = "dl",
  ["凤凰山"] = "fhs",
  ["古矿道"] = "gkd",
  ["土路"] = "tl",
  ["官道"] = "gd",
  ["官道1"] = "gd1",
  ["官道2"] = "gd2",
  ["客店"] = "kd",
  ["小道"] = "xd",
  ["山脊"] = "sj",
  ["山脊1"] = "sj1",
  ["山脚下"] = "sjx",
  ["山路"] = "sl",
  ["山间小路"] = "sjxl",
  ["拱极门"] = "gjm",
  ["桃花潭"] = "tht",
  ["江边"] = "jb",
  ["池州"] = "cz",
  ["滴水崖"] = "dsy",
  ["矿洞"] = "kdong",
  ["答阳门"] = "dym",
  ["谷底"] = "gdii",
  ["酒铺"] = "jp",
  ["铜官山"] = "tgs",
  ["铜官镇"] = "origin",
  ["青石官道"] = "qsgd",
}
</script>
					<eventHandlerList />
				</Script>
			</ScriptGroup>
			<ScriptGroup isActive="yes" isFolder="yes">
				<name>浙闽</name>
				<packageName></packageName>
				<script></script>
				<eventHandlerList />
				<Script isActive="yes" isFolder="no">
					<name>明州 - mz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["mz"] = {

  region = {
    key  = "mz",      -- 区域代号，用在 goto mz.xxx 里
    name = "明州",    -- 纯注释/显示用
  },

  mapNodes = {

    ["万利轩|se"] = {
      name = "万利轩",
      exits = {
        ["se"] = "明州古街|e,n,nw,se,sw",
      },
    },

    ["万工池|nu,w"] = {
      name = "万工池",
      exits = {
        ["nu"] = "山门|enter,sd",
        ["w"] = "上山路|e,wd",
      },
    },

    ["三隐潭|e,su"] = {
      name = "三隐潭",
      exits = {
        ["e"] = "御书亭|ne,nu,sd,w",
        ["su"] = "徐凫岩|nd",
      },
    },

    ["上山路|e,wd"] = {
      name = "上山路",
      exits = {
        ["e"] = "万工池|nu,w",
        ["wd"] = "太白山麓|eu,nw",
      },
    },

    ["东桂堂|n"] = {
      name = "东桂堂",
      exits = {
        ["n"] = "先觉堂|nw,s",
      },
    },

    ["予知客栈|enter,w"] = {
      name = "予知客栈",
      exits = {
        ["enter"] = "客房|out",
        ["w"] = "古街|e,n,s,w",
      },
    },

    ["云水堂|e,w"] = {
      name = "云水堂",
      exits = {
        ["e"] = "如意寮|w",
        ["w"] = "竹林小道|e,n,s,wd",
      },
    },

    ["保国寺|wd"] = {
      name = "保国寺",
      exits = {
        ["wd"] = "舜江西岸|eu,nw,se",
      },
    },

    ["先觉堂|nw,s"] = {
      name = "先觉堂",
      exits = {
        ["nw"] = "罗汉堂|s,se,sw,w",
        ["s"] = "东桂堂|n",
      },
    },

    ["千丈岩|sw"] = {
      name = "千丈岩",
      exits = {
        ["sw"] = "御书亭|ne,nu,sd,w",
      },
    },

    ["古松堂|se"] = {
      name = "古松堂",
      exits = {
        ["se"] = "石板路|e,nw,s",
      },
    },

    ["古街|e,n,s,w"] = {
      name = "古街",
      exits = {
        ["e"] = "予知客栈|enter,w",
        ["n"] = "庆元港|s",
        ["s"] = "鼓楼|e,n,s,w",
        ["w"] = "四明驿|e,n,w",
      },
    },

    ["四明驿|e,n,w"] = {
      name = "四明驿",
      exits = {
        ["e"] = "古街|e,n,s,w",
        ["n"] = "日本遣使驻地|enter,s",
        ["w"] = "金鸡亭|e,nw,s",
      },
    },

    ["回光楼|e,w"] = {
      name = "回光楼",
      exits = {
        ["e"] = "玉佛殿|nw,w",
        ["w"] = "天王殿|e,n,ne,nw,sd,w",
      },
    },

    ["城外土路|nd,s,se,sw,w"] = {
      name = "城外土路",
      exits = {
        ["nd"] = "明州城外|ne,se,su",
        ["s"] = "定光净寺|n,s,wu",
        ["se"] = "灵江西岸|nw",
        ["sw"] = "慈溪|ne,nw",
        ["w"] = "官道|e,nw",
      },
    },

    ["大鉴堂|n,s"] = {
      name = "大鉴堂",
      exits = {
        ["n"] = "罗汉堂|s,se,sw,w",
        ["s"] = "法堂|n,ne,nw,s,se,sw",
      },
    },

    ["大雄宝殿|n,s,se,sw"] = {
      name = "大雄宝殿",
      exits = {
        ["n"] = "竹林小道|e,n,s,wd",
        ["s"] = "天王殿|e,n,ne,nw,sd,w",
        ["se"] = "迦蓝殿|nw",
        ["sw"] = "祖师殿|ne,w",
      },
    },

    ["天封塔|nw"] = {
      name = "天封塔",
      exits = {
        ["nw"] = "明州古街|e,n,nw,se,sw",
      },
    },

    ["天王殿|e,n,ne,nw,sd,w"] = {
      name = "天王殿",
      exits = {
        ["e"] = "回光楼|e,w",
        ["n"] = "大雄宝殿|n,s,se,sw",
        ["ne"] = "新新堂|eu,sw",
        ["nw"] = "客堂|se",
        ["sd"] = "影壁|nu,out",
        ["w"] = "返照楼|e",
      },
    },

    ["太白山麓|eu,nw"] = {
      name = "太白山麓",
      exits = {
        ["eu"] = "上山路|e,wd",
        ["nw"] = "明州城外|ne,se,su",
      },
    },

    ["奎焕楼|wd"] = {
      name = "奎焕楼",
      exits = {
        ["wd"] = "自得斋|eu,nw",
      },
    },

    ["如意寮|w"] = {
      name = "如意寮",
      exits = {
        ["w"] = "云水堂|e,w",
      },
    },

    ["妙高台|sd"] = {
      name = "妙高台",
      exits = {
        ["sd"] = "御书亭|ne,nu,sd,w",
      },
    },

    ["官道|e,nw"] = {
      name = "官道",
      exits = {
        ["e"] = "城外土路|nd,s,se,sw,w",
      },
    },

    ["定光净寺|n,s,wu"] = {
      name = "定光净寺",
      exits = {
        ["n"] = "城外土路|nd,s,se,sw,w",
      },
    },

    ["客堂|se"] = {
      name = "客堂",
      exits = {
        ["se"] = "天王殿|e,n,ne,nw,sd,w",
      },
    },

    ["客房|out"] = {
      name = "客房",
      exits = {
        ["out"] = "予知客栈|enter,w",
      },
    },

    ["小码头|w"] = {
      name = "小码头",
      exits = {
        ["w"] = "明州古街|e,n,nw,se,sw",
      },
    },

    ["山门|enter,sd"] = {
      name = "山门",
      exits = {
        ["enter"] = "影壁|nu,out",
        ["sd"] = "万工池|nu,w",
      },
    },

    ["庆元港|s"] = {
      name = "庆元港",
      exits = {
        ["s"] = "古街|e,n,s,w",
      },
    },

    ["影壁|nu,out"] = {
      name = "影壁",
      exits = {
        ["nu"] = "天王殿|e,n,ne,nw,sd,w",
        ["out"] = "山门|enter,sd",
      },
    },

    ["徐凫岩|nd"] = {
      name = "徐凫岩",
      exits = {
        ["nd"] = "三隐潭|e,su",
      },
    },

    ["御书亭|ne,nu,sd,w"] = {
      name = "御书亭",
      exits = {
        ["ne"] = "千丈岩|sw",
        ["nu"] = "妙高台|sd",
        ["sd"] = "雪窦山下|nu,se",
        ["w"] = "三隐潭|e,su",
      },
    },

    ["慈溪|ne,nw"] = {
      name = "慈溪",
      exits = {
        ["ne"] = "城外土路|nd,s,se,sw,w",
        ["nw"] = "雪窦山下|nu,se",
      },
    },

    ["戒堂|se"] = {
      name = "戒堂",
      exits = {
        ["se"] = "石板路|n,nw,s,se",
      },
    },

    ["新新堂|eu,sw"] = {
      name = "新新堂",
      exits = {
        ["eu"] = "钟楼|se,wd",
        ["sw"] = "天王殿|e,n,ne,nw,sd,w",
      },
    },

    ["方丈室|ne,sw"] = {
      name = "方丈室",
      exits = {
        ["ne"] = "罗汉堂|s,se,sw,w",
        ["sw"] = "石板路|e,n,ne,nw,s",
      },
    },

    ["日本遣使驻地|enter,s"] = {
      name = "日本遣使驻地",
      exits = {
        ["s"] = "四明驿|e,n,w",
      },
    },

    ["明伦堂|e"] = {
      name = "明伦堂",
      exits = {
        ["e"] = "鼓楼|e,n,s,w",
      },
    },

    ["明州古街|e,n,nw,se,sw"] = {
      name = "明州古街",
      exits = {
        ["e"] = "小码头|w",
        ["n"] = "鼓楼|e,n,s,w",
        ["nw"] = "万利轩|se",
        ["se"] = "天封塔|nw",
        ["sw"] = "明州城外|ne,se,su",
      },
    },

    ["明州城外|ne,se,su"] = {
      name = "明州城外",
      exits = {
        ["ne"] = "明州古街|e,n,nw,se,sw",
        ["se"] = "太白山麓|eu,nw",
        ["su"] = "城外土路|nd,s,se,sw,w",
      },
    },

    ["明州府|w"] = {
      name = "明州府",
      exits = {
        ["w"] = "鼓楼|e,n,s,w",
      },
    },

    ["法堂|n,ne,nw,s,se,sw"] = {
      name = "法堂",
      exits = {
        ["n"] = "大鉴堂|n,s",
        ["ne"] = "立雪轩|sw",
        ["nw"] = "西壁居|se,w",
        ["s"] = "竹林小道|e,n,s,wd",
        ["se"] = "自得斋|eu,nw",
        ["sw"] = "静观室|ne",
      },
    },

    ["灵江西岸|nw"] = {
      name = "灵江西岸",
      exits = {
        ["nw"] = "城外土路|nd,s,se,sw,w",
      },
    },

    ["灵绪山|se,w"] = {
      name = "灵绪山",
      exits = {
        ["se"] = "舜江西岸|eu,nw,se",
      },
    },

    ["玉佛殿|nw,w"] = {
      name = "玉佛殿",
      exits = {
        ["nw"] = "钟楼|se,wd",
        ["w"] = "回光楼|e,w",
      },
    },

    ["田间|n,w"] = {
      name = "田间",
      exits = {
        ["n"] = "金鸡亭|e,nw,s",
      },
    },

    -- 石板路：5 个同名节点，按方案A编号去重（不改 key / exits）
    ["石板路|e,n,ne,nw,s"] = {
      name = "石板路",
      exits = {
        ["e"] = "西壁居|se,w",
        ["n"] = "石板路|e,nw,s",
        ["ne"] = "方丈室|ne,sw",
        ["nw"] = "长庚楼|se",
        ["s"] = "石板路|n,nw,s,se",
      },
    },

    ["石板路|e,n,nw"] = {
      name = "石板路2",
      exits = {
        ["e"] = "祖师殿|ne,w",
        ["n"] = "石板路|n,ne,s,sw",
        ["nw"] = "禅堂|ne,se",
      },
    },

    ["石板路|e,nw,s"] = {
      name = "石板路3",
      exits = {
        ["e"] = "罗汉堂|s,se,sw,w",
        ["nw"] = "古松堂|se",
        ["s"] = "石板路|e,n,ne,nw,s",
      },
    },

    ["石板路|n,ne,s,sw"] = {
      name = "石板路4",
      exits = {
        ["n"] = "石板路|n,nw,s,se",
        ["ne"] = "花圃|eu,nw,sw",
        ["s"] = "石板路|e,n,nw",
        ["sw"] = "禅堂|ne,se",
      },
    },

    ["石板路|n,nw,s,se"] = {
      name = "石板路5",
      exits = {
        ["n"] = "石板路|e,n,ne,nw,s",
        ["nw"] = "戒堂|se",
        ["s"] = "石板路|n,ne,s,sw",
        ["se"] = "花圃|eu,nw,sw",
      },
    },

    ["祖师殿|ne,w"] = {
      name = "祖师殿",
      exits = {
        ["ne"] = "大雄宝殿|n,s,se,sw",
        ["w"] = "石板路|e,n,nw",
      },
    },

    ["禅堂|ne,se"] = {
      name = "禅堂",
      exits = {
        ["ne"] = "石板路|n,ne,s,sw",
        ["se"] = "石板路|e,n,nw",
      },
    },

    ["立雪轩|sw"] = {
      name = "立雪轩",
      exits = {
        ["sw"] = "法堂|n,ne,nw,s,se,sw",
      },
    },

    ["竹林小道|e,n,s,wd"] = {
      name = "竹林小道",
      exits = {
        ["e"] = "云水堂|e,w",
        ["n"] = "法堂|n,ne,nw,s,se,sw",
        ["s"] = "大雄宝殿|n,s,se,sw",
        ["wd"] = "花圃|eu,nw,sw",
      },
    },

    ["罗汉堂|s,se,sw,w"] = {
      name = "罗汉堂",
      exits = {
        ["s"] = "大鉴堂|n,s",
        ["se"] = "先觉堂|nw,s",
        ["sw"] = "方丈室|ne,sw",
        ["w"] = "石板路|e,nw,s",
      },
    },

    ["自得斋|eu,nw"] = {
      name = "自得斋",
      exits = {
        ["eu"] = "奎焕楼|wd",
        ["nw"] = "法堂|n,ne,nw,s,se,sw",
      },
    },

    ["舜江西岸|eu,nw,se"] = {
      name = "舜江西岸",
      exits = {
        ["eu"] = "保国寺|wd",
        ["nw"] = "灵绪山|se,w",
        ["se"] = "金鸡亭|e,nw,s",
      },
    },

    ["花圃|eu,nw,sw"] = {
      name = "花圃",
      exits = {
        ["eu"] = "竹林小道|e,n,s,wd",
        ["nw"] = "石板路|n,nw,s,se",
        ["sw"] = "石板路|n,ne,s,sw",
      },
    },

    ["西壁居|se,w"] = {
      name = "西壁居",
      exits = {
        ["se"] = "法堂|n,ne,nw,s,se,sw",
        ["w"] = "石板路|e,n,ne,nw,s",
      },
    },

    ["返照楼|e"] = {
      name = "返照楼",
      exits = {
        ["e"] = "天王殿|e,n,ne,nw,sd,w",
      },
    },

    ["迦蓝殿|nw"] = {
      name = "迦蓝殿",
      exits = {
        ["nw"] = "大雄宝殿|n,s,se,sw",
      },
    },

    ["金鸡亭|e,nw,s"] = {
      name = "金鸡亭",
      exits = {
        ["e"] = "四明驿|e,n,w",
        ["nw"] = "舜江西岸|eu,nw,se",
        ["s"] = "田间|n,w",
      },
    },

    ["钟楼|se,wd"] = {
      name = "钟楼",
      exits = {
        ["se"] = "玉佛殿|nw,w",
        ["wd"] = "新新堂|eu,sw",
      },
    },

    ["长庚楼|se"] = {
      name = "长庚楼",
      exits = {
        ["se"] = "石板路|e,n,ne,nw,s",
      },
    },

    ["雪窦山下|nu,se"] = {
      name = "雪窦山下",
      exits = {
        ["nu"] = "御书亭|ne,nu,sd,w",
        ["se"] = "慈溪|ne,nw",
      },
    },

    ["静观室|ne"] = {
      name = "静观室",
      exits = {
        ["ne"] = "法堂|n,ne,nw,s,se,sw",
      },
    },

    ["鼓楼|e,n,s,w"] = {
      name = "鼓楼",
      exits = {
        ["e"] = "明州府|w",
        ["n"] = "古街|e,n,s,w",
        ["s"] = "明州古街|e,n,nw,se,sw",
        ["w"] = "明伦堂|e",
      },
    },

  }, -- mapNodes 结束
}

mapper.maps["mz"].mapAliases = {
  ["万利轩"]         = "wlx",
  ["万工池"]         = "wgc",
  ["三隐潭"]         = "syt",
  ["上山路"]         = "ssl",
  ["东桂堂"]         = "dgt",
  ["予知客栈"]       = "yzkz",
  ["云水堂"]         = "yst",
  ["保国寺"]         = "bgs",
  ["先觉堂"]         = "xjt",
  ["千丈岩"]         = "qzy",
  ["古松堂"]         = "gst",
  ["古街"]           = "gj",
  ["四明驿"]         = "smy",
  ["回光楼"]         = "hgl",
  ["城外土路"]       = "cwtl",
  ["大鉴堂"]         = "djd",
  ["大雄宝殿"]       = "dxbd",
  ["天封塔"]         = "tft",
  ["天王殿"]         = "twd",
  ["太白山麓"]       = "tbsl",
  ["奎焕楼"]         = "khl",
  ["如意寮"]         = "ryl",
  ["妙高台"]         = "mgt",
  ["官道"]           = "gd",
  ["定光净寺"]       = "dgjs",
  ["客堂"]           = "kt",
  ["客房"]           = "kf",
  ["小码头"]         = "xmt",
  ["山门"]           = "sm",
  ["庆元港"]         = "qyg",
  ["影壁"]           = "yb",
  ["徐凫岩"]         = "xfy",
  ["御书亭"]         = "yst2",   -- 避免和“云水堂(yst)”冲突
  ["慈溪"]           = "cx",
  ["戒堂"]           = "jt",
  ["新新堂"]         = "xxt",
  ["方丈室"]         = "fzs",
  ["日本遣使驻地"]   = "rbqszzd",
  ["明伦堂"]         = "mlt",
  ["明州古街"]       = "mzgz",
  ["明州城外"]       = "mzcw",
  ["明州府"]         = "mzf",
  ["法堂"]           = "ft",
  ["灵江西岸"]       = "ljxa",
  ["灵绪山"]         = "lxs",
  ["玉佛殿"]         = "yfd",
  ["田间"]           = "tj",

  -- 石板路：补齐去重后的别名
  ["石板路"]         = "sbl",
  ["石板路2"]        = "sbl2",
  ["石板路3"]        = "sbl3",
  ["石板路4"]        = "sbl4",
  ["石板路5"]        = "sbl5",

  ["祖师殿"]         = "zsd",
  ["禅堂"]           = "ct",
  ["立雪轩"]         = "lxx",
  ["竹林小道"]       = "zlxd",
  ["罗汉堂"]         = "lht",
  ["自得斋"]         = "zdz",
  ["舜江西岸"]       = "sjxa",
  ["花圃"]           = "hp",
  ["西壁居"]         = "xbj",
  ["返照楼"]         = "fzl",
  ["迦蓝殿"]         = "jld",
  ["金鸡亭"]         = "jjt",
  ["钟楼"]           = "zl",
  ["长庚楼"]         = "cgl",
  ["雪窦山下"]       = "xdsx",
  ["静观室"]         = "jgs",

  ["鼓楼"]           = "origin",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>闽中 - fz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {}

mapper.maps["fz"]= {

  region = {
    key  = "fz",      -- 区域代号，用在 goto wx.xxx 里
    name = "福州",    -- 纯注释/显示用
  },

  mapNodes = {

    ["东大街|e,n,s,se,w"] = {
      name = "东大街",
      exits = {
        ["e"]  = "福州港|w",
        ["n"]  = "福威镖局|n,s",
        ["s"]  = "福州港|n",
        ["se"] = "大宝号|nw",
        ["w"]  = "城中心|e,n,s,w",
      },
    },

    ["中心广场|e,n,s,w"] = {
      name = "中心广场",
      exits = {
        ["e"] = "宠物竞技场|u,w",
        ["n"] = "北门|ne,s",
        ["s"] = "南门|n,sw",
        ["w"] = "计氏马车分行|e",
      },
    },

    ["北大街|e,n,s,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "大树下|w",
        ["n"] = "北门|n,s",
        ["s"] = "城中心|e,n,s,w",
        ["w"] = "茶馆|e",
      },
    },

    -- 北门（去重：北门 / 北门1；不改 key）
    ["北门|n,s"] = {
      name = "北门",
      exits = {
        ["n"] = "山路|nu,s",
        ["s"] = "北大街|e,n,s,w",
      },
    },

    ["北门|ne,s"] = {
      name = "北门1",
      exits = {
        ["ne"] = "小路|ne,sw",
        ["s"]  = "中心广场|e,n,s,w",
      },
    },

    ["南大街|n,s,w"] = {
      name = "南大街",
      exits = {
        ["n"] = "城中心|e,n,s,w",
        ["s"] = "海边|n",
        ["w"] = "无相庵|e,n",
      },
    },

    ["南门|n,sw"] = {
      name = "南门",
      exits = {
        ["n"]  = "中心广场|e,n,s,w",
        ["sw"] = "山路|ne,sw",
      },
    },

    ["向阳巷|enter,s"] = {
      name = "向阳巷",
      exits = {
        ["enter"] = "向阳老宅|out",
        ["s"]     = "西大街|e,n,s,w",
      },
    },

    ["向阳老宅|out"] = {
      name = "向阳老宅",
      exits = {
        ["out"] = "向阳巷|enter,s",
      },
    },

    ["城中心|e,n,s,w"] = {
      name = "城中心",
      exits = {
        ["e"] = "东大街|e,n,s,se,w",
        ["n"] = "北大街|e,n,s,w",
        ["s"] = "南大街|n,s,w",
        ["w"] = "西大街|e,n,s,w",
      },
    },

    ["大宝号|nw"] = {
      name = "大宝号",
      exits = {
        ["nw"] = "东大街|e,n,s,se,w",
      },
    },

    ["大树下|w"] = {
      name = "大树下",
      exits = {
        ["w"] = "北大街|e,n,s,w",
      },
    },

    ["官桥镇|e"] = {
      name = "官桥镇",
      exits = {
        ["e"] = "山路|ne,sw,w",
      },
    },

    ["宠物竞技场|u,w"] = {
      name = "宠物竞技场",
      exits = {
        ["w"] = "中心广场|e,n,s,w",
      },
    },

    -- 小路（去重：小路 / 小路1；不改 key）
    ["小路|e,nw,sw"] = {
      name = "小路",
      exits = {
        ["e"]  = "西门|e,w",
        ["nw"] = "闽江南岸|n,se,w",
        ["sw"] = "小路|ne,sw",
      },
    },

    ["小路|ne,sw"] = {
      name = "小路1",
      exits = {
        ["ne"] = "小路|e,nw,sw",
        ["sw"] = "北门|ne,s",
      },
    },

    -- 山路（去重：山路 / 山路1 / 山路2；不改 key）
    ["山路|ne,sw"] = {
      name = "山路",
      exits = {
        ["ne"] = "南门|n,sw",
        ["sw"] = "山路|ne,sw,w",
      },
    },

    ["山路|ne,sw,w"] = {
      name = "山路1",
      exits = {
        ["ne"] = "山路|ne,sw",
        ["w"]  = "官桥镇|e",
      },
    },

    ["山路|nu,s"] = {
      name = "山路2",
      exits = {
        ["nu"] = "温麻县|ed,ne,sd,wu",
        ["s"]  = "北门|n,s",
      },
    },

    ["山间小路|ne,sw,wu"] = {
      name = "山间小路",
      exits = {
        ["sw"] = "温麻县|ed,ne,sd,wu",
      },
    },

    ["延平|ne,s"] = {
      name = "延平",
      exits = {
        ["s"] = "闽江南岸|n,se",
      },
    },

    ["无相庵|e,n"] = {
      name = "无相庵",
      exits = {
        ["e"] = "南大街|n,s,w",
        ["n"] = "西大街|e,n,s,w",
      },
    },

    ["正厅|s"] = {
      name = "正厅",
      exits = {
        ["s"] = "福威镖局|n,s",
      },
    },

    -- 海边（去重：海边 / 海边1；不改 key）
    ["海边|n"] = {
      name = "海边",
      exits = {
        ["n"] = "南大街|n,s,w",
      },
    },

    ["海边|wu"] = {
      name = "海边1",
      exits = {
        ["wu"] = "温麻县|ed,ne,sd,wu",
      },
    },

    ["温麻县|ed,ne,sd,wu"] = {
      name = "温麻县",
      exits = {
        ["ed"] = "海边|wu",
        ["ne"] = "山间小路|ne,sw,wu",
        ["sd"] = "山路|nu,s",
        ["wu"] = "霞浦山|ed",
      },
    },

    ["码头|s"] = {
      name = "码头",
      exits = {
        ["s"] = "闽江南岸|n,se,w",
      },
    },

    ["福威镖局|n,s"] = {
      name = "福威镖局",
      exits = {
        ["n"] = "正厅|s",
        ["s"] = "东大街|e,n,s,se,w",
      },
    },

    -- 福州港（去重：福州港 / 福州港1；不改 key）
    ["福州港|n"] = {
      name = "福州港",
      exits = {
        ["n"] = "东大街|e,n,s,se,w",
      },
    },

    ["福州港|w"] = {
      name = "福州港1",
      exits = {
        ["w"] = "东大街|e,n,s,se,w",
      },
    },

    ["茶馆|e"] = {
      name = "茶馆",
      exits = {
        ["e"] = "北大街|e,n,s,w",
      },
    },

    ["西大街|e,n,s,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "城中心|e,n,s,w",
        ["n"] = "向阳巷|enter,s",
        ["s"] = "无相庵|e,n",
        ["w"] = "西门|e,w",
      },
    },

    ["西门|e,w"] = {
      name = "西门",
      exits = {
        ["e"] = "西大街|e,n,s,w",
        ["w"] = "小路|e,nw,sw",
      },
    },

    ["计氏马车分行|e"] = {
      name = "计氏马车分行",
      exits = {
        ["e"] = "中心广场|e,n,s,w",
      },
    },

    -- 闽江南岸（去重：闽江南岸 / 闽江南岸1 / 闽江南岸2；不改 key）
    ["闽江南岸|e,nw"] = {
      name = "闽江南岸",
      exits = {
        ["e"]  = "闽江南岸|n,se,w",
        ["nw"] = "闽江南岸|n,se",
      },
    },

    ["闽江南岸|n,se"] = {
      name = "闽江南岸1",
      exits = {
        ["n"]  = "延平|ne,s",
        ["se"] = "闽江南岸|e,nw",
      },
    },

    ["闽江南岸|n,se,w"] = {
      name = "闽江南岸2",
      exits = {
        ["n"]  = "码头|s",
        ["se"] = "小路|e,nw,sw",
        ["w"]  = "闽江南岸|e,nw",
      },
    },

    ["霞浦山|ed"] = {
      name = "霞浦山",
      exits = {
        ["ed"] = "温麻县|ed,ne,sd,wu",
      },
    },

  },
}

-- 去重后补齐 mapAliases（含：北门1/小路1/山路1-2/海边1/福州港1/闽江南岸1-2）
mapper.maps["fz"].mapAliases = {
  ["东大街"]       = "ddj",
  ["中心广场"]     = "zxgc",
  ["北大街"]       = "bdj",
  ["北门"]         = "bm",
  ["北门1"]        = "bm1",

  ["南大街"]       = "ndj",
  ["南门"]         = "nm",

  ["向阳巷"]       = "xyx",
  ["向阳老宅"]     = "xylz",

  ["城中心"]       = "origin",
  ["大宝号"]       = "dbh",
  ["大树下"]       = "dsx",

  ["官桥镇"]       = "gqz",
  ["宠物竞技场"]   = "cwjjc",

  ["小路"]         = "xl",
  ["小路1"]        = "xl1",

  ["山路"]         = "sl",
  ["山路1"]        = "sl1",
  ["山路2"]        = "sl2",

  ["山间小路"]     = "sjxl",
  ["延平"]         = "yp",
  ["无相庵"]       = "wxa",
  ["正厅"]         = "zt",

  ["海边"]         = "hb",
  ["海边1"]        = "hb1",

  ["温麻县"]       = "wmx",
  ["码头"]         = "mt",
  ["福威镖局"]     = "fwbj",

  ["福州港"]       = "fzg",
  ["福州港1"]      = "fzg1",

  ["茶馆"]         = "cg",
  ["西大街"]       = "xdj",
  ["西门"]         = "xm",

  ["计氏马车分行"] = "mch",

  ["闽江南岸"]     = "mjna",
  ["闽江南岸1"]    = "mjna1",
  ["闽江南岸2"]    = "mjna2",

  ["霞浦山"]       = "xps",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>温州 - wenz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["wenz"]= {

  region = {
    key  = "wenz",      -- 区域代号，用在 goto wx.xxx 里
    name = "温州",    -- 纯注释/显示用
  },

  mapNodes = {

    ["万寿观|nw"] = {
      name = "万寿观",
      exits = {
        ["nw"] = "金鸡坪|neu,se,wd",
      },
    },

    ["东门|ed,w"] = {
      name = "东门",
      exits = {
        ["ed"] = "海边|wu",
        ["w"] = "朔门街|e,n,sw,w",
      },
    },

    ["九岗山|s,swd"] = {
      name = "九岗山",
      exits = {
        ["s"] = "天明禅寺|n",
        ["swd"] = "金鸡坪|neu,se,wd",
      },
    },

    ["五马坊|e,n,s,w"] = {
      name = "五马坊",
      exits = {
        ["e"] = "五马街|e,n,s,w",
        ["n"] = "北门|n,s",
        ["s"] = "北大街|n,s",
        ["w"] = "五马街|e,n,s",
      },
    },

    ["五马街|e,n,s"] = {
      name = "五马街",
      exits = {
        ["e"] = "五马坊|e,n,s,w",
        ["n"] = "巷尾|s",
        ["s"] = "酒馆|n",
      },
    },

    ["五马街|e,n,s,w"] = {
      name = "五马街2", -- 去重：原“五马街”
      exits = {
        ["e"] = "汇通宝阁|w",
        ["n"] = "擂台|s",
        ["s"] = "饭馆|n",
        ["w"] = "五马坊|e,n,s,w",
      },
    },

    ["北大街|n,s"] = {
      name = "北大街",
      exits = {
        ["n"] = "五马坊|e,n,s,w",
        ["s"] = "集市|e,n,s,w",
      },
    },

    ["北门|n,s"] = {
      name = "北门",
      exits = {
        ["n"] = "瓯江南岸|s,w",
        ["s"] = "五马坊|e,n,s,w",
      },
    },

    ["南门|n,ne,sw"] = {
      name = "南门",
      exits = {
        ["n"] = "集市|e,n,s,w",
        ["ne"] = "朔门街|e,n,sw,w",
        ["sw"] = "山间小路|eu,ne,sw",
      },
    },

    ["土路|n,se"] = {
      name = "土路",
      exits = {
        ["n"] = "山门|enter,s",
        ["se"] = "西门|e,nw",
      },
    },

    ["大雄宝殿|ed,s,wd"] = {
      name = "大雄宝殿",
      exits = {
        ["ed"] = "藏经楼|wu",
        ["s"] = "天王殿|n,out",
        ["wd"] = "玉佛殿|eu",
      },
    },

    ["天明禅寺|n"] = {
      name = "天明禅寺",
      exits = {
        ["n"] = "九岗山|s,swd",
      },
    },

    ["天王殿|n,out"] = {
      name = "天王殿",
      exits = {
        ["n"] = "大雄宝殿|ed,s,wd",
        ["out"] = "山门|enter,s",
      },
    },

    ["太极门|n"] = {
      name = "太极门",
      exits = {
        ["n"] = "西街|e,n,s,w",
      },
    },

    ["山门|enter,s"] = {
      name = "山门",
      exits = {
        ["enter"] = "天王殿|n,out",
        ["s"] = "土路|n,se",
      },
    },

    ["山间小路|eu,ne,sw"] = {
      name = "山间小路",
      exits = {
        ["eu"] = "金鸡坪|neu,se,wd",
        ["ne"] = "南门|n,ne,sw",
        ["sw"] = "山间小路|ne,sw,wu",
      },
    },

    ["山间小路|ne,sw,wu"] = {
      name = "山间小路2", -- 去重：原“山间小路”
      exits = {
        ["ne"] = "山间小路|eu,ne,sw",
        ["wu"] = "玉苍山|ed,nd",
      },
    },

    ["锦绣谷|su"] = {
      name = "锦绣谷",
      exits = {
        ["su"] = "玉苍山|ed,nd",
      },
    },

    ["州治大门|enter,s"] = {
      name = "州治大门",
      exits = {
        ["enter"] = "州治正厅|out",
        ["s"] = "朔门街|e,n,sw,w",
      },
    },

    ["州治正厅|out"] = {
      name = "州治正厅",
      exits = {
        ["out"] = "州治大门|enter,s",
      },
    },

    ["巷尾|s"] = {
      name = "巷尾",
      exits = {
        ["s"] = "五马街|e,n,s",
      },
    },

    ["擂台|s"] = {
      name = "擂台",
      exits = {
        ["s"] = "五马街|e,n,s,w",
      },
    },

    ["朔门街|e,n,sw,w"] = {
      name = "朔门街",
      exits = {
        ["e"] = "东门|ed,w",
        ["n"] = "州治大门|enter,s",
        ["sw"] = "南门|n,ne,sw",
        ["w"] = "集市|e,n,s,w",
      },
    },

    ["杂货铺|s"] = {
      name = "杂货铺",
      exits = {
        ["s"] = "西街|e,n,s,w",
      },
    },

    ["汇通宝阁|w"] = {
      name = "汇通宝阁",
      exits = {
        ["w"] = "五马街|e,n,s,w",
      },
    },

    ["海边|wu"] = {
      name = "海边",
      exits = {
        ["wu"] = "东门|ed,w",
      },
    },

    ["玉佛殿|eu"] = {
      name = "玉佛殿",
      exits = {
        ["eu"] = "大雄宝殿|ed,s,wd",
      },
    },

    ["玉苍山|ed,nd"] = {
      name = "玉苍山",
      exits = {
        ["ed"] = "山间小路|ne,sw,wu",
        ["nd"] = "锦绣谷|su",
      },
    },

    ["瓯江南岸|e"] = {
      name = "瓯江南岸",
      exits = {
        ["e"] = "瓯江南岸|s,w",
      },
    },

    ["瓯江南岸|s,w"] = {
      name = "瓯江南岸2", -- 去重：原“瓯江南岸”
      exits = {
        ["s"] = "北门|n,s",
        ["w"] = "瓯江南岸|e",
      },
    },

    ["藏经楼|wu"] = {
      name = "藏经楼",
      exits = {
        ["wu"] = "大雄宝殿|ed,s,wd",
      },
    },

    ["西街|e,n,s,w"] = {
      name = "西街",
      exits = {
        ["e"] = "集市|e,n,s,w",
        ["n"] = "杂货铺|s",
        ["s"] = "太极门|n",
        ["w"] = "西门|e,nw",
      },
    },

    ["西门|e,nw"] = {
      name = "西门",
      exits = {
        ["e"] = "西街|e,n,s,w",
        ["nw"] = "土路|n,se",
      },
    },

    ["酒馆|n"] = {
      name = "酒馆",
      exits = {
        ["n"] = "五马街|e,n,s",
      },
    },

    ["金鸡坪|neu,se,wd"] = {
      name = "金鸡坪",
      exits = {
        ["neu"] = "九岗山|s,swd",
        ["se"] = "万寿观|nw",
        ["wd"] = "山间小路|eu,ne,sw",
      },
    },

    ["集市|e,n,s,w"] = {
      name = "集市",
      exits = {
        ["e"] = "朔门街|e,n,sw,w",
        ["n"] = "北大街|n,s",
        ["s"] = "南门|n,ne,sw",
        ["w"] = "西街|e,n,s,w",
      },
    },

    ["饭馆|n"] = {
      name = "饭馆",
      exits = {
        ["n"] = "五马街|e,n,s,w",
      },
    },

  } -- mapNodes 结束
}

-- alias 补齐（含去重后新增的 2/…）
mapper.maps["wenz"].mapAliases = {
  ["万寿观"]     = "wsg",
  ["东门"]       = "dm",
  ["九岗山"]     = "jgs",
  ["五马坊"]     = "wmf",
  ["五马街"]     = "wmj",
  ["五马街2"]    = "wmj2",     -- 新增
  ["北大街"]     = "bdj",
  ["北门"]       = "bm",
  ["南门"]       = "nm",
  ["土路"]       = "tl",

  ["大雄宝殿"]   = "dxbd",
  ["天明禅寺"]   = "tmcs",
  ["天王殿"]     = "twd",
  ["太极门"]     = "tjm",
  ["山门"]       = "sm",

  ["山间小路"]   = "sjxl",
  ["山间小路2"]  = "sjxl2",    -- 新增
  ["州治大门"]   = "zzdm",
  ["州治正厅"]   = "zzzt",     -- 补上（原本漏了）
  ["巷尾"]       = "xw",
  ["擂台"]       = "lt",
  ["朔门街"]     = "smj",
  ["杂货铺"]     = "zhp",

  ["汇通宝阁"]   = "htbg",
  ["海边"]       = "hb",
  ["玉佛殿"]     = "yfd",
  ["玉苍山"]     = "ycs",

  ["瓯江南岸"]   = "ojna",
  ["瓯江南岸2"]  = "ojna2",    -- 新增
  ["藏经楼"]     = "zjl",
  ["西街"]       = "xj",
  ["西门"]       = "xm",
  ["酒馆"]       = "jg",
  ["金鸡坪"]     = "jjp",
  ["集市"]       = "origin",
  ["饭馆"]       = "fg",
  ["锦绣谷"]     = "jxg",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>龙泉镇 - lqz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {}

mapper.maps["lqz"]= {

  region = {
    key  = "lqz",      -- 区域代号，用在 goto wx.xxx 里
    name = "龙泉镇",   -- 纯注释/显示用
  },

  mapNodes = {
    ["一线天|e,sd,wu"] = {
      name = "一线天",
      exits = {
        ["e"]  = "山壁|w",
        ["sd"] = "谷口|e,nu",
        ["wu"] = "山道|ed,nd",
      },
    },

    ["东街|e,n,s,w"] = {
      name = "东街",
      exits = {
        ["e"] = "龙泉溪畔|sw,w",
        ["n"] = "杂货铺|s",
        ["s"] = "墓园|n",
        ["w"] = "水井|e,n,s,w",
      },
    },

    ["五府岗|ne,sw"] = {
      name = "五府岗",
      exits = {
        ["ne"] = "入山口|e,n,sw",
      },
    },

    ["入山口|e,n,sw"] = {
      name = "入山口",
      exits = {
        ["e"]  = "龙泉溪畔|e,w",
        ["n"]  = "小路|n,s",
        ["sw"] = "五府岗|ne,sw",
      },
    },

    ["兵器铺|n"] = {
      name = "兵器铺",
      exits = {
        ["n"] = "西街|e,n,s,w",
      },
    },

    ["剑池|e,wu"] = {
      name = "剑池",
      exits = {
        ["e"]  = "土路|eu,n,w",
        ["wu"] = "祭剑处|ed",
      },
    },

    ["北镇口|nu,s"] = {
      name = "北镇口",
      exits = {
        ["s"] = "水井|e,n,s,w",
      },
    },

    ["南镇口|n,s"] = {
      name = "南镇口",
      exits = {
        ["n"] = "水井|e,n,s,w",
        ["s"] = "桥头|e,n,su,w",
      },
    },

    ["土路|eu,n,w"] = {
      name = "土路",
      exits = {
        ["eu"] = "棋盘山|e,su,wd",
        ["n"]  = "桥头|nu,s",
        ["w"]  = "剑池|e,wu",
      },
    },

    ["墓园|n"] = {
      name = "墓园",
      exits = {
        ["n"] = "东街|e,n,s,w",
      },
    },

    ["小路|n,s"] = {
      name = "小路",
      exits = {
        ["n"] = "西镇口|e,nu,s",
        ["s"] = "入山口|e,n,sw",
      },
    },

    ["山壁|w"] = {
      name = "山壁",
      exits = {
        ["w"] = "一线天|e,sd,wu",
      },
    },

    -- 山路（去重：山路 / 山路1；不改 key）
    ["山路|nd,sw"] = {
      name = "山路",
      exits = {
        ["nd"] = "碧湖镇|ne,su",
        ["sw"] = "山路|ne,w",
      },
    },

    ["山路|ne,w"] = {
      name = "山路1",
      exits = {
        ["ne"] = "山路|nd,sw",
        ["w"]  = "棋盘山|e,su,wd",
      },
    },

    ["山道|ed,nd"] = {
      name = "山道",
      exits = {
        ["ed"] = "一线天|e,sd,wu",
        ["nd"] = "棋盘山|e,su,wd",
      },
    },

    ["山间小道|sd,wu"] = {
      name = "山间小道",
      exits = {
        ["sd"] = "西镇口|e,nu,s",
      },
    },

    ["木桥|nd,sd"] = {
      name = "木桥",
      exits = {
        ["nd"] = "桥头|e,n,su,w",
        ["sd"] = "桥头|nu,s",
      },
    },

    ["杂货铺|s"] = {
      name = "杂货铺",
      exits = {
        ["s"] = "东街|e,n,s,w",
      },
    },

    -- 桥头（去重：桥头 / 桥头1；不改 key）
    ["桥头|e,n,su,w"] = {
      name = "桥头",
      exits = {
        ["e"]  = "龙泉溪畔|ne,w",
        ["n"]  = "南镇口|n,s",
        ["su"] = "木桥|nd,sd",
        ["w"]  = "龙泉溪畔|e,w",
      },
    },

    ["桥头|nu,s"] = {
      name = "桥头1",
      exits = {
        ["nu"] = "木桥|nd,sd",
        ["s"]  = "土路|eu,n,w",
      },
    },

    ["棋盘山|e,su,wd"] = {
      name = "棋盘山",
      exits = {
        ["e"]  = "山路|ne,w",
        ["su"] = "山道|ed,nd",
        ["wd"] = "土路|eu,n,w",
      },
    },

    ["水井|e,n,s,w"] = {
      name = "水井",
      exits = {
        ["e"] = "东街|e,n,s,w",
        ["n"] = "北镇口|nu,s",
        ["s"] = "南镇口|n,s",
        ["w"] = "西街|e,n,s,w",
      },
    },

    ["碧湖镇|ne,su"] = {
      name = "碧湖镇",
      exits = {
        ["su"] = "山路|nd,sw",
      },
    },

    ["祭剑处|ed"] = {
      name = "祭剑处",
      exits = {
        ["ed"] = "剑池|e,wu",
      },
    },

    ["西街|e,n,s,w"] = {
      name = "西街",
      exits = {
        ["e"] = "水井|e,n,s,w",
        ["n"] = "酒馆|s",
        ["s"] = "兵器铺|n",
        ["w"] = "西街1|e,n,s,w",
      },
    },

    ["西街1|e,n,s,w"] = {
      name = "西街1",
      exits = {
        ["e"] = "西街|e,n,s,w",
        ["n"] = "山门|enter,s",
        ["s"] = "打铁铺|enter,n",
        ["w"] = "西镇口|e,nu,s",
      },
    },

    ["打铁铺|enter,n"] = {
      name = "打铁铺",
      exits = {
        ["enter"] = "打铁炉|out",
        ["n"]     = "西街1|e,n,s,w",
      },
    },

    ["打铁炉|out"] = {
      name = "打铁炉",
      exits = {
        ["out"] = "打铁铺|enter,n",
      },
    },

    ["西镇口|e,nu,s"] = {
      name = "西镇口",
      exits = {
        ["e"]  = "西街1|e,n,s,w",
        ["nu"] = "山间小道|sd,wu",
        ["s"]  = "小路|n,s",
      },
    },

    ["谷口|e,nu"] = {
      name = "谷口",
      exits = {
        ["e"]  = "铸剑谷|w",
        ["nu"] = "一线天|e,sd,wu",
      },
    },

    ["酒馆|s"] = {
      name = "酒馆",
      exits = {
        ["s"] = "西街|e,n,s,w",
      },
    },

    ["铸剑谷|w"] = {
      name = "铸剑谷",
      exits = {
        ["w"] = "谷口|e,nu",
      },
    },

    -- 龙泉溪畔（去重：龙泉溪畔 / 龙泉溪畔1/2/3；不改 key）
    ["龙泉溪畔|e,w"] = {
      name = "龙泉溪畔",
      exits = {
        ["e"] = "桥头|e,n,su,w",
        ["w"] = "入山口|e,n,sw",
      },
    },

    ["龙泉溪畔|ne,sw"] = {
      name = "龙泉溪畔1",
      exits = {
        ["ne"] = "龙泉溪畔|sw,w",
        ["sw"] = "龙泉溪畔|ne,w",
      },
    },

    ["龙泉溪畔|ne,w"] = {
      name = "龙泉溪畔2",
      exits = {
        ["ne"] = "龙泉溪畔|ne,sw",
        ["w"]  = "桥头|e,n,su,w",
      },
    },

    ["龙泉溪畔|sw,w"] = {
      name = "龙泉溪畔3",
      exits = {
        ["sw"] = "龙泉溪畔|ne,sw",
        ["w"]  = "东街|e,n,s,w",
      },
    },

    ["大佛殿|e,n,s,w"] = {
      name = "大佛殿",
      exits = {
        ["e"] = "走廊|e,n,w",
        ["n"] = "弥陀殿|s",
        ["s"] = "广场|n,out",
        ["w"] = "走廊1|e,n,w",
      },
    },

    ["山门|enter,s"] = {
      name = "山门",
      exits = {
        ["enter"] = "广场|n,out",
        ["s"]     = "西街1|e,n,s,w",
      },
    },

    ["广场|n,out"] = {
      name = "广场",
      exits = {
        ["n"]   = "大佛殿|e,n,s,w",
        ["out"] = "山门|enter,s",
      },
    },

    ["弥陀殿|s"] = {
      name = "弥陀殿",
      exits = {
        ["s"] = "大佛殿|e,n,s,w",
      },
    },

    ["睡房|w"] = {
      name = "睡房",
      exits = {
        ["w"] = "走廊1|e,n,w",
      },
    },

    ["禅房|s"] = {
      name = "禅房",
      exits = {
        ["s"] = "走廊|e,n,w",
      },
    },

    -- 禅房（去重：禅房 / 禅房1；不改 key）
    ["禅房1|s"] = {
      name = "禅房1",
      exits = {
        ["s"] = "走廊1|e,n,w",
      },
    },

    ["走廊|e,n,w"] = {
      name = "走廊",
      exits = {
        ["e"] = "大佛殿|e,n,s,w",
        ["n"] = "禅房|s",
        ["w"] = "厨房|e",
      },
    },

    -- 走廊（去重：走廊 / 走廊1；不改 key）
    ["走廊1|e,n,w"] = {
      name = "走廊1",
      exits = {
        ["e"] = "睡房|w",
        ["n"] = "禅房1|s",
        ["w"] = "大佛殿|e,n,s,w",
      },
    },

    ["厨房|e"] = {
      name = "厨房",
      exits = {
        ["e"] = "走廊|e,n,w",
      },
    },
  },
}

-- 去重 + 补齐新增房间 mapAliases
mapper.maps["lqz"].mapAliases = {
  ["一线天"]     = "yxt",
  ["山壁"]       = "sb",
  ["谷口"]       = "gk",
  ["铸剑谷"]     = "zjg",

  ["东街"]       = "dj",
  ["杂货铺"]     = "zhp",
  ["墓园"]       = "my",

  ["水井"]       = "origin",
  ["北镇口"]     = "bzk",
  ["南镇口"]     = "nzk",

  ["西街"]       = "xj",
  ["西街1"]      = "xj1",
  ["酒馆"]       = "jg",
  ["兵器铺"]     = "bqp",
  ["西镇口"]     = "xzk",

  ["小路"]       = "xl",

  ["桥头"]       = "qt",
  ["桥头1"]      = "qt1",
  ["木桥"]       = "mq",

  ["入山口"]     = "rsk",
  ["五府岗"]     = "wfg",

  ["龙泉溪畔"]   = "lqxp",
  ["龙泉溪畔1"]  = "lqxp1",
  ["龙泉溪畔2"]  = "lqxp2",
  ["龙泉溪畔3"]  = "lqxp3",

  ["剑池"]       = "jc",
  ["祭剑处"]     = "jjc",
  ["土路"]       = "tl",
  ["棋盘山"]     = "qps",

  ["山道"]       = "sd",
  ["山间小道"]   = "sjxd",

  ["山路"]       = "sl",
  ["山路1"]      = "sl1",
  ["碧湖镇"]     = "bhz",

  ["打铁铺"]     = "dtp",
  ["打铁炉"]     = "dtl",

  ["山门"]       = "sm",
  ["广场"]       = "gc",
  ["大佛殿"]     = "dfd",
  ["弥陀殿"]     = "mtd",

  ["走廊"]       = "zl",
  ["走廊1"]      = "zl1",
  ["禅房"]       = "cf",
  ["禅房1"]      = "cf1",
  ["睡房"]       = "sf",
  ["厨房"]       = "cfang",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>建宁 - jn</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["jn"] = {

  region = {
    key  = "jn",      -- 区域代号，用在 goto wx.xxx 里
    name = "建宁",    -- 纯注释/显示用
  },

  mapNodes = {

    ["七星桥|nd,sd"] = {
      name = "七星桥",
      exits = {
        ["nd"] = "广德门|e,ne,nw,su,w",
        ["sd"] = "中水南|e,nu,s,w",
      },
    },

    ["三清殿|d,ne"] = {
      name = "三清殿",
      exits = {
        ["d"] = "鹿乳井|u",
        ["ne"] = "善见塔|ne,sw",
      },
    },

    ["上南门街|n,s"] = {
      name = "上南门街",
      exits = {
        ["n"] = "南街头|e,n,s,w",
        ["s"] = "小街头|e,n,s,w",
      },
    },

    ["上水南|w"] = {
      name = "上水南",
      exits = {
        ["w"] = "古城街|e,w",
      },
    },

    ["下南门街|n,se"] = {
      name = "下南门街",
      exits = {
        ["n"] = "小街头|e,n,s,w",
        ["se"] = "军马营|nw,sw",
      },
    },

    ["下水南|e"] = {
      name = "下水南",
      exits = {
        ["e"] = "光孝禅寺|ne,w",
      },
    },

    ["下马路|e,s,w"] = {
      name = "下马路",
      exits = {
        ["e"] = "宁远门|e,n,s,w",
        ["s"] = "横街|n,s",
        ["w"] = "钟楼|e,n,s,w",
      },
    },

    ["东岳行宫|e,sw"] = {
      name = "东岳行宫",
      exits = {
        ["e"] = "山间路|ne,w",
        ["sw"] = "出城小路|ne,sw,w",
      },
    },

    ["中水南|e,nu,s,w"] = {
      name = "中水南",
      exits = {
        ["e"] = "古城街|e,w",
        ["nu"] = "七星桥|nd,sd",
        ["s"] = "建溪南岸|n,sw",
        ["w"] = "古城街|e,sw",
      },
    },

    ["临江门|e,n,s,w"] = {
      name = "临江门",
      exits = {
        ["e"] = "尚书坊|n,ne,s,se,w",
        ["n"] = "城墙|n,s",
        ["s"] = "城墙1|n,s",
        ["w"] = "建溪码头|e",
      },
    },

    ["义仓|s"] = {
      name = "义仓",
      exits = {
        ["s"] = "恩波桥|e,n,w",
      },
    },

    ["义学|se"] = {
      name = "义学",
      exits = {
        ["se"] = "义学前|e,nw,s,w",
      },
    },

    ["义学前|e,nw,s,w"] = {
      name = "义学前",
      exits = {
        ["e"] = "旗山|e,enter,n,nw,s,w",
        ["nw"] = "义学|se",
        ["s"] = "北新街|e,n,w",
        ["w"] = "恩波桥|e,n,w",
      },
    },

    ["云际山|ne,sw"] = {
      name = "云际山",
      exits = {
        ["ne"] = "建溪南岸|n,sw",
        ["sw"] = "善见塔|ne,sw",
      },
    },

    ["五凤楼下|n,s"] = {
      name = "五凤楼下",
      exits = {
        ["n"] = "鼓楼后|n,s,w",
        ["s"] = "鼓楼|e,n,s,w",
      },
    },

    ["五里亭|n,se"] = {
      name = "五里亭",
      exits = {
        ["n"] = "小路|n,s",
        ["se"] = "桂香桥|nw,se",
      },
    },

    ["仓桥亭|n,s"] = {
      name = "仓桥亭",
      exits = {
        ["n"] = "钟楼|e,n,s,w",
        ["s"] = "前街头|n,s",
      },
    },

    ["光孝禅寺|ne,w"] = {
      name = "光孝禅寺",
      exits = {
        ["ne"] = "建溪南岸|ne,sw",
        ["w"] = "下水南|e",
      },
    },

    ["关帝庙|ne"] = {
      name = "关帝庙",
      exits = {
        ["ne"] = "出城小路|ne,sw,w",
      },
    },

    ["兵器铺|s,w"] = {
      name = "兵器铺",
      exits = {
        ["s"] = "后街|e,n,s,w",
        ["w"] = "镇安桥|e,n,s,w",
      },
    },

    ["军马营|nw,sw"] = {
      name = "军马营",
      exits = {
        ["nw"] = "下南门街|n,se",
        ["sw"] = "广德门|e,ne,nw,su,w",
      },
    },

    ["出城小路|ne,sw,w"] = {
      name = "出城小路",
      exits = {
        ["ne"] = "东岳行宫|e,sw",
        ["sw"] = "关帝庙|ne",
        ["w"] = "宁远门|e,n,s,w",
      },
    },

    ["前街头|n,s"] = {
      name = "前街头",
      exits = {
        ["n"] = "仓桥亭|n,s",
        ["s"] = "通仙门|e,n,w",
      },
    },

    ["北新街|e,n,w"] = {
      name = "北新街",
      exits = {
        ["e"] = "鼓楼后|n,s,w",
        ["n"] = "义学前|e,nw,s,w",
        ["w"] = "和乐坊|e,n,s",
      },
    },

    ["南街头|e,n,s,w"] = {
      name = "南街头",
      exits = {
        ["e"] = "后街|e,n,s,w",
        ["n"] = "镇安桥|e,n,s,w",
        ["s"] = "上南门街|n,s",
        ["w"] = "大甲巷|e,n,ne,nw,s,se,w",
      },
    },

    -- 古城街（去重：古城街 / 古城街1）
    ["古城街|e,sw"] = {
      name = "古城街",
      exits = {
        ["e"] = "中水南|e,nu,s,w",
        ["sw"] = "建溪南岸|ne,sw",
      },
    },
    ["古城街|e,w"] = {
      name = "古城街1",
      exits = {
        ["e"] = "上水南|w",
        ["w"] = "中水南|e,nu,s,w",
      },
    },

    ["后街|e,n,s,w"] = {
      name = "后街",
      exits = {
        ["e"] = "钟楼|e,n,s,w",
        ["n"] = "兵器铺|s,w",
        ["s"] = "建宁马车行|n",
        ["w"] = "南街头|e,n,s,w",
      },
    },

    ["和乐坊|e,n,s"] = {
      name = "和乐坊",
      exits = {
        ["e"] = "北新街|e,n,w",
        ["n"] = "西门街|e,s,w",
        ["s"] = "尚书坊|n,ne,s,se,w",
      },
    },

    ["善见塔|ne,sw"] = {
      name = "善见塔",
      exits = {
        ["ne"] = "云际山|ne,sw",
        ["sw"] = "三清殿|d,ne",
      },
    },

    -- 城墙（去重：统一编号，不改 key）
    ["城墙|e,s"] = {
      name = "城墙",
      exits = {
        ["e"] = "朝天门|e,s,se,w",
        ["s"] = "威武门|e,n,nw,s",
      },
    },
    ["城墙|e,w"] = {
      name = "城墙1",
      exits = {
        ["e"] = "广德门|e,ne,nw,su,w",
        ["w"] = "城墙|e,n",
      },
    },
    ["城墙|n,s"] = {
      name = "城墙2",
      exits = {
        ["n"] = "威武门|e,n,nw,s",
        ["s"] = "临江门|e,n,s,w",
      },
    },
    ["城墙1|n,s"] = {
      name = "城墙3",
      exits = {
        ["n"] = "临江门|e,n,s,w",
        ["s"] = "水西门|e,n,s,w",
      },
    },
    ["城墙2|n,s"] = {
      name = "城墙4",
      exits = {
        ["n"] = "通济门|eu,n,s,se",
        ["s"] = "城墙|e,n",
      },
    },
    ["城墙|n,w"] = {
      name = "城墙5",
      exits = {
        ["n"] = "宁远门|e,n,s,w",
        ["w"] = "政和门|e,n,w",
      },
    },
    ["城墙|s,w"] = {
      name = "城墙6",
      exits = {
        ["s"] = "宁远门|e,n,s,w",
        ["w"] = "朝天门|e,s,se,w",
      },
    },
    ["城墙|e,n"] = {
      name = "城墙7",
      exits = {
        ["e"] = "城墙|e,w",
        ["n"] = "城墙2|n,s",
      },
    },
    ["城墙1|e,w"] = {
      name = "城墙8",
      exits = {
        ["e"] = "通仙门|e,n,w",
        ["w"] = "广德门|e,ne,nw,su,w",
      },
    },

    ["壶山|se"] = {
      name = "壶山",
      exits = {
        ["se"] = "大甲巷|e,n,ne,nw,s,se,w",
      },
    },

    ["大中寺|nw,s"] = {
      name = "大中寺",
      exits = {
        ["nw"] = "尚书坊|n,ne,s,se,w",
        ["s"] = "皇殿|n,s",
      },
    },

    ["大洲|n,nw,se,sw"] = {
      name = "大洲",
      exits = {
        ["n"] = "演武场|s",
        ["nw"] = "桂香桥|nw,se",
        ["se"] = "威武门|e,n,nw,s",
        ["sw"] = "船场|ne",
      },
    },

    ["大甲巷|e,n,ne,nw,s,se,w"] = {
      name = "大甲巷",
      exits = {
        ["e"] = "南街头|e,n,s,w",
        ["n"] = "皇殿|n,s",
        ["ne"] = "当铺|e,n,sw",
        ["nw"] = "壶山|se",
        ["s"] = "隆礼坊|e,n,ne,wu",
        ["se"] = "福宁客栈|enter,nw,sw",
        ["w"] = "西大街|e,n,s,w",
      },
    },

    ["威武门|e,n,nw,s"] = {
      name = "威武门",
      exits = {
        ["e"] = "西门街|e,s,w",
        ["n"] = "城墙|e,s",
        ["nw"] = "大洲|n,nw,se,sw",
        ["s"] = "城墙|n,s",
      },
    },

    ["孔庙|n,s"] = {
      name = "孔庙",
      exits = {
        ["n"] = "青云路|ne,s,w",
        ["s"] = "府学|n,s",
      },
    },

    ["学堂|se"] = {
      name = "学堂",
      exits = {
        ["se"] = "旗山|e,enter,n,nw,s,w",
      },
    },

    ["宁远门|e,n,s,w"] = {
      name = "宁远门",
      exits = {
        ["e"] = "出城小路|ne,sw,w",
        ["n"] = "城墙|s,w",
        ["s"] = "城墙|n,w",
        ["w"] = "下马路|e,s,w",
      },
    },

    ["宝安堂|w"] = {
      name = "宝安堂",
      exits = {
        ["w"] = "鼓楼|e,n,s,w",
      },
    },

    ["客房|out"] = {
      name = "客房",
      exits = {
        ["out"] = "福宁客栈|enter,nw,sw",
      },
    },

    ["寺内|out"] = {
      name = "寺内",
      exits = {
        ["out"] = "白云寺|enter,n,s",
      },
    },

    ["小街头|e,n,s,w"] = {
      name = "小街头",
      exits = {
        ["e"] = "崇儒坊|w",
        ["n"] = "上南门街|n,s",
        ["s"] = "下南门街|n,se",
        ["w"] = "隆礼坊|e,n,ne,wu",
      },
    },

    -- 小路（去重：小路 / 小路1）
    ["小路|e,nw"] = {
      name = "小路",
      exits = {
        ["e"] = "菜园子|se,w",
        ["nw"] = "火神庙|nw,se",
      },
    },
    ["小路|n,s"] = {
      name = "小路1",
      exits = {
        ["n"] = "西镇|s",
        ["s"] = "五里亭|n,se",
      },
    },

    ["尚书坊|n,ne,s,se,w"] = {
      name = "尚书坊",
      exits = {
        ["n"] = "和乐坊|e,n,s",
        ["ne"] = "玄武庙|sw",
        ["s"] = "西大街|e,n,s,w",
        ["se"] = "大中寺|nw,s",
        ["w"] = "临江门|e,n,s,w",
      },
    },

    ["山间路|ne,w"] = {
      name = "山间路",
      exits = {
        ["w"] = "东岳行宫|e,sw",
      },
    },

    ["崇儒坊|w"] = {
      name = "崇儒坊",
      exits = {
        ["w"] = "小街头|e,n,s,w",
      },
    },

    ["广德门|e,ne,nw,su,w"] = {
      name = "广德门",
      exits = {
        ["e"] = "城墙|e,w",
        ["ne"] = "军马营|nw,sw",
        ["nw"] = "菜园子|se,w",
        ["su"] = "七星桥|nd,sd",
        ["w"] = "城墙1|e,w",
      },
    },

    ["府学|n,s"] = {
      name = "府学",
      exits = {
        ["n"] = "孔庙|n,s",
        ["s"] = "石板路|n,s",
      },
    },

    ["府衙|out"] = {
      name = "府衙",
      exits = {
        ["out"] = "旗山|e,enter,n,nw,s,w",
      },
    },

    ["延平|ne,s"] = {
      name = "延平",
      exits = {
        ["ne"] = "水溪尾|ne,sw",
      },
    },

    ["建宁马车行|n"] = {
      name = "建宁马车行",
      exits = {
        ["n"] = "后街|e,n,s,w",
      },
    },

    -- 建溪南岸（去重：建溪南岸 / 建溪南岸1）
    ["建溪南岸|n,sw"] = {
      name = "建溪南岸",
      exits = {
        ["n"] = "中水南|e,nu,s,w",
        ["sw"] = "云际山|ne,sw",
      },
    },
    ["建溪南岸|ne,sw"] = {
      name = "建溪南岸1",
      exits = {
        ["ne"] = "古城街|e,sw",
        ["sw"] = "光孝禅寺|ne,w",
      },
    },

    ["建溪码头|e"] = {
      name = "建溪码头",
      exits = {
        ["e"] = "临江门|e,n,s,w",
      },
    },

    ["当铺|e,n,sw"] = {
      name = "当铺",
      exits = {
        ["e"] = "镇安桥|e,n,s,w",
        ["n"] = "钱庄|e,n,s",
        ["sw"] = "大甲巷|e,n,ne,nw,s,se,w",
      },
    },

    ["德胜桥|n,ne,s"] = {
      name = "德胜桥",
      exits = {
        ["n"] = "朝天门|e,s,se,w",
        ["ne"] = "打锡巷|nw,sw",
        ["s"] = "旗山|e,enter,n,nw,s,w",
      },
    },

    ["恩波桥|e,n,w"] = {
      name = "恩波桥",
      exits = {
        ["e"] = "义学前|e,nw,s,w",
        ["n"] = "义仓|s",
        ["w"] = "西门街|e,s,w",
      },
    },

    ["打锡巷|nw,sw"] = {
      name = "打锡巷",
      exits = {
        ["nw"] = "朝天门|e,s,se,w",
        ["sw"] = "德胜桥|n,ne,s",
      },
    },

    ["政和门|e,n,w"] = {
      name = "政和门",
      exits = {
        ["e"] = "城墙|n,w",
        ["n"] = "白云寺|enter,n,s",
        ["w"] = "通仙门|e,n,w",
      },
    },

    ["旗山|e,enter,n,nw,s,w"] = {
      name = "旗山",
      exits = {
        ["e"] = "铁井栏|e,w",
        ["enter"] = "府衙|out",
        ["n"] = "德胜桥|n,ne,s",
        ["nw"] = "学堂|se",
        ["s"] = "鼓楼后|n,s,w",
        ["w"] = "义学前|e,nw,s,w",
      },
    },

    ["朝天门|e,s,se,w"] = {
      name = "朝天门",
      exits = {
        ["e"] = "城墙|s,w",
        ["s"] = "德胜桥|n,ne,s",
        ["se"] = "打锡巷|nw,sw",
        ["w"] = "城墙|e,s",
      },
    },

    ["杂货店|w"] = {
      name = "杂货店",
      exits = {
        ["w"] = "鼓楼前|e,n,s,w",
      },
    },

    ["桂香桥|nw,se"] = {
      name = "桂香桥",
      exits = {
        ["nw"] = "五里亭|n,se",
        ["se"] = "大洲|n,nw,se,sw",
      },
    },

    ["横街|n,s"] = {
      name = "横街",
      exits = {
        ["n"] = "下马路|e,s,w",
        ["s"] = "白云寺|enter,n,s",
      },
    },

    ["水溪尾|ne,sw"] = {
      name = "水溪尾",
      exits = {
        ["ne"] = "水西桥头|e,sw",
        ["sw"] = "延平|ne,s",
      },
    },

    ["水西桥头|e,sw"] = {
      name = "水西桥头",
      exits = {
        ["e"] = "水西门|e,n,s,w",
        ["sw"] = "水溪尾|ne,sw",
      },
    },

    ["水西门|e,n,s,w"] = {
      name = "水西门",
      exits = {
        ["e"] = "西大街|e,n,s,w",
        ["n"] = "城墙1|n,s",
        ["s"] = "通济门|eu,n,s,se",
        ["w"] = "水西桥头|e,sw",
      },
    },

    ["演武场|s"] = {
      name = "演武场",
      exits = {
        ["s"] = "大洲|n,nw,se,sw",
      },
    },

    ["火神庙|nw,se"] = {
      name = "火神庙",
      exits = {
        ["nw"] = "通济门|eu,n,s,se",
        ["se"] = "小路|e,nw",
      },
    },

    ["玄武庙|sw"] = {
      name = "玄武庙",
      exits = {
        ["sw"] = "尚书坊|n,ne,s,se,w",
      },
    },

    ["白云寺|enter,n,s"] = {
      name = "白云寺",
      exits = {
        ["enter"] = "寺内|out",
        ["n"] = "横街|n,s",
        ["s"] = "政和门|e,n,w",
      },
    },

    ["皇殿|n,s"] = {
      name = "皇殿",
      exits = {
        ["n"] = "大中寺|nw,s",
        ["s"] = "大甲巷|e,n,ne,nw,s,se,w",
      },
    },

    ["石板路|n,s"] = {
      name = "石板路",
      exits = {
        ["n"] = "府学|n,s",
        ["s"] = "钟楼|e,n,s,w",
      },
    },

    ["福宁客栈|enter,nw,sw"] = {
      name = "福宁客栈",
      exits = {
        ["enter"] = "客房|out",
        ["nw"] = "大甲巷|e,n,ne,nw,s,se,w",
        ["sw"] = "隆礼坊|e,n,ne,wu",
      },
    },

    ["船场|ne"] = {
      name = "船场",
      exits = {
        ["ne"] = "大洲|n,nw,se,sw",
      },
    },

    ["菜园子|se,w"] = {
      name = "菜园子",
      exits = {
        ["se"] = "广德门|e,ne,nw,su,w",
        ["w"] = "小路|e,nw",
      },
    },

    ["西大街|e,n,s,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "大甲巷|e,n,ne,nw,s,se,w",
        ["n"] = "尚书坊|n,ne,s,se,w",
        ["s"] = "金鸡岭|ed,n,wd",
        ["w"] = "水西门|e,n,s,w",
      },
    },

    ["西镇|s"] = {
      name = "西镇",
      exits = {
        ["s"] = "小路|n,s",
      },
    },

    ["西门街|e,s,w"] = {
      name = "西门街",
      exits = {
        ["e"] = "恩波桥|e,n,w",
        ["s"] = "和乐坊|e,n,s",
        ["w"] = "威武门|e,n,nw,s",
      },
    },

    ["通仙门|e,n,w"] = {
      name = "通仙门",
      exits = {
        ["e"] = "政和门|e,n,w",
        ["n"] = "前街头|n,s",
        ["w"] = "城墙1|e,w",
      },
    },

    ["通济门|eu,n,s,se"] = {
      name = "通济门",
      exits = {
        ["eu"] = "金鸡岭|ed,n,wd",
        ["n"] = "水西门|e,n,s,w",
        ["s"] = "城墙2|n,s",
        ["se"] = "火神庙|nw,se",
      },
    },

    ["金店|e,s"] = {
      name = "金店",
      exits = {
        ["e"] = "鼓楼|e,n,s,w",
        ["s"] = "钱庄|e,n,s",
      },
    },

    ["金鸡岭|ed,n,wd"] = {
      name = "金鸡岭",
      exits = {
        ["ed"] = "隆礼坊|e,n,ne,wu",
        ["n"] = "西大街|e,n,s,w",
        ["wd"] = "通济门|eu,n,s,se",
      },
    },

    ["钟楼|e,n,s,w"] = {
      name = "钟楼",
      exits = {
        ["e"] = "下马路|e,s,w",
        ["n"] = "石板路|n,s",
        ["s"] = "仓桥亭|n,s",
        ["w"] = "后街|e,n,s,w",
      },
    },

    ["钱庄|e,n,s"] = {
      name = "钱庄",
      exits = {
        ["e"] = "鼓楼前|e,n,s,w",
        ["n"] = "金店|e,s",
        ["s"] = "当铺|e,n,sw",
      },
    },

    ["铁井栏|e,w"] = {
      name = "铁井栏",
      exits = {
        ["e"] = "青云路|ne,s,w",
        ["w"] = "旗山|e,enter,n,nw,s,w",
      },
    },

    ["镇安桥|e,n,s,w"] = {
      name = "镇安桥",
      exits = {
        ["e"] = "兵器铺|s,w",
        ["n"] = "鼓楼前|e,n,s,w",
        ["s"] = "南街头|e,n,s,w",
        ["w"] = "当铺|e,n,sw",
      },
    },

    ["隆礼坊|e,n,ne,wu"] = {
      name = "隆礼坊",
      exits = {
        ["e"] = "小街头|e,n,s,w",
        ["n"] = "大甲巷|e,n,ne,nw,s,se,w",
        ["ne"] = "福宁客栈|enter,nw,sw",
        ["wu"] = "金鸡岭|ed,n,wd",
      },
    },

    ["青云楼|ne,sw"] = {
      name = "青云楼",
      exits = {
        ["ne"] = "黄华山|sw",
        ["sw"] = "青云路|ne,s,w",
      },
    },

    ["青云路|ne,s,w"] = {
      name = "青云路",
      exits = {
        ["ne"] = "青云楼|ne,sw",
        ["s"] = "孔庙|n,s",
        ["w"] = "铁井栏|e,w",
      },
    },

    ["鹿乳井|u"] = {
      name = "鹿乳井",
      exits = {
        ["u"] = "三清殿|d,ne",
      },
    },

    ["黄华山|sw"] = {
      name = "黄华山",
      exits = {
        ["sw"] = "青云楼|ne,sw",
      },
    },

    ["鼓楼|e,n,s,w"] = {
      name = "鼓楼",
      exits = {
        ["e"] = "宝安堂|w",
        ["n"] = "五凤楼下|n,s",
        ["s"] = "鼓楼前|e,n,s,w",
        ["w"] = "金店|e,s",
      },
    },

    ["鼓楼前|e,n,s,w"] = {
      name = "鼓楼前",
      exits = {
        ["e"] = "杂货店|w",
        ["n"] = "鼓楼|e,n,s,w",
        ["s"] = "镇安桥|e,n,s,w",
        ["w"] = "钱庄|e,n,s",
      },
    },

    ["鼓楼后|n,s,w"] = {
      name = "鼓楼后",
      exits = {
        ["n"] = "旗山|e,enter,n,nw,s,w",
        ["s"] = "五凤楼下|n,s",
        ["w"] = "北新街|e,n,w",
      },
    },

  }, -- mapNodes end
}

-- 去重并补齐后的别名（保持你原有别名 + 新增去重编号）
mapper.maps["jn"].mapAliases = {
  ["七星桥"]       = "qxq",
  ["三清殿"]       = "sqd",
  ["上南门街"]     = "snmj",
  ["上水南"]       = "ssn",
  ["下南门街"]     = "xnmj",
  ["下水南"]       = "xsn",
  ["下马路"]       = "xml",
  ["东岳行宫"]     = "dyxg",
  ["中水南"]       = "zsn",
  ["临江门"]       = "ljm",
  ["义仓"]         = "yc",
  ["义学"]         = "yx",
  ["义学前"]       = "yxq",
  ["云际山"]       = "yjs",
  ["五凤楼下"]     = "wflx",
  ["五里亭"]       = "wlt",
  ["仓桥亭"]       = "cqt",
  ["光孝禅寺"]     = "gxcs",
  ["关帝庙"]       = "gdm",
  ["兵器铺"]       = "bqp",
  ["军马营"]       = "jmy",
  ["出城小路"]     = "ccl",
  ["前街头"]       = "qjt",
  ["北新街"]       = "bxj",
  ["南街头"]       = "origin",
  ["古城街"]       = "gcj",
  ["古城街1"]      = "gcj1",
  ["后街"]         = "hj",
  ["和乐坊"]       = "hlf",
  ["善见塔"]       = "sjt",
  ["城墙"]         = "cq",
  ["城墙1"]        = "cq1",
  ["城墙2"]        = "cq2",
  ["城墙3"]        = "cq3",
  ["城墙4"]        = "cq4",
  ["城墙5"]        = "cq5",
  ["城墙6"]        = "cq6",
  ["城墙7"]        = "cq7",
  ["城墙8"]        = "cq8",
  ["壶山"]         = "hs",
  ["大中寺"]       = "dzs",
  ["大洲"]         = "dz",
  ["大甲巷"]       = "djx",
  ["威武门"]       = "wwm",
  ["孔庙"]         = "km",
  ["学堂"]         = "xt",
  ["宁远门"]       = "nym",
  ["宝安堂"]       = "bat",
  ["客房"]         = "kf",
  ["寺内"]         = "sn",
  ["小街头"]       = "xjt",
  ["小路"]         = "xl",
  ["小路1"]        = "xl1",
  ["尚书坊"]       = "ssf",
  ["山间路"]       = "sjl",
  ["崇儒坊"]       = "crf",
  ["广德门"]       = "gdmn",
  ["府学"]         = "fx",
  ["府衙"]         = "fy",
  ["延平"]         = "yp",
  ["建宁马车行"]   = "mch",
  ["建溪南岸"]     = "jxna",
  ["建溪南岸1"]    = "jxna1",
  ["建溪码头"]     = "jxmt",
  ["当铺"]         = "dp",
  ["德胜桥"]       = "dsq",
  ["恩波桥"]       = "ebq",
  ["打锡巷"]       = "dxx",
  ["政和门"]       = "zhm",
  ["旗山"]         = "qs",
  ["朝天门"]       = "ctm",
  ["杂货店"]       = "zhd",
  ["桂香桥"]       = "gxq",
  ["横街"]         = "hxj",
  ["水溪尾"]       = "sxw",
  ["水西桥头"]     = "sxqt",
  ["水西门"]       = "sxm",
  ["演武场"]       = "ywc",
  ["火神庙"]       = "hsm",
  ["玄武庙"]       = "xwm",
  ["白云寺"]       = "bys",
  ["皇殿"]         = "hd",
  ["石板路"]       = "sbl",
  ["福宁客栈"]     = "fnkz",
  ["船场"]         = "cc",
  ["菜园子"]       = "cyz",
  ["西大街"]       = "xdj",
  ["西镇"]         = "xz",
  ["西门街"]       = "xmj",
  ["通仙门"]       = "txm",
  ["通济门"]       = "tjm",
  ["金店"]         = "jd",
  ["金鸡岭"]       = "jjl",
  ["钟楼"]         = "zl",
  ["钱庄"]         = "qz",
  ["铁井栏"]       = "tjl",
  ["镇安桥"]       = "zaq",
  ["隆礼坊"]       = "llf",
  ["青云楼"]       = "qyl",
  ["青云路"]       = "qylu",
  ["鹿乳井"]       = "lrj",
  ["黄华山"]       = "hhs",
  ["鼓楼"]         = "gl",
  ["鼓楼前"]       = "glq",
  ["鼓楼后"]       = "glh",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>处州 - chuz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["chuz"] = {

  region = {
    key  = "chuz",
    name = "处州",
  },

  mapNodes = {

    ["万寿宫|enter,ne,w"] = {
      name = "万寿宫",
      exits = {
        ["enter"] = "会馆|out",
        ["ne"] = "岩泉门|e,nw,se,sw",
        ["w"] = "东街|e,n,w",
      },
    },

    ["万象山|ne,u"] = {
      name = "万象山",
      exits = {
        ["ne"] = "城墙|nw,se,sw",
        ["u"]  = "万象楼|d",
      },
    },

    ["万象楼|d"] = {
      name = "万象楼",
      exits = {
        ["d"] = "万象山|ne,u",
      },
    },

    -- 东街（去重：东街 / 东街1 / 东街2）
    ["东街|e,n,se,sw,w"] = {
      name = "东街",
      exits = {
        ["e"]  = "东街|e,n,sw,w",
        ["n"]  = "客店|s,u",
        ["se"] = "城隍庙|ne,nw,se,sw,w",
        ["sw"] = "中央广场|e,n,ne,s,se,sw,w",
        ["w"]  = "处州府|e,n,s,w",
      },
    },

    ["东街|e,n,sw,w"] = {
      name = "东街1",
      exits = {
        ["e"]  = "东街|e,n,w",
        ["n"]  = "钱庄|s",
        ["sw"] = "城隍庙|ne,nw,se,sw,w",
        ["w"]  = "东街|e,n,se,sw,w",
      },
    },

    ["东街|e,n,w"] = {
      name = "东街2",
      exits = {
        ["e"] = "万寿宫|enter,ne,w",
        ["w"] = "东街|e,n,sw,w",
      },
    },

    ["中央广场|e,n,ne,s,se,sw,w"] = {
      name = "中央广场",
      exits = {
        ["e"]  = "城隍庙|ne,nw,se,sw,w",
        ["n"]  = "处州府|e,n,s,w",
        ["ne"] = "东街|e,n,se,sw,w",
        ["s"]  = "南大街|e,n,s",
        ["se"] = "得意楼|e,ne,nw,s,w",
        ["sw"] = "西街|ne,nw,s,w",
        ["w"]  = "西街|e,nw,se,w",
      },
    },

    -- 小路（去重：小路 / 小路1）
    ["小路|ne,w"] = {
      name = "小路",
      exits = {
        ["ne"] = "出城小路|nu,se,sw",
        ["w"]  = "瓯江北岸|e,n",
      },
    },

    ["会馆|out"] = {
      name = "会馆",
      exits = {
        ["out"] = "万寿宫|enter,ne,w",
      },
    },

    ["出城小路|nu,se,sw"] = {
      name = "出城小路",
      exits = {
        ["nu"] = "行春门|ne,sd,sw,w",
        ["se"] = "官道|nw,se",
        ["sw"] = "小路|ne,w",
      },
    },

    ["北大街|n,s,w"] = {
      name = "北大街",
      exits = {
        ["n"] = "望京门|e,nu,s,w",
        ["s"] = "处州府|e,n,s,w",
        ["w"] = "总兵署|e,w",
      },
    },

    -- 南大街（去重：南大街 / 南大街3 / 南大街4；原本的 南大街1/2 保持不动）
    ["南大街|e,n,s"] = {
      name = "南大街",
      exits = {
        ["e"] = "得意楼|e,ne,nw,s,w",
        ["n"] = "中央广场|e,n,ne,s,se,sw,w",
        ["s"] = "南大街|e,n,s,w",
      },
    },

    ["南大街|e,n,s,w"] = {
      name = "南大街3",
      exits = {
        ["e"] = "南大街1|e,n,w",
        ["n"] = "南大街|e,n,s",
        ["s"] = "南明门|e,n,s,w",
        ["w"] = "南大街|e,n,w",
      },
    },

    ["南大街|e,n,w"] = {
      name = "南大街4",
      exits = {
        ["e"] = "南大街|e,n,s,w",
        ["n"] = "西街|ne,nw,s,w",
        ["w"] = "括苍门|e,nw,se,wu",
      },
    },

    ["南大街1|e,n,w"] = {
      name = "南大街1",
      exits = {
        ["e"] = "南大街2|e,n,w",
        ["n"] = "得意楼|e,ne,nw,s,w",
        ["w"] = "南大街|e,n,s,w",
      },
    },

    ["南大街2|e,n,w"] = {
      name = "南大街2",
      exits = {
        ["e"] = "行春门|ne,sd,sw,w",
        ["n"] = "杂货铺子|nw,s,w",
        ["w"] = "南大街1|e,n,w",
      },
    },

    ["南明门|e,n,s,w"] = {
      name = "南明门",
      exits = {
        ["e"] = "城墙|ne,w",
        ["n"] = "南大街|e,n,s,w",
        ["s"] = "瓯江北岸|e,n",
        ["w"] = "城墙|e,nw",
      },
    },

    -- 城墙（大量同名：统一编号去重；不改 key）
    ["城墙|e,nw"] = {
      name = "城墙",
      exits = {
        ["e"]  = "南明门|e,n,s,w",
        ["nw"] = "括苍门|e,nw,se,wu",
      },
    },

    ["城墙|e,sw"] = {
      name = "城墙1",
      exits = {
        ["e"]  = "城墙1|e,w",
        ["sw"] = "通惠门|e,ne,nw,se,sw",
      },
    },

    ["城墙|e,w"] = {
      name = "城墙2",
      exits = {
        ["e"] = "城墙|se,w",
        ["w"] = "望京门|e,nu,s,w",
      },
    },

    ["城墙1|e,w"] = {
      name = "城墙3",
      exits = {
        ["e"] = "望京门|e,nu,s,w",
        ["w"] = "城墙|e,sw",
      },
    },

    ["城墙|ne,se"] = {
      name = "城墙4",
      exits = {
        ["ne"] = "城墙3|ne,sw",
        ["se"] = "城墙|nw,se,sw",
      },
    },

    ["城墙|nw,sw,u"] = {
      name = "城墙5",
      exits = {
        ["nw"] = "岩泉门|e,nw,se,sw",
        ["sw"] = "城墙2|ne,sw",
        ["u"]  = "镇东楼|d",
      },
    },

    ["镇东楼|d"] = {
      name = "镇东楼",
      exits = {
        ["d"] = "城墙|nw,sw,u",
      },
    },

    ["城墙2|ne,sw"] = {
      name = "城墙6",
      exits = {
        ["ne"] = "城墙|nw,sw,u",
        ["sw"] = "城墙1|ne,sw",
      },
    },

    ["城墙1|ne,sw"] = {
      name = "城墙7",
      exits = {
        ["ne"] = "城墙2|ne,sw",
        ["sw"] = "城墙|ne,sw",
      },
    },

    ["城墙|ne,sw"] = {
      name = "城墙8",
      exits = {
        ["ne"] = "城墙1|ne,sw",
        ["sw"] = "行春门|ne,sd,sw,w",
      },
    },

    ["城墙|ne,w"] = {
      name = "城墙9",
      exits = {
        ["ne"] = "行春门|ne,sd,sw,w",
        ["w"]  = "南明门|e,n,s,w",
      },
    },

    ["城墙|nw,se,sw"] = {
      name = "城墙10",
      exits = {
        ["nw"] = "城墙|ne,se",
        ["se"] = "括苍门|e,nw,se,wu",
        ["sw"] = "万象山|ne,u",
      },
    },

    ["城墙|se,w"] = {
      name = "城墙11",
      exits = {
        ["se"] = "岩泉门|e,nw,se,sw",
        ["w"]  = "城墙|e,w",
      },
    },

    ["城隍庙|ne,nw,se,sw,w"] = {
      name = "城隍庙",
      exits = {
        ["ne"] = "东街|e,n,sw,w",
        ["nw"] = "东街|e,n,se,sw,w",
        ["se"] = "杂货铺子|nw,s,w",
        ["sw"] = "得意楼|e,ne,nw,s,w",
        ["w"]  = "中央广场|e,n,ne,s,se,sw,w",
      },
    },

    ["处州府|e,n,s,w"] = {
      name = "处州府",
      exits = {
        ["e"] = "东街|e,n,se,sw,w",
        ["n"] = "北大街|n,s,w",
        ["s"] = "中央广场|e,n,ne,s,se,sw,w",
      },
    },

    ["官道|nw,se"] = {
      name = "官道",
      exits = {
        ["nw"] = "出城小路|nu,se,sw",
      },
    },

    ["客店|s,u"] = {
      name = "客店",
      exits = {
        ["s"] = "东街|e,n,se,sw,w",
        ["u"] = "客店二楼|d",
      },
    },

    ["客店二楼|d"] = {
      name = "客店二楼",
      exits = {
        ["d"] = "客店|s,u",
      },
    },

    ["小路|ed,xiaolu"] = {
      name = "小路1",
      exits = {
        ["ed"] = "括苍门|e,nw,se,wu",
      },
    },

    -- 山路（去重：山路 / 山路1）
    ["山路|eu,w"] = {
      name = "山路",
      exits = {
        ["eu"] = "山间道|se,wd",
        ["w"]  = "岩泉门|e,nw,se,sw",
      },
    },

    ["山路|sd"] = {
      name = "山路1",
      exits = {
        ["sd"] = "望京门|e,nu,s,w",
      },
    },

    ["山间道|se,wd"] = {
      name = "山间道",
      exits = {
        ["wd"] = "山路|eu,w",
      },
    },

    ["岩泉门|e,nw,se,sw"] = {
      name = "岩泉门",
      exits = {
        ["e"]  = "山路|eu,w",
        ["nw"] = "城墙|se,w",
        ["se"] = "城墙|nw,sw,u",
        ["sw"] = "万寿宫|enter,ne,w",
      },
    },

    ["得意楼|e,ne,nw,s,w"] = {
      name = "得意楼",
      exits = {
        ["e"]  = "杂货铺子|nw,s,w",
        ["ne"] = "城隍庙|ne,nw,se,sw,w",
        ["nw"] = "中央广场|e,n,ne,s,se,sw,w",
        ["s"]  = "南大街1|e,n,w",
        ["w"]  = "南大街|e,n,s",
      },
    },

    ["总兵署|e,w"] = {
      name = "总兵署",
      exits = {
        ["e"] = "北大街|n,s,w",
        ["w"] = "通惠门|e,ne,nw,se,sw",
      },
    },

    ["括苍门|e,nw,se,wu"] = {
      name = "括苍门",
      exits = {
        ["e"]  = "南大街|e,n,w",
        ["nw"] = "城墙|nw,se,sw",
        ["se"] = "城墙|e,nw",
        ["wu"] = "小路|ed,xiaolu",
      },
    },

    ["望京门|e,nu,s,w"] = {
      name = "望京门",
      exits = {
        ["e"]  = "城墙|e,w",
        ["nu"] = "山路|sd",
        ["s"]  = "北大街|n,s,w",
        ["w"]  = "城墙1|e,w",
      },
    },

    ["杂货铺子|nw,s,w"] = {
      name = "杂货铺子",
      exits = {
        ["nw"] = "城隍庙|ne,nw,se,sw,w",
        ["s"]  = "南大街2|e,n,w",
        ["w"]  = "得意楼|e,ne,nw,s,w",
      },
    },

    ["树林前|se"] = {
      name = "树林前",
      exits = {
        ["se"] = "通惠门|e,ne,nw,se,sw",
      },
    },

    ["民宅|e"] = {
      name = "民宅",
      exits = {
        ["e"] = "西街|ne,nw,s,w",
      },
    },

    ["瓯江北岸|e,n"] = {
      name = "瓯江北岸",
      exits = {
        ["e"] = "小路|ne,w",
        ["n"] = "南明门|e,n,s,w",
        ["ride"] = "瓯江南岸",
      },
    },

    ["行春门|ne,sd,sw,w"] = {
      name = "行春门",
      exits = {
        ["ne"] = "城墙|ne,sw",
        ["sd"] = "出城小路|nu,se,sw",
        ["sw"] = "城墙|ne,w",
        ["w"]  = "南大街2|e,n,w",
      },
    },

    -- 西街（去重：西街 / 西街1 / 西街2）
    ["西街|e,nw,se,w"] = {
      name = "西街",
      exits = {
        ["e"]  = "中央广场|e,n,ne,s,se,sw,w",
        ["nw"] = "西街|nw,se,sw",
        ["se"] = "西街|ne,nw,s,w",
        ["w"]  = "马车行|e,ne",
      },
    },

    ["西街|ne,nw,s,w"] = {
      name = "西街1",
      exits = {
        ["ne"] = "中央广场|e,n,ne,s,se,sw,w",
        ["nw"] = "西街|e,nw,se,w",
        ["s"]  = "南大街|e,n,w",
        ["w"]  = "民宅|e",
      },
    },

    ["西街|nw,se,sw"] = {
      name = "西街2",
      exits = {
        ["nw"] = "通惠门|e,ne,nw,se,sw",
        ["se"] = "西街|e,nw,se,w",
        ["sw"] = "马车行|e,ne",
      },
    },

    ["通惠门|e,ne,nw,se,sw"] = {
      name = "通惠门",
      exits = {
        ["e"]  = "总兵署|e,w",
        ["ne"] = "城墙|e,sw",
        ["nw"] = "树林前|se",
        ["se"] = "西街|nw,se,sw",
        ["sw"] = "城墙3|ne,sw",
      },
    },

    ["城墙3|ne,sw"] = {
      name = "城墙12",
      exits = {
        ["ne"] = "通惠门|e,ne,nw,se,sw",
        ["sw"] = "城墙|ne,se",
      },
    },

    ["钱庄|s"] = {
      name = "钱庄",
      exits = {
        ["s"] = "东街|e,n,sw,w",
      },
    },

    ["马车行|e,ne"] = {
      name = "马车行",
      exits = {
        ["e"]  = "西街|e,nw,se,w",
        ["ne"] = "西街|nw,se,sw",
      },
    },
  ["仁寿寺|e,s,w"] = {
    name = "仁寿寺",
    exits = {
      ["e"] = "石梁|d,n,w",
      ["s"] = "献花岩|n,w",
      ["w"] = "弥勒龛|e,s,u",
    },
  },
  ["南明山脚|eu,nd"] = {
    name = "南明山脚",
    exits = {
      ["eu"] = "石磴道|s,wd",
      ["nd"] = "瓯江南岸|su,w",
    },
  },
  ["印月池|u"] = {
    name = "印月池",
    exits = {
      ["u"] = "石梁|d,n,w",
    },
  },
  ["官道|e,sw"] = {
    name = "官道",
    exits = {
      ["e"] = "瓯江南岸|su,w",
    },
  },
  ["弥勒龛|e,s,u"] = {
    name = "弥勒龛",
    exits = {
      ["e"] = "仁寿寺|e,s,w",
      ["s"] = "石门|e,n",
      ["u"] = "高阳洞|d",
    },
  },
  ["献花岩|n,w"] = {
    name = "献花岩",
    exits = {
      ["n"] = "仁寿寺|e,s,w",
      ["w"] = "石门|e,n",
    },
  },
  ["瓯江南岸|su,w"] = {
    name = "瓯江南岸",
    exits = {
      ["su"] = "南明山脚|eu,nd",
      ["w"] = "官道|e,sw",
      ["ride"] = "瓯江北岸|e,n",
    },
  },
  ["石梁|d,n,w"] = {
    name = "石梁",
    exits = {
      ["d"] = "印月池|u",
      ["n"] = "石磴道|s,wd",
      ["w"] = "仁寿寺|e,s,w",
    },
  },
  ["石磴道|s,wd"] = {
    name = "石磴道",
    exits = {
      ["s"] = "石梁|d,n,w",
      ["wd"] = "南明山脚|eu,nd",
    },
  },
  ["石门|e,n"] = {
    name = "石门",
    exits = {
      ["e"] = "献花岩|n,w",
      ["n"] = "弥勒龛|e,s,u",
    },
  },
  ["高阳洞|d"] = {
    name = "高阳洞",
    exits = {
      ["d"] = "弥勒龛|e,s,u",
    },
  },    

  }, -- mapNodes 结束

} -- mapper.maps["chuz"] 结束


-- 仅保留“实际存在”的房间名，并补齐去重后的编号房间别名
mapper.maps["chuz"].mapAliases = {
  ["万寿宫"]     = "wsg",
  ["会馆"]       = "hg",

  ["东街"]       = "dj",
  ["东街1"]      = "dj1",
  ["东街2"]      = "dj2",

  ["中央广场"]   = "origin",

  ["出城小路"]   = "ccl",
  ["北大街"]     = "bdj",

  ["南大街"]     = "ndj",
  ["南大街1"]    = "ndj1",
  ["南大街2"]    = "ndj2",
  ["南大街3"]    = "ndj3",
  ["南大街4"]    = "ndj4",

  ["南明门"]     = "nmm",

  ["城隍庙"]     = "chm",
  ["处州府"]     = "czf",

  ["小路"]       = "xl",
  ["小路1"]      = "xl1",

  ["瓯江北岸"]   = "ojba",

  ["官道"]       = "gd",

  ["客店"]       = "kd",
  ["客店二楼"]   = "kdel",

  ["得意楼"]     = "dyl",
  ["杂货铺子"]   = "zhpz",
  ["钱庄"]       = "qz",

  ["总兵署"]     = "zbs",
  ["括苍门"]     = "kcm",
  ["望京门"]     = "wjm",

  ["行春门"]     = "xcm",
  ["通惠门"]     = "thm",
  ["树林前"]     = "slq",
  ["民宅"]       = "mz",
  ["马车行"]     = "mch",

  ["山路"]       = "sl",
  ["山路1"]      = "sl1",
  ["山间道"]     = "sjd",
  ["岩泉门"]     = "yqm",

  ["万象山"]     = "wxs",
  ["万象楼"]     = "wxl",
  ["镇东楼"]     = "zdl",

  -- 城墙编号别名（去重后可 goto）
  ["城墙"]       = "cq",
  ["城墙1"]      = "cq1",
  ["城墙2"]      = "cq2",
  ["城墙3"]      = "cq3",
  ["城墙4"]      = "cq4",
  ["城墙5"]      = "cq5",
  ["城墙6"]      = "cq6",
  ["城墙7"]      = "cq7",
  ["城墙8"]      = "cq8",
  ["城墙9"]      = "cq9",
  ["城墙10"]     = "cq10",
  ["城墙11"]     = "cq11",
  ["城墙12"]     = "cq12",

  -- 西街编号别名
  ["西街"]       = "xj",
  ["西街1"]      = "xj1",
  ["西街2"]      = "xj2",
 
  -- 新增：瓯江南岸 / 南明山一线
  ["瓯江南岸"]   = "ojna",
  ["南明山脚"]   = "nmsj",
  ["石磴道"]     = "sdd",

  -- 新增：仁寿寺一线
  ["仁寿寺"]     = "rss",
  ["石梁"]       = "sl2",   -- 避免和“山路(sl)”/“树林前(slq)”太像，这里用 sl2
  ["印月池"]     = "yyc",
  ["弥勒龛"]     = "mlk",
  ["献花岩"]     = "xhy",
  ["石门"]       = "sm2",   -- 避免和你其他地图里常用的“山门(sm)”
  ["高阳洞"]     = "gyd2",  -- 你 alias 里已有“观音洞(gyd)”，这里用 gyd2
  
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>泉州 - qz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {}

mapper.maps["qz"]= {

  region = {
    key  = "qz",      -- 区域代号，用在 goto wx.xxx 里
    name = "泉州",    -- 纯注释/显示用
  },

  mapNodes = {

    ["九日山|ed,wd"] = {
      name = "九日山",
      exits = {
        ["ed"] = "山路|se,wu",
      },
    },

    ["元妙观|s"] = {
      name = "元妙观",
      exits = {
        ["s"] = "西街|e,n,nw,s,w",
      },
    },

    ["北码头|s"] = {
      name = "北码头",
      exits = {
        ["s"] = "泉州码头|n,s,wu",
      },
    },

    ["南台寺|s"] = {
      name = "南台寺",
      exits = {
        ["s"] = "山路|e,n,wd",
      },
    },

    ["南台岩|sed"] = {
      name = "南台岩",
      exits = {
        ["sed"] = "山路|eu,nwu,s",
      },
    },

    ["南码头|n"] = {
      name = "南码头",
      exits = {
        ["n"] = "泉州码头|n,s,wu",
      },
    },

    ["南门|n,s"] = {
      name = "南门",
      exits = {
        ["n"] = "城中心|e,n,ne,s,w",
        ["s"] = "南海海滨|e,n",
      },
    },

    ["南海海滨|e,n"] = {
      name = "南海海滨",
      exits = {
        ["e"] = "大海边|w",
        ["n"] = "南门|n,s",
      },
    },

    ["大海边|w"] = {
      name = "大海边",
      exits = {
        ["w"] = "南海海滨|e,n",
      },
    },

    ["城中心|e,n,ne,s,w"] = {
      name = "城中心",
      exits = {
        ["e"]  = "泉州港|ed,n,ne,s,w",
        ["n"]  = "泉州北门|n,nw,s",
        ["ne"] = "客栈|enter,ne,sw",
        ["s"]  = "南门|n,s",
        ["w"]  = "西街|e,n,nw,s,w",
      },
    },

    ["大帐|n"] = {
      name = "大帐",
      exits = {
        ["n"] = "泉州港|ed,n,ne,s,w",
      },
    },

    ["大殿|out"] = {
      name = "大殿",
      exits = {
        ["out"] = "涵宫|enter,ne,sw",
      },
    },

    ["大雄宝殿|e,nu,s,w"] = {
      name = "大雄宝殿",
      exits = {
        ["e"]  = "香积厨|w",
        ["nu"] = "观音阁|e,n,sd,w",
        ["s"]  = "殿前广场|enter,n",
        ["w"]  = "放生池|e",
      },
    },

    ["天王殿|e,out,s,w"] = {
      name = "天王殿",
      exits = {
        ["e"]   = "执事馆|w",
        ["out"] = "殿前广场|enter,n",
        ["s"]   = "山门|n,sd",
        ["w"]   = "罗汉堂|e",
      },
    },

    ["官桥镇|e"] = {
      name = "官桥镇",
      exits = {
        ["e"] = "山路|ne,sw,w",
      },
    },

    ["客房|out"] = {
      name = "客房",
      exits = {
        ["out"] = "客栈|enter,ne,sw",
      },
    },

    ["客栈|enter,ne,sw"] = {
      name = "客栈",
      exits = {
        ["enter"] = "客房|out",
        ["ne"]    = "泉州当铺|s,sw",
        ["sw"]    = "城中心|e,n,ne,s,w",
      },
    },

    ["寺前广场|nu,nw,se"] = {
      name = "寺前广场",
      exits = {
        ["nu"] = "山门|n,sd",
        ["nw"] = "山路|se,wu",
        ["se"] = "山路|nw,se",
      },
    },

    -- 山路（统一编号去重；不改 key）
    ["山路|e,n,wd"] = {
      name = "山路",
      exits = {
        ["e"]  = "虎乳泉|se,w",
        ["n"]  = "南台寺|s",
        ["wd"] = "山路|eu,nwu,s",
      },
    },

    ["山路|eu,nwu,s"] = {
      name = "山路1",
      exits = {
        ["eu"]  = "山路|e,n,wd",
        ["nwu"] = "南台岩|sed",
        ["s"]   = "山路|n,sd",
      },
    },

    ["山路|n,sd"] = {
      name = "山路2",
      exits = {
        ["n"]  = "山路|eu,nwu,s",
        ["sd"] = "莲花池|nu,nw",
      },
    },

    ["山路|ne,sw,w"] = {
      name = "山路3",
      exits = {
        ["sw"] = "泉州港|ed,n,ne,s,w",
        ["w"]  = "官桥镇|e",
      },
    },

    ["山路|nw,sd,se"] = {
      name = "山路4",
      exits = {
        ["nw"] = "木桥|n,se",
        ["sd"] = "清源山脚|neu,nu,s",
        ["se"] = "建阳县|nw,s",
      },
    },

    ["山路|nw,se"] = {
      name = "山路5",
      exits = {
        ["nw"] = "寺前广场|nu,nw,se",
        ["se"] = "泉州北门|n,nw,s",
      },
    },

    ["山路|se,wu"] = {
      name = "山路6",
      exits = {
        ["se"] = "寺前广场|nu,nw,se",
        ["wu"] = "九日山|ed,wd",
      },
    },

    -- 山门（统一编号去重；不改 key）
    ["山门|n,sd"] = {
      name = "山门",
      exits = {
        ["n"]  = "天王殿|e,out,s,w",
        ["sd"] = "寺前广场|nu,nw,se",
      },
    },

    ["山门|ne,nu,swd"] = {
      name = "山门1",
      exits = {
        ["ne"]  = "涵宫|enter,ne,sw",
        ["nu"]  = "老君岩|sd",
        ["swd"] = "清源山脚|neu,nu,s",
      },
    },

    ["巨鲸帮总舵|n"] = {
      name = "巨鲸帮总舵",
      exits = {
        ["n"] = "西街|e,n,nw,s,w",
      },
    },

    ["建阳县|nw,s"] = {
      name = "建阳县",
      exits = {
        ["nw"] = "山路|nw,sd,se",
      },
    },

    ["执事馆|w"] = {
      name = "执事馆",
      exits = {
        ["w"] = "天王殿|e,out,s,w",
      },
    },

    ["放生池|e"] = {
      name = "放生池",
      exits = {
        ["e"] = "大雄宝殿|e,nu,s,w",
      },
    },

    ["晋江东岸|e"] = {
      name = "晋江东岸",
      exits = {
        ["e"] = "西门|e,n,w",
      },
    },

    ["曾井铺|se,w"] = {
      name = "曾井铺",
      exits = {
        ["se"] = "西街|e,n,nw,s,w",
        ["w"]  = "曾宅|e",
      },
    },

    ["曾宅|e"] = {
      name = "曾宅",
      exits = {
        ["e"] = "曾井铺|se,w",
      },
    },

    ["木桥|n,se"] = {
      name = "木桥",
      exits = {
        ["se"] = "山路|nw,sd,se",
      },
    },

    ["杂货铺|n"] = {
      name = "杂货铺",
      exits = {
        ["n"] = "西街|e,s,w",
      },
    },

    ["枕云亭|ed,nw"] = {
      name = "枕云亭",
      exits = {
        ["ed"] = "百丈坪|wu",
        ["nw"] = "虎乳泉|se,w",
      },
    },

    ["殿前广场|enter,n"] = {
      name = "殿前广场",
      exits = {
        ["enter"] = "天王殿|e,out,s,w",
        ["n"]     = "大雄宝殿|e,nu,s,w",
      },
    },

    ["泉州北门|n,nw,s"] = {
      name = "泉州北门",
      exits = {
        ["n"]  = "清源山脚|neu,nu,s",
        ["nw"] = "山路|nw,se",
        ["s"]  = "城中心|e,n,ne,s,w",
      },
    },

    ["泉州当铺|s,sw"] = {
      name = "泉州当铺",
      exits = {
        ["s"]  = "泉州港|ed,n,ne,s,w",
        ["sw"] = "客栈|enter,ne,sw",
      },
    },

    ["泉州港|ed,n,ne,s,w"] = {
      name = "泉州港",
      exits = {
        ["ed"] = "泉州码头|n,s,wu",
        ["n"]  = "泉州当铺|s,sw",
        ["ne"] = "山路|ne,sw,w",
        ["s"]  = "大帐|n",
        ["w"]  = "城中心|e,n,ne,s,w",
      },
    },

    ["泉州码头|n,s,wu"] = {
      name = "泉州码头",
      exits = {
        ["n"]  = "北码头|s",
        ["s"]  = "南码头|n",
        ["wu"] = "泉州港|ed,n,ne,s,w",
      },
    },

    ["法堂|out,u"] = {
      name = "法堂",
      exits = {
        ["out"] = "藏经阁|enter,s",
      },
    },

    ["涵宫|enter,ne,sw"] = {
      name = "涵宫",
      exits = {
        ["enter"] = "大殿|out",
        ["ne"]    = "见龙台|se,sw",
        ["sw"]    = "山门|ne,nu,swd",
      },
    },

    ["清源山脚|neu,nu,s"] = {
      name = "清源山脚",
      exits = {
        ["neu"] = "山门|ne,nu,swd",
        ["nu"]  = "山路|nw,sd,se",
        ["s"]   = "泉州北门|n,nw,s",
      },
    },

    ["百丈坪|wu"] = {
      name = "百丈坪",
      exits = {
        ["wu"] = "枕云亭|ed,nw",
      },
    },

    ["祖堂|e"] = {
      name = "祖堂",
      exits = {
        ["e"] = "观音阁|e,n,sd,w",
      },
    },

    ["罗汉堂|e"] = {
      name = "罗汉堂",
      exits = {
        ["e"] = "天王殿|e,out,s,w",
      },
    },

    ["老君岩|sd"] = {
      name = "老君岩",
      exits = {
        ["sd"] = "山门|ne,nu,swd",
      },
    },

    ["莲花池|nu,nw"] = {
      name = "莲花池",
      exits = {
        ["nu"] = "山路|n,sd",
        ["nw"] = "见龙台|se,sw",
      },
    },

    ["藏经阁|enter,s"] = {
      name = "藏经阁",
      exits = {
        ["enter"] = "法堂|out,u",
        ["s"]     = "观音阁|e,n,sd,w",
      },
    },

    ["虎乳泉|se,w"] = {
      name = "虎乳泉",
      exits = {
        ["se"] = "枕云亭|ed,nw",
        ["w"]  = "山路|e,n,wd",
      },
    },

    -- 西街（去重：西街 / 西街1）
    ["西街|e,n,nw,s,w"] = {
      name = "西街",
      exits = {
        ["e"]  = "城中心|e,n,ne,s,w",
        ["n"]  = "元妙观|s",
        ["nw"] = "曾井铺|se,w",
        ["s"]  = "巨鲸帮总舵|n",
        ["w"]  = "西街|e,s,w",
      },
    },

    ["西街|e,s,w"] = {
      name = "西街1",
      exits = {
        ["e"] = "西街|e,n,nw,s,w",
        ["s"] = "杂货铺|n",
        ["w"] = "西门|e,n,w",
      },
    },

    ["西门|e,n,w"] = {
      name = "西门",
      exits = {
        ["e"] = "西街|e,s,w",
        ["n"] = "鲤城马车行|s",
        ["w"] = "晋江东岸|e",
      },
    },

    ["见龙台|se,sw"] = {
      name = "见龙台",
      exits = {
        ["se"] = "莲花池|nu,nw",
        ["sw"] = "涵宫|enter,ne,sw",
      },
    },

    ["观音阁|e,n,sd,w"] = {
      name = "观音阁",
      exits = {
        ["e"]  = "达摩堂|w",
        ["n"]  = "藏经阁|enter,s",
        ["sd"] = "大雄宝殿|e,nu,s,w",
        ["w"]  = "祖堂|e",
      },
    },

    ["达摩堂|w"] = {
      name = "达摩堂",
      exits = {
        ["w"] = "观音阁|e,n,sd,w",
      },
    },

    ["香积厨|w"] = {
      name = "香积厨",
      exits = {
        ["w"] = "大雄宝殿|e,nu,s,w",
      },
    },

    ["鲤城马车行|s"] = {
      name = "鲤城马车行",
      exits = {
        ["s"] = "西门|e,n,w",
      },
    },

  },
}

-- 去重后补齐 mapAliases（含：西街1、山门1、山路1-6；其余沿用原别名）
mapper.maps["qz"].mapAliases = {
  ["九日山"]       = "jrs",
  ["元妙观"]       = "ymg",
  ["北码头"]       = "bmt",
  ["南台寺"]       = "nts",
  ["南台岩"]       = "nty",
  ["南码头"]       = "nmt",
  ["南门"]         = "nm",
  ["南海海滨"]     = "nhhb",
  ["大海边"]       = "dhb",

  ["城中心"]       = "origin",
  ["大帐"]         = "dz",
  ["大殿"]         = "dd",
  ["大雄宝殿"]     = "dxbd",
  ["天王殿"]       = "twd",

  ["官桥镇"]       = "gqz",
  ["客房"]         = "kf",
  ["客栈"]         = "kz",
  ["寺前广场"]     = "sqgc",

  ["山路"]         = "sl",
  ["山路1"]        = "sl1",
  ["山路2"]        = "sl2",
  ["山路3"]        = "sl3",
  ["山路4"]        = "sl4",
  ["山路5"]        = "sl5",
  ["山路6"]        = "sl6",

  ["山门"]         = "sm",
  ["山门1"]        = "sm1",

  ["巨鲸帮总舵"]   = "jjbzd",
  ["建阳县"]       = "jyx",
  ["执事馆"]       = "zsg",
  ["放生池"]       = "fsc",
  ["晋江东岸"]     = "jjda",

  ["曾井铺"]       = "zjp",
  ["曾宅"]         = "zz",
  ["木桥"]         = "mq",
  ["杂货铺"]       = "zhp",
  ["枕云亭"]       = "zyt",
  ["殿前广场"]     = "dqgc",

  ["泉州北门"]     = "qzbm",
  ["泉州当铺"]     = "qzdp",
  ["泉州港"]       = "qzg",
  ["泉州码头"]     = "qzmt",

  ["法堂"]         = "ft",
  ["涵宫"]         = "hg",
  ["清源山脚"]     = "qysj",
  ["百丈坪"]       = "bzp",
  ["祖堂"]         = "zt",
  ["罗汉堂"]       = "lht",
  ["老君岩"]       = "ljy",
  ["莲花池"]       = "lhc",
  ["藏经阁"]       = "cjg",
  ["虎乳泉"]       = "hrq",

  ["西街"]         = "xj",
  ["西街1"]        = "xj1",
  ["西门"]         = "xm",

  ["见龙台"]       = "jlt",
  ["观音阁"]       = "gyg",
  ["达摩堂"]       = "dmt",
  ["香积厨"]       = "xjc",
  ["鲤城马车行"]   = "mch",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>潮州 - cz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["cz"] = {

  region = {
    key  = "cz",      -- 区域代号，用在 goto cz.xxx 里
    name = "潮州",    -- 区域中文名
  },

  mapNodes = {

    ["鼓楼|n,s"] = {
      name = "鼓楼",
      exits = {
        ["n"] = "北门|s",
        ["s"] = "太平桥|e,n,s,w",
      },
    },

    ["东大街|e,s,w"] = {
      name = "东大街",
      exits = {
        ["e"] = "广济门|eu,nw,se,w",
        ["s"] = "东大街|e,n,s",
        ["w"] = "中央广场|e,n,s,w",
      },
    },
    
    ["东大街|e,n,s"] = {
      name = "东大街1",
      exits = {
        ["e"] = "客栈|enter,w",
        ["n"] = "东大街|e,s,w",
        ["s"] = "玄妙观|n",
      },
    },    

    ["玄妙观|n"] = {
      name = "玄妙观",
      exits = {
        ["n"] = "东大街|e,n,s",
      },
    },     
        
    ["客栈|enter,w"] = {
      name = "客栈",
      exits = {
        ["w"] = "东大街|e,n,s",
        ["enter"] = "里间|out"
      },
    },        

    ["里间|out"] = {
      name = "里间",
      exits = {
        ["out"] = "客栈|enter,w",
      },
    },    

    ["义安楼|se"] = {
      name = "义安楼",
      exits = {
        ["se"] = "广济桥|ed,ne,nw,wd",
      },
    },

    ["南安|eu,sw"] = {
      name = "南安",
      exits = {
        ["sw"] = "同安|e,ne,su",
      },
    },

    ["南靖|se,sw"] = {
      name = "南靖",
      exits = {
        ["se"] = "漳州|eu,nw,w",
        ["sw"] = "平和|e,ne,sw",
      },
    },

    ["同安|e,ne,su"] = {
      name = "同安",
      exits = {
        ["e"]  = "晋江|ed,w",
        ["ne"] = "南安|eu,sw",
        ["su"] = "山路|nd,wd",
      },
    },

    ["山路|nd,wd"] = {
      name = "山路",
      exits = {
        ["nd"] = "同安|e,ne,su",
        ["wd"] = "漳州|eu,nw,w",
      },
    },

    ["山路|ne,sw"] = {
      name = "山路2",  -- 去重：原“山路”
      exits = {
        ["ne"] = "平和|e,ne,sw",
        ["sw"] = "韩江东岸|ne,wu",
      },
    },

    ["平和|e,ne,sw"] = {
      name = "平和",
      exits = {
        ["e"]  = "漳州|eu,nw,w",
        ["ne"] = "南靖|se,sw",
        ["sw"] = "山路|ne,sw",
      },
    },

    ["广济桥|ed,ne,nw,wd"] = {
      name = "广济桥",
      exits = {
        ["ed"] = "韩江东岸|ne,wu",
        ["ne"] = "翠红阁|sw",
        ["nw"] = "义安楼|se",
        ["wd"] = "广济门|eu,nw,se,w",
      },
    },

    ["广济门|eu,nw,se,w"] = {
      name = "广济门",
      exits = {
        ["eu"] = "广济桥|ed,ne,nw,wd",
        ["nw"] = "韩江边|se",
        ["se"] = "韩江西岸|nw",
        ["w"]  = "东大街|e,s,w",
      },
    },

    ["晋江|ed,w"] = {
      name = "晋江",
      exits = {
        ["ed"] = "晋江西岸|wu",
        ["w"]  = "同安|e,ne,su",
      },
    },

    ["晋江西岸|wu"] = {
      name = "晋江西岸",
      exits = {
        ["wu"] = "晋江|ed,w",
      },
    },

    ["漳州|eu,nw,w"] = {
      name = "漳州",
      exits = {
        ["eu"] = "山路|nd,wd",
        ["nw"] = "南靖|se,sw",
        ["w"]  = "平和|e,ne,sw",
      },
    },

    ["翠红阁|sw"] = {
      name = "翠红阁",
      exits = {
        ["sw"] = "广济桥|ed,ne,nw,wd",
      },
    },

    ["韩江东岸|ne,wu"] = {
      name = "韩江东岸",
      exits = {
        ["ne"] = "山路|ne,sw",
        ["wu"] = "广济桥|ed,ne,nw,wd",
      },
    },

    ["韩江西岸|nw"] = {
      name = "韩江西岸",
      exits = {
        ["nw"] = "广济门|eu,nw,se,w",
      },
    },

    ["韩江边|se"] = {
      name = "韩江边",
      exits = {
        ["se"] = "广济门|eu,nw,se,w",
      },
    },

    ["中央广场|e,n,s,w"] = {
      name = "中央广场",
      exits = {
        ["e"] = "东大街|e,s,w",
        ["n"] = "北大街|n,s",
        ["s"] = "南大街|n,s,w",
        ["w"] = "西大街|e,n,s,w",
      },
    },

    ["凤啸门|s"] = {
      name = "凤啸门",
      exits = {
        ["s"] = "相思桥|e,n,s",
      },
    },

    ["北大街|n,s"] = {
      name = "北大街",
      exits = {
        ["n"] = "太平桥|e,n,s,w",
        ["s"] = "中央广场|e,n,s,w",
      },
    },

    ["北门|s"] = {
      name = "北门",
      exits = {
        ["s"] = "鼓楼|n,s",
      },
    },

    ["医灵堂|e"] = {
      name = "医灵堂",
      exits = {
        ["e"] = "南大街1|n,s,w",
      },
    },

    ["南大街|n,s,w"] = {
      name = "南大街",
      exits = {
        ["n"] = "中央广场|e,n,s,w",
        ["s"] = "南大街1|n,s,w",
        ["w"] = "开元寺|e,n",
      },
    },

    ["南大街1|n,s,w"] = {
      name = "南大街1",
      exits = {
        ["n"] = "南大街|n,s,w",
        ["w"] = "医灵堂|e",
        ["s"] = "三阳门|n,sw,w",
      },
    },
    
    ["州治|w"] = {
      name = "州治",
      exits = {
        ["w"] = "太平桥|e,n,s,w",
      },
    },

    ["太平桥|e,n,s,w"] = {
      name = "太平桥",
      exits = {
        ["e"] = "州治|w",
        ["n"] = "鼓楼|n,s",
        ["s"] = "北大街|n,s",
        ["w"] = "相思桥|e,n,s",
      },
    },

    ["开元寺|e,n"] = {
      name = "开元寺",
      exits = {
        ["e"] = "南大街|n,s,w",
        ["n"] = "西大街|e,n,s,w",
      },
    },

    ["当铺|n,s"] = {
      name = "当铺",
      exits = {
        ["n"] = "相思桥|e,n,s",
        ["s"] = "西大街|e,n,s,w",
      },
    },

    ["相思桥|e,n,s"] = {
      name = "相思桥",
      exits = {
        ["e"] = "太平桥|e,n,s,w",
        ["n"] = "凤啸门|s",
        ["s"] = "当铺|n,s",
      },
    },

    ["西大街|e,n,s,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "中央广场|e,n,s,w",
        ["n"] = "当铺|n,s",
        ["s"] = "开元寺|e,n",
        ["w"] = "西大街1|e,n,s,w",
      },
    },

    ["西大街1|e,n,s,w"] = {
      name = "西大街1",
      exits = {
        ["e"] = "西大街|e,n,s,w",
        ["n"] = "钱庄|s",
        ["s"] = "潮州车行|n",
        ["w"] = "西门|e,s,w",
      },
    },

    ["潮州车行|n"] = {
      name = "潮州车行",
      exits = {
        ["n"] = "西大街1|e,n,s,w",
      },
    },

    ["钱庄|s"] = {
      name = "钱庄",
      exits = {
        ["s"] = "西大街1|e,n,s,w",
      },
    },

    ["西门|e,s,w"] = {
      name = "西门",
      exits = {
        ["e"] = "西大街1|e,n,s,w",
        ["s"] = "官道2|n,s",
        ["w"] = "出城小路|e",
      },
    },

    ["出城小路|e"] = {
      name = "出城小路",
      exits = {
        ["e"] = "西门|e,s,w",
      },
    },    

    ["小路|ne,s"] = {
      name = "小路",
      exits = {
        ["ne"] = "三阳门|n,sw,w",
        ["s"] = "龟屿|n,se",
      },
    },
  
    ["海边|nw"] = {
      name = "海边",
      exits = {
        ["nw"] = "龟屿|n,se",
      },
    },
  
    ["龟屿|n,se"] = {
      name = "龟屿",
      exits = {
        ["n"] = "小路|ne,s",
        ["se"] = "海边|nw",
      },
    },
  
    ["三阳门|n,sw,w"] = {
      name = "三阳门",
      exits = {
        ["n"] = "南大街1|n,s,w",
        ["sw"] = "小路|ne,s",
        ["w"] = "官道|e,w",
      },
    },

    ["官道|e,w"] = {
      name = "官道",
      exits = {
        ["e"] = "三阳门|n,sw,w",
        ["w"] = "官道1|e,w",
      },
    },
    
    ["官道1|e,w"] = {
      name = "官道1",
      exits = {
        ["e"] = "官道|e,w",
        ["w"] = "官道|e,n",
      },
    },
    
    ["官道|e,n"] = {
      name = "官道2",  -- 去重：原“官道”
      exits = {
        ["e"] = "官道1|e,w",
        ["n"] = "官道|n,s",
      },
    },   

    ["官道|n,s"] = {
      name = "官道3",  -- 去重：原“官道”
      exits = {
        ["n"] = "官道2|n,s",
        ["s"] = "官道|e,n",
      },
    },

    ["官道2|n,s"] = {
      name = "官道4",  -- 去重：原“官道”
      exits = {
        ["n"] = "西门|e,s,w",
        ["s"] = "官道|n,s",
      },
    },     

  }, -- mapNodes 结束
  
mapAliases = {
  ["鼓楼"]       = "gl",
  ["东大街"]     = "ddj",
  ["义安楼"]     = "yal",
  ["南安"]       = "na",
  ["南靖"]       = "nj",
  ["同安"]       = "ta",
  ["山路"]       = "sl",
  ["山路2"]      = "sl2",     -- 新增
  ["平和"]       = "ph",
  ["广济桥"]     = "gjq",
  ["广济门"]     = "gjm",
  ["晋江"]       = "jj",
  ["晋江西岸"]   = "jjxa",
  ["漳州"]       = "zz",
  ["翠红阁"]     = "chg",
  ["韩江东岸"]   = "hjda",
  ["韩江西岸"]   = "hjxa",
  ["韩江边"]     = "hjb",
  ["中央广场"]   = "origin",
  ["凤啸门"]     = "fxm",
  ["北大街"]     = "bdj",
  ["北门"]       = "bm",
  ["医灵堂"]     = "ylt",
  ["南大街"]     = "ndj",
  ["南大街1"]    = "ndj1",
  ["太平桥"]     = "tpq",
  ["开元寺"]     = "kys",
  ["当铺"]       = "dp",
  ["相思桥"]     = "xsq",
  ["西大街"]     = "xdj",
  ["西大街1"]    = "xdj1",
  ["潮州车行"]   = "czcx",
  ["钱庄"]       = "qz",
  ["西门"]       = "xm",
  ["小路"]       = "xl",
  ["海边"]       = "hb",
  ["龟屿"]       = "gy",
  ["三阳门"]     = "sym",
  ["客栈"]       = "kz",
  ["出城小路"]   = "ccxl",
  ["玄妙观"]     = "xmg",

  -- 官道系列（新增）
  ["官道"]       = "gd",
  ["官道1"]      = "gd1",
  ["官道2"]      = "gd2",
  ["官道3"]      = "gd3",
  ["官道4"]      = "gd4",
}


} -- mapper.maps["cz"] 结束
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>绍兴 - sx</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {}

mapper.maps["sx"] = {

  region = {
    key  = "sx",      -- 区域代号，用在 goto wx.xxx 里
    name = "绍兴",    -- 纯注释/显示用
  },

  mapNodes = {

    ["东大街|e,n,s,w"] = {
      name = "东大街",
      exits = {
        ["e"] = "东门|e,w",
        ["n"] = "绍兴府衙|enter,s,w",
        ["s"] = "小酒馆|n,w",
        ["w"] = "八字桥|e,n,s",
      },
    },

    ["东大街1|e,n,s,w"] = {
      name = "东大街1",
      exits = {
        ["e"] = "东门|ne,w",
        ["n"] = "酒铺|s",
        ["s"] = "火腿店|n",
        ["w"] = "金华府|e,n,s,sw,w",
      },
    },

    ["酒铺|s"] = {
      name = "酒铺",
      exits = {
        ["s"] = "东大街1|e,n,s,w",
      },
    },

    ["火腿店|n"] = {
      name = "火腿店",
      exits = {
        ["n"] = "东大街1|e,n,s,w",
      },
    },

    -- 东门（去重：东门 / 东门1）
    ["东门|ne,w"] = {
      name = "东门1",
      exits = {
        ["ne"] = "官道1|e,sw",
        ["w"]  = "东大街1|e,n,s,w",
      },
    },

    ["东门|e,w"] = {
      name = "东门",
      exits = {
        ["e"] = "官道|ne,w",
        ["w"] = "东大街|e,n,s,w",
      },
    },

    -- 官道（去重：官道 / 官道1 / 官道2 / 官道3 / 官道4）
    ["官道|ne,w"] = {
      name = "官道",
      exits = {
        ["ne"] = "上虞|e,s,sw",
        ["w"]  = "东门|e,w",
      },
    },

    ["官道1|e,sw"] = {
      name = "官道1",
      exits = {
        ["e"]  = "义乌|e,ne,w",
        ["sw"] = "东门|ne,w",
      },
    },

    ["官道|e,sw"] = {
      name = "官道2",
      exits = {
        ["e"]  = "西门|ne,w",
        ["sw"] = "龙游|n,ne,sw,w",
      },
    },

    ["官道|nu,sw"] = {
      name = "官道3",
      exits = {
        ["nu"] = "山路|ne,sd",
        ["sw"] = "诸暨|ne,sd,se,w",
      },
    },

    ["官道|nw,s"] = {
      name = "官道4",
      exits = {
        ["nw"] = "瓜沥镇|nw,se",
        ["s"]  = "北门|n,s",
      },
    },

    ["上虞|e,s,sw"] = {
      name = "上虞",
      exits = {
        ["sw"] = "官道|ne,w",
      },
    },

    ["临浦镇|nw,sw"] = {
      name = "临浦镇",
      exits = {
        ["nw"] = "富春江口|ne,se",
        ["sw"] = "山路|ne,sd",
      },
    },

    ["义乌|e,ne,w"] = {
      name = "义乌",
      exits = {
        ["e"]  = "香榧古道|eu,w",
        ["ne"] = "浣纱溪边|ne,nw,sw,w",
        ["w"]  = "官道1|e,sw",
      },
    },

    ["五泄|e"] = {
      name = "五泄",
      exits = {
        ["e"] = "诸暨|ne,sd,se,w",
      },
    },

    ["八咏楼|n,sd"] = {
      name = "八咏楼",
      exits = {
        ["n"]  = "南大街|e,n,s",
        ["sd"] = "婺江江边|e,nu",
      },
    },

    ["八字桥|e,n,s"] = {
      name = "八字桥",
      exits = {
        ["e"] = "东大街|e,n,s,w",
        ["n"] = "北大街|e,n,nw,s,w",
        ["s"] = "南大街|e,n,s,w",
      },
    },

    ["力行|e"] = {
      name = "力行",
      exits = {
        ["e"] = "金华府|e,n,s,sw,w",
      },
    },

    ["北大街|e,n,nw,s,w"] = {
      name = "北大街",
      exits = {
        ["e"]  = "绍兴府衙|enter,s,w",
        ["n"]  = "北门|n,s",
        ["nw"] = "绍兴马车行|se",
        ["s"]  = "八字桥|e,n,s",
        ["w"]  = "大善寺塔|e",
      },
    },

    ["北门|n,s"] = {
      name = "北门",
      exits = {
        ["n"] = "官道|nw,s",
        ["s"] = "北大街|e,n,nw,s,w",
      },
    },

    -- 南大街（去重：南大街 / 南大街1 / 南大街2）
    ["南大街|e,n,s"] = {
      name = "南大街",
      exits = {
        ["e"] = "温家别院|w",
        ["n"] = "金华府|e,n,s,sw,w",
        ["s"] = "八咏楼|n,sd",
      },
    },

    ["南大街|e,n,s,w"] = {
      name = "南大街1",
      exits = {
        ["e"] = "小酒馆|n,w",
        ["n"] = "八字桥|e,n,s",
        ["s"] = "南大街1|e,n,s,w",
        ["w"] = "西大街|e,ne,nw,se,sw,w",
      },
    },

    ["南大街1|e,n,s,w"] = {
      name = "南大街2",
      exits = {
        ["e"] = "客店|u,w",
        ["n"] = "南大街|e,n,s,w",
        ["s"] = "南门|n,s,se",
        ["w"] = "医馆|e",
      },
    },

    ["医馆|e"] = {
      name = "医馆",
      exits = {
        ["e"] = "南大街1|e,n,s,w",
      },
    },

    ["客店|u,w"] = {
      name = "客店",
      exits = {
        ["u"] = "客店二楼|d",
        ["w"] = "南大街1|e,n,s,w",
      },
    },

    ["客店二楼|d"] = {
      name = "客店二楼",
      exits = {
        ["d"] = "客店|u,w",
      },
    },

    ["南门|n,s,se"] = {
      name = "南门",
      exits = {
        ["n"]  = "南大街1|e,n,s,w",
        ["s"]  = "鉴湖|n",
        ["se"] = "山路|eu,nw",
      },
    },

    ["鉴湖|n"] = {
      name = "鉴湖",
      exits = {
        ["n"] = "南门|n,s,se",
      },
    },

    -- 山路（去重：山路 / 山路1）
    ["山路|eu,nw"] = {
      name = "山路",
      exits = {
        ["eu"] = "会稽山|wd",
        ["nw"] = "南门|n,s,se",
      },
    },

    ["山路|ne,sd"] = {
      name = "山路1",
      exits = {
        ["ne"] = "临浦镇|nw,sw",
        ["sd"] = "官道|nu,sw",
      },
    },

    ["会稽山|wd"] = {
      name = "会稽山",
      exits = {
        ["wd"] = "山路|eu,nw",
      },
    },

    ["双龙洞|out"] = {
      name = "双龙洞",
      exits = {
        ["out"] = "赤松山|enter,sd",
      },
    },

    ["大善寺塔|e"] = {
      name = "大善寺塔",
      exits = {
        ["e"] = "北大街|e,n,nw,s,w",
      },
    },

    ["大堂|out"] = {
      name = "大堂",
      exits = {
        ["out"] = "绍兴府衙|enter,s,w",
      },
    },

    ["婺江江边|e,nu"] = {
      name = "婺江江边",
      exits = {
        ["e"]  = "码头|w",
        ["nu"] = "八咏楼|n,sd",
      },
    },

    ["龙游|n,ne,sw,w"] = {
      name = "龙游",
      exits = {
        ["n"]  = "游龙帮|s",
        ["ne"] = "官道|e,sw",
      },
    },

    ["游龙帮|s"] = {
      name = "游龙帮",
      exits = {
        ["s"] = "龙游|n,ne,sw,w",
      },
    },

    ["富春江口|ne,se"] = {
      name = "富春江口",
      exits = {
        ["se"] = "临浦镇|nw,sw",
      },
    },

    ["小路|nu,s,w"] = {
      name = "小路",
      exits = {
        ["nu"] = "赤松山|enter,sd",
        ["s"]  = "金华府|e,n,s,sw,w",
        ["w"]  = "武馆|e",
      },
    },

    ["小酒馆|n,w"] = {
      name = "小酒馆",
      exits = {
        ["n"] = "东大街|e,n,s,w",
        ["w"] = "南大街|e,n,s,w",
      },
    },

    ["山间小径|ne,sw"] = {
      name = "山间小径",
      exits = {
        ["ne"] = "府山|ed,se,sw",
        ["sw"] = "浣纱溪边|ne,nw,sw,w",
      },
    },

    ["府山|ed,se,sw"] = {
      name = "府山",
      exits = {
        ["ed"] = "西门|e,wu",
        ["se"] = "越王台|nw",
        ["sw"] = "山间小径|ne,sw",
      },
    },

    ["当铺|se"] = {
      name = "当铺",
      exits = {
        ["se"] = "西大街|e,ne,nw,se,sw,w",
      },
    },

    ["杂货铺|nw"] = {
      name = "杂货铺",
      exits = {
        ["nw"] = "西大街|e,ne,nw,se,sw,w",
      },
    },

    ["武馆|e"] = {
      name = "武馆",
      exits = {
        ["e"] = "小路|nu,s,w",
      },
    },

    ["浣纱溪边|ne,nw,sw,w"] = {
      name = "浣纱溪边",
      exits = {
        ["ne"] = "山间小径|ne,sw",
        ["nw"] = "诸暨|ne,sd,se,w",
        ["sw"] = "义乌|e,ne,w",
        ["w"]  = "浣纱石|e,nu",
      },
    },

    ["浣纱石|e,nu"] = {
      name = "浣纱石",
      exits = {
        ["e"]  = "浣纱溪边|ne,nw,sw,w",
        ["nu"] = "诸暨|ne,sd,se,w",
      },
    },

    ["温家别院|w"] = {
      name = "温家别院",
      exits = {
        ["w"] = "南大街|e,n,s",
      },
    },

    ["瓜沥镇|nw,se"] = {
      name = "瓜沥镇",
      exits = {
        ["se"] = "官道|nw,s",
      },
    },

    ["码头|w"] = {
      name = "码头",
      exits = {
        ["w"] = "婺江江边|e,nu",
      },
    },

    ["绍兴府衙|enter,s,w"] = {
      name = "绍兴府衙",
      exits = {
        ["enter"] = "大堂|out",
        ["s"]     = "东大街|e,n,s,w",
        ["w"]     = "北大街|e,n,nw,s,w",
      },
    },

    ["绍兴马车行|se"] = {
      name = "绍兴马车行",
      exits = {
        ["se"] = "北大街|e,n,nw,s,w",
      },
    },

    ["西大街|e,ne,nw,se,sw,w"] = {
      name = "西大街",
      exits = {
        ["e"]  = "南大街|e,n,s,w",
        ["ne"] = "钱庄|sw",
        ["nw"] = "当铺|se",
        ["se"] = "杂货铺|nw",
        ["sw"] = "铁匠铺|ne",
        ["w"]  = "西门|e,wu",
      },
    },

    -- 西门（去重：西门 / 西门1）
    ["西门|e,wu"] = {
      name = "西门",
      exits = {
        ["e"]  = "西大街|e,ne,nw,se,sw,w",
        ["wu"] = "府山|ed,se,sw",
      },
    },

    ["西门|ne,w"] = {
      name = "西门1",
      exits = {
        ["ne"] = "金华府|e,n,s,sw,w",
        ["w"]  = "官道|e,sw",
      },
    },

    ["诸暨|ne,sd,se,w"] = {
      name = "诸暨",
      exits = {
        ["ne"] = "官道|nu,sw",
        ["sd"] = "浣纱石|e,nu",
        ["se"] = "浣纱溪边|ne,nw,sw,w",
        ["w"]  = "五泄|e",
      },
    },

    ["赤松山|enter,sd"] = {
      name = "赤松山",
      exits = {
        ["enter"] = "双龙洞|out",
        ["sd"]    = "小路|nu,s,w",
      },
    },

    ["越王台|nw"] = {
      name = "越王台",
      exits = {
        ["nw"] = "府山|ed,se,sw",
      },
    },

    ["金华府|e,n,s,sw,w"] = {
      name = "金华府",
      exits = {
        ["e"]  = "东大街1|e,n,s,w",
        ["n"]  = "小路|nu,s,w",
        ["s"]  = "南大街|e,n,s",
        ["sw"] = "西门|ne,w",
        ["w"]  = "力行|e",
      },
    },

    ["钱庄|sw"] = {
      name = "钱庄",
      exits = {
        ["sw"] = "西大街|e,ne,nw,se,sw,w",
      },
    },

    ["铁匠铺|ne"] = {
      name = "铁匠铺",
      exits = {
        ["ne"] = "西大街|e,ne,nw,se,sw,w",
      },
    },

    ["香榧古道|eu,w"] = {
      name = "香榧古道",
      exits = {
        ["w"] = "义乌|e,ne,w",
      },
    },

    -- 你原表里有这个节点但 aliases 没补
    ["山间路|ne,w"] = {
      name = "山间路",
      exits = {
        ["w"] = "东岳行宫|e,sw",
      },
    },

    ["东岳行宫|e,sw"] = {
      name = "东岳行宫",
      exits = {
        ["e"]  = "山间路|ne,w",
        ["sw"] = "出城小路|ne,sw,w",
      },
    },

    ["出城小路|ne,sw,w"] = {
      name = "出城小路",
      exits = {
        ["ne"] = "东岳行宫|e,sw",
        ["sw"] = "关帝庙|ne",
        ["w"]  = "宁远门|e,n,s,w",
      },
    },

    ["关帝庙|ne"] = {
      name = "关帝庙",
      exits = {
        ["ne"] = "出城小路|ne,sw,w",
      },
    },

    ["宁远门|e,n,s,w"] = {
      name = "宁远门",
      exits = {
        ["e"] = "出城小路|ne,sw,w",
        ["n"] = "城墙|s,w",
        ["s"] = "城墙|n,w",
        ["w"] = "下马路|e,s,w",
      },
    },

    ["下马路|e,s,w"] = {
      name = "下马路",
      exits = {
        ["e"] = "宁远门|e,n,s,w",
        ["s"] = "横街|n,s",
        ["w"] = "钟楼|e,n,s,w",
      },
    },

    ["横街|n,s"] = {
      name = "横街",
      exits = {
        ["n"] = "下马路|e,s,w",
        ["s"] = "白云寺|enter,n,s",
      },
    },

    ["白云寺|enter,n,s"] = {
      name = "白云寺",
      exits = {
        ["enter"] = "寺内|out",
        ["n"]     = "横街|n,s",
        ["s"]     = "政和门|e,n,w",
      },
    },

    ["寺内|out"] = {
      name = "寺内",
      exits = {
        ["out"] = "白云寺|enter,n,s",
      },
    },

    ["政和门|e,n,w"] = {
      name = "政和门",
      exits = {
        ["e"] = "城墙|n,w",
        ["n"] = "白云寺|enter,n,s",
        ["w"] = "通仙门|e,n,w",
      },
    },

    ["通仙门|e,n,w"] = {
      name = "通仙门",
      exits = {
        ["e"] = "政和门|e,n,w",
        ["n"] = "前街头|n,s",
        ["w"] = "城墙1|e,w",
      },
    },

    ["钟楼|e,n,s,w"] = {
      name = "钟楼",
      exits = {
        ["e"] = "下马路|e,s,w",
        ["n"] = "石板路|n,s",
        ["s"] = "仓桥亭|n,s",
        ["w"] = "后街|e,n,s,w",
      },
    },
  },
}

mapper.maps["sx"].mapAliases = {
  ["东大街"]     = "ddj",
  ["东大街1"]    = "ddj1",

  ["东门"]       = "dm",
  ["东门1"]      = "dm1",

  ["酒铺"]       = "jp",
  ["火腿店"]     = "htd",

  ["临浦镇"]     = "lpz",
  ["义乌"]       = "yw",
  ["五泄"]       = "wx",

  ["八咏楼"]     = "byl",
  ["八字桥"]     = "origin",

  ["力行"]       = "lx",

  ["北大街"]     = "bdj",
  ["北门"]       = "bm",

  ["南大街"]     = "ndj",
  ["南大街1"]    = "ndj1",
  ["南大街2"]    = "ndj2",

  ["医馆"]       = "yg",
  ["客店"]       = "kd",
  ["客店二楼"]   = "kdel",

  ["南门"]       = "nm",
  ["鉴湖"]       = "jh",

  ["山路"]       = "sl",
  ["山路1"]      = "sl1",
  ["会稽山"]     = "kjs",

  ["双龙洞"]     = "sld",
  ["大善寺塔"]   = "dsst",
  ["大堂"]       = "dt",

  ["婺江江边"]   = "wjjb",

  ["官道"]       = "gd",
  ["官道1"]      = "gd1",
  ["官道2"]      = "gd2",
  ["官道3"]      = "gd3",
  ["官道4"]      = "gd4",

  ["上虞"]       = "sy",

  ["龙游"]       = "ly",
  ["游龙帮"]     = "ylb",

  ["富春江口"]   = "fcjk",

  ["小路"]       = "xl",
  ["小酒馆"]     = "xjg",

  ["山间小径"]   = "sjxj",
  ["山间路"]     = "sjl",

  ["府山"]       = "fs",

  ["当铺"]       = "dp",
  ["杂货铺"]     = "zhp",
  ["武馆"]       = "wg",

  ["浣纱溪边"]   = "hsxb",
  ["浣纱石"]     = "hss",

  ["温家别院"]   = "wjby",
  ["瓜沥镇"]     = "glz",

  ["码头"]       = "mt",

  ["绍兴府衙"]   = "sxfy",
  ["绍兴马车行"] = "mch",

  ["西大街"]     = "xdj",

  ["西门"]       = "xm",
  ["西门1"]      = "xm1",

  ["诸暨"]       = "zj",
  ["赤松山"]     = "css",
  ["越王台"]     = "ywt",

  ["金华府"]     = "jhf",
  ["钱庄"]       = "qz",
  ["铁匠铺"]     = "tjp",

  ["香榧古道"]   = "xfgd",

  ["山间路"]     = "sjl",
  ["东岳行宫"]   = "dyxg",
  ["出城小路"]   = "ccl",
  ["关帝庙"]     = "gdm",

  ["宁远门"]     = "nym",
  ["下马路"]     = "xml",
  ["横街"]       = "hxj",
  ["白云寺"]     = "bys",
  ["寺内"]       = "sn",
  ["政和门"]     = "zhm",
  ["通仙门"]     = "txm",
  ["钟楼"]       = "zl",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>杭州 - hz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["hz"] = {

  region = {
    key  = "hz",      -- 区域代号，用在 goto wx.xxx 里
    name = "杭州",    -- 纯注释/显示用
  },

  mapNodes = {

    ["下瓦子|e,out,s,se,sw,w"] = {
      name = "下瓦子",
      exits = {
        ["e"] = "点心铺|ne,w",
        ["out"] = "下瓦子|enter,n,w",
        ["s"] = "江南钱庄|n,s",
        ["se"] = "杂货铺|nw",
        ["sw"] = "中和楼|ne,u,w",
      },
    },

    ["下瓦子|enter,n,w"] = {
      name = "下瓦子2", -- 去重：原“下瓦子”
      exits = {
        ["enter"] = "下瓦子|e,out,s,se,sw,w",
        ["n"] = "东大街1|e,n,s,w",
      },
    },

    ["东大街|e,n,s,w"] = {
      name = "东大街",
      exits = {
        ["e"] = "东大街1|e,n,s,w",
        ["n"] = "岳王府|s",
        ["s"] = "天月书肆|n",
        ["w"] = "大理寺|e,n,se,w",
      },
    },

    ["岳王府|s"] = {
      name = "岳王府",
      exits = {
        ["s"] = "东大街|e,n,s,w",
      },
    },

    ["天月书肆|n"] = {
      name = "天月书肆",
      exits = {
        ["n"] = "东大街|e,n,s,w",
      },
    },

    ["东大街1|e,n,s,w"] = {
      name = "东大街1",
      exits = {
        ["e"] = "众安桥|e,w",
        ["n"] = "韩王府大门|enter,s",
        ["s"] = "下瓦子|enter,n,w",
        ["w"] = "东大街|e,n,s,w",
      },
    },

    ["众安桥|e,w"] = {
      name = "众安桥",
      exits = {
        ["e"] = "东大街2|e,n,s,w",
        ["w"] = "东大街1|e,n,s,w",
      },
    },

    ["东大街2|e,n,s,w"] = {
      name = "东大街2",
      exits = {
        ["e"] = "东大街3|e,n,s,w",
        ["n"] = "北大街|e,n,s,w",
        ["s"] = "宠物竞技场|n,u",
        ["w"] = "众安桥|e,w",
      },
    },

    ["宠物竞技场|n,u"] = {
      name = "宠物竞技场",
      exits = {
        ["n"] = "东大街2|e,n,s,w",
      },
    },

    ["东大街3|e,n,s,w"] = {
      name = "东大街3",
      exits = {
        ["e"] = "东青门|e,n,s,w",
        ["n"] = "打铁铺|s",
        ["s"] = "榷场|n,sw",
        ["w"] = "东大街2|e,n,s,w",
      },
    },

    ["东青门|e,n,s,w"] = {
      name = "东青门",
      exits = {
        ["w"] = "东大街3|e,n,s,w",
      },
    },

    ["打铁铺|s"] = {
      name = "打铁铺",
      exits = {
        ["s"] = "东大街3|e,n,s,w",
      },
    },

    ["中和楼|ne,u,w"] = {
      name = "中和楼",
      exits = {
        ["ne"] = "下瓦子|e,out,s,se,sw,w",
        ["u"] = "酒家二楼|d,w",
        ["w"] = "八字桥|e,nw,s,w",
      },
    },

    ["临安府|e,enter,s"] = {
      name = "临安府",
      exits = {
        ["e"] = "八字桥|e,nw,s,w",
        ["enter"] = "临安府大堂|out",
        ["s"] = "西街|e,n,s,w",
      },
    },

    ["临安府大堂|out"] = {
      name = "临安府大堂",
      exits = {
        ["out"] = "临安府|e,enter,s",
      },
    },

    ["八字桥|e,nw,s,w"] = {
      name = "八字桥",
      exits = {
        ["e"] = "中和楼|ne,u,w",
        ["nw"] = "大理寺|e,n,se,w",
        ["s"] = "御街|e,n,s,w",
        ["w"] = "临安府|e,enter,s",
      },
    },

    ["右厢房|w"] = {
      name = "右厢房",
      exits = {
        ["w"] = "大厅|e,n,s,w",
      },
    },

    ["后宅|s"] = {
      name = "后宅",
      exits = {
        ["s"] = "大厅|e,n,s,w",
      },
    },

    ["回廊|e,enter"] = {
      name = "回廊",
      exits = {
        ["e"] = "酒家二楼|d,w",
      },
    },

    ["城隍庙|n"] = {
      name = "城隍庙",
      exits = {
        ["n"] = "西街|e,n,s,w",
      },
    },

    ["大厅|e,n,s,w"] = {
      name = "大厅",
      exits = {
        ["e"] = "右厢房|w",
        ["n"] = "后宅|s",
        ["s"] = "花厅|n,out",
        ["w"] = "左厢房|e",
      },
    },

    ["大理寺|e,n,se,w"] = {
      name = "大理寺",
      exits = {
        ["e"] = "东大街|e,n,s,w",
        ["n"] = "御街2|e,n,s,w",
        ["se"] = "八字桥|e,nw,s,w",
        ["w"] = "西大街|e,n,s,w",
      },
    },

    ["左厢房|e"] = {
      name = "左厢房",
      exits = {
        ["e"] = "大厅|e,n,s,w",
      },
    },

    ["御街|e,n,s,w"] = {
      name = "御街",
      exits = {
        ["e"] = "雄武营|w",
        ["n"] = "八字桥|e,nw,s,w",
        ["s"] = "御街1|e,n,s,w",
        ["w"] = "西街|e,n,s,w",
      },
    },

    ["雄武营|w"] = {
      name = "雄武营",
      exits = {
        ["w"] = "御街|e,n,s,w",
      },
    },

    ["都亭驿|w"] = {
      name = "都亭驿",
      exits = {
        ["w"] = "御街1|e,n,s,w",
      },
    },

    ["御街1|e,n,s,w"] = {
      name = "御街1",
      exits = {
        ["e"] = "都亭驿|w",
        ["n"] = "御街|e,n,s,w",
        ["s"] = "和宁门|e,enter,n,s,w",
        ["w"] = "清河坊|e,n,s",
      },
    },

    ["丽正门|e,n,s,w"] = {
      name = "丽正门",
      exits = {
        ["e"] = "宫墙|n,w",
        ["s"] = "嘉会门|e,n,su,sw,w",
        ["w"] = "宫墙|e,n,nw",
      },
    },

    ["凤凰山|ne,se,u"] = {
      name = "凤凰山",
      exits = {
        ["ne"] = "宫墙|e,s,sw",
        ["se"] = "宫墙|e,n,nw",
        ["u"] = "凤凰山顶|d",
      },
    },

    ["凤凰山顶|d"] = {
      name = "凤凰山顶",
      exits = {
        ["d"] = "凤凰山|ne,se,u",
      },
    },

    ["和宁门|e,enter,n,s,w"] = {
      name = "和宁门",
      exits = {
        ["e"] = "宫墙|s,w",
        ["n"] = "御街1|e,n,s,w",
        ["w"] = "宫墙|e,s,sw",
      },
    },

    ["嘉会门|e,n,su,sw,w"] = {
      name = "嘉会门",
      exits = {
        ["n"] = "丽正门|e,n,s,w",
        ["su"] = "山路|ed,nd",
      },
    },

    ["山路|ed,nd"] = {
      name = "山路",
      exits = {
        ["ed"] = "钱塘西渡口|wu",
        ["nd"] = "嘉会门|e,n,su,sw,w",
      },
    },

    ["钱塘西渡口|wu"] = {
      name = "钱塘西渡口",
      exits = {
        ["wu"] = "山路|ed,nd",
      },
    },

    -- 宫墙：4 个同名节点，编号去重
    ["宫墙|e,n,nw"] = {
      name = "宫墙",
      exits = {
        ["e"] = "丽正门|e,n,s,w",
        ["n"] = "宫墙|e,s,sw",
        ["nw"] = "凤凰山|ne,se,u",
      },
    },

    ["宫墙|e,s,sw"] = {
      name = "宫墙2",
      exits = {
        ["e"] = "和宁门|e,enter,n,s,w",
        ["s"] = "宫墙|e,n,nw",
        ["sw"] = "凤凰山|ne,se,u",
      },
    },

    ["宫墙|n,w"] = {
      name = "宫墙3",
      exits = {
        ["n"] = "宫墙|s,w",
        ["w"] = "丽正门|e,n,s,w",
      },
    },

    ["宫墙|s,w"] = {
      name = "宫墙4",
      exits = {
        ["s"] = "宫墙|n,w",
        ["w"] = "和宁门|e,enter,n,s,w",
      },
    },

    ["杂货铺|nw"] = {
      name = "杂货铺",
      exits = {
        ["nw"] = "下瓦子|e,out,s,se,sw,w",
      },
    },

    ["榷场|n,sw"] = {
      name = "榷场",
      exits = {
        ["n"] = "东大街3|e,n,s,w",
        ["sw"] = "点心铺|ne,w",
      },
    },

    ["江南金店|n"] = {
      name = "江南金店",
      exits = {
        ["n"] = "江南钱庄|n,s",
      },
    },

    ["江南钱庄|n,s"] = {
      name = "江南钱庄",
      exits = {
        ["n"] = "下瓦子|e,out,s,se,sw,w",
        ["s"] = "江南金店|n",
      },
    },

    ["清波门|e,nw,sw"] = {
      name = "清波门",
      exits = {
        ["e"] = "西街|e,n,s,w",
        ["nw"] = "湖畔|n,se,w",
      },
    },

    ["湖畔|n,se,w"] = {
      name = "湖畔",
      exits = {
        ["n"] = "院门|s",
        ["se"] = "清波门|e,nw,sw",
      },
    },

    ["院门|s"] = {
      name = "院门",
      exits = {
        ["s"] = "湖畔|n,se,w",
      },
    },

    ["点心铺|ne,w"] = {
      name = "点心铺",
      exits = {
        ["ne"] = "榷场|n,sw",
        ["w"] = "下瓦子|e,out,s,se,sw,w",
      },
    },

    ["祚德庙|e"] = {
      name = "祚德庙",
      exits = {
        ["e"] = "御街2|e,n,s,w",
      },
    },

    ["花厅|n,out"] = {
      name = "花厅",
      exits = {
        ["n"] = "大厅|e,n,s,w",
        ["out"] = "韩王府大门|enter,s",
      },
    },

    ["西大街|e,n,s,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "大理寺|e,n,se,w",
        ["n"] = "市集|s",
        ["s"] = "荣宝斋|n",
        ["w"] = "钱塘门|e,nw,sw,w",
      },
    },

    ["钱塘门|e,nw,sw,w"] = {
      name = "钱塘门",
      exits = {
        ["e"] = "西大街|e,n,s,w",
      },
    },

    ["市集|s"] = {
      name = "市集", -- 去重：原“市集”
      exits = {
        ["s"] = "西大街|e,n,s,w",
      },
    },

    ["荣宝斋|n"] = {
      name = "荣宝斋",
      exits = {
        ["n"] = "西大街|e,n,s,w",
      },
    },

    ["西街|e,n,s,w"] = {
      name = "西街",
      exits = {
        ["e"] = "御街|e,n,s,w",
        ["n"] = "临安府|e,enter,s",
        ["s"] = "城隍庙|n",
        ["w"] = "清波门|e,nw,sw",
      },
    },

    ["酒家二楼|d,w"] = {
      name = "酒家二楼",
      exits = {
        ["d"] = "中和楼|ne,u,w",
        ["w"] = "回廊|e,enter",
      },
    },

    ["兴隆炮仗店|n,w"] = {
      name = "兴隆炮仗店",
      exits = {
        ["n"] = "清河坊|e,n,s",
        ["w"] = "炮仗店内室|e,w",
      },
    },

    -- 小径：3 个同名节点，编号去重
    ["小径|e,sw"] = {
      name = "小径",
      exits = {
        ["e"] = "炮仗店内室|e,w",
        ["sw"] = "小径|ne,s",
      },
    },

    ["小径|n,sw"] = {
      name = "小径2",
      exits = {
        ["n"] = "小径|ne,s",
        ["sw"] = "提督府后门|ne",
      },
    },

    ["小径|ne,s"] = {
      name = "小径3",
      exits = {
        ["ne"] = "小径|e,sw",
        ["s"] = "小径|n,sw",
      },
    },

    ["提督府后门|ne"] = {
      name = "提督府后门",
      exits = {
        ["ne"] = "小径|n,sw",
      },
    },

    ["清河坊|e,n,s"] = {
      name = "清河坊",
      exits = {
        ["e"] = "御街1|e,n,s,w",
        ["n"] = "盛昌行|s",
        ["s"] = "兴隆炮仗店|n,w",
      },
    },

    ["炮仗店内室|e,w"] = {
      name = "炮仗店内室",
      exits = {
        ["e"] = "兴隆炮仗店|n,w",
        ["w"] = "小径|e,sw",
      },
    },

    ["盛昌行|s"] = {
      name = "盛昌行",
      exits = {
        ["s"] = "清河坊|e,n,s",
      },
    },

    ["韩王府大门|enter,s"] = {
      name = "韩王府大门",
      exits = {
        ["enter"] = "花厅|n,out",
        ["s"] = "东大街1|e,n,s,w",
      },
    },

    ["余杭门|e,n,s,w"] = {
      name = "余杭门",
      exits = {
        ["n"] = "青石官道|n,s,w",
        ["s"] = "御街3|e,n,s,w",
      },
    },

    ["县衙|s"] = {
      name = "县衙",
      exits = {
        ["s"] = "钱塘县|n,se,sw",
      },
    },

    ["司天监|e"] = {
      name = "司天监",
      exits = {
        ["e"] = "青石官道|n,s,w",
      },
    },

    -- 注意：你原数据里 “官道|ne,nu,w” 重复定义了两次（Lua 前者会被后者覆盖）
    -- 我这里保留“后出现的那份”内容，并把前者改名为 官道2 以避免你将来合并时踩坑
    ["官道|ne,nu,w"] = {
      name = "官道",
      exits = {
        ["ne"] = "钱塘县|n,se,sw",
        ["w"]  = "余杭|e,wu",
      },
    },

    ["小酒馆|w"] = {
      name = "小酒馆",
      exits = {
        ["w"] = "青石官道|e,ne,nw,s",
      },
    },

    ["御街3|e,n,s,w"] = { -- around 余杭门
      name = "御街3",
      exits = {
        ["e"] = "常平仓|e,w",
        ["n"] = "余杭门|e,n,s,w",
        ["s"] = "御街2|e,n,s,w",
        ["w"] = "景灵宫|e",
      },
    },

    ["景灵宫|e"] = {
      name = "景灵宫",
      exits = {
        ["e"] = "御街3|e,n,s,w",
      },
    },

    ["御街2|e,n,s,w"] = {
      name = "御街2",
      exits = {
        ["e"] = "明庆寺|e,n,s,w",
        ["n"] = "御街3|e,n,s,w",
        ["s"] = "大理寺|e,n,se,w",
        ["w"] = "祚德庙|e",
      },
    },

    ["钱塘县|n,se,sw"] = {
      name = "钱塘县",
      exits = {
        ["n"] = "县衙|s",
        ["se"] = "青石官道|e,ne,nw,s",
        ["sw"] = "官道|ne,nu,w",
      },
    },

    -- 青石官道：2 个同名节点，编号去重
    ["青石官道|e,ne,nw,s"] = {
      name = "青石官道",
      exits = {
        ["e"] = "小酒馆|w",
        ["nw"] = "钱塘县|n,se,sw",
        ["s"] = "青石官道|n,s,w",
      },
    },

    ["青石官道|n,s,w"] = {
      name = "青石官道2",
      exits = {
        ["n"] = "青石官道|e,ne,nw,s",
        ["s"] = "余杭门|e,n,s,w",
        ["w"] = "司天监|e",
      },
    },

    ["余杭|e,wu"] = {
      name = "余杭",
      exits = {
        ["e"] = "官道|ne,nu,w",
        ["wu"] = "大门岭|ed,n,sw",
      },
    },

    ["大门岭|ed,n,sw"] = {
      name = "大门岭",
      exits = {
        ["ed"] = "余杭|e,wu",
        ["n"] = "汇锦潭|s",
        ["sw"] = "官道|ne,sw",
      },
    },

    ["官道|ne,sw"] = {
      name = "官道2", -- 去重：原“官道”
      exits = {
        ["ne"] = "大门岭|ed,n,sw",
      },
    },

    ["汇锦潭|s"] = {
      name = "汇锦潭",
      exits = {
        ["s"] = "大门岭|ed,n,sw",
      },
    },

    -- 北大街：2 个同名节点，编号去重
    ["临安府宠物店|s"] = {
      name = "临安府宠物店",
      exits = {
        ["s"] = "北大街1|e,n,s,w",
      },
    },

    ["仙林寺|e"] = {
      name = "仙林寺",
      exits = {
        ["e"] = "北大街|e,n,ne,s,w",
      },
    },

    ["刺青房|sw"] = {
      name = "刺青房",
      exits = {
        ["sw"] = "北大街|e,n,ne,s,w",
      },
    },

    ["北大街|e,n,ne,s,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "青龙会大门|enter,w",
        ["n"] = "北大街1|e,n,s,w",
        ["ne"] = "刺青房|sw",
        ["s"] = "北大街|e,n,s,w",
        ["w"] = "仙林寺|e",
      },
    },

    ["北大街1|e,n,s,w"] = {
      name = "北大街1",
      exits = {
        ["e"] = "药铺|enter,w",
        ["n"] = "临安府宠物店|s",
        ["s"] = "北大街|e,n,ne,s,w",
        ["w"] = "绸缎庄|e,w",
      },
    },

    ["药铺|enter,w"] = {
      name = "药铺",
      exits = {
        ["w"] = "北大街1|e,n,s,w",
      },
    },

    ["北大街|e,n,s,w"] = {
      name = "北大街2", -- 去重：原“北大街”
      exits = {
        ["e"] = "大染坊|w",
        ["n"] = "北大街|e,n,ne,s,w",
        ["s"] = "东大街2|e,n,s,w",
        ["w"] = "文思院|e",
      },
    },

    ["文思院|e"] = {
      name = "文思院",
      exits = {
        ["e"] = "北大街|e,n,s,w",
      },
    },

    ["大染坊|w"] = {
      name = "大染坊",
      exits = {
        ["w"] = "北大街|e,n,s,w",
      },
    },

    ["常平仓|e,w"] = {
      name = "常平仓",
      exits = {
        ["e"] = "绸缎庄|e,w",
        ["w"] = "御街3|e,n,s,w",
      },
    },

    ["绸缎庄|e,w"] = {
      name = "绸缎庄",
      exits = {
        ["e"] = "北大街1|e,n,s,w",
        ["w"] = "常平仓|e,w",
      },
    },

    ["客店|n"] = {
      name = "客店",
      exits = {
        ["n"] = "明庆寺|e,n,s,w",
      },
    },

    ["家具坊|w"] = {
      name = "家具坊",
      exits = {
        ["w"] = "明庆寺|e,n,s,w",
      },
    },

    ["明庆寺|e,n,s,w"] = {
      name = "明庆寺",
      exits = {
        ["e"] = "家具坊|w",
        ["n"] = "计氏马车分行|s",
        ["s"] = "客店|n",
        ["w"] = "御街2|e,n,s,w",
      },
    },

    ["计氏马车分行|s"] = {
      name = "计氏马车分行",
      exits = {
        ["s"] = "明庆寺|e,n,s,w",
      },
    },

    ["青龙会大厅|out"] = {
      name = "青龙会大厅",
      exits = {
        ["out"] = "青龙会大门|enter,w",
      },
    },

    ["青龙会大门|enter,w"] = {
      name = "青龙会大门",
      exits = {
        ["enter"] = "青龙会大厅|out",
        ["w"] = "北大街|e,n,ne,s,w",
      },
    },

  }, -- mapNodes 结束
}

-- 更新后的别名表（补齐 + 去重新增的编号名）
mapper.maps["hz"].mapAliases = {
  ["下瓦子"]       = "xwz",
  ["下瓦子2"]      = "xwz2",    -- 新增

  ["东大街"]       = "ddj",
  ["东大街1"]      = "ddj1",
  ["东大街2"]      = "ddj2",
  ["东大街3"]      = "ddj3",

  ["众安桥"]       = "zaq",
  ["岳王府"]       = "ywf",
  ["天月书肆"]     = "tyss",
  ["东青门"]       = "dqm",
  ["打铁铺"]       = "dtp",
  ["宠物竞技场"]   = "cwjjc",

  ["中和楼"]       = "zhl",
  ["酒家二楼"]     = "jjel",
  ["回廊"]         = "hl",

  ["临安府"]       = "laf",
  ["临安府大堂"]   = "lafdt",   -- 新增
  ["八字桥"]       = "bzq",

  ["大厅"]         = "hsz",  
  ["右厢房"]       = "yxf",
  ["左厢房"]       = "zxf",
  ["后宅"]         = "hzh",
  ["花厅"]         = "ht",

  ["城隍庙"]       = "chm",
  ["大理寺"]       = "origin",

  ["御街"]         = "yj",
  ["御街1"]        = "yj1",
  ["御街2"]        = "yj2",
  ["御街3"]        = "yj3",
  ["雄武营"]       = "xwy",
  ["都亭驿"]       = "dty",

  ["清河坊"]       = "qhf",
  ["兴隆炮仗店"]   = "xlpzd",
  ["炮仗店内室"]   = "pzdns",
  ["盛昌行"]       = "sch",
  ["提督府后门"]   = "tdfhm",
  ["小径"]         = "xj2",      -- 保持你原设定
  ["小径2"]        = "xj3",      -- 新增
  ["小径3"]        = "xj4",      -- 新增

  ["韩王府大门"]   = "hwfdm",
  ["祚德庙"]       = "zdm",

  ["丽正门"]       = "lzm",
  ["嘉会门"]       = "jhm",
  ["和宁门"]       = "hnm",
  ["凤凰山"]       = "fhs",
  ["凤凰山顶"]     = "fhsd",

  ["宫墙"]         = "gq",
  ["宫墙2"]        = "gq2",      -- 新增
  ["宫墙3"]        = "gq3",      -- 新增
  ["宫墙4"]        = "gq4",      -- 新增

  ["山路"]         = "sl",
  ["钱塘西渡口"]   = "qtxdk",    -- 新增

  ["清波门"]       = "qbm",
  ["湖畔"]         = "hp",
  ["院门"]         = "ym",

  ["杂货铺"]       = "zhp",
  ["点心铺"]       = "dxp",
  ["榷场"]         = "qc",
  ["江南钱庄"]     = "jnqz",
  ["江南金店"]     = "jnjd",

  ["西街"]         = "xj",
  ["西大街"]       = "xdj",
  ["市集"]         = "sj",
  ["钱塘门"]        = "qtm",      -- 新增
  ["荣宝斋"]       = "rbz",

  ["余杭门"]       = "yhm",
  ["县衙"]         = "xy",
  ["司天监"]       = "stj",
  ["小酒馆"]       = "xjg",
  ["钱塘县"]       = "qtx",

  ["青石官道"]     = "qsgd",
  ["青石官道2"]    = "qsgd2",    -- 新增

  ["官道"]         = "gd",
  ["官道2"]        = "gd2",      -- 新增
  ["余杭"]         = "yh",
  ["大门岭"]       = "dml",
  ["汇锦潭"]       = "hjt",

  ["临安府宠物店"] = "lafpwd",
  ["仙林寺"]       = "xls",
  ["刺青房"]       = "cqf",

  ["北大街"]       = "bdj",
  ["北大街1"]      = "bdj1",
  ["北大街2"]      = "bdj2",     -- 新增

  ["药铺"]         = "yp",
  ["绸缎庄"]       = "cdz",
  ["常平仓"]       = "cpc",
  ["文思院"]       = "wsy",
  ["大染坊"]       = "drf",
  ["景灵宫"]       = "jlg",

  ["客店"]         = "kd",
  ["家具坊"]       = "jjf",
  ["明庆寺"]       = "mqs",
  ["计氏马车分行"] = "mch",

  ["青龙会大厅"]   = "qlhdl",
  ["青龙会大门"]   = "qlhdm",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>天台 - tt</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["tt"]= {

  region = {
    key  = "tt",      -- 区域代号，用在 goto wx.xxx 里
    name = "天台",    -- 纯注释/显示用
  },
  mapNodes = {
    ["一行碑|ne"] = {
      name = "一行碑",
      exits = {
        ["ne"] = "石桥|n,s,sw",
      },
    },
    ["上房|out"] = {
      name = "上房",
      exits = {
        ["out"] = "倾盖客栈|enter,s",
      },
    },
    ["东大街|e,n,s,w"] = {
      name = "东大街",
      exits = {
        ["e"] = "应台门|e,w",
        ["n"] = "城隍庙|s",
        ["s"] = "南大街|e,n,s,w",
        ["w"] = "市口|e,n,w",
      },
    },
    ["倾盖客栈|enter,s"] = {
      name = "倾盖客栈",
      exits = {
        ["enter"] = "上房|out",
        ["s"] = "西大街|e,n,w",
      },
    },
    ["利市堂|w"] = {
      name = "利市堂",
      exits = {
        ["w"] = "南大街|e,n,s,w",
      },
    },
    ["北大街|e,n,s"] = {
      name = "北大街",
      exits = {
        ["e"] = "属衙|n,w",
        ["n"] = "金庭门|nu,s",
        ["s"] = "市口|e,n,w",
      },
    },
    ["南大街|e,n,s,w"] = {
      name = "南大街",
      exits = {
        ["e"] = "利市堂|w",
        ["n"] = "东大街|e,n,s,w",
        ["s"] = "环碧门|n,se",
        ["w"] = "文昌阁|e",
      },
    },
    ["城外小路|nw,sw"] = {
      name = "城外小路",
      exits = {
        ["nw"] = "环碧门|n,se",
        ["sw"] = "始丰溪北岸|ne",
      },
    },
    ["城隍庙|s"] = {
      name = "城隍庙",
      exits = {
        ["s"] = "东大街|e,n,s,w",
      },
    },
    ["大雄宝殿|nd,s"] = {
      name = "大雄宝殿",
      exits = {
        ["nd"] = "药师殿|n,su",
        ["s"] = "石板路|e,enter,n,w",
      },
    },
    ["始丰溪北岸|ne"] = {
      name = "始丰溪北岸",
      exits = {
        ["ne"] = "城外小路|nw,sw",
      },
    },
    ["官道|e,nw"] = {
      name = "官道",
      exits = {
        ["nw"] = "密林|neu,se,w",
      },
    },
    ["密林|neu,se,w"] = {
      name = "密林",
      exits = {
        ["neu"] = "毋取庵|swd",
        ["se"] = "官道|e,nw",
        ["w"] = "应台门|e,w",
      },
    },
    ["寺内|out"] = {
      name = "寺内",
      exits = {
        ["out"] = "止观寺|e,enter",
      },
    },
    ["属衙|n,w"] = {
      name = "属衙",
      exits = {
        ["n"] = "大堂|s",
        ["w"] = "北大街|e,n,s",
      },
    },

    ["大堂|s"] = {
      name = "大堂",
      exits = {
        ["s"] = "属衙|n,w",
      },
    },

    -- 山路（同名不同 key：统一编号；不改 key / 不改 exits 里的 key 引用）
    ["山路|e,sw"] = {
      name = "山路",
      exits = {
        ["e"] = "山路|e,sw,w",
        ["sw"] = "赦书岭|nd,ne,sw,wd",
      },
    },
    ["山路|e,sw,w"] = {
      name = "山路1",
      exits = {
        ["e"] = "石梁镇|ne,se,w",
        ["sw"] = "山路|ne,sw",
        ["w"] = "山路|e,sw",
      },
    },
    ["山路|eu,ne,sd"] = {
      name = "山路2",
      exits = {
        ["eu"] = "石梁飞瀑|wd",
        ["ne"] = "拜经台|sw",
        ["sd"] = "赭溪岸边|nu,nw,sw",
      },
    },
    ["山路|n,ne,sd,w"] = {
      name = "山路3",
      exits = {
        ["n"] = "石桥|n,s,sw",
        ["ne"] = "赭溪岸边|nu,sw",
        ["sd"] = "山路|nu,wd",
        ["w"] = "林间路|e,nw",
      },
    },
    ["山路|ne,sd"] = {
      name = "山路4",
      exits = {
        ["ne"] = "山路|nw,sw",
        ["sd"] = "赭溪岸边|nu,sw",
      },
    },
    ["山路|ne,sw"] = {
      name = "山路5",
      exits = {
        ["ne"] = "山路|e,sw,w",
        ["sw"] = "柏桐岭头|ne,sd,w",
      },
    },
    ["山路|ne,wd"] = {
      name = "山路6",
      exits = {
        ["ne"] = "嵊县|eu,sw",
        ["wd"] = "香榧古道|eu,w",
      },
    },
    ["山路|nu,sd"] = {
      name = "山路7",
      exits = {
        ["nu"] = "柏桐岭头|ne,sd,w",
        ["sd"] = "山路|nu,se",
      },
    },
    ["山路|nu,se"] = {
      name = "山路8",
      exits = {
        ["nu"] = "山路|nu,sd",
        ["se"] = "林间路|e,nw",
      },
    },
    ["山路|nu,wd"] = {
      name = "山路9",
      exits = {
        ["nu"] = "山路|n,ne,sd,w",
        ["wd"] = "赤城山|eu,sd,sw",
      },
    },
    ["山路|nw,sw"] = {
      name = "山路10",
      exits = {
        ["nw"] = "石梁镇|ne,se,w",
        ["sw"] = "山路|ne,sd",
      },
    },

    ["嵊县|eu,sw"] = {
      name = "嵊县",
      exits = {
        ["eu"] = "赦书岭|nd,ne,sw,wd",
        ["sw"] = "山路|ne,wd",
      },
    },
    ["市口|e,n,w"] = {
      name = "市口",
      exits = {
        ["e"] = "东大街|e,n,s,w",
        ["n"] = "北大街|e,n,s",
        ["w"] = "西大街|e,n,w",
      },
    },
    ["应台门|e,w"] = {
      name = "应台门",
      exits = {
        ["e"] = "密林|neu,se,w",
        ["w"] = "东大街|e,n,s,w",
      },
    },
    ["弥勒殿|out,s"] = {
      name = "弥勒殿",
      exits = {
        ["out"] = "石板路|e,enter,n,w",
        ["s"] = "石桥|n,s,sw",
      },
    },
    ["拜经台|sw"] = {
      name = "拜经台",
      exits = {
        ["sw"] = "山路|eu,ne,sd",
      },
    },
    ["文昌阁|e"] = {
      name = "文昌阁",
      exits = {
        ["e"] = "南大街|e,n,s,w",
      },
    },
    ["曹娥江岸|ne,su"] = {
      name = "曹娥江岸",
      exits = {
        ["su"] = "赦书岭|nd,ne,sw,wd",
      },
    },
    ["林间路|e,nw"] = {
      name = "林间路",
      exits = {
        ["e"] = "山路|n,ne,sd,w",
        ["nw"] = "山路|nu,se",
      },
    },
    ["柏桐岭头|ne,sd,w"] = {
      name = "柏桐岭头",
      exits = {
        ["ne"] = "山路|ne,sw",
        ["sd"] = "山路|nu,sd",
        ["w"] = "止观寺|e,enter",
      },
    },
    ["止观寺|e,enter"] = {
      name = "止观寺",
      exits = {
        ["e"] = "柏桐岭头|ne,sd,w",
        ["enter"] = "寺内|out",
      },
    },
    ["毋取庵|swd"] = {
      name = "毋取庵",
      exits = {
        ["swd"] = "密林|neu,se,w",
      },
    },
    ["永清门|e,nw"] = {
      name = "永清门",
      exits = {
        ["e"] = "西大街|e,n,w",
        ["nw"] = "白鹤镇|nu,se",
      },
    },
    ["环碧门|n,se"] = {
      name = "环碧门",
      exits = {
        ["n"] = "南大街|e,n,s,w",
        ["se"] = "城外小路|nw,sw",
      },
    },
    ["白鹤镇|nu,se"] = {
      name = "白鹤镇",
      exits = {
        ["nu"] = "赦书岭古道|ne,sd",
        ["se"] = "永清门|e,nw",
      },
    },
    ["石板路|e,enter,n,w"] = {
      name = "石板路",
      exits = {
        ["e"] = "钟楼|w",
        ["enter"] = "弥勒殿|out,s",
        ["n"] = "大雄宝殿|nd,s",
        ["w"] = "鼓楼|e",
      },
    },
    ["石桥|n,s,sw"] = {
      name = "石桥",
      exits = {
        ["n"] = "弥勒殿|out,s",
        ["s"] = "山路|n,ne,sd,w",
        ["sw"] = "一行碑|ne",
      },
    },
    ["石梁镇|ne,se,w"] = {
      name = "石梁镇",
      exits = {
        ["ne"] = "赭溪岸边|nu,nw,sw",
        ["se"] = "山路|nw,sw",
        ["w"] = "山路|e,sw,w",
      },
    },
    ["石梁飞瀑|wd"] = {
      name = "石梁飞瀑",
      exits = {
        ["wd"] = "山路|eu,ne,sd",
      },
    },
    ["药师殿|n,su"] = {
      name = "药师殿",
      exits = {
        ["n"] = "观音殿|s",
        ["su"] = "大雄宝殿|nd,s",
      },
    },
    ["西大街|e,n,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "市口|e,n,w",
        ["n"] = "倾盖客栈|enter,s",
        ["w"] = "永清门|e,nw",
      },
    },
    ["观音殿|s"] = {
      name = "观音殿",
      exits = {
        ["s"] = "药师殿|n,su",
      },
    },
    ["赤城山|eu,sd,sw"] = {
      name = "赤城山",
      exits = {
        ["eu"] = "山路|nu,wd",
        ["sd"] = "金庭门|nu,s",
      },
    },
    ["赦书岭|nd,ne,sw,wd"] = {
      name = "赦书岭",
      exits = {
        ["nd"] = "曹娥江岸|ne,su",
        ["ne"] = "山路|e,sw",
        ["sw"] = "赦书岭古道|ne,sd",
        ["wd"] = "嵊县|eu,sw",
      },
    },
    ["赦书岭古道|ne,sd"] = {
      name = "赦书岭古道",
      exits = {
        ["ne"] = "赦书岭|nd,ne,sw,wd",
        ["sd"] = "白鹤镇|nu,se",
      },
    },

    -- 赭溪岸边（同名不同 key：编号）
    ["赭溪岸边|nu,nw,sw"] = {
      name = "赭溪岸边",
      exits = {
        ["nu"] = "山路|eu,ne,sd",
        ["nw"] = "香炉峰|se",
        ["sw"] = "石梁镇|ne,se,w",
      },
    },
    ["赭溪岸边|nu,sw"] = {
      name = "赭溪岸边1",
      exits = {
        ["nu"] = "山路|ne,sd",
        ["sw"] = "山路|n,ne,sd,w",
      },
    },

    ["金庭门|nu,s"] = {
      name = "金庭门",
      exits = {
        ["nu"] = "赤城山|eu,sd,sw",
        ["s"] = "北大街|e,n,s",
      },
    },
    ["钟楼|w"] = {
      name = "钟楼",
      exits = {
        ["w"] = "石板路|e,enter,n,w",
      },
    },
    ["香榧古道|eu,w"] = {
      name = "香榧古道",
      exits = {
        ["eu"] = "山路|ne,wd",
      },
    },
    ["香炉峰|se"] = {
      name = "香炉峰",
      exits = {
        ["se"] = "赭溪岸边|nu,nw,sw",
      },
    },
    ["鼓楼|e"] = {
      name = "鼓楼",
      exits = {
        ["e"] = "石板路|e,enter,n,w",
      },
    },
  }
}

-- 重新编号后的 mapAliases（同名不同 key 的房间全部补齐编号）
mapper.maps["tt"].mapAliases = {

  ["一行碑"]       = "yhb",
  ["上房"]         = "sf",
  ["东大街"]       = "ddj",
  ["倾盖客栈"]     = "qgkz",
  ["利市堂"]       = "lst",
  ["北大街"]       = "bdj",
  ["南大街"]       = "ndj",
  ["城外小路"]     = "cwxl",
  ["城隍庙"]       = "chm",
  ["大雄宝殿"]     = "dxbd",
  ["始丰溪北岸"]   = "sfxba",

  ["官道"]         = "gd",
  ["密林"]         = "ml",

  ["寺内"]         = "sn",
  ["属衙"]         = "sy",
  ["大堂"]         = "dt",

  -- 山路：全部编号
  ["山路"]         = "sl",
  ["山路1"]        = "sl1",
  ["山路2"]        = "sl2",
  ["山路3"]        = "sl3",
  ["山路4"]        = "sl4",
  ["山路5"]        = "sl5",
  ["山路6"]        = "sl6",
  ["山路7"]        = "sl7",
  ["山路8"]        = "sl8",
  ["山路9"]        = "sl9",
  ["山路10"]       = "sl10",

  ["嵊县"]         = "sx",
  ["市口"]         = "origin",
  ["应台门"]       = "ytm",
  ["弥勒殿"]       = "mld",
  ["拜经台"]       = "bjt",
  ["文昌阁"]       = "wcg",
  ["曹娥江岸"]     = "ceja",

  ["林间路"]       = "ljl",
  ["柏桐岭头"]     = "btl",
  ["止观寺"]       = "zgs",
  ["毋取庵"]       = "wqa",

  ["永清门"]       = "yqm",
  ["环碧门"]       = "hbm",
  ["白鹤镇"]       = "bhz",

  ["石板路"]       = "sbl",
  ["石桥"]         = "sq",
  ["石梁镇"]       = "slz",
  ["石梁飞瀑"]     = "slfp",

  ["药师殿"]       = "ysd",
  ["西大街"]       = "xdj",
  ["观音殿"]       = "gyd",

  ["赤城山"]       = "ccs",
  ["赦书岭"]       = "ssl",
  ["赦书岭古道"]   = "sslgd",

  -- 赭溪岸边：编号
  ["赭溪岸边"]     = "zxab",
  ["赭溪岸边1"]    = "zxab1",

  ["金庭门"]       = "jtm",
  ["钟楼"]         = "zl",
  ["香榧古道"]     = "xfgd",
  ["香炉峰"]       = "xlf",
  ["鼓楼"]         = "gl",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>雁荡山 - yds</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["yds"]= {

  region = {
    key  = "yds",      -- 区域代号，用在 goto wx.xxx 里
    name = "雁荡山",    -- 纯注释/显示用
  },

  mapNodes = {

    ["七星洞|out"] = {
      name = "七星洞",
      exits = {
        ["out"] = "山路|enter,ne,sw",
      },
    },

    ["上灵岩|ne,nw,se,sw"] = {
      name = "上灵岩",
      exits = {
        ["ne"] = "安禅谷|ne,se,sw,wu",
        ["nw"] = "山路|se,yelu",
        ["se"] = "山间道|nw,se",
        ["sw"] = "罗汉寺|ne,se,su",
      },
    },

    ["东石梁洞|e"] = {
      name = "东石梁洞",
      exits = {
        ["e"] = "石梁寺|ne,sw,w",
      },
    },

    ["仙岩洞|out"] = {
      name = "仙岩洞",
      exits = {
        ["out"] = "仙岩洞口|enter,se",
      },
    },

    ["仙岩洞口|enter,se"] = {
      name = "仙岩洞口",
      exits = {
        ["enter"] = "仙岩洞|out",
        ["se"] = "松坡溪岸|ne,nw,s",
      },
    },

    ["仙杖峰|n,sd"] = {
      name = "仙杖峰",
      exits = {
        ["n"] = "会仙峰山腰|e,nu,s",
        ["sd"] = "松坡溪岸|ne,nu,s,sw",
      },
    },

    ["仙游洞|w"] = {
      name = "仙游洞",
      exits = {
        ["w"] = "会仙峰山腰|e,nu,s",
      },
    },

    ["会仙峰|sd"] = {
      name = "会仙峰",
      exits = {
        ["sd"] = "会仙峰山腰|e,nu,s",
      },
    },

    ["会仙峰山腰|e,nu,s"] = {
      name = "会仙峰山腰",
      exits = {
        ["e"] = "仙游洞|w",
        ["nu"] = "会仙峰|sd",
        ["s"] = "仙杖峰|n,sd",
      },
    },

    ["十井坑|wu"] = {
      name = "十井坑",
      exits = {
        ["wu"] = "山路|ed,nu,sw",
      },
    },

    ["南阁|n,se,sw"] = {
      name = "南阁",
      exits = {
        ["n"] = "雁荡北坡|n,s",
        ["se"] = "山路|e,nw",
        ["sw"] = "松坡溪岸|ne,nu,s,sw",
      },
    },

    ["含珠峰|enter,nd,sd"] = {
      name = "含珠峰",
      exits = {
        ["enter"] = "西石梁洞|out",
        ["nd"] = "山路|ne,nw,su,w",
        ["sd"] = "山路|nu,sw",
      },
    },

    ["天柱峰|ed,enter"] = {
      name = "天柱峰",
      exits = {
        ["ed"] = "安禅谷|ne,se,sw,wu",
        ["enter"] = "莲花洞|out",
      },
    },

    ["安禅谷|ne,se,sw,wu"] = {
      name = "安禅谷",
      exits = {
        ["ne"] = "山路|ne,nw,sw",
        ["se"] = "石屏风|nw,u",
        ["sw"] = "上灵岩|ne,nw,se,sw",
        ["wu"] = "天柱峰|ed,enter",
      },
    },

    -- 山路（同名多 key：统一编号；不改 key）
    ["山路|e,nw"] = {
      name = "山路",
      exits = {
        ["e"] = "真济寺门|enter,eu,w",
        ["nw"] = "南阁|n,se,sw",
      },
    },

    ["山路|ed,nu,sw"] = {
      name = "山路1",
      exits = {
        ["ed"] = "十井坑|wu",
        ["nu"] = "碧霄峰|eu,ne,sd,wd",
        ["sw"] = "山路|ne,nw,sw",
      },
    },

    ["山路|enter,ne,sw"] = {
      name = "山路2",
      exits = {
        ["enter"] = "七星洞|out",
        ["ne"] = "石门潭|sw",
        ["sw"] = "石梁寺|ne,sw,w",
      },
    },

    ["山路|eu,ne,sw"] = {
      name = "山路3",
      exits = {
        ["eu"] = "背风口|ne,wd",
        ["ne"] = "山路|nu,sw",
        ["sw"] = "山路|ne,nw",
      },
    },

    ["山路|ne,nw"] = {
      name = "山路4",
      exits = {
        ["ne"] = "山路|eu,ne,sw",
        ["nw"] = "芙蓉湖|se,ed",
      },
    },

    ["芙蓉湖|se,ed"]  = {
      name = "芙蓉湖",
      exits = {
        ["se"] = "山路|ne,nw",
        ["ed"] = "梯云谷|wd",
      },
    },

    ["梯云谷|wd"]  = {
      name = "梯云谷",
      exits = {
        ["wd"] = "芙蓉湖|se,ed",
      },
    },

    ["山路|ne,nw,su,w"] = {
      name = "山路5",
      exits = {
        ["ne"] = "山路|nw,sw,yelu",
        ["nw"] = "山间道|se,wd",
        ["su"] = "含珠峰|enter,nd,sd",
      },
    },

    ["山路|ne,nw,sw"] = {
      name = "山路6",
      exits = {
        ["ne"] = "山路|ed,nu,sw",
        ["sw"] = "安禅谷|ne,se,sw,wu",
      },
    },

    ["山路|nu,sw"] = {
      name = "山路7",
      exits = {
        ["nu"] = "含珠峰|enter,nd,sd",
        ["sw"] = "山路|eu,ne,sw",
      },
    },

    ["山路|nw,sw,yelu"] = {
      name = "山路8",
      exits = {
        ["nw"] = "湖南潭|n,se",
        ["sw"] = "山路|ne,nw,su,w",
      },
    },

    ["山路|se,yelu"] = {
      name = "山路9",
      exits = {
        ["se"] = "上灵岩|ne,nw,se,sw",
        ["yelu"] = "山间野路|hou,out,qian,you,zuo",
      },
    },

    -- 山间道（同名多 key：编号）
    ["山间道|nw,se"] = {
      name = "山间道",
      exits = {
        ["nw"] = "上灵岩|ne,nw,se,sw",
      },
    },

    ["山间道|se,wd"] = {
      name = "山间道1",
      exits = {
        ["se"] = "山路|ne,nw,su,w",
      },
    },

    ["山间野路|hou,out,qian,you,zuo"] = {
      name = "山间野路",
      exits = {
        ["hou"] = "山间野路|hou,out,qian,you,zuo",
        ["out"] = "山路|se,yelu",
      },
    },

    ["显胜门|eu,n"] = {
      name = "显胜门",
      exits = {
        ["eu"] = "石佛洞|wd",
        ["n"] = "松坡溪岸|ne,nu,s,sw",
      },
    },

    ["朝阳峰|wd"] = {
      name = "朝阳峰",
      exits = {
        ["wd"] = "碧霄峰|eu,ne,sd,wd",
      },
    },

    -- 松坡溪岸（同名多 key：编号）
    ["松坡溪岸|ne,nu,s,sw"] = {
      name = "松坡溪岸",
      exits = {
        ["ne"] = "南阁|n,se,sw",
        ["nu"] = "仙杖峰|n,sd",
        ["s"] = "显胜门|eu,n",
        ["sw"] = "松坡溪岸|ne,nw,s",
      },
    },

    ["松坡溪岸|ne,nw,s"] = {
      name = "松坡溪岸1",
      exits = {
        ["ne"] = "松坡溪岸|ne,nu,s,sw",
        ["nw"] = "仙岩洞口|enter,se",
        ["s"] = "湖南潭|n,se",
      },
    },

    ["湖南潭|n,se"] = {
      name = "湖南潭",
      exits = {
        ["n"] = "松坡溪岸|ne,nw,s",
        ["se"] = "山路|nw,sw,yelu",
      },
    },

    ["真济寺门|enter,eu,w"] = {
      name = "真济寺门",
      exits = {
        ["eu"] = "碧霄峰|eu,ne,sd,wd",
        ["w"] = "山路|e,nw",
      },
    },

    ["石佛洞|wd"] = {
      name = "石佛洞",
      exits = {
        ["wd"] = "显胜门|eu,n",
      },
    },

    ["石屏风|nw,u"] = {
      name = "石屏风",
      exits = {
        ["nw"] = "安禅谷|ne,se,sw,wu",
        ["u"] = "蟾蜍石|d",
      },
    },

    ["石梁寺|ne,sw,w"] = {
      name = "石梁寺",
      exits = {
        ["ne"] = "山路|enter,ne,sw",
        ["sw"] = "碧霄峰|eu,ne,sd,wd",
        ["w"] = "东石梁洞|e",
      },
    },

    ["石门潭|sw"] = {
      name = "石门潭",
      exits = {
        ["sw"] = "山路|enter,ne,sw",
      },
    },

    ["碧霄峰|eu,ne,sd,wd"] = {
      name = "碧霄峰",
      exits = {
        ["eu"] = "朝阳峰|wd",
        ["ne"] = "石梁寺|ne,sw,w",
        ["sd"] = "山路|ed,nu,sw",
        ["wd"] = "真济寺门|enter,eu,w",
      },
    },

    ["罗汉寺|ne,se,su"] = {
      name = "罗汉寺",
      exits = {
        ["ne"] = "上灵岩|ne,nw,se,sw",
        ["su"] = "芙蓉峰|nd,nw,wu",
      },
    },

    ["背风口|ne,wd"] = {
      name = "背风口",
      exits = {
        ["ne"] = "雁湖|ed,sw",
        ["wd"] = "山路|eu,ne,sw",
      },
    },

    ["芙蓉峰|nd,nw,wu"] = {
      name = "芙蓉峰",
      exits = {
        ["nd"] = "罗汉寺|ne,se,su",
        ["wu"] = "雁湖|ed,sw",
        ["nw"] = "一帆峰|n,se",
      },
    },

    ["一帆峰|n,se"] = {
      name = "一帆峰",
      exits = {
        ["n"] = "大龙湫|s",
        ["se"] = "芙蓉峰|nd,nw,wu",
      },
    },

    ["大龙湫|s"] = {
      name = "大龙湫",
      exits = {
        ["s"] = "一帆峰|n,se",
      },
    },

    ["莲花洞|out"] = {
      name = "莲花洞",
      exits = {
        ["out"] = "天柱峰|ed,enter",
      },
    },

    ["蟾蜍石|d"] = {
      name = "蟾蜍石",
      exits = {
        ["d"] = "石屏风|nw,u",
      },
    },

    ["西石梁洞|out"] = {
      name = "西石梁洞",
      exits = {
        ["out"] = "含珠峰|enter,nd,sd",
      },
    },

    ["雁湖|ed,sw"] = {
      name = "雁湖",
      exits = {
        ["ed"] = "芙蓉峰|nd,nw,wu",
        ["sw"] = "背风口|ne,wd",
      },
    },

    ["雁荡北坡|n,s"] = {
      name = "雁荡北坡",
      exits = {
        ["s"] = "南阁|n,se,sw",
      },
    },

  }, -- mapNodes end
}

-- 按“同名不同key就编号”的规则，补齐 mapAliases
mapper.maps["yds"].mapAliases = {
  ["七星洞"]       = "qxd",
  ["上灵岩"]       = "sly",
  ["东石梁洞"]     = "dsld",
  ["仙岩洞"]       = "xyd",
  ["仙岩洞口"]     = "xydk",
  ["仙杖峰"]       = "xzf",
  ["仙游洞"]       = "xyd2",

  ["会仙峰"]       = "hxf",
  ["会仙峰山腰"]   = "hxfsy",

  ["十井坑"]       = "sjk",
  ["南阁"]         = "ng",
  ["含珠峰"]       = "hzf",
  ["天柱峰"]       = "tzf",
  ["安禅谷"]       = "acg",

  -- 山路：全部编号
  ["山路"]         = "sl",
  ["山路1"]        = "sl1",
  ["山路2"]        = "sl2",
  ["山路3"]        = "sl3",
  ["山路4"]        = "sl4",
  ["山路5"]        = "sl5",
  ["山路6"]        = "sl6",
  ["山路7"]        = "sl7",
  ["山路8"]        = "sl8",
  ["山路9"]        = "sl9",

  -- 山间道：全部编号
  ["山间道"]       = "sjd",
  ["山间道1"]      = "sjd1",

  ["山间野路"]     = "sjyl",

  ["显胜门"]       = "xsm",
  ["朝阳峰"]       = "cyf",

  -- 松坡溪岸：全部编号
  ["松坡溪岸"]     = "spxa",
  ["松坡溪岸1"]    = "spxa1",

  ["湖南潭"]       = "hnt",

  ["真济寺门"]     = "zjsm",
  ["石佛洞"]       = "sfd",
  ["石屏风"]       = "spf",
  ["石梁寺"]       = "sls",
  ["石门潭"]       = "smt",

  ["碧霄峰"]       = "origin",
  ["罗汉寺"]       = "lhs",
  ["背风口"]       = "bfk",

  ["芙蓉峰"]       = "frf",
  ["芙蓉湖"]       = "frh",
  ["梯云谷"]       = "tyg",

  ["一帆峰"]       = "yff",
  ["大龙湫"]       = "dlq",

  ["莲花洞"]       = "lhd",
  ["蟾蜍石"]       = "ccs",
  ["西石梁洞"]     = "xsld",

  ["雁湖"]         = "yh",
  ["雁荡北坡"]     = "ydbp",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>台州府 - tzf</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["tzf"]= {

  region = {
    key  = "tzf",      -- 区域代号，用在 goto wx.xxx 里
    name = "台州府",     -- 纯注释/显示用
  },
  mapNodes = {

  -- ========= 野外部分 =========
  ["六坪山|e,nd,s"] = {
    name = "六坪山",
    exits = {
      ["e"] = "秃岭|n,se,w",
      ["nd"] = "青龙岗|ne,nwd,su",
      ["s"] = "雁荡北坡|n,s",
    },
  },
  ["南坡|neu,s"] = {
    name = "南坡",
    exits = {
      ["neu"] = "枯松台|swd,wd",
      ["s"] = "秃岭|n,se,w",
    },
  },
  ["双门硐|ne"] = {
    name = "双门硐",
    exits = {
      ["ne"] = "小村|ne,s,sw",
    },
  },
  ["城外土路|nd,s,se,sw,w"] = {
    name = "城外土路",
    exits = {
      ["s"] = "定光净寺|n,s,wu",
    },
  },
  ["大峡谷|neu,seu"] = {
    name = "大峡谷",
    exits = {
      ["neu"] = "山间道|n,swd",
      ["seu"] = "青龙岗|ne,nwd,su",
    },
  },
  ["大帐|out"] = {
    name = "大帐",
    exits = {
      ["out"] = "营地|enter,s",
    },
  },
  ["安然山|ed,nw,w"] = {
    name = "安然山",
    exits = {
      ["ed"] = "羊头山|ne,wu",
      ["nw"] = "山路|n,nw,se",
      ["w"] = "山路|e,sw",
    },
  },
  ["定光净寺|n,s,wu"] = {
    name = "定光净寺",
    exits = {
      ["n"] = "城外土路|nd,s,se,sw,w",
      ["s"] = "山间道|n,s",
      ["wu"] = "挂鹰岩|ed",
    },
  },
  ["小村|ne,s,sw"] = {
    name = "小村",
    exits = {
      ["ne"] = "山路|e,sw",
      ["s"] = "观夕洞|n",
      ["sw"] = "双门硐|ne",
    },
  },

  -- 同名“山路”有 2 个：编号
  ["山路|e,sw"] = {
    name = "山路",
    exits = {
      ["e"] = "安然山|ed,nw,w",
      ["sw"] = "小村|ne,s,sw",
    },
  },
  ["山路|n,nw,se"] = {
    name = "山路1",
    exits = {
      ["n"] = "营地|enter,s",
      ["nw"] = "秃岭|n,se,w",
      ["se"] = "安然山|ed,nw,w",
    },
  },

  -- 同名“山间道”有 2 个：编号
  ["山间道|n,s"] = {
    name = "山间道",
    exits = {
      ["n"] = "定光净寺|n,s,wu",
      ["s"] = "山间道|n,swd",
    },
  },
  ["山间道|n,swd"] = {
    name = "山间道1",
    exits = {
      ["n"] = "山间道|n,s",
      ["swd"] = "大峡谷|neu,seu",
    },
  },

  ["废猎棚|s"] = {
    name = "废猎棚",
    exits = {
      ["s"] = "落石沟|eu,n,sw",
    },
  },
  ["挂鹰岩|ed"] = {
    name = "挂鹰岩",
    exits = {
      ["ed"] = "定光净寺|n,s,wu",
    },
  },
  ["枯松台|swd,wd"] = {
    name = "枯松台",
    exits = {
      ["swd"] = "南坡|neu,s",
      ["wd"] = "落石沟|eu,n,sw",
    },
  },
  ["灵江南岸|sw"] = {
    name = "灵江南岸",
    exits = {
      ["sw"] = "羊头山|ne,wu",
      ["ride"] = "灵江北岸|n",
    },
  },
  ["秃岭|n,se,w"] = {
    name = "秃岭",
    exits = {
      ["n"] = "南坡|neu,s",
      ["se"] = "山路|n,nw,se",
      ["w"] = "六坪山|e,nd,s",
    },
  },
  ["羊头山|ne,wu"] = {
    name = "羊头山",
    exits = {
      ["ne"] = "灵江南岸|sw",
      ["wu"] = "安然山|ed,nw,w",
    },
  },
  ["营地|enter,s"] = {
    name = "营地",
    exits = {
      ["enter"] = "大帐|out",
      ["s"] = "山路|n,nw,se",
    },
  },
  ["落石沟|eu,n,sw"] = {
    name = "落石沟",
    exits = {
      ["eu"] = "枯松台|swd,wd",
      ["n"] = "废猎棚|s",
      ["sw"] = "青龙岗|ne,nwd,su",
    },
  },
  ["观夕洞|n"] = {
    name = "观夕洞",
    exits = {
      ["n"] = "小村|ne,s,sw",
    },
  },
  ["雁荡北坡|n,s"] = {
    name = "雁荡北坡",
    exits = {
      ["n"] = "六坪山|e,nd,s",
    },
  },
  ["青龙岗|ne,nwd,su"] = {
    name = "青龙岗",
    exits = {
      ["ne"] = "落石沟|eu,n,sw",
      ["nwd"] = "大峡谷|neu,seu",
      ["su"] = "六坪山|e,nd,s",
    },
  },

  -- ========= 城内部分 =========
  ["东大街|e,n,s,w"] = {
    name = "东大街",
    exits = {
      ["e"] = "东大街1|e,n,s,w",
      ["n"] = "宝泉记|s",
      ["s"] = "当铺|n",
      ["w"] = "鸣珂街|e,n,s,w",
    },
  },
  ["当铺|n"] = {
    name = "当铺",
    exits = {
      ["n"] = "东大街|e,n,s,w",
    },
  },
  ["宝泉记|s"] = {
    name = "宝泉记",
    exits = {
      ["s"] = "东大街|e,n,s,w",
    },
  },
  ["东大街1|e,n,s,w"] = {
    name = "东大街1",
    exits = {
      ["e"] = "崇和门|se,u,w",
      ["n"] = "状元坊|e,s",
      ["s"] = "山前街|e,n,su",
      ["w"] = "东大街|e,n,s,w",
    },
  },
  ["东湖|nw,s"] = {
    name = "东湖",
    exits = {
      ["nw"] = "崇和门|se,u,w",
      ["s"] = "放生池|n",
    },
  },
  ["崇和门|se,u,w"] = {
    name = "崇和门",
    exits = {
      ["se"] = "东湖|nw,s",
      ["u"] = "惠风楼|d",
      ["w"] = "东大街1|e,n,s,w",
    },
  },
  ["惠风楼|d"] = {
    name = "惠风楼",
    exits = {
      ["d"] = "崇和门|se,u,w",
    },
  },
  ["放生池|n"] = {
    name = "放生池",
    exits = {
      ["n"] = "东湖|nw,s",
    },
  },
  ["东峰|nd,w"] = {
    name = "东峰",
    exits = {
      ["nd"] = "山前街|e,n,su",
      ["w"] = "巾子山|e,u,wd",
    },
  },
  ["兴善门|n,s,se,u"] = {
    name = "兴善门",
    exits = {
      ["n"] = "宝华坊|eu,n,s,w",
      ["s"] = "灵江北岸|n",
      ["se"] = "龙王庙|nw",
      ["u"] = "超然楼|d",
    },
  },
  ["千佛塔|d,enter"] = {
    name = "千佛塔",
    exits = {
      ["d"] = "巾子山|e,u,wd",
    },
  },
  ["宝华坊|eu,n,s,w"] = {
    name = "宝华坊",
    exits = {
      ["eu"] = "巾子山|e,u,wd",
      ["n"] = "施水坊|n,s,w",
      ["s"] = "兴善门|n,s,se,u",
      ["w"] = "酒馆|e,n,w",
    },
  },
  ["客店|e,enter,s,w"] = {
    name = "客店",
    exits = {
      ["e"] = "施水坊|n,s,w",
      ["enter"] = "客房|out",
      ["s"] = "酒馆|e,n,w",
      ["w"] = "松林居|e,s,w",
    },
  },
  ["客房|out"] = {
    name = "客房",
    exits = {
      ["out"] = "客店|e,enter,s,w",
    },
  },
  ["山前街|e,n,su"] = {
    name = "山前街",
    exits = {
      ["e"] = "杏林堂|w",
      ["n"] = "东大街1|e,n,s,w",
      ["su"] = "东峰|nd,w",
    },
  },
  ["巾子山|e,u,wd"] = {
    name = "巾子山",
    exits = {
      ["e"] = "东峰|nd,w",
      ["u"] = "千佛塔|d,enter",
      ["wd"] = "宝华坊|eu,n,s,w",
    },
  },
  ["府衙大门|s,w"] = {
    name = "府衙大门",
    exits = {
      ["s"] = "鼓楼|n,out",
      ["w"] = "府衙大堂|e",
    },
  },
  ["府衙大堂|e"] = {
    name = "府衙大堂",
    exits = {
      ["e"] = "府衙大门|s,w",
    },
  },
  ["悟真庙|s"] = {
    name = "悟真庙",
    exits = {
      ["s"] = "惠化坊|n,s",
    },
  },
  ["惠化坊|n,s"] = {
    name = "惠化坊",
    exits = {
      ["n"] = "悟真庙|s",
      ["s"] = "鸣珂街|e,n,s,w",
    },
  },
  ["施水坊|n,s,w"] = {
    name = "施水坊",
    exits = {
      ["n"] = "鸣珂街|e,n,s,w",
      ["s"] = "宝华坊|eu,n,s,w",
      ["w"] = "客店|e,enter,s,w",
    },
  },
  ["春祺坊|e,n,s"] = {
    name = "春祺坊",
    exits = {
      ["e"] = "松林居|e,s,w",
      ["n"] = "西大街|e,enter,s,w",
      ["s"] = "永平坊|e,n",
    },
  },
  ["杂货铺|e,n,w"] = {
    name = "杂货铺",
    exits = {
      ["e"] = "酒馆|e,n,w",
      ["n"] = "松林居|e,s,w",
      ["w"] = "永平坊|e,n",
    },
  },
  ["杏林堂|w"] = {
    name = "杏林堂",
    exits = {
      ["w"] = "山前街|e,n,su",
    },
  },
  ["松林居|e,s,w"] = {
    name = "松林居",
    exits = {
      ["e"] = "客店|e,enter,s,w",
      ["s"] = "杂货铺|e,n,w",
      ["w"] = "春祺坊|e,n,s",
    },
  },
  ["永平坊|e,n"] = {
    name = "永平坊",
    exits = {
      ["e"] = "杂货铺|e,n,w",
      ["n"] = "春祺坊|e,n,s",
    },
  },
  ["灵江北岸|n"] = {
    name = "灵江北岸",
    exits = {
      ["n"] = "兴善门|n,s,se,u",
      ["ride"] = "灵江南岸|sw",
    },
  },
  ["状元坊|e,s"] = {
    name = "状元坊",
    exits = {
      ["e"] = "状元池|w",
      ["s"] = "东大街1|e,n,s,w",
    },
  },
  ["状元池|w"] = {
    name = "状元池",
    exits = {
      ["w"] = "状元坊|e,s",
    },
  },
  ["西大街|e,enter,s,w"] = {
    name = "西大街",
    exits = {
      ["e"] = "鸣珂街|e,n,s,w",
      ["enter"] = "鼓楼|n,out",
      ["s"] = "春祺坊|e,n,s",
      ["w"] = "括苍门|e,u,w"
    },
  },
  ["超然楼|d"] = {
    name = "超然楼",
    exits = {
      ["d"] = "兴善门|n,s,se,u",
    },
  },
  ["括苍门|e,u,w"] = {
    name = "括苍门",
    exits = {
      ["e"] = "西大街|e,enter,s,w",
      ["u"] = "集仙楼|d",
      ["w"] = "灵江东岸|e,nw",
    },
  },
  ["灵江东岸|e,nw"] = {
    name = "灵江东岸",
    exits = {
      ["e"] = "括苍门|e,u,w",
      ["nw"] = "烟霞阁|nw,se,su,w",
    },
  },
  ["烟霞阁|nw,se,su,w"] = {
    name = "烟霞阁",
    exits = {
      ["se"] = "灵江东岸|e,nw",
      ["su"] = "紫阳街|nd,nw",
    },
  },
  ["紫竹庵|se"] = {
    name = "紫竹庵",
    exits = {
      ["se"] = "紫阳街|nd,nw",
    },
  },
  ["紫阳街|nd,nw"] = {
    name = "紫阳街",
    exits = {
      ["nd"] = "烟霞阁|nw,se,su,w",
      ["nw"] = "紫竹庵|se",
    },
  },
  ["集仙楼|d"] = {
    name = "集仙楼",
    exits = {
      ["d"] = "括苍门|e,u,w",
    },
  },
  ["酒馆|e,n,w"] = {
    name = "酒馆",
    exits = {
      ["e"] = "宝华坊|eu,n,s,w",
      ["n"] = "客店|e,enter,s,w",
      ["w"] = "杂货铺|e,n,w",
    },
  },
  ["鸣珂街|e,n,s,w"] = {
    name = "鸣珂街",
    exits = {
      ["e"] = "东大街|e,n,s,w",
      ["n"] = "惠化坊|n,s",
      ["s"] = "施水坊|n,s,w",
      ["w"] = "西大街|e,enter,s,w",
    },
  },
  ["鼓楼|n,out"] = {
    name = "鼓楼",
    exits = {
      ["n"] = "府衙大门|s,w",
      ["out"] = "西大街|e,enter,s,w",
    },
  },
  ["龙王庙|nw"] = {
    name = "龙王庙",
    exits = {
      ["nw"] = "兴善门|n,s,se,u",
    },
  },

  }
}

-- 只要同名不同 key 就编号：本图需要编号的是【山路】与【山间道】
mapper.maps["tzf"].mapAliases = {

  -- 野外
  ["六坪山"]       = "lps",
  ["南坡"]         = "np",
  ["双门硐"]       = "smd",
  ["城外土路"]     = "cwtl",
  ["大峡谷"]       = "dxg",
  ["大帐"]         = "dz",
  ["安然山"]       = "ars",
  ["定光净寺"]     = "dgjs",
  ["小村"]         = "xc",

  ["山路"]         = "sl",
  ["山路1"]        = "sl1",

  ["山间道"]       = "sjd",
  ["山间道1"]      = "sjd1",

  ["废猎棚"]       = "flp",
  ["挂鹰岩"]       = "gyy",
  ["枯松台"]       = "kst",
  ["灵江南岸"]     = "ljna",
  ["秃岭"]         = "tl",
  ["羊头山"]       = "yts",
  ["营地"]         = "yd",
  ["落石沟"]       = "lsg",
  ["观夕洞"]       = "gxd",
  ["雁荡北坡"]     = "ydbp",
  ["青龙岗"]       = "qlg",

  -- 城内
  ["东大街"]       = "ddj",
  ["东大街1"]      = "ddj1",
  ["当铺"]         = "dp",
  ["宝泉记"]       = "bqj",

  ["东湖"]         = "dh",
  ["崇和门"]       = "chm",
  ["惠风楼"]       = "hfl",
  ["放生池"]       = "fsc",

  ["东峰"]         = "df",
  ["兴善门"]       = "xsm",
  ["千佛塔"]       = "qft",
  ["宝华坊"]       = "bhf",
  ["客店"]         = "kd",
  ["客房"]         = "kf",
  ["山前街"]       = "sqj",
  ["巾子山"]       = "jzs",
  ["府衙大门"]     = "fydm",
  ["府衙大堂"]     = "fydt",

  ["悟真庙"]       = "wzm",
  ["惠化坊"]       = "hhf",
  ["施水坊"]       = "ssf",
  ["春祺坊"]       = "cqf",
  ["杂货铺"]       = "zhp",
  ["杏林堂"]       = "xlt",
  ["松林居"]       = "slj",
  ["永平坊"]       = "ypf",

  ["灵江北岸"]     = "ljba",
  ["状元坊"]       = "zyf",
  ["状元池"]       = "zyc",

  ["西大街"]       = "xdj",
  ["超然楼"]       = "crl",
  ["括苍门"]       = "kcm",
  ["灵江东岸"]     = "ljda",
  ["烟霞阁"]       = "yxg",
  ["紫竹庵"]       = "zza",
  ["紫阳街"]       = "zyj",
  ["集仙楼"]       = "jxl",

  ["酒馆"]         = "jg",
  ["鸣珂街"]       = "origin",
  ["鼓楼"]         = "gl",
  ["龙王庙"]       = "lwm",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>西湖岸边 - xhab</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["xhab"] = {
  region = { key = "xhab", name = "西湖" },

  mapNodes = {

    ["保俶塔|enter,s,wu"] = {
      name = "保俶塔",
      exits = {
        ["s"]  = "段家桥|e,n,s,sw",
        ["wu"] = "初阳台|d,ed",
      },
    },

    ["初阳台|d,ed"] = {
      name = "初阳台",
      exits = {
        ["ed"] = "保俶塔|enter,s,wu",
        ["d"] = "葛岭|sd,u"
      },
    },

    ["段家桥|e,n,s,sw"] = {
      name = "段家桥",
      exits = {
        ["n"] = "保俶塔|enter,s,wu",
        ["s"] = "断桥残雪|n,s,sw",
        ["sw"] = "孤山路|ne,nu,se,sw",
      },
    },

    ["断桥残雪|n,s,sw"] = {
      name = "断桥残雪",
      exits = {
        ["n"]  = "段家桥|e,n,s,sw",
        ["sw"] = "白堤|n,ne,s,sw",
        -- ["s"] 未知
      },
    },

    ["白堤|n,ne,s,sw"] = {
      name = "白堤",
      exits = {
        ["ne"] = "断桥残雪|n,s,sw",
        ["sw"] = "平湖秋月|n,ne,s,sw",
        -- ["n"], ["s"] 未知
      },
    },

    ["平湖秋月|n,ne,s,sw"] = {
      name = "平湖秋月",
      exits = {
        ["ne"] = "白堤|n,ne,s,sw",
        ["sw"] = "孤山|n,ne,nw,s,sw",
      },
    },

    ["跨虹桥|e,s"] = {
      name = "跨虹桥",
      exits = {
        ["e"] = "孤山路|ne,nu,s,se,w",
        ["s"] = "苏公堤1|e,n,se,w",
      },
    },

    ["苏公堤1|e,n,se,w"] = {
      name = "苏公堤1",
      exits = {
        ["n"]  = "跨虹桥|e,s",
        ["se"] = "苏公堤|e,nw,s,w",
      },
    },

    -- 苏公堤（同名节点）=&gt; 苏公堤 / 苏公堤2
    ["苏公堤|e,nw,s,w"] = {
      name = "苏公堤",
      exits = {
        ["nw"] = "苏公堤1|e,n,se,w",
        ["s"]  = "苏公堤|e,n,se,w",
        ["e"]  = "西湖岸边|e,w",
      },
    },
    
    ["西湖岸边|e,w"] = {
      name = "西湖岸边",
      exits = {
        ["w"]  = "苏公堤|e,nw,s,w",
      },
    },

    ["苏公堤|e,n,se,w"] = {
      name = "苏公堤2",
      exits = {
        ["n"]  = "苏公堤|e,nw,s,w",
        ["se"] = "净慈报恩寺|e,n,nw",
      },
    },

    ["净慈报恩寺|e,n,nw"] = {
      name = "净慈报恩寺",
      exits = {
        ["nw"] = "苏公堤|e,n,se,w",
        ["e"]  = "长桥|n,ne,w",
      },
    },

    ["长桥|n,ne,w"] = {
      name = "长桥",
      exits = {
        ["w"] = "净慈报恩寺|e,n,nw",
      },
    },

    ["葛岭|sd,u"] = {
      name = "葛岭",
      exits = {
        ["sd"] = "孤山路|ne,nu,se,sw",
        ["u"]  = "初阳台|d,ed"
      },
    },

    -- 孤山路（同名节点）=&gt; 孤山路 / 孤山路2
    ["孤山路|ne,nu,se,sw"] = {
      name = "孤山路",
      exits = {
        ["nu"] = "葛岭|sd,u",
        ["sw"] = "孤山路|ne,nu,s,se,w",
        ["ne"] = "段家桥|e,n,s,sw"
      },
    },

    ["孤山路|ne,nu,s,se,w"] = {
      name = "孤山路2",
      exits = {
        ["w"] = "跨虹桥|e,s",
        ["s"] = "西泠桥|e,n,se",
        ["ne"] = "孤山路|ne,nu,se,sw",
      },
    },

    ["西泠桥|e,n,se"] = {
      name = "西泠桥",
      exits = {
        ["n"]  = "孤山路|ne,nu,s,se,w",
        ["se"] = "孤山|n,ne,nw,s,sw",
      },
    },

    ["孤山|n,ne,nw,s,sw"] = {
      name = "孤山",
      exits = {
        ["nw"] = "西泠桥|e,n,se",
        ["ne"] = "平湖秋月|n,ne,s,sw",
        ["sw"] = "孤山梅庄|ne",
      },
    },

    ["孤山梅庄|ne"] = {
      name = "孤山梅庄",
      exits = {
        ["ne"] = "孤山|n,ne,nw,s,sw",
      },
    },

  },

  mapAliases = {
    ["保俶塔"]     = "bct",
    ["初阳台"]     = "cyt",
    ["段家桥"]     = "djq",
    ["断桥残雪"]   = "dqc",
    ["白堤"]       = "bd",
    ["平湖秋月"]   = "phqy",
    ["跨虹桥"]     = "khq",
    ["苏公堤1"]    = "sgd1",

    -- 苏公堤（重名编号）
    ["苏公堤"]     = "sgd",
    ["苏公堤2"]    = "sgd2",

    ["净慈报恩寺"] = "jcbes",
    ["长桥"]       = "cq",
    ["葛岭"]       = "gl",

    -- 孤山路（重名编号）
    ["孤山路"]     = "gsl",
    ["孤山路2"]    = "gsl2",

    ["西泠桥"]     = "xlq",
    ["孤山"]       = "gs",
    ["孤山梅庄"]   = "gsmz",

    -- ★ 区域原点（用于 back 命令）
    ["西湖岸边"]   = "origin",
  }
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>武夷山 - wuyi</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["wuyi"]= {

  region = {
    key  = "wuyi",      -- 区域代号，用在 goto wx.xxx 里
    name = "武夷山",    -- 纯注释/显示用
  },
  mapNodes = {
  ["三仰峰|ed"] = {
    name = "三仰峰",
    exits = {
      ["ed"] = "泉眼|ne,sd,wu",
    },
  },
  ["三清殿|out"] = {
    name = "三清殿",
    exits = {
      ["out"] = "武夷宫|enter,nu,s",
    },
  },
  ["九龙窠|ne,nw,su,sw,u"] = {
    name = "九龙窠",
    exits = {
      ["ne"] = "山路|n,s,sw",
      ["nw"] = "山路|nu,se,wu",
      ["su"] = "山路|nd,s",
      ["sw"] = "泉眼|ne,sd,wu",
      ["u"] = "高岩之上|d",
    },
  },
  ["五指峰|nd,sd"] = {
    name = "五指峰",
    exits = {
      ["nd"] = "天龙谷|ne,su",
      ["sd"] = "山路|nu,sw",
    },
  },
  ["品石岩|ne,w"] = {
    name = "品石岩",
    exits = {
      ["ne"] = "山路|enter,nu,se,sw",
    },
  },
  ["大王峰|sd"] = {
    name = "大王峰",
    exits = {
      ["sd"] = "山路|e,nu,nw",
    },
  },
  ["天游峰|n,nw,sd"] = {
    name = "天游峰",
    exits = {
      ["n"] = "山路|n,s",
      ["nw"] = "山路|enter,nu,se,sw",
      ["sd"] = "溪边渡口|nu,se",
    },
  },
  ["天龙谷|ne,su"] = {
    name = "天龙谷",
    exits = {
      ["su"] = "五指峰|nd,sd",
    },
  },
  ["小路|ed,w"] = {
    name = "小路",
    exits = {
      ["ed"] = "山路|nu,se,wu",
      ["w"] = "梅岭古道|e,nd,se",
    },
  },

  -- 山路(1)
  ["山路|e,n"] = {
    name = "山路",
    exits = {
      ["e"] = "永乐禅院|w",
      ["n"] = "山路|n,s,sw",
    },
  },

  -- 山路(2)
  ["山路|e,nu,nw"] = {
    name = "山路2",
    exits = {
      ["e"] = "山路|sd,w",
      ["nu"] = "大王峰|sd",
      ["nw"] = "溪边渡口|nu,se",
    },
  },

  -- 山路(3)
  ["山路|e,wu"] = {
    name = "山路3",
    exits = {
      ["e"] = "山路|ne,s,w",
      ["wu"] = "莲花峰|ed,sd",
    },
  },

  -- 山路(4)
  ["山路|enter,nu,se,sw"] = {
    name = "山路4",
    exits = {
      ["enter"] = "桃源洞|out",
      ["nu"] = "泉眼|ne,sd,wu",
      ["se"] = "天游峰|n,nw,sd",
      ["sw"] = "品石岩|ne,w",
    },
  },

  -- 山路(5)
  ["山路|n,s"] = {
    name = "山路5",
    exits = {
      ["n"] = "山路|nd,s",
      ["s"] = "天游峰|n,nw,sd",
    },
  },

  -- 山路(6)
  ["山路|n,s,sw"] = {
    name = "山路6",
    exits = {
      ["n"] = "山路|ne,s,w",
      ["s"] = "山路|e,n",
      ["sw"] = "九龙窠|ne,nw,su,sw,u",
    },
  },

  -- 山路(7)
  ["山路|nd,s"] = {
    name = "山路7",
    exits = {
      ["nd"] = "九龙窠|ne,nw,su,sw,u",
      ["s"] = "山路|n,s",
    },
  },

  -- 山路(8)
  ["山路|ne,s,w"] = {
    name = "山路8",
    exits = {
      ["ne"] = "山路|nu,sw",
      ["s"] = "山路|n,s,sw",
      ["w"] = "山路|e,wu",
    },
  },

  -- 山路(9)
  ["山路|nu,se,wu"] = {
    name = "山路9",
    exits = {
      ["nu"] = "莲花峰|ed,sd",
      ["se"] = "九龙窠|ne,nw,su,sw,u",
      ["wu"] = "小路|ed,w",
    },
  },

  -- 山路(10)
  ["山路|nu,sw"] = {
    name = "山路10",
    exits = {
      ["nu"] = "五指峰|nd,sd",
      ["sw"] = "山路|ne,s,w",
    },
  },

  -- 山路(11)
  ["山路|sd,w"] = {
    name = "山路11",
    exits = {
      ["sd"] = "武夷宫|enter,nu,s",
      ["w"] = "山路|e,nu,nw",
    },
  },

  ["木桥|n,se"] = {
    name = "木桥",
    exits = {
      ["n"] = "武夷宫|enter,nu,s",
    },
  },
  ["桃源洞|out"] = {
    name = "桃源洞",
    exits = {
      ["out"] = "山路|enter,nu,se,sw",
    },
  },
  ["梅岭古道|e,nd,se"] = {
    name = "梅岭古道",
    exits = {
      ["e"] = "小路|ed,w",
    },
  },
  ["武夷宫|enter,nu,s"] = {
    name = "武夷宫",
    exits = {
      ["enter"] = "三清殿|out",
      ["nu"] = "山路|sd,w",
      ["s"] = "木桥|n,se",
    },
  },
  ["永乐禅院|w"] = {
    name = "永乐禅院",
    exits = {
      ["w"] = "山路|e,n",
    },
  },
  ["泉眼|ne,sd,wu"] = {
    name = "泉眼",
    exits = {
      ["ne"] = "九龙窠|ne,nw,su,sw,u",
      ["sd"] = "山路|enter,nu,se,sw",
      ["wu"] = "三仰峰|ed",
    },
  },

  -- 溪边渡口(1)
  ["溪边渡口|nu,se"] = {
    name = "溪边渡口",
    exits = {
      ["nu"] = "天游峰|n,nw,sd",
      ["se"] = "山路|e,nu,nw",
      ["ride"] = "溪边渡口|su",
    },
  },

  ["莲花峰|ed,sd"] = {
    name = "莲花峰",
    exits = {
      ["ed"] = "山路|e,wu",
      ["sd"] = "山路|nu,se,wu",
    },
  },
  ["大藏峰|nd,sw"] = {
    name = "大藏峰",
    exits = {
      ["nd"] = "溪边渡口|su",
      ["sw"] = "玉女峰|ne,sd",
    },
  },

  -- 山路(12)
  ["山路|eu,nw"] = {
    name = "山路12",
    exits = {
      ["eu"] = "狮子峰|wd",
      ["nw"] = "虎啸岩|e,se",
    },
  },

  -- 山路(13)
  ["山路|nu,w"] = {
    name = "山路13",
    exits = {
      ["nu"] = "玉女峰|ne,sd",
      ["w"] = "虎啸岩|e,se",
    },
  },

  -- 溪边渡口(2)
  ["溪边渡口|su"] = {
    name = "溪边渡口2",
    exits = {
      ["su"] = "大藏峰|nd,sw",
      ["ride"] = "溪边渡口|nu,se",
    },
  },

  ["狮子峰|wd"] = {
    name = "狮子峰",
    exits = {
      ["wd"] = "山路|eu,nw",
    },
  },
  ["玉女峰|ne,sd"] = {
    name = "玉女峰",
    exits = {
      ["ne"] = "大藏峰|nd,sw",
      ["sd"] = "山路|nu,w",
    },
  },
  ["虎啸岩|e,se"] = {
    name = "虎啸岩",
    exits = {
      ["e"] = "山路|nu,w",
      ["se"] = "山路|eu,nw",
    },
  },  
  ["高岩之上|d"] = {
    name = "高岩之上",
    exits = {
      ["d"] = "九龙窠|ne,nw,su,sw,u",
    },
  },
}
}

mapper.maps["wuyi"].mapAliases = {

  -- ===== 核心/原点 =====
  ["武夷宫"]   = "wyg",   
  ["三清殿"]   = "sqd",
  ["木桥"]     = "mq",

  -- ===== 洞/谷/石 =====
  ["桃源洞"]   = "tyd",
  ["天龙谷"]   = "tlg",
  ["品石岩"]   = "psy",
  ["九龙窠"]   = "origin",
  ["泉眼"]     = "qy",
  ["高岩之上"] = "gyzs",

  -- ===== 峰/岩 =====
  ["三仰峰"]   = "syf",
  ["大王峰"]   = "dwf",
  ["五指峰"]   = "wzf",
  ["天游峰"]   = "tyf",
  ["莲花峰"]   = "lhf",
  ["大藏峰"]   = "dzf",
  ["狮子峰"]   = "szf",
  ["玉女峰"]   = "ynf",
  ["虎啸岩"]   = "hxy",

  -- ===== 交通点/路径 =====
  ["溪边渡口"]  = "xbdk",
  ["溪边渡口2"] = "xbdk2",

  ["小路"]     = "xl",
  ["梅岭古道"] = "mlgd",
  ["永乐禅院"] = "ylcy",

  -- ===== 同名编号补齐（避免 name 冲突）=====
  ["山路"]    = "sl",
  ["山路2"]   = "sl2",
  ["山路3"]   = "sl3",
  ["山路4"]   = "sl4",
  ["山路5"]   = "sl5",
  ["山路6"]   = "sl6",
  ["山路7"]   = "sl7",
  ["山路8"]   = "sl8",
  ["山路9"]   = "sl9",
  ["山路10"]  = "sl10",
  ["山路11"]  = "sl11",
  ["山路12"]  = "sl12",
  ["山路13"]  = "sl13",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>湖州 - hzf</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {}

mapper.maps["hzf"] = {

  region = {
    key  = "hzf",      -- 区域代号，用在 goto wx.xxx 里
    name = "湖州府",   -- 纯注释/显示用
  },

  mapNodes = {

    ["东大街|e,nu,s,se,w"] = {
      name = "东大街",
      exits = {
        ["e"]  = "东门|e,n,s,w",
        ["nu"] = "韵海楼|sd,u",
        ["s"]  = "南大街|n,s,w",
        ["se"] = "飞英塔|enter,nw",
        ["w"]  = "苕溪东岸|e,ne,sw,wu",
      },
    },

    ["东门|e,n,s,w"] = {
      name = "东门",
      exits = {
        ["e"] = "青石道|e,w",
        ["w"] = "东大街|e,nu,s,se,w",
      },
    },

    ["内塔|out"] = {
      name = "内塔",
      exits = {
        ["out"] = "飞英塔|enter,nw",
      },
    },

    ["北大街|e,n,s,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "湖州府衙|enter,w",
        ["n"] = "北门|e,n,s,w",
        ["s"] = "西大街|e,n,sw,w",
        ["w"] = "广场|e,n,s,w",
      },
    },

    ["北门|e,n,s,w"] = {
      name = "北门",
      exits = {
        ["n"] = "青石道|ne,nw,s,w",
        ["s"] = "北大街|e,n,s,w",
      },
    },

    -- 南大街（去重：南大街 / 南大街1 / 南大街2 / 南大街3）
    ["南大街|e,n,w"] = {
      name = "南大街",
      exits = {
        ["e"] = "铁佛禅寺|w",
        ["n"] = "南大街|n,s,w",
        ["w"] = "府庙|e,w",
      },
    },

    ["南大街|e,ne,s,w"] = {
      name = "南大街1",
      exits = {
        ["e"]  = "苕溪西岸|eu,ne,w",
        ["ne"] = "南大街|ne,sw,w",
        ["s"]  = "南门|e,n,s,w",
        ["w"]  = "当铺|e",
      },
    },

    ["南大街|n,s,w"] = {
      name = "南大街2",
      exits = {
        ["n"] = "东大街|e,nu,s,se,w",
        ["s"] = "南大街|e,n,w",
        ["w"] = "苕溪东岸|e,ne,sw",
      },
    },

    ["南大街|ne,sw,w"] = {
      name = "南大街3",
      exits = {
        ["ne"] = "西大街|e,n,sw,w",
        ["sw"] = "南大街|e,ne,s,w",
        ["w"]  = "招商安寓|e,enter",
      },
    },

    ["南浔镇|ed,w"] = {
      name = "南浔镇",
      exits = {
        ["ed"] = "太湖边|se,wu",
        ["w"]  = "青石道|e,w",
      },
    },

    -- 南门（去重：南门 / 南门1）
    ["南门|e,n,s,w"] = {
      name = "南门",
      exits = {
        ["n"] = "南大街|e,ne,s,w",
        ["s"] = "官道|n,sw,w",
      },
    },

    ["南门|n,s,se"] = {
      name = "南门1",
      exits = {
        ["s"]  = "湖边官道|n,nw,se",
        ["se"] = "太湖湖畔|nw,se",
      },
    },

    ["天池|sw"] = {
      name = "天池",
      exits = {
        ["sw"] = "莫干山|d,ne",
      },
    },

    -- 太湖湖畔（去重：太湖湖畔 / 太湖湖畔1）
    ["太湖湖畔|nw,se"] = {
      name = "太湖湖畔",
      exits = {
        ["nw"] = "南门|n,s,se",
        ["se"] = "太湖湖畔|nw,sw",
      },
    },

    ["太湖湖畔|nw,sw"] = {
      name = "太湖湖畔1",
      exits = {
        ["nw"] = "太湖湖畔|nw,se",
        ["sw"] = "青石道|ne,nw,s,w",
      },
    },

    ["太湖边|se,wu"] = {
      name = "太湖边",
      exits = {
        ["wu"] = "南浔镇|ed,w",
      },
    },

    -- 官道（去重：官道 / 官道1 / 官道2 / 官道3）
    ["官道|e,n,su"] = {
      name = "官道",
      exits = {
        ["e"]  = "官道|e,w",
        ["n"]  = "官道|n,s",
        ["su"] = "莫干山下|nd,sw,u",
      },
    },

    ["官道|e,w"] = {
      name = "官道1",
      exits = {
        ["e"] = "官道|n,sw,w",
        ["w"] = "官道|e,n,su",
      },
    },

    ["官道|n,s"] = {
      name = "官道2",
      exits = {
        ["n"] = "青石道|e,nw,s",
        ["s"] = "官道|e,n,su",
      },
    },

    ["官道|n,sw,w"] = {
      name = "官道3",
      exits = {
        ["n"]  = "南门|e,n,s,w",
        ["sw"] = "青石官道|e,ne,nw,s",
        ["w"]  = "官道|e,w",
      },
    },

    ["小路|ne,s,wu"] = {
      name = "小路",
      exits = {
        ["s"] = "湖边官道|n,se",
      },
    },

    ["山脚下|se,wu"] = {
      name = "山脚下",
      exits = {
        ["se"] = "青石道|e,nw,s",
        ["wu"] = "广德县城|ed,nw",
      },
    },

    ["山路|nd,nw,se"] = {
      name = "山路",
      exits = {
        ["se"] = "广德县城|ed,nw",
      },
    },

    ["广场|e,n,s,w"] = {
      name = "广场",
      exits = {
        ["e"] = "北大街|e,n,s,w",
        ["n"] = "钱庄|s",
        ["s"] = "西大街|e,n,w",
        ["w"] = "车马行|e",
      },
    },

    ["广德县城|ed,nw"] = {
      name = "广德县城",
      exits = {
        ["ed"] = "山脚下|se,wu",
        ["nw"] = "山路|nd,nw,se",
      },
    },

    ["府庙|e,w"] = {
      name = "府庙",
      exits = {
        ["e"] = "南大街|e,n,w",
        ["w"] = "苕溪东岸|e,ne,wu",
      },
    },

    ["当铺|e"] = {
      name = "当铺",
      exits = {
        ["e"] = "南大街|e,ne,s,w",
      },
    },

    ["招商安寓|e,enter"] = {
      name = "招商安寓",
      exits = {
        ["e"]     = "南大街|ne,sw,w",
        ["enter"] = "里间|out",
      },
    },

    ["日月桥|ed,wd"] = {
      name = "日月桥",
      exits = {
        ["ed"] = "苕溪东岸|e,ne,sw,wu",
        ["wd"] = "苕溪西岸|eu,ne,sw,w",
      },
    },

    ["枫树庙|ne,wd"] = {
      name = "枫树庙",
      exits = {
        ["ne"] = "莫干山下|nd,sw,u",
      },
    },

    ["江南小道|e,n,nw"] = {
      name = "江南小道",
      exits = {
        ["e"] = "湖边官道|nw,se,w",
      },
    },

    ["湖州府衙|enter,w"] = {
      name = "湖州府衙",
      exits = {
        ["enter"] = "府衙大厅|out",
        ["w"]     = "北大街|e,n,s,w",
      },
    },

    ["府衙大厅|out"] = {
      name = "府衙大厅",
      exits = {
        ["out"] = "湖州府衙|enter,w",
      },
    },

    -- 湖边官道（去重：湖边官道 / 湖边官道1 / 湖边官道2）
    ["湖边官道|n,nw,se"] = {
      name = "湖边官道",
      exits = {
        ["n"]  = "南门|n,s,se",
        ["nw"] = "湖边官道|nw,se,w",
        ["se"] = "青石道|ne,nw,s,w",
      },
    },

    ["湖边官道|n,se"] = {
      name = "湖边官道1",
      exits = {
        ["n"]  = "小路|ne,s,wu",
        ["se"] = "湖边官道|nw,se,w",
      },
    },

    ["湖边官道|nw,se,w"] = {
      name = "湖边官道2",
      exits = {
        ["nw"] = "湖边官道|n,se",
        ["se"] = "湖边官道|n,nw,se",
        ["w"]  = "江南小道|e,n,nw",
      },
    },

    ["潮音桥|ed,wd"] = {
      name = "潮音桥",
      exits = {
        ["ed"] = "苕溪东岸|e,ne,wu",
        ["wd"] = "苕溪西岸|eu,ne,w",
      },
    },

    -- 苕溪东岸（去重：苕溪东岸 / 苕溪东岸1 / 苕溪东岸2 / 苕溪东岸3）
    ["苕溪东岸|e,ne,sw"] = {
      name = "苕溪东岸",
      exits = {
        ["e"]  = "南大街|n,s,w",
        ["ne"] = "苕溪东岸|e,ne,sw,wu",
        ["sw"] = "苕溪东岸|e,ne,wu",
      },
    },

    ["苕溪东岸|e,ne,sw,wu"] = {
      name = "苕溪东岸1",
      exits = {
        ["e"]  = "东大街|e,nu,s,se,w",
        ["ne"] = "苕溪东岸|sw",
        ["sw"] = "苕溪东岸|e,ne,sw",
        ["wu"] = "日月桥|ed,wd",
      },
    },

    ["苕溪东岸|e,ne,wu"] = {
      name = "苕溪东岸2",
      exits = {
        ["e"]  = "府庙|e,w",
        ["ne"] = "苕溪东岸|e,ne,sw",
        ["wu"] = "潮音桥|ed,wd",
      },
    },

    ["苕溪东岸|sw"] = {
      name = "苕溪东岸3",
      exits = {
        ["sw"] = "苕溪东岸|e,ne,sw,wu",
      },
    },

    -- 苕溪西岸（去重：苕溪西岸 / 苕溪西岸1 / 苕溪西岸2 / 苕溪西岸3）
    ["苕溪西岸|eu,ne,sw,w"] = {
      name = "苕溪西岸",
      exits = {
        ["eu"] = "日月桥|ed,wd",
        ["ne"] = "苕溪西岸|sw",
        ["sw"] = "苕溪西岸|ne,sw",
        ["w"]  = "西大街|e,n,sw,w",
      },
    },

    ["苕溪西岸|eu,ne,w"] = {
      name = "苕溪西岸1",
      exits = {
        ["eu"] = "潮音桥|ed,wd",
        ["ne"] = "苕溪西岸|ne,sw",
        ["w"]  = "南大街|e,ne,s,w",
      },
    },

    ["苕溪西岸|ne,sw"] = {
      name = "苕溪西岸2",
      exits = {
        ["ne"] = "苕溪西岸|eu,ne,sw,w",
        ["sw"] = "苕溪西岸|eu,ne,w",
      },
    },

    ["苕溪西岸|sw"] = {
      name = "苕溪西岸3",
      exits = {
        ["sw"] = "苕溪西岸|eu,ne,sw,w",
      },
    },

    ["莫干山|d,ne"] = {
      name = "莫干山",
      exits = {
        ["d"]  = "莫干山下|nd,sw,u",
        ["ne"] = "天池|sw",
      },
    },

    ["莫干山下|nd,sw,u"] = {
      name = "莫干山下",
      exits = {
        ["nd"] = "官道|e,n,su",
        ["sw"] = "枫树庙|ne,wd",
        ["u"]  = "莫干山|d,ne",
      },
    },

    ["菰城|e"] = {
      name = "菰城",
      exits = {
        ["e"] = "青石道|ne,nw,s,w",
      },
    },

    -- 西大街（去重：西大街 / 西大街1）
    ["西大街|e,n,sw,w"] = {
      name = "西大街",
      exits = {
        ["e"]  = "苕溪西岸|eu,ne,sw,w",
        ["n"]  = "北大街|e,n,s,w",
        ["sw"] = "南大街|ne,sw,w",
        ["w"]  = "西大街|e,n,w",
      },
    },

    ["西大街|e,n,w"] = {
      name = "西大街1",
      exits = {
        ["e"] = "西大街|e,n,sw,w",
        ["n"] = "广场|e,n,s,w",
        ["w"] = "西门|e,n,s,w",
      },
    },

    ["西门|e,n,s,w"] = {
      name = "西门",
      exits = {
        ["e"] = "西大街|e,n,w",
        ["w"] = "青石道|e,nw,s",
      },
    },

    ["车马行|e"] = {
      name = "车马行",
      exits = {
        ["e"] = "广场|e,n,s,w",
      },
    },

    ["里间|out"] = {
      name = "里间",
      exits = {
        ["out"] = "招商安寓|e,enter",
      },
    },

    ["钱庄|s"] = {
      name = "钱庄",
      exits = {
        ["s"] = "广场|e,n,s,w",
      },
    },

    ["铁佛禅寺|w"] = {
      name = "铁佛禅寺",
      exits = {
        ["w"] = "南大街|e,n,w",
      },
    },

    ["青石官道|e,ne,nw,s"] = {
      name = "青石官道",
      exits = {
        ["ne"] = "官道|n,sw,w",
      },
    },

    -- 青石道（去重：青石道 / 青石道1 / 青石道2）
    ["青石道|e,nw,s"] = {
      name = "青石道",
      exits = {
        ["e"]  = "西门|e,n,s,w",
        ["nw"] = "山脚下|se,wu",
        ["s"]  = "官道|n,s",
      },
    },

    ["青石道|e,w"] = {
      name = "青石道1",
      exits = {
        ["e"] = "南浔镇|ed,w",
        ["w"] = "东门|e,n,s,w",
      },
    },

    ["青石道|ne,nw,s,w"] = {
      name = "青石道2",
      exits = {
        ["ne"] = "太湖湖畔|nw,sw",
        ["nw"] = "湖边官道|n,nw,se",
        ["s"]  = "北门|e,n,s,w",
        ["w"]  = "菰城|e",
      },
    },

    ["韵海楼|sd,u"] = {
      name = "韵海楼",
      exits = {
        ["sd"] = "东大街|e,nu,s,se,w",
        ["u"]  = "韵海楼二层|d",
      },
    },

    ["韵海楼二层|d"] = {
      name = "韵海楼二层",
      exits = {
        ["d"] = "韵海楼|sd,u",
      },
    },

    ["飞英塔|enter,nw"] = {
      name = "飞英塔",
      exits = {
        ["enter"] = "内塔|out",
        ["nw"]    = "东大街|e,nu,s,se,w",
      },
    },

  }, -- mapNodes end
}

-- 去重后补齐别名（可 goto）
mapper.maps["hzf"].mapAliases = {
  ["东大街"]       = "ddj",
  ["东门"]         = "dm",
  ["内塔"]         = "nt",
  ["北大街"]       = "bdj",
  ["北门"]         = "bm",

  ["南大街"]       = "ndj",
  ["南大街1"]      = "ndj1",
  ["南大街2"]      = "ndj2",
  ["南大街3"]      = "ndj3",

  ["南浔镇"]       = "nxz",

  ["南门"]         = "nm",
  ["南门1"]        = "nm1",

  ["天池"]         = "tc",

  ["太湖湖畔"]     = "thhp",
  ["太湖湖畔1"]    = "thhp1",
  ["太湖边"]       = "thb",

  ["官道"]         = "gd",
  ["官道1"]        = "gd1",
  ["官道2"]        = "gd2",
  ["官道3"]        = "gd3",

  ["小路"]         = "xl",
  ["山脚下"]       = "sjx",
  ["山路"]         = "sl",

  ["广场"]         = "origin",
  ["广德县城"]     = "gdxc",

  ["府庙"]         = "fm",
  ["当铺"]         = "dp",
  ["招商安寓"]     = "zsay",
  ["日月桥"]       = "ryq",
  ["枫树庙"]       = "fsm",
  ["江南小道"]     = "jnxd",

  ["湖州府衙"]     = "hzfy",
  ["府衙大厅"]     = "fydt",

  ["湖边官道"]     = "hbgd",
  ["湖边官道1"]    = "hbgd1",
  ["湖边官道2"]    = "hbgd2",

  ["潮音桥"]       = "cyq",

  ["苕溪东岸"]     = "txda",
  ["苕溪东岸1"]    = "txda1",
  ["苕溪东岸2"]    = "txda2",
  ["苕溪东岸3"]    = "txda3",

  ["苕溪西岸"]     = "txxa",
  ["苕溪西岸1"]    = "txxa1",
  ["苕溪西岸2"]    = "txxa2",
  ["苕溪西岸3"]    = "txxa3",

  ["莫干山"]       = "mgs",
  ["莫干山下"]     = "mgsx",

  ["菰城"]         = "gc",

  ["西大街"]       = "xdj",
  ["西大街1"]      = "xdj1",
  ["西门"]         = "xm",

  ["车马行"]       = "mch",
  ["里间"]         = "lj",
  ["钱庄"]         = "qz",
  ["铁佛禅寺"]     = "tfcs",

  ["青石官道"]     = "qsgd",
  ["青石道"]       = "qsd",
  ["青石道1"]      = "qsd1",
  ["青石道2"]      = "qsd2",

  ["韵海楼"]       = "yhl",
  ["韵海楼二层"]   = "yh2",
  ["飞英塔"]       = "fyt",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>桃花岛 - htd</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["thd"] = {

  region = {
    key  = "thd",      -- 区域代号，用在 goto mz.xxx 里
    name = "桃花岛",    -- 纯注释/显示用
  },

  mapNodes = {
    ["两忘峰|ed,sd"] = {
      name = "两忘峰",
      exits = {
        ["ed"] = "清啸亭|wu",
        ["sd"] = "岩壁|e,nu,wu",
      },
    },
    ["休息室|s,w"] = {
      name = "休息室",
      exits = {
        ["s"] = "走廊|e,n,s,w",
        ["w"] = "赏月台|e",
      },
    },
    ["大厅|e,w"] = {
      name = "大厅",
      exits = {
        ["e"] = "走廊|e,n,s,w",
        ["w"] = "岩壁|e,w",
      },
    },

    -- 重名：山路 x2
    ["山路|nu,sd"] = {
      name = "山路1",
      exits = {
        ["nu"] = "草地|e,n,sd,se",
        ["sd"] = "山路1|nu,sd",
      },
    },
    ["山路1|nu,sd"] = {
      name = "山路2",
      exits = {
        ["nu"] = "山路|nu,sd",
        ["sd"] = "桃林|nu,nw,s",
      },
    },

    -- 重名：桃林 x2
    ["桃林|nu,nw,s"] = {
      name = "桃林1",
      exits = {
        ["nu"] = "山路1|nu,sd",
        ["s"] = "桃林|n,s",
      },
    },
    ["桃林|n,s"] = {
      name = "桃林2",
      exits = {
        ["n"] = "桃林|nu,nw,s",
        ["s"] = "海滩|n",
      },
    },
    ["海滩|n"] = {
      name = "海滩",
      exits = {
        ["n"] = "桃林|n,s",
      },
    },

    -- 重名：岩壁 x2
    ["岩壁|e,nu,wu"] = {
      name = "岩壁1",
      exits = {
        ["e"] = "竹林|e,s,w",
        ["nu"] = "两忘峰|ed,sd",
        ["wu"] = "试剑峰|ed,eu",
      },
    },
    ["岩壁|e,w"] = {
      name = "岩壁2",
      exits = {
        ["e"] = "大厅|e,w",
        ["w"] = "竹林|e,s,w",
      },
    },

    ["清啸亭|wu"] = {
      name = "清啸亭",
      exits = {
        ["wu"] = "两忘峰|ed,sd",
      },
    },
    ["积翠亭|e,n,s"] = {
      name = "积翠亭",
      exits = {
        ["e"] = "竹林|e,n,s,w",
        ["n"] = "竹林|e,n,s",
        ["s"] = "草地|n,s",
      },
    },

    -- 重名：竹林 x7（按出现顺序编号）
    ["竹林|e,n,s"] = {
      name = "竹林1",
      exits = {
        ["e"] = "竹林1|e,s,w",
        ["n"] = "竹林|e,s,w",
        ["s"] = "积翠亭|e,n,s",
      },
    },
    ["竹林|e,n,s,w"] = {
      name = "竹林2",
      exits = {
        ["e"] = "竹林2|e,s,w",
        ["n"] = "竹林1|e,s,w",
        ["s"] = "草地|n,s,w",
        ["w"] = "积翠亭|e,n,s",
      },
    },
    ["竹林|e,s,w"] = {
      name = "竹林3",
      exits = {
        ["e"] = "岩壁|e,w",
        ["s"] = "竹林|e,n,s",
        ["w"] = "岩壁|e,nu,wu",
      },
    },
    ["竹林1|e,s,w"] = {
      name = "竹林4",
      exits = {
        ["e"] = "荷塘|e,w",
        ["s"] = "竹林|e,n,s,w",
        ["w"] = "竹林|e,n,s",
      },
    },
    ["荷塘|e,w"] = {
      name = "荷塘",
      exits = {
        ["e"] = "书房|w",
        ["w"] = "竹林1|e,s,w",
      },
    },
    ["书房|w"] = {
      name = "书房",
      exits = {
        ["w"] = "荷塘|e,w",
      },
    },
    ["竹林2|e,s,w"] = {
      name = "竹林5",
      exits = {
        ["e"] = "竹林|w",
        ["s"] = "竹林|n,s",
        ["w"] = "竹林|e,n,s,w",
      },
    },
    ["竹林|w"] = {
      name = "竹林6",
      exits = {
        ["w"] = "竹林2|e,s,w",
      },
    },
    ["竹林|n,s"] = {
      name = "竹林7",
      exits = {
        ["n"] = "竹林2|e,s,w",
        ["s"] = "草地|n,w",
      },
    },

    -- 重名：草地 x5（按出现顺序编号）
    ["草地|e,n,nw"] = {
      name = "草地1",
      exits = {
        ["e"] = "草地|n,w",
        ["n"] = "草地|n,s,w",
        ["nw"] = "草地|e,n,sd,se",
      },
    },
    ["草地|e,n,sd,se"] = {
      name = "草地2",
      exits = {
        ["e"] = "草地|n,s,w",
        ["n"] = "草地|n,s",
        ["sd"] = "山路|nu,sd",
        ["se"] = "草地|e,n,nw",
      },
    },
    ["草地|n,s"] = {
      name = "草地3",
      exits = {
        ["n"] = "积翠亭|e,n,s",
        ["s"] = "草地|e,n,sd,se",
      },
    },
    ["草地|n,s,w"] = {
      name = "草地4",
      exits = {
        ["n"] = "竹林|e,n,s,w",
        ["s"] = "草地|e,n,nw",
        ["w"] = "草地|e,n,sd,se",
      },
    },
    ["草地|n,w"] = {
      name = "草地5",
      exits = {
        ["n"] = "竹林|n,s",
        ["w"] = "草地|e,n,nw",
      },
    },

    ["观海石|wd"] = {
      name = "观海石",
      exits = {
        ["wd"] = "试剑峰|ed,eu",
      },
    },
    ["试剑峰|ed,eu"] = {
      name = "试剑峰",
      exits = {
        ["ed"] = "岩壁|e,nu,wu",
        ["eu"] = "观海石|wd",
      },
    },
    ["赏月台|e"] = {
      name = "赏月台",
      exits = {
        ["e"] = "休息室|s,w",
      },
    },

    -- 重名：走廊 x2
    ["走廊|e,n,s,w"] = {
      name = "走廊1",
      exits = {
        ["e"] = "饭厅|w",
        ["n"] = "休息室|s,w",
        ["s"] = "走廊1|e,n,s,w",
        ["w"] = "大厅|e,w",
      },
    },
    ["走廊1|e,n,s,w"] = {
      name = "走廊2",
      exits = {
        ["n"] = "走廊|e,n,s,w",
      },
    },

    ["饭厅|w"] = {
      name = "饭厅",
      exits = {
        ["w"] = "走廊|e,n,s,w",
      },
    },
  },
}

-- ====== 为所有房间生成 mapAliases（含编号后的名字）======
mapper.maps["thd"].mapAliases = {

  ["两忘峰"] = "lwf",
  ["清啸亭"] = "qxt",
  ["积翠亭"] = "jct",

  ["大厅"] = "dt",
  ["休息室"] = "xxs",
  ["赏月台"] = "syt",
  ["饭厅"] = "ft",

  ["走廊1"] = "zlg1",
  ["走廊2"] = "zlg2",

  ["山路1"] = "sl1",
  ["山路2"] = "sl2",

  ["桃林1"] = "tlin1",
  ["桃林2"] = "tlin2",
  ["海滩"] = "origin",

  ["岩壁1"] = "yb1",
  ["岩壁2"] = "yb2",

  ["竹林1"] = "zl1",
  ["竹林2"] = "zl2",
  ["竹林3"] = "zl3",
  ["竹林4"] = "zl4",
  ["竹林5"] = "zl5",
  ["竹林6"] = "zl6",
  ["竹林7"] = "zl7",

  ["荷塘"] = "htg",
  ["书房"] = "shf",

  ["草地1"] = "cd1",
  ["草地2"] = "cd2",
  ["草地3"] = "cd3",
  ["草地4"] = "cd4",
  ["草地5"] = "cd5",

  ["试剑峰"] = "sjf",
  ["观海石"] = "ghs",
}
</script>
					<eventHandlerList />
				</Script>
			</ScriptGroup>
			<ScriptGroup isActive="yes" isFolder="yes">
				<name>湖广</name>
				<packageName></packageName>
				<script></script>
				<eventHandlerList />
				<Script isActive="yes" isFolder="no">
					<name>长沙 - csha</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["csha"] = {
  region = {
    key  = "csha",      -- 区域代号，用在 goto wx.xxx 里
    name = "长沙",      -- 纯注释/显示用
  },

  mapNodes = {

    ["万寿宫|s"] = {
      name = "万寿宫",
      exits = {
        ["s"] = "万寿街|e,n,se,w",
      },
    },

    ["万寿街|e,n,se,w"] = {
      name = "万寿街",
      exits = {
        ["e"] = "万福街|e,n,w",
        ["n"] = "万寿宫|s",
        ["se"] = "走马楼|e,ne,nw,s,w",
        ["w"] = "太平街|e,ne,nw,w",
      },
    },

    ["万福街|e,n,w"] = {
      name = "万福街",
      exits = {
        ["e"] = "东长街|n,s,w",
        ["n"] = "府正街|e,n,s",
        ["w"] = "万寿街|e,n,se,w",
      },
    },

    ["上坡子街|e,w"] = {
      name = "上坡子街",
      exits = {
        ["e"] = "黄道街|n,s,w",
        ["w"] = "下坡子街|e,n,s,w",
      },
    },

    ["下坡子街|e,n,s,w"] = {
      name = "下坡子街",
      exits = {
        ["e"] = "上坡子街|e,w",
        ["n"] = "福胜街|n,s",
        ["s"] = "路边井|n",
        ["w"] = "德润门|e,n,s,w",
      },
    },

    ["东长街|e,n,s,w"] = {
      name = "东长街",
      exits = {
        ["e"] = "浏正街|e,s,w",
        ["n"] = "东长街|n,s,w",
        ["s"] = "橘子园|n",
        ["w"] = "白马巷|e,ne,nw,s,w",
      },
    },

    ["东长街|n,s,w"] = {
      name = "东长街2", -- 去重：原“东长街”
      exits = {
        ["n"] = "正东街|e,ne,s,w",
        ["s"] = "东长街|e,n,s,w",
        ["w"] = "万福街|e,n,w",
      },
    },

    ["九龙派|w"] = {
      name = "九龙派",
      exits = {
        ["w"] = "易家湾|e,n,sw",
      },
    },

    ["二圣庙|e,n,s,w"] = {
      name = "二圣庙",
      exits = {
        ["e"] = "贡院街|e,n,s,w",
        ["n"] = "清泰街|n,s",
        ["s"] = "府正街|e,n,s",
        ["w"] = "小东街|e,w",
      },
    },

    ["云阳门|e,nw,s"] = {
      name = "云阳门",
      exits = {
        ["e"] = "城墙|s,w",
        ["nw"] = "城墙|se,w",
        ["s"] = "学宫街|n,su,w",
      },
    },

    ["俞家巷|e,nw,su,w"] = {
      name = "俞家巷",
      exits = {
        ["e"] = "学宫街|n,su,w",
        ["nw"] = "参将府|se,sw",
        ["su"] = "文星桥|nd,sd",
        ["w"] = "长春街|e,n,ne,s,w",
      },
    },

    ["参将府|se,sw"] = {
      name = "参将府",
      exits = {
        ["se"] = "俞家巷|e,nw,su,w",
        ["sw"] = "长春街|e,n,ne,s,w",
      },
    },

    ["古庆街|n,sw"] = {
      name = "古庆街",
      exits = {
        ["n"] = "浏正街|e,s,w",
        ["sw"] = "永庆街|ne,w",
      },
    },

    ["司马桥|nd,sd"] = {
      name = "司马桥",
      exits = {
        ["nd"] = "学宫街|n,su,w",
        ["sd"] = "风水井|nu,sw",
      },
    },

    ["国相庙|n"] = {
      name = "国相庙",
      exits = {
        ["n"] = "潮宗街|e,n,s,w",
      },
    },

    -- 城墙：大量同名节点，按出现顺序编号去重
    ["城墙|e,n"] = {
      name = "城墙",
      exits = {
        ["e"] = "黄道门|e,n,s,w",
        ["n"] = "德润门|e,n,s,w",
      },
    },

    ["城墙|e,sw"] = {
      name = "城墙2",
      exits = {
        ["e"] = "湘春门|e,n,s,w",
        ["sw"] = "通泰门|e,ne,nu,nw,se,sw,w",
      },
    },

    ["城墙|e,w"] = {
      name = "城墙3",
      exits = {
        ["e"] = "城墙|ne,w",
        ["w"] = "黄道门|e,n,s,w",
      },
    },

    ["城墙|n,s"] = {
      name = "城墙4",
      exits = {
        ["n"] = "驿步门|e,n,s,w",
        ["s"] = "德润门|e,n,s,w",
      },
    },

    ["城墙1|n,s"] = {
      name = "城墙1",
      exits = {
        ["n"] = "城墙|s,w",
        ["s"] = "城墙|n,sw",
      },
    },

    ["城墙|n,se"] = {
      name = "城墙5",
      exits = {
        ["n"] = "小吴门|ne,s,se,w",
        ["se"] = "浏阳门|nw,se,sw,w",
      },
    },

    ["城墙|n,sw"] = {
      name = "城墙6",
      exits = {
        ["n"] = "城墙1|n,s",
        ["sw"] = "小吴门|ne,s,se,w",
      },
    },

    ["城墙|ne,s"] = {
      name = "城墙7",
      exits = {
        ["ne"] = "潮宗门|e,ne,s,sw,w",
        ["s"] = "驿步门|e,n,s,w",
      },
    },

    ["城墙|ne,sw"] = {
      name = "城墙8",
      exits = {
        ["ne"] = "浏阳门|nw,se,sw,w",
        ["sw"] = "城墙|ne,w",
      },
    },

    ["城墙|ne,w"] = {
      name = "城墙9",
      exits = {
        ["ne"] = "城墙|ne,sw",
        ["w"] = "城墙|e,w",
      },
    },

    ["城墙|s,w"] = {
      name = "城墙10",
      exits = {
        ["s"] = "城墙1|n,s",
        ["w"] = "云阳门|e,nw,s",
      },
    },

    ["城墙|se,w"] = {
      name = "城墙11",
      exits = {
        ["se"] = "云阳门|e,nw,s",
        ["w"] = "湘春门|e,n,s,w",
      },
    },

    ["大古道巷|e,s,w"] = {
      name = "大古道巷",
      exits = {
        ["e"] = "永庆街|ne,w",
        ["s"] = "杂货铺|n",
        ["w"] = "黄道街|e,n,s,w",
      },
    },

    ["太平街|e,n,s,w"] = {
      name = "太平街",
      exits = {
        ["e"] = "太平街|e,ne,nw,w",
        ["n"] = "福星街|e,n,s",
        ["s"] = "福胜街|n,s",
        ["w"] = "驿步门|e,n,s,w",
      },
    },

    ["太平街|e,ne,nw,w"] = {
      name = "太平街2", -- 去重：原“太平街”
      exits = {
        ["e"] = "万寿街|e,n,se,w",
        ["ne"] = "药王殿|sw",
        ["w"] = "太平街|e,n,s,w",
        ["nw"] = "永丰仓|se",
      },
    },
["药王殿|sw"] = {
  name = "药王殿",
  exits = {
    ["sw"] = "太平街|e,ne,nw,w",
  },
},    
    ["永丰仓|se"] = {
  name = "永丰仓",
  exits = {
    ["se"] = "太平街|e,ne,nw,w",
  },
},

    ["学宫街|n,su,w"] = {
      name = "学宫街",
      exits = {
        ["n"] = "云阳门|e,nw,s",
        ["su"] = "司马桥|nd,sd",
        ["w"] = "俞家巷|e,nw,su,w",
      },
    },

    ["宠物竞技场|sw,u"] = {
      name = "宠物竞技场",
      exits = {
        ["sw"] = "白马巷|e,ne,nw,s,w",
      },
    },

    ["小东街|e,w"] = {
      name = "小东街",
      exits = {
        ["e"] = "二圣庙|e,n,s,w",
        ["w"] = "福星街|e,n,s",
      },
    },

    ["小吴门|ne,s,se,w"] = {
      name = "小吴门",
      exits = {
        ["ne"] = "城墙|n,sw",
        ["s"] = "城墙|n,se",
        ["se"] = "青石官道|nw,se",
        ["w"] = "正东街|e,ne,s,w",
      },
    },

    ["山路|nu,sd"] = {
      name = "山路",
      exits = {
        ["sd"] = "通泰门|e,ne,nu,nw,se,sw,w",
      },
    },

    ["平安里|s"] = {
      name = "平安里",
      exits = {
        ["s"] = "通泰街|e,n,w",
      },
    },

    ["府正街|e,n,s"] = {
      name = "府正街",
      exits = {
        ["e"] = "长沙府|enter,n,w",
        ["n"] = "二圣庙|e,n,s,w",
        ["s"] = "万福街|e,n,w",
      },
    },

    ["当铺|n"] = {
      name = "当铺",
      exits = {
        ["n"] = "白马巷|e,ne,nw,s,w",
      },
    },

    ["德润门|e,n,s,w"] = {
      name = "德润门",
      exits = {
        ["e"] = "下坡子街|e,n,s,w",
        ["n"] = "城墙|n,s",
        ["s"] = "城墙|e,n",
        ["w"] = "湘江东岸|e,n,se",
      },
    },

    ["文星桥|nd,sd"] = {
      name = "文星桥",
      exits = {
        ["nd"] = "俞家巷|e,nw,su,w",
        ["sd"] = "贡院|nu,s",
      },
    },

    ["易家湾|e,n,sw"] = {
      name = "易家湾",
      exits = {
        ["n"] = "湘江东岸|n,nw,s",
        ["e"] = "九龙派|w",
      },
    },

    ["杂货铺|n"] = {
      name = "杂货铺",
      exits = {
        ["n"] = "大古道巷|e,s,w",
      },
    },

    ["橘子园|n"] = {
      name = "橘子园",
      exits = {
        ["n"] = "东长街|e,n,s,w",
      },
    },

    ["正东街|e,ne,s,w"] = {
      name = "正东街",
      exits = {
        ["e"] = "小吴门|ne,s,se,w",
        ["ne"] = "风水井|nu,sw",
        ["s"] = "东长街|n,s,w",
        ["w"] = "贡院街|e,n,s,w",
      },
    },

    ["永庆街|ne,w"] = {
      name = "永庆街",
      exits = {
        ["ne"] = "古庆街|n,sw",
        ["w"] = "大古道巷|e,s,w",
      },
    },

    ["浏正街|e,s,w"] = {
      name = "浏正街",
      exits = {
        ["e"] = "浏阳门|nw,se,sw,w",
        ["s"] = "古庆街|n,sw",
        ["w"] = "东长街|e,n,s,w",
      },
    },

    ["浏阳门|nw,se,sw,w"] = {
      name = "浏阳门",
      exits = {
        ["nw"] = "城墙|n,se",
        ["se"] = "青石官道|e,nw",
        ["sw"] = "城墙|ne,sw",
        ["w"] = "浏正街|e,s,w",
      },
    },

    ["清泰街|n,s"] = {
      name = "清泰街",
      exits = {
        ["n"] = "长春街|n,s,w",
        ["s"] = "二圣庙|e,n,s,w",
      },
    },

    ["湘春门|e,n,s,w"] = {
      name = "湘春门",
      exits = {
        ["e"] = "城墙|se,w",
        ["n"] = "青石官道|n,ne,s,wu",
        ["s"] = "长春街|e,n,ne,s,w",
        ["w"] = "城墙|e,sw",
      },
    },

    -- 湘江东岸：同名 5 个，编号去重
    ["湘江东岸|e,n,se"] = {
      name = "湘江东岸",
      exits = {
        ["e"] = "德润门|e,n,s,w",
        ["n"] = "湘江渡口|e,ne,s",
        ["se"] = "湘江东岸|nw,se",
      },
    },

    ["湘江东岸|e,sw"] = {
      name = "湘江东岸2",
      exits = {
        ["e"] = "潮宗门|e,ne,s,sw,w",
        ["sw"] = "湘江东岸|ne,sw",
      },
    },

    ["湘江东岸|n,nw,s"] = {
      name = "湘江东岸3",
      exits = {
        ["n"] = "青石官道|n,s",
        ["nw"] = "湘江东岸|nw,se",
        ["s"] = "易家湾|e,n,sw",
      },
    },

    ["湘江东岸|ne,sw"] = {
      name = "湘江东岸4",
      exits = {
        ["ne"] = "湘江东岸|e,sw",
        ["sw"] = "湘江渡口|e,ne,s",
      },
    },

    ["湘江东岸|nw,se"] = {
      name = "湘江东岸5",
      exits = {
        ["nw"] = "湘江东岸|e,n,se",
        ["se"] = "湘江东岸|n,nw,s",
      },
    },

    ["湘江渡口|e,ne,s"] = {
      name = "湘江渡口",
      exits = {
        ["e"] = "驿步门|e,n,s,w",
        ["ne"] = "湘江东岸|ne,sw",
        ["s"] = "湘江东岸|e,n,se",
        ["ride"] = "渡口|n,s,wu",
      },
    },

    ["潮宗街|e,n,s,w"] = {
      name = "潮宗街",
      exits = {
        ["e"] = "长春街|n,s,w",
        ["n"] = "茶馆|s",
        ["s"] = "国相庙|n",
        ["w"] = "潮宗街1|e,n,s,w",
      },
    },

    ["潮宗街1|e,n,s,w"] = {
      name = "潮宗街1",
      exits = {
        ["e"] = "潮宗街|e,n,s,w",
        ["n"] = "青云楼|s",
        ["s"] = "临湘驿|n",
        ["w"] = "潮宗门|e,ne,s,sw,w",
      },
    },

    ["青云楼|s"] = {
      name = "青云楼",
      exits = {
        ["s"] = "潮宗街1|e,n,s,w",
      },
    },

    ["临湘驿|n"] = {
      name = "临湘驿",
      exits = {
        ["n"] = "潮宗街1|e,n,s,w",
      },
    },

    ["潮宗门|e,ne,s,sw,w"] = {
      name = "潮宗门",
      exits = {
        ["e"] = "潮宗街1|e,n,s,w",
        ["ne"] = "通泰门|e,ne,nu,nw,se,sw,w",
        ["s"] = "福星街|e,n,s",
        ["sw"] = "城墙|ne,s",
        ["w"] = "湘江东岸|e,sw",
      },
    },

    ["白马巷|e,ne,nw,s,w"] = {
      name = "白马巷",
      exits = {
        ["e"] = "东长街|e,n,s,w",
        ["ne"] = "宠物竞技场|sw,u",
        ["nw"] = "钱庄|se,sw",
        ["s"] = "当铺|n",
        ["w"] = "走马楼|e,ne,nw,s,w",
      },
    },

    ["福星街|e,n,s"] = {
      name = "福星街",
      exits = {
        ["e"] = "小东街|e,w",
        ["n"] = "潮宗门|e,ne,s,sw,w",
        ["s"] = "太平街|e,n,s,w",
      },
    },

    ["福胜街|n,s"] = {
      name = "福胜街",
      exits = {
        ["n"] = "太平街|e,n,s,w",
        ["s"] = "下坡子街|e,n,s,w",
      },
    },

    ["茶馆|s"] = {
      name = "茶馆",
      exits = {
        ["s"] = "潮宗街|e,n,s,w",
      },
    },

    ["贡院|nu,s"] = {
      name = "贡院",
      exits = {
        ["nu"] = "文星桥|nd,sd",
        ["s"] = "贡院街|e,n,s,w",
      },
    },

    ["贡院街|e,n,s,w"] = {
      name = "贡院街",
      exits = {
        ["e"] = "正东街|e,ne,s,w",
        ["n"] = "贡院|nu,s",
        ["s"] = "长沙府|enter,n,w",
        ["w"] = "二圣庙|e,n,s,w",
      },
    },

    ["走马楼|e,ne,nw,s,w"] = {
      name = "走马楼",
      exits = {
        ["e"] = "白马巷|e,ne,nw,s,w",
        ["ne"] = "钱庄|se,sw",
        ["nw"] = "万寿街|e,n,se,w",
        ["s"] = "黄道街|n,s,w",
        ["w"] = "客店|e,enter"
      },
    },
 ["客店|e,enter"] = {
  name = "客店",
  exits = {
    ["e"] = "走马楼|e,ne,nw,s,w",
    ["enter"] = "里间|out",
  },
},   
["里间|out"] = {
  name = "里间",
  exits = {
    ["out"] = "客店|e,enter",
  },
},

    ["路边井|n"] = {
      name = "路边井",
      exits = {
        ["n"] = "下坡子街|e,n,s,w",
      },
    },

    ["通泰街|e,n,w"] = {
      name = "通泰街",
      exits = {
        ["e"] = "长春街|e,n,ne,s,w",
        ["n"] = "平安里|s",
        ["w"] = "通泰街1|e,n,w",
      },
    },
    ["通泰街1|e,n,w"] = {
      name = "通泰街1",
      exits = {
        ["e"] = "通泰街|e,n,w", -- 原数据如此：e 指向自己
        ["n"] = "龙王宫|enter,s",
        ["w"] = "通泰门|e,ne,nu,nw,se,sw,w",
      },
    },    
["龙王宫|enter,s"] = {
  name = "龙王宫",
  exits = {
    ["enter"] = "霞祖殿|e,out",
    ["s"] = "通泰街1|e,n,w",
  },
},    
["霞祖殿|e,out"] = {
  name = "霞祖殿",
  exits = {
    ["e"] = "玉皇殿|e,w",
    ["out"] = "龙王宫|enter,s",
  },
},
["玉皇殿|e,w"] = {
  name = "玉皇殿",
  exits = {
    ["e"] = "三官殿|w",
    ["w"] = "霞祖殿|e,out",
  },
},
["三官殿|w"] = {
  name = "三官殿",
  exits = {
    ["w"] = "玉皇殿|e,w",
  },
},

    ["通泰门|e,ne,nu,nw,se,sw,w"] = {
      name = "通泰门",
      exits = {
        ["e"] = "通泰街1|e,n,w",
        ["ne"] = "城墙|e,sw",
        ["nu"] = "山路|nu,sd",
        ["nw"] = "黑市|se",
        ["se"] = "马王塘|nw",
        ["sw"] = "潮宗门|e,ne,s,sw,w",
        ["w"] = "通货码头|e",
      },
    },

    ["通货码头|e"] = {
      name = "通货码头",
      exits = {
        ["e"] = "通泰门|e,ne,nu,nw,se,sw,w",
      },
    },

    ["钱庄|se,sw"] = {
      name = "钱庄",
      exits = {
        ["se"] = "白马巷|e,ne,nw,s,w",
        ["sw"] = "走马楼|e,ne,nw,s,w",
      },
    },

    ["长春街|e,n,ne,s,w"] = {
      name = "长春街",
      exits = {
        ["e"] = "俞家巷|e,nw,su,w",
        ["n"] = "湘春门|e,n,s,w",
        ["ne"] = "参将府|se,sw",
        ["s"] = "长春街|n,s,w",
        ["w"] = "通泰街|e,n,w"
      },
    },

    ["长春街|n,s,w"] = {
      name = "长春街2", -- 去重：原“长春街”
      exits = {
        ["n"] = "长春街|e,n,ne,s,w",
        ["s"] = "清泰街|n,s",
        ["w"] = "潮宗街|e,n,s,w",
      },
    },

    ["长沙府|enter,n,w"] = {
      name = "长沙府",
      exits = {
        ["enter"] = "长沙府衙|out",
        ["n"] = "贡院街|e,n,s,w",
        ["w"] = "府正街|e,n,s",
      },
    },

    ["长沙府衙|out"] = {
      name = "长沙府衙",
      exits = {
        ["out"] = "长沙府|enter,n,w",
      },
    },

    -- 青石官道：同名 4 个，编号去重
    ["青石官道|e,nw"] = {
      name = "青石官道",
      exits = {
        ["nw"] = "浏阳门|nw,se,sw,w",
      },
    },

    ["青石官道|n,ne,s,wu"] = {
      name = "青石官道2",
      exits = {
        ["s"] = "湘春门|e,n,s,w",
      },
    },

    ["青石官道|n,s"] = {
      name = "青石官道3",
      exits = {
        ["n"] = "黄道门|e,n,s,w",
        ["s"] = "湘江东岸|n,nw,s",
      },
    },

    ["青石官道|nw,se"] = {
      name = "青石官道4",
      exits = {
        ["nw"] = "小吴门|ne,s,se,w",
      },
    },

    ["风水井|nu,sw"] = {
      name = "风水井",
      exits = {
        ["nu"] = "司马桥|nd,sd",
        ["sw"] = "正东街|e,ne,s,w",
      },
    },

    ["马王塘|nw"] = {
      name = "马王塘",
      exits = {
        ["nw"] = "通泰门|e,ne,nu,nw,se,sw,w",
      },
    },

    ["驿步门|e,n,s,w"] = {
      name = "驿步门",
      exits = {
        ["e"] = "太平街|e,n,s,w",
        ["n"] = "城墙|ne,s",
        ["s"] = "城墙|n,s",
        ["w"] = "湘江渡口|e,ne,s",
      },
    },

    -- 黄道街：同名 2 个，编号去重
    ["黄道街|e,n,s,w"] = {
      name = "黄道街",
      exits = {
        ["e"] = "大古道巷|e,s,w",
        ["n"] = "黄道街|n,s,w",
        ["s"] = "黄道门|e,n,s,w",
        ["w"] = "司狱府|e,enter",
      },
    },
["司狱府|e,enter"] = {
  name = "司狱府",
  exits = {
    ["e"] = "黄道街|e,n,s,w",
  },
},    

    ["黄道街|n,s,w"] = {
      name = "黄道街2", -- 去重：原“黄道街”
      exits = {
        ["n"] = "走马楼|e,ne,nw,s,w",
        ["s"] = "黄道街|e,n,s,w",
        ["w"] = "上坡子街|e,w",
      },
    },

    ["黄道门|e,n,s,w"] = {
      name = "黄道门",
      exits = {
        ["e"] = "城墙|e,w",
        ["n"] = "黄道街|e,n,s,w",
        ["s"] = "青石官道|n,s",
        ["w"] = "城墙|e,n",
      },
    },

    ["黑市|se"] = {
      name = "黑市",
      exits = {
        ["se"] = "通泰门|e,ne,nu,nw,se,sw,w",
      },
    },

    ["书院正门|e,enter,wu"] = {
      name = "书院正门",
      exits = {
        ["e"] = "山路|ed,w",
        ["enter"] = "岳麓书院|e,n,out,w",
        ["wu"] = "山路|ed,nu",
      },
    },

    ["云麓宫|e,enter,ne,w"] = {
      name = "云麓宫",
      exits = {
        ["e"] = "响鼓岭|e,n,s,se,w",
        ["ne"] = "白鹤泉|eu,nd,s,sw",
      },
    },

    ["休息室|w"] = {
      name = "休息室",
      exits = {
        ["w"] = "岳麓书院|e,n,out,w",
      },
    },

    ["后院|nu,s"] = {
      name = "后院",
      exits = {
        ["nu"] = "山间小路|n,sd,wu",
        ["s"] = "岳麓书院|e,n,out,w",
      },
    },

    ["响鼓岭|e,n,s,se,w"] = {
      name = "响鼓岭",
      exits = {
        ["e"] = "麓山寺|eu,ne,w",
        ["n"] = "白鹤泉|eu,nd,s,sw",
        ["s"] = "翊武亭|n,s",
        ["se"] = "爱晚亭|ed,nw",
        ["w"] = "云麓宫|e,enter,ne,w",
      },
    },

    -- 山路：同名多个，编号去重（保留第一个为“山路”）
    ["山路|ed,nu"] = {
      name = "山路2",
      exits = {
        ["ed"] = "书院正门|e,enter,wu",
        ["nu"] = "山门|nu,sd",
      },
    },

    ["山路|ed,w"] = {
      name = "山路3",
      exits = {
        ["w"] = "书院正门|e,enter,wu",
        ["ed"] = "山路|ed,wu",
      },
    },

    ["山路|nw,su"] = {
      name = "山路4",
      exits = {
        ["nw"] = "山路|e,nw,se,w",
        ["su"] = "白鹤泉|eu,nd,s,sw",
      },
    },

    -- 山道：同名 3 个，编号去重
    ["山道|e,wd"] = {
      name = "山道",
      exits = {
        ["e"] = "山道|eu,sw,w",
        ["wd"] = "白鹤泉|eu,nd,s,sw",
      },
    },

    ["山道|eu,sw,w"] = {
      name = "山道2",
      exits = {
        ["eu"] = "禹王碑|sw,wd",
        ["sw"] = "麓山寺|eu,ne,w",
        ["w"] = "山道|e,wd",
      },
    },

    ["山道|ne,s,wd"] = {
      name = "山道3",
      exits = {
        ["ne"] = "禹王碑|sw,wd",
        ["s"] = "山间小路|n,sd,wu",
        ["wd"] = "麓山寺|eu,ne,w",
      },
    },

    ["山门|nu,sd"] = {
      name = "山门",
      exits = {
        ["nu"] = "舍利塔|n,sd",
        ["sd"] = "山路|ed,nu",
      },
    },

    ["山间小路|n,sd,wu"] = {
      name = "山间小路",
      exits = {
        ["n"] = "山道|ne,s,wd",
        ["sd"] = "后院|nu,s",
        ["wu"] = "爱晚亭|ed,nw",
      },
    },

    ["岳麓书院|e,n,out,w"] = {
      name = "岳麓书院",
      exits = {
        ["e"] = "休息室|w",
        ["n"] = "后院|nu,s",
        ["out"] = "书院正门|e,enter,wu",
        ["w"] = "食堂|e",
      },
    },

    ["爱晚亭|ed,nw"] = {
      name = "爱晚亭",
      exits = {
        ["ed"] = "山间小路|n,sd,wu",
        ["nw"] = "响鼓岭|e,n,s,se,w",
      },
    },

    ["白鹤泉|eu,nd,s,sw"] = {
      name = "白鹤泉",
      exits = {
        ["eu"] = "山道|e,wd",
        ["nd"] = "山路|nw,su",
        ["s"] = "响鼓岭|e,n,s,se,w",
        ["sw"] = "云麓宫|e,enter,ne,w",
      },
    },

    ["禹王碑|sw,wd"] = {
      name = "禹王碑",
      exits = {
        ["sw"] = "山道|ne,s,wd",
        ["wd"] = "山道|eu,sw,w",
      },
    },

    ["翊武亭|n,s"] = {
      name = "翊武亭",
      exits = {
        ["n"] = "响鼓岭|e,n,s,se,w",
        ["s"] = "舍利塔|n,sd",
      },
    },

    ["舍利塔|n,sd"] = {
      name = "舍利塔",
      exits = {
        ["n"] = "翊武亭|n,s",
        ["sd"] = "山门|nu,sd",
      },
    },

    ["食堂|e"] = {
      name = "食堂",
      exits = {
        ["e"] = "岳麓书院|e,n,out,w",
      },
    },

    ["麓山寺|eu,ne,w"] = {
      name = "麓山寺",
      exits = {
        ["eu"] = "山道|ne,s,wd",
        ["ne"] = "山道|eu,sw,w",
        ["w"] = "响鼓岭|e,n,s,se,w",
      },
    },

    ["山路|ed,wu"] = {
      name = "山路5",
      exits = {
        ["ed"] = "渡口|n,s,wu",
        ["wu"] = "山路|ed,w",
      },
    },

    ["渡口|n,s,wu"] = {
      name = "渡口",
      exits = {
        ["n"] = "湘江西岸|n,s",
        ["s"] = "湘江西岸|n",
        ["wu"] = "山路|ed,wu",
        ["ride"] = "湘江渡口|e,ne,s"
      },
    },

    -- 湘江西岸：同名多个，编号去重（含“湘江西岸1|nw,s”）
    ["湘江西岸|n"] = {
      name = "湘江西岸",
      exits = {
        ["n"] = "渡口|n,s,wu",
      },
    },

    ["湘江西岸|n,s"] = {
      name = "湘江西岸2",
      exits = {
        ["n"] = "湘江西岸|nw,s",
        ["s"] = "渡口|n,s,wu",
      },
    },

    ["湘江西岸|n,se"] = {
      name = "湘江西岸3",
      exits = {
        ["n"] = "湘江西岸1|nw,s",
        ["se"] = "湘江西岸|nw,s",
      },
    },

    ["湘江西岸1|nw,s"] = {
      name = "湘江西岸4",
      exits = {
        ["nw"] = "土路|nw,se",
        ["s"] = "湘江西岸|n,se",
      },
    },

    ["湘江西岸|nw,s"] = {
      name = "湘江西岸5",
      exits = {
        ["nw"] = "湘江西岸|n,se",
        ["s"] = "湘江西岸|n,s",
      },
    },

    -- 土路：同名 2 个，编号去重
    ["土路|nw,se"] = {
      name = "土路",
      exits = {
        ["nw"] = "军山铺|se,w",
        ["se"] = "湘江西岸1|nw,s",
      },
    },

    ["军山铺|se,w"] = {
      name = "军山铺",
      exits = {
        ["se"] = "土路|nw,se",
        ["w"] = "土路|e,w",
      },
    },

    ["土路|e,w"] = {
      name = "土路2", -- 去重：原“土路”
      exits = {
        ["e"] = "军山铺|se,w",
        ["w"] = "山路|e,nw,se,w",
      },
    },

    ["山路|e,nw,se,w"] = {
      name = "山路6",
      exits = {
        ["e"] = "土路|e,w",
        ["se"] = "山路|nw,su",
      },
    },

  }, -- mapNodes 结束

  mapAliases = {
    ["万寿宫"] = "wsg",
    ["万寿街"] = "wsj",
    ["万福街"] = "wfj",
    ["上坡子街"] = "spzj",
    ["下坡子街"] = "xpzj",

    ["东长街"] = "dcj",
    ["东长街2"] = "dcj2",      -- 新增

    ["九龙派"] = "jlp",
    ["二圣庙"] = "esm",
    ["云阳门"] = "yym",
    ["俞家巷"] = "yjx",
    ["参将府"] = "cjf",
    ["古庆街"] = "gqj",
    ["司马桥"] = "smq",
    ["国相庙"] = "gxm",

    -- 城墙（含编号）
    ["城墙"] = "cq",
    ["城墙1"] = "cq1",
    ["城墙2"] = "cq2",
    ["城墙3"] = "cq3",
    ["城墙4"] = "cq4",
    ["城墙5"] = "cq5",
    ["城墙6"] = "cq6",
    ["城墙7"] = "cq7",
    ["城墙8"] = "cq8",
    ["城墙9"] = "cq9",
    ["城墙10"] = "cq10",
    ["城墙11"] = "cq11",

    ["大古道巷"] = "dgdx",
    ["太平街"] = "tpj",
    ["太平街2"] = "tpj2",      -- 新增
    ["学宫街"] = "xgj",

    ["宠物竞技场"] = "cwjjc",
    ["小东街"] = "xdj",
    ["小吴门"] = "xwm",

    -- 山路（含编号）
    ["山路"] = "sl",
    ["山路2"] = "sl2",
    ["山路3"] = "sl3",
    ["山路4"] = "sl4",
    ["山路5"] = "sl5",
    ["山路6"] = "sl6",

    -- 山道（含编号）
    ["山道"] = "sdao",
    ["山道2"] = "sdao2",
    ["山道3"] = "sdao3",

    ["山门"] = "sm",
    ["山间小路"] = "sjxl",

    ["平安里"] = "pal",
    ["府正街"] = "fzj",
    ["当铺"] = "dp",
    ["德润门"] = "drm",
    ["文星桥"] = "wxq",
    ["易家湾"] = "yjw",
    ["杂货铺"] = "zhp",
    ["橘子园"] = "jzy",
    ["正东街"] = "zdj",
    ["永庆街"] = "yqj",
    ["浏正街"] = "lzj",
    ["浏阳门"] = "lym",
    ["清泰街"] = "qtj",
    ["湘春门"] = "xcm",

    -- 湘江东岸（含编号）
    ["湘江东岸"] = "xjda",
    ["湘江东岸2"] = "xjda2",
    ["湘江东岸3"] = "xjda3",
    ["湘江东岸4"] = "xjda4",
    ["湘江东岸5"] = "xjda5",

    ["湘江渡口"] = "xjdk",

    -- 湘江西岸（含编号）
    ["湘江西岸"] = "xjxa",
    ["湘江西岸2"] = "xjxa2",
    ["湘江西岸3"] = "xjxa3",
    ["湘江西岸4"] = "xjxa4",
    ["湘江西岸5"] = "xjxa5",

    ["潮宗街"] = "czj",
    ["潮宗街1"] = "czj1",
    ["青云楼"] = "qyl",
    ["临湘驿"] = "lxy",
    ["潮宗门"] = "czm",

    ["白马巷"] = "bmx",
    ["福星街"] = "fxj",
    ["福胜街"] = "fsj",
    ["茶馆"] = "cg",
    ["贡院"] = "gy",
    ["贡院街"] = "gyj",
    ["走马楼"] = "origin",
    ["路边井"] = "lbj",

    ["通泰街"] = "ttj",
    ["通泰门"] = "ttm",
    ["通货码头"] = "thmt",
    ["钱庄"] = "qz",

    ["长春街"] = "ccj",
    ["长春街2"] = "ccj2",      -- 新增

    ["长沙府"] = "csf",
    ["长沙府衙"] = "csfy",     -- 新增

    -- 青石官道（含编号）
    ["青石官道"] = "qsgd",
    ["青石官道2"] = "qsgd2",
    ["青石官道3"] = "qsgd3",
    ["青石官道4"] = "qsgd4",

    -- 风水井：原表里和“福胜街”别名冲突，这里修正为 fsj2
    ["风水井"] = "fsj2",

    ["马王塘"] = "mwt",
    ["驿步门"] = "ybm",

    ["黄道街"] = "hdj",
    ["黄道街2"] = "hdj2",      -- 新增
    ["黄道门"] = "hdm",
    ["黑市"] = "hs",

    -- 岳麓书院片区补齐
    ["书院正门"] = "syzm",
    ["岳麓书院"] = "ylsy",
    ["休息室"] = "xxs",
    ["后院"] = "hy",
    ["响鼓岭"] = "xgl",
    ["爱晚亭"] = "awt",
    ["白鹤泉"] = "bhq",
    ["禹王碑"] = "ywb",
    ["翊武亭"] = "ywt",
    ["舍利塔"] = "slt",
    ["食堂"] = "st",
    ["麓山寺"] = "lss",
    ["云麓宫"] = "ylg",

    -- 渡口/军山铺/土路2
    ["渡口"] = "dk",
    ["土路"] = "tl",
    ["土路2"] = "tl2",
    ["军山铺"] = "jsp",
  }

} -- mapper.maps["csha"] 结束
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>南昌 - nc</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["nc"]= {

  region = {
    key  = "nc",      -- 区域代号，用在 goto wx.xxx 里
    name = "南昌",    -- 纯注释/显示用
  },
mapNodes = {
  ["东大街|e,n,s,w"] = {
    name = "东大街",
    exits = {
      ["e"] = "南昌东门|e,n,s,w",
      ["n"] = "白家|s",
      ["s"] = "宁王府大门|enter,n",
      ["w"] = "城中心|e,n,s,w",
    },
  },
  ["中庭|e,out,w"] = {
    name = "中庭",
    exits = {
      ["e"] = "马房|w",
      ["out"] = "宁王府大门|enter,n",
      ["w"] = "门房|e",
    },
  },
  ["偃月楼|e,enter"] = {
    name = "偃月楼",
    exits = {
      ["e"] = "北大街|e,n,s,w",
      ["enter"] = "客店内室|out",
    },
  },
  ["北大街|e,n,s,w"] = {
    name = "北大街",
    exits = {
      ["e"] = "飞虎镖局|w",
      ["n"] = "南昌北门|e,n,s,w",
      ["s"] = "城中心|e,n,s,w",
      ["w"] = "偃月楼|e,enter",
    },
  },
  ["南大街|e,n,s,w"] = {
    name = "南大街",
    exits = {
      ["e"] = "月记银号|w",
      ["n"] = "城中心|e,n,s,w",
      ["s"] = "南昌南门|e,n,s,w",
      ["w"] = "当铺|e",
    },
  },
  ["南昌东门|e,n,s,w"] = {
    name = "南昌东门",
    exits = {
      ["w"] = "东大街|e,n,s,w",
      ["e"] = "城东山路|eu,w",
    },
  },

  -- 城东山路（同名 2 个）=&gt; 只编号 name：城东山路1/2
  ["城东山路|eu,w"] = {
    name = "城东山路1",
    exits = {
      ["eu"] = "城东山路|wd",
      ["w"] = "南昌东门|e,n,s,w",
    },
  },
  ["城东山路|wd"] = {
    name = "城东山路2",
    exits = {
      ["wd"] = "城东山路|eu,w",
    },
  },
["山路|nw,s"] = {
  name = "山路4",
  exits = {
    ["s"] = "南昌北门|e,n,s,w",
  },
},
  ["南昌北门|e,n,s,w"] = {
    name = "南昌北门",
    exits = {
      ["n"] = "山路|nw,s",
      ["s"] = "北大街|e,n,s,w",
    },
  },
  ["南昌南门|e,n,s,w"] = {
    name = "南昌南门",
    exits = {
      ["n"] = "南大街|e,n,s,w",
      ["s"] = "青石官道|n,s",
    },
  },

  -- 青石官道（同名 2 个）=&gt; 青石官道1/2
  ["青石官道|n,s"] = {
    name = "青石官道1",
    exits = {
      ["n"] = "南昌南门|e,n,s,w",
      ["s"] = "山路|n,se,sw",
    },
  },

  -- 山路（同名 3 个）=&gt; 山路1/2/3
  ["山路|n,se,sw"] = {
    name = "山路1",
    exits = {
      ["n"] = "青石官道|n,s",
      ["se"] = "山路|neu,nw,s",
    },
  },
  ["山路|neu,nw,s"] = {
    name = "山路2",
    exits = {
      ["neu"] = "栖贤山|e,swd",
      ["nw"] = "山路|n,se,sw",
      ["s"] = "山路|n,se",
    },
  },

  ["栖贤山|e,swd"] = {
    name = "栖贤山",
    exits = {
      ["e"] = "金刚寺|w",
      ["swd"] = "山路|neu,nw,s",
    },
  },
  ["金刚寺|w"] = {
    name = "金刚寺",
    exits = {
      ["w"] = "栖贤山|e,swd",
    },
  },
  ["山路|n,se"] = {
    name = "山路3",
    exits = {
      ["n"] = "山路|neu,nw,s",
    },
  },

  ["南昌西门|e,n,s,w"] = {
    name = "南昌西门",
    exits = {
      ["e"] = "西大街|e,n,s,w",
      ["w"] = "青石官道|e,wu",
    },
  },

  ["青石官道|e,wu"] = {
    name = "青石官道2",
    exits = {
      ["e"] = "南昌西门|e,n,s,w",
      ["wu"] = "城西山路|ed,nw,wu",
    },
  },

  -- 城西山路（同名 2 个）=&gt; 城西山路1/2
  ["城西山路|ed,nw,wu"] = {
    name = "城西山路1",
    exits = {
      ["ed"] = "青石官道|e,wu",
      ["wu"] = "城西山路|ed,nu,w",
    },
  },
  ["城西山路|ed,nu,w"] = {
    name = "城西山路2",
    exits = {
      ["ed"] = "城西山路|ed,nw,wu",
      ["nu"] = "古庙大门|enter,sd",
    },
  },

  ["古庙大门|enter,sd"] = {
    name = "古庙大门",
    exits = {
      ["enter"] = "残破佛堂|e,n,out,w",
      ["sd"] = "城西山路|ed,nu,w",
    },
  },
  ["残破佛堂|e,n,out,w"] = {
    name = "残破佛堂",
    exits = {
      ["e"] = "客房|w",
      ["n"] = "古井|s",
      ["out"] = "古庙大门|enter,sd",
      ["w"] = "破屋|e",
    },
  },
  ["古井|s"] = {
    name = "古井",
    exits = {
      ["s"] = "残破佛堂|e,n,out,w",
    },
  },
  ["破屋|e"] = {
    name = "破屋",
    exits = {
      ["e"] = "残破佛堂|e,n,out,w",
    },
  },
  ["客房|w"] = {
    name = "客房",
    exits = {
      ["w"] = "残破佛堂|e,n,out,w",
    },
  },

  ["城中心|e,n,s,w"] = {
    name = "城中心",
    exits = {
      ["e"] = "东大街|e,n,s,w",
      ["n"] = "北大街|e,n,s,w",
      ["s"] = "南大街|e,n,s,w",
      ["w"] = "西大街|e,n,s,w",
    },
  },
  ["宁王府大门|enter,n"] = {
    name = "宁王府大门",
    exits = {
      ["enter"] = "中庭|e,out,w",
      ["n"] = "东大街|e,n,s,w",
    },
  },
  ["客店内室|out"] = {
    name = "客店内室",
    exits = {
      ["out"] = "偃月楼|e,enter",
    },
  },
  ["对月居|n"] = {
    name = "对月居",
    exits = {
      ["n"] = "西大街|e,n,s,w",
    },
  },
  ["当铺|e"] = {
    name = "当铺",
    exits = {
      ["e"] = "南大街|e,n,s,w",
    },
  },
  ["月记银号|w"] = {
    name = "月记银号",
    exits = {
      ["w"] = "南大街|e,n,s,w",
    },
  },
  ["白家|s"] = {
    name = "白家",
    exits = {
      ["s"] = "东大街|e,n,s,w",
    },
  },
  ["西大街|e,n,s,w"] = {
    name = "西大街",
    exits = {
      ["e"] = "城中心|e,n,s,w",
      ["n"] = "计氏马车总行|s",
      ["s"] = "对月居|n",
      ["w"] = "南昌西门|e,n,s,w",
    },
  },
  ["计氏马车总行|s"] = {
    name = "计氏马车总行",
    exits = {
      ["s"] = "西大街|e,n,s,w",
    },
  },
  ["门房|e"] = {
    name = "门房",
    exits = {
      ["e"] = "中庭|e,out,w",
    },
  },
  ["飞虎镖局|w"] = {
    name = "飞虎镖局",
    exits = {
      ["w"] = "北大街|e,n,s,w",
    },
  },
  ["马房|w"] = {
    name = "马房",
    exits = {
      ["w"] = "中庭|e,out,w",
    },
  },
}
}

mapper.maps["nc"].mapAliases = {
  ["东大街"]       = "ddj",
  ["中庭"]         = "zt",
  ["偃月楼"]       = "yyl",
  ["北大街"]       = "bdj",
  ["南大街"]       = "ndj",
  ["南昌东门"]     = "ncdm",
  ["南昌北门"]     = "ncbm",
  ["南昌南门"]     = "ncnm",
  ["南昌西门"]     = "ncxm",
  ["城中心"]       = "origin",
  ["宁王府大门"]   = "nwfdm",
  ["客店内室"]     = "kdns",
  ["对月居"]       = "dyj",
  ["当铺"]         = "dp",
  ["月记银号"]     = "yjyh",
  ["白家"]         = "bj",
  ["西大街"]       = "xdj",
  ["计氏马车总行"] = "mch",
  ["门房"]         = "mf",
  ["飞虎镖局"]     = "fhbj",
  ["马房"]         = "mafang",

  -- 新增 + 重名编号后的别名补齐
  ["城东山路1"]    = "cdsl1",
  ["城东山路2"]    = "cdsl2",

  ["青石官道1"]    = "qsgd1",
  ["青石官道2"]    = "qsgd2",

  ["山路1"]        = "sl1",
  ["山路2"]        = "sl2",
  ["山路3"]        = "sl3",
  ["山路4"]        = "sl4",

  ["栖贤山"]       = "qxs",
  ["金刚寺"]       = "jgs",

  ["城西山路1"]    = "cxsl1",
  ["城西山路2"]    = "cxsl2",

  ["古庙大门"]     = "gmdm",
  ["残破佛堂"]     = "cpft",
  ["古井"]         = "gj",
  ["破屋"]         = "pw",
  ["客房"]         = "kf",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>袁州 - yzhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["yzhou"]= {

  region = {
    key  = "yzhou",      -- 区域代号，用在 goto wx.xxx 里
    name = "袁州",    -- 纯注释/显示用
  },
mapNodes = {
  ["东大街|eu,n,s,w"] = {
    name = "东大街",
    exits = {
      ["eu"] = "宜春台|ed,s,u,wd",
      ["n"] = "客店|s,u",
      ["s"] = "酒楼|n",
      ["w"] = "鼓楼|e,n,s,w",
    },
  },
  ["东门|e,wu"] = {
    name = "东门",
    exits = {
      ["e"] = "官道|sw,w",
      ["wu"] = "宜春台|ed,s,u,wd",
    },
  },
  ["云谷飞瀑|su"] = {
    name = "云谷飞瀑",
    exits = {
      ["su"] = "明月山|nd,se,wd",
    },
  },
  ["仰山行祠|d"] = {
    name = "仰山行祠",
    exits = {
      ["d"] = "宜春台|ed,s,u,wd",
    },
  },
  ["兵营|n"] = {
    name = "兵营",
    exits = {
      ["n"] = "宜春台|ed,s,u,wd",
    },
  },
  ["凤凰山|nd,sd"] = {
    name = "凤凰山",
    exits = {
      ["nd"] = "山脚|ne,su",
      ["sd"] = "清沥江畔|e,nu,se",
    },
  },
  ["刺青店|e"] = {
    name = "刺青店",
    exits = {
      ["e"] = "小巷|n,sw,w",
    },
  },
  ["北门|n,s"] = {
    name = "北门",
    exits = {
      ["n"] = "袁水南岸|s",
      ["s"] = "鼓楼|e,n,s,w",
    },
  },
  ["南大街|e,n,s"] = {
    name = "南大街",
    exits = {
      ["e"] = "珠泉|su,w",
      ["n"] = "鼓楼|e,n,s,w",
      ["s"] = "小巷|n,sw,w",
    },
  },
  ["南门|n,se,sw"] = {
    name = "南门",
    exits = {
      ["n"] = "南门大街|e,nu,s,w",
      ["se"] = "枫田镇|nw,su",
      ["sw"] = "小路|ne,wu",
    },
  },
  ["南门大街|e,nu,s,w"] = {
    name = "南门大街",
    exits = {
      ["e"] = "药铺|w",
      ["nu"] = "石拱桥|nd,sd",
      ["s"] = "南门|n,se,sw",
      ["w"] = "打铁铺|e,ne",
    },
  },
  ["周家|s"] = {
    name = "周家",
    exits = {
      ["s"] = "西大街|e,n,s,w",
    },
  },
  ["塘源冲|n,se"] = {
    name = "塘源冲",
    exits = {
      ["n"] = "小渡口|s",
      ["se"] = "西门|e,nw,sw",
    },
  },
  ["官道|sw,w"] = {
    name = "官道",
    exits = {
      ["sw"] = "钤山镇|ne,su",
      ["w"] = "东门|e,wu",
    },
  },
  ["宜春台|ed,s,u,wd"] = {
    name = "宜春台",
    exits = {
      ["ed"] = "东门|e,wu",
      ["s"] = "兵营|n",
      ["u"] = "仰山行祠|d",
      ["wd"] = "东大街|eu,n,s,w",
    },
  },
  ["客店|s,u"] = {
    name = "客店",
    exits = {
      ["s"] = "东大街|eu,n,s,w",
      ["u"] = "客店二楼|d",
    },
  },
  ["客店二楼|d"] = {
    name = "客店二楼",
    exits = {
      ["d"] = "客店|s,u",
    },
  },
  ["小巷|n,sw,w"] = {
    name = "小巷",
    exits = {
      ["n"] = "南大街|e,n,s",
      ["sw"] = "打铁铺|e,ne",
      ["w"] = "刺青店|e",
    },
  },
  ["小渡口|s"] = {
    name = "小渡口",
    exits = {
      ["s"] = "塘源冲|n,se",
    },
  },
  ["小路|ne,wu"] = {
    name = "小路",
    exits = {
      ["ne"] = "南门|n,se,sw",
      ["wu"] = "山坡|ed,nw",
    },
  },
  ["山坡|ed,nw"] = {
    name = "山坡",
    exits = {
      ["ed"] = "小路|ne,wu",
      ["nw"] = "明月山|nd,se,wd",
    },
  },
  ["山脚|ne,su"] = {
    name = "山脚",
    exits = {
      ["ne"] = "西门|e,nw,sw",
      ["su"] = "凤凰山|nd,sd",
    },
  },

  -- 山路（同名节点）=&gt; 只对 name 编号：山路1/2/3/4
  ["山路|nw,se"] = {
    name = "山路1",
    exits = {
      ["nw"] = "清沥江畔|e,nu,se",
      ["se"] = "青云栈道|eu,nw",
    },
  },

  ["打铁铺|e,ne"] = {
    name = "打铁铺",
    exits = {
      ["e"] = "南门大街|e,nu,s,w",
      ["ne"] = "小巷|n,sw,w",
    },
  },
  ["明月山|nd,se,wd"] = {
    name = "明月山",
    exits = {
      ["nd"] = "云谷飞瀑|su",
      ["se"] = "山坡|ed,nw",
      ["wd"] = "青云栈道|eu,nw",
    },
  },
  ["枫田镇|nw,su"] = {
    name = "枫田镇",
    exits = {
      ["nw"] = "南门|n,se,sw",
    },
  },
  ["清沥江畔|e,nu,se"] = {
    name = "清沥江畔",
    exits = {
      ["e"] = "渔家|w",
      ["nu"] = "凤凰山|nd,sd",
      ["se"] = "山路|nw,se",
    },
  },
  ["渔家|w"] = {
    name = "渔家",
    exits = {
      ["w"] = "清沥江畔|e,nu,se",
    },
  },
  ["珠泉|su,w"] = {
    name = "珠泉",
    exits = {
      ["su"] = "石拱桥|nd,sd",
      ["w"] = "南大街|e,n,s",
    },
  },
  ["石拱桥|nd,sd"] = {
    name = "石拱桥",
    exits = {
      ["nd"] = "珠泉|su,w",
      ["sd"] = "南门大街|e,nu,s,w",
    },
  },
  ["药铺|w"] = {
    name = "药铺",
    exits = {
      ["w"] = "南门大街|e,nu,s,w",
    },
  },
  ["袁州镖局|n"] = {
    name = "袁州镖局",
    exits = {
      ["n"] = "西大街|e,n,s,w",
    },
  },
  ["袁水南岸|s"] = {
    name = "袁水南岸",
    exits = {
      ["s"] = "北门|n,s",
      ["ride"] = "袁水北岸|ne,nw,sw",
    },
  },
  ["西大街|e,n,s,w"] = {
    name = "西大街",
    exits = {
      ["e"] = "鼓楼|e,n,s,w",
      ["n"] = "周家|s",
      ["s"] = "袁州镖局|n",
      ["w"] = "西门|e,nw,sw",
    },
  },
  ["西门|e,nw,sw"] = {
    name = "西门",
    exits = {
      ["e"] = "西大街|e,n,s,w",
      ["nw"] = "塘源冲|n,se",
      ["sw"] = "山脚|ne,su",
    },
  },
  ["酒楼|n"] = {
    name = "酒楼",
    exits = {
      ["n"] = "东大街|eu,n,s,w",
    },
  },
  ["钤山镇|ne,su"] = {
    name = "钤山镇",
    exits = {
      ["ne"] = "官道|sw,w",
      ["su"] = "雷打坡|nd,se,wu",
    },
  },
  ["雷打坡|nd,se,wu"] = {
    name = "雷打坡",
    exits = {
      ["nd"] = "钤山镇|ne,su",
      ["wu"] = "武华山|ed",
      ["se"] = "山路|nw,se,su",
    },
  },
  ["山路|nw,se,su"] = {
    name = "山路2",
    exits = {
      ["nw"] = "雷打坡|nd,se,wu",
      ["su"] = "山路|nd,se",
    },
  },
  ["山路|nd,se"] = {
    name = "山路3",
    exits = {
      ["nd"] = "山路|nw,se,su",
    },
  },
  ["武华山|ed"] = {
    name = "武华山",
    exits = {
      ["ed"] = "雷打坡|nd,se,wu",
    },
  },
  ["青云栈道|eu,nw"] = {
    name = "青云栈道",
    exits = {
      ["eu"] = "明月山|nd,se,wd",
      ["nw"] = "山路|nw,se",
    },
  },
  ["袁水北岸|ne,nw,sw"] = {
    name = "袁水北岸",
    exits = {
      ["ne"] = "山间小路|e,se,sw",
      ["nw"] = "山路|eu,n,se,wu",
      ["ride"] = "袁水南岸|s"
    },
  },
  ["山路|eu,n,se,wu"] = {
    name = "山路4",
    exits = {
      ["eu"] = "高士亭|eu,wd",
      ["se"] = "袁水北岸|ne,nw,sw",
      ["wu"] = "望家尖|ed",
    },
  },
  ["高士亭|eu,wd"] = {
    name = "高士亭",
    exits = {
      ["eu"] = "袁山山顶|wd",
      ["wd"] = "山路|eu,n,se,wu",
    },
  },
  ["袁山山顶|wd"] = {
    name = "袁山山顶",
    exits = {
      ["wd"] = "高士亭|eu,wd",
    },
  },
  ["望家尖|ed"] = {
    name = "望家尖",
    exits = {
      ["ed"] = "山路|eu,n,se,wu",
    },
  },
  ["山间小路|e,se,sw"] = {
    name = "山间小路",
    exits = {
      ["sw"] = "袁水北岸|ne,nw,sw",
    },
  },
  ["鼓楼|e,n,s,w"] = {
    name = "鼓楼",
    exits = {
      ["e"] = "东大街|eu,n,s,w",
      ["n"] = "北门|n,s",
      ["s"] = "南大街|e,n,s",
      ["w"] = "西大街|e,n,s,w",
    },
  },
}
}

mapper.maps["yzhou"].mapAliases = {
  ["东大街"]     = "ddj",
  ["东门"]       = "dm",
  ["云谷飞瀑"]   = "ygfp",
  ["仰山行祠"]   = "yshc",
  ["兵营"]       = "by",
  ["凤凰山"]     = "fhs",
  ["刺青店"]     = "cqd",
  ["北门"]       = "bm",
  ["南大街"]     = "ndj",
  ["南门"]       = "nm",
  ["南门大街"]   = "nmdj",
  ["周家"]       = "zj",
  ["塘源冲"]     = "tyc",
  ["官道"]       = "gd",
  ["宜春台"]     = "yct",
  ["客店"]       = "kd",
  ["客店二楼"]   = "kdel",
  ["小巷"]       = "xx",
  ["小渡口"]     = "xdk",
  ["小路"]       = "xl",
  ["山坡"]       = "sp",
  ["山脚"]       = "sj",

  -- 重名编号后的“山路”
  ["山路1"]      = "sl1",
  ["山路2"]      = "sl2",
  ["山路3"]      = "sl3",
  ["山路4"]      = "sl4",

  ["打铁铺"]     = "dtp",
  ["明月山"]     = "mys",
  ["枫田镇"]     = "ftz",
  ["清沥江畔"]   = "qljp",
  ["渔家"]       = "yj",
  ["珠泉"]       = "zq",
  ["石拱桥"]     = "sgq",
  ["药铺"]       = "yp",
  ["袁州镖局"]   = "yzbj",
  ["袁水南岸"]   = "ysna",
  ["西大街"]     = "xdj",
  ["西门"]       = "xm",
  ["酒楼"]       = "jl",
  ["钤山镇"]     = "qsz",
  ["雷打坡"]     = "ldp",
  ["武华山"]     = "whs",
  ["青云栈道"]   = "qyzd",
  ["袁水北岸"]   = "ysba",
  ["高士亭"]     = "gst",
  ["袁山山顶"]   = "yssd",
  ["望家尖"]     = "wjj",
  ["山间小路"]   = "sjxl",

  -- ★ 区域原点（用于 back 命令）
  ["鼓楼"]       = "origin",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>庐陵 - lling</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["lling"]= {

  region = {
    key  = "lling",      -- 区域代号，用在 goto wx.xxx 里
    name = "庐陵",    -- 纯注释/显示用
  },
mapNodes = {
  ["上房|out"] = {
    name = "上房",
    exits = {
      ["out"] = "客栈|enter,sw",
    },
  },
  ["上谕亭|se"] = {
    name = "上谕亭",
    exits = {
      ["se"] = "南门大道|e,ne,nw,s,w",
    },
  },

  -- 东巷（同名节点）=&gt; 东巷 / 东巷1 / 东巷2
  ["东巷|ne,nw,se"] = {
    name = "东巷",
    exits = {
      ["ne"] = "参将署|sw",
      ["nw"] = "府前大街|se,w",
      ["se"] = "东巷|ne,nw,se,sw",
    },
  },
  ["东巷|ne,nw,se,sw"] = {
    name = "东巷1",
    exits = {
      ["ne"] = "马王庙|sw",
      ["nw"] = "东巷|ne,nw,se",
      ["se"] = "东巷|nw,s",
      ["sw"] = "城隍庙|ne,sw",
    },
  },
  ["东巷|nw,s"] = {
    name = "东巷2",
    exits = {
      ["nw"] = "东巷|ne,nw,se,sw",
      ["s"] = "迎恩门|e,n,ne,s,sw,w",
    },
  },

  -- 偏厅（同名节点）=&gt; 偏厅 / 偏厅1
  ["偏厅|e"] = {
    name = "偏厅",
    exits = {
      ["e"] = "大厅|e,out,se,w",
    },
  },
  ["偏厅|w"] = {
    name = "偏厅1",
    exits = {
      ["w"] = "大厅|e,out,se,w",
    },
  },

  -- 南街（同名节点）=&gt; 南街 / 南街1 / 南街2 / 南街3 / 南街4
  ["南街|e,n,w"] = {
    name = "南街",
    exits = {
      ["e"] = "南街|e,w",
      ["n"] = "马草巷|n,nw,s,w",
      ["w"] = "南街|e,nw",
    },
  },
  ["南街|e,nw"] = {
    name = "南街1",
    exits = {
      ["e"] = "南街|e,n,w",
      ["nw"] = "南街|n,ne,nw,se,sw",
    },
  },
  ["南街|e,w"] = {
    name = "南街2",
    exits = {
      ["e"] = "赣江江畔|e,n,w",
      ["w"] = "南街|e,n,w",
    },
  },
  ["南街|n,ne,nw,se,sw"] = {
    name = "南街3",
    exits = {
      ["n"] = "后街|nu,s,se",
      ["ne"] = "杂货铺|e,nw,sw",
      ["nw"] = "南街|n,se",
      ["se"] = "南街|e,nw",
      ["sw"] = "神冈山|ne,u",
    },
  },
  ["南街|n,se"] = {
    name = "南街4",
    exits = {
      ["n"] = "普渡寺门|enter,n,s",
      ["se"] = "南街|n,ne,nw,se,sw",
    },
  },

  -- 南门大道（同名节点）=&gt; 南门大道 / 南门大道1 / 南门大道2
  ["南门大道|e,n,ne,s"] = {
    name = "南门大道",
    exits = {
      ["e"] = "南门大道|e,n,ne,w",
      ["n"] = "西门大街|ne,s,w",
      ["ne"] = "客栈|enter,sw",
      ["s"] = "魁聚门|e,n,s,w",
    },
  },
  ["南门大道|e,n,ne,w"] = {
    name = "南门大道1",
    exits = {
      ["e"] = "南门大道|e,ne,nw,s,w",
      ["n"] = "钱庄|s",
      ["ne"] = "后门|nw,sw",
      ["w"] = "南门大道|e,n,ne,s",
    },
  },
  ["南门大道|e,ne,nw,s,w"] = {
    name = "南门大道2",
    exits = {
      ["e"] = "迎恩门|e,n,ne,s,sw,w",
      ["ne"] = "城隍庙|ne,sw",
      ["nw"] = "上谕亭|se",
      ["s"] = "焕文门|e,n,s,w",
      ["w"] = "南门大道|e,n,ne,w",
    },
  },

  ["参将署|sw"] = {
    name = "参将署",
    exits = {
      ["sw"] = "东巷|ne,nw,se",
    },
  },
  ["古灵泉|e,nu,w"] = {
    name = "古灵泉",
    exits = {
      ["e"] = "灵泉寺|se,w",
      ["nu"] = "螺子山|sd",
      ["w"] = "螺子江畔|e,sw",
    },
  },
  ["吉水|n,sw"] = {
    name = "吉水",
    exits = {
      ["sw"] = "赣江西岸|ne,nw,s",
    },
  },
  ["后街|nu,s,se"] = {
    name = "后街",
    exits = {
      ["nu"] = "铁佛桥|nd,sd",
      ["s"] = "南街|n,ne,nw,se,sw",
      ["se"] = "杂货铺|e,nw,sw",
    },
  },
  ["后门|nw,sw"] = {
    name = "后门",
    exits = {
      ["nw"] = "大厅|e,out,se,w",
      ["sw"] = "南门大道|e,n,ne,w",
    },
  },
  ["喷珠泉|e"] = {
    name = "喷珠泉",
    exits = {
      ["e"] = "山路|nu,sd,w",
    },
  },
  ["嘉和门|e,ne,nw,sw,w"] = {
    name = "嘉和门",
    exits = {
      ["e"] = "城墙1|e,w",
      ["ne"] = "螺湖桥|ne,sw",
      ["nw"] = "城北小道|se,w",
      ["sw"] = "府前大街|e,ne,s,w",
      ["w"] = "城墙2|e,w",
    },
  },
  ["城北小道|se,w"] = {
    name = "城北小道",
    exits = {
      ["se"] = "嘉和门|e,ne,nw,sw,w",
      ["w"] = "演武厅|e,nu,sw",
    },
  },

  -- 城墙（同名节点）=&gt; 城墙 / 城墙1 ... 城墙13（按出现顺序）
  ["城墙|e,s"] = {
    name = "城墙",
    exits = {
      ["e"] = "城墙2|e,w",
      ["s"] = "城墙1|n,sw",
    },
  },
  ["城墙|e,n"] = {
    name = "城墙1",
    exits = {
      ["e"] = "魁聚门|e,n,s,w",
      ["n"] = "城墙2|n,s",
    },
  },
  ["城墙|e,w"] = {
    name = "城墙2",
    exits = {
      ["e"] = "焕文门|e,n,s,w",
      ["w"] = "魁聚门|e,n,s,w",
    },
  },
  ["城墙1|e,w"] = {
    name = "城墙3",
    exits = {
      ["e"] = "城墙|se,w",
      ["w"] = "嘉和门|e,ne,nw,sw,w",
    },
  },
  ["城墙2|e,w"] = {
    name = "城墙4",
    exits = {
      ["e"] = "嘉和门|e,ne,nw,sw,w",
      ["w"] = "城墙|e,s",
    },
  },
  ["城墙|n,s"] = {
    name = "城墙5",
    exits = {
      ["n"] = "城墙|nw,s",
      ["s"] = "城墙|n,sw",
    },
  },
  ["城墙1|n,s"] = {
    name = "城墙6",
    exits = {
      ["n"] = "永丰门|e,n,s,w",
      ["s"] = "城墙2|n,s",
    },
  },
  ["城墙2|n,s"] = {
    name = "城墙7",
    exits = {
      ["n"] = "城墙1|n,s",
      ["s"] = "城墙|e,n",
    },
  },
  ["城墙|n,sw"] = {
    name = "城墙8",
    exits = {
      ["n"] = "城墙|n,s",
      ["sw"] = "迎恩门|e,n,ne,s,sw,w",
    },
  },
  ["城墙1|n,sw"] = {
    name = "城墙9",
    exits = {
      ["n"] = "城墙|e,s",
      ["sw"] = "城墙|ne,s",
    },
  },
  ["城墙|ne,s"] = {
    name = "城墙10",
    exits = {
      ["ne"] = "城墙1|n,sw",
      ["s"] = "永丰门|e,n,s,w",
    },
  },
  ["城墙|ne,w"] = {
    name = "城墙11",
    exits = {
      ["ne"] = "迎恩门|e,n,ne,s,sw,w",
      ["w"] = "焕文门|e,n,s,w",
    },
  },
  ["城墙|nw,s"] = {
    name = "城墙12",
    exits = {
      ["nw"] = "城墙|se,w",
      ["s"] = "城墙|n,s",
    },
  },
  ["城墙|se,w"] = {
    name = "城墙13",
    exits = {
      ["se"] = "城墙|nw,s",
      ["w"] = "城墙1|e,w",
    },
  },

  ["城隍庙|ne,sw"] = {
    name = "城隍庙",
    exits = {
      ["ne"] = "东巷|ne,nw,se,sw",
      ["sw"] = "南门大道|e,ne,nw,s,w",
    },
  },
  ["大厅|e,out,se,w"] = {
    name = "大厅",
    exits = {
      ["e"] = "偏厅|w",
      ["out"] = "府衙大门|enter,n",
      ["se"] = "后门|nw,sw",
      ["w"] = "偏厅|e",
    },
  },
  ["大雄宝殿|out"] = {
    name = "大雄宝殿",
    exits = {
      ["out"] = "普渡寺门|enter,n,s",
    },
  },
  ["天华山|nd,sd"] = {
    name = "天华山",
    exits = {
      ["sd"] = "山路|nu,se,wu",
    },
  },
  ["太平桥|nw,se"] = {
    name = "太平桥",
    exits = {
      ["nw"] = "山路|nu,se,wu",
      ["se"] = "街尾|e,nw,s",
    },
  },
  ["客栈|enter,sw"] = {
    name = "客栈",
    exits = {
      ["enter"] = "上房|out",
      ["sw"] = "南门大道|e,n,ne,s",
    },
  },
  ["对月楼|ne,se"] = {
    name = "对月楼",
    exits = {
      ["ne"] = "马草巷|n,s,sw",
      ["se"] = "马草巷|n,nw,s,w",
    },
  },
  ["山坡|ne,wd"] = {
    name = "山坡",
    exits = {
      ["ne"] = "演武厅|e,nu,sw",
      ["wd"] = "马埠前|eu,s",
    },
  },

  -- 山路（同名节点）=&gt; 山路 / 山路1
  ["山路|nu,sd,w"] = {
    name = "山路",
    exits = {
      ["nu"] = "真君山|nw,sd,wu",
      ["sd"] = "演武厅|e,nu,sw",
      ["w"] = "喷珠泉|e",
    },
  },
  ["山路|nu,se,wu"] = {
    name = "山路1",
    exits = {
      ["nu"] = "天华山|nd,sd",
      ["se"] = "太平桥|nw,se",
      ["wu"] = "山间道|ed,wu",
    },
  },

  ["山间道|ed,wu"] = {
    name = "山间道",
    exits = {
      ["ed"] = "山路|nu,se,wu",
    },
  },

  -- 府前大街（同名节点）=&gt; 府前大街 / 府前大街1 / 府前大街2
  ["府前大街|e,ne,s,w"] = {
    name = "府前大街",
    exits = {
      ["e"] = "府前大街|se,w",
      ["ne"] = "嘉和门|e,ne,nw,sw,w",
      ["s"] = "府衙大门|enter,n",
      ["w"] = "府前大街|e,sw",
    },
  },
  ["府前大街|e,sw"] = {
    name = "府前大街1",
    exits = {
      ["e"] = "府前大街|e,ne,s,w",
      ["sw"] = "西门大街|ne,sw",
    },
  },
  ["府前大街|se,w"] = {
    name = "府前大街2",
    exits = {
      ["se"] = "东巷|ne,nw,se",
      ["w"] = "府前大街|e,ne,s,w",
    },
  },

  ["府衙大门|enter,n"] = {
    name = "府衙大门",
    exits = {
      ["enter"] = "大厅|e,out,se,w",
      ["n"] = "府前大街|e,ne,s,w",
    },
  },
  ["当铺|s"] = {
    name = "当铺",
    exits = {
      ["s"] = "西街|e,n,w",
    },
  },
  ["打铁铺|s"] = {
    name = "打铁铺",
    exits = {
      ["s"] = "西街|e,n,su,w",
    },
  },
  ["普渡寺门|enter,n,s"] = {
    name = "普渡寺门",
    exits = {
      ["enter"] = "大雄宝殿|out",
      ["n"] = "街尾|e,nw,s",
      ["s"] = "南街|n,se",
    },
  },
  ["杂货铺|e,nw,sw"] = {
    name = "杂货铺",
    exits = {
      ["e"] = "马草巷|n,nw,s,w",
      ["nw"] = "后街|nu,s,se",
      ["sw"] = "南街|n,ne,nw,se,sw",
    },
  },
  ["永丰门|e,n,s,w"] = {
    name = "永丰门",
    exits = {
      ["e"] = "西门大街|ne,s,w",
      ["n"] = "城墙|ne,s",
      ["s"] = "城墙1|n,s",
      ["w"] = "街口|e,n,s,w",
    },
  },
  ["演武厅|e,nu,sw"] = {
    name = "演武厅",
    exits = {
      ["e"] = "城北小道|se,w",
      ["nu"] = "山路|nu,sd,w",
      ["sw"] = "山坡|ne,wd",
    },
  },
  ["灵泉寺|se,w"] = {
    name = "灵泉寺",
    exits = {
      ["se"] = "赣江西岸|ne,nw,s",
      ["w"] = "古灵泉|e,nu,w",
    },
  },
  ["焕文门|e,n,s,w"] = {
    name = "焕文门",
    exits = {
      ["e"] = "城墙|ne,w",
      ["n"] = "南门大道|e,ne,nw,s,w",
      ["s"] = "白鹭洲前|e,n,ne,w",
      ["w"] = "城墙|e,w",
    },
  },
  ["甘雨亭|n,s"] = {
    name = "甘雨亭",
    exits = {
      ["n"] = "迎恩门|e,n,ne,s,sw,w",
      ["s"] = "赣江江畔1|e,n,w",
    },
  },
  ["白鹭洲前|e,n,ne,w"] = {
    name = "白鹭洲前",
    exits = {
      ["e"] = "赣江江畔1|e,n,w",
      ["n"] = "焕文门|e,n,s,w",
      ["ne"] = "金牛寺|sw",
      ["w"] = "赣江江畔|e,w",
      ["sheshui"] = "白鹭洲上|e",
    },
  },
  ["真君山|nw,sd,wu"] = {
    name = "真君山",
    exits = {
      ["sd"] = "山路|nu,sd,w",
    },
  },
  ["神冈山|ne,u"] = {
    name = "神冈山",
    exits = {
      ["ne"] = "南街|n,ne,nw,se,sw",
      ["u"] = "神冈山顶|d",
    },
  },
  ["神冈山顶|d"] = {
    name = "神冈山顶",
    exits = {
      ["d"] = "神冈山|ne,u",
    },
  },
  ["螺子山|sd"] = {
    name = "螺子山",
    exits = {
      ["sd"] = "古灵泉|e,nu,w",
    },
  },
  ["螺子江畔|e,sw"] = {
    name = "螺子江畔",
    exits = {
      ["e"] = "古灵泉|e,nu,w",
      ["sw"] = "螺湖桥|ne,sw",
    },
  },
  ["螺湖桥|ne,sw"] = {
    name = "螺湖桥",
    exits = {
      ["ne"] = "螺子江畔|e,sw",
      ["sw"] = "嘉和门|e,ne,nw,sw,w",
    },
  },
  ["街口|e,n,s,w"] = {
    name = "街口",
    exits = {
      ["e"] = "永丰门|e,n,s,w",
      ["n"] = "马草巷|nw,s",
      ["s"] = "马草巷|n,s,sw",
      ["w"] = "西街|e,n,w",
    },
  },
  ["街尾|e,nw,s"] = {
    name = "街尾",
    exits = {
      ["e"] = "西街|e,n,su,w",
      ["nw"] = "太平桥|nw,se",
      ["s"] = "普渡寺门|enter,n,s",
    },
  },

  -- 西街（同名节点）=&gt; 西街 / 西街1
  ["西街|e,n,su,w"] = {
    name = "西街",
    exits = {
      ["e"] = "西街|e,n,w",
      ["n"] = "打铁铺|s",
      ["su"] = "铁佛桥|nd,sd",
      ["w"] = "街尾|e,nw,s",
    },
  },
  ["西街|e,n,w"] = {
    name = "西街1",
    exits = {
      ["e"] = "街口|e,n,s,w",
      ["n"] = "当铺|s",
      ["w"] = "西街|e,n,su,w",
    },
  },

  -- 西门大街（同名节点）=&gt; 西门大街 / 西门大街1
  ["西门大街|ne,s,w"] = {
    name = "西门大街",
    exits = {
      ["ne"] = "西门大街|ne,sw",
      ["s"] = "南门大道|e,n,ne,s",
      ["w"] = "永丰门|e,n,s,w",
    },
  },
  ["西门大街|ne,sw"] = {
    name = "西门大街1",
    exits = {
      ["ne"] = "府前大街|e,sw",
      ["sw"] = "西门大街|ne,s,w",
    },
  },

  -- 赣江江畔（同名节点）=&gt; 赣江江畔 / 赣江江畔1 / 赣江江畔2 / 赣江江畔3
  ["赣江江畔|e,n,w"] = {
    name = "赣江江畔",
    exits = {
      ["e"] = "赣江江畔|e,w",
      ["n"] = "魁聚门|e,n,s,w",
      ["w"] = "南街|e,w",
    },
  },
  ["赣江江畔1|e,n,w"] = {
    name = "赣江江畔1",
    exits = {
      ["e"] = "赣江江畔|nw,w",
      ["n"] = "甘雨亭|n,s",
      ["w"] = "白鹭洲前|e,n,ne,w",
    },
  },
  ["赣江江畔|e,w"] = {
    name = "赣江江畔2",
    exits = {
      ["e"] = "白鹭洲前|e,n,ne,w",
      ["w"] = "赣江江畔|e,n,w",
    },
  },
  ["赣江江畔|nw,w"] = {
    name = "赣江江畔3",
    exits = {
      ["nw"] = "赣江西岸|n,se,w",
      ["w"] = "赣江江畔1|e,n,w",
    },
  },

  -- 赣江西岸（同名节点）=&gt; 赣江西岸 / 赣江西岸1 / 赣江西岸2
  ["赣江西岸|n,s"] = {
    name = "赣江西岸",
    exits = {
      ["n"] = "赣江西岸|ne,nw,s",
      ["s"] = "赣江西岸|n,se,w",
    },
  },
  ["赣江西岸|n,se,w"] = {
    name = "赣江西岸1",
    exits = {
      ["n"] = "赣江西岸|n,s",
      ["se"] = "赣江江畔|nw,w",
      ["w"] = "迎恩门|e,n,ne,s,sw,w",
    },
  },
  ["赣江西岸|ne,nw,s"] = {
    name = "赣江西岸2",
    exits = {
      ["ne"] = "吉水|n,sw",
      ["nw"] = "灵泉寺|se,w",
      ["s"] = "赣江西岸|n,s",
    },
  },

  ["迎恩门|e,n,ne,s,sw,w"] = {
    name = "迎恩门",
    exits = {
      ["e"] = "赣江西岸|n,se,w",
      ["n"] = "东巷|nw,s",
      ["ne"] = "城墙|n,sw",
      ["s"] = "甘雨亭|n,s",
      ["sw"] = "城墙|ne,w",
      ["w"] = "南门大道|e,ne,nw,s,w",
    },
  },
  ["金牛寺|sw"] = {
    name = "金牛寺",
    exits = {
      ["sw"] = "白鹭洲前|e,n,ne,w",
    },
  },
  ["钱庄|s"] = {
    name = "钱庄",
    exits = {
      ["s"] = "南门大道|e,n,ne,w",
    },
  },
  ["铁佛桥|nd,sd"] = {
    name = "铁佛桥",
    exits = {
      ["nd"] = "西街|e,n,su,w",
      ["sd"] = "后街|nu,s,se",
    },
  },
  ["饭馆|w"] = {
    name = "饭馆",
    exits = {
      ["w"] = "马草巷|e,n,se,w",
    },
  },
  ["马埠前|eu,s"] = {
    name = "马埠前",
    exits = {
      ["eu"] = "山坡|ne,wd",
      ["s"] = "马草巷|e,n,se,w",
    },
  },
  ["马王庙|sw"] = {
    name = "马王庙",
    exits = {
      ["sw"] = "东巷|ne,nw,se,sw",
    },
  },

  -- 马草巷（同名节点）=&gt; 马草巷 / 马草巷1 / 马草巷2 / 马草巷3
  ["马草巷|e,n,se,w"] = {
    name = "马草巷",
    exits = {
      ["e"] = "饭馆|w",
      ["n"] = "马埠前|eu,s",
      ["se"] = "马草巷|nw,s",
      ["w"] = "马车行|e",
    },
  },
  ["马草巷|n,nw,s,w"] = {
    name = "马草巷1",
    exits = {
      ["n"] = "马草巷|n,s,sw",
      ["nw"] = "对月楼|ne,se",
      ["s"] = "南街|e,n,w",
      ["w"] = "杂货铺|e,nw,sw",
    },
  },
  ["马草巷|n,s,sw"] = {
    name = "马草巷2",
    exits = {
      ["n"] = "街口|e,n,s,w",
      ["s"] = "马草巷|n,nw,s,w",
      ["sw"] = "对月楼|ne,se",
    },
  },
  ["马草巷|nw,s"] = {
    name = "马草巷3",
    exits = {
      ["nw"] = "马草巷|e,n,se,w",
      ["s"] = "街口|e,n,s,w",
    },
  },

  ["马车行|e"] = {
    name = "马车行",
    exits = {
      ["e"] = "马草巷|e,n,se,w",
    },
  },
  ["魁聚门|e,n,s,w"] = {
    name = "魁聚门",
    exits = {
      ["e"] = "城墙|e,w",
      ["n"] = "南门大道|e,n,ne,s",
      ["s"] = "赣江江畔|e,n,w",
      ["w"] = "城墙|e,n",
    },
  },

  ["白鹭洲上|e"] = {
    name = "白鹭洲上",
    exits = {
      ["e"] = "白鹭洲书院|w",
      ["sheshui"] = "白鹭洲前|e,n,ne,w"
    },
  },  
  ["白鹭洲书院|w"] = {
    name = "白鹭洲书院",
    exits = {
      ["w"] = "白鹭洲上|e",
    },
  },  
}
}

mapper.maps["lling"].mapAliases = {
  ["上房"]       = "shf",
  ["上谕亭"]     = "syt",

  -- 东巷（重名编号）
  ["东巷"]       = "dx",
  ["东巷1"]      = "dx1",
  ["东巷2"]      = "dx2",

  -- 偏厅（重名编号）
  ["偏厅"]       = "pt",
  ["偏厅1"]      = "pt1",

  -- 南街（重名编号）
  ["南街"]       = "nj",
  ["南街1"]      = "nj1",
  ["南街2"]      = "nj2",
  ["南街3"]      = "nj3",
  ["南街4"]      = "nj4",

  -- 南门大道（重名编号）
  ["南门大道"]   = "nmdd",
  ["南门大道1"]  = "nmdd1",
  ["南门大道2"]  = "nmdd2",

  ["参将署"]     = "cjs",
  ["古灵泉"]     = "glq",
  ["吉水"]       = "js",
  ["后街"]       = "hj",
  ["后门"]       = "hm",
  ["喷珠泉"]     = "pzq",

  -- ★ 区域原点（用于 back 命令）
  ["嘉和门"]     = "origin",

  ["城北小道"]   = "cbxd",

  -- 城墙（重名编号）
  ["城墙"]       = "cq",
  ["城墙1"]      = "cq1",
  ["城墙2"]      = "cq2",
  ["城墙3"]      = "cq3",
  ["城墙4"]      = "cq4",
  ["城墙5"]      = "cq5",
  ["城墙6"]      = "cq6",
  ["城墙7"]      = "cq7",
  ["城墙8"]      = "cq8",
  ["城墙9"]      = "cq9",
  ["城墙10"]     = "cq10",
  ["城墙11"]     = "cq11",
  ["城墙12"]     = "cq12",
  ["城墙13"]     = "cq13",

  ["城隍庙"]     = "chm",
  ["大厅"]       = "dt",
  ["大雄宝殿"]   = "dxbd",
  ["天华山"]     = "ths",
  ["太平桥"]     = "tpq",
  ["客栈"]       = "kz",
  ["对月楼"]     = "dyl",
  ["山坡"]       = "sp",

  -- 山路（重名编号）
  ["山路"]       = "sl",
  ["山路1"]      = "sl1",

  ["山间道"]     = "sjd",

  -- 府前大街（重名编号）
  ["府前大街"]   = "fqjd",
  ["府前大街1"]  = "fqjd1",
  ["府前大街2"]  = "fqjd2",

  ["府衙大门"]   = "fydm",
  ["当铺"]       = "dp",
  ["打铁铺"]     = "dtp",
  ["普渡寺门"]   = "pdsm",
  ["杂货铺"]     = "zhp",
  ["永丰门"]     = "yfm",
  ["演武厅"]     = "ywt",
  ["灵泉寺"]     = "lqs",
  ["焕文门"]     = "hwm",
  ["甘雨亭"]     = "gyt",
  ["白鹭洲前"]   = "blzq",

  ["真君山"]     = "zjs",
  ["神冈山"]     = "sgs",
  ["神冈山顶"]   = "sgsd",
  ["螺子山"]     = "lzs",
  ["螺子江畔"]   = "lzjp",
  ["螺湖桥"]     = "lhq",

  ["街口"]       = "jk",
  ["街尾"]       = "jw",

  -- 西街（重名编号）
  ["西街"]       = "xj",
  ["西街1"]      = "xj1",

  -- 西门大街（重名编号）
  ["西门大街"]   = "xmdj",
  ["西门大街1"]  = "xmdj1",

  -- 赣江江畔（重名编号）
  ["赣江江畔"]   = "gjjp",
  ["赣江江畔1"]  = "gjjp1",
  ["赣江江畔2"]  = "gjjp2",
  ["赣江江畔3"]  = "gjjp3",

  -- 赣江西岸（重名编号）
  ["赣江西岸"]   = "gjxa",
  ["赣江西岸1"]  = "gjxa1",
  ["赣江西岸2"]  = "gjxa2",

  ["迎恩门"]     = "yem",
  ["金牛寺"]     = "jns",
  ["钱庄"]       = "qz",
  ["铁佛桥"]     = "tfq",
  ["饭馆"]       = "fg",
  ["马埠前"]     = "mbq",
  ["马王庙"]     = "mwm",

  -- 马草巷（重名编号）
  ["马草巷"]     = "mcx",
  ["马草巷1"]    = "mcx1",
  ["马草巷2"]    = "mcx2",
  ["马草巷3"]    = "mcx3",

  ["马车行"]     = "mch",
  ["魁聚门"]     = "kjm",

  -- 新增节点也补到别名
  ["白鹭洲上"]   = "blzs",
  ["白鹭洲书院"] = "blzsy",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>衡州 - hengz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["hengz"]= {

  region = {
    key  = "hengz",      -- 区域代号，用在 goto wx.xxx 里
    name = "衡州",    -- 纯注释/显示用
  },
mapNodes = {
  ["三湘镖局|n,s,w"] = {
    name = "三湘镖局",
    exits = {
      ["n"] = "东街|e,n,s,w",
      ["s"] = "牛角巷|e,n,s,w",
      ["w"] = "十字街|e,n,s,w",
    },
  },
  ["东街|e,n,s,w"] = {
    name = "东街",
    exits = {
      ["e"] = "潇湘门|e,n,s,w",
      ["n"] = "车马行|s,sw",
      ["s"] = "三湘镖局|n,s,w",
      ["w"] = "青草桥头|e,n,ne,nw,s,w",
    },
  },
  ["刘府大门|enter,n"] = {
    name = "刘府大门",
    exits = {
      ["enter"] = "大厅|out,su",
      ["n"] = "永熹巷|e,s,w",
    },
  },
  ["十字街|e,n,s,w"] = {
    name = "十字街",
    exits = {
      ["e"] = "三湘镖局|n,s,w",
      ["n"] = "青草桥头|e,n,ne,nw,s,w",
      ["s"] = "十字街1|e,n,s,w",
      ["w"] = "当铺|e,n",
    },
  },
  ["十字街1|e,n,s,w"] = {
    name = "十字街1",
    exits = {
      ["e"] = "牛角巷|e,n,s,w",
      ["n"] = "十字街|e,n,s,w",
      ["s"] = "运雁门|e,n,s,w",
      ["w"] = "永熹巷|e,s,w",
    },
  },  
  ["后堂|nd"] = {
    name = "后堂",
    exits = {
      ["nd"] = "大厅|out,su",
    },
  },

  ["大厅|out,su"] = {
    name = "大厅",
    exits = {
      ["out"] = "刘府大门|enter,n",
      ["su"] = "后堂|nd",
    },
  },

  -- 官道（同名节点）=&gt; 官道 / 官道1 / 官道2
  ["官道|ed,nw"] = {
    name = "官道",
    exits = {
      ["ed"] = "官道|se,wu",
      ["nw"] = "邵阳|nu,s,se,wu",
    },
  },
  ["官道|se,wu"] = {
    name = "官道1",
    exits = {
      ["se"] = "西门|e,n,nw,s",
      ["wu"] = "官道|ed,nw",
    },
  },
  ["官道|n,s,se"] = {
      name = "官道2",
      exits = {
      ["n"] = "运雁门|e,n,s,w",
      ["s"] = "黄土岭|n,sw",
      ["se"] = "湘江渡口|ne,nw",
    },
  },  

  ["客店|enter,s,se"] = {
    name = "客店",
    exits = {
      ["enter"] = "里间|out",
      ["s"] = "永安街|e,n,s,w",
      ["se"] = "青草桥头|e,n,ne,nw,s,w",
    },
  },

  ["岳屏门|e,n,s,w"] = {
    name = "岳屏门",
    exits = {
      ["n"] = "青石板路|e,n,s",
      ["s"] = "正街1|e,n,s,w",
    },
  },
  ["府前街|eu,n,s,w"] = {
    name = "府前街",
    exits = {
      ["eu"] = "石鼓书院|enter,wd",
      ["n"] = "府衙|s",
      ["s"] = "杂货铺|n,w",
      ["w"] = "正街1|e,n,s,w",
    },
  },
  ["府衙|s"] = {
    name = "府衙",
    exits = {
      ["s"] = "府前街|eu,n,s,w",
    },
  },
  ["当铺|e,n"] = {
    name = "当铺",
    exits = {
      ["e"] = "十字街|e,n,s,w",
      ["n"] = "永安街|e,n,s,w",
    },
  },
  ["杂货铺|n,w"] = {
    name = "杂货铺",
    exits = {
      ["n"] = "府前街|eu,n,s,w",
      ["w"] = "正街|e,n,s,w",
    },
  },
  ["正厅|out"] = {
    name = "正厅",
    exits = {
      ["out"] = "石鼓书院|enter,wd",
    },
  },
  ["正街|e,n,s,w"] = {
    name = "正街",
    exits = {
      ["e"] = "杂货铺|n,w",
      ["n"] = "正街1|e,n,s,w",
      ["s"] = "青草桥头|e,n,ne,nw,s,w",
      ["w"] = "回雁楼|e",
    },
  },
  ["回雁楼|e"] = {
    name = "回雁楼",
    exits = {
      ["e"] = "正街|e,n,s,w",
    },
  },  
  ["正街1|e,n,s,w"] = {
    name = "正街1",
    exits = {
      ["e"] = "府前街|eu,n,s,w",
      ["n"] = "岳屏门|e,n,s,w",
      ["s"] = "正街|e,n,s,w",
      ["w"] = "钱庄|e",
    },
  },  
  ["永安街|e,n,s,w"] = {
    name = "永安街",
    exits = {
      ["e"] = "青草桥头|e,n,ne,nw,s,w",
      ["n"] = "客店|enter,s,se",
      ["s"] = "当铺|e,n",
      ["w"] = "西门|e,n,nw,s",
    },
  },
  ["永熹巷|e,s,w"] = {
    name = "永熹巷",
    exits = {
      ["e"] = "十字街1|e,n,s,w",
      ["s"] = "刘府大门|enter,n",
      ["w"] = "永熹巷尾|e",
    },
  },
  ["永熹巷尾|e"] = {
    name = "永熹巷尾",
    exits = {
      ["e"] = "永熹巷|e,s,w",
    },
  },

  -- 湘江西岸（同名节点）=&gt; 湘江西岸 / 湘江西岸1 / 湘江西岸2 / 湘江西岸3
  ["湘江西岸1|ne,sw,w"] = {
    name = "湘江西岸",
    exits = {
      ["ne"] = "湘江西岸|ne,sw,w",
      ["sw"] = "湘江西岸|ne,sw",
      ["w"] = "潇湘门|e,n,s,w",
    },
  },
  ["湘江西岸|ne,sw"] = {
    name = "湘江西岸1",
    exits = {
      ["ne"] = "湘江西岸1|ne,sw,w",
      ["sw"] = "湘江西岸1|ne,sw",
    },
  },
  ["湘江西岸1|ne,sw"] = {
    name = "湘江西岸2",
    exits = {
      ["ne"] = "湘江西岸|ne,sw",
      ["sw"] = "湘江渡口|ne,nw",
    },
  },
  ["湘江西岸|ne,sw,w"] = {
    name = "湘江西岸3",
    exits = {
      ["ne"] = "河滩|ne,sw",
      ["sw"] = "湘江西岸1|ne,sw,w",
      ["w"] = "来雁塔|e",
    },
  },

  ["湘江渡口|ne,nw"] = {
    name = "湘江渡口",
    exits = {
      ["ne"] = "湘江西岸1|ne,sw",
      ["nw"] = "官道|n,s,se",
    },
  },
  ["来雁塔|e"] = {
    name = "来雁塔",
    exits = {
      ["e"] = "湘江西岸|ne,sw,w",
    },
  },

  ["潇湘门|e,n,s,w"] = {
    name = "潇湘门",
    exits = {
      ["e"] = "湘江西岸1|ne,sw,w",
      ["w"] = "东街|e,n,s,w",
    },
  },
  ["牛角巷|e,n,s,w"] = {
    name = "牛角巷",
    exits = {
      ["e"] = "牛角巷尾|w",
      ["n"] = "三湘镖局|n,s,w",
      ["s"] = "饭铺|n",
      ["w"] = "十字街1|e,n,s,w",
    },
  },
  ["牛角巷尾|w"] = {
    name = "牛角巷尾",
    exits = {
      ["w"] = "牛角巷|e,n,s,w",
    },
  },
  ["石鼓书院|enter,wd"] = {
    name = "石鼓书院",
    exits = {
      ["enter"] = "正厅|out",
      ["wd"] = "府前街|eu,n,s,w",
    },
  },
  ["西门|e,n,nw,s"] = {
    name = "西门",
    exits = {
      ["e"] = "永安街|e,n,s,w",
      ["nw"] = "官道|se,wu",
    },
  },
  ["车马行|s,sw"] = {
    name = "车马行",
    exits = {
      ["s"] = "东街|e,n,s,w",
      ["sw"] = "青草桥头|e,n,ne,nw,s,w",
    },
  },
  ["邵阳|nu,s,se,wu"] = {
    name = "邵阳",
    exits = {
      ["se"] = "官道|ed,nw",
      ["nu"] = "瑶乡|sd,wu",
    },
  },
  ["瑶乡|sd,wu"] = {
    name = "瑶乡",
    exits = {
      ["sd"] = "邵阳|nu,s,se,wu",
      ["wu"] = "虎形山|ed,nd",
    },
  },
  ["虎形山|ed,nd"] = {
    name = "虎形山",
    exits = {
      ["ed"] = "瑶乡|sd,wu",
      ["nd"] = "山脚下|nw,su",
    },
  },
  ["山脚下|nw,su"] = {
    name = "山脚下",
    exits = {
      ["su"] = "虎形山|ed,nd",
    },
  },

  ["里间|out"] = {
    name = "里间",
    exits = {
      ["out"] = "客店|enter,s,se",
    },
  },
  ["钱庄|e"] = {
    name = "钱庄",
    exits = {
      ["e"] = "正街1|e,n,s,w",
    },
  },
  ["青石板路|e,n,s"] = {
    name = "青石板路",
    exits = {
      ["e"] = "小路|e,w",
      ["s"] = "岳屏门|e,n,s,w",
    },
  },

  ["卧房|w"] = {
    name = "卧房",
    exits = {
      ["w"] = "大厅1|e,n,s",
    },
  },
  ["厨房|s,w"] = {
    name = "厨房",
    exits = {
      ["s"] = "大厅1|e,n,s",
      ["w"] = "长廊|e,sw",
    },
  },
  ["后门|ed,enter"] = {
    name = "后门",
    exits = {
      ["ed"] = "河滩|sw,wu",
      ["enter"] = "演武场|n,out,w",
    },
  },

  -- 大厅（同名节点）=&gt; 大厅 / 大厅1  （刘府大厅保持“大厅”）
  ["大厅1|e,n,s"] = {
    name = "大厅1",
    exits = {
      ["e"] = "卧房|w",
      ["n"] = "厨房|s,w",
      ["s"] = "演武场|n,out,w",
    },
  },

  ["小路|e,w"] = {
    name = "小路",
    exits = {
      ["e"] = "院门|ne,se,w",
      ["w"] = "青石板路|e,n,s",
    },
  },

  -- 河滩（同名节点）=&gt; 河滩 / 河滩1
  ["河滩|ne,sw"] = {
    name = "河滩",
    exits = {
      ["ne"] = "河滩|sw,wu",
      ["sw"] = "湘江西岸|ne,sw,w",
    },
  },
  ["河滩|sw,wu"] = {
    name = "河滩1",
    exits = {
      ["sw"] = "河滩|ne,sw",
      ["wu"] = "后门|ed,enter",
    },
  },

  ["演武场|n,out,w"] = {
    name = "演武场",
    exits = {
      ["n"] = "大厅1|e,n,s",
      ["out"] = "后门|ed,enter",
      ["w"] = "长廊|e,nw",
    },
  },

  -- 长廊（同名节点）=&gt; 长廊 / 长廊1
  ["长廊|e,nw"] = {
    name = "长廊",
    exits = {
      ["e"] = "演武场|n,out,w",
      ["nw"] = "院门|ne,se,w",
    },
  },
  ["长廊|e,sw"] = {
    name = "长廊1",
    exits = {
      ["e"] = "厨房|s,w",
      ["sw"] = "院门|ne,se,w",
    },
  },

  ["院门|ne,se,w"] = {
    name = "院门",
    exits = {
      ["ne"] = "长廊|e,sw",
      ["se"] = "长廊|e,nw",
      ["w"] = "小路|e,w",
    },
  },

  ["青草桥头|e,n,ne,nw,s,w"] = {
    name = "青草桥头",
    exits = {
      ["e"] = "东街|e,n,s,w",
      ["n"] = "正街|e,n,s,w",
      ["ne"] = "车马行|s,sw",
      ["nw"] = "客店|enter,s,se",
      ["s"] = "十字街|e,n,s,w",
      ["w"] = "永安街|e,n,s,w",
    },
  },
  ["运雁门|e,n,s,w"] = {
    name = "运雁门",
    exits = {
      ["n"] = "十字街1|e,n,s,w",
      ["s"] = "官道|n,s,se",
    },
  },

  ["黄土岭|n,sw"] = {
    name = "黄土岭",
    exits = {
      ["n"] = "官道|n,s,se",
    },
  },    

  ["饭铺|n"] = {
    name = "饭铺",
    exits = {
      ["n"] = "牛角巷|e,n,s,w",
    },
  },
}
}

mapper.maps["hengz"].mapAliases = {
  ["三湘镖局"]     = "sxbj",
  ["东街"]         = "dj",
  ["刘府大门"]     = "lfdm",

  ["十字街"]       = "szj",
  ["十字街1"]      = "szj1",

  ["运雁门"]       = "yym",

  ["后堂"]         = "ht",

  -- 大厅（重名编号：刘府大厅保留 dt；另一处大厅为 dt1）
  ["大厅"]         = "dt",
  ["大厅1"]        = "dt1",

  ["卧房"]         = "wf",
  ["厨房"]         = "cf",
  ["后门"]         = "hm",
  ["演武场"]       = "ywc",

  -- 长廊（重名编号）
  ["长廊"]         = "cl",
  ["长廊1"]        = "cl1",

  ["院门"]         = "ym",
  ["小路"]         = "xl",

  -- 河滩（重名编号）
  ["河滩"]         = "htan",
  ["河滩1"]        = "htan1",

  -- 官道（重名编号）
  ["官道"]         = "gd",
  ["官道1"]        = "gd1",
  ["官道2"]        = "gd2",

  ["客店"]         = "kd",
  ["岳屏门"]       = "ypm",
  ["府前街"]       = "fqj",
  ["府衙"]         = "fy",
  ["当铺"]         = "dp",
  ["杂货铺"]       = "zhp",

  ["正厅"]         = "zt",
  ["正街"]         = "zj",
  ["正街1"]        = "zj1",

  ["回雁楼"]       = "hyl",

  ["永安街"]       = "yaj",
  ["永熹巷"]       = "yxx",
  ["永熹巷尾"]     = "yxxw",

  -- 湘江西岸（重名编号）
  ["湘江西岸"]     = "xjxa",
  ["湘江西岸1"]    = "xjxa1",
  ["湘江西岸2"]    = "xjxa2",
  ["湘江西岸3"]    = "xjxa3",

  ["湘江渡口"]     = "xjdk",
  ["来雁塔"]       = "lyt",

  ["潇湘门"]       = "xxm",
  ["牛角巷"]       = "njx",
  ["牛角巷尾"]     = "njxw",

  ["石鼓书院"]     = "sgsy",
  ["西门"]         = "xm",
  ["车马行"]       = "mch",
  ["邵阳"]         = "sy",
  ["瑶乡"]         = "yx",
  ["虎形山"]       = "hxs",
  ["山脚下"]       = "sjx",

  ["里间"]         = "lj",
  ["钱庄"]         = "qz",
  ["青石板路"]     = "qsbl",

  -- ★中心点（origin）
  ["青草桥头"]     = "origin",

  ["黄土岭"]       = "htl",
  ["饭铺"]         = "fp",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>江州 - jiangz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["jiangz"]= {

  region = {
    key  = "jiangz",      -- 区域代号，用在 goto wx.xxx 里
    name = "江州",    -- 纯注释/显示用
  },
mapNodes = {
  ["东门|e,ne,sw"] = {
    name = "东门",
    exits = {
      ["e"] = "青石官道|e,w",
      ["ne"] = "浔阳楼|e,n,sw,u",
      ["sw"] = "甘棠路|ne,nw,se,sw",
    },
  },
  
  ["中央广场|n,ne,s,sw"] = {
    name = "中央广场",
    exits = {
      ["n"] = "浔阳路|e,n,s,w",
      ["ne"] = "甘棠路|ne,s,sw,w",
      ["s"] = "浔阳路|e,n,s",
      ["sw"] = "甘棠路|n,ne,s,sw",
    },
  },
  ["乡间土路|e,nw"] = {
    name = "乡间土路",
    exits = {
      ["nw"] = "青石官道|ed,se,wd",
    },
  },
  ["八角亭|w"] = {
    name = "八角亭",
    exits = {
      ["w"] = "内院|e,out,w",
    },
  },
  ["内宅|e"] = {
    name = "内宅",
    exits = {
      ["e"] = "内院|e,out,w",
    },
  },
  ["内院|e,out,w"] = {
    name = "内院",
    exits = {
      ["e"] = "八角亭|w",
      ["out"] = "温峤府|e,enter",
      ["w"] = "内宅|e",
    },
  },
  ["南门|n,s"] = {
    name = "南门",
    exits = {
      ["n"] = "浔阳路1|e,n,s,w",
      ["s"] = "青石官道|n,s",
    },
  },

  -- 土路（同名节点）=&gt; 土路 / 土路2
  ["土路|eu,nw,s"] = {
    name = "土路",
    exits = {
      ["eu"] = "芝山|wd",
      ["nw"] = "青石官道|ne,se,w",
      ["s"] = "鄱阳县|e,n,se,w",
    },
  },
  ["土路|ne,w"] = {
    name = "土路2",
    exits = {
      ["ne"] = "锁江楼|n,sw,u",
      ["w"] = "浔阳楼|e,n,sw,u",
    },
  },

  ["天福镖局|n"] = {
    name = "天福镖局",
    exits = {
      ["n"] = "甘棠路|ne,s,sw,w",
    },
  },
  ["客店内室|out"] = {
    name = "客店内室",
    exits = {
      ["out"] = "盈月客栈|enter,se,w",
    },
  },
  ["小道|ed,sw"] = {
    name = "小道",
    exits = {
      ["sw"] = "青石官道|ed,ne,wu",
    },
  },

  -- 山路（同名节点）=&gt; 山路 / 山路2
  ["山路|e,n,su"] = {
    name = "山路",
    exits = {
      ["n"] = "青石官道|n,s",
      ["e"] = "鄱阳湖边|sw,w",
      ["su"] = "山路|nd,ne,se"
    },
  },
  
  ["鄱阳湖边|sw,w"] = {
    name = "鄱阳湖边",
    exits = {
      ["sw"] = "山路|nd,ne,se",
      ["w"] = "山路|e,n,su",
    },
  },

  ["山路|nd,ne,se"] = {
    name = "山路2",
    exits = {
      ["nd"] = "山路|e,n,su",
      ["ne"] = "鄱阳湖边|sw,w",
    },
  },  

  ["当铺|n"] = {
    name = "当铺",
    exits = {
      ["n"] = "甘棠路|n,ne,s,sw",
    },
  },
  ["杂货铺|nw"] = {
    name = "杂货铺",
    exits = {
      ["nw"] = "甘棠路|ne,nw,se,sw",
    },
  },
  ["池州|ne,wu"] = {
    name = "池州",
    exits = {
      ["wu"] = "青石官道|ed,ne,wu",
    },
  },
  ["浔阳楼|e,n,sw,u"] = {
    name = "浔阳楼",
    exits = {
      ["e"] = "土路|ne,w",
      ["n"] = "长江岸边|e,nw,s",
      ["sw"] = "东门|e,ne,sw",
      ["u"] = "浔阳楼二层|d",
    },
  },
  ["浔阳楼二层|d"] = {
    name = "浔阳楼二层",
    exits = {
      ["d"] = "浔阳楼|e,n,sw,u",
    },
  },

  -- 浔阳路（同名节点）=&gt; 浔阳路 / 浔阳路2 / 浔阳路3
  ["浔阳路|e,n,s"] = {
    name = "浔阳路",
    exits = {
      ["e"] = "韩家大门|e,w",
      ["n"] = "中央广场|n,ne,s,sw",
      ["s"] = "浔阳路1|e,n,s,w",
    },
  },
  ["浔阳路|e,n,s,w"] = {
    name = "浔阳路2",
    exits = {
      ["e"] = "甘棠路|ne,s,sw,w",
      ["n"] = "浔阳路|s",
      ["s"] = "中央广场|n,ne,s,sw",
      ["w"] = "温峤府|e,enter",
    },
  },
  ["浔阳路|s"] = {
    name = "浔阳路3",
    exits = {
      ["s"] = "浔阳路|e,n,s,w",
    },
  },  

  ["浔阳路1|e,n,s,w"] = {
    name = "浔阳路1",
    exits = {
      ["e"] = "邀月阁|w",
      ["n"] = "浔阳路|e,n,s",
      ["s"] = "南门|n,s",
      ["w"] = "南门湖|e,n",
    },
  },

  ["温峤府|e,enter"] = {
    name = "温峤府",
    exits = {
      ["e"] = "浔阳路|e,n,s,w",
      ["enter"] = "内院|e,out,w",
    },
  },
  ["甘棠湖|s"] = {
    name = "甘棠湖",
    exits = {
      ["s"] = "甘棠路|n,ne,s,sw",
    },
  },
  ["甘棠路1|n,ne,s,sw"] = {
    name = "甘棠路1",
    exits = {
      ["n"] = "月记票号|s",
      ["ne"] = "甘棠路|n,ne,s,sw",
      ["s"] = "南门湖|e,n",
      ["sw"] = "西门|ne,nw,w",
    },
  },
  ["西门|ne,nw,w"] = {
    name = "西门",
    exits = {
      ["ne"] = "甘棠路1|n,ne,s,sw",
    },
  },
  ["月记票号|s"] = {
    name = "月记票号",
    exits = {
      ["s"] = "甘棠路1|n,ne,s,sw",
    },
  },
  ["南门湖|e,n"] = {
    name = "南门湖",
    exits = {
      ["e"] = "浔阳路1|e,n,s,w",
      ["n"] = "甘棠路1|n,ne,s,sw",
    },
  },

  -- 甘棠路（同名节点；另有 甘棠路1 已存在）=&gt; 甘棠路 / 甘棠路2 / 甘棠路3
  ["甘棠路|n,ne,s,sw"] = {
    name = "甘棠路",
    exits = {
      ["n"] = "甘棠湖|s",
      ["ne"] = "中央广场|n,ne,s,sw",
      ["s"] = "当铺|n",
      ["sw"] = "甘棠路1|n,ne,s,sw",
    },
  },
  ["甘棠路|ne,nw,se,sw"] = {
    name = "甘棠路2",
    exits = {
      ["ne"] = "东门|e,ne,sw",
      ["nw"] = "盈月客栈|enter,se,w",
      ["se"] = "杂货铺|nw",
      ["sw"] = "甘棠路|ne,s,sw,w",
    },
  },
  ["甘棠路|ne,s,sw,w"] = {
    name = "甘棠路3",
    exits = {
      ["ne"] = "甘棠路|ne,nw,se,sw",
      ["s"] = "天福镖局|n",
      ["sw"] = "中央广场|n,ne,s,sw",
      ["w"] = "浔阳路|e,n,s,w",
    },
  },

  ["盈月客栈|enter,se,w"] = {
    name = "盈月客栈",
    exits = {
      ["enter"] = "客店内室|out",
      ["se"] = "甘棠路|ne,nw,se,sw",
      ["w"] = "计氏马车分行|e",
    },
  },
  ["芝山|wd"] = {
    name = "芝山",
    exits = {
      ["wd"] = "土路|eu,nw,s",
    },
  },
  ["计氏马车分行|e"] = {
    name = "计氏马车分行",
    exits = {
      ["e"] = "盈月客栈|enter,se,w",
    },
  },
  ["邀月阁|w"] = {
    name = "邀月阁",
    exits = {
      ["w"] = "浔阳路1|e,n,s,w",
    },
  },
  ["鄱阳县|e,n,se,w"] = {
    name = "鄱阳县",
    exits = {
      ["n"] = "土路|eu,nw,s",
    },
  },
  ["锁江楼|n,sw,u"] = {
    name = "锁江楼",
    exits = {
      ["n"] = "长江岸边|ne,s,w",
      ["sw"] = "土路|ne,w",
      ["u"] = "锁江楼二楼|d",
    },
  },
  ["锁江楼二楼|d"] = {
    name = "锁江楼二楼",
    exits = {
      ["d"] = "锁江楼|n,sw,u",
    },
  },

  -- 长江岸边（同名节点）=&gt; 长江岸边 / 长江岸边2
  ["长江岸边|e,nw,s"] = {
    name = "长江岸边",
    exits = {
      ["s"] = "浔阳楼|e,n,sw,u",
    },
  },
  ["长江岸边|ne,s,w"] = {
    name = "长江岸边2",
    exits = {
      ["s"] = "锁江楼|n,sw,u",
    },
  },

  -- 青石官道（同名节点很多）=&gt; 青石官道 / 青石官道2 / 青石官道3 / 青石官道4 / 青石官道5 / 青石官道6
  ["青石官道|e,w"] = {
    name = "青石官道",
    exits = {
      ["e"] = "青石官道|ne,se,w",
      ["w"] = "东门|e,ne,sw",
    },
  },
  ["青石官道|ed,ne,wu"] = {
    name = "青石官道2",
    exits = {
      ["ed"] = "池州|ne,wu",
      ["ne"] = "小道|ed,sw",
      ["wu"] = "青石官道|ed,se,wd",
    },
  },
  ["青石官道|ed,se,wd"] = {
    name = "青石官道3",
    exits = {
      ["ed"] = "青石官道|ed,ne,wu",
      ["se"] = "乡间土路|e,nw",
      ["wd"] = "青石官道|eu,sw",
    },
  },
  ["青石官道|eu,sw"] = {
    name = "青石官道4",
    exits = {
      ["eu"] = "青石官道|ed,se,wd",
      ["sw"] = "青石官道|ne,se,w",
    },
  },
  ["青石官道|n,s"] = {
    name = "青石官道5",
    exits = {
      ["n"] = "南门|n,s",
      ["s"] = "山路|e,n,su",
    },
  },
  ["青石官道|ne,se,w"] = {
    name = "青石官道6",
    exits = {
      ["ne"] = "青石官道|eu,sw",
      ["se"] = "土路|eu,nw,s",
      ["w"] = "青石官道|e,w",
    },
  },

  ["韩家|w"] = {
    name = "韩家",
    exits = {
      ["w"] = "韩家大门|e,w",
    },
  },
  ["韩家大门|e,w"] = {
    name = "韩家大门",
    exits = {
      ["e"] = "韩家|w",
      ["w"] = "浔阳路|e,n,s",
    },
  },
}
}

mapper.maps["jiangz"].mapAliases = {
  -- ★区域原点（用于 back 命令）
  ["中央广场"]       = "origin",

  ["东门"]           = "dm",
  ["南门"]           = "nm",

  ["浔阳楼"]         = "xyl",
  ["浔阳楼二层"]     = "xylec",
  ["锁江楼"]         = "sjl",
  ["锁江楼二楼"]     = "sjlel",

  -- 浔阳路重名编号（注意：浔阳路1 本来就是独立节点名）
  ["浔阳路"]         = "xylu",
  ["浔阳路1"]        = "xylu1",
  ["浔阳路2"]        = "xylu2",
  ["浔阳路3"]        = "xylu3",

  -- 甘棠路重名编号（甘棠路1 已存在）
  ["甘棠路"]         = "gtl",
  ["甘棠路1"]        = "gtl1",
  ["甘棠路2"]        = "gtl2",
  ["甘棠路3"]        = "gtl3",
  ["甘棠湖"]         = "gth",

  ["盈月客栈"]       = "yykz",
  ["客店内室"]       = "kdns",
  ["计氏马车分行"]   = "mch",

  ["温峤府"]         = "wqf",
  ["内院"]           = "ny",
  ["内宅"]           = "nz",
  ["八角亭"]         = "bjt",

  ["天福镖局"]       = "tfbj",
  ["当铺"]           = "dp",
  ["杂货铺"]         = "zhp",
  ["邀月阁"]         = "yyg",

  ["韩家大门"]       = "hjdm",
  ["韩家"]           = "hj",

  -- 长江岸边重名编号
  ["长江岸边"]       = "cjab",
  ["长江岸边2"]      = "cjab2",

  -- 青石官道重名编号
  ["青石官道"]       = "qsgd",
  ["青石官道2"]      = "qsgd2",
  ["青石官道3"]      = "qsgd3",
  ["青石官道4"]      = "qsgd4",
  ["青石官道5"]      = "qsgd5",
  ["青石官道6"]      = "qsgd6",

  ["乡间土路"]       = "xjtl",
  ["小道"]           = "xd",

  -- 土路重名编号
  ["土路"]           = "tl",
  ["土路2"]          = "tl2",

  -- 山路重名编号
  ["山路"]           = "sl",
  ["山路2"]          = "sl2",

  ["芝山"]           = "zs",

  ["鄱阳县"]         = "pyx",
  ["池州"]           = "cz",
  ["南门湖"]         = "nmh",
  ["鄱阳湖边"]       = "pyhb",

  ["西门"]           = "xm",
  ["月记票号"]       = "yjph",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>岳阳 - yy</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["yy"]= {

  region = {
    key  = "yy",      -- 区域代号，用在 goto wx.xxx 里
    name = "岳阳",    -- 纯注释/显示用
  },
mapNodes = {
  ["东大街|e,n,s,w"] = {
    name = "东大街",
    exits = {
      ["e"] = "东门|e,w",
      ["n"] = "将军府|s",
      ["s"] = "岳阳府衙|n",
      ["w"] = "城中心|e,n,s,w",
    },
  },
  ["东门|e,w"] = {
    name = "东门",
    exits = {
      ["e"] = "青石官道|ed,w",
      ["w"] = "东大街|e,n,s,w",
    },
  },
  ["北大街|e,n,s"] = {
    name = "北大街",
    exits = {
      ["e"] = "计氏马车分行|w",
      ["n"] = "北门|n,ne,nw,s",
      ["s"] = "城中心|e,n,s,w",
    },
  },
  ["北门|n,ne,nw,s"] = {
    name = "北门",
    exits = {
      ["n"] = "长江岸边|ne,s,w",
      ["ne"] = "官道|ne,sw",
      ["nw"] = "北门码头|se",
      ["s"] = "北大街|e,n,s",
    },
  },
  ["北门码头|se"] = {
    name = "北门码头",
    exits = {
      ["se"] = "北门|n,ne,nw,s",
    },
  },
  ["南门|n,s"] = {
    name = "南门",
    exits = {
      ["n"] = "南门内大街|e,n,s,w",
      ["s"] = "山路|n,sd",
    },
  },
  ["南门内大街|e,n,s,w"] = {
    name = "南门内大街",
    exits = {
      ["e"] = "杂货铺|w",
      ["n"] = "城中心|e,n,s,w",
      ["s"] = "南门|n,s",
      ["w"] = "李保长家|e",
    },
  },
  ["城中心|e,n,s,w"] = {
    name = "城中心",
    exits = {
      ["e"] = "东大街|e,n,s,w",
      ["n"] = "北大街|e,n,s",
      ["s"] = "南门内大街|e,n,s,w",
      ["w"] = "西大街|e,n,s,w",
    },
  },

  -- 官道（同名）=&gt; 官道 / 官道2
  ["官道|nd,s"] = {
    name = "官道",
    exits = {
      ["nd"] = "神鼎山镇|nu,su",
    },
  },
  ["官道|ne,sw"] = {
    name = "官道2",
    exits = {
      ["sw"] = "北门|n,ne,nw,s",
    },
  },

  ["将军府|s"] = {
    name = "将军府",
    exits = {
      ["s"] = "东大街|e,n,s,w",
    },
  },

  -- 山路（同名）=&gt; 山路 / 山路2
  ["山路|n,sd"] = {
    name = "山路",
    exits = {
      ["n"] = "南门|n,s",
      ["sd"] = "神鼎山镇|nu,su",
    },
  },
  ["山路|nd,sw"] = {
    name = "山路2",
    exits = {
      ["nd"] = "洞庭湖畔|n,su,w",
      ["sw"] = "汨罗江东岸|ne",
    },
  },

  ["岳阳府衙|n"] = {
    name = "岳阳府衙",
    exits = {
      ["n"] = "东大街|e,n,s,w",
    },
  },
  ["岳阳楼|e,enter,s,u"] = {
    name = "岳阳楼",
    exits = {
      ["e"] = "西门|e,w",
      ["enter"] = "雅居|out",
      ["s"] = "洞庭湖畔|n,su,w",
      ["u"] = "岳阳楼二层|d",
    },
  },
  ["岳阳楼二层|d"] = {
    name = "岳阳楼二层",
    exits = {
      ["d"] = "岳阳楼|e,enter,s,u",
    },
  },
  ["当铺|n"] = {
    name = "当铺",
    exits = {
      ["n"] = "西大街|e,n,s,w",
    },
  },
  ["月记票号|s"] = {
    name = "月记票号",
    exits = {
      ["s"] = "西大街|e,n,s,w",
    },
  },
  ["杂货铺|w"] = {
    name = "杂货铺",
    exits = {
      ["w"] = "南门内大街|e,n,s,w",
    },
  },
  ["李保长家|e"] = {
    name = "李保长家",
    exits = {
      ["e"] = "南门内大街|e,n,s,w",
    },
  },
  ["汨罗江东岸|ne"] = {
    name = "汨罗江东岸",
    exits = {
      ["ne"] = "山路|nd,sw",
    },
  },
  ["洞庭湖畔|n,su,w"] = {
    name = "洞庭湖畔",
    exits = {
      ["n"] = "岳阳楼|e,enter,s,u",
      ["su"] = "山路|nd,sw",
      ["w"] = "青石官道|e,wu",
      ["ride"] = "北岸|su,w",
    },
  },
  ["神鼎山镇|nu,su"] = {
    name = "神鼎山镇",
    exits = {
      ["nu"] = "山路|n,sd",
      ["su"] = "官道|nd,s",
    },
  },
  ["西大街|e,n,s,w"] = {
    name = "西大街",
    exits = {
      ["e"] = "城中心|e,n,s,w",
      ["n"] = "月记票号|s",
      ["s"] = "当铺|n",
      ["w"] = "西门|e,w",
    },
  },
  ["西门|e,w"] = {
    name = "西门",
    exits = {
      ["e"] = "西大街|e,n,s,w",
      ["w"] = "岳阳楼|e,enter,s,u",
    },
  },
  ["计氏马车分行|w"] = {
    name = "计氏马车分行",
    exits = {
      ["w"] = "北大街|e,n,s",
    },
  },
  ["长江岸边|ne,s,w"] = {
    name = "长江岸边",
    exits = {
      ["s"] = "北门|n,ne,nw,s",
    },
  },
  ["雅居|out"] = {
    name = "雅居",
    exits = {
      ["out"] = "岳阳楼|e,enter,s,u",
    },
  },

  -- 青石官道（同名）=&gt; 青石官道 / 青石官道2
  ["青石官道|e,wu"] = {
    name = "青石官道",
    exits = {
      ["e"] = "洞庭湖畔|n,su,w",
    },
  },
  ["青石官道|ed,w"] = {
    name = "青石官道2",
    exits = {
      ["w"] = "东门|e,w",
    },
  },

  -- 东岸（同名）=&gt; 东岸 / 东岸2 / 东岸3
  ["东岸|nd,sw,w"] = {
    name = "东岸",
    exits = {
      ["nd"] = "北岸|su,w",
      ["sw"] = "东岸|ne,sw,w",
      ["w"] = "传书亭|e,wu",
    },
  },
  ["东岸|ne,sw,w"] = {
    name = "东岸2",
    exits = {
      ["ne"] = "东岸|nd,sw,w",
      ["sw"] = "东岸|ne,w",
      ["w"] = "柳毅井|e,w",
    },
  },
  ["东岸|ne,w"] = {
    name = "东岸3",
    exits = {
      ["ne"] = "东岸|ne,sw,w",
      ["w"] = "南岸浅滩|e,n,nw",
    },
  },

  ["二妃墓|ed,nd,sd,w"] = {
    name = "二妃墓",
    exits = {
      ["ed"] = "传书亭|e,wu",
      ["nd"] = "北岸|e,su,w",
      ["sd"] = "茶树林|e,nu,s,w",
      ["w"] = "轩辕台|e,nd,sd,wd",
    },
  },
  ["传书亭|e,wu"] = {
    name = "传书亭",
    exits = {
      ["e"] = "东岸|nd,sw,w",
      ["wu"] = "二妃墓|ed,nd,sd,w",
    },
  },

  -- 北岸（同名）=&gt; 北岸 / 北岸2 / 北岸3 / 北岸4
  ["北岸|e,su,sw"] = {
    name = "北岸",
    exits = {
      ["e"] = "北岸|e,su,w",
      ["su"] = "轩辕台|e,nd,sd,wd",
      ["sw"] = "西岸|eu,ne,se",
    },
  },
  ["北岸|e,su,w"] = {
    name = "北岸2",
    exits = {
      ["e"] = "北岸|e,w",
      ["su"] = "二妃墓|ed,nd,sd,w",
      ["w"] = "北岸|e,su,sw",
    },
  },
  ["北岸|e,w"] = {
    name = "北岸3",
    exits = {
      ["e"] = "北岸|su,w",
      ["w"] = "北岸|e,su,w",
    },
  },
  ["北岸|su,w"] = {
    name = "北岸4",
    exits = {
      ["su"] = "东岸|nd,sw,w",
      ["w"] = "北岸|e,w",
      ["ride"] = "洞庭湖畔|n,su,w",
    },
  },

  ["南岸浅滩|e,n,nw"] = {
    name = "南岸浅滩",
    exits = {
      ["e"] = "东岸|ne,w",
      ["n"] = "茶树林|e,nu,s,w",
      ["nw"] = "西岸|e,nu,nw,se",
    },
  },
  ["柳毅井|e,w"] = {
    name = "柳毅井",
    exits = {
      ["e"] = "东岸|ne,sw,w",
      ["w"] = "茶树林|e,nu,s,w",
    },
  },
  ["茶树林|e,nu,s,w"] = {
    name = "茶树林",
    exits = {
      ["e"] = "柳毅井|e,w",
      ["nu"] = "二妃墓|ed,nd,sd,w",
      ["s"] = "南岸浅滩|e,n,nw",
      ["w"] = "西岸|e,nu,nw,se",
    },
  },

  -- 西岸（同名）=&gt; 西岸 / 西岸2
  ["西岸|e,nu,nw,se"] = {
    name = "西岸",
    exits = {
      ["e"] = "茶树林|e,nu,s,w",
      ["nu"] = "轩辕台|e,nd,sd,wd",
      ["nw"] = "西岸|eu,ne,se",
      ["se"] = "南岸浅滩|e,n,nw",
    },
  },
  ["西岸|eu,ne,se"] = {
    name = "西岸2",
    exits = {
      ["eu"] = "轩辕台|e,nd,sd,wd",
      ["ne"] = "北岸|e,su,sw",
      ["se"] = "西岸|e,nu,nw,se",
    },
  },

  ["轩辕台|e,nd,sd,wd"] = {
    name = "轩辕台",
    exits = {
      ["e"] = "二妃墓|ed,nd,sd,w",
      ["nd"] = "北岸|e,su,sw",
      ["sd"] = "西岸|e,nu,nw,se",
      ["wd"] = "西岸|eu,ne,se",
    },
  },  
}
}

mapper.maps["yy"].mapAliases = {

  -- ===== 核心 / 原点 =====
  ["城中心"]       = "origin",

  -- ===== 城门 &amp; 主干 =====
  ["东门"]         = "dm",
  ["西门"]         = "xm",
  ["南门"]         = "nm",
  ["北门"]         = "bm",

  ["北门码头"]     = "bmmt",

  ["东大街"]       = "ddj",
  ["西大街"]       = "xdj",
  ["北大街"]       = "bdj",
  ["南门内大街"]   = "nmdj",

  -- ===== 城内建筑 =====
  ["将军府"]       = "jjf",
  ["岳阳府衙"]     = "yyfy",
  ["李保长家"]     = "lbzj",

  ["杂货铺"]       = "zhp",
  ["当铺"]         = "dp",
  ["月记票号"]     = "yjph",
  ["计氏马车分行"] = "mch",

  -- ===== 岳阳楼区域 =====
  ["岳阳楼"]       = "yyl",
  ["岳阳楼二层"]   = "yylec",
  ["雅居"]         = "yj",

  -- ===== 水域 / 野外 =====
  ["洞庭湖畔"]     = "dthp",
  ["汨罗江东岸"]   = "mljda",
  ["长江岸边"]     = "cjab",

  -- ===== 过渡 / 出城 =====
  ["官道"]         = "gd",
  ["官道2"]        = "gd2",

  ["山路"]         = "sl",
  ["山路2"]        = "sl2",

  ["青石官道"]     = "qsgd",
  ["青石官道2"]    = "qsgd2",

  ["神鼎山镇"]     = "sdsz",

  -- ===== 洞庭湖·传说线（新增全补）=====
  ["东岸"]         = "da",
  ["东岸2"]        = "da2",
  ["东岸3"]        = "da3",

  ["北岸"]         = "ba",
  ["北岸2"]        = "ba2",
  ["北岸3"]        = "ba3",
  ["北岸4"]        = "ba4",

  ["西岸"]         = "xa",
  ["西岸2"]        = "xa2",

  ["南岸浅滩"]     = "naqt",
  ["传书亭"]       = "cst",
  ["二妃墓"]       = "efm",
  ["柳毅井"]       = "lyj",
  ["茶树林"]       = "csl",
  ["轩辕台"]       = "xyt",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>江夏 - jiangxia</name>
					<packageName></packageName>
					<script>mapper = mapper or {}

mapper.maps = mapper.maps or {} 

mapper.maps["jiangxia"]= {

  region = {
    key  = "jiangxia",      -- 区域代号，用在 goto wx.xxx 里
    name = "江夏",    -- 纯注释/显示用
  },
  mapNodes = {
  ["三山湖|nw,s"] = {
    name = "三山湖",
    exits = {
      ["nw"] = "佛祖岭|nw,se",
      ["s"] = "城东小路|n,s",
    },
  },
  ["东市街|e,n,s,w"] = {
    name = "东市街",
    exits = {
      ["e"] = "东市街1|e,n,s,w",
      ["n"] = "打铜巷|e,n,s,w",
      ["s"] = "军营|n",
      ["w"] = "府前街|e,n,s,w",
    },
  },
["军营|n"] = {
  name = "军营",
  exits = {
    ["n"] = "东市街|e,n,s,w",
  },
},  
  ["东市街1|e,n,s,w"] = {
    name = "东市街1",
    exits = {
      ["e"] = "东门|e,n,w",
      ["n"] = "打铁铺|s,w",
      ["s"] = "客栈|enter,n",
      ["w"] = "东市街|e,n,s,w",
    },
  },  
  ["东门|e,n,w"] = {
    name = "东门",
    exits = {
      ["e"] = "官道|n,se,w",
      ["n"] = "城东小路|n,s",
      ["w"] = "东市街1|e,n,s,w",
    },
  },
  ["佛祖岭|nw,se"] = {
    name = "佛祖岭",
    exits = {
      ["nw"] = "武昌|se,sw",
      ["se"] = "三山湖|nw,s",
    },
  },
  ["城东小路|n,s"] = {
    name = "城东小路",
    exits = {
      ["n"] = "三山湖|nw,s",
      ["s"] = "东门|e,n,w",
    },
  },

  -- 官道（同名）=&gt; 官道 / 官道2 / 官道3
  ["官道|n,se,w"] = {
    name = "官道",
    exits = {
      ["n"] = "葛仙楼|s",
      ["se"] = "黄石|nw,se,sw",
      ["w"] = "东门|e,n,w",
    },
  },

  ["客房|out"] = {
    name = "客房",
    exits = {
      ["out"] = "客栈|enter,n",
    },
  },
  ["客栈|enter,n"] = {
    name = "客栈",
    exits = {
      ["enter"] = "客房|out",
      ["n"] = "东市街1|e,n,s,w",
    },
  },
  ["当铺|e,w"] = {
    name = "当铺",
    exits = {
      ["e"] = "青石里|e,s,w",
      ["w"] = "茶花巷1|e,n,s,w",
    },
  },
  ["成衣铺|e,w"] = {
    name = "成衣铺",
    exits = {
      ["e"] = "打铜巷|e,n,s,w",
      ["w"] = "茶花巷|e,n,s,w",
    },
  },
  ["打铁铺|s,w"] = {
    name = "打铁铺",
    exits = {
      ["s"] = "东市街1|e,n,s,w",
      ["w"] = "打铜巷|e,n,s,w",
    },
  },
  ["打铜巷|e,n,s,w"] = {
    name = "打铜巷",
    exits = {
      ["e"] = "打铁铺|s,w",
      ["n"] = "青石里|e,s,w",
      ["s"] = "东市街|e,n,s,w",
      ["w"] = "成衣铺|e,w",
    },
  },
  ["杂货铺|w"] = {
    name = "杂货铺",
    exits = {
      ["w"] = "青石里|e,s,w",
    },
  },
  ["武昌|se,sw"] = {
    name = "武昌",
    exits = {
      ["se"] = "佛祖岭|nw,se",
      ["sw"] = "风筝山|ne,wu",
    },
  },
  ["茶花巷|e,n,s,w"] = {
    name = "茶花巷",
    exits = {
      ["e"] = "成衣铺|e,w",
      ["n"] = "茶花巷1|e,n,s,w",
      ["s"] = "府前街|e,n,s,w",
      ["w"] = "药王庙|e,w",
    },
  },
  ["茶花巷1|e,n,s,w"] = {
    name = "茶花巷1",
    exits = {
      ["e"] = "当铺|e,w",
      ["n"] = "北门|n,s",
      ["s"] = "茶花巷|e,n,s,w",
      ["w"] = "车马行|e",
    },
  },  
  ["北门|n,s"] = {
  name = "北门",
  exits = {
    ["n"] = "土路|s",
    ["s"] = "茶花巷1|e,n,s,w",
  },
},

  -- 土路（同名）=&gt; 土路 / 土路2 / 土路3
["土路|s"] = {
  name = "土路",
  exits = {
    ["s"] = "北门|n,s",
  },
},

  ["葛仙楼|s"] = {
    name = "葛仙楼",
    exits = {
      ["s"] = "官道|n,se,w",
    },
  },
  ["蛇山|ed,u,wd"] = {
    name = "蛇山",
    exits = {
      ["ed"] = "风筝山|ne,wu",
      ["u"] = "黄鹤楼|d",
      ["wd"] = "蛇山渡|eu,ne,sw",
    },
  },
  ["蛇山渡|eu,ne,sw"] = {
    name = "蛇山渡",
    exits = {
      ["eu"] = "蛇山|ed,u,wd",
    },
  },
  ["车马行|e"] = {
    name = "车马行",
    exits = {
      ["e"] = "茶花巷1|e,n,s,w",
    },
  },
  ["青石里|e,s,w"] = {
    name = "青石里",
    exits = {
      ["e"] = "杂货铺|w",
      ["s"] = "打铜巷|e,n,s,w",
      ["w"] = "当铺|e,w",
    },
  },
  ["风筝山|ne,wu"] = {
    name = "风筝山",
    exits = {
      ["ne"] = "武昌|se,sw",
      ["wu"] = "蛇山|ed,u,wd",
    },
  },
  ["黄石|nw,se,sw"] = {
    name = "黄石",
    exits = {
      ["nw"] = "官道|n,se,w",
      ["sw"] = "磁湖|ne",
      ["se"] = "官道|nw,se,wu",
    },
  },

["官道|nw,se,wu"] = {
  name = "官道2",
  exits = {
    ["wu"] = "采石场|ed",
    ["nw"] = "黄石|nw,se,sw",
  },
},  
["采石场|ed"] = {
  name = "采石场",
  exits = {
    ["ed"] = "官道|nw,se,wu",
  },
},
  ["磁湖|ne"] = {
  name = "磁湖",
  exits = {
    ["ne"] = "黄石|nw,se,sw",
  },
},
  ["黄鹤楼|d"] = {
    name = "黄鹤楼",
    exits = {
      ["d"] = "蛇山|ed,u,wd",
    },
  },
  ["八分山脚|ne,nwd,swu"] = {
    name = "八分山脚",
    exits = {
      ["ne"] = "南门|n,se,sw",
      ["nwd"] = "长江江畔|ne,seu,sw",
      ["swu"] = "山腰|eu,ned,sw",
    },
  },
  ["南门|n,se,sw"] = {
    name = "南门",
    exits = {
      ["n"] = "西集街1|e,n,s,w",
      ["se"] = "梁子湖边|nw,s",
      ["sw"] = "八分山脚|ne,nwd,swu",
    },
  },

  ["土路|n,su"] = {
    name = "土路2",
    exits = {
      ["n"] = "梁子湖边|nw,s",
      ["su"] = "大幕山|nd,sd",
    },
  },
  ["土路|ne,nu,sw"] = {
    name = "土路3",
    exits = {
      ["ne"] = "西门|e,sw",
      ["nu"] = "槐山|sd,w",
      ["sw"] = "长江江畔|ne,seu,sw",
    },
  },

  ["大幕山|nd,sd"] = {
    name = "大幕山",
    exits = {
      ["nd"] = "土路|n,su",
      ["sd"] = "通山县|nu,swu",
    },
  },

  ["官道|ne,sw"] = {
    name = "官道3",
    exits = {
      ["ne"] = "长江江畔|ne,seu,sw",
      ["sw"] = "赤壁|ne,sw",
    },
  },

  ["山腰|eu,ned,sw"] = {
    name = "山腰",
    exits = {
      ["eu"] = "山顶|wd",
      ["ned"] = "八分山脚|ne,nwd,swu",
      ["sw"] = "白云洞口|enter,ne",
    },
  },
  ["山顶|wd"] = {
    name = "山顶",
    exits = {
      ["wd"] = "山腰|eu,ned,sw",
    },
  },
  ["张宅|w"] = {
    name = "张宅",
    exits = {
      ["w"] = "西集街1|e,n,s,w",
    },
  },
  ["梁子湖边|nw,s"] = {
    name = "梁子湖边",
    exits = {
      ["nw"] = "南门|n,se,sw",
      ["s"] = "土路|n,su",
    },
  },
  ["槐山|sd,w"] = {
    name = "槐山",
    exits = {
      ["sd"] = "土路|ne,nu,sw",
      ["w"] = "留云亭|e",
    },
  },
  ["洞内|out"] = {
    name = "洞内",
    exits = {
      ["out"] = "白云洞口|enter,ne",
    },
  },
  ["留云亭|e"] = {
    name = "留云亭",
    exits = {
      ["e"] = "槐山|sd,w",
    },
  },
  ["白云洞口|enter,ne"] = {
    name = "白云洞口",
    exits = {
      ["enter"] = "洞内|out",
      ["ne"] = "山腰|eu,ned,sw",
    },
  },
  ["西门|e,sw"] = {
    name = "西门",
    exits = {
      ["e"] = "西集街|e,n,s,w",
      ["sw"] = "土路|ne,nu,sw",
    },
  },
  ["药王街|e,s,w"] = {
  name = "药王街",
  exits = {
    ["e"] = "药王庙|e,w",
    ["s"] = "西集街|e,n,s,w",
    ["w"] = "药铺|e",
  },
},
["药王庙|e,w"] = {
  name = "药王庙",
  exits = {
    ["e"] = "茶花巷|e,n,s,w",
    ["w"] = "药王街|e,s,w",
  },
},
["药铺|e"] = {
  name = "药铺",
  exits = {
    ["e"] = "药王街|e,s,w",
  },
},
["府前街|e,n,s,w"] = {
  name = "府前街",
  exits = {
    ["e"] = "东市街|e,n,s,w",
    ["n"] = "茶花巷|e,n,s,w",
    ["s"] = "衙门前|enter,n",
    ["w"] = "西集街|e,n,s,w",
  },
},
["衙门前|enter,n"] = {
  name = "衙门前",
  exits = {
    ["enter"] = "衙门大堂|out",
    ["n"] = "府前街|e,n,s,w",
  },
},
["衙门大堂|out"] = {
  name = "衙门大堂",
  exits = {
    ["out"] = "衙门前|enter,n",
  },
},
  ["西集街|e,n,s,w"] = {
    name = "西集街",
    exits = {
      ["e"] = "府前街|e,n,s,w",
      ["n"] = "药王街|e,s,w",
      ["s"] = "西集街1|e,n,s,w",
      ["w"] = "西门|e,sw",
    },
  },
  ["酒楼|e"] = {
  name = "酒楼",
  exits = {
    ["e"] = "西集街1|e,n,s,w",
  },
},
  ["西集街1|e,n,s,w"] = {
    name = "西集街1",
    exits = {
      ["e"] = "张宅|w",
      ["n"] = "西集街|e,n,s,w",
      ["s"] = "南门|n,se,sw",
      ["w"] = "酒楼|e",
    },
  },  
  ["赤壁|ne,sw"] = {
    name = "赤壁",
    exits = {
      ["ne"] = "官道|ne,sw",
    },
  },
  ["通山县|nu,swu"] = {
    name = "通山县",
    exits = {
      ["nu"] = "大幕山|nd,sd",
    },
  },
  ["长江江畔|ne,seu,sw"] = {
    name = "长江江畔",
    exits = {
      ["ne"] = "土路|ne,nu,sw",
      ["seu"] = "八分山脚|ne,nwd,swu",
      ["sw"] = "官道|ne,sw",
    },
  },  
}
}

mapper.maps["jiangxia"].mapAliases = {

  -- ===== origin（唯一原点）=====
  ["府前街"]     = "origin",

  -- ===== 城内主干 =====
  ["东门"]       = "dm",
  ["南门"]       = "nm",
  ["西门"]       = "xm",
  ["北门"]       = "bm",

  ["东市街"]     = "dsj",
  ["东市街1"]    = "dsj1",

  ["茶花巷"]     = "chx",
  ["茶花巷1"]    = "chx1",

  ["打铜巷"]     = "dtx",
  ["西集街"]     = "xjj",
  ["西集街1"]    = "xjj1",

  ["城东小路"]   = "cdxl",

  -- ===== 城内店铺/室内/功能点 =====
  ["客栈"]       = "kz",
  ["客房"]       = "kf",
  ["军营"]       = "jy",

  ["当铺"]       = "dp",
  ["成衣铺"]     = "cyp",
  ["打铁铺"]     = "dtp",
  ["杂货铺"]     = "zhp",
  ["车马行"]     = "mch",
  ["酒楼"]       = "jl",

  ["青石里"]     = "qsl",

  ["药王街"]     = "ywj",
  ["药王庙"]     = "ywm",
  ["药铺"]       = "yp",

  ["衙门前"]     = "ymq",
  ["衙门大堂"]   = "ymdt",

  -- ===== 城外/地标 =====
  ["三山湖"]     = "ssh",
  ["佛祖岭"]     = "fzl",
  ["葛仙楼"]     = "gxl",
  ["黄石"]       = "hs",

  -- ===== 武昌线 =====
  ["武昌"]       = "wc",
  ["风筝山"]     = "fzs",
  ["蛇山"]       = "ss",
  ["蛇山渡"]     = "ssd",
  ["黄鹤楼"]     = "hhl",

  -- ===== 江边/山/洞 =====
  ["长江江畔"]   = "cjjp",
  ["八分山脚"]   = "bfsj",
  ["山腰"]       = "sy",
  ["山顶"]       = "sd",

  ["白云洞口"]   = "bydk",
  ["洞内"]       = "dn",

  ["梁子湖边"]   = "lzhb",
  ["大幕山"]     = "dms",
  ["通山县"]     = "tsx",
  ["赤壁"]       = "cb",

  ["槐山"]       = "huais",
  ["留云亭"]     = "lyt",

  ["张宅"]       = "zz",

  -- ===== 同名编号补齐（避免 name 冲突）=====
  ["官道"]       = "gd",
  ["官道2"]      = "gd2",
  ["官道3"]      = "gd3",

  ["土路"]       = "tl",
  ["土路2"]      = "tl2",
  ["土路3"]      = "tl3",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>龙虎山 - lhs</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["lhs"] = {

  region = {
    key  = "lhs",      -- 区域代号，用在 goto cz.xxx 里
    name = "龙虎山",    -- 区域中文名
  },
mapNodes = {
  ["上清镇|e,w"] = {
    name = "上清镇",
    exits = {
      ["e"] = "田间路|e,n,w",
      ["w"] = "土路|e,se,w",
    },
  },
  ["云锦石|ed,nw"] = {
    name = "云锦石",
    exits = {
      ["ed"] = "山路|e,wu",
      ["nw"] = "石滩芦雪|ne,se",
    },
  },
  ["右厢房|w"] = {
    name = "右厢房",
    exits = {
      ["w"] = "广场|e,n,out,w",
    },
  },
  ["后山|enter,nu"] = {
    name = "后山",
    exits = {
      ["enter"] = "大殿|out,s",
      ["nu"] = "帽子峰|sd",
    },
  },
  ["土路|e,se,w"] = {
    name = "土路",
    exits = {
      ["e"] = "上清镇|e,w",
      ["se"] = "玉龙泉|nw,se",
      ["w"] = "正一观|e,enter,su,w",
    },
  },
  ["大殿|out,s"] = {
    name = "大殿",
    exits = {
      ["out"] = "后山|enter,nu",
      ["s"] = "广场|e,n,out,w",
    },
  },

  -- 山路(1)
  ["山路|e,wu"] = {
    name = "山路",
    exits = {
      ["e"] = "正一观|e,enter,su,w",
      ["wu"] = "云锦石|ed,nw",
    },
  },

  -- 山路(2)
  ["山路|n,sw,wu"] = {
    name = "山路2",
    exits = {
      ["n"] = "山路|nd,s,wu",
      ["sw"] = "杏树夜月|ne,sw",
      ["wu"] = "雄狮峰|ed",
    },
  },

  -- 山路(3)
  ["山路|nd,ne,su,w"] = {
    name = "山路3",
    exits = {
      ["nd"] = "山路|nw,su",
      ["ne"] = "鲤鱼石|sw",
      ["su"] = "山路|nd,s,wu",
      ["w"] = "长亭|e",
    },
  },

  -- 山路(4)
  ["山路|nd,s,wu"] = {
    name = "山路4",
    exits = {
      ["nd"] = "山路|nd,ne,su,w",
      ["s"] = "山路|n,sw,wu",
      ["wu"] = "象鼻山|ed,su",
    },
  },

  -- 山路(5)
  ["山路|nw,su"] = {
    name = "山路5",
    exits = {
      ["nw"] = "泸溪河东岸|n,se,wd",
      ["su"] = "山路|nd,ne,su,w",
    },
  },

  ["左厢房|e"] = {
    name = "左厢房",
    exits = {
      ["e"] = "广场|e,n,out,w",
    },
  },
  ["帽子峰|sd"] = {
    name = "帽子峰",
    exits = {
      ["sd"] = "后山|enter,nu",
    },
  },
  ["广场|e,n,out,w"] = {
    name = "广场",
    exits = {
      ["e"] = "右厢房|w",
      ["n"] = "大殿|out,s",
      ["out"] = "正一观|e,enter,su,w",
      ["w"] = "左厢房|e",
    },
  },
  ["望儿峰|nd"] = {
    name = "望儿峰",
    exits = {
      ["nd"] = "象鼻山|ed,su",
    },
  },
  ["杏树夜月|ne,sw"] = {
    name = "杏树夜月",
    exits = {
      ["ne"] = "山路|n,sw,wu",
      ["sw"] = "石滩芦雪|ne,se",
    },
  },
  ["正一观|e,enter,su,w"] = {
    name = "正一观",
    exits = {
      ["e"] = "土路|e,se,w",
      ["enter"] = "广场|e,n,out,w",
      ["su"] = "龙虎峰|nd",
      ["w"] = "山路|e,wu",
    },
  },
  ["泸溪河东岸|n,se,wd"] = {
    name = "泸溪河东岸",
    exits = {
      ["se"] = "山路|nw,su",
      ["wd"] = "木桥|eu,w",
    },
  },
  
  ["木桥|eu,w"] = {
  name = "木桥",
  exits = {
    ["eu"] = "泸溪河东岸|n,se,wd",
    ["w"] = "三岔口|e,nw,sw",
  },
},

["仙水岩|ne,nw,su"] = {
  name = "仙水岩",
  exits = {
    ["ne"] = "三岔口|e,nw,sw",
    ["su"] = "仙姑庵|nd",
  },
},

["仙姑庵|nd"] = {
  name = "仙姑庵",
  exits = {
    ["nd"] = "仙水岩|ne,nw,su",
  },
},

["三岔口|e,nw,sw"] = {
  name = "三岔口",
  exits = {
    ["e"] = "木桥|eu,w",
    ["nw"] = "",
    ["sw"] = "仙水岩|ne,nw,su",
  },
},


  ["玉龙泉|nw,se"] = {
    name = "玉龙泉",
    exits = {
      ["nw"] = "土路|e,se,w",
    },
  },
  ["田间路|e,n,w"] = {
    name = "田间路",
    exits = {
      ["w"] = "上清镇|e,w",
    },
  },
  ["石滩芦雪|ne,se"] = {
    name = "石滩芦雪",
    exits = {
      ["ne"] = "杏树夜月|ne,sw",
      ["se"] = "云锦石|ed,nw",
    },
  },
  ["象鼻山|ed,su"] = {
    name = "象鼻山",
    exits = {
      ["ed"] = "山路|nd,s,wu",
      ["su"] = "望儿峰|nd",
    },
  },
  ["长亭|e"] = {
    name = "长亭",
    exits = {
      ["e"] = "山路|nd,ne,su,w",
    },
  },
  ["雄狮峰|ed"] = {
    name = "雄狮峰",
    exits = {
      ["ed"] = "山路|n,sw,wu",
    },
  },
  ["鲤鱼石|sw"] = {
    name = "鲤鱼石",
    exits = {
      ["sw"] = "山路|nd,ne,su,w",
    },
  },
  ["龙虎峰|nd"] = {
    name = "龙虎峰",
    exits = {
      ["nd"] = "正一观|e,enter,su,w",
    },
  },
}
}

mapper.maps["lhs"].mapAliases = {
  ["仙水岩"]     = "xsy",
  ["仙姑庵"]     = "xga",
  ["三岔口"]     = "sck",
  ["木桥"]       = "sck",

  -- ===== 镇 / 入口 =====
  ["上清镇"]     = "sqz",
  ["田间路"]     = "tjl",
  ["土路"]       = "tl",

  -- ===== 核心建筑 =====
  ["正一观"]     = "origin",
  ["广场"]       = "gc",
  ["大殿"]       = "dd",
  ["后山"]       = "hs",

  ["左厢房"]     = "zxf",
  ["右厢房"]     = "yxf",

  -- ===== 山峰 / 地形 =====
  ["帽子峰"]     = "mzf",
  ["龙虎峰"]     = "lhf",
  ["象鼻山"]     = "xbs",
  ["望儿峰"]     = "wef",
  ["雄狮峰"]     = "xsf",

  ["长亭"]       = "ct",
  ["鲤鱼石"]     = "lys",

  -- ===== 自然景观 =====
  ["云锦石"]     = "yjs",
  ["玉龙泉"]     = "ylq",
  ["石滩芦雪"]   = "stlx",
  ["杏树夜月"]   = "xsyy",
  ["泸溪河东岸"] = "lxhda",

  -- ===== 同名编号补齐（避免 name 冲突）=====
  ["山路"]       = "sl",
  ["山路2"]      = "sl2",
  ["山路3"]      = "sl3",
  ["山路4"]      = "sl4",
  ["山路5"]      = "sl5",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>广州 - guangzhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}
mapper.maps["guangzhou"] = {
  region = {
    key  = "guangzhou",      -- 区域代号，用在 goto wx.xxx 里
    name = "广州",    -- 纯注释/显示用
  },
  mapNodes = {
  
  ["行春门|e,ne,w"] = {
    name = "行春门",
    exits = {
      ["e"] = "番禺西街|e,w",
      ["ne"] = "小路|ne,sw",
      ["w"] = "翔龙东街|e,ne,se,w",
    },
  },
    
  ["丰乐门|e,nw"] = {
    name = "丰乐门",
    exits = {
      ["e"] = "南海西街|ne,nw,s,w",
      ["nw"] = "老林尽头|n,se,w",
    },
  },
  ["五羊大街|e,n,ne,nw,s,se,sw,w"] = {
  name = "五羊大街",
  exits = {
    ["e"] = "月记银号岭南分号|w",
    ["n"] = "五羊大街1|e,n,s,w",
    ["ne"] = "小酒馆|sw",
    ["nw"] = "狮子楼|d,se",
    ["s"] = "五羊大街|e,n,s,w",
    ["se"] = "蕃汉客栈|nw,u",
    ["sw"] = "斗鸡场|ne",
    ["w"] = "尘莺阁|e,u",
  },
},
["狮子楼|d,se"] = {
  name = "狮子楼",
  exits = {
    ["d"] = "狮子楼废酒窖|u",
    ["se"] = "五羊大街|e,n,ne,nw,s,se,sw,w",
  },
},

["狮子楼废酒窖|u"] = {
  name = "狮子楼废酒窖",
  exits = {
    ["u"] = "狮子楼|d,se",
  },
},

["小酒馆|sw"] = {
  name = "小酒馆",
  exits = {
    ["sw"] = "五羊大街|e,n,ne,nw,s,se,sw,w",
  },
},

["月记银号岭南分号|w"] = {
  name = "月记银号岭南分号",
  exits = {
    ["w"] = "五羊大街|e,n,ne,nw,s,se,sw,w",
  },
},

["尘莺阁|e,u"] = {
  name = "尘莺阁",
  exits = {
    ["e"] = "五羊大街|e,n,ne,nw,s,se,sw,w",
    ["u"] = "倚春栏|d",
  },
},

["倚春栏|d"] = {
  name = "倚春栏",
  exits = {
    ["d"] = "尘莺阁|e,u",
  },
},

["蕃汉客栈|nw,u"] = {
  name = "蕃汉客栈",
  exits = {
    ["nw"] = "五羊大街|e,n,ne,nw,s,se,sw,w",
    ["u"] = "客栈二楼|d",
  },
},
["客栈二楼|d"] = {
  name = "客栈二楼",
  exits = {
    ["d"] = "蕃汉客栈|nw,u",
  },
},
["斗鸡场|ne"] = {
  name = "斗鸡场",
  exits = {
    ["ne"] = "五羊大街|e,n,ne,nw,s,se,sw,w",
  },
},

  ["五羊大街|e,n,s,w"] = {
    name = "五羊大街",
    exits = {
      ["e"] = "修船厂|w",
      ["n"] = "五羊大街|e,n,ne,nw,s,se,sw,w",
      ["s"] = "迎薰门|n,s",
      ["w"] = "岭南铁匠铺|e",

    },
  },
  ["修船厂|w"] = {
  name = "修船厂",
  exits = {
    ["w"] = "五羊大街|e,n,s,w",
  },
},
  ["岭南铁匠铺|e"] = {
  name = "岭南铁匠铺",
  exits = {
    ["e"] = "五羊大街|e,n,s,w",
  },
},
  ["冶铁监|e"] = {
    name = "冶铁监",
    exits = {
      ["e"] = "翔龙南街|e,n,s,sw,w",
    },
  },
  ["南海东街|e,nw,s"] = {
    name = "南海东街",
    exits = {
      ["e"] = "有年门|e,w",
      ["nw"] = "怀圣寺|n,se,sw",
      ["s"] = "朝天路|e,n,s",
    },
  },
  ["南海西街|ne,nw,s,w"] = {
    name = "南海西街",
    exits = {
      ["ne"] = "怀圣寺|n,se,sw",
      ["nw"] = "贫民区|se",
      ["s"] = "居蕃坊|e,n,s,w",
      ["w"] = "丰乐门|e,nw",
    },
  },
  ["威远门|n,s"] = {
    name = "威远门",
    exits = {
      ["n"] = "威远门外|nw,s",
      ["s"] = "怀圣寺|n,se,sw",
    },
  },
  ["威远门外|nw,s"] = {
    name = "威远门外",
    exits = {
      ["s"] = "威远门|n,s",
    },
  },
  ["官库|out"] = {
    name = "官库",
    exits = {
      ["out"] = "市易司|e,enter",
    },
  },
  ["居蕃坊|e,n,s,w"] = {
    name = "居蕃坊",
    exits = {
      ["e"] = "蕃学|w",
      ["n"] = "南海西街|ne,nw,s,w",
      ["s"] = "蒲宅|n",
      ["w"] = "辛押陀罗宅|e",
    },
  },
  ["崔与之府|n"] = {
    name = "崔与之府",
    exits = {
      ["n"] = "翔龙西街|e,n,s,w",
    },
  },
  ["州学|s"] = {
    name = "州学",
    exits = {
      ["s"] = "翔龙西街|e,n,s,w",
    },
  },
  ["市口|e,n,s,w"] = {
    name = "市口",
    exits = {
      ["e"] = "翔龙东街|e,ne,se,w",
      ["n"] = "翔龙北街|e,n,s,w",
      ["s"] = "翔龙南街|e,n,s,sw,w",
      ["w"] = "翔龙西街|e,n,s,w",
    },
  },
  ["市易司|e,enter"] = {
    name = "市易司",
    exits = {
      ["e"] = "翔龙北街|e,n,s,w",
      ["enter"] = "官库|out",
    },
  },
  ["市舶司|w"] = {
    name = "市舶司",
    exits = {
      ["w"] = "翔龙南街|e,n,s,sw,w",
    },
  },
  ["广南东路帅司大门|enter,s"] = {
    name = "广南东路帅司大门",
    exits = {
      ["s"] = "翔龙北街|e,n,s,w",
    },
  },
  ["广州州治衙门|w"] = {
    name = "广州州治衙门",
    exits = {
      ["w"] = "翔龙北街|e,n,s,w",
    },
  },
  ["广州港|w"] = {
    name = "广州港",
    exits = {
      ["w"] = "犒设处|e,n,w",
    },
  },
  ["彭府|w"] = {
    name = "彭府",
    exits = {
      ["w"] = "朝天路|e,n,s",
    },
  },
  ["怀圣寺|n,se,sw"] = {
    name = "怀圣寺",
    exits = {
      ["n"] = "威远门|n,s",
      ["se"] = "南海东街|e,nw,s",
      ["sw"] = "南海西街|ne,nw,s,w",
    },
  },
  ["操练场|nw,s"] = {
    name = "操练场",
    exits = {
      ["nw"] = "翔龙东街|e,ne,se,w",
      ["s"] = "统制府|n",
    },
  },
  ["有年门|e,w"] = {
    name = "有年门",
    exits = {
      ["e"] = "翔龙西街|e,n,s,w",
      ["w"] = "南海东街|e,nw,s",
    },
  },
  ["朝天路|e,n,s"] = {
    name = "朝天路",
    exits = {
      ["e"] = "彭府|w",
      ["n"] = "南海东街|e,nw,s",
      ["s"] = "杨府|n",
    },
  },
  ["杨府|n"] = {
    name = "杨府",
    exits = {
      ["n"] = "朝天路|e,n,s",
    },
  },
  ["犒设处|e,n,w"] = {
    name = "犒设处",
    exits = {
      ["e"] = "广州港|w",
      ["n"] = "迎薰门|n,s",
      ["w"] = "避风港|e,w",
    },
  },
  ["珠江北岸|e,nw"] = {
    name = "珠江北岸",
    exits = {
      ["e"] = "避风港|e,w",
      ["nw"] = "镇南门|n,se",
    },
  },
  ["统制府|n"] = {
    name = "统制府",
    exits = {
      ["n"] = "操练场|nw,s",
    },
  },
  ["翔龙东街|e,ne,se,w"] = {
    name = "翔龙东街",
    exits = {
      ["e"] = "行春门|e,ne,w",
      ["ne"] = "通判府|sw",
      ["se"] = "操练场|nw,s",
      ["w"] = "市口|e,n,s,w",
    },
  },
  ["翔龙北街|e,n,s,w"] = {
    name = "翔龙北街",
    exits = {
      ["e"] = "广州州治衙门|w",
      ["n"] = "广南东路帅司大门|enter,s",
      ["s"] = "市口|e,n,s,w",
      ["w"] = "市易司|e,enter",
    },
  },
  ["翔龙南街|e,n,s,sw,w"] = {
    name = "翔龙南街",
    exits = {
      ["e"] = "市舶司|w",
      ["n"] = "市口|e,n,s,w",
      ["s"] = "镇南门|n,se",
      ["sw"] = "都盐监|ne",
      ["w"] = "冶铁监|e",
    },
  },
  ["翔龙西街|e,n,s,w"] = {
    name = "翔龙西街",
    exits = {
      ["e"] = "市口|e,n,s,w",
      ["n"] = "州学|s",
      ["s"] = "崔与之府|n",
      ["w"] = "有年门|e,w",
    },
  },
  ["老林尽头|n,se,w"] = {
    name = "老林尽头",
    exits = {
      ["se"] = "丰乐门|e,nw",
    },
  },
  ["蒲宅|n"] = {
    name = "蒲宅",
    exits = {
      ["n"] = "居蕃坊|e,n,s,w",
    },
  },
  ["蕃学|w"] = {
    name = "蕃学",
    exits = {
      ["w"] = "居蕃坊|e,n,s,w",
    },
  },

  ["贫民区|se"] = {
    name = "贫民区",
    exits = {
      ["se"] = "南海西街|ne,nw,s,w",
    },
  },
  ["辛押陀罗宅|e"] = {
    name = "辛押陀罗宅",
    exits = {
      ["e"] = "居蕃坊|e,n,s,w",
    },
  },
  ["迎薰门|n,s"] = {
    name = "迎薰门",
    exits = {
      ["n"] = "五羊大街|e,n,s,w",
      ["s"] = "犒设处|e,n,w",
    },
  },
  ["通判府|sw"] = {
    name = "通判府",
    exits = {
      ["sw"] = "翔龙东街|e,ne,se,w",
    },
  },
  ["避风港|e,w"] = {
    name = "避风港",
    exits = {
      ["e"] = "犒设处|e,n,w",
      ["w"] = "珠江北岸|e,nw",
    },
  },
  ["都盐监|ne"] = {
    name = "都盐监",
    exits = {
      ["ne"] = "翔龙南街|e,n,s,sw,w",
    },
  },
  ["镇南门|n,se"] = {
    name = "镇南门",
    exits = {
      ["n"] = "翔龙南街|e,n,s,sw,w",
      ["se"] = "珠江北岸|e,nw",
    },
  },
  ["丁字路口|e,nu,s,se,w"] = {
    name = "丁字路口",
    exits = {
      ["e"] = "番禺东街|e,w",
      ["nu"] = "五羊庙|sd,se,sw",
      ["s"] = "五羊大街1|e,n,s,w",
      ["se"] = "岭南马车分行|nw",
      ["w"] = "番禺西街|e,w",
    },
  },
  ["五羊大街1|e,n,s,w"] = {
    name = "五羊大街1",
    exits = {
      ["e"] = "裕盈贵|w",
      ["s"] = "五羊大街|e,n,ne,nw,s,se,sw,w",
      ["n"] = "丁字路口|e,nu,s,se,w",
      ["w"] = "蕃市口|e,n,s,w",
    },
  },
  ["宝货集|s"] = {
    name = "宝货集",
    exits = {
      ["s"] = "蕃市口|e,n,s,w",
    },
  },
  ["珍货集|e"] = {
    name = "珍货集",
    exits = {
      ["e"] = "蕃市口|e,n,s,w",
    },
  },
  ["蕃市口|e,n,s,w"] = {
    name = "蕃市口",
    exits = {
      ["e"] = "五羊大街1|e,n,s,w",
      ["n"] = "宝货集|s",
      ["s"] = "香料集|n",
      ["w"] = "珍货集|e",
    },
  },
  ["香料集|n"] = {
    name = "香料集",
    exits = {
      ["n"] = "蕃市口|e,n,s,w",
    },
  },

  ["裕盈贵|w"] = {
  name = "裕盈贵",
  exits = {
    ["w"] = "五羊大街1|e,n,s,w",
  },
},

  ["五羊庙|sd,se,sw"] = {
    name = "五羊庙",
    exits = {
      ["sd"] = "丁字路口|e,nu,s,se,w",
      ["se"] = "小路|ne,nw,se",
      ["sw"] = "小路|ne,sw",
    },
  },
  ["小路|ne,nw,se"] = {
    name = "小路",
    exits = {
      ["ne"] = "悬崖|ne,sw",
      ["nw"] = "五羊庙|sd,se,sw",
      ["se"] = "震东门|ne,nw,w",
    },
  },
  ["小路|ne,sw"] = {
    name = "小路",
    exits = {
      ["ne"] = "五羊庙|sd,se,sw",
      ["sw"] = "行春门|e,ne,w",
    },
  },
  ["岭南马车分行|nw"] = {
    name = "岭南马车分行",
    exits = {
      ["nw"] = "丁字路口|e,nu,s,se,w",
    },
  },
  ["悬崖|ne,sw"] = {
    name = "悬崖",
    exits = {
      ["sw"] = "小路|ne,nw,se",
    },
  },
  ["番禺东街|e,w"] = {
    name = "番禺东街",
    exits = {
      ["e"] = "震东门|ne,nw,w",
      ["w"] = "丁字路口|e,nu,s,se,w",
    },
  },
  ["番禺西街|e,w"] = {
    name = "番禺西街",
    exits = {
      ["e"] = "丁字路口|e,nu,s,se,w",
      ["w"] = "行春门|e,ne,w",
    },
  },

  ["越秀山脚下|e,sw"] = {
    name = "越秀山脚下",
    exits = {
      ["sw"] = "震东门|ne,nw,w",
    },
  },
  ["震东门|ne,nw,w"] = {
    name = "震东门",
    exits = {
      ["ne"] = "越秀山脚下|e,sw",
      ["nw"] = "小路|ne,nw,se",
      ["w"] = "番禺东街|e,w",
    },
  },  
}
}

-- mapAliases（房间名 -&gt; 拼音缩写）
mapper.maps["guangzhou"].mapAliases = {
  ["行春门"]           = "xcm",
  ["丰乐门"]           = "flm",
  ["五羊大街"]         = "wydj",
  ["狮子楼"]           = "szl",
  ["狮子楼废酒窖"]     = "szlfjj",
  ["小酒馆"]           = "xjg",
  ["月记银号岭南分号"] = "yjyhlnfh",
  ["尘莺阁"]           = "cyg",
  ["倚春栏"]           = "ycl",
  ["蕃汉客栈"]         = "fhkz",
  ["客栈二楼"]         = "kzel",
  ["斗鸡场"]           = "djc",
  ["修船厂"]           = "xcc",
  ["岭南铁匠铺"]       = "lntjp",
  ["冶铁监"]           = "ytj",
  ["南海东街"]         = "nhdj",
  ["南海西街"]         = "nhxj",
  ["威远门"]           = "wym",
  ["威远门外"]         = "wymw",
  ["官库"]             = "gk",
  ["居蕃坊"]           = "jff",
  ["崔与之府"]         = "cyzf",
  ["州学"]             = "zx",
  ["市口"]             = "sk",
  ["市易司"]           = "sys",
  ["市舶司"]           = "sbs",
  ["广南东路帅司大门"] = "gndlsstdm",
  ["广州州治衙门"]     = "gzzzym",
  ["广州港"]           = "gzg",
  ["彭府"]             = "pf",
  ["怀圣寺"]           = "hss",
  ["操练场"]           = "clc",
  ["有年门"]           = "ynm",
  ["朝天路"]           = "ctl",
  ["杨府"]             = "yf",
  ["犒设处"]           = "ksc",
  ["珠江北岸"]         = "zjba",
  ["统制府"]           = "tzf",
  ["翔龙东街"]         = "xldj",
  ["翔龙北街"]         = "xlbj",
  ["翔龙南街"]         = "xlnj",
  ["翔龙西街"]         = "xlxj",
  ["老林尽头"]         = "lljt",
  ["蒲宅"]             = "pz",
  ["蕃学"]             = "fx",
  ["贫民区"]           = "pmq",
  ["辛押陀罗宅"]       = "xytlz",
  ["迎薰门"]           = "yxm",
  ["通判府"]           = "tpf",
  ["避风港"]           = "bfg",
  ["都盐监"]           = "dyj",
  ["镇南门"]           = "znm",
  ["丁字路口"]         = "dzlk",
  ["五羊大街1"]        = "wydj1",
  ["宝货集"]           = "bhj",
  ["珍货集"]           = "zhj",
  ["蕃市口"]           = "fsk",
  ["香料集"]           = "xlj",
  ["裕盈贵"]           = "yyg",
  ["五羊庙"]           = "wymiao",
  ["小路"]             = "xl",
  ["岭南马车分行"]     = "mch",
  ["悬崖"]             = "xy",
  ["番禺东街"]         = "fydj",
  ["番禺西街"]         = "fyxj",
  ["越秀山脚下"]       = "yxsjx",
  ["震东门"]           = "zdm",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>佛山 - foshan</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["foshan"] = {
  region = {
    key  = "foshan",      -- 区域代号，用在 goto wx.xxx 里
    name = "佛山",    -- 纯注释/显示用
  },
  mapNodes = {

    ["渡口|n"] = {
    name = "渡口",
    exits = {
      ["n"] = "南庄镇|ne,s",
      ["ride"] = "渡口|sw,wu"
    },
  },

  ["渡口|sw,wu"] = {
    name = "渡口",
    exits = {
      ["sw"] = "渔村|ne",
      ["wu"] = "西樵山脚|ed,nu",
      ["ride"] = "渡口|n",
    },
  },

   ["云泉石径|enter,nw,sd,u"] = {
    name = "云泉石径",
    exits = {
      ["enter"] = "白云洞|out",
      ["nw"] = "庙前道|nu,se",
      ["sd"] = "罗汉峡|nu,wu",
      ["u"] = "云海亭|d",
    },
  },
  ["云海亭|d"] = {
    name = "云海亭",
    exits = {
      ["d"] = "云泉石径|enter,nw,sd,u",
    },
  },
  ["南海神庙|sd"] = {
    name = "南海神庙",
    exits = {
      ["sd"] = "庙前道|nu,se",
    },
  },
  ["山路|ed,sd"] = {
    name = "山路",
    exits = {
      ["ed"] = "罗汉峡|nu,wu",
      ["sd"] = "西樵山脚|ed,nu",
    },
  },
  ["庙前道|nu,se"] = {
    name = "庙前道",
    exits = {
      ["nu"] = "南海神庙|sd",
      ["se"] = "云泉石径|enter,nw,sd,u",
    },
  },
  ["渔村|ne"] = {
    name = "渔村",
    exits = {
      ["ne"] = "渡口|sw,wu",
    },
  },

  ["白云洞|out"] = {
    name = "白云洞",
    exits = {
      ["out"] = "云泉石径|enter,nw,sd,u",
    },
  },
  ["罗汉峡|nu,wu"] = {
    name = "罗汉峡",
    exits = {
      ["nu"] = "云泉石径|enter,nw,sd,u",
      ["wu"] = "山路|ed,sd",
    },
  },
  ["西樵山脚|ed,nu"] = {
    name = "西樵山脚",
    exits = {
      ["ed"] = "渡口|sw,wu",
      ["nu"] = "山路|ed,sd",
    },
  },

  
  ["三岔口|ne,s,w"] = {
    name = "三岔口",
    exits = {
      ["ne"] = "珠江南岸|sw",
      ["s"] = "官道|n,s",
      ["w"] = "官道|e,sw",
    },
  },
  ["东门|n,w"] = {
    name = "东门",
    exits = {
      ["n"] = "官道|n,s",
      ["w"] = "丹桂街|e,n,s,w",
    },
  },
  ["丹桂街|e,n,s,w"] = {
    name = "丹桂街",
    exits = {
      ["e"] = "东门|n,w",
      ["n"] = "食铺|s",
      ["s"] = "客栈|enter,n",
      ["w"] = "集市|e,n,s,w",
    },
  },
  ["五虎门大门|enter,n"] = {
    name = "五虎门大门",
    exits = {
      ["enter"] = "外院|out,s",
      ["n"] = "清水井巷|n,s",
    },
  },
  ["佛山武场|n,s"] = {
    name = "佛山武场",
    exits = {
      ["n"] = "西大街|e,n,s,w",
      ["s"] = "暗坊|n",
    },
  },
  ["内室|e"] = {
    name = "内室",
    exits = {
      ["e"] = "练武场|e,n,s,w",
    },
  },
  ["劲节堂|n"] = {
    name = "劲节堂",
    exits = {
      ["n"] = "练武场|e,n,s,w",
    },
  },
  ["北街|e,n,s,w"] = {
    name = "北街",
    exits = {
      ["e"] = "杂货铺|w",
      ["n"] = "北门|ne,s",
      ["s"] = "集市|e,n,s,w",
      ["w"] = "陶坊|e",
    },
  },
  ["北门|ne,s"] = {
    name = "北门",
    exits = {
      ["ne"] = "官道|e,sw",
      ["s"] = "北街|e,n,s,w",
    },
  },
  ["南庄镇|ne,s"] = {
    name = "南庄镇",
    exits = {
      ["ne"] = "官道|ne,sw",
      ["s"] = "渡口|n",
    },
  },
  ["外院|out,s"] = {
    name = "外院",
    exits = {
      ["out"] = "五虎门大门|enter,n",
      ["s"] = "练武场|e,n,s,w",
    },
  },
  ["官道|e,sw"] = {
    name = "官道",
    exits = {
      ["e"] = "三岔口|ne,s,w",
      ["sw"] = "北门|ne,s",
    },
  },
  ["官道|n,s"] = {
    name = "官道",
    exits = {
      ["n"] = "三岔口|ne,s,w",
      ["s"] = "东门|n,w",
    },
  },
  ["官道|ne,sw"] = {
    name = "官道",
    exits = {
      ["ne"] = "西门|e,n,sw",
      ["sw"] = "南庄镇|ne,s",
    },
  },
  ["客房|out"] = {
    name = "客房",
    exits = {
      ["out"] = "客栈|enter,n",
    },
  },
  ["客栈|enter,n"] = {
    name = "客栈",
    exits = {
      ["enter"] = "客房|out",
      ["n"] = "丹桂街|e,n,s,w",
    },
  },
  ["庙前广场|n,s"] = {
    name = "庙前广场",
    exits = {
      ["n"] = "祖庙|s",
      ["s"] = "西大街|e,n,s,w",
    },
  },
  ["暗坊|n"] = {
    name = "暗坊",
    exits = {
      ["n"] = "佛山武场|n,s",
    },
  },
  ["杂货铺|w"] = {
    name = "杂货铺",
    exits = {
      ["w"] = "北街|e,n,s,w",
    },
  },
  ["清水井巷|n,s"] = {
    name = "清水井巷",
    exits = {
      ["n"] = "集市|e,n,s,w",
      ["s"] = "五虎门大门|enter,n",
    },
  },

  ["珠江南岸|sw"] = {
    name = "珠江南岸",
    exits = {
      ["sw"] = "三岔口|ne,s,w",
    },
  },
  ["祖庙|s"] = {
    name = "祖庙",
    exits = {
      ["s"] = "庙前广场|n,s",
    },
  },
  ["练武场|e,n,s,w"] = {
    name = "练武场",
    exits = {
      ["e"] = "议事厅|w",
      ["n"] = "外院|out,s",
      ["s"] = "劲节堂|n",
      ["w"] = "内室|e",
    },
  },
  ["西大街|e,n,s,w"] = {
    name = "西大街",
    exits = {
      ["e"] = "集市|e,n,s,w",
      ["n"] = "庙前广场|n,s",
      ["s"] = "佛山武场|n,s",
      ["w"] = "西门|e,n,sw",
    },
  },
  ["西门|e,n,sw"] = {
    name = "西门",
    exits = {
      ["e"] = "西大街|e,n,s,w",
      ["n"] = "钟家|s",
      ["sw"] = "官道|ne,sw",
    },
  },
  ["议事厅|w"] = {
    name = "议事厅",
    exits = {
      ["w"] = "练武场|e,n,s,w",
    },
  },
  ["钟家|s"] = {
    name = "钟家",
    exits = {
      ["s"] = "西门|e,n,sw",
    },
  },
  ["陶坊|e"] = {
    name = "陶坊",
    exits = {
      ["e"] = "北街|e,n,s,w",
    },
  },
  ["集市|e,n,s,w"] = {
    name = "集市",
    exits = {
      ["e"] = "丹桂街|e,n,s,w",
      ["n"] = "北街|e,n,s,w",
      ["s"] = "清水井巷|n,s",
      ["w"] = "西大街|e,n,s,w",
    },
  },
  ["食铺|s"] = {
    name = "食铺",
    exits = {
      ["s"] = "丹桂街|e,n,s,w",
    },
  },
}
}

-- mapAliases（房间名 -&gt; 拼音缩写）
mapper.maps["foshan"].mapAliases = {
  ["渡口"]       = "dk",
  ["南庄镇"]     = "nzz",
  ["渔村"]       = "yc",
  ["西樵山脚"]   = "xqsj",
  ["云泉石径"]   = "yqsj",
  ["白云洞"]     = "byd",
  ["云海亭"]     = "yht",
  ["庙前道"]     = "mpd",
  ["南海神庙"]   = "nhsm",
  ["罗汉峡"]     = "lhx",
  ["山路"]       = "sl",
  ["乱石滩"]     = "lst",

  ["三岔口"]     = "sck",
  ["珠江南岸"]   = "zjna",
  ["官道"]       = "gd",
  ["东门"]       = "dm",
  ["西门"]       = "xm",
  ["北门"]       = "bm",

  ["丹桂街"]     = "dgj",
  ["北街"]       = "bj",
  ["西大街"]     = "xdj",
  ["集市"]       = "js",
  ["清水井巷"]   = "qsjx",
  ["庙前广场"]   = "mpgc",

  ["客栈"]       = "kz",
  ["客房"]       = "kf",

  ["杂货铺"]     = "zhp",
  ["陶坊"]       = "tf",
  ["食铺"]       = "sp",

  ["五虎门大门"] = "whmdm",
  ["外院"]       = "wy",
  ["练武场"]     = "lwc",
  ["内室"]       = "ns",
  ["议事厅"]     = "yst",
  ["劲节堂"]     = "jjt",

  ["佛山武场"]   = "fswc",
  ["暗坊"]       = "af",

  ["祖庙"]       = "zm",
  ["钟家"]       = "zj",
}

</script>
					<eventHandlerList />
				</Script>
			</ScriptGroup>
			<ScriptGroup isActive="yes" isFolder="yes">
				<name>北京</name>
				<packageName></packageName>
				<script></script>
				<eventHandlerList />
				<Script isActive="yes" isFolder="no">
					<name>天坛 - tiantan</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["tiantan"] = {
  region = {
    key  = "tiantan",
    name = "天坛",
  },

  mapNodes = {
    -- 东西天门
    ["东天门|e,w"] = {
      name = "东天门",
      exits = {
        ["w"] = "石板路|e,wu",
      },
    },

    ["西天门|e,w"] = {
      name = "西天门",
      exits = {
        ["e"] = "石板路3|e,n,w",
      },
    },

    ["北天门|ne,s"] = {
      name = "北天门",
      exits = {
        ["ne"] = "小胡同|n,sw",
        ["s"]  = "石板路4|n,su",
      },
    },

    ["南天门|n,se"] = {
      name = "南天门",
      exits = {
        ["n"]  = "石板路5|nu,s",
        ["se"] = "小胡同|nw,se",
      },
    },

    -- 主轴：丹陛桥
    ["丹陛桥|ed,n,s,wd"] = {
      name = "丹陛桥",
      exits = {
        ["ed"] = "石板路|e,wu",
        ["n"]  = "祈年殿|nd,ne,s",
        ["s"]  = "皇穹宇|n,s",
        ["wd"] = "石板路2|eu,n,w",
      },
    },

    -- 祈年殿
    ["祈年殿|nd,ne,s"] = {
      name = "祈年殿",
      exits = {
        ["nd"] = "石板路4|n,su",
        ["ne"] = "宰牲房2|sw",
        ["s"]  = "丹陛桥|ed,n,s,wd",
      },
    },

    -- 皇穹宇 / 圜丘 / 宰牲房
    ["皇穹宇|n,s"] = {
      name = "皇穹宇",
      exits = {
        ["n"] = "丹陛桥|ed,n,s,wd",
        ["s"] = "圜丘|n,sd,se",
      },
    },

    ["圜丘|n,sd,se"] = {
      name = "圜丘",
      exits = {
        ["n"]  = "皇穹宇|n,s",
        ["sd"] = "石板路5|nu,s",
        ["se"] = "宰牲房|nw",
      },
    },

    ["宰牲房|nw"] = {
      name = "宰牲房",
      exits = {
        ["nw"] = "圜丘|n,sd,se",
      },
    },

    ["宰牲房2|sw"] = {
      name = "宰牲房2",
      exits = {
        ["sw"] = "祈年殿|nd,ne,s",
      },
    },

    -- 小胡同（2 个）
    ["小胡同|n,sw"] = {
      name = "小胡同",
      exits = {
        ["sw"] = "北天门|ne,s",
      },
    },

    ["小胡同|nw,se"] = {
      name = "小胡同2",
      exits = {
        ["nw"] = "南天门|n,se",
      },
    },

    -- 百花园 / 喷水池
    ["百花园|e,s"] = {
      name = "百花园",
      exits = {
        ["e"] = "喷水池|s,w",
        ["s"] = "石板路3|e,n,w",
      },
    },

    ["喷水池|s,w"] = {
      name = "喷水池",
      exits = {
        ["s"] = "石板路2|eu,n,w",
        ["w"] = "百花园|e,s",
      },
    },

    -- 石板路（5 个）
    ["石板路|e,wu"] = {
      name = "石板路",
      exits = {
        ["e"]  = "东天门|e,w",
        ["wu"] = "丹陛桥|ed,n,s,wd",
      },
    },

    ["石板路2|eu,n,w"] = {
      name = "石板路2",
      exits = {
        ["eu"] = "丹陛桥|ed,n,s,wd",
        ["n"]  = "喷水池|s,w",
        ["w"]  = "石板路3|e,n,w",
      },
    },

    ["石板路3|e,n,w"] = {
      name = "石板路3",
      exits = {
        ["e"] = "石板路2|eu,n,w",
        ["n"] = "百花园|e,s",
        ["w"] = "西天门|e,w",
      },
    },

    ["石板路4|n,su"] = {
      name = "石板路4",
      exits = {
        ["n"]  = "北天门|ne,s",
        ["su"] = "祈年殿|nd,ne,s",
      },
    },

    ["石板路5|nu,s"] = {
      name = "石板路5",
      exits = {
        ["nu"] = "圜丘|n,sd,se",
        ["s"]  = "南天门|n,se",
      },
    },
  },
}

-- 房间名 -&gt; 简写（全覆盖）
mapper.maps["tiantan"].mapAliases = {
  ["东天门"] = "dtm",
  ["西天门"] = "origin",
  ["北天门"] = "btm",
  ["南天门"] = "ntm",

  ["丹陛桥"] = "dbq",
  ["祈年殿"] = "qnd",
  ["皇穹宇"] = "hqy",
  ["圜丘"]   = "hq",

  ["宰牲房"] = "zsf",
  ["宰牲房2"] = "zsf2",

  ["小胡同"] = "xht",
  ["小胡同2"] = "xht2",

  ["百花园"] = "bhy",
  ["喷水池"] = "psc",

  ["石板路"] = "sbl",
  ["石板路2"] = "sbl2",
  ["石板路3"] = "sbl3",
  ["石板路4"] = "sbl4",
  ["石板路5"] = "sbl5",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>紫禁城 -zjc</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["zjc"] = {
  region = {
    key  = "zjc",
    name = "紫禁城",
  },

  mapNodes = {
    ["宫中小道1|e,s,w"] = {
      name = "宫中小道1",
      exits = {
        ["e"] = "景阳宫|n,w",
        ["s"] = "宫中小道2|e,n,s,w",
        ["w"] = "钟粹宫|e,w",
      },
    },

    ["宫中小道2|e,n,s,w"] = {
      name = "宫中小道2",
      exits = {
        ["e"] = "永和宫|n,w",
        ["n"] = "宫中小道1|e,s,w",
        ["s"] = "宫中小道3|e,n,w",
        ["w"] = "承乾宫|e,w",
      },
    },

    ["宫中小道3|e,n,w"] = {
      name = "宫中小道3",
      exits = {
        ["e"] = "延禧宫|w",
        ["n"] = "宫中小道2|e,n,s,w",
        ["w"] = "景仁宫|e,s,w",
      },
    },

    ["宫中小道4|n,ne,se"] = {
      name = "宫中小道4",
      exits = {
        ["n"]  = "宁寿宫花园|e,s",
        ["ne"] = "养性门|n,sw",
        ["se"] = "宁寿门|n,nw,w",
      },
    },

    ["乐寿堂|n,s,w"] = {
      name = "乐寿堂",
      exits = {
        ["n"] = "颐和轩|n,s",
        ["s"] = "养性殿|n,s",
        ["w"] = "宁寿宫花园|e,s",
      },
    },

    ["养性殿|n,s"] = {
      name = "养性殿",
      exits = {
        ["n"] = "乐寿堂|n,s,w",
        ["s"] = "养性门|n,sw",
      },
    },

    ["养性门|n,sw"] = {
      name = "养性门",
      exits = {
        ["n"]  = "养性殿|n,s",
        ["sw"] = "宫中小道4|n,ne,se",
      },
    },

    ["后宫门|n,s"] = {
      name = "后宫门",
      exits = {
        ["s"] = "颐和轩|n,s",
      },
    },

    ["宁寿宫花园|e,s"] = {
      name = "宁寿宫花园",
      exits = {
        ["e"] = "乐寿堂|n,s,w",
        ["s"] = "宫中小道4|n,ne,se",
      },
    },

    ["颐和轩|n,s"] = {
      name = "颐和轩",
      exits = {
        ["n"] = "后宫门|n,s",
        ["s"] = "乐寿堂|n,s,w",
      },
    },

    ["延禧宫|w"] = {
      name = "延禧宫",
      exits = {
        ["w"] = "宫中小道3|e,n,w",
      },
    },

    ["同顺斋|s"] = {
      name = "同顺斋",
      exits = {
        ["s"] = "永和宫|n,w",
      },
    },

    ["永和宫|n,w"] = {
      name = "永和宫",
      exits = {
        ["n"] = "同顺斋|s",
        ["w"] = "宫中小道2|e,n,s,w",
      },
    },

    ["承乾宫|e,w"] = {
      name = "承乾宫",
      exits = {
        ["e"] = "宫中小道2|e,n,s,w",
        -- 原来这里 ["w"] = "" 是空目标，会导致格式校验失败，已移除
      },
    },

    ["钟粹宫|e,w"] = {
      name = "钟粹宫",
      exits = {
        ["e"] = "宫中小道1|e,s,w",
        -- 原来这里 ["w"] = "" 是空目标，会导致格式校验失败，已移除
      },
    },

    ["御书房|s"] = {
      name = "御书房",
      exits = {
        ["s"] = "景阳宫|n,w",
      },
    },

    ["景阳宫|n,w"] = {
      name = "景阳宫",
      exits = {
        ["n"] = "御书房|s",
        ["w"] = "宫中小道1|e,s,w",
      },
    },

    ["上书房|e,w"] = {
      name = "上书房",
      exits = {
        ["e"] = "祀孔处|n,w",
        ["w"] = "乾清门|e,n,s,se,sw,w",
      },
    },

    ["东华门|w"] = {
      name = "东华门",
      exits = {
        ["w"] = "文华门|e,n,s,w",
      },
    },

    ["中右门|n,se"] = {
      name = "中右门",
      exits = {
        ["se"] = "殿前广场|e,n,ne,nw,s,w",
      },
    },

    ["中和殿|e,n,s,w"] = {
      name = "中和殿",
      exits = {
        ["n"] = "保和殿|n,s",
        ["s"] = "太和殿|n,s",
      },
    },

    ["中左门|n,sw"] = {
      name = "中左门",
      exits = {
        ["sw"] = "殿前广场|e,n,ne,nw,s,w",
      },
    },

    ["主敬殿|n,s"] = {
      name = "主敬殿",
      exits = {
        ["n"] = "文渊阁|n,s",
        ["s"] = "文华殿|e,n,s,w",
      },
    },

    ["丽景轩|s"] = {
      name = "丽景轩",
      exits = {
        ["s"] = "储秀宫|e,n,s,w",
      },
    },

    ["乾清宫|ed,n,s,wd"] = {
      name = "乾清宫",
      exits = {
        ["ed"] = "御茶房|s,wu",
        ["n"]  = "交泰殿|e,n,s,w",
        ["s"]  = "玉石通道|n,s",
        ["wd"] = "懋勤殿|eu,s",
      },
    },

    ["乾清门|e,n,s,se,sw,w"] = {
      name = "乾清门",
      exits = {
        ["e"]  = "上书房|e,w",
        ["n"]  = "玉石通道|n,s",
        ["s"]  = "小广场|e,n,s,w",
        ["se"] = "后左门|nw,s",
        ["sw"] = "后右门|ne,s",
        ["w"]  = "敬事房|e,w",
      },
    },

    ["交泰殿|e,n,s,w"] = {
      name = "交泰殿",
      exits = {
        ["e"] = "景和门|e,w",
        ["n"] = "坤宁宫|n,s",
        ["s"] = "乾清宫|ed,n,s,wd",
        ["w"] = "隆福门|e,w",
      },
    },

    ["传心殿|w"] = {
      name = "传心殿",
      exits = {
        ["w"] = "文华殿|e,n,s,w",
      },
    },

    ["体元殿|n,s"] = {
      name = "体元殿",
      exits = {
        ["n"] = "长春宫|e,s",
        ["s"] = "太极殿|e,n",
      },
    },

    ["体和殿|n,s"] = {
      name = "体和殿",
      exits = {
        ["n"] = "储秀宫|e,n,s,w",
        ["s"] = "翊坤宫|e,n,w",
      },
    },

    ["保和殿|n,s"] = {
      name = "保和殿",
      exits = {
        ["n"] = "小广场|e,n,s,w",
        ["s"] = "中和殿|e,n,s,w",
      },
    },

    ["储秀宫|e,n,s,w"] = {
      name = "储秀宫",
      exits = {
        ["n"] = "丽景轩|s",
        ["s"] = "体和殿|n,s",
        ["w"] = "咸福宫|e,n",
      },
    },

    ["养心殿|e,n"] = {
      name = "养心殿",
      exits = {
        ["e"] = "内右门|e,n,w",
        ["n"] = "内膳房|n,s",
      },
    },

    ["内右门|e,n,w"] = {
      name = "内右门",
      exits = {
        ["e"] = "月化门|n,s,w",
        ["w"] = "养心殿|e,n",
      },
    },

    ["内奏事房|n,s"] = {
      name = "内奏事房",
      exits = {
        ["n"] = "月化门|n,s,w",
        ["s"] = "南书房|e,n",
      },
    },

    ["内左门|e,n,w"] = {
      name = "内左门",
      exits = {
        ["e"] = "斋宫|n,w",
        ["w"] = "日精门|e,n,s",
      },
    },

    ["内膳房|n,s"] = {
      name = "内膳房",
      exits = {
        ["n"] = "永寿宫|e,s,w",
        ["s"] = "养心殿|e,n",
      },
    },

    ["内金水桥|e,n,ne,nw,s,w"] = {
      name = "内金水桥",
      exits = {
        ["e"]  = "协和门|e,w",
        ["n"]  = "太和门|n,s",
        ["ne"] = "昭德门|n,sw",
        ["nw"] = "贞度门|n,se",
        ["s"]  = "午门|n,s",
        ["w"]  = "熙和门|e,w",
      },
    },

    ["内阁|e"] = {
      name = "内阁",
      exits = {
        ["e"] = "文华殿|e,n,s,w",
      },
    },

    ["凝道殿|w"] = {
      name = "凝道殿",
      exits = {
        ["w"] = "操场|e,n,s,w",
      },
    },

    ["午门|n,s"] = {
      name = "午门",
      exits = {
        ["n"] = "内金水桥|e,n,ne,nw,s,w",
        ["s"] = "端门|n,s",
      },
    },

    ["协和门|e,w"] = {
      name = "协和门",
      exits = {
        ["e"] = "文华门|e,n,s,w",
        ["w"] = "内金水桥|e,n,ne,nw,s,w",
      },
    },

    ["南书房|e,n"] = {
      name = "南书房",
      exits = {
        ["e"] = "敬事房|e,w",
        ["n"] = "内奏事房|n,s",
      },
    },

    ["右翼门|e,s,w"] = {
      name = "右翼门",
      exits = {
        ["e"] = "殿前广场|e,n,ne,nw,s,w",
        ["s"] = "贞度门|n,se",
      },
    },

    ["同道堂|s"] = {
      name = "同道堂",
      exits = {
        ["s"] = "咸福宫|e,n",
      },
    },

    ["后右门|ne,s"] = {
      name = "后右门",
      exits = {
        ["ne"] = "乾清门|e,n,s,se,sw,w",
      },
    },

    ["后左门|nw,s"] = {
      name = "后左门",
      exits = {
        ["nw"] = "乾清门|e,n,s,se,sw,w",
      },
    },

    ["后殿|n,s"] = {
      name = "后殿",
      exits = {
        ["n"] = "寿安宫|n,s",
        ["s"] = "寿康宫|e,n",
      },
    },

    ["咸福宫|e,n"] = {
      name = "咸福宫",
      exits = {
        ["e"] = "储秀宫|e,n,s,w",
        ["n"] = "同道堂|s",
      },
    },

    ["坤宁宫|n,s"] = {
      name = "坤宁宫",
      exits = {
        ["n"] = "坤宁门|e,n,s,w",
        ["s"] = "交泰殿|e,n,s,w",
      },
    },

    ["坤宁门|e,n,s,w"] = {
      name = "坤宁门",
      exits = {
        ["n"] = "御花园|e,enter,n,s,u",
        ["s"] = "坤宁宫|n,s",
      },
    },

    ["大佛堂|s"] = {
      name = "大佛堂",
      exits = {
        ["s"] = "慈宁宫|e,n,s,w",
      },
    },

    ["天安门|n,s"] = {
      name = "天安门",
      exits = {
        ["n"] = "端门|n,s",
      },
    },

    ["太和殿|n,s"] = {
      name = "太和殿",
      exits = {
        ["n"] = "中和殿|e,n,s,w",
        ["s"] = "殿前广场|e,n,ne,nw,s,w",
      },
    },

    ["太和门|n,s"] = {
      name = "太和门",
      exits = {
        ["n"] = "殿前广场|e,n,ne,nw,s,w",
        ["s"] = "内金水桥|e,n,ne,nw,s,w",
      },
    },

    ["太极殿|e,n"] = {
      name = "太极殿",
      exits = {
        ["e"] = "永寿宫|e,s,w",
        ["n"] = "体元殿|n,s",
      },
    },

    ["奉先殿|s"] = {
      name = "奉先殿",
      exits = {
        ["s"] = "空旷广场|e,n,s,w",
      },
    },

    ["宁寿宫|s"] = {
      name = "宁寿宫",
      exits = {
        ["s"] = "皇极殿|n,s",
      },
    },

    ["宁寿门|n,nw,w"] = {
      name = "宁寿门",
      exits = {
        ["n"]  = "皇极殿|n,s",
        ["nw"] = "宫中小道4|n,ne,se",
        ["w"]  = "空旷广场|e,n,s,w",
      },
    },

    ["实录库|w"] = {
      name = "实录库",
      exits = {
        ["w"] = "红本库|e,n",
      },
    },

    ["寿安宫|n,s"] = {
      name = "寿安宫",
      exits = {
        ["n"] = "英华殿|n,s",
        ["s"] = "后殿|n,s",
      },
    },

    ["寿康宫|e,n"] = {
      name = "寿康宫",
      exits = {
        ["e"] = "慈宁宫|e,n,s,w",
        ["n"] = "后殿|n,s",
      },
    },

    ["小广场|e,n,s,w"] = {
      name = "小广场",
      exits = {
        ["e"] = "景运门|e,w",
        ["n"] = "乾清门|e,n,s,se,sw,w",
        ["s"] = "保和殿|n,s",
        ["w"] = "隆宗门|e,w",
      },
    },

    ["左翼门|e,s,w"] = {
      name = "左翼门",
      exits = {
        ["s"] = "昭德门|n,sw",
        ["w"] = "殿前广场|e,n,ne,nw,s,w",
      },
    },

    ["御景亭|d"] = {
      name = "御景亭",
      exits = {
        ["d"] = "御花园|e,enter,n,s,u",
      },
    },

    ["御花园|e,enter,n,s,u"] = {
      name = "御花园",
      exits = {
        ["e"]     = "绛雪轩|w",
        ["enter"] = "钦安殿|out",
        ["n"]     = "顺贞门|n,s",
        ["s"]     = "坤宁门|e,n,s,w",
        ["u"]     = "御景亭|d",
      },
    },

    ["御茶房|s,wu"] = {
      name = "御茶房",
      exits = {
        ["s"]  = "端凝殿|n,s",
        ["wu"] = "乾清宫|ed,n,s,wd",
      },
    },

    ["御茶膳房|w"] = {
      name = "御茶膳房",
      exits = {
        ["w"] = "箭亭|e,n,s",
      },
    },

    ["御药房|n,s"] = {
      name = "御药房",
      exits = {
        ["n"] = "日精门|e,n,s",
        ["s"] = "祀孔处|n,w",
      },
    },

    ["慈宁宫|e,n,s,w"] = {
      name = "慈宁宫",
      exits = {
        ["e"] = "隆宗门|e,w",
        ["n"] = "大佛堂|s",
        ["s"] = "慈宁门|n,s",
        ["w"] = "寿康宫|e,n",
      },
    },

    ["慈宁花园|e,n"] = {
      name = "慈宁花园",
      exits = {
        ["e"] = "造办处|s,w",
        ["n"] = "慈宁门|n,s",
      },
    },

    ["慈宁门|n,s"] = {
      name = "慈宁门",
      exits = {
        ["n"] = "慈宁宫|e,n,s,w",
        ["s"] = "慈宁花园|e,n",
      },
    },

    ["懋勤殿|eu,s"] = {
      name = "懋勤殿",
      exits = {
        ["eu"] = "乾清宫|ed,n,s,wd",
        ["s"]  = "批本处|n,s",
      },
    },

    ["批本处|n,s"] = {
      name = "批本处",
      exits = {
        ["n"] = "懋勤殿|eu,s",
        ["s"] = "月化门|n,s,w",
      },
    },

    ["操场|e,n,s,w"] = {
      name = "操场",
      exits = {
        ["e"] = "凝道殿|w",
        ["n"] = "武英殿|n,s",
        ["s"] = "武英门|e,n,s,w",
        ["w"] = "焕章殿|e",
      },
    },

    ["敬事房|e,w"] = {
      name = "敬事房",
      exits = {
        ["e"] = "乾清门|e,n,s,se,sw,w",
        ["w"] = "南书房|e,n",
      },
    },

    ["敬思殿|n,s"] = {
      name = "敬思殿",
      exits = {
        ["s"] = "武英殿|n,s",
      },
    },

    ["文华殿|e,n,s,w"] = {
      name = "文华殿",
      exits = {
        ["e"] = "传心殿|w",
        ["n"] = "主敬殿|n,s",
        ["s"] = "文华门|e,n,s,w",
        ["w"] = "内阁|e",
      },
    },

    ["文华门|e,n,s,w"] = {
      name = "文华门",
      exits = {
        ["e"] = "东华门|w",
        ["n"] = "文华殿|e,n,s,w",
        ["s"] = "红本库|e,n",
        ["w"] = "协和门|e,w",
      },
    },

    ["文渊阁|n,s"] = {
      name = "文渊阁",
      exits = {
        ["s"] = "主敬殿|n,s",
      },
    },

    ["斋宫|n,w"] = {
      name = "斋宫",
      exits = {
        ["n"] = "诚肃殿|n,s",
        ["w"] = "内左门|e,n,w",
      },
    },

    ["日精门|e,n,s"] = {
      name = "日精门",
      exits = {
        ["e"] = "内左门|e,n,w",
        ["n"] = "端凝殿|n,s",
        ["s"] = "御药房|n,s",
      },
    },

    ["昭德门|n,sw"] = {
      name = "昭德门",
      exits = {
        ["n"]  = "左翼门|e,s,w",
        ["sw"] = "内金水桥|e,n,ne,nw,s,w",
      },
    },

    ["景仁宫|e,s,w"] = {
      name = "景仁宫",
      exits = {
        ["e"] = "宫中小道3|e,n,w",
        ["s"] = "诚肃殿|n,s",
      },
    },

    ["景和门|e,w"] = {
      name = "景和门",
      exits = {
        ["w"] = "交泰殿|e,n,s,w",
      },
    },

    ["景运门|e,w"] = {
      name = "景运门",
      exits = {
        ["e"] = "空旷广场|e,n,s,w",
        ["w"] = "小广场|e,n,s,w",
      },
    },

    ["月化门|n,s,w"] = {
      name = "月化门",
      exits = {
        ["n"] = "批本处|n,s",
        ["s"] = "内奏事房|n,s",
        ["w"] = "内右门|e,n,w",
      },
    },

    ["武英殿|n,s"] = {
      name = "武英殿",
      exits = {
        ["n"] = "敬思殿|n,s",
        ["s"] = "操场|e,n,s,w",
      },
    },

    ["武英门|e,n,s,w"] = {
      name = "武英门",
      exits = {
        ["e"] = "熙和门|e,w",
        ["n"] = "操场|e,n,s,w",
        ["s"] = "灯笼库|n",
        ["w"] = "西华门|e",
      },
    },

    ["殿前广场|e,n,ne,nw,s,w"] = {
      name = "殿前广场",
      exits = {
        ["e"]  = "左翼门|e,s,w",
        ["n"]  = "太和殿|n,s",
        ["ne"] = "中左门|n,sw",
        ["nw"] = "中右门|n,se",
        ["s"]  = "太和门|n,s",
        ["w"]  = "右翼门|e,s,w",
      },
    },

    ["永寿宫|e,s,w"] = {
      name = "永寿宫",
      exits = {
        ["s"] = "内膳房|n,s",
        ["w"] = "太极殿|e,n",
      },
    },

    ["灯笼库|n"] = {
      name = "灯笼库",
      exits = {
        ["n"] = "武英门|e,n,s,w",
      },
    },

    ["焕章殿|e"] = {
      name = "焕章殿",
      exits = {
        ["e"] = "操场|e,n,s,w",
      },
    },

    ["熙和门|e,w"] = {
      name = "熙和门",
      exits = {
        ["e"] = "内金水桥|e,n,ne,nw,s,w",
        ["w"] = "武英门|e,n,s,w",
      },
    },

    ["玉石通道|n,s"] = {
      name = "玉石通道",
      exits = {
        ["n"] = "乾清宫|ed,n,s,wd",
        ["s"] = "乾清门|e,n,s,se,sw,w",
      },
    },

    ["皇极殿|n,s"] = {
      name = "皇极殿",
      exits = {
        ["n"] = "宁寿宫|s",
        ["s"] = "宁寿门|n,nw,w",
      },
    },

    ["祀孔处|n,w"] = {
      name = "祀孔处",
      exits = {
        ["n"] = "御药房|n,s",
        ["w"] = "上书房|e,w",
      },
    },

    ["神武门|e,n,s,w"] = {
      name = "神武门",
      exits = {
        ["s"] = "顺贞门|n,s",
      },
    },

    ["空旷广场|e,n,s,w"] = {
      name = "空旷广场",
      exits = {
        ["e"] = "宁寿门|n,nw,w",
        ["n"] = "奉先殿|s",
        ["s"] = "箭亭|e,n,s",
        ["w"] = "景运门|e,w",
      },
    },

    ["端凝殿|n,s"] = {
      name = "端凝殿",
      exits = {
        ["n"] = "御茶房|s,wu",
        ["s"] = "日精门|e,n,s",
      },
    },

    ["端门|n,s"] = {
      name = "端门",
      exits = {
        ["n"] = "午门|n,s",
        ["s"] = "天安门|n,s",
      },
    },

    ["箭亭|e,n,s"] = {
      name = "箭亭",
      exits = {
        ["e"] = "御茶膳房|w",
        ["n"] = "空旷广场|e,n,s,w",
      },
    },

    ["红本库|e,n"] = {
      name = "红本库",
      exits = {
        ["e"] = "实录库|w",
        ["n"] = "文华门|e,n,s,w",
      },
    },

    ["绛雪轩|w"] = {
      name = "绛雪轩",
      exits = {
        ["w"] = "御花园|e,enter,n,s,u",
      },
    },

    ["翊坤宫|e,n,w"] = {
      name = "翊坤宫",
      exits = {
        ["n"] = "体和殿|n,s",
        ["w"] = "长春宫|e,s",
      },
    },

    ["英华殿|n,s"] = {
      name = "英华殿",
      exits = {
        ["s"] = "寿安宫|n,s",
      },
    },

    ["西华门|e"] = {
      name = "西华门",
      exits = {
        ["e"] = "武英门|e,n,s,w",
      },
    },

    ["诚肃殿|n,s"] = {
      name = "诚肃殿",
      exits = {
        ["n"] = "景仁宫|e,s,w",
        ["s"] = "斋宫|n,w",
      },
    },

    ["贞度门|n,se"] = {
      name = "贞度门",
      exits = {
        ["n"]  = "右翼门|e,s,w",
        ["se"] = "内金水桥|e,n,ne,nw,s,w",
      },
    },

    ["造办处|s,w"] = {
      name = "造办处",
      exits = {
        ["w"] = "慈宁花园|e,n",
      },
    },

    ["钦安殿|out"] = {
      name = "钦安殿",
      exits = {
        ["out"] = "御花园|e,enter,n,s,u",
      },
    },

    ["长春宫|e,s"] = {
      name = "长春宫",
      exits = {
        ["e"] = "翊坤宫|e,n,w",
        ["s"] = "体元殿|n,s",
      },
    },

    ["隆宗门|e,w"] = {
      name = "隆宗门",
      exits = {
        ["e"] = "小广场|e,n,s,w",
        ["w"] = "慈宁宫|e,n,s,w",
      },
    },

    ["隆福门|e,w"] = {
      name = "隆福门",
      exits = {
        ["e"] = "交泰殿|e,n,s,w",
      },
    },

    ["顺贞门|n,s"] = {
      name = "顺贞门",
      exits = {
        ["n"] = "神武门|e,n,s,w",
        ["s"] = "御花园|e,enter,n,s,u",
      },
    },
  },
}

-- 覆盖 mapper.maps["zjc"].mapNodes 中出现的所有房间名
mapper.maps["zjc"].mapAliases = {
  -- 宫中小道 &amp; 宁寿宫区域
  ["宫中小道1"] = "gzxd1",
  ["宫中小道2"] = "gzxd2",
  ["宫中小道3"] = "gzxd3",
  ["宫中小道4"] = "gzxd4",
  ["宁寿宫花园"] = "nsghy",
  ["宁寿门"] = "nsm",
  ["皇极殿"] = "hjd",
  ["宁寿宫"] = "nsg",

  ["乐寿堂"] = "lst",
  ["养性殿"] = "yxd",
  ["养性门"] = "yxm",
  ["颐和轩"] = "yhx",
  ["后宫门"] = "hgm",

  -- 东六宫
  ["景阳宫"] = "jyg",
  ["御书房"] = "ysf",
  ["钟粹宫"] = "zcg",
  ["承乾宫"] = "cgg",
  ["景仁宫"] = "jrg",
  ["延禧宫"] = "yxg",
  ["永和宫"] = "yhg2",
  ["同顺斋"] = "tsz",

  -- 外朝三大殿
  ["太和殿"] = "thd",
  ["中和殿"] = "zhd",
  ["保和殿"] = "bhd",
  ["太和门"] = "thm",
  ["殿前广场"] = "dqgc",
  ["中左门"] = "zzm",
  ["中右门"] = "zym",
  ["左翼门"] = "zym2",
  ["右翼门"] = "yym",

  -- 午门-天安门轴线
  ["午门"] = "wm",
  ["端门"] = "dm",
  ["天安门"] = "origin",
  ["内金水桥"] = "njsq",
  ["协和门"] = "xhm",
  ["熙和门"] = "xhm2",
  ["昭德门"] = "zdm",
  ["贞度门"] = "zdm2",

  -- 文华殿 / 文华门区域
  ["文华殿"] = "whd",
  ["文华门"] = "whm",
  ["东华门"] = "dhm",
  ["主敬殿"] = "zjd",
  ["文渊阁"] = "wyg",
  ["传心殿"] = "cxd",
  ["内阁"] = "ng",

  -- 乾清宫-交泰殿-坤宁宫轴线 &amp; 小广场
  ["乾清门"] = "qqm",
  ["乾清宫"] = "qqg",
  ["交泰殿"] = "jtd",
  ["坤宁宫"] = "kng",
  ["坤宁门"] = "knm",
  ["小广场"] = "xgc",
  ["玉石通道"] = "ystd",
  ["景和门"] = "jhm",
  ["隆福门"] = "lfm",

  -- 御花园 &amp; 北门
  ["御花园"] = "yhy",
  ["绛雪轩"] = "jxx",
  ["钦安殿"] = "qad",
  ["御景亭"] = "yjt",
  ["顺贞门"] = "szm",
  ["神武门"] = "swm",

  -- 西六宫 / 内廷西侧
  ["储秀宫"] = "cxg",
  ["丽景轩"] = "ljx",
  ["体和殿"] = "thd2",
  ["翊坤宫"] = "ykg",
  ["长春宫"] = "ccg",
  ["体元殿"] = "tyd",
  ["太极殿"] = "tjd",
  ["咸福宫"] = "xfg",
  ["同道堂"] = "tdt",

  -- 养心殿系统（南书房、批本处等）
  ["养心殿"] = "yxd2",
  ["内右门"] = "nym",
  ["月化门"] = "yhm2",
  ["批本处"] = "pbc",
  ["懋勤殿"] = "mqd",
  ["内奏事房"] = "nzsf",
  ["南书房"] = "nsf",
  ["敬事房"] = "jsf",
  ["内左门"] = "nzm",
  ["斋宫"] = "zg",
  ["诚肃殿"] = "csd",
  ["日精门"] = "rjm",
  ["御药房"] = "yyf",
  ["内膳房"] = "nsf2",
  ["永寿宫"] = "ysg",
  ["御茶房"] = "ycf",

  -- 慈宁宫系统
  ["慈宁宫"] = "cng",
  ["大佛堂"] = "dft",
  ["慈宁门"] = "cnm",
  ["慈宁花园"] = "cnhy",
  ["造办处"] = "zbc",
  ["寿康宫"] = "skg",
  ["寿安宫"] = "sag",
  ["后殿"] = "hd",
  ["英华殿"] = "yhd2",
  ["隆宗门"] = "lzm",

  -- 空旷广场 / 宁寿门-奉先殿一带
  ["空旷广场"] = "kkgc",
  ["景运门"] = "jym",
  ["奉先殿"] = "fxd",
  ["箭亭"] = "jt",
  ["御茶膳房"] = "ycsf",
  ["红本库"] = "hbk",
  ["实录库"] = "slk",

  -- 武英殿系统（操场、武英门等）
  ["操场"] = "cc2",
  ["凝道殿"] = "ndd",
  ["武英殿"] = "wyd",
  ["敬思殿"] = "jsd",
  ["武英门"] = "wym",
  ["西华门"] = "xhm3",
  ["灯笼库"] = "dlk",
  ["焕章殿"] = "hzd",

  -- 祀孔处 / 上书房
  ["上书房"] = "ssf",
  ["祀孔处"] = "skc",
}

</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>康亲王府 - kqwf</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["kqwf"] = {
  region = {
    key  = "kqwf",
    name = "康亲王府",
  },

  mapNodes = {

    ["东厢房|w"] = {
      name = "东厢房",
      exits = {
        ["w"] = "庭院|e,n,s,w",
      },
    },

    ["中门|n,s"] = {
      name = "中门",
      exits = {
        ["n"] = "庭院|e,n,s,w",
        ["s"] = "大厅|e,n,s,w",
      },
    },

    ["佛堂|w"] = {
      name = "佛堂",
      exits = {
        ["w"] = "小花园|e,s,w",
      },
    },

    ["兵器库|w"] = {
      name = "兵器库",
      exits = {
        ["w"] = "后花园|e,n,s,w",
      },
    },

    ["内厩|e"] = {
      name = "内厩",
      exits = {
        ["e"] = "王府马厩|n,w",
      },
    },

    -- ===== 厢房（重名处理）=====
    ["厢房|e"] = {
      name = "厢房",
      exits = {
        ["e"] = "小院|e,n,s,w",
      },
    },

    ["厢房|n"] = {
      name = "厢房2",
      exits = {
        ["n"] = "小院|e,n,s,w",
      },
    },

    ["厢房|s"] = {
      name = "厢房3",
      exits = {
        ["s"] = "小院|e,n,s,w",
      },
    },

    ["厨房|e"] = {
      name = "厨房",
      exits = {
        ["e"] = "后花园|e,n,s,w",
      },
    },

    ["后堂|e,n,s,w"] = {
      name = "后堂",
      exits = {
        ["e"] = "走廊|e,w",
        ["n"] = "天井|e,n,s,w",
        ["s"] = "后花园|e,n,s,w",
        ["w"] = "走廊|e,sw,w",
      },
    },

    ["后花园|e,n,s,w"] = {
      name = "后花园",
      exits = {
        ["e"] = "兵器库|w",
        ["n"] = "后堂|e,n,s,w",
        ["s"] = "石屋|n,s",
        ["w"] = "厨房|e",
      },
    },

    ["大厅|e,n,s,w"] = {
      name = "大厅",
      exits = {
        ["e"] = "走廊|s,w",
        ["n"] = "中门|n,s",
        ["s"] = "天井|e,n,s,w",
        ["w"] = "走廊|e,s",
      },
    },

    ["天井|e,n,s,w"] = {
      name = "天井",
      exits = {
        ["e"] = "走廊|n,w",
        ["n"] = "大厅|e,n,s,w",
        ["s"] = "后堂|e,n,s,w",
        ["w"] = "走廊|e,n",
      },
    },

    ["小花园|e,s,w"] = {
      name = "小花园",
      exits = {
        ["e"] = "佛堂|w",
        ["s"] = "康亲王书房|n",
        ["w"] = "走廊|e,w",
      },
    },

    ["小院|e,n,s,w"] = {
      name = "小院",
      exits = {
        ["e"] = "走廊|e,sw,w",
        ["n"] = "厢房|s",
        ["s"] = "厢房|n",
        ["w"] = "厢房|e",
      },
    },

    ["庭院|e,n,s,w"] = {
      name = "庭院",
      exits = {
        ["e"] = "东厢房|w",
        ["n"] = "王府大门|n,s",
        ["s"] = "中门|n,s",
        ["w"] = "西厢房|e",
      },
    },

    ["康亲王书房|n"] = {
      name = "康亲王书房",
      exits = {
        ["n"] = "小花园|e,s,w",
      },
    },

    ["王府大门|n,s"] = {
      name = "王府大门",
      exits = {
        ["s"] = "庭院|e,n,s,w",
      },
    },

    ["王府马厩|n,w"] = {
      name = "王府马厩",
      exits = {
        ["n"] = "走廊|ne,s",
        ["w"] = "内厩|e",
      },
    },

    ["石屋|n,s"] = {
      name = "石屋",
      exits = {
        ["n"] = "后花园|e,n,s,w",
        ["leap;leap s"] = "小堂|n,s",
      }
    },

["牢房|n"] = {
  name = "牢房",
  exits = {
    ["n"] = "小堂|n,s",
  },
},

    ["小堂|n,s"] = {
  name = "小堂",
  exits = {
    ["n"] = "石屋|n,s",
    ["s"] = "牢房|n",
  },
  },

    ["西厢房|e"] = {
      name = "西厢房",
      exits = {
        ["e"] = "庭院|e,n,s,w",
      },
    },

    -- ===== 走廊（重名处理）=====
    ["走廊|e,n"] = {
      name = "走廊1",
      exits = {
        ["e"] = "天井|e,n,s,w",
        ["n"] = "走廊|e,s",
      },
    },

    ["走廊|e,s"] = {
      name = "走廊2",
      exits = {
        ["e"] = "大厅|e,n,s,w",
        ["s"] = "走廊|e,n",
      },
    },

    ["走廊|e,sw,w"] = {
      name = "走廊3",
      exits = {
        ["e"]  = "后堂|e,n,s,w",
        ["sw"] = "走廊|ne,s",
        ["w"]  = "小院|e,n,s,w",
      },
    },

    ["走廊|e,w"] = {
      name = "走廊",
      exits = {
        ["e"] = "小花园|e,s,w",
        ["w"] = "后堂|e,n,s,w",
      },
    },

    ["走廊|n,w"] = {
      name = "走廊5",
      exits = {
        ["n"] = "走廊|s,w",
        ["w"] = "天井|e,n,s,w",
      },
    },

    ["走廊|ne,s"] = {
      name = "走廊6",
      exits = {
        ["ne"] = "走廊|e,sw,w",
        ["s"]  = "王府马厩|n,w",
      },
    },

    ["走廊|s,w"] = {
      name = "走廊7",
      exits = {
        ["s"] = "走廊|n,w",
        ["w"] = "大厅|e,n,s,w",
      },
    },
  },
}

mapper.maps["kqwf"].mapAliases = {

  -- ===== 原点 =====
  ["庭院"] = "ty",

  -- ===== 主体 =====
  ["王府大门"] = "origin",
  ["中门"]     = "zm",
  ["大厅"]     = "dt",
  ["天井"]     = "tj",
  ["后堂"]     = "ht",
  ["后花园"]   = "hhy",

  -- ===== 房舍 =====
  ["东厢房"] = "dxf",
  ["西厢房"] = "xxf",
  ["小院"]   = "xy",

  ["厢房"] = "xf",
  ["厢房2"] = "xf2",
  ["厢房3"] = "xf3",

  -- ===== 花园 / 宗教 =====
  ["小花园"]       = "xhy",
  ["佛堂"]         = "ft",
  ["康亲王书房"]   = "kqwsf",

  -- ===== 后勤 =====
  ["厨房"]   = "cf",
  ["兵器库"] = "bqk",
  ["石屋"]   = "sw",
  ["牢房"] = "lf",
  ["小堂"] = "xt",

  -- ===== 马厩 =====
  ["王府马厩"] = "wfmj",
  ["内厩"]     = "nj",

  -- ===== 走廊 =====

  ["走廊1"] = "zl1",
  ["走廊2"] = "zl2",
  ["走廊3"] = "zl3",
  ["走廊"] = "zl",
  ["走廊5"] = "zl5",
  ["走廊6"] = "zl6",
  ["走廊7"] = "zl7",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>北京 - bj</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["bj"] = {
  region = {
    key  = "bj",
    name = "北京",
  },

  mapNodes = {
      ["城墙|e,w"] = {
      name = "城墙",
      exits = {
        ["e;d"] = "永安门|e,n,s,u,w",
        ["s"] = "青石大道|n,se,sw",
      },
    },
    ["土路|e,w"] = {
  name = "土路",
  exits = {
    ["e"] = "永安门|e,n,s,u,w",

  },
},

    ["永安门|e,n,s,u,w"] = {
      name = "永安门",
      exits = {
        ["n"] = "正阳门外大街2|e,n,s,w",
        ["s"] = "青石大道|n,se,sw",
        ["u;w"] = "城墙|e,w",
        ["w"] = "土路|e,w",
      },
    },
    
      
  ["大院|e,n,w"] = {
    name = "大院",
    exits = {
      ["e"] = "鳌府大门|e,w",
      ["n"] = "鳌府厨房|s",
      ["w"] = "鳌府后院|e,n,w",
    },
  },
  ["小酒馆|e"] = {
    name = "小酒馆",
    exits = {
      ["e"] = "王府井大街1|e,n,s,w",
    },
  },

  ["武胜镖局|n,w"] = {
    name = "武胜镖局",
    exits = {
      ["n"] = "镖局大院|s",
      ["w"] = "王府井大街1|e,n,s,w",
    },
  },
 
  ["王府井大街1|e,n,s,w"] = {
    name = "王府井大街1",
    exits = {
      ["e"] = "武胜镖局|n,w",
      ["n"] = "朝阳门大街|e,n,s,w",
      ["s"] = "王府井大街2|n,s,w",
      ["w"] = "小酒馆|e",
    },
  },
  ["王府井大街2|n,s,w"] = {
    name = "王府井大街2",
    exits = {
      ["n"] = "王府井大街1|e,n,s,w",
      ["s"] = "崇文门|e,n,s,u,w",
      ["w"] = "街道|e,w",
    },
  },
    ["崇文门|e,n,s,u,w"] = {
      name = "崇文门",
      exits = {
        ["e"] = "东便门|n,s,u,w",
        ["n"] = "王府井大街2|n,s,w",
        ["w"] = "东长安街|e,n,s,w",
        ["s"] = "崇文门外大街|n,s,w",
      },
    },   
  ["街道|e,w"] = {
    name = "街道",
    exits = {
      ["e"] = "王府井大街2|n,s,w",
      ["w"] = "鳌府大门|e,w",
    },
  },
  ["镖局大院|s"] = {
    name = "镖局大院",
    exits = {
      ["s"] = "武胜镖局|n,w",
    },
  },
  ["鳌府厨房|s"] = {
    name = "鳌府厨房",
    exits = {
      ["s"] = "大院|e,n,w",
    },
  },
  ["鳌府后院|e,n,w"] = {
    name = "鳌府后院",
    exits = {
      ["e"] = "大院|e,n,w",
      ["w"] = "鳌拜卧房|e",
    },
  },
  ["鳌府大门|e,w"] = {
    name = "鳌府大门",
    exits = {
      ["e"] = "街道|e,w",
      ["w"] = "大院|e,n,w",
    },
  },
  ["鳌拜卧房|e"] = {
    name = "鳌拜卧房",
    exits = {
      ["e"] = "鳌府后院|e,n,w",
    },
  },  
    ["正阳门外大街|e,n,nw,s,w"] = {
      name = "正阳门外大街",
      exits = {
        ["e"]  = "正阳门东大街|e,s,w",
        ["n"]  = "正阳门|n,s,u",
        ["nw"] = "长街|enter,se,sw",
        ["s"]  = "正阳门外大街1|e,n,s,w",
        ["w"]  = "天桥|e,n,ne,nw,s,se,sw,w",
      },
    },

    ["正阳门外大街1|e,n,s,w"] = {
      name = "正阳门外大街1",
      exits = {
        ["e"] = "辟才胡同|e,s,w",
        ["n"] = "正阳门外大街|e,n,nw,s,w",
        ["s"] = "正阳门外大街2|e,n,s,w",
        ["w"] = "丰盛胡同|e,s,w",
      },
    },

    ["正阳门外大街2|e,n,s,w"] = {
      name = "正阳门外大街2",
      exits = {
        ["e"] = "甜水井胡同|n,w",
        ["n"] = "正阳门外大街1|e,n,s,w",
        ["s"] = "永安门|e,n,s,u,w",
        ["w"] = "夏家胡同|e,n,w",
      },
    },  
    ["丰盛胡同|e,s,w"] = {
      name = "丰盛胡同",
      exits = {
        ["e"] = "正阳门外大街1|e,n,s,w",
        ["s"] = "夏家胡同|e,n,w",
        ["w"] = "右安门大街|e,n,s",
      },
    },

    ["右安门|e,n,u,w"] = {
      name = "右安门",
      exits = {
        ["n"] = "右安门大街|e,n,s",
      },
    },

    ["右安门大街|e,n,s"] = {
      name = "右安门大街",
      exits = {
        ["e"] = "丰盛胡同|e,s,w",
        ["n"] = "菜市口|e,n,s,w",
        ["s"] = "右安门|e,n,u,w",
      },
    },

    ["夏家胡同|e,n,w"] = {
      name = "夏家胡同",
      exits = {
        ["e"] = "正阳门外大街2|e,n,s,w",
        ["n"] = "丰盛胡同|e,s,w",
        ["w"] = "梅记包子铺|e",
      },
    },

    ["梅记包子铺|e"] = {
      name = "梅记包子铺",
      exits = {
        ["e"] = "夏家胡同|e,n,w",
      },
    },

["青石大道|n,se,sw"] = {
  name = "青石大道",
  exits = {
    ["n"] = "永安门|e,n,s,u,w",
    ["sw"] = "青石大道1|n,ne,sw",
  },
},
["青石大道1|n,ne,sw"] = {
  name = "青石大道1",
  exits = {
    ["n"] = "高粱地|s",
    ["ne"] = "青石大道|n,se,sw",
    ["sw"] = "青石大道2|ne,s,w",
  },
},
["青石大道2|ne,s,w"] = {
  name = "青石大道2",
  exits = {
    ["ne"] = "青石大道1|n,ne,sw",
    ["s"] = "",
    ["w"] = "白虎堂大门|e,enter",
  },
},

["白虎堂大门|e,enter"] = {
  name = "白虎堂大门",
  exits = {
    ["e"] = "青石大道2|ne,s,w",
    ["enter"] = "白虎堂大厅|out",
  },
},

["白虎堂大厅|out"] = {
  name = "白虎堂大厅",
  exits = {
    ["out"] = "白虎堂大门|e,enter",
  },
},

["高粱地|s"] = {
  name = "高粱地",
  exits = {
    ["s"] = "青石大道1|n,ne,sw",
  },
},

    ["西天门|e,w"] = {
      name = "西天门",
      exits = {
        ["w"] = "辟才胡同|e,s,w",
      },
    },

    ["辟才胡同|e,s,w"] = {
      name = "辟才胡同",
      exits = {
        ["e"] = "西天门|e,w",
        ["s"] = "甜水井胡同|n,w",
        ["w"] = "正阳门外大街1|e,n,s,w",
      },
    },

    ["甜水井胡同|n,w"] = {
      name = "甜水井胡同",
      exits = {
        ["n"] = "辟才胡同|e,s,w",
        ["w"] = "正阳门外大街2|e,n,s,w",
      },
    },

    ["崇文门外大街|n,s,w"] = {
      name = "崇文门外大街",
      exits = {
        ["n"] = "崇文门|e,n,s,u,w",
        ["s"] = "崇文门外大街1|n,s,w",
        ["w"] = "正阳门东大街|e,s,w",
      },
    },

    ["崇文门外大街1|n,s,w"] = {
      name = "崇文门外大街1",
      exits = {
        ["n"] = "崇文门外大街|n,s,w",
        ["s"] = "广渠门大街|e,n,nw,s",
        ["w"] = "东天门|e,w",
      },
    },

    ["广渠门大街|e,n,nw,s"] = {
      name = "广渠门大街",
      exits = {
        ["e"]  = "广渠门|n,s,u,w",
        ["n"]  = "崇文门外大街1|n,s,w",
        ["nw"] = "小胡同|nw,se",
        ["s"]  = "左安门|e,n,u,w",
      },
    },

    ["左安门|e,n,u,w"] = {
      name = "左安门",
      exits = {
        ["n"] = "广渠门大街|e,n,nw,s",
      },
    },

    -- 小胡同（版本 A）
    ["小胡同|nw,se"] = {
      name = "小胡同",
      exits = {
        ["se"] = "广渠门大街|e,n,nw,s",
      },
    },

    ["广渠门|n,s,u,w"] = {
      name = "广渠门",
      exits = {
        ["w"] = "广渠门大街|e,n,nw,s",
      },
    },

    ["东天门|e,w"] = {
      name = "东天门",
      exits = {
        ["e"] = "崇文门外大街1|n,s,w",
      },
    },

    ["宣武门大街|n,s"] = {
      name = "宣武门大街",
      exits = {
        ["n"]   = "宣武门|e,n,s,u,w",
        ["s;s"] = "菜市口|e,n,s,w",
      },
    },

    ["东客房|w"] = {
      name = "东客房",
      exits = {
        ["w"] = "客栈后院|e,n,w",
      },
    },

    ["乐府诗社|d"] = {
      name = "乐府诗社",
      exits = {
        ["d"] = "京城茶馆|nw,u",
      },
    },

    ["京城茶馆|nw,u"] = {
      name = "京城茶馆",
      exits = {
        ["nw"] = "天桥|e,n,ne,nw,s,se,sw,w",
        ["u"]  = "乐府诗社|d",
      },
    },

    ["全聚德|s,u"] = {
      name = "全聚德",
      exits = {
        ["s"] = "天桥|e,n,ne,nw,s,se,sw,w",
        ["u"] = "雅座|d",
      },
    },

    ["天桥|e,n,ne,nw,s,se,sw,w"] = {
      name = "天桥",
      exits = {
        ["e"]  = "正阳门外大街|e,n,nw,s,w",
        ["n"]  = "全聚德|s,u",
        ["ne"] = "屠宰场|ne,sw",
        ["nw"] = "绸缎庄|se",
        ["s"]  = "诚意客栈|n,s,u",
        ["se"] = "京城茶馆|nw,u",
        ["sw"] = "杂货铺|ne",
        ["w"]  = "菜市口|e,n,s,w",
      },
    },

    ["客栈二楼|d"] = {
      name = "客栈二楼",
      exits = {
        ["d"] = "诚意客栈|n,s,u",
      },
    },

    ["客栈后院|e,n,w"] = {
      name = "客栈后院",
      exits = {
        ["e"] = "东客房|w",
        ["n"] = "诚意客栈|n,s,u",
        ["w"] = "西客房|e",
      },
    },

    ["屠宰场|ne,sw"] = {
      name = "屠宰场",
      exits = {
        ["ne"] = "长街|enter,se,sw",
        ["sw"] = "天桥|e,n,ne,nw,s,se,sw,w",
      },
    },

    ["杂货铺|ne"] = {
      name = "杂货铺",
      exits = {
        ["ne"] = "天桥|e,n,ne,nw,s,se,sw,w",
      },
    },

    ["正阳门东大街|e,s,w"] = {
      name = "正阳门东大街",
      exits = {
        ["e"] = "崇文门外大街|n,s,w",
        ["s"] = "小胡同1|n,sw",
        ["w"] = "正阳门外大街|e,n,nw,s,w",
      },
    },

    -- 小胡同（版本 B）=&gt; 重编号为 小胡同1（并修正所有引用）
    ["小胡同1|n,sw"] = {
      name = "小胡同1",
      exits = {
        ["n"] = "正阳门东大街|e,s,w",
      },
    },

    ["绸缎庄|se"] = {
      name = "绸缎庄",
      exits = {
        ["se"] = "天桥|e,n,ne,nw,s,se,sw,w",
      },
    },

    ["菜市口|e,n,s,w"] = {
      name = "菜市口",
      exits = {
        ["e"]   = "天桥|e,n,ne,nw,s,se,sw,w",
        ["n;n"] = "宣武门大街|n,s",
        ["s"]   = "右安门大街|e,n,s",
        ["w"]   = "广安门|e,n,s,u",
      },
    },

    ["广安门|e,n,s,u"] = {
      name = "广安门",
      exits = {
        ["e"] = "菜市口|e,n,s,w",
      },
    },

    ["西客房|e"] = {
      name = "西客房",
      exits = {
        ["e"] = "客栈后院|e,n,w",
      },
    },

    ["诚意客栈|n,s,u"] = {
      name = "诚意客栈",
      exits = {
        ["n"] = "天桥|e,n,ne,nw,s,se,sw,w",
        ["s"] = "客栈后院|e,n,w",
        ["u"] = "客栈二楼|d",
      },
    },

    ["长街|enter,se,sw"] = {
      name = "长街",
      exits = {
        ["se"] = "正阳门外大街|e,n,nw,s,w",
        ["sw"] = "屠宰场|ne,sw",
      },
    },

    ["雅座|d"] = {
      name = "雅座",
      exits = {
        ["d"] = "全聚德|s,u",
      },
    },

    ["东长安街|e,n,s,w"] = {
      name = "东长安街",
      exits = {
        ["e"] = "崇文门|e,n,s,u,w",
        ["n"] = "大都家具坊|s",
        ["s"] = "北京宠物店|n",
        ["w"] = "东长安街1|e,s,w",
      },
    },
    ["东长安街1|e,s,w"] = {
      name = "东长安街1",
      exits = {
        ["e"] = "东长安街|e,n,s,w",
        ["s"] = "荣宝斋|n",
        ["w"] = "长安街|e,n,s,w",
      },
    },

    ["入神坐照室|nw"] = {
      name = "入神坐照室",
      exits = {
        ["nw"] = "西长安街|e,n,se,sw,w",
      },
    },

    ["北京宠物店|n"] = {
      name = "北京宠物店",
      exits = {
        ["n"] = "东长安街|e,n,s,w",
      },
    },

    ["博饼屋|s"] = {
      name = "博饼屋",
      exits = {
        ["s"] = "西长安街|e,n,se,sw,w",
      },
    },

    ["大都家具坊|s"] = {
      name = "大都家具坊",
      exits = {
        ["s"] = "东长安街|e,n,s,w",
      },
    },

    ["天安门|n,s"] = {
      name = "天安门",
      exits = {
        ["s"] = "天安门广场|n,s",
      },
    },

    ["天安门广场|n,s"] = {
      name = "天安门广场",
      exits = {
        ["n"] = "天安门|n,s",
        ["s"] = "长安街|e,n,s,w",
      },
    },

    ["宣武门|e,n,s,u,w"] = {
      name = "宣武门",
      exits = {
        ["e"] = "西单|e,w",
        ["n"] = "阜成门大街2|e,n,s,se,w",
        ["s"] = "宣武门大街|n,s",
        ["w"] = "西便门|e,n,s,u",
      },
    },

    ["西便门|e,n,s,u"] = {
      name = "西便门",
      exits = {
        ["e"] = "宣武门|e,n,s,u,w",
      },
    },

    ["东便门|n,s,u,w"] = {
      name = "东便门",
      exits = {
        ["w"] = "崇文门|e,n,s,u,w",
      },
    },

    ["正阳门|n,s,u"] = {
      name = "正阳门",
      exits = {
        ["n"] = "长安街|e,n,s,w",
        ["s"] = "正阳门外大街|e,n,nw,s,w",
      },
    },

    ["荣宝斋|n"] = {
      name = "荣宝斋",
      exits = {
        ["n"] = "东长安街1|e,s,w",
      },
    },

    ["西单|e,w"] = {
      name = "西单",
      exits = {
        ["e"] = "西长安街|e,n,se,sw,w",
        ["w"] = "宣武门|e,n,s,u,w",
      },
    },

    -- 西长安街（版本 A）保留
    ["西长安街|e,n,se,sw,w"] = {
      name = "西长安街",
      exits = {
        ["e"]  = "西长安街1|e,n,w",
        ["n"]  = "博饼屋|s",
        ["se"] = "入神坐照室|nw",
        ["sw"] = "麻将馆|ne",
        ["w"]  = "西单|e,w",
      },
    },

    -- 西长安街（版本 B）=&gt; 重编号为 西长安街1
    ["西长安街1|e,n,w"] = {
      name = "西长安街1",
      exits = {
        ["e"] = "长安街|e,n,s,w",
        ["n"] = "马车行|s",
        ["w"] = "西长安街|e,n,se,sw,w",
      },
    },

    ["长安街|e,n,s,w"] = {
      name = "长安街",
      exits = {
        ["e"] = "东长安街1|e,s,w",
        ["n"] = "天安门广场|n,s",
        ["s"] = "正阳门|n,s,u",
        ["w"] = "西长安街1|e,n,w",
      },
    },

    ["马车行|s"] = {
      name = "马车行",
      exits = {
        ["s"] = "西长安街1|e,n,w",
      },
    },

    ["麻将馆|ne"] = {
      name = "麻将馆",
      exits = {
        ["ne"] = "西长安街|e,n,se,sw,w",
      },
    },

    ["阜成门大街|e,n,s,w"] = {
      name = "阜成门大街",
      exits = {
        ["e"] = "宝源钱庄|w",
        ["n"] = "西直门大街|e,n,nw,s,w",
        ["s"] = "阜成门大街1|e,n,s,w",
        ["w"] = "皇城当铺|e",
      },
    },

    ["阜成门大街1|e,n,s,w"] = {
      name = "阜成门大街1",
      exits = {
        ["e"] = "北海西门|w",
        ["n"] = "阜成门大街|e,n,s,w",
        ["s"] = "阜成门大街2|e,n,s,se,w",
        ["w"] = "阜成门|e,n,s,u",
      },
    },

    ["阜成门大街2|e,n,s,se,w"] = {
      name = "阜成门大街2",
      exits = {
        ["e"]  = "食为天|w",
        ["n"]  = "阜成门大街1|e,n,s,w",
        ["s"]  = "宣武门|e,n,s,u,w",
        ["se"] = "灵境胡同|nw,s",
        ["w"]  = "一笑堂|e",
      },
    },

    ["灵境胡同|nw,s"] = {
      name = "灵境胡同",
      exits = {
        ["nw"] = "阜成门大街2|e,n,s,se,w",
        ["s"]  = "王府大门|n,s",
      },
    },

    ["王府大门|n,s"] = {
      name = "王府大门",
      exits = {
        ["n"] = "灵境胡同|nw,s",
      },
    },

    ["食为天|w"] = {
      name = "食为天",
      exits = {
        ["w"] = "阜成门大街2|e,n,s,se,w",
      },
    },

    ["一笑堂|e"] = {
      name = "一笑堂",
      exits = {
        ["e"] = "阜成门大街2|e,n,s,se,w",
      },
    },

    ["北海西门|w"] = {
      name = "北海西门",
      exits = {
        ["w"] = "阜成门大街1|e,n,s,w",
      },
    },

    ["阜成门|e,n,s,u"] = {
      name = "阜成门",
      exits = {
        ["e"] = "阜成门大街1|e,n,s,w",
        ["u"] = "",
      },
    },

    ["宝源钱庄|w"] = {
      name = "宝源钱庄",
      exits = {
        ["w"] = "阜成门大街|e,n,s,w",
      },
    },

    ["皇城当铺|e"] = {
      name = "皇城当铺",
      exits = {
        ["e"] = "阜成门大街|e,n,s,w",
      },
    },

    ["东直门|n,s,u,w"] = {
      name = "东直门",
      exits = {
        ["w"] = "东直门大街|e,n,s,w",
      },
    },

    ["东直门大街|e,n,s,w"] = {
      name = "东直门大街",
      exits = {
        ["e"] = "东直门|n,s,u,w",
        ["n"] = "侍卫营大门|n,nd,s",
        ["s"] = "朝阳门大街|e,n,s,w",
        ["w"] = "鼓楼东大街2|e,w",
      },
    },

    ["侍卫营大门|n,nd,s"] = {
      name = "侍卫营大门",
      exits = {
        ["n"]  = "校场|e,n,s,w",
        ["nd"] = "侍卫营武器库|su",
        ["s"]  = "东直门大街|e,n,s,w",
      },
    },

    ["侍卫营武器库|su"] = {
      name = "侍卫营武器库",
      exits = {
        ["su"] = "侍卫营大门|n,nd,s",
      },
    },

    ["兵部府衙大门|n,s"] = {
      name = "兵部府衙大门",
      exits = {
        ["n"] = "鼓楼西大街2|e,s,w",
      },
    },

    ["厅堂|s"] = {
      name = "厅堂",
      exits = {
        ["s"] = "校场|e,n,s,w",
      },
    },

    ["地下密室|u"] = {
      name = "地下密室",
      exits = {
        ["u"] = "大厅|d,e,n,s,w",
      },
    },

    ["地安门|n,s"] = {
      name = "地安门",
      exits = {
        ["n"] = "鼓楼|e,n,s,u,w",
        ["s"] = "景山|e,enter,n,s",
      },
    },

    ["大厅|d,e,n,s,w"] = {
      name = "大厅",
      exits = {
        ["d"] = "地下密室|u",
        ["e"] = "庭院|e,n,s,w",
        ["n"] = "押签房|s",
        ["s"] = "骨骰房|n",
        ["w"] = "骰子房|e",
      },
    },

    ["安定门|e,n,s,u,w"] = {
      name = "安定门",
      exits = {
        ["s"] = "钟楼|n,s,u",
      },
    },

    ["宝源金店|s"] = {
      name = "宝源金店",
      exits = {
        ["s"] = "西直门大街|e,n,nw,s,w",
      },
    },

    ["庭院|e,n,s,w"] = {
      name = "庭院",
      exits = {
        ["e"] = "鹿鼎公府大院|s,w",
        ["n"] = "斗鸡房|s",
        ["s"] = "赛龟房|n",
        ["w"] = "大厅|d,e,n,s,w",
      },
    },

    ["德胜门|e,nw,se,sw,u"] = {
      name = "德胜门",
      exits = {
        ["se"] = "西直门大街|e,n,nw,s,w",
      },
    },

    ["户部府衙大门|n,s"] = {
      name = "户部府衙大门",
      exits = {
        ["n"] = "鼓楼西大街1|e,n,s,w",
      },
    },

    ["押签房|s"] = {
      name = "押签房",
      exits = {
        ["s"] = "大厅|d,e,n,s,w",
      },
    },

    ["斗鸡房|s"] = {
      name = "斗鸡房",
      exits = {
        ["s"] = "庭院|e,n,s,w",
      },
    },

    ["景山|e,enter,n,s"] = {
      name = "景山",
      exits = {
        ["e"]     = "朝阳门大街|e,n,s,w",
        ["enter"] = "火神庙|out",
        ["n"]     = "地安门|n,s",
        ["s"]     = "神武门|e,n,s,w",
      },
    },

    ["朝阳门|e,n,s,u,w"] = {
      name = "朝阳门",
      exits = {
        ["w"] = "朝阳门大街|e,n,s,w",
        ["e"] = "大驿道|ne,w",
      },
    },

    ["朝阳门大街|e,n,s,w"] = {
      name = "朝阳门大街",
      exits = {
        ["e"] = "朝阳门|e,n,s,u,w",
        ["n"] = "东直门大街|e,n,s,w",
        ["s"] = "王府井大街1|e,n,s,w",
        ["w"] = "景山|e,enter,n,s",
      },
    },

    ["校场|e,n,s,w"] = {
      name = "校场",
      exits = {
        ["n"] = "厅堂|s",
        ["s"] = "侍卫营大门|n,nd,s",
      },
    },

    ["火神庙|out"] = {
      name = "火神庙",
      exits = {
        ["out"] = "景山|e,enter,n,s",
      },
    },

    ["神武门|e,n,s,w"] = {
      name = "神武门",
      exits = {
        ["n"] = "景山|e,enter,n,s",
      },
    },

    ["西直门|e,n,s,u"] = {
      name = "西直门",
      exits = {
        ["e"] = "西直门大街|e,n,nw,s,w",
      },
    },

    ["西直门大街|e,n,nw,s,w"] = {
      name = "西直门大街",
      exits = {
        ["e"]  = "鼓楼西大街1|e,n,s,w",
        ["n"]  = "宝源金店|s",
        ["nw"] = "德胜门|e,nw,se,sw,u",
        ["s"]  = "阜成门大街|e,n,s,w",
        ["w"]  = "西直门|e,n,s,u",
      },
    },

    ["赛龟房|n"] = {
      name = "赛龟房",
      exits = {
        ["n"] = "庭院|e,n,s,w",
      },
    },

    ["钟楼|n,s,u"] = {
      name = "钟楼",
      exits = {
        ["n"] = "安定门|e,n,s,u,w",
        ["s"] = "鼓楼|e,n,s,u,w",
        ["u"] = "钟楼二层|d",
      },
    },

    ["钟楼二层|d"] = {
      name = "钟楼二层",
      exits = {
        ["d"] = "钟楼|n,s,u",
      },
    },

    ["骨骰房|n"] = {
      name = "骨骰房",
      exits = {
        ["n"] = "大厅|d,e,n,s,w",
      },
    },

    ["骰子房|e"] = {
      name = "骰子房",
      exits = {
        ["e"] = "大厅|d,e,n,s,w",
      },
    },

    ["鹿鼎公府大院|s,w"] = {
      name = "鹿鼎公府大院",
      exits = {
        ["s"] = "鼓楼西大街1|e,n,s,w",
        ["w"] = "庭院|e,n,s,w",
      },
    },

    ["鼓楼|e,n,s,u,w"] = {
      name = "鼓楼",
      exits = {
        ["e"] = "鼓楼东大街1|e,n,s,w",
        ["n"] = "钟楼|n,s,u",
        ["s"] = "地安门|n,s",
        ["u"] = "鼓楼二层|d",
        ["w"] = "鼓楼西大街2|e,s,w",
      },
    },

    ["鼓楼东大街1|e,n,s,w"] = {
      name = "鼓楼东大街1",
      exits = {
        ["w"] = "鼓楼|e,n,s,u,w",
      },
    },

    ["鼓楼东大街2|e,w"] = {
      name = "鼓楼东大街2",
      exits = {
        ["e"] = "东直门大街|e,n,s,w",
      },
    },

    ["鼓楼二层|d"] = {
      name = "鼓楼二层",
      exits = {
        ["d"] = "鼓楼|e,n,s,u,w",
      },
    },

    ["鼓楼西大街1|e,n,s,w"] = {
      name = "鼓楼西大街1",
      exits = {
        ["e"] = "鼓楼西大街2|e,s,w",
        ["n"] = "鹿鼎公府大院|s,w",
        ["s"] = "户部府衙大门|n,s",
        ["w"] = "西直门大街|e,n,nw,s,w",
      },
    },
    
  ["大驿道|ne,w"] = {
    name = "大驿道",
    exits = {
      ["ne"] = "小路|n,sw",
      ["w"] = "朝阳门|e,n,s,u,w",
    },
  },
  ["小路|n,s"] = {
    name = "小路",
    exits = {
      ["n"] = "庄府大门|s",
      ["s"] = "小路|n,sw",
    },
  },
  
    ["小路|n,sw"] = {
    name = "小路",
    exits = {
      ["n"] = "小路|n,s",
      ["sw"] = "大驿道|ne,w",
    },
  },
  
    ["鼓楼西大街2|e,s,w"] = {
      name = "鼓楼西大街2",
      exits = {
        ["e"] = "鼓楼|e,n,s,u,w",
        ["s"] = "兵部府衙大门|n,s",
        ["w"] = "鼓楼西大街1|e,n,s,w",
      },
    },
  ["大院|n,s"] = {
    name = "大院",
    exits = {
      ["n"] = "庄府大厅|e,n,s,w",
      ["s"] = "庄府大门|s",
    },
  },
  ["小房间|s"] = {
    name = "小房间",
    exits = {
      ["s"] = "长廊|n,s",
    },
  },
  ["庄府大厅|e,n,s,w"] = {
    name = "庄府大厅",
    exits = {
      ["e"] = "庄府大厅|w",
      ["n"] = "长廊|n,s",
      ["s"] = "大院|n,s",
    },
  },
  ["庄府大厅|w"] = {
    name = "庄府大厅",
    exits = {
      ["w"] = "庄府大厅|e,n,s,w",
    },
  },
  ["庄府大门|s"] = {
    name = "庄府大门",
    exits = {
      ["break men;n"] = "大院|n,s",
      ["s"] = "小路|n,s",
    },
  },
  ["长廊|n,s"] = {
    name = "长廊",
    exits = {
      ["n"] = "小房间|s",
      ["s"] = "庄府大厅|e,n,s,w",
    },
  },    
  },
}

mapper.maps["bj"].mapAliases = {
  ["东直门"]       = "dzm",
  ["东直门大街"]   = "dzmdj",
  ["侍卫营大门"]   = "swydm",
  ["侍卫营武器库"] = "swywqk",
  ["兵部府衙大门"] = "bbfydm",
  ["厅堂"]         = "tt1",
  ["地下密室"]     = "dxms",
  ["地安门"]       = "dam",
  ["大厅"]         = "dt",
  ["安定门"]       = "adm",
  ["宝源金店"]     = "byjd",
  ["庭院"]         = "ty",
  ["德胜门"]       = "dsm",
  ["户部府衙大门"] = "hbfydm",
  ["押签房"]       = "yqf",
  ["斗鸡房"]       = "djf",
  ["景山"]         = "js",
  ["朝阳门"]       = "cym",
  ["朝阳门大街"]   = "cymdj",
  ["校场"]         = "xc",
  ["火神庙"]       = "hsm",
  ["王府井大街"]   = "wfjdj",
  ["神武门"]       = "swm",
  ["西直门"]       = "xzm",
  ["西直门大街"]   = "xzmdj",
  ["赛龟房"]       = "sgf",
  ["钟楼"]         = "zl",
  ["钟楼二层"]     = "zlec",
  ["阜成门大街"]   = "fcmdj",
  ["阜成门大街1"]  = "fcmdj1",
  ["阜成门大街2"]  = "fcmdj2",
  ["阜成门"]       = "fcm",
  ["骨骰房"]       = "gtf",
  ["骰子房"]       = "szf",
  ["鹿鼎公府大院"] = "ldgfdy",
  ["鼓楼"]         = "gl",
  ["鼓楼二层"]     = "glec",
  ["鼓楼东大街1"]  = "glddj1",
  ["鼓楼东大街2"]  = "glddj2",
  ["鼓楼西大街1"]  = "glxdj1",
  ["鼓楼西大街2"]  = "glxdj2",

  -- ===== 新增/补全（旧的）=====
  ["丰盛胡同"]       = "fsht",
  ["右安门"]         = "yam",
  ["右安门大街"]     = "yamdj",
  ["夏家胡同"]       = "xjht",
  ["梅记包子铺"]     = "mjbzp",

  ["正阳门外大街"]   = "zymwdj",
  ["正阳门外大街1"]  = "zymwdj1",
  ["正阳门外大街2"]  = "zymwdj2",
  ["正阳门外大街3"]  = "zymwdj3",
  ["永安门"]          = "yanm",
  ["西天门"]          = "tt",
  ["辟才胡同"]        = "bcht",
  ["甜水井胡同"]      = "tsjht",
  ["正阳门东大街"]    = "zymddj",
  ["长街"]            = "cj",

  ["崇文门外大街"]    = "cwmwdj",
  ["崇文门外大街1"]   = "cwmwdj1",
  ["广渠门大街"]      = "gqmdj",
  ["广渠门"]          = "gqm",
  ["左安门"]          = "zam",
  ["东天门"]          = "dtm",
  ["崇文门"]          = "cwm",
  ["东便门"]          = "dbm",
  ["西便门"]          = "xbm",

  ["小胡同"]          = "xht",
  ["小胡同1"]         = "xht1",

  ["宣武门大街"]      = "xwmdj",
  ["宣武门"]          = "xwm",

  ["京城茶馆"]        = "jcchg",
  ["乐府诗社"]        = "lfss",
  ["全聚德"]          = "qjd",
  ["雅座"]            = "yz",
  ["天桥"]            = "tq",
  ["屠宰场"]          = "tzc",
  ["杂货铺"]          = "zhp",
  ["绸缎庄"]          = "cdz",
  ["诚意客栈"]        = "cykz",
  ["客栈后院"]        = "kzhy",
  ["客栈二楼"]        = "kzel",
  ["东客房"]          = "dkf",
  ["西客房"]          = "xkf",

  ["菜市口"]          = "csk",
  ["广安门"]          = "gam",
  ["正阳门"]          = "zym",

  ["东长安街"]        = "dcaj",
  ["东长安街1"]       = "dcaj1",
  ["西长安街"]        = "xcaj",
  ["西长安街1"]       = "xcaj1",
  ["长安街"]          = "caj",

  ["入神坐照室"]      = "rszzs",
  ["北京宠物店"]      = "bjcwd",
  ["博饼屋"]          = "bbw",
  ["大都家具坊"]      = "ddjjf",
  ["天安门"]          = "tam",
  ["天安门广场"]      = "tamgc",
  ["荣宝斋"]          = "rbz",
  ["西单"]            = "xd",
  ["马车行"]          = "mch",
  ["麻将馆"]          = "mjg",

  ["灵境胡同"]        = "ljht",
  ["王府大门"]        = "qwf",
  ["食为天"]          = "swt",
  ["一笑堂"]          = "yxt",
  ["北海西门"]        = "bhxm",
  ["宝源钱庄"]        = "qz",
  ["皇城当铺"]        = "hcdp",

  -- ===== 本次新增（鳌府/镖局/王府井）=====
  ["大院"]           = "dy",
  ["小酒馆"]         = "xjg",
  ["武胜镖局"]       = "wsbj",
  ["镖局大院"]       = "bjdy",
  ["街道"]           = "jd",
  ["高粱地"]         = "origin",

  ["鳌府大门"]       = "afdm",
  ["鳌府厨房"]       = "afcf",
  ["鳌府后院"]       = "afhy",
  ["鳌拜卧房"]       = "abwf",

  ["王府井大街1"]    = "wfjdj1",
  ["王府井大街2"]    = "wfjdj2",
  ["土路"] = "tl",
  ["城墙"] = "cq",
}

</script>
					<eventHandlerList />
				</Script>
			</ScriptGroup>
			<ScriptGroup isActive="yes" isFolder="yes">
				<name>华北</name>
				<packageName></packageName>
				<script></script>
				<eventHandlerList />
				<Script isActive="yes" isFolder="no">
					<name>河北 - hb</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["hb"] = {
  region = {
    key  = "hb",
    name = "河北",
  },

  mapNodes = {
  
    ["高碑店|n,se,sw,w"] = {
      name = "高碑店",
      exits = {
        ["se"] = "瓦桥关|nw,se",
        ["sw"] = "官道|ne,sw,w",
        ["w"] = "荆轲山|e,u,w"
      },
    },
    
  ["荆轲山|e,u,w"] = {
  name = "荆轲山",
  exits = {
    ["e"] = "高碑店|n,se,sw,w",
    ["u"] = "荆轲塔|d",
    ["w"] = "易水河畔|e,sw",
  },
},

["易水河畔|e,sw"] = {
  name = "易水河畔",
  exits = {
    ["e"] = "荆轲山|e,u,w",
    ["sw"] = "山间小路|ne",
  },
},

["山间小路|ne"] = {
  name = "山间小路",
  exits = {
    ["ne"] = "易水河畔|e,sw",
  },
},

["荆轲塔|d"] = {
  name = "荆轲塔",
  exits = {
    ["d"] = "",
  },
},    

    ["青石大道|e,w"] = {
      name = "青石大道1",
      exits = {
        ["e"] = "青石大道|e,nw,se,w",
        ["w"] = "正定镇|e,ne,s,w",
      },
    },

    ["青石大道|e,nw,se,w"] = {
      name = "青石大道2",
      exits = {
        ["e"]  = "青石大道1|e,w",
        ["nw"] = "河间府|nw,se,w",
        ["se"] = "青石大道|nw,se",
        ["w"]  = "青石大道|e,w",
      },
    },

    ["青石大道|nw,se"] = {
      name = "青石大道3",
      exits = {
        ["nw"] = "青石大道|e,nw,se,w",
        ["se"] = "德州|nw,se,w",
      },
    },

    ["青石大道1|e,w"] = {
      name = "青石大道4",
      exits = {
        ["e"] = "沧州|eu,n,nw,se,w",
        ["w"] = "青石大道|e,nw,se,w",
      },
    },

    ["青石大道|n,sd"] = {
      name = "青石大道5",
      exits = {
        ["n"]  = "正定镇|e,ne,s,w",
        ["sd"] = "九龙峡|nu,su",
      },
    },

    ["青石大道|nd,s"] = {
      name = "青石大道6",
      exits = {
        ["nd"] = "九龙峡|nu,su",
        ["s"]  = "青石大道|n,nw,s",
      },
    },

    ["青石大道|n,nw,s"] = {
      name = "青石大道7",
      exits = {
        ["n"]  = "青石大道|nd,s",
        ["nw"] = "朱山石刻|se",
        ["s"]  = "邯郸|e,n,s,se",
      },
    },

    -- 官道（原同名 24 个 -&gt; 官道1..24）
    ["官道|ne,sw,w"] = {
      name = "官道1",
      exits = {
        ["ne"] = "高碑店|n,se,sw,w",
        ["sw"] = "慈云阁|enter,ne,sw",
        ["w"]  = "燕赵居|e",
      },
    },

    ["官道|e,nw,sw"] = {
      name = "官道2",
      exits = {
        ["e"]  = "塘沽口|w",
        ["sw"] = "陈官屯|e,ne,s,w",
      },
    },

    ["官道1|e,nw,sw"] = {
      name = "官道3",
      exits = {
        ["e"]  = "官道|e,w",
        ["nw"] = "雄州|nw,se",
        ["sw"] = "白洋淀|ne,sw",
      },
    },

    ["官道|e,w"] = {
      name = "官道4",
      exits = {
        ["e"] = "官道1|e,w",
        ["w"] = "官道1|e,nw,sw",
      },
    },

    ["官道1|e,w"] = {
      name = "官道5",
      exits = {
        ["e"] = "陈官屯|e,ne,s,w",
        ["w"] = "官道|e,w",
      },
    },

    ["官道|ne,nw,sw"] = {
      name = "官道6",
      exits = {
        ["ne"] = "保州|ne,se,sw",
        ["nw"] = "蒲阴陉|nw,se",
        ["sw"] = "清风店|ne,sw",
      },
    },

    ["官道|nw,se"] = {
      name = "官道7",
      exits = {
        ["nw"] = "保州|ne,se,sw",
        ["se"] = "高阳|ne,nw,se",
      },
    },

    ["官道|n,s"] = {
      name = "官道8",
      exits = {
        ["n"] = "陈官屯|e,ne,s,w",
        ["s"] = "唐官屯|n,s",
      },
    },

    ["官道|ne,sw"] = {
      name = "官道9",
      exits = {
        ["ne"] = "清风店|ne,sw",
        ["sw"] = "官道|ne,sw,wu",
      },
    },

    ["官道1|nw,se"] = {
      name = "官道10",
      exits = {
        ["nw"] = "高阳|ne,nw,se",
        ["se"] = "河间府|nw,se,w",
      },
    },

    ["官道|ne,sw,wu"] = {
      name = "官道11",
      exits = {
        ["ne"] = "官道|ne,sw",
        ["sw"] = "正定镇|e,ne,s,w",
        ["wu"] = "天宁寺|ed,enter",
      },
    },

    ["官道|e,sw"] = {
      name = "官道12",
      exits = {
        ["e"]  = "官道2|e,w",
        ["sw"] = "官道1|ne,sw",
      },
    },

    ["官道2|e,w"] = {
      name = "官道13",
      exits = {
        ["e"] = "德州|nw,se,w",
        ["w"] = "官道|e,sw",
      },
    },

    ["官道1|ne,sw"] = {
      name = "官道14",
      exits = {
        ["ne"] = "官道|e,sw",
        ["sw"] = "临清|e,ne,se,sw",
      },
    },

    ["官道|e,nw,s"] = {
      name = "官道15",
      exits = {
        ["e"]  = "官道|se,w",
        ["nw"] = "德州|nw,se,w",
        ["s"]  = "平原县|n,s",
      },
    },

    ["官道|se,w"] = {
      name = "官道16",
      exits = {
        ["se"] = "武定府|ne,nw,sw",
        ["w"]  = "官道|e,nw,s",
      },
    },

    ["官道3|e,w"] = {
      name = "官道17",
      exits = {
        ["e"] = "官道|ne,w",
        ["w"] = "邯郸|e,n,s,se",
      },
    },

    ["官道|ne,w"] = {
      name = "官道18",
      exits = {
        ["ne"] = "临清|e,ne,se,sw",
        ["w"]  = "官道3|e,w",
      },
    },

    ["官道|nw,s"] = {
      name = "官道19",
      exits = {
        ["nw"] = "临清|e,ne,se,sw",
        ["s"]  = "青石官道|n,s",
      },
    },

    ["官道|eu,ne,sw"] = {
      name = "官道20",
      exits = {
        ["ne"] = "武定府|ne,nw,sw",
        ["sw"] = "官道2|ne,sw",
      },
    },

    ["官道|n,se"] = {
      name = "官道21",
      exits = {
        ["n"]  = "平原县|n,s",
        ["se"] = "禹城|ne,nw,se,w",
      },
    },

    ["官道2|ne,sw"] = {
      name = "官道22",
      exits = {
        ["ne"] = "官道|eu,ne,sw",
        ["sw"] = "禹城|ne,nw,se,w",
      },
    },

    ["官道1|e,sw"] = {
      name = "官道23",
      exits = {
        ["e"]  = "官道4|e,w",
        ["sw"] = "大名府|e,n,ne,nw,sw,wu",
      },
    },

    ["官道4|e,w"] = {
      name = "官道24",
      exits = {
        ["e"] = "禹城|ne,nw,se,w",
        ["w"] = "官道1|e,sw",
      },
    },

    -- 土路（原同名 7 个 -&gt; 土路1..7）
    ["土路|n,sw"] = {
      name = "土路1",
      exits = {
        ["n"]  = "唐官屯|n,s",
        ["sw"] = "土路|ne,s",
      },
    },

    ["土路|ne,s"] = {
      name = "土路2",
      exits = {
        ["ne"] = "土路|n,sw",
        ["s"]  = "沧州|eu,n,nw,se,w",
      },
    },

    ["土路|ed,n,sw"] = {
      name = "土路3",
      exits = {
        ["ed"] = "海边|wu",
        ["n"]  = "千童城|eu,nw,s",
        ["sw"] = "土路|ne,sw",
      },
    },

    ["土路|ne,sw"] = {
      name = "土路4",
      exits = {
        ["ne"] = "土路|ed,n,sw",
        ["sw"] = "武定府|ne,nw,sw",
      },
    },

    ["土路|n,s,wu"] = {
      name = "土路5",
      exits = {
        ["n"]  = "邯郸|e,n,s,se",
        ["s"]  = "土路1|n,s,wu",
        ["wu"] = "铜雀台下|ed,u",
      },
    },

    ["土路1|n,s,wu"] = {
      name = "土路6",
      exits = {
        ["n"]  = "土路|n,s,wu",
        ["s"]  = "彰德府|eu,n,s",
        ["wu"] = "山脚下|ed",
      },
    },

    ["土路|nw,sw"] = {
      name = "土路7",
      exits = {
        ["nw"] = "濮阳|n,se,sw",
        ["sw"] = "黄河北岸|e,ne,nw",
      },
    },

    -- 其它（唯一名保持不变）
    ["九龙峡|nu,su"] = {
      name = "九龙峡",
      exits = {
        ["nu"] = "青石大道|n,sd",
        ["su"] = "青石大道|nd,s",
      },
    },

    ["保州|ne,se,sw"] = {
      name = "保州",
      exits = {
        ["ne"] = "慈云阁|enter,ne,sw",
        ["se"] = "官道|nw,se",
        ["sw"] = "官道|ne,nw,sw",
      },
    },

    ["凌霄塔|out"] = {
      name = "凌霄塔",
      exits = {
        ["out"] = "天宁寺|ed,enter",
      },
    },

    ["千柳庄|wd"] = {
      name = "千柳庄",
      exits = {
        ["wd"] = "沧州|eu,n,nw,se,w",
      },
    },

    ["千童城|eu,nw,s"] = {
      name = "千童城",
      exits = {
        ["eu"] = "马谷山|wd",
        ["nw"] = "沧州|eu,n,nw,se,w",
        ["s"]  = "土路|ed,n,sw",
      },
    },

    ["历亭渡|n,nw,sw"] = {
      name = "历亭渡",
      exits = {
        ["nw"] = "禹城|ne,nw,se,w",
      },
    },

    ["唐官屯|n,s"] = {
      name = "唐官屯",
      exits = {
        ["n"] = "官道|n,s",
        ["s"] = "土路|n,sw",
      },
    },

    ["天宁寺|ed,enter"] = {
      name = "天宁寺",
      exits = {
        ["ed"]    = "官道|ne,sw,wu",
        ["enter"] = "凌霄塔|out",
      },
    },

    ["太行山麓|ed,sw"] = {
      name = "太行山麓",
      exits = {
        ["ed"] = "西市|e,wu",
      },
    },

    ["宠物竞技场|e,u"] = {
      name = "宠物竞技场",
      exits = {
        ["e"] = "河间府|nw,se,w",
      },
    },

    ["小客店|se"] = {
      name = "小客店",
      exits = {
        ["se"] = "沧州|eu,n,nw,se,w",
      },
    },

    ["山脚下|ed"] = {
      name = "山脚下",
      exits = {
        ["ed"] = "土路1|n,s,wu",
      },
    },

    ["平原县|n,s"] = {
      name = "平原县",
      exits = {
        ["n"] = "官道|e,nw,s",
        ["s"] = "官道|n,se",
      },
    },

    ["德州|nw,se,w"] = {
      name = "德州",
      exits = {
        ["nw"] = "青石大道|nw,se",
        ["se"] = "官道|e,nw,s",
        ["w"]  = "官道2|e,w",
      },
    },

    ["慈云阁|enter,ne,sw"] = {
      name = "慈云阁",
      exits = {
        ["enter"] = "慈云阁内|out",
        ["ne"]    = "官道|ne,sw,w",
        ["sw"]    = "保州|ne,se,sw",
      },
    },

    ["慈云阁内|out"] = {
      name = "慈云阁内",
      exits = {
        ["out"] = "慈云阁|enter,ne,sw",
      },
    },

    ["朱山石刻|se"] = {
      name = "朱山石刻",
      exits = {
        ["se"] = "青石大道|n,nw,s",
      },
    },

    ["正定镇|e,ne,s,w"] = {
      name = "正定镇",
      exits = {
        ["e"]  = "青石大道|e,w",
        ["ne"] = "官道|ne,sw,wu",
        ["s"]  = "青石大道|n,sd",
        ["w"]  = "西市|e,wu",
      },
    },

    ["武定府|ne,nw,sw"] = {
      name = "武定府",
      exits = {
        ["ne"] = "土路|ne,sw",
        ["nw"] = "官道|se,w",
        ["sw"] = "官道|eu,ne,sw",
      },
    },

    ["沧州|eu,n,nw,se,w"] = {
      name = "沧州",
      exits = {
        ["eu"] = "千柳庄|wd",
        ["n"]  = "土路|ne,s",
        ["nw"] = "小客店|se",
        ["se"] = "千童城|eu,nw,s",
        ["w"]  = "青石大道1|e,w",
      },
    },

    ["河间府|nw,se,w"] = {
      name = "河间府",
      exits = {
        ["nw"] = "官道1|nw,se",
        ["se"] = "青石大道|e,nw,se,w",
        ["w"]  = "宠物竞技场|e,u",
      },
    },

    ["海边|wu"] = {
      name = "海边",
      exits = {
        ["wu"] = "土路|ed,n,sw",
      },
    },

    ["清风店|ne,sw"] = {
      name = "清风店",
      exits = {
        ["ne"] = "官道|ne,nw,sw",
        ["sw"] = "官道|ne,sw",
      },
    },

    ["燕赵居|e"] = {
      name = "燕赵居",
      exits = {
        ["e"] = "官道|ne,sw,w",
      },
    },

    ["瓦桥关|nw,se"] = {
      name = "瓦桥关",
      exits = {
        ["nw"] = "高碑店|n,se,sw,w",
        ["se"] = "雄州|nw,se",
      },
    },

    ["白洋淀|ne,sw"] = {
      name = "白洋淀",
      exits = {
        ["ne"] = "官道1|e,nw,sw",
        ["sw"] = "高阳|ne,nw,se",
      },
    },

    ["禹城|ne,nw,se,w"] = {
      name = "禹城",
      exits = {
        ["ne"] = "官道2|ne,sw",
        ["nw"] = "官道|n,se",
        ["se"] = "历亭渡|n,nw,sw",
        ["w"]  = "官道4|e,w",
      },
    },

    ["蒲阴陉|nw,se"] = {
      name = "蒲阴陉",
      exits = {
        ["se"] = "官道|ne,nw,sw",
      },
    },

    ["西市|e,wu"] = {
      name = "西市",
      exits = {
        ["e"]  = "正定镇|e,ne,s,w",
        ["wu"] = "太行山麓|ed,sw",
      },
    },

    ["邯郸|e,n,s,se"] = {
      name = "邯郸",
      exits = {
        ["e"]  = "官道3|e,w",
        ["n"]  = "青石大道|n,nw,s",
        ["s"]  = "土路|n,s,wu",
        ["se"] = "青石官道|nw,se",
      },
    },

    ["陈官屯|e,ne,s,w"] = {
      name = "陈官屯",
      exits = {
        ["e"]  = "饭铺|w",
        ["ne"] = "官道|e,nw,sw",
        ["s"]  = "官道|n,s",
        ["w"]  = "官道1|e,w",
      },
    },

    ["雄州|nw,se"] = {
      name = "雄州",
      exits = {
        ["nw"] = "瓦桥关|nw,se",
        ["se"] = "官道1|e,nw,sw",
      },
    },

    -- 青石官道（原同名 2 个 -&gt; 青石官道1..2）
    
    ["青石官道|nw,se"] = {
      name = "青石官道1",
      exits = {
        ["nw"] = "邯郸|e,n,s,se",
        ["se"] = "青石官道1|nw,se",
      },
    },

    ["青石官道|n,s"] = {
      name = "青石官道2",
      exits = {
        ["n"] = "官道|nw,s",
        ["s"] = "大名府|e,n,ne,nw,sw,wu",
      },
    },

    ["青石官道1|nw,se"] = {
      name = "青石官道3",
      exits = {
        ["nw"] = "青石官道|nw,se",
        ["se"] = "大名府|e,n,ne,nw,sw,wu",
      },
    },    

    ["饭铺|w"] = {
      name = "饭铺",
      exits = {
        ["w"] = "陈官屯|e,ne,s,w",
      },
    },

    ["马谷山|wd"] = {
      name = "马谷山",
      exits = {
        ["wd"] = "千童城|eu,nw,s",
      },
    },

    ["高阳|ne,nw,se"] = {
      name = "高阳",
      exits = {
        ["ne"] = "白洋淀|ne,sw",
        ["nw"] = "官道|nw,se",
        ["se"] = "官道1|nw,se",
      },
    },

    ["临清|e,ne,se,sw"] = {
      name = "临清",
      exits = {
        ["e"]  = "舍利宝塔|w",
        ["ne"] = "官道1|ne,sw",
        ["se"] = "官道|nw,s",
        ["sw"] = "官道|ne,w",
      },
    },

    ["仓颉陵|ed,wd"] = {
      name = "仓颉陵",
      exits = {
        ["ed"] = "大名府|e,n,ne,nw,sw,wu",
        ["wd"] = "彰德府|eu,n,s",
      },
    },

    ["卫州|n,ne,sw"] = {
      name = "卫州",
      exits = {
        ["n"]  = "大驿道|ne,s",
        ["ne"] = "砂石路|ne,s,sw",
        ["sw"] = "河堤驿道|ne,w",
      },
    },

    ["塘沽口|w"] = {
      name = "塘沽口",
      exits = {
        ["w"] = "官道|e,nw,sw",
      },
    },

    ["大名府|e,n,ne,nw,sw,wu"] = {
      name = "大名府",
      exits = {
        ["e"]  = "雨荷堂|w",
        ["n"]  = "青石官道|n,s",
        ["ne"] = "官道1|e,sw",
        ["nw"] = "青石官道1|nw,se",
        ["sw"] = "大驿道|e,ne,s",
        ["wu"] = "仓颉陵|ed,wd",
      },
    },

    ["大河车马行|w"] = {
      name = "大河车马行",
      exits = {
        ["w"] = "大驿道|e,ne,s",
      },
    },

    -- 大驿道（原同名 3 个 -&gt; 大驿道1..3）
    ["大驿道|e,ne,s"] = {
      name = "大驿道",
      exits = {
        ["e"]  = "大河车马行|w",
        ["ne"] = "大名府|e,n,ne,nw,sw,wu",
        ["s"]  = "濮阳|n,se,sw",
      },
    },

    ["大驿道|n,sw"] = {
      name = "大驿道2",
      exits = {
        ["n"]  = "彰德府|eu,n,s",
        ["sw"] = "大驿道|ne,s",
      },
    },

    ["大驿道|ne,s"] = {
      name = "大驿道3",
      exits = {
        ["ne"] = "大驿道|n,sw",
        ["s"]  = "卫州|n,ne,sw",
      },
    },

    ["彰德府|eu,n,s"] = {
      name = "彰德府",
      exits = {
        ["eu"] = "仓颉陵|ed,wd",
        ["n"]  = "土路1|n,s,wu",
        ["s"]  = "大驿道|n,sw",
      },
    },

    ["河堤驿道|ne,w"] = {
      name = "河堤驿道",
      exits = {
        ["ne"] = "卫州|n,ne,sw",
        ["w"]  = "驿道|e,w",
      },
    },

    ["濮阳|n,se,sw"] = {
      name = "濮阳",
      exits = {
        ["n"]  = "大驿道|e,ne,s",
        ["se"] = "土路|nw,sw",
        ["sw"] = "砂石路|ne,s,sw",
      },
    },

    ["砂石路|ne,s,sw"] = {
      name = "砂石路",
      exits = {
        ["ne"] = "濮阳|n,se,sw",
        ["s"]  = "黄河北岸|n,se,w",
        ["sw"] = "卫州|n,ne,sw",
      },
    },

    -- 神道（原同名 2 个 -&gt; 神道1..2）
    ["神道|e"] = {
      name = "神道1",
      exits = {
        ["e"] = "铜雀台前|d,e,w",
      },
    },

    ["神道|w"] = {
      name = "神道2",
      exits = {
        ["w"] = "铜雀台前|d,e,w",
      },
    },

    ["舍利宝塔|w"] = {
      name = "舍利宝塔",
      exits = {
        ["w"] = "临清|e,ne,se,sw",
      },
    },

    ["铜雀台下|ed,u"] = {
      name = "铜雀台下",
      exits = {
        ["ed"] = "土路|n,s,wu",
        ["u"]  = "铜雀台前|d,e,w",
      },
    },

    ["铜雀台前|d,e,w"] = {
      name = "铜雀台前",
      exits = {
        ["d"] = "铜雀台下|ed,u",
        ["e"] = "神道|w",
        ["w"] = "神道|e",
      },
    },

    ["雨荷堂|w"] = {
      name = "雨荷堂",
      exits = {
        ["w"] = "大名府|e,n,ne,nw,sw,wu",
      },
    },

    ["驿道|e,w"] = {
      name = "驿道",
      exits = {
        ["e"] = "河堤驿道|ne,w",
        ["w"] = "驿道1|e,w",
      },
    },
    ["驿道1|e,w"] = {
      name = "驿道1",
      exits = {
        ["e"] = "驿道|e,w",
        ["w"] = "济源|e,sd,w",
      },
    },    
  ["济源|e,sd,w"] = {
    name = "济源",
    exits = {
      ["e"] = "驿道1|e,w",
      ["sd"] = "渡口|e,enter,nu,w",
    },
  },
  
  ["渡口|e,enter,nu,w"] = {
      name = "渡口",
      exits = {
        ["nu"] = "济源|e,sd,w",
      },
    },
    -- 黄河北岸（原同名 2 个 -&gt; 黄河北岸1..2）
    ["黄河北岸|e,ne,nw"] = {
      name = "黄河北岸1",
      exits = {
        ["ne"] = "土路|nw,sw",
      },
    },

    ["黄河北岸|n,se,w"] = {
      name = "黄河北岸2",
      exits = {
        ["n"] = "砂石路|ne,s,sw",
      },
    },
  },

  -- ✅ mapAliases：key=房间name（已去重编号），value=拼音缩写
  mapAliases = {

    -- 青石大道
    ["青石大道1"] = "qsdd1",
    ["青石大道2"] = "qsdd2",
    ["青石大道3"] = "qsdd3",
    ["青石大道4"] = "qsdd4",
    ["青石大道5"] = "qsdd5",
    ["青石大道6"] = "qsdd6",
    ["青石大道7"] = "qsdd7",

    -- 官道
    ["官道1"]  = "gd1",
    ["官道2"]  = "gd2",
    ["官道3"]  = "gd3",
    ["官道4"]  = "gd4",
    ["官道5"]  = "gd5",
    ["官道6"]  = "gd6",
    ["官道7"]  = "gd7",
    ["官道8"]  = "gd8",
    ["官道9"]  = "gd9",
    ["官道10"] = "gd10",
    ["官道11"] = "gd11",
    ["官道12"] = "gd12",
    ["官道13"] = "gd13",
    ["官道14"] = "gd14",
    ["官道15"] = "gd15",
    ["官道16"] = "gd16",
    ["官道17"] = "gd17",
    ["官道18"] = "gd18",
    ["官道19"] = "gd19",
    ["官道20"] = "gd20",
    ["官道21"] = "gd21",
    ["官道22"] = "gd22",
    ["官道23"] = "gd23",
    ["官道24"] = "gd24",

    -- 土路
    ["土路1"] = "tl1",
    ["土路2"] = "tl2",
    ["土路3"] = "tl3",
    ["土路4"] = "tl4",
    ["土路5"] = "tl5",
    ["土路6"] = "tl6",
    ["土路7"] = "tl7",

    -- 青石官道
    ["青石官道1"] = "qsgd1",
    ["青石官道2"] = "qsgd2",
    ["青石官道3"] = "qsgd3",

    -- 大驿道
    ["大驿道"] = "dyd",
    ["大驿道2"] = "dyd2",
    ["大驿道3"] = "dyd3",

    -- 神道
    ["神道1"] = "sd1",
    ["神道2"] = "sd2",

    -- 黄河北岸
    ["黄河北岸1"] = "hhba1",
    ["黄河北岸2"] = "hhba2",

    -- 唯一名（直接用缩写）
    ["九龙峡"]     = "jlx",
    ["保州"]       = "bz",
    ["凌霄塔"]     = "lxt",
    ["千柳庄"]     = "qlz",
    ["千童城"]     = "qtc",
    ["历亭渡"]     = "ltd",
    ["唐官屯"]     = "tgt",
    ["天宁寺"]     = "tns",
    ["太行山麓"]   = "thsl",
    ["宠物竞技场"] = "cwjc",
    ["小客店"]     = "xkd",
    ["山脚下"]     = "sjx",
    ["平原县"]     = "pyx",
    ["德州"]       = "dz",
    ["慈云阁"]     = "cyg",
    ["慈云阁内"]   = "cygn",
    ["朱山石刻"]   = "zssk",
    ["正定镇"]     = "zdz",
    ["武定府"]     = "wdf",
    ["沧州"]       = "cz",
    ["河间府"]     = "hjf",
    ["海边"]       = "hb",
    ["清风店"]     = "qfd",
    ["燕赵居"]     = "yjj",
    ["瓦桥关"]     = "wqg",
    ["白洋淀"]     = "byd",
    ["禹城"]       = "yc",
    ["蒲阴陉"]     = "pyy",
    ["西市"]       = "xs",
    ["邯郸"]       = "hd",
    ["陈官屯"]     = "cgt",
    ["雄州"]       = "xz",
    ["饭铺"]       = "fp",
    ["马谷山"]     = "mgs",
    ["高碑店"]     = "gbd",
    ["高阳"]       = "gy",
    ["临清"]       = "lq",
    ["仓颉陵"]     = "cjl",
    ["卫州"]       = "wz",
    ["塘沽口"]     = "origin",
    ["大名府"]     = "dmf",
    ["大河车马行"] = "mch",
    ["彰德府"]     = "zdf",
    ["河堤驿道"]   = "htyd",
    ["濮阳"]       = "py",
    ["砂石路"]     = "ssl",
    ["舍利宝塔"]   = "slbt",
    ["铜雀台下"]   = "tqtx",
    ["铜雀台前"]   = "tqtq",
    ["雨荷堂"]     = "yht",
    ["驿道"]       = "yd",
    ["济源"] = "jy",
    ["渡口"] = "dk",
    ["荆轲山"]   = "jks",
    ["易水河畔"] = "yshp",
    ["山间小路"] = "sjxl",
    ["荆轲塔"]   = "jkt",     
  },
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>代州 - dzhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["dzhou"] = {
  region = {
    key  = "dzhou",
    name = "代州",
  },

  mapNodes = {

    ["东门|ne,w"] = {
      name = "东门",
      exits = {
        ["ne"] = "土路|ne,su,sw",
        ["w"]  = "府前大街|e,n,s,w",
      },
    },

    ["佛光寺|n"] = {
      name = "佛光寺",
      exits = {
        ["n"] = "山路|e,nd,s,wu",
      },
    },

    -- ===== 侧门（重名处理）=====
    ["侧门|n,se"] = {
      name = "侧门",
      exits = {
        ["n"]  = "小道|e,ne,s",
        ["se"] = "大成殿|n,ne,nw,s",
      },
    },

    ["侧门|n,sw"] = {
      name = "侧门2",
      exits = {
        ["n"]  = "小道|nw,s,w",
        ["sw"] = "大成殿|n,ne,nw,s",
      },
    },

    ["军仓|nd"] = {
      name = "军仓",
      exits = {
        ["nd"] = "军营|n,su",
      },
    },

    ["军营|n,su"] = {
      name = "军营",
      exits = {
        ["n"]  = "边靖楼|eu,s,u,w",
        ["su"] = "军仓|nd",
      },
    },

    ["北大街|e,n,s"] = {
      name = "北大街",
      exits = {
        ["e"] = "府衙|w",
        ["n"] = "北门|nu,s",
        ["s"] = "府前大街|e,n,s,wu",
      },
    },

    ["北门|nu,s"] = {
      name = "北门",
      exits = {
        ["nu"] = "雁门关|nw,sd",
        ["s"]  = "北大街|e,n,s",
      },
    },

    -- ===== 南大街（重名处理）=====
    ["南大街|e,n,s,w"] = {
      name = "南大街1",
      exits = {
        ["e"] = "酒楼|w",
        ["n"] = "府前大街|e,n,s,wu",
        ["s"] = "南大街1|e,n,s,w",
        ["w"] = "客栈|e,enter",
      },
    },

    ["客栈|e,enter"] = {
      name = "客栈",
      exits = {
        ["e"]     = "南大街|e,n,s,w",
        ["enter"] = "里间|out",
      },
    },

    ["里间|out"] = {
      name = "里间",
      exits = {
        ["out"] = "客栈|e,enter",
      },
    },

    ["南大街1|e,n,s,w"] = {
      name = "南大街2",
      exits = {
        ["e"] = "当铺|w",
        ["n"] = "南大街|e,n,s,w",
        ["s"] = "南门|n,sw,w",
        ["w"] = "钱庄|e",
      },
    },

    ["南门|n,sw,w"] = {
      name = "南门",
      exits = {
        ["n"]  = "南大街1|e,n,s,w",
        ["sw"] = "滹沱河北岸|ne",
        ["w"]  = "靖边大车店|e",
      },
    },

    ["滹沱河北岸|ne"] = {
      name = "滹沱河北岸",
      exits = {
        ["ne"] = "南门|n,sw,w",
      },
    },

    ["靖边大车店|e"] = {
      name = "靖边大车店",
      exits = {
        ["e"] = "南门|n,sw,w",
      },
    },

    ["当铺|w"] = {
      name = "当铺",
      exits = {
        ["w"] = "南大街1|e,n,s,w",
      },
    },

    ["叶斗峰|sd"] = {
      name = "叶斗峰",
      exits = {
        ["sd"] = "山路|nu,sw",
      },
    },

    ["土路|ne,su,sw"] = {
      name = "土路",
      exits = {
        ["ne"] = "繁峙|ne,sw",
        ["su"] = "山路|nd,su",
        ["sw"] = "东门|ne,w",
      },
    },

    ["塔内|out"] = {
      name = "塔内",
      exits = {
        ["out"] = "阿育王塔|enter,s",
      },
    },

    ["大成殿|n,ne,nw,s"] = {
      name = "大成殿",
      exits = {
        ["n"]  = "棂星门|nd,s",
        ["ne"] = "侧门|n,sw",
        ["nw"] = "侧门|n,se",
        ["s"]  = "崇圣祠|n",
      },
    },

    ["宁武关|se"] = {
      name = "宁武关",
      exits = {
        ["se"] = "山路|e,nw",
      },
    },

    -- ===== 小道（重名处理）=====
    ["小道|e,ne,s"] = {
      name = "小道",
      exits = {
        ["e"]  = "泮池|e,su,w",
        ["ne"] = "戟门|n,se,sw",
        ["s"]  = "侧门|n,se",
      },
    },

    ["小道|nw,s,w"] = {
      name = "小道2",
      exits = {
        ["nw"] = "戟门|n,se,sw",
        ["s"]  = "侧门|n,sw",
        ["w"]  = "泮池|e,su,w",
      },
    },

    -- ===== 山路（重名处理）=====
    ["山路|e,nd,s,wu"] = {
      name = "山路1",
      exits = {
        ["e"]  = "平台|eu,ne,s,u,w",
        ["nd"] = "山路|nd,su",
        ["s"]  = "佛光寺|n",
        ["wu"] = "挂月峰|ed",
      },
    },

    ["山路|e,nu,sw"] = {
      name = "山路2",
      exits = {
        ["e"]  = "山路|ne,w",
        ["nu"] = "恒山山门|nu,sd",
        ["sw"] = "繁峙|ne,sw",
      },
    },

    ["山路|e,nw"] = {
      name = "山路",
      exits = {
        ["e"]  = "西门|e,w",
        ["nw"] = "宁武关|se",
      },
    },

    ["山路|nd,su"] = {
      name = "山路4",
      exits = {
        ["nd"] = "土路|ne,su,sw",
        --["su"] = "山路1|nd,su",
        ["su"] = "山路|e,nd,s,wu",
      },
    },

    ["山路|ne,w"] = {
      name = "山路6",
      exits = {
        ["ne"] = "灵丘|ne,se,sw",
        ["w"]  = "山路|e,nu,sw",
      },
    },

    ["山路|nu,sw"] = {
      name = "山路7",
      exits = {
        ["nu"] = "叶斗峰|sd",
        ["sw"] = "平台|eu,ne,s,u,w",
      },
    },

    ["崇圣祠|n"] = {
      name = "崇圣祠",
      exits = {
        ["n"] = "大成殿|n,ne,nw,s",
      },
    },

    ["平台|eu,ne,s,u,w"] = {
      name = "平台",
      exits = {
        ["eu"] = "望海峰|wd",
        ["ne"] = "山路|nu,sw",
        ["s"]  = "明月池|n,su",
        ["u"]  = "翠岩峰|d",
        ["w"]  = "山路|e,nd,s,wu",
      },
    },

    -- ===== 府前大街（重名处理）=====
    ["府前大街|e,n,s,w"] = {
      name = "府前大街1",
      exits = {
        ["e"] = "东门|ne,w",
        ["n"] = "石板路|n,s",
        ["s"] = "戟门|n,se,sw",
        ["w"] = "府前大街|e,n,s,wu",
      },
    },

    ["府前大街|e,n,s,wu"] = {
      name = "府前大街2",
      exits = {
        ["e"]  = "府前大街|e,n,s,w",
        ["n"]  = "北大街|e,n,s",
        ["s"]  = "南大街|e,n,s,w",
        ["wu"] = "石拱桥|ed,wd",
      },
    },

    ["府衙|w"] = {
      name = "府衙",
      exits = {
        ["w"] = "北大街|e,n,s",
      },
    },

    ["恒山山门|nu,sd"] = {
      name = "恒山山门",
      exits = {
        ["sd"] = "山路|e,nu,sw",
      },
    },

    ["戟门|n,se,sw"] = {
      name = "戟门",
      exits = {
        ["n"]  = "府前大街|e,n,s,w",
        ["se"] = "小道|nw,s,w",
        ["sw"] = "小道|e,ne,s",
      },
    },

    ["挂月峰|ed"] = {
      name = "挂月峰",
      exits = {
        ["ed"] = "山路|e,nd,s,wu",
      },
    },

    ["明月池|n,su"] = {
      name = "明月池",
      exits = {
        ["n"]  = "平台|eu,ne,s,u,w",
        ["su"] = "清凉寺山门|enter,nd,su",
      },
    },

    ["望海峰|wd"] = {
      name = "望海峰",
      exits = {
        ["wd"] = "平台|eu,ne,s,u,w",
      },
    },

    ["棂星门|nd,s"] = {
      name = "棂星门",
      exits = {
        ["nd"] = "泮池|e,su,w",
        ["s"]  = "大成殿|n,ne,nw,s",
      },
    },

    ["泮池|e,su,w"] = {
      name = "泮池",
      exits = {
        ["e"]  = "小道|nw,s,w",
        ["su"] = "棂星门|nd,s",
        ["w"]  = "小道|e,ne,s",
      },
    },

    ["清凉寺|out"] = {
      name = "清凉寺",
      exits = {
        ["out"] = "清凉寺山门|enter,nd,su",
      },
    },

    ["清凉寺山门|enter,nd,su"] = {
      name = "清凉寺山门",
      exits = {
        ["enter"] = "清凉寺|out",
        ["nd"]    = "明月池|n,su",
        ["su"]    = "锦绣峰|nd",
      },
    },

    ["灵丘|ne,se,sw"] = {
      name = "灵丘",
      exits = {
        ["ne"] = "蛤蟆嘴|nd,sw",
        ["se"] = "蒲阴陉|nw,se",
        ["sw"] = "山路|ne,w",
      },
    },

    ["石拱桥|ed,wd"] = {
      name = "石拱桥",
      exits = {
        ["ed"] = "府前大街|e,n,s,wu",
        ["wd"] = "边靖楼|eu,s,u,w",
      },
    },

    ["石板路|n,s"] = {
      name = "石板路",
      exits = {
        ["n"] = "阿育王塔|enter,s",
        ["s"] = "府前大街|e,n,s,w",
      },
    },

    ["繁峙|ne,sw"] = {
      name = "繁峙",
      exits = {
        ["ne"] = "山路|e,nu,sw",
        ["sw"] = "土路|ne,su,sw",
      },
    },

    ["翠岩峰|d"] = {
      name = "翠岩峰",
      exits = {
        ["d"] = "平台|eu,ne,s,u,w",
      },
    },

    ["蛤蟆嘴|nd,sw"] = {
      name = "蛤蟆嘴",
      exits = {
        ["sw"] = "灵丘|ne,se,sw",
      },
    },

    ["西门|e,w"] = {
      name = "西门",
      exits = {
        ["e"] = "边靖楼|eu,s,u,w",
        ["w"] = "山路|e,nw",
      },
    },

    ["边靖楼|eu,s,u,w"] = {
      name = "边靖楼",
      exits = {
        ["eu"] = "石拱桥|ed,wd",
        ["s"]  = "军营|n,su",
        ["w"]  = "西门|e,w",
      },
    },

    ["酒楼|w"] = {
      name = "酒楼",
      exits = {
        ["w"] = "南大街|e,n,s,w",
      },
    },

    ["钱庄|e"] = {
      name = "钱庄",
      exits = {
        ["e"] = "南大街1|e,n,s,w",
      },
    },

    ["锦绣峰|nd"] = {
      name = "锦绣峰",
      exits = {
        ["nd"] = "清凉寺山门|enter,nd,su",
      },
    },

    ["阿育王塔|enter,s"] = {
      name = "阿育王塔",
      exits = {
        ["enter"] = "塔内|out",
        ["s"]     = "石板路|n,s",
      },
    },
    ["蒲阴陉|nw,se"] = {
      name = "蒲阴陉",
      exits = {
        ["nw"] = "灵丘|ne,se,sw",
        ["se;se"] = "倒马关|nw,se"
      },
    },    
    ["倒马关|nw,se"] = {
      name = "倒马关",
      exits = {
        ["nw;nw"] = "蒲阴陉|nw,se",
      },
    },

    ["雁门关|nw,sd"] = {
      name = "雁门关",
      exits = {
        ["sd"] = "北门|nu,s",
      },
    },
  },
}

mapper.maps["dzhou"].mapAliases = {

  -- ===== 原点 / 入口 =====
  ["东门"] = "dm",

  -- ===== 城内主路 =====
  ["府前大街1"] = "fpdj",
  ["府前大街2"] = "origin",
  ["北大街"]    = "bdj",
  ["南大街1"]   = "ndj1",
  ["南大街2"]   = "ndj2",

  -- ===== 城门 =====
  ["北门"] = "bm",
  ["南门"] = "nm",
  ["西门"] = "xm",

  -- ===== 官署 / 商铺 / 客店 =====
  ["府衙"] = "fy",
  ["酒楼"] = "jl",
  ["当铺"] = "dp",
  ["钱庄"] = "qz",
  ["客栈"] = "kz",
  ["里间"] = "lj",

  -- ===== 儒学建筑群 =====
  ["戟门"]   = "jm",
  ["泮池"]   = "pc",
  ["棂星门"] = "lxm",
  ["大成殿"] = "dcd",
  ["崇圣祠"] = "csc",
  ["侧门"]  = "cm1",
  ["侧门2"]  = "cm2",
  ["小道"]  = "xd1",
  ["小道2"]  = "xd2",

  -- ===== 城防 / 军营 =====
  ["边靖楼"] = "bjl",
  ["军营"]   = "jy",
  ["军仓"]   = "jc",
  ["石拱桥"] = "sgq",

  -- ===== 塔与寺 =====
  ["石板路"]   = "sbl",
  ["阿育王塔"] = "aywt",
  ["塔内"]     = "tn",
  ["佛光寺"]   = "fgs",
  ["清凉寺"]   = "qls",
  ["清凉寺山门"] = "qlssm",

  -- ===== 城外/山地 =====
  ["滹沱河北岸"] = "hthba",
  ["靖边大车店"] = "jbdcd",
  ["土路"]       = "tl",

  ["山路1"] = "sl1",
  ["山路2"] = "sl2",
  ["山路"] = "sl",
  ["山路4"] = "sl4",
  ["山路5"] = "sl5",
  ["山路6"] = "sl6",
  ["山路7"] = "sl7",

  ["平台"]   = "pt",
  ["明月池"] = "myc",
  ["望海峰"] = "whf",
  ["翠岩峰"] = "cyf",
  ["挂月峰"] = "gyf",
  ["叶斗峰"] = "ydf",

  ["恒山山门"] = "hssm",
  ["宁武关"]   = "nwg",
  ["雁门关"]   = "ymg",

  ["繁峙"]   = "fz",
  ["灵丘"]   = "lq",
  ["蒲阴陉"] = "pyx",
  ["蛤蟆嘴"] = "hmz",
  ["倒马关"] = "dmg",

}

</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>张家口 - zjk</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["zjk"] = {
  region = {
    key  = "zjk",
    name = "张家口",
  },

  mapNodes = {
  
    ["赤城县|nu,s,se,sw"] = { name = "赤城县", 
      exits = { 
        ["nu"] = "独石口|n,sd", 
        ["s"] = "温泉|n,s", 
        ["se"] = "滴水崖|nu,nw,s",
        ["sw"] = "锁阳关|ne,sw", 
        }, 
    },  

["千佛洞|sd"] = {
  name = "千佛洞",
  exits = {
    ["sd"] = "滴水崖|nu,nw,s",
  },
},

["朝阳观|n"] = {
  name = "朝阳观",
  exits = {
    ["n"] = "滴水崖|nu,nw,s",
  },
},

["滴水崖|nu,nw,s"] = {
  name = "滴水崖",
  exits = {
    ["nu"] = "千佛洞|sd",
    ["nw"] = "赤城县|nu,s,se,sw",
    ["s"] = "朝阳观|n",
  },
},

    ["官道|e,sw,w"] = {
      name = "官道",
      exits = {
        ["e"]  = "西门|e,w",
        ["sw"] = "官道|ne,s,wu",
        ["w"]  = "东麓|e,n,wu",
      },
    },

    ["官道|se,w"] = {
      name = "官道2",
      exits = {
        ["se"] = "宣府|ne,nw,se,sw",
        ["w"]  = "东门|e,w",
      },
    },

    ["官道|ne,s,wu"] = {
      name = "官道3",
      exits = {
        ["ne"] = "官道|e,sw,w",
        ["s"]  = "官道|n,ne,sw",
        ["wu"] = "香炉山|ed,ne",
      },
    },

    ["官道|e,ne,sw"] = {
      name = "官道4",
      exits = {
        ["e"]  = "官道|e,n,ne,se,w",
        ["ne"] = "边塞马车行|e,sw",
        ["sw"] = "官道|n,ne,sw",
      },
    },

    ["官道|n,ne,s,w"] = {
      name = "官道5",
      exits = {
        ["n"]  = "南门|n,s",
        ["ne"] = "花报梁|e,sw",
        ["s"]  = "官道|e,n,ne,se,w",
        ["w"]  = "边塞马车行|e,sw",
      },
    },

    ["官道|e,n,ne,se,w"] = {
      name = "官道6",
      exits = {
        ["e"]  = "居庸关|ne,nw,se,w",
        ["n"]  = "官道|n,ne,s,w",
        ["ne"] = "山路|eu,sw",
        ["se"] = "北门|nw,s,u",
        ["w"]  = "官道|e,ne,sw",
      },
    },

    ["官道|n,ne,sw"] = {
      name = "官道7",
      exits = {
        ["n"]  = "官道|ne,s,wu",
        ["ne"] = "官道|e,ne,sw",
        ["sw"] = "官道|ne,wd",
      },
    },

    ["官道|ne,wd"] = {
      name = "官道8",
      exits = {
        ["ne"] = "官道|n,ne,sw",
        ["wd"] = "洋河北渡口|eu",
      },
    },

    ["东市|e,w"] = {
      name = "东市",
      exits = {
        ["e"] = "东门|e,w",
        ["w"] = "广场|e,n,s,w",
      },
    },

    ["东门|e,w"] = {
      name = "东门",
      exits = {
        ["e"] = "官道|se,w",
        ["w"] = "东市|e,w",
      },
    },

    ["云盖山|nd,wu"] = {
      name = "云盖山",
      exits = {
        ["nd"] = "海儿洼|ne,nu,su,w",
        ["wu"] = "八龙山|ed,nd,wd",
      },
    },

    ["八龙山|ed,nd,wd"] = {
      name = "八龙山",
      exits = {
        ["ed"] = "云盖山|nd,wu",
        ["nd"] = "土路|e,nu,su,w",
        ["wd"] = "山路|eu,sw",
      },
    },
["酒家|e"] = {
  name = "酒家",
  exits = {
    ["e"] = "北市|e,n,s,w",
  },
},
    ["北市|e,n,s,w"] = {
      name = "北市",
      exits = {
        ["e"] = "后巷|w",
        ["n"] = "大境门|n,s",
        ["s"] = "广场|e,n,s,w",
        ["w"] = "酒家|e",
      },
    },

    ["北门|nw,s,u"] = {
      name = "北门",
      exits = {
        ["nw"] = "官道|e,n,ne,se,w",
        ["s"]  = "蔚县|e,n,s,se,w",
        ["u"]  = "玉皇阁|d",
      },
    },

    ["南安寺塔|nw"] = {
      name = "南安寺塔",
      exits = {
        ["nw"] = "蔚县|e,n,s,se,w",
      },
    },

    ["南市|e,n,s,w"] = {
      name = "南市",
      exits = {
        ["e"] = "客店|enter,w",
        ["n"] = "广场|e,n,s,w",
        ["s"] = "南门|n,s",
      },
    },

    ["南门|n,s"] = {
      name = "南门",
      exits = {
        ["n"] = "南市|e,n,s,w",
        ["s"] = "官道|n,ne,s,w",
      },
    },

    ["南门|n,su"] = {
      name = "南门2",
      exits = {
        ["n"]  = "蔚县|e,n,s,se,w",
        ["su"] = "山路|nd,su",
      },
    },

    ["后巷|w"] = {
      name = "后巷",
      exits = {
        ["w"] = "北市|e,n,s,w",
      },
    },

    ["土路|e,nu,su,w"] = {
      name = "土路",
      exits = {
        ["e"]  = "海儿洼|ne,nu,su,w",
        ["nu"] = "孤山|sd",
        ["su"] = "八龙山|ed,nd,wd",
        ["w"]  = "花报梁|e,sw",
      },
    },

    ["地字号房|out"] = {
      name = "地字号房",
      exits = {
        ["out"] = "客店|enter,w",
      },
    },

    ["大境门|n,s"] = {
      name = "大境门",
      exits = {
        ["s"] = "北市|e,n,s,w",
      },
    },

    ["娘娘山|sd"] = {
      name = "娘娘山",
      exits = {
        ["sd"] = "海儿洼|ne,nu,su,w",
      },
    },

    ["孤山|sd"] = {
      name = "孤山",
      exits = {
        ["sd"] = "土路|e,nu,su,w",
      },
    },

    ["客店|enter,w"] = {
      name = "客店",
      exits = {
        ["enter"] = "地字号房|out",
        ["w"]     = "南市|e,n,s,w",
      },
    },

    ["宣府|ne,nw,se,sw"] = {
      name = "宣府",
      exits = {
        ["ne"] = "锁阳关|ne,sw",
        ["nw"] = "官道|se,w",
        ["se"] = "居庸关|ne,nw,se,w",
        ["sw"] = "海儿洼|ne,nu,su,w",
      },
    },

    ["小庙坡|ed,wu"] = {
      name = "小庙坡",
      exits = {
        ["ed"] = "广灵县|e,wu",
      },
    },

    ["小路|n,se"] = {
      name = "小路",
      exits = {
        ["n"]  = "温泉|n,s",
        ["se"] = "白河岸边|nw,sw",
      },
    },

    ["居庸关|ne,nw,se,w"] = {
      name = "居庸关",
      exits = {
        ["ne"] = "靖安堡|ne,sw",
        ["nw"] = "宣府|ne,nw,se,sw",
        ["se"] = "德胜门|e,nw,se,sw,u",
        ["w"]  = "官道|e,n,ne,se,w",
      },
    },

    ["山路|eu,sw"] = {
      name = "山路",
      exits = {
        ["eu"] = "八龙山|ed,nd,wd",
        ["sw"] = "官道|e,n,ne,se,w",
      },
    },

    ["山路|nd,su"] = {
      name = "山路2",
      exits = {
        ["nd"] = "南门|n,su",
        ["su"] = "蛤蟆嘴|nd,sw",
      },
    },

    ["广场|e,n,s,w"] = {
      name = "广场",
      exits = {
        ["e"] = "东市|e,w",
        ["n"] = "北市|e,n,s,w",
        ["s"] = "南市|e,n,s,w",
        ["w"] = "西市|e,w",
      },
    },

    ["广灵县|e,wu"] = {
      name = "广灵县",
      exits = {
        ["e"]  = "暖泉镇|ne,w",
        ["wu"] = "小庙坡|ed,wu",
      },
    },

    ["德胜门|e,nw,se,sw,u"] = {
      name = "德胜门",
      exits = {
        ["nw"] = "居庸关|ne,nw,se,w",
      },
    },

    ["暖泉镇|ne,w"] = {
      name = "暖泉镇",
      exits = {
        ["ne"] = "西门|e,sw",
        ["w"]  = "广灵县|e,wu",
      },
    },

    ["洋河北渡口|eu"] = {
      name = "洋河北渡口",
      exits = {
        ["eu"] = "官道|ne,wd",
      },
    },

    ["海儿洼|ne,nu,su,w"] = {
      name = "海儿洼",
      exits = {
        ["ne"] = "宣府|ne,nw,se,sw",
        ["nu"] = "娘娘山|sd",
        ["su"] = "云盖山|nd,wu",
        ["w"]  = "土路|e,nu,su,w",
      },
    },

    ["温泉|n,s"] = { name = "温泉", exits = { ["n"] = "赤城县|nu,s,se,sw", ["s"] = "小路|n,se", }, },
    ["独石口|n,sd"] = { name = "独石口", exits = { ["sd"] = "赤城县|nu,s,se,sw", }, },
    ["玉皇阁|d"] = { name = "玉皇阁", exits = { ["d"] = "北门|nw,s,u", }, },

    ["白河岸边|nw,sw"] = {
      name = "白河岸边",
      exits = {
        ["nw"] = "小路|n,se",
        ["sw"] = "靖安堡|ne,sw",
      },
    },

    ["花报梁|e,sw"] = {
      name = "花报梁",
      exits = {
        ["e"]  = "土路|e,nu,su,w",
        ["sw"] = "官道|n,ne,s,w",
      },
    },

    ["药铺|e,w"] = {
      name = "药铺",
      exits = {
        ["e"] = "蔚县|e,n,s,se,w",
        ["w"] = "西门|e,sw",
      },
    },

    ["蔚县|e,n,s,se,w"] = {
      name = "蔚县",
      exits = {
        ["e"]  = "释迦寺|w",
        ["n"]  = "北门|nw,s,u",
        ["s"]  = "南门|n,su",
        ["se"] = "南安寺塔|nw",
        ["w"]  = "药铺|e,w",
      },
    },

    ["蛤蟆嘴|nd,sw"] = { name = "蛤蟆嘴", exits = { ["nd"] = "山路|nd,su", }, },

    ["西市|e,w"] = {
      name = "西市",
      exits = {
        ["e"] = "广场|e,n,s,w",
        ["w"] = "西门|e,w",
      },
    },

    ["西门|e,sw"] = {
      name = "西门1",
      exits = {
        ["e"]  = "药铺|e,w",
        ["sw"] = "暖泉镇|ne,w",
      },
    },

    ["西门|e,w"] = {
      name = "西门",
      exits = {
        ["e"] = "西市|e,w",
        ["w"] = "官道|e,sw,w",
      },
    },

    ["边塞马车行|e,sw"] = {
      name = "边塞马车行",
      exits = {
        ["e"]  = "官道|n,ne,s,w",
        ["sw"] = "官道|e,ne,sw",
      },
    },

    ["释迦寺|w"] = { name = "释迦寺", exits = { ["w"] = "蔚县|e,n,s,se,w", }, },

    ["锁阳关|ne,sw"] = { name = "锁阳关", exits = { ["ne"] = "赤城县|nu,s,se,sw", ["sw"] = "宣府|ne,nw,se,sw", }, },

    ["靖安堡|ne,sw"] = { name = "靖安堡", exits = { ["ne"] = "白河岸边|nw,sw", ["sw"] = "居庸关|ne,nw,se,w", }, },

    ["东麓|e,n,wu"] = {
      name = "东麓",
      exits = {
        ["e"]  = "官道|e,sw,w",
        ["n"]  = "云泉寺|s",
        ["wu"] = "赐儿山|ed,sw,wd",
      },
    },

    ["云泉寺|s"] = { name = "云泉寺", exits = { ["s"] = "东麓|e,n,wu", }, },
    ["冰洞|ne"] = { name = "冰洞", exits = { ["ne"] = "山下|eu,nw,sw,w", }, },

    ["山下|eu,nw,sw,w"] = {
      name = "山下",
      exits = {
        ["eu"] = "赐儿山|ed,sw,wd",
        ["nw"] = "水洞|se",
        ["sw"] = "冰洞|ne",
        ["w"]  = "风洞|e,enter",
      },
    },

    ["山路|ne,sw"] = {
      name = "山路3",
      exits = {
        ["ne"] = "赐儿山|ed,sw,wd",
        ["sw"] = "香炉山|ed,ne",
      },
    },

    ["水洞|se"] = { name = "水洞", exits = { ["se"] = "山下|eu,nw,sw,w", }, },
    ["洞内|out"] = { name = "洞内", exits = { ["out"] = "风洞|e,enter", }, },

    ["赐儿山|ed,sw,wd"] = {
      name = "赐儿山",
      exits = {
        ["ed"] = "东麓|e,n,wu",
        ["sw"] = "山路|ne,sw",
        ["wd"] = "山下|eu,nw,sw,w",
      },
    },

    ["风洞|e,enter"] = {
      name = "风洞",
      exits = {
        ["e"]     = "山下|eu,nw,sw,w",
        ["enter"] = "洞内|out",
      },
    },

    ["香炉山|ed,ne"] = {
      name = "香炉山",
      exits = {
        ["ed"] = "官道|ne,s,wu",
        ["ne"] = "山路|ne,sw",
      },
    },
  },

  -- ✅ mapAliases：key=房间name（含编号），value=拼音缩写
  mapAliases = {
    -- 官道
    ["官道"] = "gd",
    ["官道2"] = "gd2",
    ["官道3"] = "gd3",
    ["官道4"] = "gd4",
    ["官道5"] = "gd5",
    ["官道6"] = "gd6",
    ["官道7"] = "gd7",
    ["官道8"] = "gd8",

    -- 南门
    ["南门"] = "nm",
    ["南门2"] = "nm2",

    -- 山路
    ["山路1"] = "sl",
    ["山路2"] = "sl2",
    ["山路3"] = "sl3",

    -- 西门
    ["西门1"] = "xm1",
    ["西门"] = "xm",

    -- 其它（唯一名）
    ["酒家"]       = "jj",
    ["东市"]       = "ds",
    ["东门"]       = "dm",
    ["云盖山"]     = "ygs",
    ["八龙山"]     = "bls",
    ["北市"]       = "bs",
    ["北门"]       = "bm",
    ["南安寺塔"]   = "nast",
    ["南市"]       = "ns",
    ["后巷"]       = "hx",
    ["土路"]       = "tl",
    ["地字号房"]   = "dzhf",
    ["大境门"]     = "djm",
    ["娘娘山"]     = "nns",
    ["孤山"]       = "gs",
    ["客店"]       = "kd",
    ["宣府"]       = "xf",
    ["小庙坡"]     = "xmp",
    ["小路"]       = "xl",
    ["居庸关"]     = "jyg",
    ["广场"]       = "origin",
    ["广灵县"]     = "glx",
    ["德胜门"]     = "dsm",
    ["暖泉镇"]     = "nqz",
    ["洋河北渡口"] = "yhbdk",
    ["海儿洼"]     = "hew",
    ["温泉"]       = "wq",
    ["独石口"]     = "dsk",
    ["玉皇阁"]     = "yhg",
    ["白河岸边"]   = "bheb",
    ["花报梁"]     = "hbl",
    ["药铺"]       = "yp",
    ["蔚县"]       = "wx",
    ["蛤蟆嘴"]     = "hmz",
    ["西市"]       = "xs",
    ["赤城县"]     = "ccx",
    ["边塞马车行"] = "mch",
    ["释迦寺"]     = "sjs",
    ["锁阳关"]     = "syg",
    ["靖安堡"]     = "jab",
    ["东麓"]       = "dl",
    ["云泉寺"]     = "yqs",
    ["冰洞"]       = "bd",
    ["山下"]       = "sx",
    ["水洞"]       = "sd",
    ["洞内"]       = "dn",
    ["赐儿山"]     = "ces",
    ["风洞"]       = "fd",
    ["香炉山"]     = "xls",
    ["千佛洞"]     = "qfd",
    ["朝阳观"]     = "cyg",
    ["滴水崖"]     = "dsy",
  }
}</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>晋阳 - jyang</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["jyang"] = {
  region = {
    key  = "jyang",
    name = "晋阳",
  },

  mapNodes = {
  
     ["官道|ne,s"] = {
      name = "官道",
      exits = {
        ["ne"] = "阳曲县|n,sw",
        ["s"] = "怀德门|e,n,s,w",
      },
    },

    ["官道|nu,s"] = {
      name = "官道2",
      exits = {
        ["nu"] = "忻州|n,sd",
        ["s"] = "阳曲县|n,sw",
      },
    }, 
    ["官道|n,sw"] = {
      name = "官道3",
      exits = {
        ["n"] = "官道1|ne,s",
        ["sw"] = "山路|ne,sw",
      },
    },

    ["官道1|ne,s"] = {
      name = "官道4",
      exits = {
        ["ne"] = "金肃门|e,n,s,sw",
        ["s"] = "官道|n,sw",
      },
    },    

    ["东大街|e,ne,s,w"] = {
      name = "东大街1",
      exits = {
        ["e"] = "东大街|e,ne,w",
        ["ne"] = "学馆|sw",
        ["s"] = "药铺|n",
        ["w"] = "米市|e,n,s,w",
      },
    },

    ["东大街|e,ne,w"] = {
      name = "东大街2",
      exits = {
        ["e"] = "东大街1|e,ne,w",
        ["ne"] = "马车行|sw",
        ["w"] = "东大街|e,ne,s,w",
        ["knock gate;s"] = "晋阳镖局|n",
      },
    },
    
 ["晋阳镖局|n"] = {
  name = "晋阳镖局",
  exits = {
    ["n"] = "东大街|e,ne,w",
  },
},
   

    ["马车行|sw"] = {
      name = "马车行",
      exits = {
        ["sw"] = "东大街|e,ne,w",
      },
    },

    ["东大街1|e,ne,w"] = {
      name = "东大街3",
      exits = {
        ["e"] = "东大街|ne,s,w",
        ["ne"] = "朝曦门大街|e,sw,w",
        ["w"] = "东大街|e,ne,w",
      },
    },

    ["东大街|ne,s,w"] = {
      name = "东大街",
      exits = {
        ["ne"] = "广场|n,sw",
        ["s"] = "铁匠巷|n,s",
        ["w"] = "东大街1|e,ne,w",
      },
    },

    ["井陉|e,w"] = {
      name = "井陉",
      exits = {
        ["e"] = "平定州|e,nu,w",
        ["w"] = "朝曦门|e,ne,sw,w",
      },
    },

    ["关帝庙|out"] = {
      name = "关帝庙",
      exits = {
        ["out"] = "庙前|enter,n,s",
      },
    },

    ["南大街|e,n,s"] = {
      name = "南大街1",
      exits = {
        ["e"] = "铁匠巷|e,w",
        ["n"] = "南大街|n,s",
        ["s"] = "开远门|e,n,s,w",
      },
    },

    ["南大街|n,s"] = {
      name = "南大街",
      exits = {
        ["n"] = "米市|e,n,s,w",
        ["s"] = "南大街|e,n,s",
      },
    },

    ["南市|ne,s"] = {
      name = "南市",
      exits = {
        ["ne"] = "羊市|e,ne,sw,w",
        ["s"] = "米市|e,n,s,w",
      },
    },

    ["唐明镇|n,ne,s,w"] = {
      name = "唐明镇",
      exits = {
        ["n"] = "唐明镇北门|n,s",
        ["ne"] = "唐明镇东门|e,sw",
        ["s"] = "唐明镇南门|n,s",
        ["w"] = "萧府|e",
      },
    },

    ["唐明镇东门|e,sw"] = {
      name = "唐明镇东门",
      exits = {
        ["e"] = "羊市|e,ne,sw,w",
        ["sw"] = "唐明镇|n,ne,s,w",
      },
    },

    ["唐明镇北门|n,s"] = {
      name = "唐明镇北门",
      exits = {
        ["n"] = "贫民窟|e,s",
        ["s"] = "唐明镇|n,ne,s,w",
      },
    },

    ["唐明镇南门|n,s"] = {
      name = "唐明镇南门",
      exits = {
        ["n"] = "唐明镇|n,ne,s,w",
        ["s"] = "金肃门内街|e,n,w",
      },
    },

    ["地主家|s"] = {
      name = "地主家",
      exits = {
        ["s"] = "铁匠巷|e,n,ne,w",
      },
    },

    ["学馆|sw"] = {
      name = "学馆",
      exits = {
        ["sw"] = "东大街|e,ne,s,w",
      },
    },

    ["小巷|e,nw,w"] = {
      name = "小巷1",
      exits = {
        ["e"] = "小巷|s,w",
        ["nw"] = "麻市|se,sw,w",
        ["w"] = "泰宁寺|e,sw",
      },
    },

    ["小巷|s,w"] = {
      name = "小巷",
      exits = {
        ["s"] = "泰山庙|n,s",
        ["w"] = "小巷|e,nw,w",
      },
    },
    
 ["井陉|ne,w"] = {
  name = "井陉",
  exits = {
    ["ne"] = "娘子关|ne,sw",
    ["w"] = "平定州|e,nu,w",
  },
},   

["娘子关|ne,sw"] = {
  name = "娘子关",
  exits = {
    ["sw"] = "井陉|ne,w",
  },
},

    ["平定州|e,nu,w"] = {
      name = "平定州",
      exits = {
        ["e"] = "井陉|ne,w",
        ["w"] = "井陉|e,w",
      },
    },

    ["广场|n,sw"] = {
      name = "广场",
      exits = {
        ["n"] = "庙前|enter,n,s",
        ["sw"] = "东大街|ne,s,w",
      },
    },

    ["庙前|enter,n,s"] = {
      name = "庙前",
      exits = {
        ["enter"] = "关帝庙|out",
        ["n"] = "朝曦门内街|e,n,s,w",
        ["s"] = "广场|n,sw",
      },
    },

    ["开远门|e,n,s,w"] = {
      name = "开远门",
      exits = {
        ["n"] = "南大街|e,n,s",
        ["s"] = "太谷县|e,n,sw",
      },
    },

    ["忻州|n,sd"] = {
      name = "忻州",
      exits = {
        ["n"] = "滹沱河南|s",
        ["sd"] = "官道|nu,s",
      },
    },

    ["怀德门|e,n,s,w"] = {
      name = "怀德门",
      exits = {
        ["n"] = "官道|ne,s",
        ["s"] = "怀德门大街|e,n,w",
      },
    },

    ["怀德门大街|e,n,w"] = {
      name = "怀德门大街",
      exits = {
        ["e"] = "麻市|se,sw,w",
        ["n"] = "怀德门|e,n,s,w",
        ["w"] = "贫民窟|e,s",
      },
    },

    ["晋阳府|w"] = {
      name = "晋阳府",
      exits = {
        ["w"] = "铁匠巷|e,n,ne,w",
      },
    },
    
["城墙|ne,sw"] = {
  name = "城墙",
  exits = {
    ["sw"] = "朝曦门|e,ne,sw,w",
  },
},
    ["朝曦门|e,ne,sw,w"] = {
      name = "朝曦门",
      exits = {
        ["e"] = "井陉|e,w",
        ["ne"] = "城墙|ne,sw",
        ["w"] = "朝曦门内街|e,n,s,w",
      },
    },

    ["朝曦门内街|e,n,s,w"] = {
      name = "朝曦门内街",
      exits = {
        ["e"] = "朝曦门|e,ne,sw,w",
        ["n"] = "泰山庙|n,s",
        ["s"] = "庙前|enter,n,s",
        ["w"] = "朝曦门大街|e,sw,w",
      },
    },

    ["朝曦门大街|e,ne,w"] = {
      name = "朝曦门大街1",
      exits = {
        ["e"] = "朝曦门大街|e,sw,w",
        ["ne"] = "泰宁寺|e,sw",
        ["w"] = "羊市|e,ne,sw,w",
      },
    },

    ["朝曦门大街|e,sw,w"] = {
      name = "朝曦门大街",
      exits = {
        ["e"] = "朝曦门内街|e,n,s,w",
        ["sw"] = "东大街1|e,ne,w",
        ["w"] = "朝曦门大街|e,ne,w",
      },
    },

    ["泰宁寺|e,sw"] = {
      name = "泰宁寺",
      exits = {
        ["e"] = "小巷|e,nw,w",
        ["sw"] = "朝曦门大街|e,ne,w",
      },
    },

    ["泰山庙|n,s"] = {
      name = "泰山庙",
      exits = {
        ["n"] = "小巷|s,w",
        ["s"] = "朝曦门内街|e,n,s,w",
      },
    },

    ["滹沱河南|s"] = {
      name = "滹沱河南",
      exits = {
        ["s"] = "忻州|n,sd",
      },
    },

    ["牛市|ne,sw"] = {
      name = "牛市",
      exits = {
        ["ne"] = "麻市|se,sw,w",
        ["sw"] = "羊市|e,ne,sw,w",
      },
    },

    ["米市|e,n,s,w"] = {
      name = "米市",
      exits = {
        ["e"] = "东大街|e,ne,s,w",
        ["n"] = "南市|ne,s",
        ["s"] = "南大街|n,s",
        ["w"] = "金肃门内街|e,n,w",
      },
    },

    ["羊市|e,ne,sw,w"] = {
      name = "羊市",
      exits = {
        ["e"] = "朝曦门大街|e,ne,w",
        ["ne"] = "牛市|ne,sw",
        ["sw"] = "南市|ne,s",
        ["w"] = "唐明镇东门|e,sw",
      },
    },

    ["药铺|n"] = {
      name = "药铺",
      exits = {
        ["n"] = "东大街|e,ne,s,w",
      },
    },

    ["萧府|e"] = {
      name = "萧府",
      exits = {
        ["e"] = "唐明镇|n,ne,s,w",
      },
    },

    ["贫民窟|e,s"] = {
      name = "贫民窟",
      exits = {
        ["e"] = "怀德门大街|e,n,w",
        ["s"] = "唐明镇北门|n,s",
      },
    },

    ["金肃门|e,n,s,sw"] = {
      name = "金肃门",
      exits = {
        ["e"] = "金肃门内街|e,n,w",
        ["sw"] = "官道1|ne,s",
      },
    },

    ["金肃门内街|e,n,w"] = {
      name = "金肃门内街",
      exits = {
        ["e"] = "米市|e,n,s,w",
        ["n"] = "唐明镇南门|n,s",
        ["w"] = "金肃门|e,n,s,sw",
      },
    },

    ["铁匠巷|e,n,ne,w"] = {
      name = "铁匠巷1",
      exits = {
        ["e"] = "晋阳府|w",
        ["n"] = "地主家|s",
        ["ne"] = "铁匠巷|n,sw",
        ["w"] = "铁匠巷|e,w",
      },
    },

    ["铁匠巷|e,w"] = {
      name = "铁匠巷2",
      exits = {
        ["e"] = "铁匠巷|e,n,ne,w",
        ["w"] = "南大街|e,n,s",
      },
    },

    ["铁匠巷|n,s"] = {
      name = "铁匠巷",
      exits = {
        ["n"] = "东大街|ne,s,w",
        ["s"] = "铁匠巷|n,sw",
      },
    },

    ["铁匠巷|n,sw"] = {
      name = "铁匠巷4",
      exits = {
        ["n"] = "铁匠巷|n,s",
        ["sw"] = "铁匠巷|e,n,ne,w",
      },
    },

    ["阳曲县|n,sw"] = {
      name = "阳曲县",
      exits = {
        ["n"] = "官道|nu,s",
        ["sw"] = "官道|ne,s",
      },
    },

    ["麻市|se,sw,w"] = {
      name = "麻市",
      exits = {
        ["se"] = "小巷|e,nw,w",
        ["sw"] = "牛市|ne,sw",
        ["w"] = "怀德门大街|e,n,w",
      },
    },

    ["太行山脚下|ne,wd"] = {
      name = "太行山脚下",
      exits = {
        ["ne"] = "太谷县|e,n,sw",
        ["wd"] = "汾河岸边|eu",
      },
    },

    ["太谷县|e,n,sw"] = {
      name = "太谷县",
      exits = {
        ["e"] = "晋威镖局|w",
        ["n"] = "开远门|e,n,s,w",
        ["sw"] = "太行山脚下|ne,wd",
      },
    },

    ["晋威镖局|w"] = {
      name = "晋威镖局",
      exits = {
        ["w"] = "太谷县|e,n,sw",
      },
    },

    ["汾河岸边|eu"] = {
      name = "汾河岸边",
      exits = {
        ["eu"] = "太行山脚下|ne,wd",
      },
    },

    ["乱石冈|eu,sw,wu"] = {
      name = "乱石冈",
      exits = {
        ["eu"] = "解州|e,wd",
        ["sw"] = "河中府|ne,sw,wd",
        ["wu"] = "巨石平台|ed",
      },
    },

    ["内间|out"] = {
      name = "内间",
      exits = {
        ["out"] = "汾安客店|e,enter",
      },
    },

    ["太岳山脚下|wd"] = {
      name = "太岳山脚下",
      exits = {
        ["wd"] = "甘亭镇|eu,ne,su,w",
      },
    },

    ["安渡老店|s"] = {
      name = "安渡老店",
      exits = {
        ["s"] = "风陵渡镇|n,sw,w",
      },
    },

    ["小酒馆|e"] = {
      name = "小酒馆",
      exits = {
        ["e"] = "甘亭镇|eu,ne,su,w",
      },
    },

    ["山路|ne,s"] = {
      name = "山路1",
      exits = {
        ["ne"] = "山路|ne,sw",
        ["s"] = "汾阳|e,n,s",
      },
    },

    ["山路|ne,sw"] = {
      name = "山路2",
      exits = {
        ["ne"] = "官道|n,sw",
        ["sw"] = "山路|ne,s",
      },
    },

    ["山路|ne,w"] = {
      name = "山路",
      exits = {
        ["ne"] = "闻喜|ne,sw",
        ["w"] = "解州|e,wd",
      },
    },

    ["山道|n,sw"] = {
      name = "山道",
      exits = {
        ["n"] = "汾阳|e,n,s",
        ["sw"] = "甘亭镇|eu,ne,su,w",
      },
    },

    ["山间道|nd,sd"] = {
      name = "山间道",
      exits = {
        ["nd"] = "甘亭镇|eu,ne,su,w",
        ["sd"] = "晋州北门|nu,s",
      },
    },

    ["山间道|nd,se,sw"] = {
      name = "山间道2",
      exits = {
        ["nd"] = "晋州南门|n,su",
        ["se"] = "轵关陉|e,nw",
        ["sw"] = "闻喜|ne,sw",
      },
    },

    ["巨石平台|ed"] = {
      name = "巨石平台",
      exits = {
        ["ed"] = "乱石冈|eu,sw,wu",
      },
    },

    ["市集|e,n,s,w"] = {
      name = "市集",
      exits = {
        ["e"] = "晋州钱庄|w",
        ["n"] = "晋州北门|nu,s",
        ["s"] = "晋州南门|n,su",
        ["w"] = "汾安客店|e,enter",
      },
    },

    ["晋州北门|nu,s"] = {
      name = "晋州北门",
      exits = {
        ["nu"] = "山间道|nd,sd",
        ["s"] = "市集|e,n,s,w",
      },
    },

    ["晋州南门|n,su"] = {
      name = "晋州南门",
      exits = {
        ["n"] = "市集|e,n,s,w",
        ["su"] = "山间道|nd,se,sw",
      },
    },

    ["晋州钱庄|w"] = {
      name = "晋州钱庄",
      exits = {
        ["w"] = "市集|e,n,s,w",
      },
    },

    ["汾安客店|e,enter"] = {
      name = "汾安客店",
      exits = {
        ["e"] = "市集|e,n,s,w",
        ["enter"] = "内间|out",
      },
    },

    ["汾河岸边|w"] = {
      name = "汾河岸边2",
      exits = {
        ["w"] = "汾阳|e,n,s",
      },
    },

    ["汾阳|e,n,s"] = {
      name = "汾阳",
      exits = {
        ["e"] = "汾河岸边|w",
        ["n"] = "山路|ne,s",
        ["s"] = "山道|n,sw",
      },
    },

    ["河中府|ne,sw,wd"] = {
      name = "河中府",
      exits = {
        ["ne"] = "乱石冈|eu,sw,wu",
        ["sw"] = "河边小路|e,ne",
        ["wd"] = "黄河北岸|eu,nw,se",
      },
    },

    ["河边小路|e,ne"] = {
      name = "河边小路",
      exits = {
        ["e"] = "风陵渡镇|n,sw,w",
        ["ne"] = "河中府|ne,sw,wd",
      },
    },

    ["甘亭镇|eu,ne,su,w"] = {
      name = "甘亭镇",
      exits = {
        ["eu"] = "太岳山脚下|wd",
        ["ne"] = "山道|n,sw",
        ["su"] = "山间道|nd,sd",
        ["w"] = "小酒馆|e",
      },
    },

    ["解州|e,wd"] = {
      name = "解州",
      exits = {
        ["e"] = "山路|ne,w",
        ["wd"] = "乱石冈|eu,sw,wu",
      },
    },

    ["轵关陉|e,nw"] = {
      name = "轵关陉",
      exits = {
        ["nw"] = "山间道|nd,se,sw",
      },
    },

    ["闻喜|ne,sw"] = {
      name = "闻喜",
      exits = {
        ["ne"] = "山间道|nd,se,sw",
        ["sw"] = "山路|ne,w",
      },
    },

    ["风陵渡|ne,nw,s"] = {
      name = "风陵渡",
      exits = {
        ["ne"] = "风陵渡镇|n,sw,w",
      },
    },

    ["风陵渡镇|n,sw,w"] = {
      name = "风陵渡镇",
      exits = {
        ["n"] = "安渡老店|s",
        ["sw"] = "风陵渡|ne,nw,s",
        ["w"] = "河边小路|e,ne",
      },
    },

    ["黄河北岸|eu,nw,se"] = {
      name = "黄河北岸",
      exits = {
        ["eu"] = "河中府|ne,sw,wd",
      },
    },
  },

  -- ✅ mapAliases：key=房间name（已去重编号），value=拼音缩写
  mapAliases = {

    -- 重名：东大街
    ["东大街1"] = "ddj1",
    ["东大街2"] = "ddj2",
    ["东大街3"] = "ddj3",
    ["东大街"] = "ddj",

    -- 重名：南大街
    ["南大街1"] = "ndj1",
    ["南大街"] = "ndj",

    -- 重名：官道
    ["官道"] = "gd",
    ["官道2"] = "gd2",
    ["官道3"] = "gd3",
    ["官道4"] = "gd4",

    -- 重名：小巷
    ["小巷1"] = "xx1",
    ["小巷"] = "xx",

    -- 重名：朝曦门大街
    ["朝曦门大街1"] = "cxmdj1",
    ["朝曦门大街"] = "cxmdj",

    -- 重名：铁匠巷
    ["铁匠巷1"] = "tjx1",
    ["铁匠巷2"] = "tjx2",
    ["铁匠巷"] = "tjx",
    ["铁匠巷4"] = "tjx4",

    -- 重名：山路
    ["山路1"] = "sl1",
    ["山路2"] = "sl2",
    ["山路"] = "sl",

    -- 重名：山间道
    ["山间道"] = "sjd",
    ["山间道2"] = "sjd2",

    -- 重名：汾河岸边
    ["汾河岸边"] = "fhab",
    ["汾河岸边2"] = "fhab2",

    -- 唯一名
    ["城墙"] = "cq",
    ["马车行"] = "mch",
    ["井陉"] = "jx",
    ["关帝庙"] = "gdm",
    ["南市"] = "ns",
    ["唐明镇"] = "tmz",
    ["唐明镇东门"] = "tmzdm",
    ["唐明镇北门"] = "tmzbm",
    ["唐明镇南门"] = "tmznm",
    ["地主家"] = "dzj",
    ["学馆"] = "xg",
    ["平定州"] = "pdz",
    ["广场"] = "origin",
    ["庙前"] = "mq",
    ["开远门"] = "kym",
    ["忻州"] = "xz",
    ["怀德门"] = "hdm",
    ["怀德门大街"] = "hdmdj",
    ["晋阳府"] = "jyf",
    ["朝曦门"] = "cxm",
    ["朝曦门内街"] = "cxmnj",
    ["泰宁寺"] = "tns",
    ["泰山庙"] = "tsm",
    ["滹沱河南"] = "hthn",
    ["牛市"] = "nshi",
    ["米市"] = "ms",
    ["羊市"] = "ys",
    ["药铺"] = "yp",
    ["萧府"] = "xf",
    ["贫民窟"] = "pmk",
    ["金肃门"] = "jsm",
    ["金肃门内街"] = "jsmnj",
    ["阳曲县"] = "yqx",
    ["麻市"] = "mshi",
    ["太行山脚下"] = "thsjx",
    ["太谷县"] = "tgx",
    ["晋威镖局"] = "jwbj",
    ["晋阳镖局"] = "jybj",
    ["乱石冈"] = "lsg",
    ["内间"] = "nj",
    ["太岳山脚下"] = "tysjx",
    ["安渡老店"] = "add",
    ["小酒馆"] = "xjg",
    ["山道"] = "shd",
    ["巨石平台"] = "jspt",
    ["市集"] = "sj",
    ["晋州北门"] = "jzbm",
    ["晋州南门"] = "jznm",
    ["晋州钱庄"] = "jzqz",
    ["汾安客店"] = "fakd",
    ["汾阳"] = "fy",
    ["河中府"] = "hzf",
    ["河边小路"] = "hbxld",
    ["甘亭镇"] = "gtz",
    ["解州"] = "jiez",
    ["轵关陉"] = "zgx",
    ["闻喜"] = "wx",
    ["风陵渡"] = "fld",
    ["风陵渡镇"] = "fldz",
    ["黄河北岸"] = "hhba",
    ["娘子关"] = "nzg",
  },
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>大同 - datong</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["datong"] = {
  region = {
    key  = "datong",
    name = "大同",
  },

  mapNodes = {

    ["魁星楼|n,s"] = {
      name = "魁星楼",
      exits = {
        ["n"] = "北大街2|e,n,s,w",
        ["s"] = "南大街|e,n,s,w",
      },
    },  

    ["北大街|e,n,s,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "北大街2|e,n,s,w",
        ["n"] = "文庙|s",
        ["s"] = "总镇署|n",
        ["w"] = "府治|e",
      },
    },

    ["北大街2|e,n,s,w"] = {
      name = "北大街2",
      exits = {
        ["e"] = "北大街3|e,n,s,w",
        ["n"] = "北门|ne,nw,s",
        ["s"] = "魁星楼|n,s",
        ["w"] = "北大街|e,n,s,w",
      },
    },

    ["北大街3|e,n,s,w"] = {
      name = "北大街3",
      exits = {
        ["e"] = "武庙|s,w",
        ["n"] = "北仓|s",
        ["s"] = "城隍庙|n",
        ["w"] = "北大街2|e,n,s,w",
      },
    },

    -- ===== 北大街 =====
    ["北仓|s"] = {
      name = "北仓",
      exits = {
        ["s"] = "北大街3|e,n,s,w",
      },
    },

    ["北门|ne,nw,s"] = {
      name = "北门",
      exits = {
        ["ne"] = "官道|nu,sw",
        ["s"]  = "北大街2|e,n,s,w",
      },
    },

    -- ===== 官道 =====
    ["官道|ne,sw"] = {
      name = "官道",
      exits = {
        ["ne"] = "洋河南渡口|e,sw",
        ["sw"] = "马铺山|ne,sd",
      },
    },

    ["官道|nu,sw"] = {
      name = "官道2",
      exits = {
        ["nu"] = "马铺山|ne,sd",
        ["sw"] = "北门|ne,nw,s",
      },
    },

    ["洋河南岸|w"] = {
      name = "洋河南岸",
      exits = {
        ["w"] = "洋河南渡口|e,sw",
      },
    },

    ["洋河南渡口|e,sw"] = {
      name = "洋河南渡口",
      exits = {
        ["e"]  = "洋河南岸|w",
        ["sw"] = "官道|ne,sw",
      },
    },

    ["马铺山|ne,sd"] = {
      name = "马铺山",
      exits = {
        ["ne"] = "官道|ne,sw",
        ["sd"] = "官道|nu,sw",
      },
    },

    ["总镇署|n"] = {
      name = "总镇署",
      exits = {
        ["n"] = "北大街|e,n,s,w",
      },
    },

    ["府治|e"] = {
      name = "府治",
      exits = {
        ["e"] = "北大街|e,n,s,w",
      },
    },

    ["文庙|s"] = {
      name = "文庙",
      exits = {
        ["s"] = "北大街|e,n,s,w",
      },
    },

    -- ===== 南大街 =====
    ["南大街|e,n,s,w"] = {
      name = "南大街",
      exits = {
        ["e"] = "南大街6|e,w",
        ["n"] = "魁星楼|n,s",
        ["s"] = "南大街3|e,n,s,w",
        ["w"] = "钟楼|e,s,w",
      },
    },

    ["南大街2|e,n,s,w"] = {
      name = "南大街2",
      exits = {
        ["e"] = "东门|n,se,w",
        ["n"] = "牌坊|n,s",
        ["s"] = "太平楼|n",
        ["w"] = "南大街6|e,w",
      },
    },

    ["南大街3|e,n,s,w"] = {
      name = "南大街3",
      exits = {
        ["e"] = "九龙壁|w",
        ["n"] = "南大街|e,n,s,w",
        ["s"] = "南大街4|e,n,s,w",
        ["w"] = "鼓楼|e,n,w",
      },
    },

    ["南大街4|e,n,s,w"] = {
      name = "南大街4",
      exits = {
        ["e"] = "神机府|enter,w",
        ["n"] = "南大街3|e,n,s,w",
        ["s"] = "南大街5|e,n,s,w",
        ["w"] = "大雄宝殿|e,w",
      },
    },

    ["南大街5|e,n,s,w"] = {
      name = "南大街5",
      exits = {
        ["e"] = "客栈|enter,w",
        ["n"] = "南大街4|e,n,s,w",
        ["s"] = "南门|e,n,s",
        ["w"] = "当铺|e",
      },
    },

    ["南大街6|e,w"] = {
      name = "南大街6",
      exits = {
        ["e"] = "南大街2|e,n,s,w",
        ["w"] = "南大街|e,n,s,w",
      },
    },

    -- ===== 山路 =====
    ["山路|n,sw"] = {
      name = "山路",
      exits = {
        ["n"]  = "南门|e,n,s",
        ["sw"] = "山路2|ne,nu,sw",
      },
    },

    ["山路2|ne,nu,sw"] = {
      name = "山路2",
      exits = {
        ["ne"] = "山路|n,sw",
        ["nu"] = "秦家寨|n,sd",
        ["sw"] = "山路3|ne,se",
      },
    },

    ["山路3|ne,se"] = {
      name = "山路3",
      exits = {
        ["ne"] = "山路2|ne,nu,sw",
        ["se"] = "雁门关|nw,sd",
      },
    },

    -- ===== 其余 =====
    ["太平楼|n"] = {
      name = "太平楼",
      exits = {
        ["n"] = "南大街2|e,n,s,w",
      },
    },

    ["南门|e,n,s"] = {
      name = "南门",
      exits = {
        ["e"] = "五郎镖局|w",
        ["n"] = "南大街5|e,n,s,w",
        ["s"] = "山路|n,sw",
      },
    },

    ["五郎镖局|w"] = { name = "五郎镖局", exits = { ["w"] = "南门|e,n,s" } },
    ["钟楼|e,s,w"] = { name = "钟楼", exits = { ["e"]="南大街|e,n,s,w",["s"]="鼓楼|e,n,w",["w"]="西门|e"} },
    ["鼓楼|e,n,w"] = { name = "鼓楼", exits = { ["e"]="南大街3|e,n,s,w",["n"]="钟楼|e,s,w",["w"]="小校场|e"} },
    ["小校场|e"] = { name = "小校场", exits = { ["e"]="鼓楼|e,n,w"} },
    ["西门|e"] = { name = "西门", exits = { ["e"]="钟楼|e,s,w"} },
    ["九龙壁|w"] = { name = "九龙壁", exits = { ["w"]="南大街3|e,n,s,w"} },
    ["神机府|enter,w"] = { name = "神机府", exits = { ["w"]="南大街4|e,n,s,w"} },
    ["大雄宝殿|e,w"] = {
  name = "大雄宝殿",
  exits = {
    ["e"] = "南大街4|e,n,s,w",
    ["w"] = "薄伽教藏殿|e",
  },
},
["薄伽教藏殿|e"] = {
  name = "薄伽教藏殿",
  exits = {
    ["e"] = "大雄宝殿|e,w",
  },
},
    ["当铺|e"] = { name = "当铺", exits = { ["e"]="南大街5|e,n,s,w"} },
    ["客栈|enter,w"] = { name = "客栈", exits = { ["enter"]="睡房|out",["w"]="南大街5|e,n,s,w"} },
    ["睡房|out"] = { name = "睡房", exits = { ["out"]="客栈|enter,w"} },
    ["秦家寨|n,sd"] = { name = "秦家寨", exits = { ["n"]="院落|s",["sd"]="山路2|ne,nu,sw"} },
    ["院落|s"] = { name = "院落", exits = { ["s"]="秦家寨|n,sd"} },
    ["雁门关|nw,sd"] = { name = "雁门关", exits = { ["nw"]="山路3|ne,se"} },
    ["武庙|s,w"] = { name = "武庙", exits = { ["s"]="牌坊|n,s",["w"]="北大街3|e,n,s,w"} },
    ["牌坊|n,s"] = { name = "牌坊", exits = { ["n"]="武庙|s,w",["s"]="南大街2|e,n,s,w"} },
    ["东门|n,se,w"] = { name = "东门", exits = { ["n"]="大同车行|s",["se"]="城东小路|ed,nw,su",["w"]="南大街2|e,n,s,w"} },
    ["城东小路|ed,nw,su"] = { name = "城东小路", exits = { ["ed"]="文瀛湖|wu",["nw"]="东门|n,se,w",["su"]="恒山山脚|nd,su"} },
    ["城隍庙|n"] = { name = "城隍庙", exits = { ["n"]="北大街3|e,n,s,w"} },
    ["大同车行|s"] = { name = "大同车行", exits = { ["s"]="东门|n,se,w"} },
    ["恒山山脚|nd,su"] = { name = "恒山山脚", exits = { ["nd"]="城东小路|ed,nw,su"} },
    ["文瀛湖|wu"] = { name = "文瀛湖", exits = { ["wu"]="城东小路|ed,nw,su"} },
  },

  mapAliases = {
    ["北大街"]="bdj",["北大街2"]="bdj2",["北大街3"]="bdj3",
    ["南大街"]="ndj",["南大街2"]="ndj2",["南大街3"]="ndj3",
    ["南大街4"]="ndj4",["南大街5"]="ndj5",["南大街6"]="ndj6",
    ["官道"]="gd",["官道2"]="gd2",
    ["山路"]="sl",["山路2"]="sl2",["山路3"]="sl3",
    ["北仓"]="bc",["北门"]="bm",["文庙"]="wm",["府治"]="fz",
    ["总镇署"]="zzs",["洋河南岸"]="yhna",["洋河南渡口"]="yhndk",
    ["马铺山"]="mps",["五郎镖局"]="wlbj",["钟楼"]="zl",["鼓楼"]="gl",
    ["小校场"]="xxc",["西门"]="xm",["九龙壁"]="jlb",["神机府"]="sjf",
    ["当铺"]="dp",["南门"]="nm",["大雄宝殿"]="dxbd",["客栈"]="kz",
    ["睡房"]="sf",["秦家寨"]="qjz",["院落"]="yl",["雁门关"]="ymg",
    ["魁星楼"]="origin",["太平楼"]="tpl",["东门"]="dm",["城东小路"]="cdxl",
    ["城隍庙"]="chm",["大同车行"]="mch",["恒山山脚"]="hssj",
    ["文瀛湖"]="wyh",["武庙"]="wum",["牌坊"]="pf",
    ["薄伽教藏殿"] = "bjzjd",
  },
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>神龙岛 - sld</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["sld"] = {
  region = {
    key  = "sld",
    name = "神龙岛",
  },

  mapNodes = {
    ["书房|w"] = {
      name = "书房",
      exits = {
        ["w"] = "客厅|e,n,nw,w",
      },
    },
    ["卧室|e"] = {
      name = "卧室",
      exits = {
        ["e"] = "客厅|e,n,nw,w",
      },
    },
    ["厨房|n,s"] = {
      name = "厨房",
      exits = {
        ["n"] = "山泉|n,s",
        ["s"] = "小回廊|n,s",
      },
    },
    ["客厅|e,n,nw,w"] = {
      name = "客厅",
      exits = {
        ["e"] = "书房|w",
        ["n"] = "小回廊|n,s",
        ["nw"] = "山腰|nu,s,se",
        ["w"] = "卧室|e",
      },
    },
    ["小回廊|n,s"] = {
      name = "小回廊",
      exits = {
        ["n"] = "厨房|n,s",
        ["s"] = "客厅|e,n,nw,w",
      },
    },
    ["山泉|n,s"] = {
      name = "山泉",
      exits = {
        ["n"] = "濯垢泉|s",
        ["s"] = "厨房|n,s",
      },
    },
    ["山脚|e,nu,s,w"] = {
      name = "山脚",
      exits = {
        ["e"] = "竹屋|w",
        ["nu"] = "石阶1|nu,sd",
        ["node walk sldsj_sldht"] = "海滩|e,nw,s",
        ["node walk sldsj_sldsy"] = "山腰|nu,s,se",
        ["node walk aldsj_sldfd"] = "峰顶|n,sd",
        
      },
    },

    ["海滩|e,nw,s"] = {
      name = "海滩",
      exits = {
        ["nw"] = "海边小屋|se",
        ["s"] = "码头|n",
        ["node walk sldht_sldsj"] = "山脚|e,nu,s,w",
        ["node walk sldht_sldsy"] = "山腰|nu,s,se",
      },
    },
    ["码头|n"] = {
      name = "码头",
      exits = {
        ["n"] = "海滩|e,nw,s",
      },
    },
    ["海边小屋|se"] = {
      name = "海边小屋",
      exits = {
        ["se"] = "海滩|e,nw,s",
      },
    },

    ["竹屋|w"] = {
      name = "竹屋",
      exits = {
        ["w"] = "山脚|e,nu,s,w",
      },
    },

    ["山腰|nu,s,se"] = {
      name = "山腰",
      exits = {
        ["nu"] = "山路|n,sd",
        ["s"] = "石阶2|n,wd",
        ["se"] = "客厅|e,n,nw,w",
        ["node walk sldsy_sldfd"] = "峰顶|n,sd",
      },
    },
    ["山路|n,sd"] = {
      name = "山路",
      exits = {
        ["sd"] = "山腰|nu,s,se",
      },
    },
    ["濯垢泉|s"] = {
      name = "濯垢泉",
      exits = {
        ["s"] = "山泉|n,s",
      },
    },

    -- 石阶 重名：石阶1 / 石阶2 / 石阶3（同时更新所有指向）
    ["石阶3|eu,sd"] = {
      name = "石阶3",
      exits = {
        ["eu"] = "石阶2|n,wd",
        ["sd"] = "石阶1|nu,sd",
      },
    },
    ["石阶2|n,wd"] = {
      name = "石阶2",
      exits = {
        ["n"] = "山腰|nu,s,se",
        ["wd"] = "石阶3|eu,sd",
      },
    },
    ["石阶1|nu,sd"] = {
      name = "石阶1",
      exits = {
        ["nu"] = "石阶3|eu,sd",
        ["sd"] = "山脚|e,nu,s,w",
      },
    },

    ["五龙堂大门|e,n,sw,w"] = {
      name = "五龙堂大门",
      exits = {
        ["e"] = "赤龙堂|n,nw,w",
        ["n"] = "花园|e,n,s,se,sw,w",
        ["sw"] = "小道|ne,w",
        ["w"] = "黑龙堂|e,n,ne",
      },
    },
    ["休息室|e"] = {
      name = "休息室",
      exits = {
        ["e"] = "小厅|e,n,s,w",
      },
    },
    ["内堂|s"] = {
      name = "内堂",
      exits = {
        ["s"] = "议事大厅|n,out,w",
      },
    },
    ["小厅|e,n,s,w"] = {
      name = "小厅",
      exits = {
        ["e"] = "练武场|e,n,s,w",
        ["n"] = "练功房|s",
        ["s"] = "饭厅|n",
        ["w"] = "休息室|e",
      },
    },
    ["小道|ne,w"] = {
      name = "小道",
      exits = {
        ["ne"] = "五龙堂大门|e,n,sw,w",
        ["w"] = "练武场|e,n,s,w",
      },
    },
    ["山道|ed,nu"] = {
      name = "山道",
      exits = {
        ["nu"] = "峰顶|n,sd",
      },
    },
    ["峰顶|n,sd"] = {
      name = "峰顶",
      exits = {
        ["n"] = "练武场|e,n,s,w",
        ["sd"] = "山道|ed,nu",
        ["node walk sldfd_sldsy"] = "山腰|nu,s,se",
      },
    },
    ["白龙堂|s,se,sw"] = {
      name = "白龙堂",
      exits = {
        ["s"] = "花园|e,n,s,se,sw,w",
        ["se"] = "青龙堂|nw,s,w",
        ["sw"] = "黄龙堂|e,ne,s",
      },
    },
    ["练功房|s"] = {
      name = "练功房",
      exits = {
        ["s"] = "小厅|e,n,s,w",
      },
    },
    ["练武场|e,n,s,w"] = {
      name = "练武场",
      exits = {
        ["e"] = "小道|ne,w",
        ["n"] = "长廊2|n,s",
        ["s"] = "峰顶|n,sd",
        ["w"] = "小厅|e,n,s,w",
      },
    },
    ["花园|e,n,s,se,sw,w"] = {
      name = "花园",
      exits = {
        ["e"] = "青龙堂|nw,s,w",
        ["n"] = "白龙堂|s,se,sw",
        ["s"] = "五龙堂大门|e,n,sw,w",
        ["se"] = "赤龙堂|n,nw,w",
        ["sw"] = "黑龙堂|e,n,ne",
        ["w"] = "黄龙堂|e,ne,s",
      },
    },
    ["议事大厅|n,out,w"] = {
      name = "议事大厅",
      exits = {
        ["n"] = "内堂|s",
        ["out"] = "长廊1|enter,s",
        ["w"] = "青石板路|e,wu",
      },
    },
    ["赤龙堂|n,nw,w"] = {
      name = "赤龙堂",
      exits = {
        ["n"] = "青龙堂|nw,s,w",
        ["nw"] = "花园|e,n,s,se,sw,w",
        ["w"] = "五龙堂大门|e,n,sw,w",
      },
    },

    -- 长廊 重名：长廊1 / 长廊2（同时更新所有指向）
    ["长廊1|enter,s"] = {
      name = "长廊1",
      exits = {
        ["enter"] = "议事大厅|n,out,w",
        ["s"] = "长廊2|n,s",
      },
    },
    ["长廊2|n,s"] = {
      name = "长廊2",
      exits = {
        ["n"] = "长廊1|enter,s",
        ["s"] = "练武场|e,n,s,w",
      },
    },

    ["青石板路|e,wu"] = {
      name = "青石板路",
      exits = {
        ["e"] = "议事大厅|n,out,w",
        ["wu;w;w;w"] = "竹林|e,n,s,wu",
      },
    },
    ["青龙堂|nw,s,w"] = {
      name = "青龙堂",
      exits = {
        ["nw"] = "白龙堂|s,se,sw",
        ["s"] = "赤龙堂|n,nw,w",
        ["w"] = "花园|e,n,s,se,sw,w",
      },
    },
    ["饭厅|n"] = {
      name = "饭厅",
      exits = {
        ["n"] = "小厅|e,n,s,w",
      },
    },
    ["黄龙堂|e,ne,s"] = {
      name = "黄龙堂",
      exits = {
        ["e"] = "花园|e,n,s,se,sw,w",
        ["ne"] = "白龙堂|s,se,sw",
        ["s"] = "黑龙堂|e,n,ne",
      },
    },
    ["黑龙堂|e,n,ne"] = {
      name = "黑龙堂",
      exits = {
        ["e"] = "五龙堂大门|e,n,sw,w",
        ["n"] = "黄龙堂|e,ne,s",
        ["ne"] = "花园|e,n,s,se,sw,w",
      },
    },

    ["东厢房|w"] = {
      name = "东厢房",
      exits = { ["w"] = "潜龙堂|e,n,s,w" },
    },
    ["仙福居|n,s"] = {
      name = "仙福居",
      exits = {
        ["n"] = "潜龙堂|e,n,s,w",
        ["s"] = "平台|ed,n,s,w",
      },
    },
    ["女弟子住所|n"] = {
      name = "女弟子住所",
      exits = { ["n"] = "平台|ed,n,s,w" },
    },
    ["平台|ed,n,s,w"] = {
      name = "平台",
      exits = {
        ["ed"] = "竹林|e,n,s,wu",
        ["n"] = "仙福居|n,s",
        ["s"] = "女弟子住所|n",
        ["w"] = "男弟子住所|e",
      },
    },
    ["潜龙堂|e,n,s,w"] = {
      name = "潜龙堂",
      exits = {
        ["e"] = "东厢房|w",
        ["n"] = "香堂|s",
        ["s"] = "仙福居|n,s",
        ["w"] = "西厢房|e",
      },
    },
    ["男弟子住所|e"] = {
      name = "男弟子住所",
      exits = { ["e"] = "平台|ed,n,s,w" },
    },
    ["竹林|e,n,s,wu"] = {
      name = "竹林",
      exits = {
        ["e;e;e;ed"] = "青石板路|e,wu",
        ["wu"] = "平台|ed,n,s,w",
      },
    },
    ["西厢房|e"] = {
      name = "西厢房",
      exits = { ["e"] = "潜龙堂|e,n,s,w" },
    },
    ["香堂|s"] = {
      name = "香堂",
      exits = { ["s"] = "潜龙堂|e,n,s,w" },
    },
  },
}

-- 生成 mapAliases（房间名 -&gt; 简写）
mapper.maps["sld"].mapAliases = {
  ["书房"] = "sf",
  ["卧室"] = "ws",
  ["厨房"] = "cf",
  ["客厅"] = "kt",
  ["小回廊"] = "xhl",
  ["山泉"] = "sq",
  ["濯垢泉"] = "zgq",
  ["山脚"] = "sj",
  ["竹屋"] = "zw",
  ["海滩"] = "ht",
  ["码头"] = "mt",
  ["海边小屋"] = "hbxw",
  ["山腰"] = "origin",
  ["山路"] = "sl",
  ["石阶1"] = "sj1",
  ["石阶2"] = "sj2",
  ["石阶3"] = "sj3",
  ["山道"] = "sd",
  ["峰顶"] = "fd",
  ["五龙堂大门"] = "wltdm",
  ["休息室"] = "xxs",
  ["小厅"] = "xt",
  ["练功房"] = "lgf",
  ["饭厅"] = "ft",
  ["小道"] = "xd",
  ["练武场"] = "lwc",
  ["长廊1"] = "cl1",
  ["长廊2"] = "cl2",
  ["议事大厅"] = "ysdt",
  ["内堂"] = "nt",
  ["青石板路"] = "qsbl",
  ["花园"] = "hy",
  ["赤龙堂"] = "clt",
  ["青龙堂"] = "qlt",
  ["白龙堂"] = "blt",
  ["黄龙堂"] = "hlt",
  ["黑龙堂"] = "heilt",
  ["东厢房"] = "dxf",
  ["西厢房"] = "xxf",
  ["潜龙堂"] = "qlt2",
  ["香堂"] = "xt2",
  ["平台"] = "pt",
  ["仙福居"] = "xfj",
  ["男弟子住所"] = "ndzz",
  ["女弟子住所"] = "ndz2",
  ["竹林"] = "zl",
}

</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>恒山 - hengshan</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["hengshan"] = {
  region = {
    key  = "hengshan",
    name = "恒山",
  },

  mapNodes = {

    ["大王庙|nw,se,w"] = {
      name = "大王庙",
      exits = {
        ["nw"] = "崇灵门|n,se",
        ["se"] = "阎道祠|enter,nw,se",
        ["w"]  = "山路1|e,wd",
      },
    },
    
     ["阎道祠|enter,nw,se"] = {
      name = "阎道祠",
      exits = {
        ["enter"] = "紫霞洞|out",
        ["nw"]    = "大王庙|nw,se,w",
        ["se"]    = "山路|e,nw,sd",
      },
    },
    
    ["卧房|out"] = {
      name = "卧房",
      exits = {
        ["out"] = "走廊|e,enter,s",
      },
    },
    ["厨房|out"] = {
      name = "厨房",
      exits = {
        ["out"] = "走廊|ed,enter,n,s",
      },
    },
    ["受戒处|w"] = {
      name = "受戒处",
      exits = {
        ["w"] = "小路|e,nu,s,w",
      },
    },
    ["后殿|e,n,sd,w"] = {
      name = "后殿",
      exits = {
        ["e"] = "走廊|enter,s,w",
        ["n"] = "小路|e,nu,s,w",
        ["sd"] = "广场|eu,nu,su,wu",
        ["w"] = "走廊|e,enter,s",
      },
    },

    -- 大殿 重名：大殿1 / 大殿2
    ["大殿|e,nd,s,w"] = {
      name = "大殿2",
      exits = {
        ["e"] = "走廊|enter,n,w",
        ["nd"] = "广场|eu,nu,su,wu",
        ["s"] = "庵门|n,s",
        ["w"] = "走廊|e,enter,n",
      },
    },

    -- 小路 重名：小路1 / 小路2
    ["小路|e,nu,s,w"] = {
      name = "小路1",
      exits = {
        ["e"] = "受戒处|w",
        ["nu"] = "恒顶|sd",
        ["s"] = "后殿|e,n,sd,w",
        ["w"] = "茅厕|e",
      },
    },
    ["小路|nu,sd"] = {
      name = "小路",
      exits = {
        ["nu"] = "见性峰|n,sd",
        ["sd"] = "天峰岭|ed,nu,wd",
      },
    },

    ["广场|eu,nu,su,wu"] = {
      name = "广场",
      exits = {
        ["eu"] = "走廊|enter,n,s,wd",
        ["nu"] = "后殿|e,n,sd,w",
        ["su"] = "大殿|e,nd,s,w",
        ["wu"] = "走廊|ed,enter,n,s",
      },
    },
    ["庵门|n,s"] = {
      name = "庵门",
      exits = {
        ["n"] = "大殿|e,nd,s,w",
        ["s"] = "见性峰|n,sd",
      },
    },
    ["恒顶|sd"] = {
      name = "恒顶",
      exits = {
        ["sd"] = "小路|e,nu,s,w",
      },
    },
    ["斋堂|out"] = {
      name = "斋堂",
      exits = {
        ["out"] = "走廊|e,enter,n",
      },
    },
    ["茅厕|e"] = {
      name = "茅厕",
      exits = {
        ["e"] = "小路|e,nu,s,w",
      },
    },
    ["药房|out"] = {
      name = "药房",
      exits = {
        ["out"] = "走廊|enter,n,w",
      },
    },
    ["见性峰|n,sd"] = {
      name = "见性峰",
      exits = {
        ["n"] = "庵门|n,s",
        ["sd"] = "小路|nu,sd",
      },
    },
    ["诵经房|out"] = {
      name = "诵经房",
      exits = {
        ["out"] = "走廊|enter,n,s,wd",
      },
    },

    -- 走廊 重名：走廊1~走廊6（只改 name，不改 key）
    ["走廊|e,enter,n"] = {
      name = "走廊",
      exits = {
        ["e"] = "大殿|e,nd,s,w",
        ["enter"] = "斋堂|out",
        ["n"] = "走廊|ed,enter,n,s",
      },
    },
    ["走廊|e,enter,s"] = {
      name = "走廊2",
      exits = {
        ["e"] = "后殿|e,n,sd,w",
        ["enter"] = "卧房|out",
        ["s"] = "走廊|ed,enter,n,s",
      },
    },
    ["走廊|ed,enter,n,s"] = {
      name = "走廊3",
      exits = {
        ["ed"] = "广场|eu,nu,su,wu",
        ["enter"] = "厨房|out",
        ["n"] = "走廊|e,enter,s",
        ["s"] = "走廊|e,enter,n",
      },
    },
    ["走廊|enter,n,s,wd"] = {
      name = "走廊4",
      exits = {
        ["enter"] = "诵经房|out",
        ["n"] = "走廊|enter,s,w",
        ["s"] = "走廊|enter,n,w",
        ["wd"] = "广场|eu,nu,su,wu",
      },
    },
    ["走廊|enter,n,w"] = {
      name = "走廊5",
      exits = {
        ["enter"] = "药房|out",
        ["n"] = "走廊|enter,n,s,wd",
        ["w"] = "大殿|e,nd,s,w",
      },
    },
    ["走廊|enter,s,w"] = {
      name = "走廊6",
      exits = {
        ["enter"] = "卧房|out",
        ["s"] = "走廊|enter,n,s,wd",
        ["w"] = "后殿|e,n,sd,w",
      },
    },

    ["魁星楼|ne,se"] = {
      name = "魁星楼",
      exits = {
        ["ne;ne;eu"] = "山路|eu,nd,wd",
        ["se;se;se"] = "九天宫|e,nw,sd",
      },
    },

    -- ===== 原有：主线宫观区 =====
    ["更衣楼|ne,w"] = {
      name = "更衣楼",
      exits = {
        ["ne"] = "山路|ne,sw",
        ["w"]  = "朝殿|e,s,w",
      },
    },

    ["九天宫|e,nw,sd"] = {
      name = "九天宫",
      exits = {
        ["e"] = "关帝庙|eu,n,w",
        ["sd"] = "纯阳宫|nu,se,sw",
        ["nw;nw;nw"] = "魁星楼|ne,se",
      },
    },

    ["三元宫|enter,ne,sd"] = {
      name = "三元宫",
      exits = {
        ["enter"] = "大殿|out",
        ["ne"] = "龙凤亭|ne,sw",
        ["sd"] = "恒山山门|nu,sd",
      },
    },

    ["二将军松|ne,sd"] = {
      name = "二将军松",
      exits = {
        ["ne"] = "望岳亭|e,ne,sw",
        ["sd"] = "大将军松|ed,nu",
      },
    },

    ["十王殿|ed,w"] = {
      name = "十王殿",
      exits = {
        ["ed"] = "苦甜井|eu,wu",
        ["w"]  = "马神殿|e,w",
      },
    },

    ["四大夫松|nu,sw"] = {
      name = "四大夫松",
      exits = {
        ["nu"] = "虎风口|nu,sd",
        ["sw"] = "望岳亭|e,ne,sw",
      },
    },

    ["大将军松|ed,nu"] = {
      name = "大将军松",
      exits = {
        ["ed"] = "山路|sw,wu",
        ["nu"] = "二将军松|ne,sd",
      },
    },

    -- 大殿1（原来的 out 版）
    ["大殿|out"] = {
      name = "大殿",
      exits = {
        ["out"] = "三元宫|enter,ne,sd",
      },
    },

    ["山神庙|ne,wu"] = {
      name = "山神庙",
      exits = {
        ["ne"] = "纯阳宫|nu,se,sw",
        ["wu"] = "疮神庙|ed",
      },
    },

    -- 山路1/2/3/4（你已有）
    ["山路1|e,wd"] = {
      name = "山路1",
      exits = {
        ["e"]  = "大王庙|nw,se,w",
        ["wd"] = "苦甜井|eu,wu",
      },
    },
    ["山路2|nw,sd"] = {
      name = "山路2",
      exits = {
        ["nw"] = "纯阳宫|nu,se,sw",
        ["sd"] = "牌楼|e,nu,se",
      },
    },
    ["山路|sw,wu"] = {
      name = "山路",
      exits = {
        ["sw"] = "龙凤亭|ne,sw",
        ["wu"] = "大将军松|ed,nu",
      },
    },
    ["山路4|ne,wd"] = {
      name = "山路4",
      exits = {
        ["ne"] = "会仙府|nw,se,sw",
        ["wd"] = "关帝庙|eu,n,w",
      },
    },

    ["恒山山门|nu,sd"] = {
      name = "恒山山门",
      exits = {
        ["nu"] = "三元宫|enter,ne,sd",
      },
    },

    ["悬根松|ne,sd"] = {
      name = "悬根松",
      exits = {
        ["ne"] = "果老岭|sw,w",
        ["sd"] = "虎风口|nu,sd",
      },
    },

    ["望岳亭|e,ne,sw"] = {
      name = "望岳亭",
      exits = {
        ["e"]  = "真武庙|w",
        ["ne"] = "四大夫松|nu,sw",
        ["sw"] = "二将军松|ne,sd",
      },
    },

    ["果老岭|sw,w"] = {
      name = "果老岭",
      exits = {
        ["sw"] = "悬根松|ne,sd",
        ["w"]  = "步云路|e,wu",
      },
    },

    ["步云路|e,wu"] = {
      name = "步云路",
      exits = {
        ["e"]  = "果老岭|sw,w",
        ["wu"] = "步云路2|ed,nw",
      },
    },
    ["步云路2|ed,nw"] = {
      name = "步云路2",
      exits = {
        ["ed"] = "步云路|e,wu",
        ["nw"] = "牌楼|e,nu,se",
      },
    },

    ["牌楼|e,nu,se"] = {
      name = "牌楼",
      exits = {
        ["e"]  = "马神殿|e,w",
        ["nu"] = "山路2|nw,sd",
        ["se"] = "步云路2|ed,nw",
      },
    },

    ["疮神庙|ed"] = {
      name = "疮神庙",
      exits = {
        ["ed"] = "山神庙|ne,wu",
      },
    },

    ["真武庙|w"] = {
      name = "真武庙",
      exits = {
        ["w"] = "望岳亭|e,ne,sw",
      },
    },

    ["纯阳宫|nu,se,sw"] = {
      name = "纯阳宫",
      exits = {
        ["nu"] = "九天宫|e,nw,sd",
        ["se"] = "山路2|nw,sd",
        ["sw"] = "山神庙|ne,wu",
      },
    },

    ["苦甜井|eu,wu"] = {
      name = "苦甜井",
      exits = {
        ["eu"] = "山路1|e,wd",
        ["wu"] = "十王殿|ed,w",
      },
    },

    ["虎风口|nu,sd"] = {
      name = "虎风口",
      exits = {
        ["nu"] = "悬根松|ne,sd",
        ["sd"] = "四大夫松|nu,sw",
      },
    },

    ["马神殿|e,w"] = {
      name = "马神殿",
      exits = {
        ["e"] = "十王殿|ed,w",
        ["w"] = "牌楼|e,nu,se",
      },
    },

    ["会仙府|nw,se,sw"] = {
      name = "会仙府",
      exits = {
        ["nw"] = "果老仙迹|ne,se",
        ["se"] = "金鸡报晓|eu,nw",
        ["sw"] = "山路4|ne,wd",
      },
    },

    ["关帝庙|eu,n,w"] = {
      name = "关帝庙",
      exits = {
        ["eu"] = "山路4|ne,wd",
        ["n"]  = "文昌庙|s",
        ["w"]  = "九天宫|e,nw,sd",
      },
    },

    ["崇灵门|n,se"] = {
      name = "崇灵门",
      exits = {
        ["n"]  = "石板路|e,n,s,w",
        ["se"] = "大王庙|nw,se,w",
      },
    },

    ["文昌庙|s"] = {
      name = "文昌庙",
      exits = {
        ["s"] = "关帝庙|eu,n,w",
      },
    },

    ["朝殿|e,s,w"] = {
      name = "朝殿",
      exits = {
        ["e"] = "更衣楼|ne,w",
        ["s"] = "石板路|e,n,s,w",
        ["w"] = "藏经楼|e,wd",
      },
    },

    ["果老仙迹|ne,se"] = {
      name = "果老仙迹",
      exits = {
        ["ne"] = "玉皇阁|sw",
        ["se"] = "会仙府|nw,se,sw",
      },
    },

    ["玉皇阁|sw"] = {
      name = "玉皇阁",
      exits = {
        ["sw"] = "果老仙迹|ne,se",
      },
    },

    ["白虎殿|e"] = {
      name = "白虎殿",
      exits = {
        ["e"] = "石板路|e,n,s,w",
      },
    },

    ["石板路|e,n,s,w"] = {
      name = "石板路",
      exits = {
        ["e"] = "青龙殿|w",
        ["n"] = "朝殿|e,s,w",
        ["s"] = "崇灵门|n,se",
        ["w"] = "白虎殿|e",
      },
    },

    ["藏经楼|e,wd"] = {
      name = "藏经楼",
      exits = {
        ["e"]  = "朝殿|e,s,w",
        ["wd"] = "金鸡报晓|eu,nw",
      },
    },

    ["金鸡报晓|eu,nw"] = {
      name = "金鸡报晓",
      exits = {
        ["eu"] = "藏经楼|e,wd",
        ["nw"] = "会仙府|nw,se,sw",
      },
    },

    ["青龙殿|w"] = {
      name = "青龙殿",
      exits = {
        ["w"] = "石板路|e,n,s,w",
      },
    },

    -- ===== 你新增：悬空寺/紫芝峪/北坡等（大量“山路”重名）=====
    ["姑嫂崖|nu"] = {
      name = "姑嫂崖",
      exits = {
        ["nu"] = "山路|e,nw,sd",
      },
    },

    -- 山路（新）开始编号：山路5 起
    ["山路|e,nw,sd"] = {
      name = "山路5",
      exits = {
        ["e"]  = "得一庵|w",
        ["nw"] = "阎道祠|enter,nw,se",
        ["sd"] = "姑嫂崖|nu",
      },
    },

    ["得一庵|w"] = {
      name = "得一庵",
      exits = {
        ["w"] = "山路|e,nw,sd",
      },
    },

    ["紫霞洞|out"] = {
      name = "紫霞洞",
      exits = {
        ["out"] = "阎道祠|enter,nw,se",
      },
    },

    ["二郎庙|nw,sd"] = {
      name = "二郎庙",
      exits = {
        ["nw"] = "山路|ne,se,w",
        ["sd"] = "山路|nu,se,sw",
      },
    },

    ["天峰岭|ed,nu,wd"] = {
      name = "天峰岭",
      exits = {
        ["ed"] = "山路|e,wu",
        ["nu"] = "小路|nu,sd",
        ["wd"] = "山路|eu,w",
      },
    },

    ["寺内|out"] = {
      name = "寺内",
      exits = {
        ["out"] = "悬空寺|enter,nd,sw",
      },
    },

    ["山路|e,wu"] = {
      name = "山路6",
      exits = {
        ["e"]  = "山路|ne,se,w",
        ["wu"] = "天峰岭|ed,nu,wd",
      },
    },

    ["山路|ne,se,w"] = {
      name = "山路7",
      exits = {
        ["ne"] = "悬空寺|enter,nd,sw",
        ["se"] = "二郎庙|nw,sd",
        ["w"]  = "山路|e,wu",
      },
    },

    ["山路|ne,sw"] = {
      name = "山路8",
      exits = {
        ["ne"] = "山路|nu,se,sw",
        ["sw"] = "更衣楼|ne,w",
      },
    },

    ["山路|nu,se,sw"] = {
      name = "山路9",
      exits = {
        ["nu"] = "二郎庙|nw,sd",
        ["se"] = "紫芝峪|enter,nw",
        ["sw"] = "山路|ne,sw",
      },
    },

    ["悬空寺|enter,nd,sw"] = {
      name = "悬空寺",
      exits = {
        ["enter"] = "寺内|out",
        ["nd"]    = "白羊峪|ed,su",
        ["sw"]    = "山路|ne,se,w",
      },
    },

    ["白云洞|out"] = {
      name = "白云洞",
      exits = {
        ["out"] = "紫芝峪|enter,nw",
      },
    },

    ["白羊峪|ed,su"] = {
      name = "白羊峪",
      exits = {
        ["su"] = "悬空寺|enter,nd,sw",
      },
    },

    ["紫芝峪|enter,nw"] = {
      name = "紫芝峪",
      exits = {
        ["enter"] = "白云洞|out",
        ["nw"]    = "山路|nu,se,sw",
      },
    },

    ["上山路|nd,se,sw"] = {
      name = "上山路",
      exits = {
        ["se"] = "山间小路|nw,su",
        ["sw"] = "北坡山路|ne,su",
      },
    },

    ["北坡山路|ne,su"] = {
      name = "北坡山路",
      exits = {
        ["ne"] = "上山路|nd,se,sw",
        ["su"] = "山路|eu,nd,wd",
      },
    },

    ["姐妹松|eu,nd,sd,wd"] = {
      name = "姐妹松",
      exits = {
        ["eu"] = "山路|e,wd",
        ["nd"] = "山间小路|nw,su",
        ["sd"] = "山路|ed,nu,se",
        ["wd"] = "山路|eu,nd,wd",
      },
    },

    ["山路|e,nw"] = {
      name = "山路10",
      exits = {
        ["e"]  = "琴棋台|w",
        ["nw"] = "山路|ed,nu,se",
      },
    },

    ["山路|e,wd"] = {
      name = "山路11",
      exits = {
        ["e"]  = "山路|eu,w",
        ["wd"] = "姐妹松|eu,nd,sd,wd",
      },
    },

    ["山路|ed,nu,se"] = {
      name = "山路12",
      exits = {
        ["ed"] = "通元谷|wu",
        ["nu"] = "姐妹松|eu,nd,sd,wd",
        ["se"] = "山路|e,nw",
      },
    },

    ["山路|eu,nd,wd"] = {
      name = "山路13",
      exits = {
        ["eu"] = "姐妹松|eu,nd,sd,wd",
        ["nd"] = "北坡山路|ne,su",
        ["wd;sw;sw"] = "魁星楼|ne,se",
      },
    },

    ["山路|eu,w"] = {
      name = "山路14",
      exits = {
        ["eu"] = "天峰岭|ed,nu,wd",
        ["w"]  = "山路|e,wd",
      },
    },

    ["山间小路|nw,su"] = {
      name = "山间小路",
      exits = {
        ["nw"] = "上山路|nd,se,sw",
        ["su"] = "姐妹松|eu,nd,sd,wd",
      },
    },

    ["琴棋台|w"] = {
      name = "琴棋台",
      exits = {
        ["w"] = "山路|e,nw",
      },
    },

    ["通元谷|wu"] = {
      name = "通元谷",
      exits = {
        ["wu"] = "山路|ed,nu,se",
      },
    },

    ["龙凤亭|ne,sw"] = {
      name = "龙凤亭",
      exits = {
        ["ne"] = "山路|sw,wu",
        ["sw"] = "三元宫|enter,ne,sd",
      },
    },
  },
}

-- 生成 mapAliases（房间名 -&gt; 简写，已避免重名冲突）
mapper.maps["hengshan"].mapAliases = {
  -- 原主线
  ["三元宫"] = "syg",
  ["大殿"] = "dd",
  ["大殿2"] = "dd1",
  ["恒山山门"] = "origin",
  ["龙凤亭"] = "lft",

  ["九天宫"] = "jtg",
  ["纯阳宫"] = "cyg",
  ["山神庙"] = "ssm",
  ["疮神庙"] = "csm",

  ["二将军松"] = "ejjs",
  ["大将军松"] = "djjs",
  ["四大夫松"] = "sdfs",
  ["虎风口"] = "hfk",
  ["悬根松"] = "xgs",
  ["果老岭"] = "gll",
  ["望岳亭"] = "wyt",
  ["真武庙"] = "zwm",

  ["牌楼"] = "pl",
  ["马神殿"] = "msd",
  ["十王殿"] = "swd",
  ["苦甜井"] = "ktj",
  ["大王庙"] = "dwm",

  ["山路1"] = "sl1",
  ["山路2"] = "sl2",
  ["山路"] = "sl",
  ["山路4"] = "sl4",
  ["步云路"] = "byl",
  ["步云路2"] = "byl2",

  ["关帝庙"] = "gdm",
  ["文昌庙"] = "wcm",
  ["崇灵门"] = "clm",
  ["石板路"] = "sbl",
  ["朝殿"] = "cd",
  ["更衣楼"] = "gyl",
  ["藏经楼"] = "cjl",
  ["金鸡报晓"] = "jjbx",
  ["会仙府"] = "hxf",
  ["果老仙迹"] = "glxj",
  ["玉皇阁"] = "yhg",
  ["白虎殿"] = "bhd",
  ["青龙殿"] = "qld",
  ["魁星楼"] = "kxl",

  -- 庵/寺内部新增
  ["卧房"] = "wf",
  ["厨房"] = "cf",
  ["受戒处"] = "sjc",
  ["后殿"] = "hd",
  ["小路1"] = "xl1",
  ["小路"] = "xl",
  ["广场"] = "gc",
  ["庵门"] = "am",
  ["恒顶"] = "hengd",
  ["斋堂"] = "zt",
  ["茅厕"] = "mc",
  ["药房"] = "yf",
  ["见性峰"] = "jxf",
  ["诵经房"] = "sjf",
  ["走廊"] = "zl",
  ["走廊2"] = "zl2",
  ["走廊3"] = "zl3",
  ["走廊4"] = "zl4",
  ["走廊5"] = "zl5",
  ["走廊6"] = "zl6",

  -- 悬空寺/北坡等新增
  ["姑嫂崖"] = "gsy",
  ["得一庵"] = "dya",
  ["紫霞洞"] = "zxd",
  ["阎道祠"] = "ydc",
  ["二郎庙"] = "elm",
  ["天峰岭"] = "tfl",
  ["寺内"] = "sn",
  ["悬空寺"] = "xks",
  ["白云洞"] = "byd",
  ["白羊峪"] = "byy",
  ["紫芝峪"] = "zzy",
  ["上山路"] = "ssl",
  ["北坡山路"] = "bpsl",
  ["姐妹松"] = "jms",
  ["山间小路"] = "sjxl",
  ["琴棋台"] = "qqt",
  ["通元谷"] = "tyg",

  -- 新编号的山路5~14
  ["山路5"]  = "sl5",
  ["山路6"]  = "sl6",
  ["山路7"]  = "sl7",
  ["山路8"]  = "sl8",
  ["山路9"]  = "sl9",
  ["山路10"] = "sl10",
  ["山路11"] = "sl11",
  ["山路12"] = "sl12",
  ["山路13"] = "sl13",
  ["山路14"] = "sl14",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>泰山 - taishan</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["taishan"] = {
  region = {
    key  = "taishan",
    name = "泰山",
  },

  mapNodes = {
    ["一天门|nu,nw,sd"] = {
      name = "一天门",
      exits = {
        ["nu"] = "斗母宫|eu,sd,w",
        ["nw"] = "前山石阶|nu,se",
        ["sd"] = "白鹤泉|nu,sd",
      },
    },

    ["丈人峰|e,nu"] = {
      name = "丈人峰",
      exits = {
        ["e"] = "玉皇顶|ed,sd,u,w",
        ["nu"] = "北天门|nd,sd",
      },
    },

    ["三清殿|e,enter,nu,s"] = {
      name = "三清殿",
      exits = {
        ["e"] = "精舍|w",
        ["enter"] = "书库|out",
        ["nu"] = "元始堂|ed,n,sd,w",
        ["s"] = "岱顶天街|n,s",
      },
    },

    ["东天门|nu,w"] = {
      name = "东天门",
      exits = {
        ["nu"] = "柴门|e,n,sd,w",
        ["w"] = "探海石|e,wd",
      },
    },

    ["书库|out"] = {
      name = "书库",
      exits = { ["out"] = "三清殿|e,enter,nu,s" },
    },

    ["书房|e,n,s"] = {
      name = "书房",
      exits = {
        ["e"] = "茅屋|e,n,s,w",
        ["n"] = "客房|e,s",
        ["s"] = "花地|e,n",
      },
    },

    ["乱石沟|nwd,sd"] = {
      name = "乱石沟",
      exits = { ["sd"] = "谷底|ne,nu,se,wu" },
    },

    ["二天门|nu,sd"] = {
      name = "二天门",
      exits = {
        ["nu"] = "五大夫松|nu,sd",
        ["sd"] = "回马岭|nu,sd,wd",
      },
    },

    ["云梯道|ed,neu,w"] = {
      name = "云梯道",
      exits = {
        ["ed"] = "小径|se,wu",
        ["neu"] = "观日台|swd",
        ["w"] = "茶亭|e",
      },
    },

    ["五大夫松|nu,sd"] = {
      name = "五大夫松",
      exits = {
        ["nu"] = "龙门|nu,sd",
        ["sd"] = "二天门|nu,sd",
      },
    },

    ["侠义厅|w"] = {
      name = "侠义厅",
      exits = { ["w"] = "封禅台|d,e,w" },
    },

    ["元始堂|ed,n,sd,w"] = {
      name = "元始堂",
      exits = {
        ["ed"] = "松林|wu",
        ["n"] = "练功场|nu,nw,s",
        ["sd"] = "三清殿|e,enter,nu,s",
        ["w"] = "紫霄宫|e,enter",
      },
    },

    ["八仙洞|w"] = {
      name = "八仙洞",
      exits = { ["w"] = "摩云岭|e,ned,su" },
    },

    ["兵器库|s,w"] = {
      name = "兵器库",
      exits = {
        ["s"] = "卧室|n,s,w",
        ["w"] = "厨房|e,s,w",
      },
    },

    ["前山石阶|nu,se"] = {
      name = "前山石阶",
      exits = {
        ["nu"] = "山门广场|nu,sd",
        ["se"] = "一天门|nu,nw,sd",
      },
    },

    ["剑堂|w"] = {
      name = "剑堂",
      exits = { ["w"] = "天门道场|e,n,sd,w" },
    },

    ["北天门|nd,sd"] = {
      name = "北天门",
      exits = {
        ["nd"] = "摩云岭|e,ned,su",
        ["sd"] = "丈人峰|e,nu",
      },
    },

    ["升仙坊|nu,sd"] = {
      name = "升仙坊",
      exits = {
        ["nu"] = "南天门|eu,nu,sd",
        ["sd"] = "龙门|nu,sd",
      },
    },

    ["南天门|eu,nu,sd"] = {
      name = "南天门",
      exits = {
        ["eu"] = "天街|ed,eu,wd",
        ["nu"] = "玉皇顶|ed,sd,u,w",
        ["sd"] = "升仙坊|nu,sd",
      },
    },

    ["卧室|n,s,w"] = {
      name = "卧室",
      exits = {
        ["n"] = "兵器库|s,w",
        ["s"] = "猪圈|n,w",
        ["w"] = "茅屋|e,n,s,w",
      },
    },

    ["厨房|e,s,w"] = {
      name = "厨房",
      exits = {
        ["e"] = "兵器库|s,w",
        ["s"] = "茅屋|e,n,s,w",
        ["w"] = "客房|e,s",
      },
    },

    ["后山道场|e,sd"] = {
      name = "后山道场",
      exits = {
        ["e"] = "悟道林|e,s,w",
        ["sd"] = "练功场|nu,nw,s",
      },
    },

    ["回马岭|nu,sd,wd"] = {
      name = "回马岭",
      exits = {
        ["nu"] = "二天门|nu,sd",
        ["sd"] = "经石峪|nu,wd",
        ["wd"] = "山野小径|eu,wd",
      },
    },

    ["围屏山|e,wd"] = {
      name = "围屏山",
      exits = {
        ["e"] = "碧霞祠|ed,ne,w",
        ["wd"] = "天街|ed,eu,wd",
      },
    },

    ["大驿道|n,s"] = {
      name = "大驿道",
      exits = { ["n"] = "岱宗坊|nu,s" },
    },

    ["天街|ed,eu,wd"] = {
      name = "天街",
      exits = {
        ["ed"] = "莲花峰|nu,wu",
        ["eu"] = "围屏山|e,wd",
        ["wd"] = "南天门|eu,nu,sd",
      },
    },

    ["天门道场|e,n,sd,w"] = {
      name = "天门道场",
      exits = {
        ["e"] = "剑堂|w",
        ["n"] = "岱顶天街|n,s",
        ["sd"] = "山门广场|nu,sd",
        ["w"] = "斋堂|e",
      },
    },

    ["宝藏岭|wu"] = {
      name = "宝藏岭",
      exits = { ["wu"] = "碧霞祠|ed,ne,w" },
    },

    ["客房|e,s"] = {
      name = "客房",
      exits = {
        ["e"] = "厨房|e,s,w",
        ["s"] = "书房|e,n,s",
      },
    },

    ["封禅台|d,e,w"] = {
      name = "封禅台",
      exits = {
        ["d"] = "玉皇顶|ed,sd,u,w",
        ["e"] = "侠义厅|w",
        ["w"] = "正气厅|e",
      },
    },

    ["小径|se,wu"] = {
      name = "小径",
      exits = {
        ["se"] = "练功场|nu,nw,s",
        ["wu"] = "云梯道|ed,neu,w",
      },
    },

    ["山路|ed,swu"] = {
      name = "山路",
      exits = {
        ["ed"] = "谷底|ne,nu,se,wu",
        ["swu"] = "摩云岭|e,ned,su",
      },
    },

    ["山野小径|eu,wd"] = {
      name = "山野小径",
      exits = { ["eu"] = "回马岭|nu,sd,wd" },
    },

    ["山门广场|nu,sd"] = {
      name = "山门广场",
      exits = {
        ["nu"] = "天门道场|e,n,sd,w",
        ["sd"] = "前山石阶|nu,se",
      },
    },

    ["岱宗坊|nu,s"] = {
      name = "岱宗坊",
      exits = {
        ["nu"] = "白鹤泉|nu,sd",
        ["s"] = "大驿道|n,s",
      },
    },

    ["岱顶天街|n,s"] = {
      name = "岱顶天街",
      exits = {
        ["n"] = "三清殿|e,enter,nu,s",
        ["s"] = "天门道场|e,n,sd,w",
      },
    },

    ["悟道林|e,s,w"] = {
      name = "悟道林",
      exits = {
        ["e"] = "斗母宫|eu,sd,w",
        ["s"] = "静修小院|n",
        ["w"] = "后山道场|e,sd",
      },
    },

    ["掌门书房|out"] = {
      name = "掌门书房",
      exits = { ["out"] = "紫霄宫|e,enter" },
    },

    ["探海石|e,wd"] = {
      name = "探海石",
      exits = {
        ["e"] = "东天门|nu,w",
        ["wd"] = "月观峰|eu,wu",
      },
    },

    ["摩云岭|e,ned,su"] = {
      name = "摩云岭",
      exits = {
        ["e"] = "八仙洞|w",
        ["ned"] = "山路|ed,swu",
        ["su"] = "北天门|nd,sd",
      },
    },

    ["斋堂|e"] = {
      name = "斋堂",
      exits = { ["e"] = "天门道场|e,n,sd,w" },
    },

    ["斗母宫|eu,sd,w"] = {
      name = "斗母宫",
      exits = {
        ["eu"] = "经石峪|nu,wd",
        ["sd"] = "一天门|nu,nw,sd",
        ["w"] = "悟道林|e,s,w",
      },
    },

    ["月观峰|eu,wu"] = {
      name = "月观峰",
      exits = {
        ["eu"] = "探海石|e,wd",
        ["wu"] = "玉皇顶|ed,sd,u,w",
      },
    },

    ["松林|wu"] = {
      name = "松林",
      exits = { ["wu"] = "元始堂|ed,n,sd,w" },
    },

    ["柴门|e,n,sd,w"] = {
      name = "柴门",
      exits = {
        ["e"] = "猪圈|n,w",
        ["n"] = "茅屋|e,n,s,w",
        ["sd"] = "东天门|nu,w",
        ["w"] = "花地|e,n",
      },
    },

    ["正气厅|e"] = {
      name = "正气厅",
      exits = { ["e"] = "封禅台|d,e,w" },
    },

    -- 独足盘 重名：独足盘1 / 独足盘2 / 独足盘3（同时更新所有指向）
    ["独足盘1|ne,nw"] = {
      name = "独足盘1",
      exits = {
        ["ne"] = "独足盘2|nw,sw",
        ["nw"] = "谷底|ne,nu,se,wu",
      },
    },

    ["独足盘2|nw,sw"] = {
      name = "独足盘2",
      exits = {
        ["nw"] = "独足盘3|se,sw",
        ["sw"] = "独足盘1|ne,nw",
      },
    },

    ["独足盘3|se,sw"] = {
      name = "独足盘3",
      exits = {
        ["se"] = "独足盘2|nw,sw",
        ["sw"] = "谷底|ne,nu,se,wu",
      },
    },

    ["猪圈|n,w"] = {
      name = "猪圈",
      exits = {
        ["n"] = "卧室|n,s,w",
        ["w"] = "柴门|e,n,sd,w",
      },
    },

    ["玉皇顶|ed,sd,u,w"] = {
      name = "玉皇顶",
      exits = {
        ["ed"] = "月观峰|eu,wu",
        ["sd"] = "南天门|eu,nu,sd",
        ["u"] = "封禅台|d,e,w",
        ["w"] = "丈人峰|e,nu",
      },
    },

    ["白鹤泉|nu,sd"] = {
      name = "白鹤泉",
      exits = {
        ["nu"] = "一天门|nu,nw,sd",
        ["sd"] = "岱宗坊|nu,s",
      },
    },

    ["碧霞祠|ed,ne,w"] = {
      name = "碧霞祠",
      exits = {
        ["ed"] = "宝藏岭|wu",
        ["ne"] = "符室|sw",
        ["w"] = "围屏山|e,wd",
      },
    },

    ["符室|sw"] = {
      name = "符室",
      exits = { ["sw"] = "碧霞祠|ed,ne,w" },
    },

    ["精舍|w"] = {
      name = "精舍",
      exits = { ["w"] = "三清殿|e,enter,nu,s" },
    },

    ["紫霄宫|e,enter"] = {
      name = "紫霄宫",
      exits = {
        ["e"] = "元始堂|ed,n,sd,w",
        ["enter"] = "掌门书房|out",
      },
    },

    ["练功场|nu,nw,s"] = {
      name = "练功场",
      exits = {
        ["nu"] = "后山道场|e,sd",
        ["nw"] = "小径|se,wu",
        ["s"] = "元始堂|ed,n,sd,w",
      },
    },

    ["经石峪|nu,wd"] = {
      name = "经石峪",
      exits = {
        ["nu"] = "回马岭|nu,sd,wd",
        ["wd"] = "斗母宫|eu,sd,w",
      },
    },

    ["花地|e,n"] = {
      name = "花地",
      exits = {
        ["e"] = "柴门|e,n,sd,w",
        ["n"] = "书房|e,n,s",
      },
    },

    ["茅屋|e,n,s,w"] = {
      name = "茅屋",
      exits = {
        ["e"] = "卧室|n,s,w",
        ["n"] = "厨房|e,s,w",
        ["s"] = "柴门|e,n,sd,w",
        ["w"] = "书房|e,n,s",
      },
    },

    ["茶亭|e"] = {
      name = "茶亭",
      exits = { ["e"] = "云梯道|ed,neu,w" },
    },

    ["莲花峰|nu,wu"] = {
      name = "莲花峰",
      exits = {
        ["nu"] = "试心石|sd",
        ["wu"] = "天街|ed,eu,wd",
      },
    },

    ["观日台|swd"] = {
      name = "观日台",
      exits = { ["swd"] = "云梯道|ed,neu,w" },
    },

    ["试心石|sd"] = {
      name = "试心石",
      exits = { ["sd"] = "莲花峰|nu,wu" },
    },

    ["谷底|ne,nu,se,wu"] = {
      name = "谷底",
      exits = {
        ["ne"] = "独足盘3|se,sw",
        ["nu"] = "乱石沟|nwd,sd",
        ["se"] = "独足盘1|ne,nw",
        ["wu"] = "山路|ed,swu",
      },
    },

    ["静修小院|n"] = {
      name = "静修小院",
      exits = { ["n"] = "悟道林|e,s,w" },
    },

    ["龙门|nu,sd"] = {
      name = "龙门",
      exits = {
        ["nu"] = "升仙坊|nu,sd",
        ["sd"] = "五大夫松|nu,sd",
      },
    },
  },
}

-- 生成 mapAliases（房间名 -&gt; 简写）
mapper.maps["taishan"].mapAliases = {
  ["一天门"]   = "ytm",
  ["丈人峰"]   = "zrf",
  ["三清殿"]   = "sqd",
  ["东天门"]   = "dtm",
  ["书库"]     = "sk",
  ["书房"]     = "sf",
  ["乱石沟"]   = "lsg",
  ["二天门"]   = "etm",
  ["云梯道"]   = "ytd",
  ["五大夫松"] = "wdfs",
  ["侠义厅"]   = "xyt",
  ["元始堂"]   = "yst",
  ["八仙洞"]   = "bxd",
  ["兵器库"]   = "bqk",
  ["前山石阶"] = "qssj",
  ["剑堂"]     = "jt",
  ["北天门"]   = "btm",
  ["升仙坊"]   = "sxf",
  ["南天门"]   = "ntm",
  ["卧室"]     = "ws",
  ["厨房"]     = "cf",
  ["后山道场"] = "hsdc",
  ["回马岭"]   = "hml",
  ["围屏山"]   = "wps",
  ["大驿道"]   = "dyd",
  ["天街"]     = "tj",
  ["天门道场"] = "tmdc",
  ["宝藏岭"]   = "bcl",
  ["客房"]     = "kf",
  ["封禅台"]   = "fct",
  ["小径"]     = "xj",
  ["山路"]     = "sl",
  ["山野小径"] = "syxj",
  ["山门广场"] = "smgc",
  ["岱宗坊"]   = "origin",
  ["岱顶天街"] = "ddtj",
  ["悟道林"]   = "wdl",
  ["掌门书房"] = "zmsf",
  ["探海石"]   = "ths",
  ["摩云岭"]   = "myl",
  ["斋堂"]     = "zt",
  ["斗母宫"]   = "dmg",
  ["月观峰"]   = "ygf",
  ["松林"]     = "slin",
  ["柴门"]     = "cm",
  ["正气厅"]   = "zqt",
  ["独足盘1"]  = "dzp1",
  ["独足盘2"]  = "dzp2",
  ["独足盘3"]  = "dzp3",
  ["猪圈"]     = "zj",
  ["玉皇顶"]   = "yhd",
  ["白鹤泉"]   = "bhq",
  ["碧霞祠"]   = "bxc",
  ["符室"]     = "fs",
  ["精舍"]     = "js",
  ["紫霄宫"]   = "zxg",
  ["练功场"]   = "lgc",
  ["经石峪"]   = "jsy",
  ["花地"]     = "hd",
  ["茅屋"]     = "mw",
  ["茶亭"]     = "ct",
  ["莲花峰"]   = "lhf",
  ["观日台"]   = "grt",
  ["试心石"]   = "sxs",
  ["谷底"]     = "gd",
  ["静修小院"] = "jxxY",
  ["龙门"]     = "lm",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>日月小村 - ry</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["ry"] = {
  region = {
    key  = "ry",
    name = "日月神教小村",
  },

  mapNodes = {
    ["村中小路|e,n,s,w"] = {
      name = "村中小路",
      exits = {
        ["e"] = "庄稼地|n,w",
        ["s"] = "小村庄|e,n,sd,se,w",
        ["n;w"] = "打铁铺|e",
        ["n;n;w"] = "柴房|e",
        ["n;n;e"] = "白虎堂|e,n,w",
        ["n;n;n"] = "黑木崖下|s",
        ["w"] = "院门口|e,w",
      },
    },

    ["白虎堂|e,n,w"] = {
      name = "白虎堂",
      exits = {
        ["e"] = "书院|w",
        ["n"] = "内厅|e,s",
        ["w;s;s"] = "村中小路|e,n,s,w",
      },
    },

    ["书院|w"] = {
      name = "书院",
      exits = {
        ["w"] = "白虎堂|e,n,w",
      },
    },

    ["内厅|e,s"] = {
      name = "内厅",
      exits = {
        ["e"] = "厨房|w",
        ["s"] = "白虎堂|e,n,w",
      },
    },

    ["厨房|w"] = {
      name = "厨房",
      exits = {
        ["w"] = "内厅|e,s",
      },
    },

    ["黑木崖下|s"] = {
      name = "黑木崖下",
      exits = {
        ["s;s;s"] = "村中小路|e,n,s,w",
      },
    },

    -- 柴房 重名：柴房1 / 柴房2
    ["柴房|e"] = {
      name = "柴房",
      exits = {
        ["e;s;s"] = "村中小路|e,n,s,w",
      },
    },

    ["打铁铺|e"] = {
      name = "打铁铺",
      exits = {
        ["e;s"] = "村中小路|e,n,s,w",
      },
    },

    -- 庄稼地 重名：庄稼地1 / 庄稼地2
    ["庄稼地|n,w"] = {
      name = "庄稼地",
      exits = {
        ["n"] = "庄稼地|s,w",
        ["w"] = "村中小路|e,n,s,w",
      },
    },

    ["庄稼地|s,w"] = {
      name = "庄稼地2",
      exits = {
        ["s"] = "庄稼地|n,w",
      },
    },

    ["休息室|n"] = {
      name = "休息室",
      exits = {
        ["n"] = "朱雀堂|e,n,s",
      },
    },

    -- 土路 重名：土路1 / 土路2 / 土路3
    ["土路|n,sd"] = {
      name = "土路1",
      exits = {
        ["n"] = "土路|ne,s",
        ["sd"] = "平定州|e,nu,w",
      },
    },

    ["土路|ne,s"] = {
      name = "土路2",
      exits = {
        ["ne"] = "土路|nu,sw",
        ["s"] = "土路|n,sd",
      },
    },

    ["土路|nu,sw"] = {
      name = "土路",
      exits = {
        ["nu"] = "山路|nu,sd",
        ["sw"] = "土路|ne,s",
      },
    },

    ["小村庄|e,n,sd,se,w"] = {
      name = "小村庄",
      exits = {
        ["e"] = "竹林|e,n,s,w",
        ["n"] = "村中小路|e,n,s,w",
        ["sd"] = "山路|nu,sd",
        ["se"] = "马车行|nw",
        ["w"] = "朱雀堂|e,n,s",
      },
    },

    ["山路|nu,sd"] = {
      name = "山路",
      exits = {
        ["nu"] = "小村庄|e,n,sd,se,w",
        ["sd"] = "土路|nu,sw",
      },
    },

    ["平定州|e,nu,w"] = {
      name = "平定州",
      exits = {
        ["nu"] = "土路|n,sd",
      },
    },

    ["朱雀堂|e,n,s"] = {
      name = "朱雀堂",
      exits = {
        ["e"] = "小村庄|e,n,sd,se,w",
        ["n"] = "朱雀堂里屋|s",
        ["s"] = "休息室|n",
      },
    },

    ["朱雀堂里屋|s"] = {
      name = "朱雀堂里屋",
      exits = {
        ["s"] = "朱雀堂|e,n,s",
      },
    },

    -- 竹林 重名：竹林1 / 竹林2 / 竹林3 / 竹林4
    ["竹林|e,n,s,w"] = {
      name = "竹林",
      exits = {
        ["e"] = "竹林|w",
        ["n"] = "竹林|s",
        ["s"] = "竹林|n",
        ["w"] = "小村庄|e,n,sd,se,w",
      },
    },

    ["竹林|n"] = {
      name = "竹林2",
      exits = {
        ["n"] = "竹林|e,n,s,w",
      },
    },

    ["竹林|s"] = {
      name = "竹林3",
      exits = {
        ["s"] = "竹林|e,n,s,w",
      },
    },

    ["竹林|w"] = {
      name = "竹林4",
      exits = {
        ["w"] = "竹林|e,n,s,w",
      },
    },

    ["马车行|nw"] = {
      name = "马车行",
      exits = {
        ["nw"] = "小村庄|e,n,sd,se,w",
      },
    },

    ["农家小院|e,n,s,w"] = {
      name = "农家小院",
      exits = {
        ["e"] = "院门口|e,w",
        ["n"] = "厢房|s",
        ["s"] = "柴房|n",
        ["w"] = "正房|e,s",
      },
    },

    ["卧房|n"] = {
      name = "卧房",
      exits = {
        ["n"] = "正房|e,s",
      },
    },

    ["厢房|s"] = {
      name = "厢房",
      exits = {
        ["s"] = "农家小院|e,n,s,w",
      },
    },

    ["柴房|n"] = {
      name = "柴房2",
      exits = {
        ["n"] = "农家小院|e,n,s,w",
      },
    },

    ["正房|e,s"] = {
      name = "正房",
      exits = {
        ["e"] = "农家小院|e,n,s,w",
        ["s"] = "卧房|n",
      },
    },

    ["院门口|e,w"] = {
      name = "院门口",
      exits = {
        ["e"] = "村中小路|e,n,s,w",
        ["w"] = "农家小院|e,n,s,w",
      },
    },
  },
}

-- 生成 mapAliases（房间名 -&gt; 简写）
mapper.maps["ry"].mapAliases = {
  ["村中小路"] = "czxl",
  ["小村庄"]   = "origin",
  ["院门口"]   = "ymk",
  ["农家小院"] = "njxy",
  ["正房"]     = "zf",
  ["卧房"]     = "wf",
  ["厢房"]     = "xf",

  ["白虎堂"]   = "bht",
  ["书院"]     = "sy",
  ["内厅"]     = "nt",
  ["厨房"]     = "chf",

  ["打铁铺"]   = "dtp",
  ["黑木崖下"] = "hmyx",

  ["柴房"]    = "cf",
  ["柴房2"]    = "cf2",

  ["庄稼地"]  = "zjd",
  ["庄稼地2"]  = "zjd2",

  ["休息室"]   = "xxs",
  ["朱雀堂"]   = "zqt",
  ["朱雀堂里屋"] = "zqtlw",

  ["土路1"]    = "tl1",
  ["土路2"]    = "tl2",
  ["土路3"]    = "tl",
  ["山路"]     = "sl",
  ["平定州"]   = "pdz",

  ["竹林"]    = "zl",
  ["竹林2"]    = "zl2",
  ["竹林3"]    = "zl3",
  ["竹林4"]    = "zl4",

  ["马车行"]   = "mch",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>云冈石窟 - ygsk</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["ygsk"] = {
  region = {
    key  = "ygsk",
    name = "云冈石窟",
  },
  
  mapNodes = {

["土路11|e,wu"] = {
  name = "土路11",
  exits = {
    ["e"] = "土路10|e,n,w",
    ["wu"] = "",
  },
},

["土路10|e,n,w"] = {
  name = "土路10",
  exits = {
    ["e"] = "土路9|e,n,w",
    ["n"] = "二十窟|s",
    ["w"] = "土路11|e,wu",
  },
},

["二十窟|s"] = {
  name = "二十窟",
  exits = {
    ["s"] = "土路10|e,n,w",
  },
},

["土路9|e,n,w"] = {
  name = "土路9",
  exits = {
    ["e"] = "土路8|e,n,w",
    ["n"] = "十九窟|s",
    ["w"] = "土路10|e,n,w",
  },
},

["十九窟|s"] = {
  name = "十九窟",
  exits = {
    ["s"] = "土路9|e,n,w",
  },
},

["土路8|e,n,w"] = {
  name = "土路8",
  exits = {
    ["e"] = "土路7|e,n,w",
    ["n"] = "十八窟|s",
    ["w"] = "土路9|e,n,w",
  },
},

["十八窟|s"] = {
  name = "十八窟",
  exits = {
    ["s"] = "土路8|e,n,w",
  },
},

["土路7|e,n,w"] = {
  name = "土路7",
  exits = {
    ["e"] = "土路6|e,n,w",
    ["n"] = "十七窟|s",
    ["w"] = "土路8|e,n,w",
  },
},

["十七窟|s"] = {
  name = "十七窟",
  exits = {
    ["s"] = "土路7|e,n,w",
  },
},

["土路6|e,n,w"] = {
  name = "土路6",
  exits = {
    ["e"] = "土路5|e,n,w",
    ["n"] = "十六窟|s",
    ["w"] = "土路7|e,n,w",
  },
},

["十六窟|s"] = {
  name = "十六窟",
  exits = {
    ["s"] = "土路6|e,n,w",
  },
},


["土路5|e,n,w"] = {
  name = "土路5",
  exits = {
    ["e"] = "土路4|ed,n,w",
    ["n"] = "十五窟|s",
    ["w"] = "土路6|e,n,w",
  },
},
["十五窟|s"] = {
  name = "十五窟",
  exits = {
    ["s"] = "土路5|e,n,w",
  },
},

["土路4|ed,n,w"] = {
  name = "土路4",
  exits = {
    ["ed"] = "西谷|eu,wu",
    ["n"] = "十四窟|s",
    ["w"] = "土路5|e,n,w",
  },
},

["十四窟|s"] = {
  name = "十四窟",
  exits = {
    ["s"] = "土路4|ed,n,w",
  },
},

["土路1|e,n,w"] = {
  name = "土路1",
  exits = {
    ["e"] = "土路|e,n,w",
    ["n"] = "第八窟|s",
    ["w"] = "土路2|e,ne,nw,w",
  },
},

["西谷|eu,wu"] = {
  name = "西谷",
  exits = {
    ["eu"] = "土路|e,ne,nw,wd",
    ["wu"] = "土路4|ed,n,w",
  },
},
["土路|e,ne,nw,wd"] = {
  name = "土路A",
  exits = {
    ["e"] = "土路3|e,n,w",
    ["ne"] = "十二窟|sw",
    ["nw"] = "十三窟|se",
    ["wd"] = "西谷|eu,wu",
  },
},

["十三窟|se"] = {
  name = "十三窟",
  exits = {
    ["se"] = "土路|e,ne,nw,wd",
  },
},


["十二窟|sw"] = {
  name = "十二窟",
  exits = {
    ["sw"] = "土路|e,ne,nw,wd",
  },
},

["土路3|e,n,w"] = {
  name = "土路3",
  exits = {
    ["e"] = "土路2|e,ne,nw,w",
    ["n"] = "十一窟|s",
    ["w"] = "土路|e,ne,nw,wd",
  },
},

["十一窟|s"] = {
  name = "十一窟",
  exits = {
    ["s"] = "土路3|e,n,w",
  },
},

["土路2|e,ne,nw,w"] = {
  name = "土路2",
  exits = {
    ["e"] = "土路1|e,n,w",
    ["ne"] = "第九窟|sw",
    ["nw"] = "第十窟|se",
    ["w"] = "土路3|e,n,w",
  },
},

["第十窟|se"] = {
  name = "第十窟",
  exits = {
    ["se"] = "土路2|e,ne,nw,w",
  },
},

["第九窟|sw"] = {
  name = "第九窟",
  exits = {
    ["sw"] = "土路2|e,ne,nw,w",
  },
},

["第八窟|s"] = {
  name = "第八窟",
  exits = {
    ["s"] = "土路1|e,n,w",
  },
},

["土路|ne,nw,sd,w"] = {
  name = "土路B",
  exits = {
    ["ne"] = "第五窟|enter,sw",
    ["nw"] = "第六窟|se",
    ["sd"] = "东谷|eu,nu",
    ["w"] = "土路|e,n,w",
  },
},

["土路|e,n,w"] = {
  name = "土路C",
  exits = {
    ["e"] = "土路|ne,nw,sd,w",
    ["n"] = "第七窟|enter,s",
    ["w"] = "土路1|e,n,w",
  },
},

["第七窟|enter,s"] = {
  name = "第七窟",
  exits = {
    ["enter"] = "第七窟后室|out",
    ["s"] = "土路|e,n,w",
  },
},

["第七窟后室|out"] = {
  name = "第七窟后室",
  exits = {
    ["out"] = "第七窟|enter,s",
  },
},

["第六窟|se"] = {
  name = "第六窟",
  exits = {
    ["se"] = "土路|ne,nw,sd,w",
  },
},

["第五窟|enter,sw"] = {
  name = "第五窟",
  exits = {
    ["enter"] = "第五窟后室|out",
    ["sw"] = "土路|ne,nw,sd,w",
  },
},
["第五窟后室|out"] = {
  name = "第五窟后室",
  exits = {
    ["out"] = "第五窟|enter,sw",
  },
},

["东谷|eu,nu"] = {
  name = "东谷",
  exits = {
    ["eu"] = "土路|n,ne,wd",
    ["nu"] = "土路|ne,nw,sd,w",
  },
},

["土路|n,ne,wd"] = {
  name = "土路D",
  exits = {
    ["n"] = "第四窟|s",
    ["ne"] = "译经楼|e,n,sw",
    ["wd"] = "东谷|eu,nu",
  },
},

["第四窟|s"] = {
  name = "第四窟",
  exits = {
    ["s"] = "土路|n,ne,wd",
  },
},

["土路|n,ne,se,w"] = {
  name = "土路",
  exits = {
    ["n"] = "第二窟|s",
    ["ne"] = "第一窟|sw",
    ["w"] = "译经楼|e,n,sw",
  },
},
["译经楼|e,n,sw"] = {
  name = "译经楼",
  exits = {
    ["e"] = "土路|n,ne,se,w",
    ["n"] = "第三窟|s",
    ["sw"] = "土路|n,ne,wd",
  },
},

["第三窟|s"] = {
  name = "第三窟",
  exits = {
    ["s"] = "译经楼|e,n,sw",
  },
},

["第二窟|s"] = {
  name = "第二窟",
  exits = {
    ["s"] = "土路|n,ne,se,w",
  },
},

["第一窟|sw"] = {
  name = "第一窟",
  exits = {
    ["sw"] = "土路|n,ne,se,w",
  },
},  
  }
  
}

mapper.maps["ygsk"].mapAliases = {

  -- ===== 土路编号段 =====
  ["土路1"]  = "tl1",
  ["土路2"]  = "tl2",
  ["土路3"]  = "tl3",
  ["土路4"]  = "tl4",
  ["土路5"]  = "tl5",
  ["土路6"]  = "tl6",
  ["土路7"]  = "tl7",
  ["土路8"]  = "tl8",
  ["土路9"]  = "tl9",
  ["土路10"] = "tl10",
  ["土路11"] = "tl11",

  -- ===== 同名：土路（5 个不同指纹）=====
  -- 你需要在 mapNodes 里把这 5 个“土路”也重命名成 土路A..土路E / 土路12..16 之类
  -- 这里先提供可用的别名键（你重命名后把 key 改成对应的名字即可）
  ["土路"]   = "origin",   -- 默认土路（你想指向哪个，就改这里）
  ["土路A"]  = "tlA",
  ["土路B"]  = "tlB",
  ["土路C"]  = "tlC",
  ["土路D"]  = "tlD",
  ["土路E"]  = "tlE",

  -- ===== 1~20 窟 =====
  ["第一窟"]   = "k1",
  ["第二窟"]   = "k2",
  ["第三窟"]   = "k3",
  ["第四窟"]   = "k4",
  ["第五窟"]   = "k5",
  ["第六窟"]   = "k6",
  ["第七窟"]   = "k7",
  ["第八窟"]   = "k8",
  ["第九窟"]   = "k9",
  ["第十窟"]   = "k10",
  ["十一窟"]   = "k11",
  ["十二窟"]   = "k12",
  ["十三窟"]   = "k13",
  ["十四窟"]   = "k14",
  ["十五窟"]   = "k15",
  ["十六窟"]   = "k16",
  ["十七窟"]   = "k17",
  ["十八窟"]   = "k18",
  ["十九窟"]   = "k19",
  ["二十窟"]   = "k20",

  -- ===== 窟后室 =====
  ["第五窟后室"] = "k5hs",
  ["第七窟后室"] = "k7hs",

  -- ===== 其它地标 =====
  ["西谷"]   = "xg",
  ["东谷"]   = "dg",
  ["译经楼"] = "yjl",
}
</script>
					<eventHandlerList />
				</Script>
			</ScriptGroup>
			<ScriptGroup isActive="yes" isFolder="yes">
				<name>中原地区</name>
				<packageName></packageName>
				<script></script>
				<eventHandlerList />
				<Script isActive="yes" isFolder="no">
					<name>麒麟村 - qlc</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["qlc"] = {
  region = {
    key  = "qlc",
    name = "麒麟村",
  },

  mapNodes = {

    -- ===== 山路（重名处理）=====
    ["山路|ne,w"] = {
      name = "山路1",
      exits = {
        ["ne"] = "山路|n,sw",
        ["w"]  = "小路2|e,n,s,w",
      },
    },

    ["山路|n,sw"] = {
      name = "山路2",
      exits = {
        ["n"]  = "山路|ne,s",
        ["sw"] = "山路|ne,w",
      },
    },

    ["山路|ne,s"] = {
      name = "山路3",
      exits = {
        ["ne"] = "山路|eu,sw",
        ["s"]  = "山路|n,sw",
      },
    },

    ["山路|eu,sw"] = {
      name = "山路4",
      exits = {
        ["eu"] = "山路|eu,wd",
        ["sw"] = "山路|ne,s",
      },
    },

    ["山路|eu,wd"] = {
      name = "山路5",
      exits = {
        ["eu"] = "山路|e,nu,wd",
        ["wd"] = "山路|eu,sw",
      },
    },

    ["山路|e,nu,wd"] = {
      name = "山路6",
      exits = {
        ["e"]  = "方丈室|w",
        ["nu"] = "山路|nw,sd",
        ["wd"] = "山路|eu,wd",
      },
    },

    ["山路|nw,sd"] = {
      name = "山路7",
      exits = {
        ["nw"] = "山路|nu,se",
        ["sd"] = "山路|e,nu,wd",
      },
    },

    ["山路|nu,se"] = {
      name = "山路8",
      exits = {
        ["nu"] = "山路|nu,sd",
        ["se"] = "山路|nw,sd",
      },
    },

    ["山路|nu,sd"] = {
      name = "山路9",
      exits = {
        ["nu"] = "山路|sd",
        ["sd"] = "山路|nu,se",
      },
    },

    ["山路|sd"] = {
      name = "山路10",
      exits = {
        ["sd"] = "山路|nu,sd",
      },
    },

    -- ===== 小路（重名处理）=====
    ["小路|s,w"] = {
      name = "小路1",
      exits = {
        ["s"] = "小路|n,sw",
        ["w"] = "小广场|e,n,s,w",
      },
    },

    ["小路|n,sw"] = {
      name = "小路2",
      exits = {
        ["n"] = "小路|s,w",
      },
    },

    ["小路|e,n,s,w"] = {
      name = "小路3",
      exits = {
        ["e"] = "学馆|w",
        ["n"] = "小广场|e,n,s,w",
        ["s"] = "民宅|n",
        ["w"] = "岳飞家|e",
      },
    },

    ["小路1|e,n,s,w"] = {
      name = "小路4",
      exits = {
        ["e"] = "汤员外家|w",
        ["n"] = "小路2|e,n,s,w",
        ["s"] = "小广场|e,n,s,w",
        ["w"] = "张员外家|e",
      },
    },

    ["小路2|e,n,s,w"] = {
      name = "小路5",
      exits = {
        ["e"] = "山路|ne,w",
        ["n"] = "王员外家|n,s",
        ["s"] = "小路1|e,n,s,w",
        ["w"] = "酒店|e",
      },
    },

    -- ===== 其它节点 =====
    ["学馆|w"] = {
      name = "学馆",
      exits = {
        ["w"] = "小路|e,n,s,w",
      },
    },

    ["酒店|e"] = {
      name = "酒店",
      exits = {
        ["e"] = "小路2|e,n,s,w",
      },
    },

    ["小广场|e,n,s,w"] = {
      name = "小广场",
      exits = {
        ["e"] = "小路|s,w",
        ["n"] = "小路1|e,n,s,w",
        ["s"] = "小路|e,n,s,w",
        ["w"] = "土地庙|e",
      },
    },

    ["土地庙|e"] = {
      name = "土地庙",
      exits = {
        ["e"] = "小广场|e,n,s,w",
      },
    },

    ["汤员外家|w"] = {
      name = "汤员外家",
      exits = {
        ["w"] = "小路1|e,n,s,w",
      },
    },

    ["岳飞家|e"] = {
      name = "岳飞家",
      exits = {
        ["e"] = "小路|e,n,s,w",
      },
    },

    ["民宅|n"] = {
      name = "民宅",
      exits = {
        ["n"] = "小路|e,n,s,w",
      },
    },

    ["张员外家|e"] = {
      name = "张员外家",
      exits = {
        ["e"] = "小路1|e,n,s,w",
      },
    },

    ["方丈室|w"] = {
      name = "方丈室",
      exits = {
        ["w"] = "山路|e,nu,wd",
      },
    },

    ["王员外家|n,s"] = {
      name = "王员外家",
      exits = {
        ["n"] = "练武场|s",
        ["s"] = "小路2|e,n,s,w",
      },
    },

    ["练武场|s"] = {
      name = "练武场",
      exits = {
        ["s"] = "王员外家|n,s",
      },
    },
  },
}

mapper.maps["qlc"].mapAliases = {

  -- ===== 原点（村内中心点：小广场）=====
  ["小广场"] = "origin",

  -- ===== 小路 =====
  ["小路1"] = "xl1",
  ["小路2"] = "xl2",
  ["小路3"] = "xl3",
  ["小路4"] = "xl4",
  ["小路5"] = "xl5",

  -- ===== 山路 =====
  ["山路1"]  = "sl1",
  ["山路2"]  = "sl2",
  ["山路3"]  = "sl3",
  ["山路4"]  = "sl4",
  ["山路5"]  = "sl5",
  ["山路6"]  = "sl6",
  ["山路7"]  = "sl7",
  ["山路8"]  = "sl8",
  ["山路9"]  = "sl9",
  ["山路10"] = "sl10",

  -- ===== 房舍 / 建筑 =====
  ["学馆"]     = "xg",
  ["酒店"]     = "jd",
  ["土地庙"]   = "tdm",
  ["民宅"]     = "mz",
  ["岳飞家"]   = "yfj",
  ["汤员外家"] = "tywj",
  ["张员外家"] = "zywj",
  ["方丈室"]   = "fzs",

  -- ===== 练武区域 =====
  ["王员外家"] = "wywj",
  ["练武场"]   = "lwc",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>庐州 - luzhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["luzhou"] = {
  region = {
    key  = "luzhou",
    name = "庐州",
  },
  mapNodes = {

    ["西平门|e,n,s,wu"] = {
      name = "西平门",
      exits = {
        ["e"]  = "南大街|e,n,s,w",
        ["wu"] = "山路|ed,sw",
      },
    },

    ["山路|ed,sw"] = {
      name = "山路",
      exits = {
        ["ed"] = "西平门|e,n,s,wu",
      },
    },

    ["包公祠|w"] = {
      name = "包公祠",
      exits = {
        ["w"] = "南大街2|e,n,s,w",
      },
    },

    -- ===== 南大街（重名处理）=====
    ["南大街|e,n,s"] = {
      name = "南大街1",
      exits = {
        ["e"] = "威武门|e,n,nw,s,w",
        ["n"] = "石板桥|e,n,s,w",
        ["s"] = "南大街1|e,n,s,w",
      },
    },

    ["南大街|e,n,s,w"] = {
      name = "南大街2",
      exits = {
        ["e"] = "南大街1|e,n,s,w",
        ["n"] = "小巷|e,n,s",
        ["s"] = "珠泉巷|e,n,s,w",
        ["w"] = "西平门|e,n,s,wu",
      },
    },

    ["南大街1|e,n,s,w"] = {
      name = "南大街3",
      exits = {
        ["e"] = "药铺|w",
        ["n"] = "南大街|e,n,s",
        ["s"] = "南大街2|e,n,s,w",
        ["w"] = "南大街|e,n,s,w",
      },
    },

    ["南大街2|e,n,s,w"] = {
      name = "南大街4",
      exits = {
        ["e"] = "包公祠|w",
        ["n"] = "南大街1|e,n,s,w",
        ["s"] = "南熏门|e,n,s,w",
        ["w"] = "珠泉巷|e,n,s,w",
      },
    },

    ["上房|out"] = {
      name = "上房",
      exits = {
        ["out"] = "客店|e,enter",
      },
    },

    ["东大街|n,se,w"] = {
      name = "东大街",
      exits = {
        ["n"]  = "酒铺|n,s,w",
        ["se"] = "威武门|e,n,nw,s,w",
        ["w"]  = "石板桥|e,n,s,w",
      },
    },

    ["书院|w"] = {
      name = "书院",
      exits = {
        ["w"] = "小巷|e,n,s",
      },
    },

    ["六安|ne,nw"] = {
      name = "六安",
      exits = {
        ["ne"] = "水西门|e,n,s,sw",
        ["nw"] = "金寨县|n,nw,se,su",
      },
    },

    -- ===== 北街（重名处理）=====
    ["北街|e,s,w"] = {
      name = "北街1",
      exits = {
        ["e"] = "打铁铺|w",
        ["s"] = "酒铺|n,s,w",
        ["w"] = "鼓楼|e,n,s,w",
      },
    },

    ["北街|e,w"] = {
      name = "北街2",
      exits = {
        ["e"] = "鼓楼|e,n,s,w",
        ["w"] = "客店|e,enter",
      },
    },

    ["南熏门|e,n,s,w"] = {
      name = "南熏门",
      exits = {
        ["n"] = "南大街2|e,n,s,w",
        ["s"] = "南郊道|n,se",
        ["w"] = "德胜门|e,n,sw,w",
      },
    },

    ["南郊道|n,se"] = {
      name = "南郊道",
      exits = {
        ["n"]  = "南熏门|e,n,s,w",
        ["se"] = "小路|eu,nw,se",
      },
    },

    ["四顶山|se,wd"] = {
      name = "四顶山",
      exits = {
        ["wd"] = "小路|eu,nw,se",
      },
    },

    ["土路|ne,sw"] = {
      name = "土路",
      exits = {
        ["ne"] = "白荡湖畔|ne,sw",
        ["sw"] = "安庆|ne,nw",
      },
    },

    ["大墅镇|n,ne,sw"] = {
      name = "大墅镇",
      exits = {
        ["n"]  = "龙山寺|s",
        ["ne"] = "山脚|neu,sw",
        ["sw"] = "教弩台|nd,ne,swd",
      },
    },

    ["威武门|e,n,nw,s,w"] = {
      name = "威武门",
      exits = {
        ["e"]  = "官道|neu,w",
        ["nw"] = "东大街|n,se,w",
        ["w"]  = "南大街|e,n,s",
      },
    },

    ["学宫|n"] = {
      name = "学宫",
      exits = {
        ["n"] = "贡院|e,n,s",
      },
    },

    ["安庆|ne,nw"] = {
      name = "安庆",
      exits = {
        ["ne"] = "土路|ne,sw",
        ["nw"] = "官道|ne,se,sw,w",
      },
    },

    -- ===== 官道（重名处理）=====
    ["官道|n,s"] = {
      name = "官道1",
      exits = {
        ["n"] = "界牌集|e,n,nw,s,w",
        ["s"] = "拱辰门|e,n,s,w",
      },
    },

    ["官道|ne,nwu,sw"] = {
      name = "官道2",
      exits = {
        ["ne"]  = "官道|ne,se,sw,w",
        ["nwu"] = "白崖寨|nw,sed",
        ["sw"]  = "小池镇|ne,nw,s,w",
      },
    },

    ["官道|ne,se,sw,w"] = {
      name = "官道3",
      exits = {
        ["ne"] = "桐城|ne,sw",
        ["se"] = "安庆|ne,nw",
        ["sw"] = "官道|ne,nwu,sw",
        ["w"]  = "陡坡|e,wu",
      },
    },

    ["官道|neu,w"] = {
      name = "官道4",
      exits = {
        ["neu"] = "教弩台|nd,ne,swd",
        ["w"]   = "威武门|e,n,nw,s,w",
      },
    },

    ["客店|e,enter"] = {
      name = "客店",
      exits = {
        ["e"]     = "北街|e,w",
        ["enter"] = "上房|out",
      },
    },

    ["小巷|e,n,s"] = {
      name = "小巷",
      exits = {
        ["e"] = "书院|w",
        ["n"] = "西关桥|s,w",
        ["s"] = "南大街|e,n,s,w",
      },
    },

    ["小池镇|ne,nw,s,w"] = {
      name = "小池镇",
      exits = {
        ["ne"] = "官道|ne,nwu,sw",
      },
    },

    ["小路|eu,nw,se"] = {
      name = "小路",
      exits = {
        ["eu"] = "四顶山|se,wd",
        ["nw"] = "南郊道|n,se",
        ["se"] = "巢湖岸边|nw",
      },
    },

    ["山脚|neu,sw"] = {
      name = "山脚",
      exits = {
        ["neu"] = "琅琊山|ned,sed,swd",
        ["sw"]  = "大墅镇|n,ne,sw",
      },
    },

    ["巢湖岸边|nw"] = {
      name = "巢湖岸边",
      exits = {
        ["nw"] = "小路|eu,nw,se",
      },
    },

    ["府衙|s"] = {
      name = "府衙",
      exits = {
        ["s"] = "西大街|e,n,s,w",
      },
    },

    ["当铺|e"] = {
      name = "当铺",
      exits = {
        ["e"] = "珠泉巷|e,n,s,w",
      },
    },

    ["德胜门|e,n,sw,w"] = {
      name = "德胜门",
      exits = {
        ["e"]  = "南熏门|e,n,s,w",
        ["n"]  = "珠泉巷|e,n,s,w",
        ["sw"] = "林间道|ne,s",
      },
    },

    ["悬剑山|nd,sw,wd"] = {
      name = "悬剑山",
      exits = {
        ["nd"] = "金寨县|n,nw,se,su",
      },
    },

    ["打铁铺|w"] = {
      name = "打铁铺",
      exits = {
        ["w"] = "北街|e,s,w",
      },
    },

    ["拱辰门|e,n,s,w"] = {
      name = "拱辰门",
      exits = {
        ["n"] = "官道|n,s",
        ["s"] = "鼓楼|e,n,s,w",
      },
    },

    ["教弩台|nd,ne,swd"] = {
      name = "教弩台",
      exits = {
        ["nd"]  = "逍遥津|su",
        ["ne"]  = "大墅镇|n,ne,sw",
        ["swd"] = "官道|neu,w",
      },
    },

    -- ===== 林间道（重名处理）=====
    ["林间道|n,sw"] = {
      name = "林间道1",
      exits = {
        ["n"]  = "林间道|ne,s",
        ["sw"] = "桐城|ne,sw",
      },
    },

    ["林间道|ne,s"] = {
      name = "林间道2",
      exits = {
        ["ne"] = "德胜门|e,n,sw,w",
        ["s"]  = "林间道|n,sw",
      },
    },

    ["桐城|ne,sw"] = {
      name = "桐城",
      exits = {
        ["ne"] = "林间道|n,sw",
        ["sw"] = "官道|ne,se,sw,w",
      },
    },

    ["水西门|e,n,s,sw"] = {
      name = "水西门",
      exits = {
        ["e"]  = "西大街|e,n,s,w",
        ["sw"] = "六安|ne,nw",
      },
    },

    ["汤泉池|nu,se"] = {
      name = "汤泉池",
      exits = {
        ["se"] = "金寨县|n,nw,se,su",
      },
    },

    ["淮河路|e,n,s"] = {
      name = "淮河路",
      exits = {
        ["e"] = "酒铺|n,s,w",
        ["n"] = "鼓楼|e,n,s,w",
        ["s"] = "石板桥|e,n,s,w",
      },
    },

    ["珠泉巷|e,n,s,w"] = {
      name = "珠泉巷",
      exits = {
        ["e"] = "南大街2|e,n,s,w",
        ["n"] = "南大街|e,n,s,w",
        ["s"] = "德胜门|e,n,sw,w",
        ["w"] = "当铺|e",
      },
    },

    ["琅琊山|ned,sed,swd"] = {
      name = "琅琊山",
      exits = {
        ["swd"] = "山脚|neu,sw",
      },
    },

    ["界牌集|e,n,nw,s,w"] = {
      name = "界牌集",
      exits = {
        ["s"] = "官道|n,s",
      },
    },

    ["白崖寨|nw,sed"] = {
      name = "白崖寨",
      exits = {
        ["sed"] = "官道|ne,nwu,sw",
      },
    },

    ["白荡湖畔|ne,sw"] = {
      name = "白荡湖畔",
      exits = {
        ["ne"] = "香泉镇|nwu,s,sw",
        ["sw"] = "土路|ne,sw",
      },
    },

    ["石板桥|e,n,s,w"] = {
      name = "石板桥",
      exits = {
        ["e"] = "东大街|n,se,w",
        ["n"] = "淮河路|e,n,s",
        ["s"] = "南大街|e,n,s",
        ["w"] = "西大街|e,n,w",
      },
    },

    ["祠堂|s"] = {
      name = "祠堂",
      exits = {
        ["s"] = "陈家|n,s",
      },
    },

    ["药铺|w"] = {
      name = "药铺",
      exits = {
        ["w"] = "南大街1|e,n,s,w",
      },
    },

    ["西关桥|s,w"] = {
      name = "西关桥",
      exits = {
        ["s"] = "小巷|e,n,s",
        ["w"] = "贡院|e,n,s",
      },
    },

    -- ===== 西大街（重名处理）=====
    ["西大街|e,n,s,w"] = {
      name = "西大街1",
      exits = {
        ["e"] = "西大街|e,n,w",
        ["n"] = "府衙|s",
        ["s"] = "贡院|e,n,s",
        ["w"] = "水西门|e,n,s,sw",
      },
    },

    ["西大街|e,n,w"] = {
      name = "西大街2",
      exits = {
        ["e"] = "石板桥|e,n,s,w",
        ["n"] = "银号|s",
        ["w"] = "西大街|e,n,s,w",
      },
    },

    ["贡院|e,n,s"] = {
      name = "贡院",
      exits = {
        ["e"] = "西关桥|s,w",
        ["n"] = "西大街|e,n,s,w",
        ["s"] = "学宫|n",
      },
    },

    ["逍遥津|su"] = {
      name = "逍遥津",
      exits = {
        ["su"] = "教弩台|nd,ne,swd",
      },
    },

    ["酒铺|n,s,w"] = {
      name = "酒铺",
      exits = {
        ["n"] = "北街|e,s,w",
        ["s"] = "东大街|n,se,w",
        ["w"] = "淮河路|e,n,s",
      },
    },

    ["金寨县|n,nw,se,su"] = {
      name = "金寨县",
      exits = {
        ["n"]  = "陈家|n,s",
        ["nw"] = "汤泉池|nu,se",
        ["se"] = "六安|ne,nw",
        ["su"] = "悬剑山|nd,sw,wd",
      },
    },

    ["银号|s"] = {
      name = "银号",
      exits = {
        ["s"] = "西大街|e,n,w",
      },
    },

    ["陈家|n,s"] = {
      name = "陈家",
      exits = {
        ["n"] = "祠堂|s",
        ["s"] = "金寨县|n,nw,se,su",
      },
    },

    ["陡坡|e,wu"] = {
      name = "陡坡",
      exits = {
        ["e"] = "官道|ne,se,sw,w",
      },
    },

    ["香泉镇|nwu,s,sw"] = {
      name = "香泉镇",
      exits = {
        ["sw"] = "白荡湖畔|ne,sw",
      },
    },

    ["鼓楼|e,n,s,w"] = {
      name = "鼓楼",
      exits = {
        ["e"] = "北街|e,s,w",
        ["n"] = "拱辰门|e,n,s,w",
        ["s"] = "淮河路|e,n,s",
        ["w"] = "北街|e,w",
      },
    },

    ["龙山寺|s"] = {
      name = "龙山寺",
      exits = {
        ["s"] = "大墅镇|n,ne,sw",
      },
    },
  },
}

mapper.maps["luzhou"].mapAliases = {

  -- ===== 原点（城内枢纽：鼓楼）=====
  ["鼓楼"] = "gl",

  -- ===== 城门 / 入口 =====
  ["西平门"] = "xpm",
  ["威武门"] = "wwm",
  ["南熏门"] = "nxm",
  ["德胜门"] = "dsm",
  ["水西门"] = "sxm",
  ["拱辰门"] = "gcm",

  -- ===== 主街（重名别名）=====
  ["南大街1"] = "ndj1",
  ["南大街2"] = "ndj2",
  ["南大街3"] = "ndj3",
  ["南大街4"] = "ndj4",

  ["北街1"] = "bj1",
  ["北街2"] = "bj2",

  ["西大街1"] = "xdj1",
  ["西大街2"] = "xdj2",

  -- ===== 官道（重名别名）=====
  ["官道1"] = "gd1",
  ["官道2"] = "gd2",
  ["官道3"] = "gd3",
  ["官道4"] = "gd4",

  -- ===== 林间道（重名别名）=====
  ["林间道1"] = "ljd1",
  ["林间道2"] = "ljd2",

  -- ===== 城内建筑 / 商铺 =====
  ["包公祠"] = "bgc",
  ["书院"]   = "sy",
  ["学宫"]   = "xg",
  ["贡院"]   = "gy",
  ["府衙"]   = "fy",
  ["当铺"]   = "dp",
  ["药铺"]   = "yp",
  ["打铁铺"] = "dtp",
  ["酒铺"]   = "jp",
  ["客店"]   = "kd",
  ["上房"]   = "sf",
  ["银号"]   = "yh",

  -- ===== 城内道路 / 桥巷 =====
  ["东大街"] = "ddj",
  ["石板桥"] = "origin",
  ["淮河路"] = "hhl",
  ["珠泉巷"] = "zqx",
  ["小巷"]   = "xx",
  ["西关桥"] = "xgq",

  -- ===== 郊外 / 地名 =====
  ["山路"]     = "sl",
  ["南郊道"]   = "njd",
  ["小路"]     = "xl",
  ["四顶山"]   = "sds",
  ["巢湖岸边"] = "chab",
  ["琅琊山"]   = "lys",
  ["山脚"]     = "sj",
  ["土路"]     = "tl",
  ["陡坡"]     = "dp2",

  ["安庆"]     = "aq",
  ["桐城"]     = "tc",
  ["界牌集"]   = "jpj",
  ["白崖寨"]   = "byz",
  ["白荡湖畔"] = "bdhp",
  ["香泉镇"]   = "xqz",
  ["小池镇"]   = "xcz",

  ["六安"]   = "la",
  ["金寨县"] = "jzx",
  ["悬剑山"] = "xjs",
  ["汤泉池"] = "tqc",

  ["大墅镇"] = "dsz",
  ["龙山寺"] = "lss",
  ["教弩台"] = "jnt",
  ["逍遥津"] = "xyj",

  ["陈家"] = "cj",
  ["祠堂"] = "ct",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>信阳 - xinyang</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["xinyang"] = {
  region = {
    key  = "xinyang",
    name = "信阳",
  },

  mapNodes = {

    ["丈人石|ed"] = {
      name = "丈人石",
      exits = {
        ["ed"] = "鹿涧|ne,sw,wu",
      },
    },

    ["东市|e,ne,se,w"] = {
      name = "东市",
      exits = {
        ["e"]  = "东门|e,n,s,w",
        ["ne"] = "钱庄|sw",
        ["se"] = "当铺|nw",
        ["w"]  = "小广场|e,n,s,w",
      },
    },

    ["东门|e,n,s,w"] = {
      name = "东门",
      exits = {
        ["e"] = "官道|e,se,w",
        ["w"] = "东市|e,ne,se,w",
      },
    },

    ["中原马车行|s"] = {
      name = "中原马车行",
      exits = {
        ["s"] = "西市|e,n,s,w",
      },
    },

    ["北市|n,s,w"] = {
      name = "北市",
      exits = {
        ["n"] = "北门|e,n,s,w",
        ["s"] = "镇淮桥|e,n,s",
        ["w"] = "大门|e",
      },
    },

    ["北门|e,n,s,w"] = {
      name = "北门",
      exits = {
        ["n"] = "官道|n,nw,s",
        ["s"] = "北市|n,s,w",
      },
    },

    ["南市|n,s,se,w"] = {
      name = "南市",
      exits = {
        ["n"]  = "小广场|e,n,s,w",
        ["s"]  = "南门|e,n,s,w",
        ["se"] = "庙前|enter,nw",
        ["w"]  = "南湾湖|e,n",
      },
    },

    ["南湾湖|e,n"] = {
      name = "南湾湖",
      exits = {
        ["e"] = "南市|n,s,se,w",
        ["n"] = "西市|e,n,s,w",
      },
    },

    ["南门|e,n,s,w"] = {
      name = "南门",
      exits = {
        ["n"] = "南市|n,s,se,w",
        ["s"] = "鸡公山|n,sd,u,wd",
      },
    },

    ["后院|s"] = {
      name = "后院",
      exits = {
        ["s"] = "议事堂|e,n,s,w",
      },
    },

    ["城东小路|e,eu,s,se,w"] = {
      name = "城东小路",
      exits = {
        ["se"] = "官道|e,nw,sw",
      },
    },

    ["大殿|out"] = {
      name = "大殿",
      exits = {
        ["out"] = "贤隐寺|enter,eu,nu,nw",
      },
    },

    -- ===== 大门（重名处理）=====
    ["大门|e"] = {
      name = "大门",
      exits = {
        ["e"] = "北市|n,s,w",
      },
    },

    ["大门|n,wd"] = {
      name = "大门2",
      exits = {
        ["n"]  = "议事堂|e,n,s,w",
        ["wd"] = "石板路|eu,w",
      },
    },

    ["孝感|eu,ne,su,w"] = {
      name = "孝感",
      exits = {
        ["ne"] = "武胜关|ne,sw",
      },
    },

    -- ===== 官道（重名处理）=====
    ["官道|e,nw,sw"] = {
      name = "官道1",
      exits = {
        ["e"]  = "西门|e,n,s,w",
        ["nw"] = "城东小路|e,eu,s,se,w",
        ["sw"] = "贤首山北麓|ne,se",
      },
    },

    ["官道|e,se,w"] = {
      name = "官道2",
      exits = {
        ["e"]  = "界牌集|e,n,nw,s,w",
        ["se"] = "金刚台|nw,sd",
        ["w"]  = "东门|e,n,s,w",
      },
    },

    ["官道|n,nw,s"] = {
      name = "官道3",
      exits = {
        ["n"]  = "长台关|n,ne,s,w",
        ["nw"] = "林间道|nw,se",
        ["s"]  = "北门|e,n,s,w",
      },
    },

    ["小广场|e,n,s,w"] = {
      name = "小广场",
      exits = {
        ["e"] = "东市|e,ne,se,w",
        ["n"] = "镇淮桥|e,n,s",
        ["s"] = "南市|n,s,se,w",
        ["w"] = "西市|e,n,s,w",
      },
    },

    ["小池镇|ne,nw,s,w"] = {
      name = "小池镇",
      exits = {
        ["nw"] = "鸡公山下|nu,se,sw,wu",
      },
    },

    ["山路|eu,nw"] = {
      name = "山路",
      exits = {
        ["eu"] = "贤岭|sw,wd",
        ["nw"] = "贤首山北麓|ne,se",
      },
    },

    ["山间小道|ed,w"] = {
      name = "山间小道",
      exits = {
        ["ed"] = "鸡公山下|nu,se,sw,wu",
        ["w"]  = "贤首山南麓|e,ne,sd,sw",
      },
    },

    ["庙前|enter,nw"] = {
      name = "庙前",
      exits = {
        ["enter"] = "破庙之中|n,out,s",
        ["nw"]    = "南市|n,s,se,w",
      },
    },

    ["当铺|nw"] = {
      name = "当铺",
      exits = {
        ["nw"] = "东市|e,ne,se,w",
      },
    },

    ["报晓峰|d"] = {
      name = "报晓峰",
      exits = {
        ["d"] = "鸡公山|n,sd,u,wd",
      },
    },

    ["林间道|nw,se"] = {
      name = "林间道",
      exits = {
        ["se"] = "官道|n,nw,s",
      },
    },

    ["柴房|e"] = {
      name = "柴房",
      exits = {
        ["e"] = "议事堂|e,n,s,w",
      },
    },

    ["武胜关|ne,sw"] = {
      name = "武胜关",
      exits = {
        ["ne"] = "鸡公山下|nu,se,sw,wu",
        ["sw"] = "孝感|eu,ne,su,w",
      },
    },

    ["汤泉池|nu,se"] = {
      name = "汤泉池",
      exits = {
        ["nu"] = "金刚台|nw,sd",
        ["se"] = "金寨县|n,nw,se,su",
      },
    },

    ["界牌集|e,n,nw,s,w"] = {
      name = "界牌集",
      exits = {
        ["w"] = "官道|e,se,w",
      },
    },

    ["石板路|eu,w"] = {
      name = "石板路",
      exits = {
        ["eu"] = "大门|n,wd",
        ["w"]  = "镇淮桥|e,n,s",
      },
    },

    -- ===== 破屋（重名处理）=====
    ["破屋|n"] = {
      name = "破屋",
      exits = {
        ["n"] = "破庙之中|n,out,s",
      },
    },

    ["破屋|s"] = {
      name = "破屋2",
      exits = {
        ["s"] = "破庙之中|n,out,s",
      },
    },

    ["破庙之中|n,out,s"] = {
      name = "破庙之中",
      exits = {
        ["n"]   = "破屋|s",
        ["out"] = "庙前|enter,nw",
        ["s"]   = "破屋|n",
      },
    },

    ["花园|w"] = {
      name = "花园",
      exits = {
        ["w"] = "议事堂|e,n,s,w",
      },
    },

    ["莲花峰|wd"] = {
      name = "莲花峰",
      exits = {
        ["wd"] = "贤隐寺|enter,eu,nu,nw",
      },
    },

    ["西市|e,n,s,w"] = {
      name = "西市",
      exits = {
        ["e"] = "小广场|e,n,s,w",
        ["n"] = "中原马车行|s",
        ["s"] = "南湾湖|e,n",
        ["w"] = "西门|e,n,s,w",
      },
    },

    ["西门|e,n,s,w"] = {
      name = "西门",
      exits = {
        ["e"] = "西市|e,n,s,w",
        ["w"] = "官道|e,nw,sw",
      },
    },

    ["议事堂|e,n,s,w"] = {
      name = "议事堂",
      exits = {
        ["e"] = "花园|w",
        ["n"] = "后院|s",
        ["s"] = "大门|n,wd",
        ["w"] = "柴房|e",
      },
    },

    ["贤岭|sw,wd"] = {
      name = "贤岭",
      exits = {
        ["sw"] = "鹿涧|ne,sw,wu",
        ["wd"] = "山路|eu,nw",
      },
    },

    ["贤隐寺|enter,eu,nu,nw"] = {
      name = "贤隐寺",
      exits = {
        ["enter"] = "大殿|out",
        ["eu"]    = "莲花峰|wd",
        ["nu"]    = "贤首山南麓|e,ne,sd,sw",
        ["nw"]    = "飘带岭|ne,se",
      },
    },

    ["贤首山北麓|ne,se"] = {
      name = "贤首山北麓",
      exits = {
        ["ne"] = "官道|e,nw,sw",
        ["se"] = "山路|eu,nw",
      },
    },

    ["贤首山南麓|e,ne,sd,sw"] = {
      name = "贤首山南麓",
      exits = {
        ["e"]  = "山间小道|ed,w",
        ["ne"] = "鹿涧|ne,sw,wu",
        ["sd"] = "贤隐寺|enter,eu,nu,nw",
        ["sw"] = "飘带岭|ne,se",
      },
    },

    ["金刚台|nw,sd"] = {
      name = "金刚台",
      exits = {
        ["nw"] = "官道|e,se,w",
        ["sd"] = "汤泉池|nu,se",
      },
    },

    ["金寨县|n,nw,se,su"] = {
      name = "金寨县",
      exits = {
        ["nw"] = "汤泉池|nu,se",
      },
    },

    ["钱庄|sw"] = {
      name = "钱庄",
      exits = {
        ["sw"] = "东市|e,ne,se,w",
      },
    },

    ["镇淮桥|e,n,s"] = {
      name = "镇淮桥",
      exits = {
        ["e"] = "石板路|eu,w",
        ["n"] = "北市|n,s,w",
        ["s"] = "小广场|e,n,s,w",
      },
    },

    ["长台关|n,ne,s,w"] = {
      name = "长台关",
      exits = {
        ["s"] = "官道|n,nw,s",
      },
    },

    ["飘带岭|ne,se"] = {
      name = "飘带岭",
      exits = {
        ["ne"] = "贤首山南麓|e,ne,sd,sw",
        ["se"] = "贤隐寺|enter,eu,nu,nw",
      },
    },

    ["马家|enter,eu"] = {
      name = "马家",
      exits = {
        ["eu"] = "鸡公山|n,sd,u,wd",
      },
    },

    ["鸡公山|n,sd,u,wd"] = {
      name = "鸡公山",
      exits = {
        ["n"]  = "南门|e,n,s,w",
        ["sd"] = "鸡公山下|nu,se,sw,wu",
        ["u"]  = "报晓峰|d",
        ["wd"] = "马家|enter,eu",
      },
    },

    ["鸡公山下|nu,se,sw,wu"] = {
      name = "鸡公山下",
      exits = {
        ["nu"] = "鸡公山|n,sd,u,wd",
        ["se"] = "小池镇|ne,nw,s,w",
        ["sw"] = "武胜关|ne,sw",
        ["wu"] = "山间小道|ed,w",
      },
    },

    ["鹿涧|ne,sw,wu"] = {
      name = "鹿涧",
      exits = {
        ["ne"] = "贤岭|sw,wd",
        ["sw"] = "贤首山南麓|e,ne,sd,sw",
        ["wu"] = "丈人石|ed",
      },
    },
  },
}

mapper.maps["xinyang"].mapAliases = {

  -- ===== 原点（城内中心：小广场）=====
  ["小广场"] = "origin",

  -- ===== 城门 / 城市节点 =====
  ["东门"] = "dm",
  ["北门"] = "bm",
  ["南门"] = "nm",
  ["西门"] = "xm",

  ["东市"] = "ds",
  ["北市"] = "bs",
  ["南市"] = "ns",
  ["西市"] = "xs",

  -- ===== 官道（重名别名）=====
  ["官道1"] = "gd1",
  ["官道2"] = "gd2",
  ["官道3"] = "gd3",

  -- ===== 主要地点 =====
  ["镇淮桥"]     = "zhq",
  ["石板路"]     = "sbl",
  ["城东小路"]   = "cdxl",
  ["界牌集"]     = "jpj",
  ["长台关"]     = "ctg",
  ["林间道"]     = "ljd",

  ["钱庄"]       = "qz",
  ["当铺"]       = "dp",
  ["中原马车行"] = "mch",

  -- ===== 宗教 / 建筑 =====
  ["庙前"]     = "mp",
  ["破庙之中"] = "pmzz",
  ["贤隐寺"]   = "xys",
  ["大殿"]     = "dd",
  ["莲花峰"]   = "lhf",

  -- ===== 庭院 / 房舍 =====
  ["议事堂"] = "yst",
  ["后院"]   = "hy",
  ["花园"]   = "hy2",
  ["柴房"]   = "cf",

  ["大门"] = "dm",
  ["大门2"] = "dm2",

  ["破屋"] = "pw",
  ["破屋2"] = "pw2",

  -- ===== 山区 / 关隘 =====
  ["鸡公山"]     = "jgs",
  ["鸡公山下"]   = "jgsx",
  ["报晓峰"]     = "bxf",
  ["马家"]       = "mj",
  ["小池镇"]     = "xcz",
  ["武胜关"]     = "wsg",
  ["孝感"]       = "xg",
  ["山间小道"]   = "sjxd",

  ["贤首山北麓"] = "xssbl",
  ["贤首山南麓"] = "xssnl",
  ["山路"]       = "sl",
  ["贤岭"]       = "xl",
  ["鹿涧"]       = "lj",
  ["丈人石"]     = "zrs",

  ["飘带岭"] = "pdl",
  ["金刚台"] = "jgt",
  ["汤泉池"] = "tqc",
  ["金寨县"] = "jzx",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>濠州 - haozhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["haozhou"] = {
  region = {
    key  = "haozhou",
    name = "濠州府",
  },

  mapNodes = {
  
  ["淮河边|n,sw"] = {
  name = "淮河边",
  exits = {
    ["n"] = "淮河边|ne,s,se",
    ["sw"] = "淮河边|e,ne,s",
  },
},

    ["淮河边|e,ne,s"] = {
      name = "淮河边",
      exits = {
        ["e"] = "西门|e,n,s,w",
        ["ne"] = "淮河边|n,sw",
      },
    },
      
["通商客栈|nw"] = {
  name = "通商客栈",
  exits = {
    ["nw"] = "淮河边|ne,s,se",
  },
},  
["淮河边|ne,s,se"] = {
  name = "淮河边",
  exits = {
    ["s"] = "淮河边|n,sw",
    ["se"] = "通商客栈|nw",
  },
},  

    ["东大街|e,s,w"] = {
      name = "东大街",
      exits = {
        ["e"] = "东门|n,s,w",
        ["s"] = "总督府|n",
        ["w"] = "广场|e,n,s,w",
      },
    },

    ["东门|n,s,w"] = {
      name = "东门",
      exits = {
        ["w"] = "东大街|e,s,w",
      },
    },

    ["临淮阁|w"] = {
      name = "临淮阁",
      exits = {
        ["w"] = "北门|e,n,s,se,w",
      },
    },

    ["五湖门|e"] = {
      name = "五湖门",
      exits = {
        ["e"] = "南大街|e,n,s,w",
      },
    },

    ["北大街|e,n,s,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "集市|w",
        ["n"] = "北门|e,n,s,se,w",
        ["s"] = "广场|e,n,s,w",
        ["w"] = "当铺|e",
      },
    },

    ["北门|e,n,s,se,w"] = {
      name = "北门",
      exits = {
        ["e"] = "临淮阁|w",
        ["n"] = "淮河南岸|e,s,sw",
        ["s"] = "北大街|e,n,s,w",
      },
    },

    ["南大街|e,n,s,w"] = {
      name = "南大街",
      exits = {
        ["e"] = "富绅家|w",
        ["n"] = "广场|e,n,s,w",
        ["s"] = "南门|e,n,nw,se,w",
        ["w"] = "五湖门|e",
      },
    },

    ["南门|e,n,nw,se,w"] = {
      name = "南门",
      exits = {
        ["n"]  = "南大街|e,n,s,w",
        ["se"] = "官道|nw,s",
        ["w"]  = "官道|e,sw",
      },
    },

    -- ===== 官道（重名处理）=====
    ["官道|e,sw"] = {
      name = "官道1",
      exits = {
        ["e"]  = "南门|e,n,nw,se,w",
        ["sw"] = "淮南|ne,se,wu",
      },
    },

    ["官道|n,s"] = {
      name = "官道2",
      exits = {
        ["n"] = "官道|nw,s",
        ["s"] = "界牌集|e,n,nw,s,w",
      },
    },

    ["官道|nw,s"] = {
      name = "官道3",
      exits = {
        ["nw"] = "南门|e,n,nw,se,w",
        ["s"]  = "官道|n,s",
      },
    },

    ["官道|nw,se,wu"] = {
      name = "官道4",
      exits = {
        ["nw"] = "淮南|ne,se,wu",
        ["se"] = "界牌集|e,n,nw,s,w",
        ["wu"] = "舜耕山|ed",
      },
    },

    ["富绅家|w"] = {
      name = "富绅家",
      exits = {
        ["w"] = "南大街|e,n,s,w",
      },
    },

    ["广场|e,n,s,w"] = {
      name = "广场",
      exits = {
        ["e"] = "东大街|e,s,w",
        ["n"] = "北大街|e,n,s,w",
        ["s"] = "南大街|e,n,s,w",
        ["w"] = "西门|e,n,s,w",
      },
    },

    ["当铺|e"] = {
      name = "当铺",
      exits = {
        ["e"] = "北大街|e,n,s,w",
      },
    },

    ["总督府|n"] = {
      name = "总督府",
      exits = {
        ["n"] = "东大街|e,s,w",
      },
    },

    ["淮南|ne,se,wu"] = {
      name = "淮南",
      exits = {
        ["ne"] = "官道|e,sw",
        ["se"] = "官道|nw,se,wu",
        ["wu"] = "飞虎峪|ed,nd",
      },
    },

    -- ===== 淮河南岸（重名处理）=====
    ["淮河南岸|e,s,sw"] = {
      name = "淮河南岸1",
      exits = {
        ["s"] = "北门|e,n,s,se,w",
      },
    },

    ["淮河南岸|ne,su,sw"] = {
      name = "淮河南岸2",
      exits = {
        ["su"] = "飞虎峪|ed,nd",
      },
    },

    ["界牌集|e,n,nw,s,w"] = {
      name = "界牌集",
      exits = {
        ["n"]  = "官道|n,s",
        ["nw"] = "官道|nw,se,wu",
      },
    },

    ["舜耕山|ed"] = {
      name = "舜耕山",
      exits = {
        ["ed"] = "官道|nw,se,wu",
      },
    },

    ["西门|e,n,s,w"] = {
      name = "西门",
      exits = {
        ["e"] = "广场|e,n,s,w",
        ["w"] = "淮河边|e,ne,s",
      },
    },

    ["集市|w"] = {
      name = "集市",
      exits = {
        ["w"] = "北大街|e,n,s,w",
      },
    },

    ["飞虎峪|ed,nd"] = {
      name = "飞虎峪",
      exits = {
        ["ed"] = "淮南|ne,se,wu",
        ["nd"] = "淮河南岸|ne,su,sw",
      },
    },
  },
}

mapper.maps["haozhou"].mapAliases = {

  -- ===== 原点（城内中心：广场）=====
  ["广场"] = "origin",

  -- ===== 城门 / 关隘 =====
  ["东门"] = "dm",
  ["北门"] = "bm",
  ["南门"] = "nm",
  ["西门"] = "xm",
  ["五湖门"] = "whm",

  -- ===== 主街 / 交通 =====
  ["东大街"] = "ddj",
  ["北大街"] = "bdj",
  ["南大街"] = "ndj",

  -- ===== 官道（重名别名）=====
  ["官道1"] = "gd1",
  ["官道2"] = "gd2",
  ["官道3"] = "gd3",
  ["官道4"] = "gd4",

  -- ===== 河岸（重名别名）=====
  ["淮河南岸1"] = "hhna1",
  ["淮河南岸2"] = "hhna2",
  ["淮河边"]   = "hhb",
  ["通商客栈"]   = "tskz",

  -- ===== 城内设施 =====
  ["集市"]   = "js",
  ["当铺"]   = "dp",
  ["总督府"] = "zdf",
  ["富绅家"] = "fsj",
  ["临淮阁"] = "lhg",

  -- ===== 郊外 / 地名 =====
  ["界牌集"] = "jpj",
  ["淮南"]   = "hn",
  ["飞虎峪"] = "fhy",
  ["舜耕山"] = "sgs",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>汉口镇 - hankou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["hankou"] = {
  region = {
    key  = "hankou",
    name = "汉口镇",
  },

  mapNodes = {

    ["东城门|e,n,s,w"] = {
      name = "东城门",
      exits = {
        ["e"] = "菊花会|eu,w",
        ["w"] = "东巷|e,n,w",
      },
    },

    ["东巷|e,n,w"] = {
      name = "东巷",
      exits = {
        ["e"] = "东城门|e,n,s,w",
        ["n"] = "县衙|s,w",
        ["w"] = "市集|e,n,s,w",
      },
    },

    ["军营|e"] = {
      name = "军营",
      exits = {
        ["e"] = "山路|e,nu,s,w",
      },
    },

    ["北城门|e,n,s,w"] = {
      name = "北城门",
      exits = {
        ["n"] = "山路|e,nu,s,w",
        ["s"] = "北大街|e,n,s,w",
      },
    },

    ["北大街|e,n,s,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "县衙|s,w",
        ["n"] = "北城门|e,n,s,w",
        ["s"] = "市集|e,n,s,w",
        ["w"] = "食肆|e,s",
      },
    },

    ["南城门|n,ne,nw,s"] = {
      name = "南城门",
      exits = {
        ["n"]  = "晴川阁|n,s,u",
        ["nw"] = "城墙角|n,se",
        ["s"]  = "渡口|n,ne,sw",
      },
    },

    ["县衙|s,w"] = {
      name = "县衙",
      exits = {
        ["s"] = "东巷|e,n,w",
        ["w"] = "北大街|e,n,s,w",
      },
    },

    ["双峰山|nd,sd"] = {
      name = "双峰山",
      exits = {
        ["sd"] = "山路|e,nu,s,w",
      },
    },

    ["城墙角|n,se"] = {
      name = "城墙角",
      exits = {
        ["se"] = "南城门|n,ne,nw,s",
      },
    },

    ["客栈|enter,n,s"] = {
      name = "客栈",
      exits = {
        ["enter"] = "里间|out",
        ["n"]     = "西大街|e,n,s,w",
        ["s"]     = "晴川阁|n,s,u",
      },
    },

    ["小池镇|ne,nw,s,w"] = {
      name = "小池镇",
      exits = {
        ["w"] = "小路|e,wd",
      },
    },

    ["小路|e,wd"] = {
      name = "小路",
      exits = {
        ["e"]  = "小池镇|ne,nw,s,w",
        ["wd"] = "菊花会|eu,w",
      },
    },

    ["山路|e,nu,s,w"] = {
      name = "山路",
      exits = {
        ["e"]  = "盘龙城|w",
        ["nu"] = "双峰山|nd,sd",
        ["s"]  = "北城门|e,n,s,w",
        ["w"]  = "军营|e",
      },
    },

    ["市集|e,n,s,w"] = {
      name = "市集",
      exits = {
        ["e"] = "东巷|e,n,w",
        ["n"] = "北大街|e,n,s,w",
        ["s"] = "钱庄|n",
        ["w"] = "西大街|e,n,s,w",
      },
    },

    ["晴川阁|n,s,u"] = {
      name = "晴川阁",
      exits = {
        ["n"] = "客栈|enter,n,s",
        ["s"] = "南城门|n,ne,nw,s",
        ["u"] = "晴川阁二楼|d",
      },
    },

    ["晴川阁二楼|d"] = {
      name = "晴川阁二楼",
      exits = {
        ["d"] = "晴川阁|n,s,u",
      },
    },

    -- ===== 汉水东岸（重名处理）=====
    ["汉水东岸|e,nw,s"] = {
      name = "汉水东岸1",
      exits = {
        ["e"]  = "西城门|e,n,s,w",
        ["nw"] = "汉水东岸|n,se",
        ["s"]  = "汉水渡口|n,s",
      },
    },

    ["汉水东岸|n,se"] = {
      name = "汉水东岸2",
      exits = {
        ["n"]  = "鸡鸣渡东|s",
        ["se"] = "汉水东岸|e,nw,s",
      },
    },

    ["汉水渡口|n,s"] = {
      name = "汉水渡口",
      exits = {
        ["n"] = "汉水东岸|e,nw,s",
      },
    },

    ["渡口|n,ne,sw"] = {
      name = "渡口",
      exits = {
        ["n"] = "南城门|n,ne,nw,s",
      },
    },

    ["盘龙城|w"] = {
      name = "盘龙城",
      exits = {
        ["w"] = "山路|e,nu,s,w",
      },
    },

    ["菊花会|eu,w"] = {
      name = "菊花会",
      exits = {
        ["eu"] = "小路|e,wd",
        ["w"]  = "东城门|e,n,s,w",
      },
    },

    ["西城门|e,n,s,w"] = {
      name = "西城门",
      exits = {
        ["e"] = "西大街|e,n,s,w",
        ["w"] = "汉水东岸|e,nw,s",
      },
    },

    ["西大街|e,n,s,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "市集|e,n,s,w",
        ["n"] = "食肆|e,s",
        ["s"] = "客栈|enter,n,s",
        ["w"] = "西城门|e,n,s,w",
      },
    },

    ["里间|out"] = {
      name = "里间",
      exits = {
        ["out"] = "客栈|enter,n,s",
      },
    },

    ["钱庄|n"] = {
      name = "钱庄",
      exits = {
        ["n"] = "市集|e,n,s,w",
      },
    },

    ["食肆|e,s"] = {
      name = "食肆",
      exits = {
        ["e"] = "北大街|e,n,s,w",
        ["s"] = "西大街|e,n,s,w",
      },
    },

    ["鸡鸣渡东|s"] = {
      name = "鸡鸣渡东",
      exits = {
        ["s"] = "汉水东岸|n,se",
      },
    },
  },
}

mapper.maps["hankou"].mapAliases = {

  -- ===== 原点（镇内枢纽：市集）=====
  ["市集"] = "origin",

  -- ===== 城门 =====
  ["东城门"] = "dcm",
  ["北城门"] = "bcm",
  ["南城门"] = "ncm",
  ["西城门"] = "xcm",

  -- ===== 主街巷 / 官署 =====
  ["东巷"] = "dx",
  ["北大街"] = "bdj",
  ["西大街"] = "xdj",
  ["县衙"] = "xy",

  -- ===== 旅店 / 饮食 =====
  ["客栈"] = "kz",
  ["里间"] = "lj",
  ["食肆"] = "ss",
  ["钱庄"] = "qz",

  -- ===== 景点 / 场所 =====
  ["晴川阁"] = "qcg",
  ["晴川阁二楼"] = "qcgel",
  ["城墙角"] = "cqj",

  -- ===== 郊外 / 道路 =====
  ["山路"] = "sl",
  ["军营"] = "jy",
  ["双峰山"] = "sfs",
  ["盘龙城"] = "plc",
  ["菊花会"] = "jhh",
  ["小路"] = "xl",
  ["小池镇"] = "xcz",

  -- ===== 水路（重名别名）=====
  ["汉水东岸1"] = "hsda1",
  ["汉水东岸2"] = "hsda2",
  ["汉水渡口"] = "hsdk",
  ["渡口"] = "dk",
  ["鸡鸣渡东"] = "jmdd",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>荆州 - jingzhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["jingzhou"] = {
  region = {
    key  = "jingzhou",
    name = "荆州",
  },

  mapNodes = {

    ["东门|e,n,s,w"] = {
      name = "东门",
      exits = {
        ["e"] = "城东小路|s,w",
        ["w"] = "东大街1|e,nu,s,w",
      },
    },

    ["九眼井|sd"] = {
      name = "九眼井",
      exits = {
        ["sd"] = "郢都|e,nu,w",
      },
    },

    ["九龙桥|e,wd"] = {
      name = "九龙桥",
      exits = {
        ["e"]  = "郢都|e,nu,w",
        ["wd"] = "城东小路|eu,n",
      },
    },

    -- ===== 城东小路（重名处理）=====
    ["城东小路|eu,n"] = {
      name = "城东小路1",
      exits = {
        ["eu"] = "九龙桥|e,wd",
        ["n"]  = "城东小路|s,w",
      },
    },

    ["城东小路|s,w"] = {
      name = "城东小路2",
      exits = {
        ["s"] = "城东小路|eu,n",
        ["w"] = "东门|e,n,s,w",
      },
    },

    ["瓦子湖畔|ne,w"] = {
      name = "瓦子湖畔",
      exits = {
        ["ne"] = "竟陵|e,ne,sw",
        ["w"]  = "郢都|e,nu,w",
      },
    },

    ["竟陵|e,ne,sw"] = {
      name = "竟陵",
      exits = {
        ["sw"] = "瓦子湖畔|ne,w",
      },
    },

    ["郢都|e,nu,w"] = {
      name = "郢都",
      exits = {
        ["e"]  = "瓦子湖畔|ne,w",
        ["nu"] = "九眼井|sd",
        ["w"]  = "九龙桥|e,wd",
      },
    },

    -- ===== 南大街（重名处理）=====
    ["南大街|e,n,s,w"] = {
      name = "南大街1",
      exits = {
        ["e"] = "关庙|s,w",
        ["n"] = "文庙|s,w",
        ["s"] = "南大街|e,n,w",
        ["w"] = "城西小巷|e,ne,sw,wu",
      },
    },

    ["南大街|e,n,w"] = {
      name = "南大街2",
      exits = {
        ["e"] = "南大街1|e,n,s,w",
        ["n"] = "南大街|e,n,s,w",
        ["w"] = "城西小巷|e,ne",
      },
    },

    ["南大街1|e,n,s,w"] = {
      name = "南大街3",
      exits = {
        ["e"] = "南大街1|e,n,w",
        ["n"] = "关庙|s,w",
        ["s"] = "南门|e,n,s,w",
        ["w"] = "南大街|e,n,w",
      },
    },

    ["南大街1|e,n,w"] = {
      name = "南大街4",
      exits = {
        ["e"] = "南大街|e,n,su,w",
        ["n"] = "药铺|s",
        ["w"] = "南大街1|e,n,s,w",
      },
    },

    ["南大街|e,n,su,w"] = {
      name = "南大街5",
      exits = {
        ["e"]  = "南大街|n,w",
        ["n"]  = "知府大门|n,s",
        ["su"] = "仲宣楼|nd",
        ["w"]  = "南大街1|e,n,w",
      },
    },

    ["南大街|n,w"] = {
      name = "南大街6",
      exits = {
        ["n"] = "陋巷|n,s",
        ["w"] = "南大街|e,n,su,w",
      },
    },

    ["南门|e,n,s,w"] = {
      name = "南门",
      exits = {
        ["n"] = "南大街1|e,n,s,w",
        ["s"] = "官道|n,se,sw",
      },
    },

    ["官道|n,se,sw"] = {
      name = "官道",
      exits = {
        ["n"]  = "南门|e,n,s,w",
        ["se"] = "华容道|nw,s",
        ["sw"] = "码头|ne",
      },
    },

    ["华容道|nw,s"] = {
      name = "华容道",
      exits = {
        ["nw"] = "官道|n,se,sw",
      },
    },

    ["码头|ne"] = {
      name = "码头",
      exits = {
        ["ne"] = "官道|n,se,sw",
      },
    },

    -- ===== 其余节点（保持原顺序）=====
    -- ===== 东大街（重名处理）=====
    ["东大街|e,nu,s,w"] = {
      name = "东大街1",
      exits = {
        ["e"]  = "东大街1|e,nu,s,w",
        ["nu"] = "雄楚楼|sd,wd",
        ["s"]  = "后门|n,s",
        ["w"]  = "东市|e,n,w",
      },
    },

    ["东大街1|e,nu,s,w"] = {
      name = "东大街2",
      exits = {
        ["e"]  = "东门|e,n,s,w",
        ["nu"] = "明月楼|sd",
        ["s"]  = "碑苑|n,s",
        ["w"]  = "东大街|e,nu,s,w",
      },
    },

    ["明月楼|sd"] = {
      name = "明月楼",
      exits = {
        ["sd"] = "东大街1|e,nu,s,w",
      },
    },

    -- ===== 三义街（重名处理）=====
    ["三义街|ed,n,s,w"] = {
      name = "三义街1",
      exits = {
        ["ed"] = "洗马池|nu,su,wu",
        ["n"]  = "大北门|e,ne,s,w",
        ["s"]  = "三义街|e,n,s",
        ["w"]  = "湖畔小路|e,nw,s",
      },
    },

    ["湖畔小路|e,nw,s"] = {
      name = "湖畔小路",
      exits = {
        ["e"] = "三义街|ed,n,s,w",
      },
    },

    ["三义街|e,n,s"] = {
      name = "三义街2",
      exits = {
        ["e"] = "北大街|e,nd,s,w",
        ["n"] = "三义街|ed,n,s,w",
        ["s"] = "三义街|n,s",
      },
    },

    ["三义街|n,s"] = {
      name = "三义街3",
      exits = {
        ["n"] = "三义街|e,n,s",
        ["s"] = "市集|n,s,w",
      },
    },

    ["三义街1|e,n,s"] = {
      name = "三义街4",
      exits = {
        ["e"] = "小巷|e,n,w",
        ["n"] = "市集|n,s,w",
        ["s"] = "三义街|e,n,sw",
      },
    },

    ["三义街|e,n,sw"] = {
      name = "三义街5",
      exits = {
        ["e"]  = "文庙|s,w",
        ["n"]  = "三义街1|e,n,s",
        ["sw"] = "城西小巷|e,ne,sw,wu",
      },
    },

    ["东市|e,n,w"] = {
      name = "东市",
      exits = {
        ["e"] = "东大街|e,nu,s,w",
        ["n"] = "小北大街|eu,n,s",
        ["w"] = "小巷|e,n,s,w",
      },
    },

    ["仲宣楼|nd"] = {
      name = "仲宣楼",
      exits = {
        ["nd"] = "南大街|e,n,su,w",
      },
    },

    ["关庙|s,w"] = {
      name = "关庙",
      exits = {
        ["s"] = "南大街1|e,n,s,w",
        ["w"] = "南大街|e,n,s,w",
      },
    },

    ["出城小路|ne,sd"] = {
      name = "出城小路",
      exits = {
        ["ne"] = "西门|e,n,s,sw",
      },
    },

    -- ===== 北大街（重名处理）=====
    ["北大街|e,n,s,w"] = {
      name = "北大街1",
      exits = {
        ["e"] = "小北大街|n,s,w",
        ["n"] = "玄妙观|s,se",
        ["s"] = "客栈|enter,n",
        ["w"] = "北大街|e,nd,s,w",
      },
    },

    ["北大街|e,nd,s,w"] = {
      name = "北大街2",
      exits = {
        ["e"]  = "北大街|e,n,s,w",
        ["nd"] = "洗马池|nu,su,wu",
        ["s"]  = "钱庄|n",
        ["w"]  = "三义街|e,n,s",
      },
    },

    ["卸甲山|ed"] = {
      name = "卸甲山",
      exits = {
        ["ed"] = "城西小巷|e,ne,sw,wu",
      },
    },

    ["后门|n,s"] = {
      name = "后门",
      exits = {
        ["n"] = "东大街|e,nu,s,w",
        ["s"] = "正厅|e,n,s,w",
      },
    },

    ["回廊|e,w"] = {
      name = "回廊",
      exits = {
        ["e"] = "走廊|e,nw,w",
        ["w"] = "寝室|e",
      },
    },

    -- ===== 城西小巷（重名处理）=====
    ["城西小巷|e,ne"] = {
      name = "城西小巷1",
      exits = {
        ["e"]  = "南大街|e,n,w",
        ["ne"] = "城西小巷|e,ne,sw,wu",
      },
    },

    ["城西小巷|e,ne,sw,wu"] = {
      name = "城西小巷2",
      exits = {
        ["e"]  = "南大街|e,n,s,w",
        ["ne"] = "三义街|e,n,sw",
        ["sw"] = "城西小巷|e,ne",
        ["wu"] = "卸甲山|ed",
      },
    },

    ["大北门|e,ne,s,w"] = {
      name = "大北门",
      exits = {
        ["ne"] = "官道|eu,nw,sw",
        ["s"]  = "三义街|ed,n,s,w",
      },
    },

    ["大通铺|out"] = {
      name = "大通铺",
      exits = {
        ["out"] = "客栈|enter,n",
      },
    },

    -- ===== 官道（重名处理）=====
    ["官道|eu,nw,sw"] = {
      name = "官道1",
      exits = {
        ["eu"] = "官道|se,wd",
        ["nw"] = "荆门|n,se",
        ["sw"] = "大北门|e,ne,s,w",
      },
    },

    ["官道|se,wd"] = {
      name = "官道2",
      exits = {
        ["se"] = "小北门|nw,s,se,w",
        ["wd"] = "官道|eu,nw,sw",
      },
    },

    ["客栈|enter,n"] = {
      name = "客栈",
      exits = {
        ["enter"] = "大通铺|out",
        ["n"]     = "北大街|e,n,s,w",
      },
    },

    ["寝室|e"] = {
      name = "寝室",
      exits = {
        ["e"] = "回廊|e,w",
      },
    },

    -- ===== 小北大街（重名处理）=====
    ["小北大街|eu,n,s"] = {
      name = "小北大街1",
      exits = {
        ["eu"] = "雄楚楼|sd,wd",
        ["n"]  = "小北大街|n,s,w",
        ["s"]  = "东市|e,n,w",
      },
    },

    ["小北大街|n,nw,s"] = {
      name = "小北大街2",
      exits = {
        ["n"]  = "小北门|nw,s,se,w",
        ["nw"] = "玄妙观|s,se",
        ["s"]  = "小北大街|n,s,w",
      },
    },

    ["小北大街|n,s,w"] = {
      name = "小北大街3",
      exits = {
        ["n"] = "小北大街|n,nw,s",
        ["s"] = "小北大街|eu,n,s",
        ["w"] = "北大街|e,n,s,w",
      },
    },

    ["小北门|nw,s,se,w"] = {
      name = "小北门",
      exits = {
        ["nw"] = "官道|se,wd",
        ["s"]  = "小北大街|n,nw,s",
      },
    },

    -- ===== 小巷（重名处理）=====
    ["小巷|e,n,s,w"] = {
      name = "小巷1",
      exits = {
        ["e"] = "东市|e,n,w",
        ["n"] = "杂货铺|s",
        ["s"] = "小门|n,se",
        ["w"] = "小巷|e,n,w",
      },
    },

    ["小巷|e,n,w"] = {
      name = "小巷2",
      exits = {
        ["e"] = "小巷|e,n,s,w",
        ["n"] = "当铺|s",
        ["w"] = "三义街1|e,n,s",
      },
    },

    ["小门|n,se"] = {
      name = "小门",
      exits = {
        ["n"]  = "小巷|e,n,s,w",
        ["se"] = "走廊|e,nw,w",
      },
    },

    ["市集|n,s,w"] = {
      name = "市集",
      exits = {
        ["n"] = "三义街|n,s",
        ["s"] = "三义街1|e,n,s",
        ["w"] = "西大街|e,w",
      },
    },

    ["当铺|s"] = {
      name = "当铺",
      exits = {
        ["s"] = "小巷|e,n,w",
      },
    },

    ["文庙|s,w"] = {
      name = "文庙",
      exits = {
        ["s"] = "南大街|e,n,s,w",
        ["w"] = "三义街|e,n,sw",
      },
    },

    ["杂货铺|s"] = {
      name = "杂货铺",
      exits = {
        ["s"] = "小巷|e,n,s,w",
      },
    },

    ["正厅|e,n,s,w"] = {
      name = "正厅",
      exits = {
        ["e"] = "花园|w",
        ["n"] = "后门|n,s",
        ["s"] = "知府大门|n,s",
        ["w"] = "走廊|e,nw,w",
      },
    },

    ["洗马池|nu,su,wu"] = {
      name = "洗马池",
      exits = {
        ["nu"] = "藏兵洞|sd",
        ["su"] = "北大街|e,nd,s,w",
        ["wu"] = "三义街|ed,n,s,w",
      },
    },

    ["玄妙观|s,se"] = {
      name = "玄妙观",
      exits = {
        ["s"]  = "北大街|e,n,s,w",
        ["se"] = "小北大街|n,nw,s",
      },
    },

    ["知府大门|n,s"] = {
      name = "知府大门",
      exits = {
        ["n"] = "正厅|e,n,s,w",
        ["s"] = "南大街|e,n,su,w",
      },
    },

    ["碑苑|n,s"] = {
      name = "碑苑",
      exits = {
        ["n"] = "东大街1|e,nu,s,w",
        ["s"] = "陋巷|n,s",
      },
    },

    ["花园|w"] = {
      name = "花园",
      exits = {
        ["w"] = "正厅|e,n,s,w",
      },
    },

    ["荆门|n,se"] = {
      name = "荆门",
      exits = {
        ["se"] = "官道|eu,nw,sw",
      },
    },

    ["药铺|s"] = {
      name = "药铺",
      exits = {
        ["s"] = "南大街1|e,n,w",
      },
    },

    ["藏兵洞|sd"] = {
      name = "藏兵洞",
      exits = {
        ["sd"] = "洗马池|nu,su,wu",
      },
    },

    -- ===== 西大街（重名处理）=====
    ["西大街|e,n,w"] = {
      name = "西大街1",
      exits = {
        ["e"] = "西大街|e,w",
        ["w"] = "西门|e,n,s,sw",
      },
    },

    ["西大街|e,w"] = {
      name = "西大街2",
      exits = {
        ["e"] = "市集|n,s,w",
        ["w"] = "西大街|e,n,w",
      },
    },

    ["西门|e,n,s,sw"] = {
      name = "西门",
      exits = {
        ["e"]  = "西大街|e,n,w",
        ["sw"] = "出城小路|ne,sd",
      },
    },

    ["走廊|e,nw,w"] = {
      name = "走廊",
      exits = {
        ["e"]  = "正厅|e,n,s,w",
        ["nw"] = "小门|n,se",
        ["w"]  = "回廊|e,w",
      },
    },

    ["钱庄|n"] = {
      name = "钱庄",
      exits = {
        ["n"] = "北大街|e,nd,s,w",
      },
    },

    ["陋巷|n,s"] = {
      name = "陋巷",
      exits = {
        ["n"] = "碑苑|n,s",
        ["s"] = "南大街|n,w",
      },
    },

    ["雄楚楼|sd,wd"] = {
      name = "雄楚楼",
      exits = {
        ["sd"] = "东大街|e,nu,s,w",
        ["wd"] = "小北大街|eu,n,s",
      },
    },
  },
}

mapper.maps["jingzhou"].mapAliases = {

  -- ===== 原点 =====
  ["市集"] = "origin",

  -- ===== 城外/郢都线 =====
  ["郢都"]   = "yd",
  ["九龙桥"] = "jlq",
  ["九眼井"] = "jyj",
  ["瓦子湖畔"] = "wzlhp",
  ["竟陵"]   = "jl",
  ["城东小路1"] = "cdxl1",
  ["城东小路2"] = "cdxl2",
  ["城东小路"]  = "cdxl", -- 默认（城东小路1）

  -- ===== 南线 =====
  ["南门"] = "nm",
  ["南大街1"] = "ndj1",
  ["南大街2"] = "ndj2",
  ["南大街3"] = "ndj3",
  ["南大街4"] = "ndj4",
  ["南大街5"] = "ndj5",
  ["南大街6"] = "ndj6",
  ["南大街"]  = "ndj", -- 默认（南大街1）

  ["关庙"] = "gm",
  ["文庙"] = "wm",
  ["知府大门"] = "zfdm",
  ["药铺"] = "yp",
  ["仲宣楼"] = "zxl",

  ["官道"]  = "gd",   -- 默认（官道1）
  ["官道1"] = "gd1",
  ["官道2"] = "gd2",
  ["华容道"] = "hrd",
  ["码头"]   = "mt",

  -- ===== 东线 =====
  ["东门"]   = "dm",
  ["东大街"]  = "ddj", -- 默认（东大街1）
  ["东大街1"] = "ddj1",
  ["东大街2"] = "ddj2",
  ["东市"]   = "ds",
  ["明月楼"] = "myl",
  ["雄楚楼"] = "xcl",
  ["后门"]   = "hm",
  ["碑苑"]   = "by",
  ["陋巷"]   = "lx",

  -- ===== 北线 =====
  ["大北门"] = "dbm",
  ["北大街"]  = "bdj", -- 默认（北大街1）
  ["北大街1"] = "bdj1",
  ["北大街2"] = "bdj2",
  ["小北门"] = "xbm",
  ["小北大街"]  = "xbdj", -- 默认（小北大街3）
  ["小北大街1"] = "xbdj1",
  ["小北大街2"] = "xbdj2",
  ["小北大街3"] = "xbdj3",
  ["玄妙观"] = "xmg",

  -- ===== 三义街片区 =====
  ["三义街"]  = "syj", -- 默认（三义街3，通往市集）
  ["三义街1"] = "syj1",
  ["三义街2"] = "syj2",
  ["三义街3"] = "syj",
  ["三义街4"] = "syj4",
  ["三义街5"] = "syj5",
  ["湖畔小路"] = "hpxl",
  ["城西小巷"]  = "cxx", -- 默认（城西小巷2）
  ["城西小巷1"] = "cxx1",
  ["城西小巷2"] = "cxx2",
  ["卸甲山"] = "xjs",

  -- ===== 西线 / 内宅 =====
  ["西门"] = "xm",
  ["西大街"]  = "xdj", -- 默认（西大街2）
  ["西大街1"] = "xdj1",
  ["西大街2"] = "xdj2",
  ["出城小路"] = "ccxl",

  ["客栈"] = "kz",
  ["大通铺"] = "dtp",
  ["钱庄"] = "qz",
  ["当铺"] = "dp",
  ["小门"] = "xm2",
  ["小巷"]  = "xx", -- 默认（小巷1）
  ["小巷1"] = "xx1",
  ["小巷2"] = "xx2",
  ["杂货铺"] = "zhp",

  ["正厅"] = "zt",
  ["花园"] = "hy",
  ["走廊"] = "zl",
  ["回廊"] = "hl",
  ["寝室"] = "qs",

  ["洗马池"] = "xmc",
  ["藏兵洞"] = "cbd",
  ["荆门"] = "jm",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>南阳 - nanyang</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["nanyang"] = {
  region = {
    key  = "nanyang",
    name = "南阳",
  },
  mapNodes = {

    ["福胜寺塔|e"] = {
      name = "福胜寺塔",
      exits = {
        ["e"] = "邓州|e,ne,nw,w",
      },
    },

    ["邓州|e,ne,nw,w"] = {
      name = "邓州",
      exits = {
        ["e"]  = "官道|ne,w",
        ["nw"] = "九龙镇|e,se,w",
        ["w"]  = "福胜寺塔|e",
      },
    },

    ["七里河畔|nw,s"] = {
      name = "七里河畔",
      exits = {
        ["nw"] = "灵山坡|ne,se,sw",
        ["s"]  = "土路|e,n",
      },
    },

    ["三岔口|ne,s,sw"] = {
      name = "三岔口",
      exits = {
        ["ne"] = "官道|n,se,sw",
        ["s"]  = "新野|n,sw",
        ["sw"] = "官道|ne,w",
      },
    },

    ["东门|eu,w"] = {
      name = "东门",
      exits = {
        ["eu"] = "石拱桥|ed,wd",
        ["w"]  = "迎宾楼|e,s,u,w",
      },
    },

    ["九龙镇|e,se,w"] = {
      name = "九龙镇",
      exits = {
        ["w"]  = "土路|e,n",
        ["se"] = "邓州|e,ne,nw,w",
      },
    },

    ["傲峰山|nd"] = {
      name = "傲峰山",
      exits = {
        ["nd"] = "土路|e,nw,su",
      },
    },

    ["内乡|ne,nw,se,sw"] = {
      name = "内乡",
      exits = {
        ["ne"] = "红堰河|ne,sw",
        ["nw"] = "西峡|nu,nw,se",
        ["se"] = "土路|e,nw,su",
        ["sw"] = "灵山坡|ne,se,sw",
      },
    },

    ["北大街|e,n,s,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "钱庄|w",
        ["n"] = "北门|n,nw,s,w",
        ["s"] = "集市|e,n,s,w",
        ["w"] = "当铺|e",
      },
    },

    ["北门|n,nw,s,w"] = {
      name = "北门",
      exits = {
        ["n"]  = "黄草山|e,nw,s",
        ["nw"] = "土路|se,w",
        ["s"]  = "北大街|e,n,s,w",
        ["w"]  = "西坡|e,n,sw",
      },
    },

    ["医馆|n"] = {
      name = "医馆",
      exits = {
        ["n"] = "迎宾楼|e,s,u,w",
      },
    },
["蔡家|w"] = {
  name = "蔡家",
  exits = {
    ["leap west"] = "南大街|e,n,s,w",
  },
},
    ["南大街|e,n,s,w"] = {
      name = "南大街",
      exits = {
        ["n"] = "集市|e,n,s,w",
        ["s"] = "南门|n,s,sw",
        ["w"] = "南阳府衙|e,enter",
        ["leap east"] = "蔡家|w",
      },
    },

    ["南门|n,s,sw"] = {
      name = "南门",
      exits = {
        ["n"]  = "南大街|e,n,s,w",
        ["s"]  = "官道|n,se,sw",
        ["sw"] = "卧龙岗|ne,sw",
      },
    },

    ["南阳府衙|e,enter"] = {
      name = "南阳府衙",
      exits = {
        ["e"] = "南大街|e,n,s,w",
      },
    },

    ["南阳车行|s"] = {
      name = "南阳车行",
      exits = {
        ["s"] = "西门|e,n,w",
      },
    },

    ["卧龙岗|ne,sw"] = {
      name = "卧龙岗",
      exits = {
        ["ne"] = "南门|n,s,sw",
      },
    },

    ["唐州|e,nw"] = {
      name = "唐州",
      exits = {
        ["e"]  = "小镜湖|eu,n,w",
        ["nw"] = "大姑冢|nw,se",
      },
    },

    -- ===== 土路（重名处理）=====
    ["土路|e,n"] = {
      name = "土路1",
      exits = {
        ["e"] = "九龙镇|e,se,w",
        ["n"] = "七里河畔|nw,s",
      },
    },

    ["土路|e,n,w"] = {
      name = "土路2",
      exits = {
        ["e"] = "长台关|n,ne,s,w",
        ["n"] = "淮渎庙|s",
        ["w"] = "桐柏县|e,nw",
      },
    },

    ["土路|e,nw,su"] = {
      name = "土路3",
      exits = {
        ["e"]  = "西门|e,n,w",
        ["nw"] = "内乡|ne,nw,se,sw",
        ["su"] = "傲峰山|nd",
      },
    },

    ["土路|se,w"] = {
      name = "土路4",
      exits = {
        ["se"] = "北门|n,nw,s,w",
        ["w"]  = "马山口|e,nu,s",
      },
    },

    ["大姑冢|nw,se"] = {
      name = "大姑冢",
      exits = {
        ["nw"] = "官道|n,se,sw",
        ["se"] = "唐州|e,nw",
      },
    },

    ["学堂|s"] = {
      name = "学堂",
      exits = {
        ["s"] = "西大街|e,n,w",
      },
    },

    -- ===== 官道（重名处理）=====
    ["官道|n,se,sw"] = {
      name = "官道1",
      exits = {
        ["n"]  = "南门|n,s,sw",
        ["se"] = "大姑冢|nw,se",
        ["sw"] = "三岔口|ne,s,sw",
      },
    },

    ["官道|n,sw,w"] = {
      name = "官道2",
      exits = {
        ["n"]  = "立禅庵|enter,ne,s",
        ["sw"] = "荒地|n,ne,s",
        ["w"]  = "辎重营|e",
      },
    },

    ["官道|ne,w"] = {
      name = "官道3",
      exits = {
        ["ne"] = "三岔口|ne,s,sw",
        ["w"]  = "邓州|e,ne,nw,w",
      },
    },

    ["客店上房|out"] = {
      name = "客店上房",
      exits = {
        ["out"] = "迎宾楼二楼|d,enter",
      },
    },

    ["小镜湖|eu,n,w"] = {
      name = "小镜湖",
      exits = {
        ["eu"] = "桐柏山下|se,su,wd",
        ["n"]  = "清泉禅寺|s",
        ["w"]  = "唐州|e,nw",
      },
    },

    ["废弃佛堂|out"] = {
      name = "废弃佛堂",
      exits = {
        ["out"] = "立禅庵|enter,ne,s",
      },
    },

    ["当铺|e"] = {
      name = "当铺",
      exits = {
        ["e"] = "北大街|e,n,s,w",
      },
    },

    ["新野|n,sw"] = {
      name = "新野",
      exits = {
        ["n"]  = "三岔口|ne,s,sw",
        ["sw"] = "立禅庵|enter,ne,s",
      },
    },

    ["林间道|nd,se"] = {
      name = "林间道",
      exits = {
        ["nd"] = "桐柏山下|se,su,wd",
      },
    },

    ["桐柏县|e,nw"] = {
      name = "桐柏县",
      exits = {
        ["e"]  = "土路|e,n,w",
        ["nw"] = "桐柏山下|se,su,wd",
      },
    },

    ["桐柏山下|se,su,wd"] = {
      name = "桐柏山下",
      exits = {
        ["se"] = "桐柏县|e,nw",
        ["su"] = "林间道|nd,se",
        ["wd"] = "小镜湖|eu,n,w",
      },
    },

    ["淮渎庙|s"] = {
      name = "淮渎庙",
      exits = {
        ["s"] = "土路|e,n,w",
      },
    },

    ["清泉禅寺|s"] = {
      name = "清泉禅寺",
      exits = {
        ["s"] = "小镜湖|eu,n,w",
      },
    },

    ["灵山坡|ne,se,sw"] = {
      name = "灵山坡",
      exits = {
        ["ne"] = "内乡|ne,nw,se,sw",
        ["se"] = "七里河畔|nw,s",
        ["sw"] = "道观|ne",
      },
    },

    ["石拱桥|ed,wd"] = {
      name = "石拱桥",
      exits = {
        ["wd"] = "东门|eu,w",
      },
    },

    ["立禅庵|enter,ne,s"] = {
      name = "立禅庵",
      exits = {
        ["enter"] = "废弃佛堂|out",
        ["ne"]    = "新野|n,sw",
        ["s"]     = "官道|n,sw,w",
      },
    },

    ["红堰河|ne,sw"] = {
      name = "红堰河",
      exits = {
        ["ne"] = "西坡|e,n,sw",
        ["sw"] = "内乡|ne,nw,se,sw",
      },
    },

    ["荒地|n,ne,s"] = {
      name = "荒地",
      exits = {
        ["ne"] = "官道|n,sw,w",
      },
    },

    ["西坡|e,n,sw"] = {
      name = "西坡",
      exits = {
        ["e"]  = "北门|n,nw,s,w",
        ["n"]  = "马山口|e,nu,s",
        ["sw"] = "红堰河|ne,sw",
      },
    },

    ["西大街|e,n,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "集市|e,n,s,w",
        ["n"] = "学堂|s",
        ["w"] = "西门|e,n,w",
      },
    },

    ["西峡|nu,nw,se"] = {
      name = "西峡",
      exits = {
        ["se"] = "内乡|ne,nw,se,sw",
      },
    },

    ["西门|e,n,w"] = {
      name = "西门",
      exits = {
        ["e"] = "西大街|e,n,w",
        ["n"] = "南阳车行|s",
        ["w"] = "土路|e,nw,su",
      },
    },

    ["辎重营|e"] = {
      name = "辎重营",
      exits = {
        ["e"] = "官道|n,sw,w",
      },
    },

    ["迎宾楼|e,s,u,w"] = {
      name = "迎宾楼",
      exits = {
        ["e"] = "东门|eu,w",
        ["s"] = "医馆|n",
        ["u"] = "迎宾楼二楼|d,enter",
        ["w"] = "集市|e,n,s,w",
      },
    },

    ["迎宾楼二楼|d,enter"] = {
      name = "迎宾楼二楼",
      exits = {
        ["d"]     = "迎宾楼|e,s,u,w",
        ["enter"] = "客店上房|out",
      },
    },

    ["道观|ne"] = {
      name = "道观",
      exits = {
        ["ne"] = "灵山坡|ne,se,sw",
      },
    },

    ["钱庄|w"] = {
      name = "钱庄",
      exits = {
        ["w"] = "北大街|e,n,s,w",
      },
    },

    ["长台关|n,ne,s,w"] = {
      name = "长台关",
      exits = {
        ["w"] = "土路|e,n,w",
      },
    },

    ["集市|e,n,s,w"] = {
      name = "集市",
      exits = {
        ["e"] = "迎宾楼|e,s,u,w",
        ["n"] = "北大街|e,n,s,w",
        ["s"] = "南大街|e,n,s,w",
        ["w"] = "西大街|e,n,w",
      },
    },

    ["马山口|e,nu,s"] = {
      name = "马山口",
      exits = {
        ["e"] = "土路|se,w",
        ["s"] = "西坡|e,n,sw",
      },
    },

    ["黄草山|e,nw,s"] = {
      name = "黄草山",
      exits = {
        ["s"] = "北门|n,nw,s,w",
      },
    },
  },
}

mapper.maps["nanyang"].mapAliases = {

  -- ===== 原点 =====
  ["集市"] = "origin",

  -- ===== 城内 =====
  ["东门"] = "dm",
  ["迎宾楼"] = "ybl",
  ["迎宾楼二楼"] = "ybl2",
  ["客店上房"] = "kdsh",
  ["医馆"] = "yg",

  ["北大街"] = "bdj",
  ["北门"] = "bm",
  ["钱庄"] = "qz",
  ["当铺"] = "dp",

  ["西大街"] = "xdj",
  ["西门"] = "xm",
  ["学堂"] = "xt",
  ["南阳车行"] = "mch",

  ["南大街"] = "ndj",
  ["南门"] = "nm",
  ["南阳府衙"] = "nyfy",

  -- ===== 邓州/外线 =====
  ["邓州"] = "dz",
  ["福胜寺塔"] = "fsst",
  ["九龙镇"] = "jlz",

  -- ===== 土路（重名别名）=====
  ["土路"]  = "tl",   -- 默认（土路1）
  ["土路1"] = "tl1",
  ["土路2"] = "tl2",
  ["土路3"] = "tl3",
  ["土路4"] = "tl4",

  -- ===== 官道（重名别名）=====
  ["官道"]  = "gd",   -- 默认（官道1）
  ["官道1"] = "gd1",
  ["官道2"] = "gd2",
  ["官道3"] = "gd3",

  ["三岔口"] = "sck",
  ["新野"] = "xy",
  ["立禅庵"] = "lca",
  ["废弃佛堂"] = "fqft",
  ["荒地"] = "hd",
  ["辎重营"] = "zzy",

  ["大姑冢"] = "dgz",
  ["唐州"] = "tz",
  ["小镜湖"] = "xjh",
  ["清泉禅寺"] = "qqcs",
  ["桐柏县"] = "tbx",
  ["桐柏山下"] = "tbsx",
  ["林间道"] = "ljd",
  ["淮渎庙"] = "hdm",
  ["长台关"] = "ctg",

  ["七里河畔"] = "qlhp",
  ["灵山坡"] = "lsp",
  ["道观"] = "dg2",

  ["内乡"] = "nx",
  ["红堰河"] = "hyh",
  ["西坡"] = "xp",
  ["马山口"] = "msk",
  ["西峡"] = "xx",

  ["傲峰山"] = "afs",
  ["黄草山"] = "hcs",
    -- ===== 补全缺失 =====
  ["石拱桥"] = "sgq",
  ["卧龙岗"] = "wlg",
  ["蔡家"] = "cj",

}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>襄阳 - xiangyang</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["xiangyang"] = {
  region = {
    key  = "xiangyang",
    name = "襄阳",
  },
  mapNodes = {
    ["蒙古金帐|s"] = { name = "蒙古金帐", exits = { ["s"] = "蒙古营门|n,s" } },
    ["蒙古营门|n,s"] = { name = "蒙古营门", exits = { ["answer 送信;n;n"] = "蒙古金帐|s", ["s;s"] = "荒原|n,s" } },
    ["荒原|n,s"] = { name = "荒原", exits = { ["n;n"] = "蒙古营门|n,s", ["s;s"] = "荒地|n,s,w,xiaolu" } },
    ["荒地|n,s,w,xiaolu"] = { name = "荒地", exits = { ["n;n"] = "荒原|n,s", ["s"] = "荒地1|n,ne,s" } },
    ["荒地1|n,ne,s"] = { name = "荒地1", exits = { ["n"] = "荒地|n,s,w,xiaolu", ["s"] = "襄阳北门|n,s" } },

    ["襄阳北门|n,s"] = { name = "襄阳北门", exits = { ["n"] = "荒地1|n,ne,s", ["s"] = "北街1|e,n,s,w" } },

    ["襄阳西门|e,w"] = { name = "襄阳西门", exits = { ["e"] = "西街2|e,w", ["w;w"] = "乡间土路|e,n,w" } },
    ["乡间土路|e,n,w"] = { name = "乡间土路", exits = { ["e;e"] = "襄阳西门|e,w", ["n"] = "农舍|n,s", ["w;w;w"] = "雪峰脚下|e,s,u,w" } },
    ["雪峰脚下|e,s,u,w"] = { name = "雪峰脚下", exits = { ["e;e;e"] = "乡间土路|e,n,w" } },
    ["农舍|n,s"] = { name = "农舍", exits = { ["n"] = "农舍里屋|s", ["s"] = "乡间土路|e,n,w" } },
    ["农舍里屋|s"] = { name = "农舍里屋", exits = { ["s"] = "农舍|n,s" } },

    ["襄阳南门|n,s"] = { name = "襄阳南门", exits = { ["n"] = "南街2|e,n,s,w", ["s;s;s"] = "官道|e,n,s" } },
    ["官道|e,n,s"] = { name = "官道", exits = { ["e"] = "土房|w", ["n;n;n"] = "襄阳南门|n,s", ["s"] = "官道1|e,n,s,w" } },
    ["官道1|e,n,s,w"] = { name = "官道1", exits = { ["e;e;e"] = "乡间土路1|n,se,w", ["n"] = "官道|e,n,s" } },
    ["乡间土路1|n,se,w"] = { name = "乡间土路1", exits = { ["n;n;n;n"] = "城东小路|e,eu,s,se,w", ["se"] = "鸡鸣渡西|nw", ["w;w;w"] = "官道1|e,n,s,w" } },

    ["城东小路|e,eu,s,se,w"] = { name = "城东小路", exits = { ["e"] = "菜园|n,w", ["s;s;s;s"] = "乡间土路1|n,se,w", ["w"] = "襄阳东门|e,w" } },
    ["菜园|n,w"] = { name = "菜园", exits = { ["n"] = "民宅|s", ["w"] = "城东小路|e,eu,s,se,w" } },
    ["民宅|s"] = { name = "民宅", exits = { ["s"] = "菜园|n,w" } },
    ["鸡鸣渡西|nw"] = { name = "鸡鸣渡西", exits = { ["nw"] = "乡间土路1|n,se,w" } },
    ["土房|w"] = { name = "土房", exits = { ["w"] = "官道|e,n,s" } },

    ["南街|e,n,s,w"] = { name = "南街", exits = { ["e"] = "客店|u,w", ["n"] = "城中心|e,n,s,w", ["s"] = "南街1|n,s,w", ["w"] = "程氏诊所|e" } },
    ["程氏诊所|e"] = { name = "程氏诊所", exits = { ["e"] = "南街|e,n,s,w" } },
    ["南街1|n,s,w"] = { name = "南街1", exits = { ["n"] = "南街|e,n,s,w", ["s"] = "南街2|e,n,s,w", ["w"] = "绸缎庄|e" } },
    ["南街2|e,n,s,w"] = { name = "南街2", exits = { ["e"] = "中原马车行|w", ["n"] = "南街1|n,s,w", ["s"] = "襄阳南门|n,s", ["w"] = "土地庙|e" } },
    ["中原马车行|w"] = { name = "中原马车行", exits = { ["w"] = "南街2|e,n,s,w" } },
    ["土地庙|e"] = { name = "土地庙", exits = { ["e"] = "南街2|e,n,s,w" } },

    ["西街|e,n,s,w"] = { name = "西街", exits = { ["e"] = "城中心|e,n,s,w", ["n"] = "打铁铺1|s", ["s"] = "打铁铺|n", ["w"] = "西街1|e,n,s,w" } },
    ["西街1|e,n,s,w"] = { name = "西街1", exits = { ["e"] = "西街|e,n,s,w", ["n"] = "襄阳当铺|s", ["s"] = "帅府大门|n,s", ["w"] = "西街2|e,w" } },
    ["西街2|e,w"] = { name = "西街2", exits = { ["e"] = "西街1|e,n,s,w", ["w"] = "襄阳西门|e,w" } },
    ["襄阳当铺|s"] = { name = "襄阳当铺", exits = { ["s"] = "西街1|e,n,s,w" } },
    ["帅府大门|n,s"] = { name = "帅府大门", exits = { ["n"] = "西街1|e,n,s,w", ["s"] = "帅府大厅|n" } },
    ["帅府大厅|n"] = { name = "帅府大厅", exits = { ["n"] = "帅府大门|n,s" } },
    ["打铁铺|n"] = { name = "打铁铺", exits = { ["n"] = "西街|e,n,s,w" } },
    ["打铁铺1|s"] = { name = "打铁铺1", exits = { ["s"] = "西街|e,n,s,w" } },

    ["北街|e,n,s"] = { name = "北街", exits = { ["e"] = "富贵小吃|w", ["n"] = "北街2|e,n,s,w", ["s"] = "城中心|e,n,s,w" } },
    ["北街2|e,n,s,w"] = { name = "北街2", exits = { ["e"] = "礼品店|w", ["n"] = "北街1|e,n,s,w", ["s"] = "北街|e,n,s", ["w"] = "客厅1|e,n" } },
    ["北街1|e,n,s,w"] = { name = "北街1", exits = { ["e"] = "贫苦民宅|e,w", ["n"] = "襄阳北门|n,s", ["s"] = "北街2|e,n,s,w", ["w"] = "民宅1|e" } },
    ["贫苦民宅|e,w"] = { name = "贫苦民宅", exits = { ["e"] = "里屋|w", ["w"] = "北街1|e,n,s,w" } },
    ["里屋|w"] = { name = "里屋", exits = { ["w"] = "贫苦民宅|e,w" } },
    ["民宅1|e"] = { name = "民宅1", exits = { ["e"] = "北街1|e,n,s,w" } },

    ["东街|e,n,se,w"] = { name = "东街", exits = { ["e"] = "东街1|e,n,sw,w", ["n"] = "药铺|s", ["se"] = "武馆大门|ne,nw,s", ["w"] = "城中心|e,n,s,w" } },
    ["东街1|e,n,sw,w"] = { name = "东街1", exits = { ["e"] = "东街2|e,s,w", ["n"] = "客厅|n,s", ["sw"] = "武馆大门|ne,nw,s", ["w"] = "东街|e,n,se,w" } },
    ["东街2|e,s,w"] = { name = "东街2", exits = { ["e"] = "襄阳东门|e,w", ["s"] = "太平茶馆|n", ["w"] = "东街1|e,n,sw,w" } },
    ["太平茶馆|n"] = { name = "太平茶馆", exits = { ["n"] = "东街2|e,s,w" } },
    ["药铺|s"] = { name = "药铺", exits = { ["s"] = "东街|e,n,se,w" } },
    ["襄阳东门|e,w"] = { name = "襄阳东门", exits = { ["e"] = "城东小路|e,eu,s,se,w", ["w"] = "东街2|e,s,w" } },

    ["武馆大厅|e,n,s,w"] = { name = "武馆大厅", exits = { ["e"] = "休息室|w", ["n"] = "武馆大门|ne,nw,s", ["s"] = "花园|n", ["w"] = "练功场|e" } },
    ["武馆大门|ne,nw,s"] = { name = "武馆大门", exits = { ["ne"] = "东街1|e,n,sw,w", ["nw"] = "东街|e,n,se,w", ["s"] = "武馆大厅|e,n,s,w" } },
    ["休息室|w"] = { name = "休息室", exits = { ["w"] = "武馆大厅|e,n,s,w" } },
    ["练功场|e"] = { name = "练功场", exits = { ["e"] = "武馆大厅|e,n,s,w" } },
    ["花园|n"] = { name = "花园", exits = { ["n"] = "武馆大厅|e,n,s,w" } },

    ["城中心|e,n,s,w"] = { name = "城中心", exits = { ["e"] = "东街|e,n,se,w", ["n"] = "北街|e,n,s", ["s"] = "南街|e,n,s,w", ["w"] = "西街|e,n,s,w" } },

    ["客厅|n,s"] = { name = "客厅", exits = { ["n"] = "后院|s,w", ["s"] = "东街1|e,n,sw,w" } },
    ["后院|s,w"] = { name = "后院", exits = { ["s"] = "客厅|n,s", ["w"] = "马房|e" } },
    ["马房|e"] = { name = "马房", exits = { ["e"] = "后院|s,w" } },

    ["客店|u,w"] = { name = "客店", exits = { ["u"] = "客店二楼|d", ["w"] = "南街|e,n,s,w" } },
    ["客店二楼|d"] = { name = "客店二楼", exits = { ["d"] = "客店|u,w" } },

    ["富贵小吃|w"] = { name = "富贵小吃", exits = { ["w"] = "北街|e,n,s" } },
    ["礼品店|w"] = { name = "礼品店", exits = { ["w"] = "北街2|e,n,s,w" } },
    ["绸缎庄|e"] = { name = "绸缎庄", exits = { ["e"] = "南街1|n,s,w" } },

    ["客厅1|e,n"] = { name = "客厅1", exits = { ["e"] = "北街2|e,n,s,w", ["n"] = "吕家内宅|s,u" } },
    ["吕家内宅|s,u"] = { name = "吕家内宅", exits = { ["s"] = "客厅1|e,n", ["u"] = "内宅二楼|d" } },
    ["内宅二楼|d"] = { name = "内宅二楼", exits = { ["d"] = "吕家内宅|s,u" } },
  },

  -- mapAliases：房间名 -&gt; 拼音缩写（挂在地图内部）
  mapAliases = {
    ["蒙古金帐"]   = "mgjz",
    ["蒙古营门"]   = "mgym",
    ["荒原"]       = "hy",
    ["荒地"]       = "hd",
    ["荒地1"]      = "hd1",

    ["襄阳北门"]   = "xybm",
    ["襄阳西门"]   = "xyxm",
    ["襄阳南门"]   = "xynm",
    ["襄阳东门"]   = "xydm",

    ["乡间土路"]   = "xjtl",
    ["乡间土路1"]  = "xjtl1",
    ["雪峰脚下"]   = "xfjx",
    ["农舍"]       = "ns",
    ["农舍里屋"]   = "nslw",

    ["官道"]       = "gd",
    ["官道1"]      = "gd1",
    ["土房"]       = "tf",

    ["城东小路"]   = "cdxl",
    ["菜园"]       = "cy",
    ["鸡鸣渡西"]   = "jmdx",

    ["南街"]       = "nj",
    ["南街1"]      = "nj1",
    ["南街2"]      = "nj2",
    ["程氏诊所"]   = "cszs",
    ["中原马车行"] = "mch",
    ["土地庙"]     = "tdm",

    ["西街"]       = "xj",
    ["西街1"]      = "xj1",
    ["西街2"]      = "xj2",
    ["襄阳当铺"]   = "xydp",
    ["帅府大门"]   = "sfdm",
    ["帅府大厅"]   = "sfdt",
    ["打铁铺"]     = "dtp",
    ["打铁铺1"]    = "dtp1",

    ["北街"]       = "bj",
    ["北街1"]      = "bj1",
    ["北街2"]      = "bj2",
    ["贫苦民宅"]   = "pkmz",
    ["里屋"]       = "lw",

    ["东街"]       = "dj",
    ["东街1"]      = "dj1",
    ["东街2"]      = "dj2",
    ["药铺"]       = "yp",
    ["太平茶馆"]   = "tpcg",

    ["武馆大门"]   = "wgdm",
    ["武馆大厅"]   = "wgdt",
    ["休息室"]     = "xxs",
    ["练功场"]     = "lgc",
    ["花园"]       = "hyuan",

    ["城中心"]     = "origin",
    ["客店"]       = "kd",
    ["客店二楼"]   = "kdel",
    ["后院"]       = "houy",
    ["马房"]       = "mf",

    ["客厅"]       = "kt",
    ["客厅1"]      = "kt1",
    ["吕家内宅"]   = "ljnz",
    ["内宅二楼"]   = "nzel",

    ["民宅"]       = "mz",
    ["民宅1"]      = "mz1",

    ["富贵小吃"]   = "fgxc",
    ["礼品店"]     = "lpd",
    ["绸缎庄"]     = "cdz",
  },
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>卢氏县 - lushi</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["lushi"] = {
  region = {
    key  = "lushi",
    name = "卢氏县",
  },

  mapNodes = {
    ["厢房|e"] = {
      name = "厢房",
      exits = {
        ["e"] = "大悲阁|e,n,su,w",
      },
    },
    ["厢房|w"] = {
      name = "厢房1",
      exits = {
        ["w"] = "大悲阁|e,n,su,w",
      },
    },
    ["大悲阁|e,n,su,w"] = {
      name = "大悲阁",
      exits = {
        ["e"] = "厢房|w",
        ["n"] = "天王殿|out,s",
        ["su"] = "大雄殿|nd,su",
        ["w"] = "厢房|e",
      },
    },
    ["大雄殿|nd,su"] = {
      name = "大雄殿",
      exits = {
        ["nd"] = "大悲阁|e,n,su,w",
        ["su"] = "藏经楼|nd",
      },
    },
    ["天王殿|out,s"] = {
      name = "天王殿",
      exits = {
        ["out"] = "山门|enter,ne,sw",
        ["s"] = "大悲阁|e,n,su,w",
      },
    },
    ["官道|e,w"] = {
      name = "官道",
      exits = {
        ["w"] = "宜阳|e,sw",
      },
    },
    ["宜阳|e,sw"] = {
      name = "宜阳",
      exits = {
        ["e"] = "官道|e,w",
        ["sw"] = "山门|enter,ne,sw",
      },
    },
    ["山门|enter,ne,sw"] = {
      name = "山门",
      exits = {
        ["enter"] = "天王殿|out,s",
        ["ne"] = "宜阳|e,sw",
        ["sw"] = "洛水南岸|ne",
      },
    },
    ["洛水南岸|ne"] = {
      name = "洛水南岸",
      exits = {
        ["ne"] = "山门|enter,ne,sw",
        ["ride"] = "洛水北岸|w",
      },
    },
    ["藏经楼|nd"] = {
      name = "藏经楼",
      exits = {
        ["nd"] = "大雄殿|nd,su",
      },
    },

    ["东街|e,n,s,sw"] = {
      name = "东街",
      exits = {
        ["e"] = "东街|e,n,s,w",
        ["n"] = "杂货铺|s",
        ["s"] = "药铺|n",
        ["sw"] = "集市|ne,nu,s",
      },
    },
    ["东街|e,n,s,w"] = {
      name = "东街1",
      exits = {
        ["e"] = "老巷尾|w",
        ["n"] = "打铁铺|s",
        ["s"] = "酒馆|n",
        ["w"] = "东街|e,n,s,sw",
      },
    },
    ["宁家岭|nu,sd"] = {
      name = "宁家岭",
      exits = {
        ["nu"] = "瓦庙岭|nd,sd",
        ["sd"] = "集市|ne,nu,s",
      },
    },
    ["官道口|ed,nw,su"] = {
      name = "官道口",
      exits = {
        ["ed"] = "小铁沟|ne,wu",
        ["nw"] = "桃林寨|ne,se",
        ["su"] = "瓦庙岭|nd,sd",
      },
    },
    ["小铁沟|ne,wu"] = {
      name = "小铁沟",
      exits = {
        ["ne"] = "永宁|e,sw",
        ["wu"] = "官道口|ed,nw,su",
      },
    },
    ["打铁铺|s"] = {
      name = "打铁铺",
      exits = {
        ["s"] = "东街|e,n,s,w",
      },
    },
    ["杂货铺|s"] = {
      name = "杂货铺",
      exits = {
        ["s"] = "东街|e,n,s,sw",
      },
    },
    ["桃林寨|ne,se"] = {
      name = "桃林寨",
      exits = {
        ["se"] = "官道口|ed,nw,su",
      },
    },
    ["永宁|e,sw"] = {
      name = "永宁",
      exits = {
        ["e"] = "洛水北岸|w",
        ["sw"] = "小铁沟|ne,wu",
      },
    },
    ["洛水北岸|n"] = {
      name = "洛水北岸",
      exits = {
        ["n"] = "集市|ne,nu,s",
        ["ride"] = "城隍庙|eu,sw",
      },
    },
    ["洛水北岸|w"] = {
      name = "洛水北岸1",
      exits = {
        ["w"] = "永宁|e,sw",
        ["ride"] = "洛水南岸|ne",
      },
    },
    ["瓦庙岭|nd,sd"] = {
      name = "瓦庙岭",
      exits = {
        ["nd"] = "官道口|ed,nw,su",
        ["sd"] = "宁家岭|nu,sd",
      },
    },
    ["老巷尾|w"] = {
      name = "老巷尾",
      exits = {
        ["w"] = "东街|e,n,s,w",
      },
    },
    ["药铺|n"] = {
      name = "药铺",
      exits = {
        ["n"] = "东街|e,n,s,sw",
      },
    },
    ["酒馆|n"] = {
      name = "酒馆",
      exits = {
        ["n"] = "东街|e,n,s,w",
      },
    },
    ["集市|ne,nu,s"] = {
      name = "集市",
      exits = {
        ["ne"] = "东街|e,n,s,sw",
        ["nu"] = "宁家岭|nu,sd",
        ["s"] = "洛水北岸|n",
      },
    },
    ["城隍庙|eu,sw"] = {
      name = "城隍庙",
      exits = {
        ["eu"] = "白阳坡|se,wd",
        ["sw"] = "横涧乡|ne,sw",
        ["ride"] = "洛水北岸|n",
      },
    },
    ["大夫岭|ne,su"] = {
      name = "大夫岭",
      exits = {
        ["ne"] = "横涧乡|ne,sw",
        ["su"] = "玉皇山|nd,ne,se,sw",
      },
    },
    ["山道|ne,wu"] = {
      name = "山道",
      exits = {
        ["ne"] = "玉皇山|nd,ne,se,sw",
        ["wu"] = "熊耳山脚|ed,nu,sw",
      },
    },
    ["抱犊寨|nw,sd"] = {
      name = "抱犊寨",
      exits = {
        ["nw"] = "白阳坡|se,wd",
        ["sd"] = "羊肠小道|eu,nu,sw",
      },
    },
    ["枯草岭|sd"] = {
      name = "枯草岭",
      exits = {
        ["sd"] = "熊耳山脚|ed,nu,sw",
      },
    },
    ["横涧乡|ne,sw"] = {
      name = "横涧乡",
      exits = {
        ["ne"] = "城隍庙|eu,sw",
        ["sw"] = "大夫岭|ne,su",
      },
    },
    ["洛南|ne,nu,sw"] = {
      name = "洛南",
      exits = {
        ["ne"] = "熊耳山脚|ed,nu,sw",
      },
    },
    ["熊耳山脚|ed,nu,sw"] = {
      name = "熊耳山脚",
      exits = {
        ["ed"] = "山道|ne,wu",
        ["nu"] = "枯草岭|sd",
        ["sw"] = "洛南|ne,nu,sw",
      },
    },
    ["玉皇山|nd,ne,se,sw"] = {
      name = "玉皇山",
      exits = {
        ["nd"] = "大夫岭|ne,su",
        ["ne"] = "黑风岭|ne,sw",
        ["se"] = "长沟岭|nw,sd",
        ["sw"] = "山道|ne,wu",
      },
    },
    ["白阳坡|se,wd"] = {
      name = "白阳坡",
      exits = {
        ["se"] = "抱犊寨|nw,sd",
        ["wd"] = "城隍庙|eu,sw",
      },
    },
    ["石门湖|nu,s"] = {
      name = "石门湖",
      exits = {
        ["nu"] = "长沟岭|nw,sd",
      },
    },
    ["羊肠小道|eu,nu,sw"] = {
      name = "羊肠小道",
      exits = {
        ["eu"] = "老君庙|nw,wd",
        ["nu"] = "抱犊寨|nw,sd",
        ["sw"] = "黑风岭|ne,sw",
      },
    },
    ["老君庙|nw,wd"] = {
      name = "老君庙",
      exits = {
        ["wd"] = "羊肠小道|eu,nu,sw",
      },
    },
    ["长沟岭|nw,sd"] = {
      name = "长沟岭",
      exits = {
        ["nw"] = "玉皇山|nd,ne,se,sw",
        ["sd"] = "石门湖|nu,s",
      },
    },
    ["黑风岭|ne,sw"] = {
      name = "黑风岭",
      exits = {
        ["ne"] = "羊肠小道|eu,nu,sw",
        ["sw"] = "玉皇山|nd,ne,se,sw",
      },
    },
  },

  -- mapAliases：房间名 -&gt; 拼音缩写
  mapAliases = {
    ["厢房"]     = "xf",
    ["厢房1"]    = "xf1",
    ["大悲阁"]   = "dbg",
    ["大雄殿"]   = "dxd",
    ["天王殿"]   = "twd",
    ["官道"]     = "gd",
    ["宜阳"]     = "yy",
    ["山门"]     = "sm",
    ["洛水南岸"] = "lsna",
    ["洛水北岸"] = "lsba",
    ["洛水北岸1"]= "lsba1",
    ["藏经楼"]   = "cjl",

    ["东街"]     = "dj",
    ["东街1"]    = "dj1",
    ["宁家岭"]   = "njl",
    ["官道口"]   = "gdk",
    ["小铁沟"]   = "xtg",
    ["打铁铺"]   = "dtp",
    ["杂货铺"]   = "zhp",
    ["桃林寨"]   = "tlz",
    ["永宁"]     = "yn",
    ["瓦庙岭"]   = "wml",
    ["老巷尾"]   = "lxw",
    ["药铺"]     = "yp",
    ["酒馆"]     = "jg",
    ["集市"]     = "origin",

    ["城隍庙"]   = "chm",
    ["大夫岭"]   = "dfl",
    ["山道"]     = "sd",
    ["抱犊寨"]   = "bdz",
    ["枯草岭"]   = "kcl",
    ["横涧乡"]   = "hjx",
    ["洛南"]     = "ln",
    ["熊耳山脚"] = "xesj",
    ["玉皇山"]   = "yhs",
    ["白阳坡"]   = "byp",
    ["石门湖"]   = "smh",
    ["羊肠小道"] = "ycxd",
    ["老君庙"]   = "ljm",
    ["长沟岭"]   = "cgl",
    ["黑风岭"]   = "hfl",
  },
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>伏牛山 - funiu</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["funiu"] = {
  region = {
    key  = "funiu",
    name = "伏牛山",
  },

  mapNodes = {
    ["山路|nw,sd"] = {
      name = "山路",
      exits = {
        ["nw"] = "斑竹寺|nw,se",
      },
    },
    ["山路1|nw,sd"] = {
      name = "山路1",
      exits = {
        ["nw"] = "百尺潭|nw,se",
        ["sd"] = "五朵山|ed,nu,nw",
      },
    },

    ["三元岭|e,wu"] = {
      name = "三元岭",
      exits = {
        ["e"] = "东岭|ed,se,sw,w",
        ["wu"] = "山路|ed,nw,u",
      },
    },
    ["东岭|ed,se,sw,w"] = {
      name = "东岭",
      exits = {
        ["ed"] = "兴风寺|ne,wu",
        ["se"] = "斑竹寺|nw,se",
        ["sw"] = "龙潭沟|ne",
        ["w"] = "三元岭|e,wu",
      },
    },
    ["五朵山|ed,nu,nw"] = {
      name = "五朵山",
      exits = {
        ["ed"] = "山路|se,wu",
        ["nu"] = "山路1|nw,sd",
        ["nw"] = "牛心石|se",
      },
    },
    ["兴风寺|ne,wu"] = {
      name = "兴风寺",
      exits = {
        ["ne"] = "山路|ed,nd,se,sw",
        ["wu"] = "东岭|ed,se,sw,w",
      },
    },
    ["厢房|e"] = {
      name = "厢房",
      exits = {
        ["e"] = "校场|e,n,s,w",
      },
    },
    ["厨房|w"] = {
      name = "厨房",
      exits = {
        ["w"] = "校场|e,n,s,w",
      },
    },
    ["土地垭|eu,su,sw"] = {
      name = "土地垭",
      exits = {
        ["eu"] = "尧山|ed,wd",
        ["su"] = "山路|ed,nd,se,sw",
        ["sw"] = "将军石|ne,wu",
      },
    },
    ["大厅|s"] = {
      name = "大厅",
      exits = {
        ["s"] = "校场|e,n,s,w",
      },
    },
    ["大门|n,se"] = {
      name = "大门",
      exits = {
        ["n"] = "校场|e,n,s,w",
        ["se"] = "汉秋村|eu,nw",
      },
    },
    ["将军石|ne,wu"] = {
      name = "将军石",
      exits = {
        ["ne"] = "土地垭|eu,su,sw",
        ["wu"] = "石人山|ed,nd",
      },
    },
    ["尧山|ed,wd"] = {
      name = "尧山",
      exits = {
        ["ed"] = "山路|ed,wu",
        ["wd"] = "土地垭|eu,su,sw",
      },
    },
    ["山壁|e,nw"] = {
      name = "山壁",
      exits = {
        ["e"] = "山路|nw,se,w",
      },
    },

    ["山路|e,se,wd"] = {
      name = "山路2",
      exits = {
        ["e"] = "山路|eu,nd,w",
        ["se"] = "山路|nw,se,w",
        ["wd"] = "汉秋村|eu,nw",
      },
    },
    ["山路|ed,nd,se,sw"] = {
      name = "山路3",
      exits = {
        ["ed"] = "龙潭岭|wu",
        ["nd"] = "土地垭|eu,su,sw",
        ["se"] = "百尺潭|nw,se",
        ["sw"] = "兴风寺|ne,wu",
      },
    },
    ["山路|ed,nw,u"] = {
      name = "山路4",
      exits = {
        ["ed"] = "三元岭|e,wu",
        ["nw"] = "白云山|d,nw,se,wd",
        ["u"] = "鸡角尖|d",
      },
    },
    ["山路|ed,wu"] = {
      name = "山路5",
      exits = {
        ["ed"] = "昭平湖|e,wu",
        ["wu"] = "尧山|ed,wd",
      },
    },
    ["山路|eu,nd,w"] = {
      name = "山路6",
      exits = {
        ["eu"] = "木扎岭|sw,wd",
        ["nd"] = "鹞子垭|nw,su",
        ["w"] = "山路|e,se,wd",
      },
    },
    ["山路|ne,su"] = {
      name = "山路7",
      exits = {
        ["ne"] = "木扎岭|sw,wd",
        ["su"] = "石人山|ed,nd",
      },
    },
    ["山路|nw,se,w"] = {
      name = "山路8",
      exits = {
        ["nw"] = "山路|e,se,wd",
        ["se"] = "白云山|d,nw,se,wd",
        ["w"] = "山壁|e,nw",
      },
    },
    ["山路|se,wu"] = {
      name = "山路9",
      exits = {
        ["se"] = "黄草山|e,nw,s",
        ["wu"] = "五朵山|ed,nu,nw",
      },
    },

    ["嵩县|e,ne,sw"] = {
      name = "嵩县",
      exits = {
        ["sw"] = "重渡沟|eu,ne",
      },
    },
    ["斑竹寺|nw,se"] = {
      name = "斑竹寺",
      exits = {
        ["nw"] = "东岭|ed,se,sw,w",
        ["se"] = "山路|nw,sd",
      },
    },
    ["昭平湖|e,wu"] = {
      name = "昭平湖",
      exits = {
        ["wu"] = "山路|ed,wu",
      },
    },
    ["木扎岭|sw,wd"] = {
      name = "木扎岭",
      exits = {
        ["sw"] = "山路|ne,su",
        ["wd"] = "山路|eu,nd,w",
      },
    },
    ["校场|e,n,s,w"] = {
      name = "校场",
      exits = {
        ["e"] = "厨房|w",
        ["n"] = "大厅|s",
        ["s"] = "大门|n,se",
        ["w"] = "厢房|e",
      },
    },
    ["汉秋村|eu,nw"] = {
      name = "汉秋村",
      exits = {
        ["eu"] = "山路|e,se,wd",
        ["nw"] = "大门|n,se",
      },
    },
    ["火神庙|ne,se"] = {
      name = "火神庙",
      exits = {
        ["ne"] = "龙脖山|sw,wd",
        ["se"] = "鹞子垭|nw,su",
      },
    },
    ["牛心石|se"] = {
      name = "牛心石",
      exits = {
        ["se"] = "五朵山|ed,nu,nw",
      },
    },
    ["界岭|eu,sd,wu"] = {
      name = "界岭",
      exits = {
        ["eu"] = "白云山|d,nw,se,wd",
        ["sd"] = "西峡|nu,nw,se",
        ["wu"] = "老君山|ed,se,sw",
      },
    },
    ["白云山|d,nw,se,wd"] = {
      name = "白云山",
      exits = {
        ["d"] = "白龙瀑|u",
        ["nw"] = "山路|nw,se,w",
        ["se"] = "山路|ed,nw,u",
        ["wd"] = "界岭|eu,sd,wu",
      },
    },
    ["白草坡|ne"] = {
      name = "白草坡",
      exits = {
        ["ne"] = "老君山|ed,se,sw",
      },
    },
    ["白龙瀑|u"] = {
      name = "白龙瀑",
      exits = {
        ["u"] = "白云山|d,nw,se,wd",
      },
    },
    ["百尺潭|nw,se"] = {
      name = "百尺潭",
      exits = {
        ["nw"] = "山路|ed,nd,se,sw",
        ["se"] = "山路1|nw,sd",
      },
    },
    ["石人山|ed,nd"] = {
      name = "石人山",
      exits = {
        ["ed"] = "将军石|ne,wu",
        ["nd"] = "山路|ne,su",
      },
    },
    ["老君山|ed,se,sw"] = {
      name = "老君山",
      exits = {
        ["ed"] = "界岭|eu,sd,wu",
        ["se"] = "老君庙|nw,wd",
        ["sw"] = "白草坡|ne",
      },
    },
    ["老君庙|nw,wd"] = {
      name = "老君庙",
      exits = {
        ["nw"] = "老君山|ed,se,sw",
      },
    },
    ["西峡|nu,nw,se"] = {
      name = "西峡",
      exits = {
        ["nu"] = "界岭|eu,sd,wu",
      },
    },
    ["重渡沟|eu,ne"] = {
      name = "重渡沟",
      exits = {
        ["eu"] = "龙脖山|sw,wd",
        ["ne"] = "嵩县|e,ne,sw",
      },
    },
    ["鸡角尖|d"] = {
      name = "鸡角尖",
      exits = {
        ["d"] = "山路|ed,nw,u",
      },
    },
    ["鹞子垭|nw,su"] = {
      name = "鹞子垭",
      exits = {
        ["nw"] = "火神庙|ne,se",
        ["su"] = "山路|eu,nd,w",
      },
    },
    ["黄草山|e,nw,s"] = {
      name = "黄草山",
      exits = {
        ["nw"] = "山路|se,wu",
      },
    },
    ["龙潭岭|wu"] = {
      name = "龙潭岭",
      exits = {
        ["wu"] = "山路|ed,nd,se,sw",
      },
    },
    ["龙潭沟|ne"] = {
      name = "龙潭沟",
      exits = {
        ["ne"] = "东岭|ed,se,sw,w",
      },
    },
    ["龙脖山|sw,wd"] = {
      name = "龙脖山",
      exits = {
        ["sw"] = "火神庙|ne,se",
        ["wd"] = "重渡沟|eu,ne",
      },
    },
  },

  mapAliases = {
    ["山路"]   = "sl",
    ["山路1"]  = "sl1",
    ["山路2"]  = "sl2",
    ["山路3"]  = "sl3",
    ["山路4"]  = "sl4",
    ["山路5"]  = "sl5",
    ["山路6"]  = "sl6",
    ["山路7"]  = "sl7",
    ["山路8"]  = "sl8",
    ["山路9"]  = "sl9",

    ["三元岭"] = "syl",
    ["东岭"]   = "dl",
    ["五朵山"] = "wds",
    ["兴风寺"] = "xfs",
    ["厢房"]   = "xf",
    ["厨房"]   = "cf",
    ["土地垭"] = "tdy",
    ["大厅"]   = "dt",
    ["大门"]   = "dm",
    ["将军石"] = "jjs",
    ["尧山"]   = "ys",
    ["山壁"]   = "sb",
    ["嵩县"]   = "sx",
    ["斑竹寺"] = "bzs",
    ["昭平湖"] = "zph",
    ["木扎岭"] = "origin",
    ["校场"]   = "xc",
    ["汉秋村"] = "hqc",
    ["火神庙"] = "hsm",
    ["牛心石"] = "nxs",
    ["界岭"]   = "jl",
    ["白云山"] = "bys",
    ["白草坡"] = "bcp",
    ["白龙瀑"] = "blp",
    ["百尺潭"] = "bct",
    ["石人山"] = "srs",
    ["老君山"] = "ljs",
    ["老君庙"] = "ljm",
    ["西峡"]   = "xx",
    ["重渡沟"] = "cdg",
    ["鸡角尖"] = "jjj",
    ["鹞子垭"] = "yzy",
    ["黄草山"] = "hcs",
    ["龙潭岭"] = "ltl",
    ["龙潭沟"] = "ltg",
    ["龙脖山"] = "lbs",
  },
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>商州 - shangzhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["shangzhou"] = {
  region = {
    key  = "shangzhou",
    name = "商州",
  },
  mapNodes = {
    ["上雒车行|e"] = {
      name = "上雒车行",
      exits = {
        ["e"] = "仙娥驿|nw,s,se,w",
      },
    },
    ["东街|e,enter,w"] = {
      name = "东街",
      exits = {
        ["e"] = "东门|e,w",
        ["enter"] = "钱庄|out",
        ["w"] = "北街|e,n,s,w",
      },
    },
    ["东门|e,w"] = {
      name = "东门",
      exits = {
        ["e"] = "四皓驿|nw,se,w",
        ["w"] = "东街|e,enter,w",
      },
    },
    ["东门|se,w"] = {
      name = "东门1",
      exits = {
        ["se"] = "峡谷|n,nw,se,sw",
        ["w"] = "关城|e,out,s",
      },
    },
    ["仙娥驿|nw,s,se,w"] = {
      name = "仙娥驿",
      exits = {
        ["nw"] = "牧护关|nw,se",
        ["s"] = "北门|n,s",
        ["se"] = "土路|ne,nw,se",
        ["w"] = "上雒车行|e",
      },
    },
    ["关城|e,out,s"] = {
      name = "关城",
      exits = {
        ["e"] = "东门|se,w",
        ["out"] = "武关西门|enter,nw",
        ["s"] = "兵营|n",
      },
    },
    ["兵营|n"] = {
      name = "兵营",
      exits = {
        ["n"] = "关城|e,out,s",
      },
    },
    ["北街|e,n,s,w"] = {
      name = "北街",
      exits = {
        ["e"] = "东街|e,enter,w",
        ["n"] = "北门|n,s",
        ["s"] = "横街|e,n,se,w",
        ["w"] = "府衙大门|e,enter",
      },
    },
    ["北门|n,s"] = {
      name = "北门",
      exits = {
        ["n"] = "仙娥驿|nw,s,se,w",
        ["s"] = "北街|e,n,s,w",
      },
    },
    ["南街|e,nw,s,w"] = {
      name = "南街",
      exits = {
        ["e"] = "酒楼|n,w",
        ["nw"] = "横街|e,n,se,w",
        ["s"] = "南门|n,sw",
        ["w"] = "西门|e,nw",
      },
    },
    ["南门|n,sw"] = {
      name = "南门",
      exits = {
        ["n"] = "南街|e,nw,s,w",
        ["sw"] = "松云寺|enter,ne,sw,w",
      },
    },
    ["四皓驿|nw,se,w"] = {
      name = "四皓驿",
      exits = {
        ["nw"] = "土路|ne,nw,se",
        ["se"] = "龙驹寨门|enter,nw,s,se",
        ["w"] = "东门|e,w",
      },
    },
    ["土路|ne,nw,se"] = {
      name = "土路",
      exits = {
        ["ne"] = "洛南|ne,nu,sw",
        ["nw"] = "仙娥驿|nw,s,se,w",
        ["se"] = "四皓驿|nw,se,w",
      },
    },
    ["大堂|out"] = {
      name = "大堂",
      exits = {
        ["out"] = "府衙大门|e,enter",
      },
    },
    ["大殿|w"] = {
      name = "大殿",
      exits = {
        ["w"] = "石板路|e,n,out,s",
      },
    },
    ["山路|e,sd,w"] = {
      name = "山路",
      exits = {
        ["e"] = "白玉沟|ne,w",
        ["sd"] = "金丝峡|nu,su",
        ["w"] = "竹林关|e,nd",
      },
    },
    ["山路|ne,sw"] = {
      name = "山路1",
      exits = {
        ["ne"] = "松云寺|enter,ne,sw,w",
        ["sw"] = "岔子岭|ne,su",
      },
    },
    ["山间小路|n,su"] = {
      name = "山间小路",
      exits = {
        ["n"] = "龙驹寨门|enter,nw,s,se",
        ["su"] = "竹林关|e,nd",
      },
    },
    ["岔子岭|ne,su"] = {
      name = "岔子岭",
      exits = {
        ["ne"] = "山路|ne,sw",
      },
    },
    ["峡谷|n,nw,se,sw"] = {
      name = "峡谷",
      exits = {
        ["n"] = "石门湖|nu,s",
        ["nw"] = "东门|se,w",
        ["se"] = "西峡|nu,nw,se",
        ["sw"] = "白玉沟|ne,w",
      },
    },
    ["府衙大门|e,enter"] = {
      name = "府衙大门",
      exits = {
        ["e"] = "北街|e,n,s,w",
        ["enter"] = "大堂|out",
      },
    },
    ["杂货铺|s"] = {
      name = "杂货铺",
      exits = {
        ["s"] = "横街|n,s,w",
      },
    },
    ["松云寺|enter,ne,sw,w"] = {
      name = "松云寺",
      exits = {
        ["enter"] = "石板路|e,n,out,s",
        ["ne"] = "南门|n,sw",
        ["sw"] = "山路|ne,sw",
      },
    },
    ["横街|e,n"] = {
      name = "横街",
      exits = {
        ["e"] = "横街|e,n,se,w",
        ["n"] = "药铺|s",
      },
    },
    ["横街|e,n,se,w"] = {
      name = "横街1",
      exits = {
        ["e"] = "横街|n,s,w",
        ["n"] = "北街|e,n,s,w",
        ["se"] = "南街|e,nw,s,w",
        ["w"] = "横街|e,n",
      },
    },
    ["横街|n,s,w"] = {
      name = "横街2",
      exits = {
        ["n"] = "杂货铺|s",
        ["s"] = "酒楼|n,w",
        ["w"] = "横街|e,n,se,w",
      },
    },
    ["武关西门|enter,nw"] = {
      name = "武关西门",
      exits = {
        ["enter"] = "关城|e,out,s",
        ["nw"] = "龙驹寨门|enter,nw,s,se",
      },
    },
    ["洛南|ne,nu,sw"] = {
      name = "洛南",
      exits = {
        ["ne"] = "熊耳山脚|ed,nu,sw",
        ["nu"] = "瓮峪古道|nw,sd",
        ["sw"] = "土路|ne,nw,se",
      },
    },
    ["熊耳山脚|ed,nu,sw"] = {
      name = "熊耳山脚",
      exits = {
        ["sw"] = "洛南|ne,nu,sw",
      },
    },
    ["牧护关|nw,se"] = {
      name = "牧护关",
      exits = {
        ["nw"] = "蓝田|nw,se",
        ["se"] = "仙娥驿|nw,s,se,w",
      },
    },
    ["瓮峪古道|nw,sd"] = {
      name = "瓮峪古道",
      exits = {
        ["sd"] = "洛南|ne,nu,sw",
      },
    },
    ["白玉沟|ne,w"] = {
      name = "白玉沟",
      exits = {
        ["ne"] = "峡谷|n,nw,se,sw",
        ["w"] = "山路|e,sd,w",
      },
    },
    ["石板路|e,n,out,s"] = {
      name = "石板路",
      exits = {
        ["e"] = "大殿|w",
        ["n"] = "鼓楼|s",
        ["out"] = "松云寺|enter,ne,sw,w",
        ["s"] = "钟楼|n",
      },
    },
    ["石门湖|nu,s"] = {
      name = "石门湖",
      exits = {
        ["s"] = "峡谷|n,nw,se,sw",
      },
    },
    ["竹林关|e,nd"] = {
      name = "竹林关",
      exits = {
        ["e"] = "山路|e,sd,w",
        ["nd"] = "山间小路|n,su",
      },
    },
    ["茅沟口|se,wu"] = {
      name = "茅沟口",
      exits = {
        ["se"] = "蹄样沟|nw,se",
      },
    },
    ["药铺|s"] = {
      name = "药铺",
      exits = {
        ["s"] = "横街|e,n",
      },
    },
    ["蓝田|nw,se"] = {
      name = "蓝田",
      exits = {
        ["se"] = "牧护关|nw,se",
      },
    },
    ["西峡|nu,nw,se"] = {
      name = "西峡",
      exits = {
        ["nw"] = "峡谷|n,nw,se,sw",
      },
    },
    ["西门|e,nw"] = {
      name = "西门",
      exits = {
        ["e"] = "南街|e,nw,s,w",
        ["nw"] = "蹄样沟|nw,se",
      },
    },
    ["蹄样沟|nw,se"] = {
      name = "蹄样沟",
      exits = {
        ["nw"] = "茅沟口|se,wu",
        ["se"] = "西门|e,nw",
      },
    },
    ["酒楼|n,w"] = {
      name = "酒楼",
      exits = {
        ["n"] = "横街|n,s,w",
        ["w"] = "南街|e,nw,s,w",
      },
    },
    ["金丝峡|nu,su"] = {
      name = "金丝峡",
      exits = {
        ["nu"] = "山路|e,sd,w",
      },
    },
    ["钟楼|n"] = {
      name = "钟楼",
      exits = {
        ["n"] = "石板路|e,n,out,s",
      },
    },
    ["钱庄|out"] = {
      name = "钱庄",
      exits = {
        ["out"] = "东街|e,enter,w",
      },
    },
    ["集市|n,out"] = {
      name = "集市",
      exits = {
        ["n"] = "饭铺|s",
        ["out"] = "龙驹寨门|enter,nw,s,se",
      },
    },
    ["饭铺|s"] = {
      name = "饭铺",
      exits = {
        ["s"] = "集市|n,out",
      },
    },
    ["鼓楼|s"] = {
      name = "鼓楼",
      exits = {
        ["s"] = "石板路|e,n,out,s",
      },
    },
    ["龙驹寨门|enter,nw,s,se"] = {
      name = "龙驹寨门",
      exits = {
        ["enter"] = "集市|n,out",
        ["nw"] = "四皓驿|nw,se,w",
        ["s"] = "山间小路|n,su",
        ["se"] = "武关西门|enter,nw",
      },
    },
  },
}

-- 房间名 -&gt; 拼音缩写（按“编号后的房间名”生成）
mapper.maps["shangzhou"].mapAliases = {
  ["上雒车行"] = "mch",
  ["东街"] = "dj",
  ["东门"] = "dm",
  ["东门1"] = "dm1",
  ["仙娥驿"] = "xey",
  ["关城"] = "gc",
  ["兵营"] = "by",
  ["北街"] = "origin",
  ["北门"] = "bm",
  ["南街"] = "nj",
  ["南门"] = "nm",
  ["四皓驿"] = "shy",
  ["土路"] = "tl",
  ["大堂"] = "dt",
  ["大殿"] = "dd",
  ["山路"] = "sl",
  ["山路1"] = "sl1",
  ["山间小路"] = "sjxl",
  ["岔子岭"] = "czl",
  ["峡谷"] = "xg",
  ["府衙大门"] = "fydm",
  ["杂货铺"] = "zhp",
  ["松云寺"] = "sys",
  ["横街"] = "hj",
  ["横街1"] = "hj1",
  ["横街2"] = "hj2",
  ["武关西门"] = "wgxm",
  ["洛南"] = "ln",
  ["熊耳山脚"] = "xesj",
  ["牧护关"] = "mhg",
  ["瓮峪古道"] = "wygd",
  ["白玉沟"] = "byg",
  ["石板路"] = "sbl",
  ["石门湖"] = "smh",
  ["竹林关"] = "zlg",
  ["茅沟口"] = "mgk",
  ["药铺"] = "yp",
  ["蓝田"] = "lt",
  ["西峡"] = "xx",
  ["西门"] = "xm",
  ["蹄样沟"] = "tyg",
  ["酒楼"] = "jl",
  ["金丝峡"] = "jsx",
  ["钟楼"] = "zl",
  ["钱庄"] = "qz",
  ["集市"] = "js",
  ["饭铺"] = "fp",
  ["鼓楼"] = "gl",
  ["龙驹寨门"] = "ljzm",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>洛阳 - ly</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["luoyang"] = {
  region = {
    key  = "luoyang",
    name = "洛阳",
  },

  mapNodes = {
    ["宝相精舍|e"] = {
      name = "宝相精舍",
      exits = { 
        ["e"] = "小院|e,s,w",
        ["jiali max;break north;n"] = "北厢房|s",
        ["jiali max;break south;s"] = "南厢房|n",
      },
    },
    
    ["南厢房|n"] = {
      name = "南厢房",
      exits = {
        ["n"] = "宝相精舍|e",
      },
    },
    
    ["北厢房|s"] = {
      name = "北厢房",
      exits = {
        ["s"] = "宝相精舍|e",
      },
    },

    ["小屋|n"] = {
      name = "小屋",
      exits = { ["n"] = "小院|e,s,w" },
    },

    ["小院|e,s,w"] = {
      name = "小院",
      exits = {
        ["e;e"] = "讲经台|e,nd,s,w",
        ["s"] = "小屋|n",
        ["w"] = "宝相精舍|e",
      },
    },

    -- 客房 重名：客房1 / 客房2 / 客房3
    ["客房1|w"] = {
      name = "客房1",
      exits = { ["w;w"] = "卧佛殿|e,n,s,w" },
    },
    ["客房2|e"] = {
      name = "客房2",
      exits = { ["e;e"] = "卧佛殿|e,n,s,w" },
    },

    ["万安塔|se"] = {
      name = "万安塔",
      exits = { ["se"] = "寺内小路1|nw,se" },
    },

    ["万安寺后院|ne,nw,su"] = {
      name = "万安寺后院",
      exits = {
        ["ne"] = "寺内小路|ne,sw",
        ["nw"] = "寺内小路1|nw,se",
        ["su"] = "讲经台|e,nd,s,w",
      },
    },

    ["万安寺大门|n,se"] = {
      name = "万安寺大门",
      exits = {
        ["n"] = "寺内广场|n,s",
        ["se;se;se"] = "城西集市|e,nw,s",
      },
    },

    ["伽蓝殿|w"] = {
      name = "伽蓝殿",
      exits = { ["w"] = "大雄宝殿|e,n,s,w" },
    },

    ["卧佛殿|e,n,s,w"] = {
      name = "卧佛殿",
      exits = {
        ["e;e"] = "客房1|w",
        ["n"] = "讲经台|e,nd,s,w",
        ["s"] = "大雄宝殿|e,n,s,w",
        ["w;w"] = "客房2|e",
      },
    },

    ["大雄宝殿|e,n,s,w"] = {
      name = "大雄宝殿",
      exits = {
        ["e"] = "伽蓝殿|w",
        ["n"] = "卧佛殿|e,n,s,w",
        ["s"] = "天王殿|e,n,s,w",
        ["w"] = "观音堂|e",
      },
    },

    ["天王殿|e,n,s,w"] = {
      name = "天王殿",
      exits = {
        ["e"] = "鼓楼|w",
        ["n"] = "大雄宝殿|e,n,s,w",
        ["s"] = "寺内广场|n,s",
        ["w"] = "钟楼|e",
      },
    },

    -- 寺内小路 重名：寺内小路 / 寺内小路1
    ["寺内小路|ne,sw"] = {
      name = "寺内小路",
      exits = {
        ["ne"] = "碑林|sw",
        ["sw"] = "万安寺后院|ne,nw,su",
      },
    },
    ["寺内小路1|nw,se"] = {
      name = "寺内小路1",
      exits = {
        ["nw"] = "万安塔|se",
        ["se"] = "万安寺后院|ne,nw,su",
      },
    },

    ["寺内广场|n,s"] = {
      name = "寺内广场",
      exits = {
        ["n"] = "天王殿|e,n,s,w",
        ["s"] = "万安寺大门|n,se",
      },
    },

    ["碑林|sw"] = {
      name = "碑林",
      exits = { ["sw"] = "寺内小路|ne,sw" },
    },

    ["菜园|w"] = {
      name = "菜园",
      exits = { ["w;w"] = "讲经台|e,nd,s,w" },
    },

    ["观音堂|e"] = {
      name = "观音堂",
      exits = { ["e"] = "大雄宝殿|e,n,s,w" },
    },

    ["讲经台|e,nd,s,w"] = {
      name = "讲经台",
      exits = {
        ["e;e"] = "菜园|w",
        ["nd"] = "万安寺后院|ne,nw,su",
        ["s"] = "卧佛殿|e,n,s,w",
        ["w;w"] = "小院|e,s,w",
      },
    },

    ["钟楼|e"] = {
      name = "钟楼",
      exits = { ["e"] = "天王殿|e,n,s,w" },
    },

    ["鼓楼|w"] = {
      name = "鼓楼",
      exits = { ["w"] = "天王殿|e,n,s,w" },
    },

    ["大厅|e,s,w"] = {
      name = "大厅",
      exits = { ["s;s;s;s;w;n;n;e;n;s;wu"] = "棺材店内室|w" },
    },

["天地会暗道|n,s,wu"] = {
  name = "天地会暗道",
  exits = {
    ["wu"] = "棺材店内室|w",
  },
},

    ["棺材店内室|w"] = {
      name = "棺材店内室",
      exits = {
        ["w"] = "棺材店|e,w",
        ["knock guancai 3;ed;s;s;s;w;e;n;n;n;n"] = "大厅|e,s,w",
        ["knock guancai 3;ed"] = "天地会暗道|n,s,wu",
      },
    },

    ["棺材店|e,w"] = {
      name = "棺材店",
      exits = {
        ["e"] = "棺材店内室|w",
        ["w"] = "杨柳胡同|e,s",
      },
    },

    -- 杨柳胡同 重名：杨柳胡同 / 杨柳胡同1
    ["杨柳胡同|e,s"] = {
      name = "杨柳胡同",
      exits = {
        ["e"] = "棺材店|e,w",
        ["s"] = "杨柳胡同1|n,w",
      },
    },
    ["杨柳胡同1|n,w"] = {
      name = "杨柳胡同1",
      exits = {
        ["n"] = "杨柳胡同|e,s",
        ["w"] = "小胡同|e,n,w",
      },
    },

    -- 小胡同 重名（已有 1/2/3）：补齐为 小胡同 / 小胡同1 / 小胡同2 / 小胡同3 / 小胡同4 / 小胡同5
    ["小胡同|e,n,w"] = {
      name = "小胡同",
      exits = {
        ["e"] = "杨柳胡同1|n,w",
        ["n"] = "小胡同5|e,n,s,sw,w",
        ["w"] = "小胡同3|e,n,s,w",
      },
    },

    -- 大官道 重名：大官道 / 大官道1 / 大官道2 / 大官道3 / 大官道4 / 大官道5 / 大官道6
    ["大官道|e,n,w"] = {
      name = "大官道",
      exits = {
        ["e"] = "大官道1|e,w",
        ["n"] = "巩县|n,s",
        ["w"] = "许家集|e,se,w",
      },
    },
    ["大官道1|e,w"] = {
      name = "大官道1",
      exits = {
        ["e"] = "虎牢关|ne,se,w",
        ["w"] = "大官道|e,n,w",
      },
    },
    ["大官道2|e,wu"] = {
      name = "大官道2",
      exits = {
        ["e"] = "许家集|e,se,w",
        ["wu"] = "城东桥|ed,wd",
      },
    },
    ["大官道3|e,sw,w"] = {
      name = "大官道3",
      exits = {
        ["e"] = "城西桥|ed,w",
        ["w"] = "大官道4|e,w",
      },
    },
    ["大官道4|e,w"] = {
      name = "大官道4",
      exits = {
        ["e"] = "大官道3|e,sw,w",
        ["w"] = "函谷关|e,sw,w",
      },
    },
    ["大官道5|n,s"] = {
      name = "大官道5",
      exits = {
        ["n"] = "孟津|nu,s",
        ["s"] = "大官道6|n,su",
      },
    },
    ["大官道6|n,su"] = {
      name = "大官道6",
      exits = {
        ["n"] = "大官道5|n,s",
        ["su"] = "城北桥|nd,sd",
      },
    },

    -- ===== 其余节点（保持原顺序）=====
    ["小胡同4|e,n,s,w"] = {
      name = "小胡同4",
      exits = {
        ["e"] = "烟花铺|e,n,s,w",
        ["n"] = "西大街1|e,n,s,w",
        ["s"] = "小胡同1|e,n,s,w",
        ["w"] = "中原马车行|e",
      },
    },

    ["小胡同1|e,n,s,w"] = {
      name = "小胡同1",
      exits = {
        ["e"] = "小胡同2|e,n,s,w",
        ["n"] = "小胡同4|e,n,s,w",
        ["s"] = "小酒馆1|n",
        ["w"] = "城西集市|e,nw,s",
      },
    },

    ["小胡同2|e,n,s,w"] = {
      name = "小胡同2",
      exits = {
        ["e"] = "南大街1|e,n,nw,s,w",
        ["s"] = "私塾|n",
        ["w"] = "小胡同1|e,n,s,w",
      },
    },

    ["小胡同3|e,n,s,w"] = {
      name = "小胡同3",
      exits = {
        ["e"] = "小胡同|e,n,w",
        ["n"] = "府门|e,n,s,w",
        ["s"] = "盛昌行洛阳分店|n",
        ["w"] = "南大街1|e,n,nw,s,w",
      },
    },

    ["小胡同5|e,n,s,sw,w"] = {
      name = "小胡同5",
      exits = {
        ["e"] = "小酒馆|w",
        ["n"] = "东大街|e,n,s,w",
        ["s"] = "小胡同|e,n,w",
        ["sw"] = "僻静小巷|n,ne",
        ["w"] = "宠物竞技场|e,u",
      },
    },

    -- 东大街 重名：东大街 / 东大街1
    ["东大街|e,n,s,w"] = {
      name = "东大街",
      exits = {
        ["e"] = "洛阳东门|eu,n,s,w",
        ["n"] = "碎石路|ne,s",
        ["s"] = "小胡同5|e,n,s,sw,w",
        ["w"] = "东大街1|e,n,ne,s,w",
      },
    },

    ["僻静小巷|n,ne"] = {
      name = "僻静小巷",
      exits = {
        ["n"] = "僻静小巷|s",
        ["ne"] = "小胡同5|e,n,s,sw,w",
      },
    },

    ["僻静小巷|s"] = {
      name = "僻静小巷",
      exits = { ["s"] = "僻静小巷|n,ne" },
    },

    -- 小酒馆 重名：小酒馆 / 小酒馆1
    ["小酒馆|w"] = {
      name = "小酒馆",
      exits = { ["w"] = "小胡同5|e,n,s,sw,w" },
    },
    ["小酒馆1|n"] = {
      name = "小酒馆1",
      exits = { ["n"] = "小胡同1|e,n,s,w" },
    },

    ["宠物竞技场|e,u"] = {
      name = "宠物竞技场",
      exits = { ["e"] = "小胡同5|e,n,s,sw,w" },
    },

    ["盛昌行洛阳分店|n"] = {
      name = "盛昌行洛阳分店",
      exits = { ["n"] = "小胡同3|e,n,s,w" },
    },

    ["私塾|n"] = {
      name = "私塾",
      exits = { ["n"] = "小胡同2|e,n,s,w" },
    },

    ["城西集市|e,nw,s"] = {
      name = "城西集市",
      exits = {
        ["e"] = "小胡同1|e,n,s,w",
        ["nw;nw;nw"] = "万安寺大门|n,se",
        ["nw"] = "松林|nw,se",
        ["s"] = "洛阳宠物店|n",
        
      },
    },
    ["松林|nw,se"] = {
      name = "松林",
      exits = {
        ["se"] = "城西集市|e,nw,s",
      },
    },

    ["洛阳宠物店|n"] = {
      name = "洛阳宠物店",
      exits = { ["n"] = "城西集市|e,nw,s" },
    },

    ["烟花铺|e,n,s,w"] = {
      name = "烟花铺",
      exits = {
        ["e"] = "同仁堂|e,w",
        ["n"] = "四海钱庄|n,s",
        ["w"] = "小胡同4|e,n,s,w",
      },
    },

    ["中原马车行|e"] = {
      name = "中原马车行",
      exits = { ["e"] = "小胡同4|e,n,s,w" },
    },

    -- 南大街 重名：南大街 / 南大街1 / 南大街2
    ["南大街|e,n,s,w"] = {
      name = "南大街",
      exits = {
        ["e"] = "白马客栈|e,w",
        ["n"] = "洛阳中心广场|e,n,s,w",
        ["s"] = "南大街2|e,n,s,sw,w",
        ["w"] = "长乐坊|e",
      },
    },

    ["南大街1|e,n,nw,s,w"] = {
      name = "南大街1",
      exits = {
        ["e"] = "小胡同3|e,n,s,w",
        ["n"] = "南大街2|e,n,s,sw,w",
        ["nw"] = "牡丹园|ne,se",
        ["s"] = "洛阳南门|e,n,s,w",
        ["w"] = "小胡同2|e,n,s,w",
      },
    },

    ["南大街2|e,n,s,sw,w"] = {
      name = "南大街2",
      exits = {
        ["e"] = "壶记茶楼|w",
        ["n"] = "南大街|e,n,s,w",
        ["s"] = "南大街1|e,n,nw,s,w",
        ["sw"] = "牡丹园|ne,se",
        ["w"] = "同仁堂|e,w",
      },
    },

    ["伊川|e,n,se,sw"] = {
      name = "伊川",
      exits = { ["n"] = "伊阙|eu,n,s,w" },
    },

    ["伊阙|eu,n,s,w"] = {
      name = "伊阙",
      exits = {
        ["eu"] = "柳宗镇|s,wd",
        ["n"] = "洛阳南门|e,n,s,w",
        ["s"] = "伊川|e,n,se,sw",
        ["w"] = "官道|e,w",
      },
    },

    ["官道|e,w"] = {
      name = "官道",
      exits = {
        ["e"] = "伊阙|eu,n,s,w",
        ["w"] = "宜阳|e,sw",
      },
    },

    ["宜阳|e,sw"] = {
      name = "宜阳",
      exits = { ["e"] = "官道|e,w" },
    },

    ["柳宗镇|s,wd"] = {
      name = "柳宗镇",
      exits = {
        ["s"] = "薛神医家|n",
        ["wd"] = "伊阙|eu,n,s,w",
      },
    },

    ["洛阳南门|e,n,s,w"] = {
      name = "洛阳南门",
      exits = {
        ["n"] = "南大街1|e,n,nw,s,w",
        ["s"] = "伊阙|eu,n,s,w",
      },
    },

    ["薛神医家|n"] = {
      name = "薛神医家",
      exits = { ["n"] = "柳宗镇|s,wd" },
    },

    ["东大街1|e,n,ne,s,w"] = {
      name = "东大街1",
      exits = {
        ["e"] = "东大街|e,n,s,w",
        ["n"] = "庙会|enter,s",
        ["ne"] = "打铁铺|sw",
        ["s"] = "四海金店|n",
        ["w"] = "洛阳中心广场|e,n,s,w",
      },
    },

    ["城东桥|ed,wd"] = {
      name = "城东桥",
      exits = {
        ["ed"] = "大官道2|e,wu",
        ["wd"] = "洛阳东门|eu,n,s,w",
      },
    },

    ["巩县|n,s"] = {
      name = "巩县",
      exits = { ["s"] = "大官道|e,n,w" },
    },

    ["洛阳东门|eu,n,s,w"] = {
      name = "洛阳东门",
      exits = {
        ["eu"] = "城东桥|ed,wd",
        ["w"] = "东大街|e,n,s,w",
      },
    },

    ["虎牢关|ne,se,w"] = {
      name = "虎牢关",
      exits = { ["w"] = "大官道1|e,w" },
    },

    ["许家集|e,se,w"] = {
      name = "许家集",
      exits = {
        ["e"] = "大官道|e,n,w",
        ["w"] = "大官道2|e,wu",
      },
    },

    ["西大街|e,n,s,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "洛阳中心广场|e,n,s,w",
        ["n"] = "镖局大门|enter,s",
        ["s"] = "四海钱庄|n,s",
        ["w"] = "西大街1|e,n,s,w",
      },
    },

    ["西大街1|e,n,s,w"] = {
      name = "西大街1",
      exits = {
        ["e"] = "西大街|e,n,s,w",
        ["n"] = "王家大门|n,s",
        ["s"] = "小胡同4|e,n,s,w",
        ["w"] = "洛阳西门|e,n,ne,s,se,wu",
      },
    },

    ["四海金店|n"] = {
      name = "四海金店",
      exits = { ["n"] = "东大街1|e,n,ne,s,w" },
    },

    ["打铁铺|sw"] = {
      name = "打铁铺",
      exits = { ["sw"] = "东大街1|e,n,ne,s,w" },
    },

    ["庙会|enter,s"] = {
      name = "庙会",
      exits = {
        ["enter"] = "关帝庙|out",
        ["s"] = "东大街1|e,n,ne,s,w",
      },
    },

    ["关帝庙|out"] = {
      name = "关帝庙",
      exits = { ["out"] = "庙会|enter,s" },
    },

    ["函谷关|e,sw,w"] = {
      name = "函谷关",
      exits = { ["e"] = "大官道4|e,w" },
    },

    ["城西桥|ed,w"] = {
      name = "城西桥",
      exits = {
        ["ed"] = "洛阳西门|e,n,ne,s,se,wu",
        ["w"] = "大官道3|e,sw,w",
      },
    },

    ["当铺|n"] = {
      name = "当铺",
      exits = { ["n"] = "洛阳西门|e,n,ne,s,se,wu" },
    },

    ["武门|s"] = {
      name = "武门",
      exits = { ["s"] = "洛阳西门|e,n,ne,s,se,wu" },
    },

    ["洛阳西门|e,n,ne,s,se,wu"] = {
      name = "洛阳西门",
      exits = {
        ["e"] = "西大街1|e,n,s,w",
        ["n"] = "武门|s",
        ["s"] = "当铺|n",
        ["wu"] = "城西桥|ed,w",
      },
    },

    -- 北大街 重名：北大街 / 北大街1
    ["北大街|e,n,s,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "唐三彩|w",
        ["n"] = "北大街1|e,n,s,w",
        ["s"] = "洛阳中心广场|e,n,s,w",
        ["w"] = "望星楼|e,u",
      },
    },

    ["北大街1|e,n,s,w"] = {
      name = "北大街1",
      exits = {
        ["e"] = "富贵花圃|e,w",
        ["n"] = "洛阳北门|e,nu,s,w",
        ["s"] = "北大街|e,n,s,w",
        ["w"] = "唐记水果|e",
      },
    },

    ["王家大门|n,s"] = {
      name = "王家大门",
      exits = {
        ["n"] = "门廊|s",
        ["s"] = "西大街1|e,n,s,w",
      },
    },

    ["门廊|s"] = {
      name = "门廊",
      exits = { ["s"] = "王家大门|n,s" },
    },

    ["镖局大门|enter,s"] = {
      name = "镖局大门",
      exits = {
        ["enter"] = "龙门镖局|out",
        ["s"] = "西大街|e,n,s,w",
      },
    },

    ["龙门镖局|out"] = {
      name = "龙门镖局",
      exits = { ["out"] = "镖局大门|enter,s" },
    },

    ["唐记水果|e"] = {
      name = "唐记水果",
      exits = { ["e"] = "北大街1|e,n,s,w" },
    },

    ["唐三彩|w"] = {
      name = "唐三彩",
      exits = { ["w"] = "北大街|e,n,s,w" },
    },

    ["东卧房|w"] = {
      name = "东卧房",
      exits = { ["w"] = "内宅正厅|e,n,s,w" },
    },

    ["东角门|n,nw,w"] = {
      name = "东角门",
      exits = {
        ["n"] = "东院门房|n,s,w",
        ["nw"] = "卫士营1|se,w",
        ["w"] = "围墙1|e,w",
      },
    },

    ["东院客厅|n,s,w"] = {
      name = "东院客厅",
      exits = {
        ["n"] = "内宅前院|e,n,s,w",
        ["s"] = "东院门房|n,s,w",
      },
    },

    ["东院门房|n,s,w"] = {
      name = "东院门房",
      exits = {
        ["n"] = "东院客厅|n,s,w",
        ["s"] = "东角门|n,nw,w",
        ["w;w"] = "回事厅|e,n,s,w",
      },
    },

    ["书斋|n,s"] = {
      name = "书斋",
      exits = {
        ["n"] = "经堂|ne,s",
        ["s"] = "宜宾馆|e,n,s",
      },
    },

    ["仓廪|e"] = {
      name = "仓廪",
      exits = { ["e"] = "内宅前院|e,n,s,w" },
    },

    ["内书房|w"] = {
      name = "内书房",
      exits = { ["w"] = "内宅后院|e,ne,s,w" },
    },

    ["内宅前院|e,n,s,w"] = {
      name = "内宅前院",
      exits = {
        ["e"] = "膳食处|w",
        ["n"] = "内宅正厅|e,n,s,w",
        ["s"] = "东院客厅|n,s,w",
        ["w"] = "仓廪|e",
      },
    },

    ["内宅后院|e,ne,s,w"] = {
      name = "内宅后院",
      exits = {
        ["e"] = "内书房|w",
        ["ne"] = "王府后门|sw",
        ["s"] = "内宅正厅|e,n,s,w",
        ["w"] = "回廊|e,w",
      },
    },

    ["内宅正厅|e,n,s,w"] = {
      name = "内宅正厅",
      exits = {
        ["e"] = "东卧房|w",
        ["n"] = "内宅后院|e,ne,s,w",
        ["s"] = "内宅前院|e,n,s,w",
      },
    },

    -- 卫士营 重名：卫士营 / 卫士营1
    ["卫士营|e,w"] = {
      name = "卫士营",
      exits = {
        ["e"] = "门岗|e,n,s,w",
        ["w"] = "小校场|e,n",
      },
    },
    ["卫士营1|se,w"] = {
      name = "卫士营1",
      exits = {
        ["se"] = "东角门|n,nw,w",
        ["w"] = "门岗|e,n,s,w",
      },
    },

    ["后花园|e,nu,s,w"] = {
      name = "后花园",
      exits = {
        ["e"] = "燕怡堂|e,w",
        ["w"] = "明月楼|e,sw",
      },
    },

    ["回事厅|e,n,s,w"] = {
      name = "回事厅",
      exits = {
        ["e;e"] = "东院门房|n,s,w",
        ["s"] = "门岗|e,n,s,w",
        ["w;w"] = "执事处|e,n,s",
      },
    },

    ["回廊|e,w"] = {
      name = "回廊",
      exits = {
        ["e"] = "内宅后院|e,ne,s,w",
        ["w"] = "燕怡堂|e,w",
      },
    },

    -- 围墙 重名：围墙 / 围墙1
    ["围墙|e,w"] = {
      name = "围墙",
      exits = {
        ["e"] = "府门|e,n,s,w",
        ["w"] = "西角门|e",
      },
    },
    ["围墙1|e,w"] = {
      name = "围墙1",
      exits = {
        ["e"] = "东角门|n,nw,w",
        ["w"] = "府门|e,n,s,w",
      },
    },

    ["西角门|e"] = {
      name = "西角门",
      exits = { ["e"] = "围墙|e,w" },
    },

    ["宜宾馆|e,n,s"] = {
      name = "宜宾馆",
      exits = {
        ["n"] = "书斋|n,s",
        ["s"] = "执事处|e,n,s",
      },
    },

    ["小校场|e,n"] = {
      name = "小校场",
      exits = {
        ["e"] = "卫士营|e,w",
        ["n"] = "执事处|e,n,s",
      },
    },

    ["府门|e,n,s,w"] = {
      name = "府门",
      exits = {
        ["e"] = "围墙|e,w",
        ["n"] = "门岗|e,n,s,w",
        ["s"] = "小胡同3|e,n,s,w",
        ["w"] = "围墙1|e,w",
      },
    },

    ["执事处|e,n,s"] = {
      name = "执事处",
      exits = {
        ["e;e"] = "回事厅|e,n,s,w",
        ["n"] = "宜宾馆|e,n,s",
        ["s"] = "小校场|e,n",
      },
    },

    ["明月楼|e,sw"] = {
      name = "明月楼",
      exits = {
        ["e"] = "后花园|e,nu,s,w",
        ["sw"] = "经堂|ne,s",
      },
    },

    ["燕怡堂|e,w"] = {
      name = "燕怡堂",
      exits = {
        ["e"] = "回廊|e,w",
        ["w"] = "后花园|e,nu,s,w",
      },
    },

    ["王府后门|sw"] = {
      name = "王府后门",
      exits = { ["sw"] = "内宅后院|e,ne,s,w" },
    },

    ["经堂|ne,s"] = {
      name = "经堂",
      exits = {
        ["ne"] = "明月楼|e,sw",
        ["s"] = "书斋|n,s",
      },
    },

    ["膳食处|w"] = {
      name = "膳食处",
      exits = { ["w"] = "内宅前院|e,n,s,w" },
    },

    ["门岗|e,n,s,w"] = {
      name = "门岗",
      exits = {
        ["e"] = "卫士营1|se,w",
        ["n"] = "回事厅|e,n,s,w",
        ["s"] = "府门|e,n,s,w",
        ["w"] = "卫士营|e,w",
      },
    },

    ["同仁堂|e,w"] = {
      name = "同仁堂",
      exits = {
        ["e"] = "南大街2|e,n,s,sw,w",
        ["w"] = "烟花铺|e,n,s,w",
      },
    },

    ["四海钱庄|n,s"] = {
      name = "四海钱庄",
      exits = {
        ["n"] = "西大街|e,n,s,w",
        ["s"] = "烟花铺|e,n,s,w",
      },
    },

    ["壶记茶楼|w"] = {
      name = "壶记茶楼",
      exits = { ["w"] = "南大街2|e,n,s,sw,w" },
    },

    -- 这里的“客房|w”属于第三个客房
    ["客房3|w"] = {
      name = "客房3",
      exits = { ["w"] = "白马客栈|e,w" },
    },

    ["洛阳中心广场|e,n,s,w"] = {
      name = "洛阳中心广场",
      exits = {
        ["e"] = "东大街1|e,n,ne,s,w",
        ["n"] = "北大街|e,n,s,w",
        ["s"] = "南大街|e,n,s,w",
        ["w"] = "西大街|e,n,s,w",
      },
    },

    ["牡丹园|ne,se"] = {
      name = "牡丹园",
      exits = {
        ["ne"] = "南大街2|e,n,s,sw,w",
        ["se"] = "南大街1|e,n,nw,s,w",
      },
    },

    ["白马客栈|e,w"] = {
      name = "白马客栈",
      exits = {
        ["e"] = "客房3|w",
        ["w"] = "南大街|e,n,s,w",
      },
    },

    ["长乐坊|e"] = {
      name = "长乐坊",
      exits = { ["e"] = "南大街|e,n,s,w" },
    },

    ["小巷尽头|n,s"] = {
      name = "小巷尽头",
      exits = { ["s"] = "绿竹巷|n,sw" },
    },

    ["碎石路|ne,s"] = {
      name = "碎石路",
      exits = {
        ["ne"] = "绿竹巷|n,sw",
        ["s"] = "东大街|e,n,s,w",
      },
    },

    ["绿竹巷|n,sw"] = {
      name = "绿竹巷",
      exits = {
        ["n"] = "小巷尽头|n,s",
        ["sw"] = "碎石路|ne,s",
      },
    },

    ["中京家具坊|s"] = {
      name = "中京家具坊",
      exits = { ["s"] = "天茗喜铺|n,se,w" },
    },

    ["天茗喜铺|n,se,w"] = {
      name = "天茗喜铺",
      exits = {
        ["n"] = "中京家具坊|s",
        ["se"] = "小舍|n,nw,s",
        ["w"] = "富贵花圃|e,w",
      },
    },

    ["富贵花圃|e,w"] = {
      name = "富贵花圃",
      exits = {
        ["e"] = "天茗喜铺|n,se,w",
        ["w"] = "北大街1|e,n,s,w",
      },
    },

    ["小巷|n,s"] = {
      name = "小巷",
      exits = { ["s"] = "小舍|n,nw,s" },
    },

    ["小舍|n,nw,s"] = {
      name = "小舍",
      exits = {
        ["n"] = "小巷|n,s",
        ["nw"] = "天茗喜铺|n,se,w",
      },
    },

    ["宴客厅门厅|e,w"] = {
      name = "宴客厅门厅",
      exits = { ["e"] = "望星楼四层|d,w" },
    },

    ["望星楼|e,u"] = {
      name = "望星楼",
      exits = {
        ["e"] = "北大街|e,n,s,w",
        ["u"] = "望星楼二层|d,u",
      },
    },

    ["望星楼三层|d,u"] = {
      name = "望星楼三层",
      exits = {
        ["d"] = "望星楼二层|d,u",
        ["u"] = "望星楼四层|d,w",
      },
    },

    ["望星楼二层|d,u"] = {
      name = "望星楼二层",
      exits = {
        ["d"] = "望星楼|e,u",
        ["u"] = "望星楼三层|d,u",
      },
    },

    ["望星楼四层|d,w"] = {
      name = "望星楼四层",
      exits = {
        ["d"] = "望星楼三层|d,u",
        ["w"] = "宴客厅门厅|e,w",
      },
    },

    ["城北桥|nd,sd"] = {
      name = "城北桥",
      exits = {
        ["nd"] = "大官道6|n,su",
        ["sd"] = "洛阳北门|e,nu,s,w",
      },
    },

    ["孟津|nu,s"] = {
      name = "孟津",
      exits = { ["s"] = "大官道5|n,s" },
    },

    ["洛阳北门|e,nu,s,w"] = {
      name = "洛阳北门",
      exits = {
        ["nu"] = "城北桥|nd,sd",
        ["s"] = "北大街1|e,n,s,w",
      },
    },
  },
}

-- 房间名 -&gt; 拼音缩写（放到结构外面）
mapper.maps["luoyang"].mapAliases = {
  ["宝相精舍"]   = "bxjs",
  ["小屋"]       = "xw",
  ["小院"]       = "xy",
  ["客房1"]      = "kf1",
  ["客房2"]      = "kf2",
  ["客房3"]      = "kf3",
  ["万安塔"]     = "wat",
  ["万安寺后院"] = "washy",
  ["万安寺大门"] = "wasdm",
  ["伽蓝殿"]     = "jld",
  ["卧佛殿"]     = "wfd",
  ["大雄宝殿"]   = "dxbd",
  ["天王殿"]     = "twd",
  ["寺内小路"]   = "snxl",
  ["寺内小路1"]  = "snxl1",
  ["寺内广场"]   = "sngc",
  ["碑林"]       = "bl",
  ["菜园"]       = "cy",
  ["观音堂"]     = "gyt",
  ["讲经台"]     = "jjt",
  ["钟楼"]       = "zl",
  ["鼓楼"]       = "gl",
  ["大厅"]       = "dt",
  ["棺材店内室"] = "gcdns",
  ["棺材店"]     = "gcd",
  ["杨柳胡同"]   = "ylht",
  ["杨柳胡同1"]  = "ylht1",
  ["小胡同"]     = "xht",
  ["小胡同1"]    = "xht1",
  ["小胡同2"]    = "xht2",
  ["小胡同3"]    = "xht3",
  ["小胡同4"]    = "xht4",
  ["小胡同5"]    = "xht5",
  ["大官道"]     = "dgd",
  ["大官道1"]    = "dgd1",
  ["大官道2"]    = "dgd2",
  ["大官道3"]    = "dgd3",
  ["大官道4"]    = "dgd4",
  ["大官道5"]    = "dgd5",
  ["大官道6"]    = "dgd6",
  ["城西集市"]   = "cxjs",
  ["洛阳宠物店"] = "lycwd",
  ["烟花铺"]     = "yhp",
  ["中原马车行"] = "mch",
  ["南大街"]     = "ndj",
  ["南大街1"]    = "ndj1",
  ["南大街2"]    = "ndj2",
  ["东大街"]     = "ddj",
  ["东大街1"]    = "ddj1",
  ["僻静小巷"]   = "pjxx",
  ["宠物竞技场"] = "cwjcc",
  ["盛昌行洛阳分店"] = "schlyfd",
  ["私塾"]       = "ss",
  ["小酒馆"]     = "xjg",
  ["小酒馆1"]    = "xjg1",
  ["同仁堂"]     = "trt",
  ["四海钱庄"]   = "shqz",
  ["壶记茶楼"]   = "hjcl",
  ["白马客栈"]   = "bmkz",
  ["长乐坊"]     = "clf",
  ["伊川"]       = "yc",
  ["伊阙"]       = "yq",
  ["官道"]       = "gd",
  ["宜阳"]       = "yy",
  ["柳宗镇"]     = "lzz",
  ["洛阳南门"]   = "lynm",
  ["薛神医家"]   = "xsyj",
  ["城东桥"]     = "cdq",
  ["巩县"]       = "gx",
  ["洛阳东门"]   = "lydm",
  ["虎牢关"]     = "hlg",
  ["许家集"]     = "xjj",
  ["西大街"]     = "xdj",
  ["西大街1"]    = "xdj1",
  ["四海金店"]   = "shjd",
  ["打铁铺"]     = "dtp",
  ["庙会"]       = "mh",
  ["关帝庙"]     = "gdm",
  ["函谷关"]     = "hgg",
  ["城西桥"]     = "cxq",
  ["当铺"]       = "dp",
  ["武门"]       = "wm",
  ["洛阳西门"]   = "lyxm",
  ["北大街"]     = "bdj",
  ["北大街1"]    = "bdj1",
  ["唐记水果"]   = "tjsG",
  ["唐三彩"]     = "tsc",
  ["东卧房"]     = "dwf",
  ["东角门"]     = "djm",
  ["东院客厅"]   = "dykt",
  ["东院门房"]   = "dymf",
  ["书斋"]       = "sz",
  ["仓廪"]       = "cl",
  ["内书房"]     = "nsf",
  ["内宅前院"]   = "nzqy",
  ["内宅后院"]   = "nzhy",
  ["内宅正厅"]   = "nzzt",
  ["卫士营"]     = "wsy",
  ["卫士营1"]    = "wsy1",
  ["后花园"]     = "hhy",
  ["回事厅"]     = "hst",
  ["回廊"]       = "hl",
  ["围墙"]       = "wq",
  ["围墙1"]      = "wq1",
  ["西角门"]     = "xjm",
  ["宜宾馆"]     = "ybg",
  ["小校场"]     = "xxc",
  ["府门"]       = "fm",
  ["执事处"]     = "zsc",
  ["明月楼"]     = "myl",
  ["燕怡堂"]     = "yyt",
  ["王府后门"]   = "wfhM",
  ["经堂"]       = "jt",
  ["膳食处"]     = "ssc",
  ["门岗"]       = "mg",
  ["洛阳中心广场"] = "origin",
  ["牡丹园"]     = "mdy",
  ["小巷尽头"]   = "xxjt",
  ["碎石路"]     = "ssl",
  ["绿竹巷"]     = "lzx",
  ["中京家具坊"] = "zjjjf",
  ["天茗喜铺"]   = "tmxp",
  ["富贵花圃"]   = "fghp",
  ["小巷"]       = "xx",
  ["小舍"]       = "xs",
  ["宴客厅门厅"] = "yktmt",
  ["望星楼"]     = "wxl",
  ["望星楼二层"] = "wxlec",
  ["望星楼三层"] = "wxlsc",
  ["望星楼四层"] = "wxlsc4",
  ["城北桥"]     = "cbq",
  ["孟津"]       = "mj",
  ["洛阳北门"]   = "lybm",
  ["天地会暗道"]   = "tdhad",
  ["松林"]   = "sl",
  ["南厢房"]   = "nxf",
  ["北厢房"]   = "bxf",
  
  
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>扬州 - yz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["yz"] = {
  region = {
    key  = "yz",      -- 区域代号，用在 goto wx.xxx 里
    name = "扬州",    -- 纯注释/显示用
  },

  mapNodes = {

    ["北门|e,n,ne,s,se,w"] = {
      name = "北门",
      exits = {
        ["e"] = "城北军营|w",
        ["n"] = "青石大道|e,n,nw,s",
        ["ne"] = "天宁寺|enter,sw",
        ["s"] = "北大街1|e,n,s,w",
      },
    },

    ["青石大道|e,n,nw,s"] = {
      name = "青石大道1",
      exits = {
        ["s"] = "北门|e,n,ne,s,se,w",
      },
    },

    ["天宁寺|enter,sw"] = {
      name = "天宁寺",
      exits = {
        ["enter"] = "天宁寺内|out",
        ["sw"] = "北门|e,n,ne,s,se,w",
      },
    },

    ["天宁寺内|out"] = {
      name = "天宁寺内",
      exits = {
        ["out"] = "天宁寺|enter,sw",
      },
    },

    ["城北军营|w"] = {
      name = "城北军营",
      exits = {
        ["w"] = "北门|e,n,ne,s,se,w",
      },
    },

    ["北大街1|e,n,s,w"] = {
      name = "北大街1",
      exits = {
        ["e"] = "醉仙楼|u,w",
        ["n"] = "北门|e,n,ne,s,se,w",
        ["s"] = "北大街|e,n,s,se,w",
        ["w"] = "武庙|d,e,nw,u,w",
      },
    },

    ["武庙|d,e,nw,u,w"] = {
      name = "武庙",
      exits = {
        ["e"] = "北大街1|e,n,s,w",
      },
    },

    ["醉仙楼|u,w"] = {
      name = "醉仙楼",
      exits = {
        ["u"] = "醉仙楼二楼|d,e,u,w",
        ["w"] = "北大街1|e,n,s,w",
      },
    },

    ["醉仙楼二楼|d,e,u,w"] = {
      name = "醉仙楼二楼",
      exits = {
        ["d"] = "醉仙楼|u,w",
        ["e"] = "醉仙楼雅座单间|w",
        ["u"] = "喜福堂|d",
        ["w"] = "宴客厅门厅|e,w",
      },
    },

    ["喜福堂|d"] = {
      name = "喜福堂",
      exits = {
        ["d"] = "醉仙楼二楼|d,e,u,w",
      },
    },

    ["醉仙楼雅座单间|w"] = {
      name = "醉仙楼雅座单间",
      exits = {
        ["w"] = "醉仙楼二楼|d,e,u,w",
      },
    },

    ["宴客厅门厅|e,w"] = {
      name = "宴客厅门厅",
      exits = {
        ["e"] = "醉仙楼二楼|d,e,u,w",
      },
    },

    ["北大街|e,n,s,se,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "客店|u,w",
        ["n"] = "北大街1|e,n,s,w",
        ["s"] = "中央广场|e,n,s,u,w",
        ["se"] = "比武场|e,nw",
        ["w"] = "扬州钱庄|e,s",
      },
    },

    ["比武场|e,nw"] = {
      name = "比武场",
      exits = {
        ["nw"] = "北大街|e,n,s,se,w",
      },
    },

    ["扬州钱庄|e,s"] = {
      name = "扬州钱庄",
      exits = {
        ["e"] = "北大街|e,n,s,se,w",
        ["s"] = "扬州金店|n",
      },
    },

    ["扬州金店|n"] = {
      name = "扬州金店",
      exits = {
        ["n"] = "扬州钱庄|e,s",
      },
    },

    ["客店|u,w"] = {
      name = "客店",
      exits = {
        ["u"] = "客店二楼|d,enter",
        ["w"] = "北大街|e,n,s,se,w",
      },
    },

    ["客店二楼|d,enter"] = {
      name = "客店二楼",
      exits = {
        ["d"] = "客店|u,w",
        ["enter"] = "客店里间|out",
      },
    },

    ["客店里间|out"] = {
      name = "客店里间",
      exits = {
        ["out"] = "客店二楼|d,enter",
      },
    },

    ["东大街|e,n,s,w"] = {
      name = "东大街",
      exits = {
        ["e"] = "东大街1|e,n,s,w",
        ["n"] = "书院|n,s,w",
        ["s"] = "杂货铺|n",
        ["w"] = "中央广场|e,n,s,u,w",
      },
    },

    ["书院|n,s,w"] = {
      name = "书院",
      exits = {
        ["n"] = "敬师堂|s",
        ["s"] = "东大街|e,n,s,w",
        ["w"] = "天月书肆|e",
      },
    },

    ["天月书肆|e"] = {
      name = "天月书肆",
      exits = {
        ["e"] = "书院|n,s,w",
      },
    },

    ["敬师堂|s"] = {
      name = "敬师堂",
      exits = {
        ["s"] = "书院|n,s,w",
      },
    },

    ["杂货铺|n"] = {
      name = "杂货铺",
      exits = {
        ["n"] = "东大街|e,n,s,w",
      },
    },

    ["东大街1|e,n,s,w"] = {
      name = "东大街1",
      exits = {
        ["e"] = "东大街2|e,n,s,w",
        ["n"] = "药铺|n,s",
        ["s"] = "打铁铺|n,s",
        ["w"] = "东大街|e,n,s,w",
      },
    },

    ["打铁铺|n,s"] = {
      name = "打铁铺",
      exits = {
        ["n"] = "东大街1|e,n,s,w",
        ["s"] = "打铁铺内室|n",
      },
    },

    ["打铁铺内室|n"] = {
      name = "打铁铺内室",
      exits = {
        ["n"] = "打铁铺|n,s",
      },
    },

    ["药铺|n,s"] = {
      name = "药铺",
      exits = {
        ["n"] = "配药房|s",
        ["s"] = "东大街1|e,n,s,w",
      },
    },

    ["配药房|s"] = {
      name = "配药房",
      exits = {
        ["s"] = "药铺|n,s",
      },
    },

    ["东大街2|e,n,s,w"] = {
      name = "东大街2",
      exits = {
        ["e"] = "东门|n,ne,s,se,w",
        ["n"] = "市集|n,s",
        ["s"] = "宠物店|n",
        ["w"] = "东大街1|e,n,s,w",
      },
    },

    ["宠物店|n"] = {
      name = "宠物店",
      exits = {
        ["n"] = "东大街2|e,n,s,w",
      },
    },

    ["市集|n,s"] = {
      name = "市集",
      exits = {
        ["n"] = "荣昌交易行|s",
        ["s"] = "东大街2|e,n,s,w",
      },
    },

    ["荣昌交易行|s"] = {
      name = "荣昌交易行",
      exits = {
        ["s"] = "市集|n,s",
      },
    },

    ["庄门|n,s"] = {
      name = "庄门",
      exits = {
        ["n"] = "东门|n,ne,s,se,w",
        ["s"] = "正气山庄|n,w",
      },
    },

    ["正气山庄|n,w"] = {
      name = "正气山庄",
      exits = {
        ["n"] = "庄门|n,s",
        ["w"] = "较技场大门|e,u,w",
      },
    },

    ["看台|d"] = {
      name = "看台",
      exits = {
        ["d"] = "较技场大门|e,u,w",
      },
    },

    ["较技场|e"] = {
      name = "较技场",
      exits = {
        ["e"] = "较技场大门|e,u,w",
      },
    },

    ["较技场大门|e,u,w"] = {
      name = "较技场大门",
      exits = {
        ["e"] = "正气山庄|n,w",
        ["u"] = "看台|d",
        ["w"] = "较技场|e",
      },
    },

    ["中央广场|e,n,s,u,w"] = {
      name = "中央广场",
      exits = {
        ["e"] = "东大街|e,n,s,w",
        ["n"] = "北大街|e,n,s,se,w",
        ["s"] = "南大街|e,n,s,w",
        ["w"] = "西大街|e,n,s,w",
      },
    },

    ["青竹林|e,n,s,w"] = {
      name = "青竹林",
      exits = {
        ["s"] = "东门|n,ne,s,se,w",
        ["e;n;w;n;e;w;n"] = "土地庙|enter,s",
      },
    },

    ["土地庙|enter,s"] = {
      name = "土地庙",
      exits = {
        ["enter"] = "暗道|e,out",
        ["s"] = "青竹林|e,n,s,w",
      },
    },

    ["暗道|e,out"] = {
      name = "暗道",
      exits = {
        ["out"] = "土地庙|enter,s",
      },
    },

    ["东门|n,ne,s,se,w"] = {
      name = "东门",
      exits = {
        ["n"] = "青竹林|e,n,s,w",
        ["s"] = "庄门|n,s",
        ["w"] = "东大街2|e,n,s,w",
      },
    },

    ["南大街|e,n,s,w"] = {
      name = "南大街",
      exits = {
        ["e"] = "当铺|e,n,s,w",
        ["s"] = "南大街1|e,n,s,w",
        ["n"] = "中央广场|e,n,s,u,w",
        ["w"] = "赌场|d,e,u",
      },
    },

["麻将馆|u"] = {
  name = "麻将馆",
  exits = {
    ["u"] = "赌场|d,e,u",
  },
},

    ["赌场|d,e,u"] = {
      name = "赌场",
      exits = {
        ["d"] = "麻将馆|u",
        ["e"] = "南大街|e,n,s,w",
        ["u"] = "赌场|d,e,n,s,w",
      },
    },
 ["拱猪房|s"] = {
  name = "拱猪房",
  exits = {
    ["s"] = "赌场|d,e,n,s,w",
  },
}, 
 ["赌场|d,e,n,s,w"] = {
  name = "赌场",
  exits = {
    ["d"] = "赌场|d,e,u",
    ["n"] = "拱猪房|s",
  },
},   

    ["南大街1|e,n,s,w"] = {
      name = "南大街1",
      exits = {
        ["e"] = "丽春院|d,u,w",
        ["n"] = "南大街|e,n,s,w",
        ["s"] = "南大街2|e,n,s,w",
        ["w"] = "春来茶馆|e,w",
      },
    },

    ["库房|w"] = {
      name = "库房",
      exits = {
        ["w"] = "当铺|e,n,s,w",
      },
    },

    ["当铺|e,n,s,w"] = {
      name = "当铺",
      exits = {
        ["e"] = "库房|w",
        ["n"] = "拍卖行|s",
        ["s"] = "荣宝斋|e,n",
        ["w"] = "南大街|e,n,s,w",
      },
    },

    ["拍卖行|s"] = {
      name = "拍卖行",
      exits = {
        ["s"] = "当铺|e,n,s,w",
      },
    },

    ["荣宝斋|e,n"] = {
      name = "荣宝斋",
      exits = {
        ["n"] = "当铺|e,n,s,w",
      },
    },

    ["南大街2|e,n,s,w"] = {
      name = "南大街2",
      exits = {
        ["e"] = "云台街|e,n,s,w",
        ["n"] = "南大街1|e,n,s,w",
        ["s"] = "南门|e,n,su,w",
        ["w"] = "盛昌总行|d,e,n,s,w",
      },
    },

    ["云台街|e,n,s,w"] = {
      name = "云台街",
      exits = {
        ["e"] = "云台街1|e,n,s,w",
        ["n"] = "酒店|s",
        ["s"] = "小吃店|n",
        ["w"] = "南大街2|e,n,s,w",
      },
    },

    ["小吃店|n"] = {
      name = "小吃店",
      exits = {
        ["n"] = "云台街|e,n,s,w",
      },
    },

    ["酒店|s"] = {
      name = "酒店",
      exits = {
        ["s"] = "云台街|e,n,s,w",
      },
    },

    ["云台街1|e,n,s,w"] = {
      name = "云台街1",
      exits = {
        ["e"] = "云台街2|e,n,s,w",
        ["n"] = "鞋帽店|s",
        ["s"] = "衣服铺|n",
        ["w"] = "云台街|e,n,s,w",
      },
    },

    ["衣服铺|n"] = {
      name = "衣服铺",
      exits = {
        ["n"] = "云台街1|e,n,s,w",
      },
    },

    ["鞋帽店|s"] = {
      name = "鞋帽店",
      exits = {
        ["s"] = "云台街1|e,n,s,w",
      },
    },

    ["云台街2|e,n,s,w"] = {
      name = "云台街2",
      exits = {
        ["e"] = "云台街尾|w",
        ["n"] = "花店|s",
        ["s"] = "茶庄|n",
        ["w"] = "云台街1|e,n,s,w",
      },
    },

    ["茶庄|n"] = {
      name = "茶庄",
      exits = {
        ["n"] = "云台街2|e,n,s,w",
      },
    },

    ["花店|s"] = {
      name = "花店",
      exits = {
        ["s"] = "云台街2|e,n,s,w",
      },
    },

    ["云台街尾|w"] = {
      name = "云台街尾",
      exits = {
        ["w"] = "云台街2|e,n,s,w",
      },
    },

    ["兵营大门|n,s"] = {
      name = "兵营大门",
      exits = {
        ["n"] = "西大街|e,n,s,w",
      },
    },

    ["西大街2|e,n,s,w"] = {
      name = "西大街2",
      exits = {
        ["e"] = "西大街1|e,n,s,w",
        ["n"] = "飞龙帮总部|s",
        ["s"] = "红娘庄大门|e,n,se",
        ["w"] = "西门|e,n,nw,s",
      },
    },

    ["西门|e,n,nw,s"] = {
      name = "西门",
      exits = {
        ["e"] = "西大街2|e,n,s,w",
      },
    },

    ["飞龙帮总部|s"] = {
      name = "飞龙帮总部",
      exits = {
        ["s"] = "西大街2|e,n,s,w",
      },
    },

    ["西大街|e,n,s,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "中央广场|e,n,s,u,w",
        ["n"] = "衙门大门|n,s,w",
        ["s"] = "兵营大门|n,s",
        ["w"] = "西大街1|e,n,s,w",
      },
    },

    ["衙门大门|n,s,w"] = {
      name = "衙门大门",
      exits = {
        ["n"] = "",
        ["s"] = "西大街|e,n,s,w",
        ["w"] = "大堂|e",
      },
    },

    ["大堂|e"] = {
      name = "大堂",
      exits = {
        ["e"] = "衙门大门|n,s,w",
      },
    },

    ["西大街1|e,n,s,w"] = {
      name = "西大街1",
      exits = {
        ["e"] = "西大街|e,n,s,w",
        ["n"] = "财主大门|n,s",
        ["s"] = "奇珍阁|n",
        ["w"] = "西大街2|e,n,s,w",
      },
    },

    ["奇珍阁|n"] = {
      name = "奇珍阁",
      exits = {
        ["n"] = "西大街1|e,n,s,w",
      },
    },

    ["财主后院|s,w"] = {
      name = "财主后院",
      exits = {
        ["s"] = "财主大院|n,s",
        ["w"] = "财主西厢|e",
      },
    },

    ["财主大门|n,s"] = {
      name = "财主大门",
      exits = {
        ["n"] = "财主大院|n,s",
        ["s"] = "西大街1|e,n,s,w",
      },
    },

    ["财主大院|n,s"] = {
      name = "财主大院",
      exits = {
        ["n"] = "财主后院|s,w",
        ["s"] = "财主大门|n,s",
      },
    },

    ["财主西厢|e"] = {
      name = "财主西厢",
      exits = {
        ["e"] = "财主后院|s,w",
      },
    },

    ["中原马车行|e,nw"] = {
      name = "中原马车行",
      exits = {
        ["e"] = "春来茶馆|e,w",
        ["nw"] = "大武城巷口|nw,se",
      },
    },

    ["南门|e,n,su,w"] = {
      name = "南门",
      exits = {
        ["n"] = "南大街2|e,n,s,w",
        ["su"] = "青石大道|e,nd,se,w,wu",
      },
    },

    ["青石大道|e,nd,se,w,wu"] = {
      name = "青石大道2",
      exits = {
        ["e"] = "小酒馆|w",
        ["nd"] = "南门|e,n,su,w",
        ["se"] = "青石大道|nw,su,w",
      },
    },

    ["青石大道|nw,su,w"] = {
      name = "青石大道3",
      exits = {
        ["nw"] = "青石大道|e,nd,se,w,wu",
      },
    },

    ["小酒馆|w"] = {
      name = "小酒馆",
      exits = {
        ["w"] = "青石大道|e,nd,se,w,wu",
      },
    },

    ["垃圾站|u"] = {
      name = "垃圾站",
      exits = {
        ["u"] = "盛昌总行|d,e,n,s,w",
      },
    },

    ["按摩房|n"] = {
      name = "按摩房",
      exits = {
        ["n"] = "浴室走廊|e,out,s,w",
      },
    },

    ["放映厅|out"] = {
      name = "放映厅",
      exits = {
        ["out"] = "放映厅入口|enter,s",
      },
    },

    ["放映厅入口|enter,s"] = {
      name = "放映厅入口",
      exits = {
        ["enter"] = "放映厅|out",
        ["s"] = "盛昌总行|d,e,n,s,w",
      },
    },

    ["浴室走廊|e,out,s,w"] = {
      name = "浴室走廊",
      exits = {
        ["e"] = "男浴室|w",
        ["out"] = "贵妃浴场|e,enter",
        ["s"] = "按摩房|n",
      },
    },

    ["男浴室|w"] = {
      name = "男浴室",
      exits = {
        ["w"] = "浴室走廊|e,out,s,w",
      },
    },

    ["盛昌总行|d,e,n,s,w"] = {
      name = "盛昌总行",
      exits = {
        ["d"] = "垃圾站|u",
        ["e"] = "南大街2|e,n,s,w",
        ["n"] = "放映厅入口|enter,s",
        ["s"] = "驿站|n",
        ["w"] = "贵妃浴场|e,enter",
      },
    },

    ["贵妃浴场|e,enter"] = {
      name = "贵妃浴场",
      exits = {
        ["e"] = "盛昌总行|d,e,n,s,w",
        ["enter"] = "浴室走廊|e,out,s,w",
      },
    },

    ["驿站|n"] = {
      name = "驿站",
      exits = {
        ["n"] = "盛昌总行|d,e,n,s,w",
      },
    },

    ["丽春院|d,u,w"] = {
      name = "丽春院",
      exits = {
        ["d"] = "丽春院密室|ed,u",
        ["u"] = "宴客厅走廊|d,n",
        ["w"] = "南大街1|e,n,s,w",
      },
    },

    ["丽春院密室|ed,u"] = {
      name = "丽春院密室",
      exits = {
        ["ed"] = "地下城东大街|n,s,wu",
        ["u"] = "丽春院|d,u,w",
      },
    },

    ["地下城东大街|n,s,wu"] = {
      name = "地下城东大街",
      exits = {
        ["n"] = "地下城铁铺|s",
        ["s"] = "地下城铁铺|n",
        ["wu"] = "丽春院密室|ed,u",
      },
    },

    ["地下城铁铺|n"] = {
      name = "地下城铁铺1",
      exits = {
        ["n"] = "地下城东大街|n,s,wu",
      },
    },

    ["地下城铁铺|s"] = {
      name = "地下城铁铺2",
      exits = {
        ["s"] = "地下城东大街|n,s,wu",
      },
    },

    ["宴客厅走廊|d,n"] = {
      name = "宴客厅走廊",
      exits = {
        ["d"] = "丽春院|d,u,w",
      },
    },

    ["大武城巷口|nw,se"] = {
      name = "大武城巷口",
      exits = {
        ["nw"] = "红娘庄大门|e,n,se",
        ["se"] = "中原马车行|e,nw",
      },
    },

    ["姻缘堂|w"] = {
      name = "姻缘堂",
      exits = {
        ["w"] = "红娘堂|e,w",
      },
    },

    ["春来茶馆|e,w"] = {
      name = "春来茶馆",
      exits = {
        ["e"] = "南大街1|e,n,s,w",
        ["w"] = "中原马车行|e,nw",
      },
    },

    ["红娘堂|e,w"] = {
      name = "红娘堂",
      exits = {
        ["e"] = "姻缘堂|w",
        ["w"] = "红娘庄走廊|e,w",
      },
    },

    ["红娘庄大门|e,n,se"] = {
      name = "红娘庄大门",
      exits = {
        ["e"] = "红娘庄走廊|e,w",
        ["n"] = "西大街2|e,n,s,w",
        ["se"] = "大武城巷口|nw,se",
      },
    },

    ["红娘庄走廊|e,w"] = {
      name = "红娘庄走廊",
      exits = {
        ["e"] = "红娘堂|e,w",
        ["w"] = "红娘庄大门|e,n,se",
      },
    },

  },
}

-- ✅ mapAliases：覆盖全部房间名（key=房间name，value=拼音缩写/短码）
mapper.maps["yz"].mapAliases = {

  -- ===== 原点 =====
  ["中央广场"] = "origin",

  -- ===== 北区 =====
  ["北门"]     = "bm",
  ["北大街"]   = "bdj",
  ["北大街1"]  = "bdj1",
  ["城北军营"] = "cbjy",
  ["天宁寺"]   = "tns",
  ["天宁寺内"] = "tnsn",
  ["青石大道1"] = "qsdd1",

  -- ===== 北大街/酒楼 =====
  ["武庙"]           = "wm",
  ["醉仙楼"]         = "zxl",
  ["醉仙楼二楼"]     = "zxlel",
  ["醉仙楼雅座单间"] = "zxlyz",
  ["宴客厅门厅"]     = "yktmt",
  ["喜福堂"]         = "xft",
  ["客店"]           = "kd",
  ["客店二楼"]       = "kdel",
  ["客店里间"]       = "kdlj",
  ["比武场"]         = "bwc",
  ["扬州钱庄"]       = "yzqz",
  ["扬州金店"]       = "yzjd",

  -- ===== 东区（东大街/书院/市集）=====
  ["东大街"]     = "ddj",
  ["东大街1"]    = "ddj1",
  ["东大街2"]    = "ddj2",
  ["书院"]       = "sy",
  ["天月书肆"]   = "tyss",
  ["敬师堂"]     = "jst",
  ["杂货铺"]     = "zhp",
  ["药铺"]       = "yp",
  ["配药房"]     = "pyf",
  ["打铁铺"]     = "dtp",
  ["打铁铺内室"] = "dtpns",
  ["宠物店"]     = "cwd",
  ["市集"]       = "sj",
  ["荣昌交易行"] = "rcjxh",

  -- ===== 东门/庄门/正气山庄 =====
  ["东门"]       = "dm",
  ["庄门"]       = "zm",
  ["正气山庄"]   = "zqsz",
  ["较技场"]     = "jjc",
  ["较技场大门"] = "jjcdm",
  ["看台"]       = "kt",
  ["青竹林"]     = "qzl",
  ["土地庙"]     = "tdm",
  ["暗道"]       = "add",

  -- ===== 南区（南大街/当铺线）=====
  ["南大街"]   = "ndj",
  ["南大街1"]  = "ndj1",
  ["南大街2"]  = "ndj2",
  ["赌场"]     = "dc",
  ["当铺"]     = "dp",
  ["库房"]     = "kf",
  ["拍卖行"]   = "pmh",
  ["荣宝斋"]   = "rbz",

  -- ===== 云台街商圈 =====
  ["云台街"]   = "ytj",
  ["云台街1"]  = "ytj1",
  ["云台街2"]  = "ytj2",
  ["云台街尾"] = "ytjw",
  ["小吃店"]   = "xcd",
  ["酒店"]     = "jd",
  ["衣服铺"]   = "yfp",
  ["鞋帽店"]   = "xmd",
  ["茶庄"]     = "cz",
  ["花店"]     = "hd",

  -- ===== 西区（西大街/衙门/财主）=====
  ["西大街"]     = "xdj",
  ["西大街1"]    = "xdj1",
  ["西大街2"]    = "xdj2",
  ["西门"]       = "xmen",
  ["兵营大门"]   = "bydm",
  ["飞龙帮总部"] = "flybz",
  ["衙门大门"]   = "ymdm",
  ["大堂"]       = "dat",
  ["奇珍阁"]     = "qzg",
  ["财主大门"]   = "czdm",
  ["财主大院"]   = "czdy",
  ["财主后院"]   = "czhy",
  ["财主西厢"]   = "czxx",

  -- ===== 马车/红娘庄 =====
  ["中原马车行"] = "mch",
  ["春来茶馆"]   = "clcg",
  ["大武城巷口"] = "dwcxk",
  ["红娘庄大门"] = "hnzdm",
  ["红娘庄走廊"] = "hnzzl",
  ["红娘堂"]     = "hnt",
  ["姻缘堂"]     = "yyt",

  -- ===== 南门外（青石大道重名区）=====
  ["南门"]       = "nm",
  ["青石大道2"]  = "qsdd2",
  ["青石大道3"]  = "qsdd3",
  ["小酒馆"]     = "xjg",

  -- ===== 盛昌总行/浴场/娱乐 =====
  ["盛昌总行"]   = "sczx",
  ["垃圾站"]     = "ljz",
  ["驿站"]       = "yz",
  ["贵妃浴场"]   = "gfyc",
  ["浴室走廊"]   = "yszl",
  ["男浴室"]     = "nys",
  ["按摩房"]     = "amf",
  ["放映厅"]     = "fyt",
  ["放映厅入口"] = "fytrk",

  -- ===== 丽春院/地下城 =====
  ["丽春院"]       = "lcy",
  ["丽春院密室"]   = "lcym",
  ["宴客厅走廊"]   = "yktzl",
  ["地下城东大街"] = "dxcddj",
  ["地下城铁铺1"]  = "dxctp1",
  ["地下城铁铺2"]  = "dxctp2",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>少林 - sl</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["sl"] = {
  region = {
    key  = "sl",
    name = "少林寺",
  },

  mapNodes = {
  ["东侧殿1|w"] = {
    name = "东侧殿1",
    exits = {
      ["w"] = "天王殿|e,n,sd,w",
    },
  },
  ["东侧殿|w"] = {
    name = "东侧殿",
    exits = {
      ["w"] = "山门殿|e,n,w",
    },
  },  
  ["西侧殿1|e"] = {
    name = "西侧殿1",
    exits = {
      ["e"] = "天王殿|e,n,sd,w",
    },
  },  
  ["西侧殿|e"] = {
    name = "西侧殿",
    exits = {
      ["e"] = "山门殿|e,n,w",
    },
  },  

  ["天王殿|e,n,sd,w"] = {
    name = "天王殿",
    exits = {
      ["e"] = "东侧殿1|w",
      ["n"] = "广场|e,n,nu,s,w",
      ["sd"] = "台阶|e,nu,s,w",
      ["w"] = "西侧殿1|e",
    },
  },
  ["山门殿|e,n,w"] = {
    name = "山门殿",
    exits = {
      ["e"] = "东侧殿|w",
      ["n"] = "台阶|e,nu,s,w",
      ["w"] = "西侧殿|e",
      ["open gate;s"] = "广场|e,s,w",
    },
  },
  
  
  ["东山墙|w"] = {
    name = "东山墙",
    exits = {
      ["w"] = "殿内|e,out,sd,w",
    },
  },
  ["东碑林|w"] = {
    name = "东碑林",
    exits = {
      ["w"] = "台阶|e,nu,s,w",
    },
  },
  ["勤修场|e,n,nu,s,w"] = {
    name = "勤修场",
    exits = {
      ["e"] = "天井|w",
      ["n"] = "精进场|nu,s",
      ["s"] = "广场|e,n,nu,s,w",
      ["w"] = "斋厅|e,n",
    },
  },
  ["厨房|s,w"] = {
    name = "厨房",
    exits = {
      ["s"] = "斋厅|n,s",
      ["w"] = "厨房后院|e",
    },
  },
  ["厨房后院|e"] = {
    name = "厨房后院",
    exits = {
      ["e"] = "厨房|s,w",
    },
  },
  ["台阶|e,nu,s,w"] = {
    name = "台阶",
    exits = {
      ["e"] = "东碑林|w",
      ["nu"] = "天王殿|e,n,sd,w",
      ["s"] = "山门殿|e,n,w",
      ["w"] = "西碑林|e",
    },
  },

  ["大雄宝殿|enter,sd"] = {
    name = "大雄宝殿",
    exits = {
      ["enter"] = "殿内|e,out,sd,w",
      ["sd"] = "广场|e,n,nu,s,w",
    },
  },
  ["天井|w"] = {
    name = "天井",
    exits = {
      ["w"] = "勤修场|e,n,nu,s,w",
    },
  },

  ["广场|e,n,nu,s,w"] = {
    name = "广场",
    exits = {
      ["e"] = "钟楼小院|enter,w",
      ["n"] = "勤修场|e,n,nu,s,w",
      ["nu"] = "大雄宝殿|enter,sd",
      ["s"] = "天王殿|e,n,sd,w",
      ["w"] = "鼓楼小院|e,enter",
    },
  },
  ["斋厅|e,n"] = {
    name = "斋厅1",
    exits = {
      ["e"] = "勤修场|e,n,nu,s,w",
      ["n"] = "斋厅|n,s",
    },
  },
  ["斋厅|n,s"] = {
    name = "斋厅2",
    exits = {
      ["n"] = "厨房|s,w",
      ["s"] = "斋厅|e,n",
    },
  },
  ["月台|e,nu,sd,w"] = {
    name = "月台",
    exits = {
      ["e"] = "月台东侧|n,w",
      ["nu"] = "殿内|e,out,sd,w",
    },
  },
  ["月台东侧|n,s"] = {
    name = "月台东侧1",
    exits = {
      ["n"] = "月台东侧|s,wd",
      ["s"] = "月台东侧|n,w",
    },
  },
  ["月台东侧|n,w"] = {
    name = "月台东侧2",
    exits = {
      ["n"] = "月台东侧|n,s",
      ["w"] = "月台|e,nu,sd,w",
    },
  },
  ["月台东侧|s,wd"] = {
    name = "月台东侧3",
    exits = {
      ["s"] = "月台东侧|n,s",
      ["wd"] = "殿后|out",
    },
  },
  ["殿内|e,out,sd,w"] = {
    name = "殿内",
    exits = {
      ["e"] = "东山墙|w",
      ["out"] = "大雄宝殿|enter,sd",
      ["sd"] = "月台|e,nu,sd,w",
    },
  },
  ["殿后|out"] = {
    name = "殿后",
    exits = {
      ["out"] = "勤修场|e,n,nu,s,w",
    },
  },
  ["精进场|nu,s"] = {
    name = "精进场",
    exits = {
      ["nu"] = "后殿|e,n,sd,w",
      ["s"] = "勤修场|e,n,nu,s,w",
    },
  },

  ["西碑林|e"] = {
    name = "西碑林",
    exits = {
      ["e"] = "台阶|e,nu,s,w",
    },
  },
  ["钟楼一层|out,u"] = {
    name = "钟楼一层",
    exits = {
      ["out"] = "钟楼小院|enter,w",
      ["u"] = "钟楼二层|d,u",
    },
  },
  ["钟楼七层|d"] = {
    name = "钟楼七层",
    exits = {
      ["d"] = "钟楼六层|d,u",
    },
  },
  ["钟楼三层|d,u"] = {
    name = "钟楼三层",
    exits = {
      ["d"] = "钟楼二层|d,u",
      ["u"] = "钟楼四层|d,u",
    },
  },
  ["钟楼二层|d,u"] = {
    name = "钟楼二层",
    exits = {
      ["d"] = "钟楼一层|out,u",
      ["u"] = "钟楼三层|d,u",
    },
  },
  ["钟楼五层|d,u"] = {
    name = "钟楼五层",
    exits = {
      ["d"] = "钟楼四层|d,u",
      ["u"] = "钟楼六层|d,u",
    },
  },
  ["钟楼六层|d,u"] = {
    name = "钟楼六层",
    exits = {
      ["d"] = "钟楼五层|d,u",
      ["u"] = "钟楼七层|d",
    },
  },
  ["钟楼四层|d,u"] = {
    name = "钟楼四层",
    exits = {
      ["d"] = "钟楼三层|d,u",
      ["u"] = "钟楼五层|d,u",
    },
  },
  ["钟楼小院|enter,w"] = {
    name = "钟楼小院",
    exits = {
      ["enter"] = "钟楼一层|out,u",
      ["w"] = "广场|e,n,nu,s,w",
    },
  },
  ["鼓楼一层|out,u"] = {
    name = "鼓楼一层",
    exits = {
      ["out"] = "鼓楼小院|e,enter",
      ["u"] = "鼓楼二层|d,u",
    },
  },
  ["鼓楼七层|d"] = {
    name = "鼓楼七层",
    exits = {
      ["d"] = "鼓楼六层|d,u",
    },
  },
  ["鼓楼三层|d,u"] = {
    name = "鼓楼三层",
    exits = {
      ["d"] = "鼓楼二层|d,u",
      ["u"] = "鼓楼四层|d,u",
    },
  },
  ["鼓楼二层|d,u"] = {
    name = "鼓楼二层",
    exits = {
      ["d"] = "鼓楼一层|out,u",
      ["u"] = "鼓楼三层|d,u",
    },
  },
  ["鼓楼五层|d,u"] = {
    name = "鼓楼五层",
    exits = {
      ["d"] = "鼓楼四层|d,u",
      ["u"] = "鼓楼六层|d,u",
    },
  },
  ["鼓楼六层|d,u"] = {
    name = "鼓楼六层",
    exits = {
      ["d"] = "鼓楼五层|d,u",
      ["u"] = "鼓楼七层|d",
    },
  },
  ["鼓楼四层|d,u"] = {
    name = "鼓楼四层",
    exits = {
      ["d"] = "鼓楼三层|d,u",
      ["u"] = "鼓楼五层|d,u",
    },
  },
  ["鼓楼小院|e,enter"] = {
    name = "鼓楼小院",
    exits = {
      ["e"] = "广场|e,n,nu,s,w",
      ["enter"] = "鼓楼一层|out,u",
    },
  },  

    ["后殿|e,n,sd,w"] = {
      name = "后殿",
      exits = {
        ["e;e"] = "走廊|n,w",
        ["n"] = "练武场|e,n,s,w",
        ["sd"] = "精进场|nu,s",
        ["w;w"] = "走廊|e,n",
      },
    },
    
    ["走廊|e,n"] = {
      name = "走廊5",
      exits = {
        ["e;e"] = "后殿|e,n,sd,w",
        ["n"] = "般若堂一部|n,s",
      },
    },


    ["走廊|e,n,sd"] = {
      name = "走廊7",
      exits = {
        ["e;e"]  = "方丈楼|e,n,s,u,w",
        ["n"]  = "竹林小道|e,n,s",
        ["sd"] = "般若堂九部|nu,s",
      },
    },

    ["走廊|n,sd,w"] = {
      name = "走廊3",
      exits = {
        ["n"]  = "竹林小道|n,s,w",
        ["sd"] = "罗汉堂九部|nu,s",
        ["w;w"]  = "方丈楼|e,n,s,u,w",
      },
    },

    ["走廊|n,w"] = {
      name = "走廊",
      exits = {
        ["n"] = "罗汉堂一部|n,s",
        ["w;w"] = "后殿|e,n,sd,w",
      },
    },

    ["千佛殿|n,sd"] = {
      name = "千佛殿",
      exits = {
        ["sd"] = "广场|e,nu,s,su,w",
      },
    },

    ["地藏殿|e"] = {
      name = "地藏殿",
      exits = {
        ["e"] = "广场|e,nu,s,su,w",
      },
    },

    ["广场|e,nu,s,su,w"] = {
      name = "广场1",
      exits = {
        ["e"] = "白衣殿|w",
        ["nu"] = "千佛殿|n,sd",
        ["s"] = "练武场|e,n,nu,s,w",
        ["su"] = "达摩院|nd,sd,u",
        ["w"] = "地藏殿|e",
      },
    },

    ["白衣殿|w"] = {
      name = "白衣殿",
      exits = {
        ["w"] = "广场|e,nu,s,su,w",
      },
    },

    ["禅院|s"] = {
      name = "禅院",
      exits = {
        ["s"] = "达摩院二楼|d,n",
      },
    },

    ["达摩院|nd,sd,u"] = {
      name = "达摩院",
      exits = {
        ["nd"] = "广场|e,nu,s,su,w",
        ["sd"] = "练武场|e,n,nu,s,w",
        ["u"] = "达摩院二楼|d,n",
      },
    },

    ["达摩院二楼|d,n"] = {
      name = "达摩院二楼",
      exits = {
        ["d"] = "达摩院|nd,sd,u",
        ["n"] = "禅院|s",
      },
    },

    ["方丈楼|e,n,s,u,w"] = {
      name = "方丈楼",
      exits = {
        ["e;e"] = "走廊|n,sd,w",
        ["n"] = "练武场|e,n,nu,s,w",
        ["s"] = "练武场|e,n,s,w",
        ["u"] = "茶室|d,n",
        ["w;w"] = "走廊|e,n,sd",
      },
    },

    ["茶室|d,n"] = {
      name = "茶室",
      exits = {
        ["d"] = "方丈楼|e,n,s,u,w",
        ["n"] = "方丈室|s",
      },
    },

    ["方丈室|s"] = {
      name = "方丈室",
      exits = {
        ["s"] = "茶室|d,n",
      },
    },

    ["练武场|e,n,nu,s,w"] = {
      name = "练武场1",
      exits = {
        ["e"] = "和尚院一部|e,n,s,w",
        ["n"] = "广场|e,nu,s,su,w",
        ["nu"] = "达摩院|nd,sd,u",
        ["s"] = "方丈楼|e,n,s,u,w",
        ["w"] = "和尚院四部|e,n,s,w",
      },
    },

    ["练武场|e,n,s,w"] = {
      name = "练武场",
      exits = {
        ["e;e"] = "罗汉堂五部|n,s,w",
        ["n"] = "方丈楼|e,n,s,u,w",
        ["s"] = "后殿|e,n,sd,w",
        ["w;w"] = "般若堂五部|e,n,s",
      },
    },

    ["藏经阁一楼|e,u"] = {
      name = "藏经阁一楼",
      exits = {
        ["e"] = "竹林小道5|e,n,s,w",
      },
    },

    ["般若堂一部|n,s"] = {
      name = "般若堂一部",
      exits = {
        ["n"] = "般若堂二部|n,s",
        ["s"] = "走廊|e,n",
      },
    },

    ["般若堂七部|n,s"] = {
      name = "般若堂七部",
      exits = {
        ["n"] = "般若堂八部|n,s",
        ["s"] = "般若堂六部|n,s",
      },
    },

    ["般若堂三部|n,s"] = {
      name = "般若堂三部",
      exits = {
        ["n"] = "般若堂四部|n,s",
        ["s"] = "般若堂二部|n,s",
      },
    },

    ["般若堂九部|nu,s"] = {
      name = "般若堂九部",
      exits = {
        ["nu"] = "走廊|e,n,sd",
        ["s"]  = "般若堂八部|n,s",
      },
    },

    ["般若堂二部|n,s"] = {
      name = "般若堂二部",
      exits = {
        ["n"] = "般若堂三部|n,s",
        ["s"] = "般若堂一部|n,s",
      },
    },

    ["般若堂五部|e,n,s"] = {
      name = "般若堂五部",
      exits = {
        ["e;e"] = "练武场|e,n,s,w",
        ["n"] = "般若堂六部|n,s",
        ["s"] = "般若堂四部|n,s",
      },
    },

    ["般若堂八部|n,s"] = {
      name = "般若堂八部",
      exits = {
        ["n"] = "般若堂九部|nu,s",
        ["s"] = "般若堂七部|n,s",
      },
    },

    ["般若堂六部|n,s"] = {
      name = "般若堂六部",
      exits = {
        ["n"] = "般若堂七部|n,s",
        ["s"] = "般若堂五部|e,n,s",
      },
    },

    ["般若堂四部|n,s"] = {
      name = "般若堂四部",
      exits = {
        ["n"] = "般若堂五部|e,n,s",
        ["s"] = "般若堂三部|n,s",
      },
    },

    ["和尚院一部|e,n,s,w"] = {
      name = "和尚院一部",
      exits = {
        ["e"] = "竹林小道|n,s,w",
        ["n"] = "和尚院二部|e,n,s",
        ["w"] = "练武场|e,n,nu,s,w",
      },
    },

    ["和尚院三部|e,s"] = {
      name = "和尚院三部",
      exits = {
        ["e"] = "竹林小道|s,w",
        ["s"] = "和尚院二部|e,n,s",
      },
    },

    ["和尚院二部|e,n,s"] = {
      name = "和尚院二部",
      exits = {
        ["e"] = "竹林小道|e,n,s,w",
        ["n"] = "和尚院三部|e,s",
        ["s"] = "和尚院一部|e,n,s,w",
      },
    },

    ["和尚院五部|n,s,w"] = {
      name = "和尚院五部",
      exits = {
        ["n"] = "和尚院六部|s,w",
        ["s"] = "和尚院四部|e,n,s,w",
        ["w"] = "竹林小道5|e,n,s,w",
      },
    },

    ["和尚院六部|s,w"] = {
      name = "和尚院六部",
      exits = {
        ["s"] = "和尚院五部|n,s,w",
        ["w"] = "竹林小道|e,s",
      },
    },

    ["和尚院四部|e,n,s,w"] = {
      name = "和尚院四部",
      exits = {
        ["e"] = "练武场|e,n,nu,s,w",
        ["n"] = "和尚院五部|n,s,w",
        ["w"] = "竹林小道|e,n,s",
      },
    },

    ["武器库|n,w"] = {
      name = "武器库",
      exits = {
        ["n"] = "防具库|n,s",
        ["w"] = "竹林小道|e,n,s,w",
      },
    },

    ["竹林小道|e,n,s,w"] = {
      name = "竹林小道1",
      exits = {
        ["e"] = "武器库|n,w",
        ["n"] = "竹林小道|s,w",
        ["s"] = "竹林小道|n,s,w",
        ["w"] = "和尚院二部|e,n,s",
      },
    },

    ["竹林小道|n,s,w"] = {
      name = "竹林小道2",
      exits = {
        ["n"] = "竹林小道|e,n,s,w",
        ["s"] = "走廊|n,sd,w",
        ["w"] = "和尚院一部|e,n,s,w",
      },
    },

    ["竹林小道|s,w"] = {
      name = "竹林小道3",
      exits = {
        ["s"] = "竹林小道|e,n,s,w",
        ["w"] = "和尚院三部|e,s",
      },
    },

    ["竹林小道|e,n,s"] = {
      name = "竹林小道4",
      exits = {
        ["e"] = "和尚院四部|e,n,s,w",
        ["n"] = "竹林小道5|e,n,s,w",
        ["s"] = "走廊|e,n,sd",
      },
    },

    ["竹林小道5|e,n,s,w"] = {
      name = "竹林小道5",
      exits = {
        ["e"] = "和尚院五部|n,s,w",
        ["n"] = "竹林小道|e,s",
        ["s"] = "竹林小道|e,n,s",
        ["w"] = "藏经阁一楼|e,u",
      },
    },

    ["竹林小道|e,s"] = {
      name = "竹林小道6",
      exits = {
        ["e"] = "和尚院六部|s,w",
        ["s"] = "竹林小道5|e,n,s,w",
      },
    },

    ["罗汉堂一部|n,s"] = {
      name = "罗汉堂一部",
      exits = {
        ["n"] = "罗汉堂二部|n,s",
        ["s"] = "走廊|n,w",
      },
    },

    ["罗汉堂七部|n,s"] = {
      name = "罗汉堂七部",
      exits = {
        ["n"] = "罗汉堂八部|n,s",
        ["s"] = "罗汉堂六部|n,s",
      },
    },

    ["罗汉堂三部|n,s"] = {
      name = "罗汉堂三部",
      exits = {
        ["n"] = "罗汉堂四部|n,s",
        ["s"] = "罗汉堂二部|n,s",
      },
    },

    ["罗汉堂九部|nu,s"] = {
      name = "罗汉堂九部",
      exits = {
        ["nu"] = "走廊|n,sd,w",
        ["s"]  = "罗汉堂八部|n,s",
      },
    },

    ["罗汉堂二部|n,s"] = {
      name = "罗汉堂二部",
      exits = {
        ["n"] = "罗汉堂三部|n,s",
        ["s"] = "罗汉堂一部|n,s",
      },
    },

    ["罗汉堂五部|n,s,w"] = {
      name = "罗汉堂五部",
      exits = {
        ["n"] = "罗汉堂六部|n,s",
        ["s"] = "罗汉堂四部|n,s",
        ["w;w"] = "练武场|e,n,s,w",
      },
    },

    ["罗汉堂八部|n,s"] = {
      name = "罗汉堂八部",
      exits = {
        ["n"] = "罗汉堂九部|nu,s",
        ["s"] = "罗汉堂七部|n,s",
      },
    },

    ["罗汉堂六部|n,s"] = {
      name = "罗汉堂六部",
      exits = {
        ["n"] = "罗汉堂七部|n,s",
        ["s"] = "罗汉堂五部|n,s,w",
      },
    },

    ["罗汉堂四部|n,s"] = {
      name = "罗汉堂四部",
      exits = {
        ["n"] = "罗汉堂五部|n,s,w",
        ["s"] = "罗汉堂三部|n,s",
      },
    },

    ["药品库|e,s"] = {
      name = "药品库",
      exits = {
        ["e"] = "铜门前|e,w",
        ["s"] = "防具库|n,s",
      },
    },

    ["铜门前|e,w"] = {
      name = "铜门前",
      exits = {
        ["w"] = "药品库|e,s",
      },
    },

    ["防具库|n,s"] = {
      name = "防具库",
      exits = {
        ["n"] = "药品库|e,s",
        ["s"] = "武器库|n,w",
      },
    },
    
------ === 寺外 === --------
    ["广场|e"] = {
      name = "广场4",
      exits = {
        ["e"] = "广场|e,s,w",
      },
    },

    ["广场|e,s,w"] = {
      name = "广场2",
      exits = {
        ["e"] = "广场|w",
        ["s"] = "石阶|n,sd",
        ["w"] = "广场|e",
        ["knock gate;n"] = "山门殿|e,n,w",
      },
    },

    ["广场|w"] = {
      name = "广场3",
      exits = {
        ["w"] = "广场|e,s,w",
      },
    },

    -- ===== 入口/寺外 =====
    ["中原马车行|w"] = {
      name = "中原马车行",
      exits = {
        ["w"] = "石阶|e,nu,wd",
      },
    },

    ["佛心井|wd"] = {
      name = "佛心井",
      exits = {
        ["wd"] = "石阶|eu,nu,sd",
      },
    },

    ["少林寺|eu,w"] = {
      name = "少林寺",
      exits = {
        ["eu"] = "石阶|e,nu,wd",
        ["w"]  = "石阶|e,sd",
      },
    },

    ["石阶|nu,sd"] = { -- 昆仑三圣 何足道(He zudao)
      name = "石阶2",
      exits = {
        ["nu"] = "石阶|e,sd",
        ["sd"] = "石阶|eu,nu,sd",
      },
    },

    ["石阶|e,nu,sd"] = {
      name = "石阶3",
      exits = {
        ["e"]  = "菜地|w",
        ["nu"] = "石阶|nu,sd,se",
        ["sd"] = "石阶|e,nu,wd",
      },
    },

    ["石阶|e,nu,wd"] = {
      name = "石阶4",
      exits = {
        ["e"]  = "中原马车行|w",
        ["nu"] = "石阶|e,nu,sd",
        ["wd"] = "少林寺|eu,w",
      },
    },

    ["石阶|e,sd"] = {
      name = "石阶5",
      exits = {
        ["e"]  = "少林寺|eu,w",
        ["sd"] = "石阶|nu,sd",
      },
    },

    ["石阶|ed,nu,wd"] = {
      name = "石阶6",
      exits = {
        ["ed"] = "石阶|sd,wu",
        ["nu"] = "石阶|eu,nu,sd",
        -- 原来这里是 ["wd"] = "山野小径|eu,nw"（不存在）=&gt; 已删除
      },
    },

    ["石阶|eu,nu,sd"] = {
      name = "石阶7",
      exits = {
        ["eu"] = "佛心井|wd",
        ["nu"] = "石阶|nu,sd",
        ["sd"] = "石阶|ed,nu,wd",
      },
    },

    ["石阶|n,sd"] = {
      name = "石阶8",
      exits = {
        ["n"]  = "广场|e,s,w",
        ["sd"] = "石阶|nu,sd,se",
      },
    },

    ["石阶|nu,sd,se"] = {
      name = "石阶9",
      exits = {
        ["nu"] = "石阶|n,sd",
        ["sd"] = "石阶|e,nu,sd",
        -- 原来这里是 ["se"] = "山野小径|nw,s"（不存在）=&gt; 已删除
      },
    },

    ["石阶|sd,wu"] = {
      name = "石阶10",
      exits = {
        ["sd"] = "石阶1|nu,sd",
        ["wu"] = "石阶|ed,nu,wd",
      },
    },

    ["石阶1|nu,sd"] = {
      name = "石阶1",
      exits = {
        ["nu"] = "石阶|sd,wu",
        ["sd"] = "石阶|nu,se,w",
      },
    },

    ["石阶|nu,se,w"] = {
      name = "石阶11",
      exits = {
        ["nu"] = "石阶1|nu,sd",
        ["w"]  = "山坡|e,nu",
      },
    },

    -- ===== 周边（田地/小院）=====
    ["菜地|w"] = {
      name = "菜地",
      exits = {
        ["w"] = "石阶|e,nu,sd",
      },
    },

    ["卧室|s"] = {
      name = "卧室",
      exits = {
        ["s"] = "小土屋|n,s",
      },
    },

    ["厨房|sw"] = {
      name = "厨房",
      exits = {
        ["sw"] = "小院|e,n,ne,nw",
      },
    },

    ["小土屋|n,s"] = {
      name = "小土屋",
      exits = {
        ["n"] = "卧室|s",
        ["s"] = "小院|e,n,ne,nw",
      },
    },

    ["小院|e,n,ne,nw"] = {
      name = "小院",
      exits = {
        ["e"]  = "田埂边|sd,w",
        ["n"]  = "小土屋|n,s",
        ["ne"] = "厨房|sw",
        ["nw"] = "猪舍|se",
      },
    },

    ["猪舍|se"] = {
      name = "猪舍",
      exits = {
        ["se"] = "小院|e,n,ne,nw",
      },
    },

    ["田埂边|sd,w"] = {
      name = "田埂边",
      exits = {
        ["sd"] = "山坡|e,nu",
        ["w"]  = "小院|e,n,ne,nw",
      },
    },

    ["山坡|e,nu"] = {
      name = "山坡",
      exits = {
        ["e"]  = "石阶|nu,se,w",
        ["nu"] = "田埂边|sd,w",
      },
    },
     
    
  },
}

mapper.maps["sl"].mapAliases = {

  -- ===== 山门/天王殿/主轴 =====
  ["山门殿"]   = "smd",
  ["天王殿"]   = "twd",
  ["台阶"]     = "tj",
  ["广场"]     = "gc",
  ["广场1"]     = "gc1",
  ["大雄宝殿"] = "dxbd",
  ["殿内"]     = "dn",
  ["殿后"]     = "dh",

  ["东侧殿"]   = "dcd",
  ["西侧殿"]   = "xcd",
  ["东山墙"]   = "dsq",

  ["东碑林"]   = "dbl",
  ["西碑林"]   = "xbl",

  -- ===== 勤修/精进/生活区 =====
  ["勤修场"]   = "qxc",
  ["精进场"]   = "jjc",
  ["天井"]     = "tjg",   -- 避免和“台阶 tj”冲突，所以用 tjg

  ["厨房"]     = "cf",
  ["厨房后院"] = "cfhy",

  -- 斋厅（请按上面建议改成 斋厅1/斋厅2）
  ["斋厅1"]    = "zt1",
  ["斋厅2"]    = "zt2",

  -- ===== 月台系（请按上面建议改成 月台东侧1/2/3）=====
  ["月台"]       = "yt",
  ["月台东侧1"]  = "ytdc1",
  ["月台东侧2"]  = "ytdc2",
  ["月台东侧3"]  = "ytdc3",

  -- ===== 钟楼 =====
  ["钟楼小院"] = "zlxy",
  ["钟楼一层"] = "zl1",
  ["钟楼二层"] = "zl2",
  ["钟楼三层"] = "zl3",
  ["钟楼四层"] = "zl4",
  ["钟楼五层"] = "zl5",
  ["钟楼六层"] = "zl6",
  ["钟楼七层"] = "zl7",

  -- ===== 鼓楼 =====
  ["鼓楼小院"] = "glxy",
  ["鼓楼一层"] = "gl1",
  ["鼓楼二层"] = "gl2",
  ["鼓楼三层"] = "gl3",
  ["鼓楼四层"] = "gl4",
  ["鼓楼五层"] = "gl5",
  ["鼓楼六层"] = "gl6",
  ["鼓楼七层"] = "gl7",

  -- ===== 原有：核心/建筑 =====
  ["后殿"]       = "hd",
  ["方丈楼"]     = "fzl",
  ["茶室"]       = "cs",
  ["方丈室"]     = "fzs",
  ["藏经阁一楼"] = "cjgyl",

  -- ===== 达摩院系 =====
  ["达摩院"]     = "dmy",
  ["达摩院二楼"] = "dmy2",
  ["禅院"]       = "cy",

  -- ===== 原有殿堂 =====
  ["千佛殿"] = "qfd",
  ["地藏殿"] = "dzd",
  ["白衣殿"] = "byd",

  -- ===== 练武场 =====
  ["练武场1"] = "lwc1",
  ["练武场"]  = "lwc",

  -- ===== 走廊（按你现在 mapNodes 里存在的）=====
  ["走廊3"] = "zl3a",  -- 避免和钟楼三层 zl3 冲突，所以加 a
  ["走廊"]  = "zl",
  ["走廊5"] = "zl5a",  -- 避免和钟楼五层 zl5 冲突
  ["走廊7"] = "zl7a",  -- 避免和钟楼七层 zl7 冲突

  -- ===== 和尚院 =====
  ["和尚院一部"] = "hsy1",
  ["和尚院二部"] = "hsy2",
  ["和尚院三部"] = "hsy3",
  ["和尚院四部"] = "hsy4",
  ["和尚院五部"] = "hsy5",
  ["和尚院六部"] = "hsy6",

  -- ===== 竹林小道 =====
  ["竹林小道1"] = "zlxd1",
  ["竹林小道2"] = "zlxd2",
  ["竹林小道3"] = "zlxd3",
  ["竹林小道4"] = "zlxd4",
  ["竹林小道5"] = "zlxd5",
  ["竹林小道6"] = "zlxd6",

  -- ===== 罗汉堂 =====
  ["罗汉堂一部"] = "lht1",
  ["罗汉堂二部"] = "lht2",
  ["罗汉堂三部"] = "lht3",
  ["罗汉堂四部"] = "lht4",
  ["罗汉堂五部"] = "lht5",
  ["罗汉堂六部"] = "lht6",
  ["罗汉堂七部"] = "lht7",
  ["罗汉堂八部"] = "lht8",
  ["罗汉堂九部"] = "lht9",

  -- ===== 般若堂 =====
  ["般若堂一部"] = "brt1",
  ["般若堂二部"] = "brt2",
  ["般若堂三部"] = "brt3",
  ["般若堂四部"] = "brt4",
  ["般若堂五部"] = "brt5",
  ["般若堂六部"] = "brt6",
  ["般若堂七部"] = "brt7",
  ["般若堂八部"] = "brt8",
  ["般若堂九部"] = "brt9",

  -- ===== 库房 =====
  ["武器库"] = "wqk",
  ["防具库"] = "fjk",
  ["药品库"] = "ypk",
  ["铜门前"] = "tmq",
 
 ---===== 寺外 === -----
  ["广场4"] = "gc4",
  ["广场2"] = "origin",
  ["广场3"] = "gc3",

  -- 入口/寺外
  ["少林寺"]     = "sls",
  ["中原马车行"] = "mch",
  ["佛心井"]     = "fxj",

  -- 石阶
  ["石阶1"]  = "sj1",
  ["石阶2"]  = "sj2",
  ["石阶3"]  = "sj3",
  ["石阶4"]  = "sj4",
  ["石阶5"]  = "sj5",
  ["石阶6"]  = "sj6",
  ["石阶7"]  = "sj7",
  ["石阶8"]  = "sj8",
  ["石阶9"]  = "sj9",
  ["石阶10"] = "sj10",
  ["石阶11"] = "sj11",

  -- 田地/小院
  ["菜地"]   = "cd",
  ["小院"]   = "xy",
  ["小土屋"] = "xtw",
  ["卧室"]   = "ws",
  ["厨房"]   = "cf",
  ["猪舍"]   = "zs",
  ["田埂边"] = "tgb",
  ["山坡"]   = "sp",  
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>小山村 - xcz</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["xsc"] = {
  region = {
    key  = "xsc",
    name = "小山村",
  },

  mapNodes = {

    ["打谷场|e,nw,s"] = {
      name = "打谷场",
      exits = {
        ["e"]  = "碎石路|e,n,s,w",
        ["nw"] = "碎石路|nw,se,sw",
        ["s"]  = "碎石路|e,n,s",
      },
    },

    -- 注意：原来有两个相同 key: ["民宅|s"]，这里保留第一个为“民宅”，第二个改为“民宅2”
    ["民宅|s"] = {
      name = "民宅",
      exits = {
        ["s"] = "西村口|e,n,nw",
      },
    },

    ["民房|ne"] = {
      name = "民房",
      exits = {
        ["ne"] = "碎石路|nw,se,sw",
      },
    },

    ["玄坛庙|sw"] = {
      name = "玄坛庙",
      exits = {
        ["sw"] = "碎石路|ne,se,w",
      },
    },

    ["石阶|ed,nw,se"] = {
      name = "石阶",
      exits = {
        ["se"] = "西村口|e,n,nw",
      },
    },

    ["碎石路|ne,se,w"] = {
      name = "碎石路",
      exits = {
        ["ne"] = "玄坛庙|sw",
        ["se"] = "碎石路|nw,se,sw",
        ["w"]  = "西村口|e,n,nw",
      },
    },

    ["碎石路|nw,se,sw"] = {
      name = "碎石路",
      exits = {
        ["nw"] = "碎石路|ne,se,w",
        ["se"] = "打谷场|e,nw,s",
        ["sw"] = "民房|ne",
      },
    },

    ["西村口|e,n,nw"] = {
      name = "西村口",
      exits = {
        ["e"]  = "碎石路|ne,se,w",
        ["n"]  = "民宅|s",
        ["nw"] = "石阶|ed,nw,se",
      },
    },

    ["杂货店|s"] = {
      name = "杂货店",
      exits = {
        ["s"] = "碎石路|e,n,s,w",
      },
    },

    ["碎石路|e,n,s,w"] = {
      name = "碎石路",
      exits = {
        ["e"] = "碎石路|e,n,w",
        ["n"] = "杂货店|s",
        ["s"] = "铁匠铺|e,n",
        ["w"] = "打谷场|e,nw,s",
      },
    },

    ["碎石路|e,n,w"] = {
      name = "碎石路",
      exits = {
        ["e"] = "碎石路|e,s,w",
        ["n"] = "民宅2|s",          -- 原来指向民宅|s（第二个重复 key），现在改为民宅2|s
        ["w"] = "碎石路|e,n,s,w",
      },
    },

    ["碎石路|e,s,w"] = {
      name = "碎石路",
      exits = {
        ["e"] = "东村口|e,w",
        ["s"] = "草棚|n",
        ["w"] = "碎石路|e,n,w",
      },
    },

    ["草棚|n"] = {
      name = "草棚",
      exits = {
        ["n"] = "碎石路|e,s,w",
      },
    },

    ["铁匠铺|e,n"] = {
      name = "铁匠铺",
      exits = {
        ["e"] = "小房间|w",
        ["n"] = "碎石路|e,n,s,w",
      },
    },

    ["东村口|e,w"] = {
      name = "东村口",
      exits = {
        ["w"] = "碎石路|e,s,w",
      },
    },

    ["小房间|w"] = {
      name = "小房间",
      exits = {
        ["w"] = "铁匠铺|e,n",
      },
    },

    ["中原马车行|w"] = {
      name = "中原马车行",
      exits = {
        ["w"] = "碎石路1|e,n,s,w",
      },
    },

    ["内室|w"] = {
      name = "内室",
      exits = {
        ["w"] = "前厅|e,w",
      },
    },

    ["前厅|e,w"] = {
      name = "前厅",
      exits = {
        ["e"] = "内室|w",
        ["w"] = "碎石路|e,n,s",
      },
    },

    ["小巷|e,nw"] = {
      name = "小巷",
      exits = {
        ["e"]  = "碎石路1|e,n,s,w",
        ["nw"] = "小巷尽头|se",
      },
    },

    ["小巷尽头|se"] = {
      name = "小巷尽头",
      exits = {
        ["se"] = "小巷|e,nw",
      },
    },

    ["碎石路|e,n,s"] = {
      name = "碎石路",
      exits = {
        ["e"] = "前厅|e,w",
        ["n"] = "打谷场|e,nw,s",
        ["s"] = "碎石路1|e,n,s,w",
      },
    },

    ["碎石路2|e,n,s"] = {
      name = "碎石路2",
      exits = {
        ["e"] = "小土房|w",
        ["n"] = "碎石路1|e,n,s,w",
        ["s"] = "南村口|n,sw",
      },
    },

    ["小土房|w"] = {
      name = "小土房",
      exits = {
        ["w"] = "碎石路2|e,n,s",
      },
    },

    ["南村口|n,sw"] = {
      name = "南村口",
      exits = {
        ["n"] = "碎石路2|e,n,s",
      },
    },

    ["碎石路1|e,n,s,w"] = {
      name = "碎石路1",
      exits = {
        ["e"] = "中原马车行|w",
        ["n"] = "碎石路|e,n,s",
        ["s"] = "碎石路2|e,n,s",
        ["w"] = "小巷|e,nw",
      },
    },

    -- 新增：民宅2（原先重复 key 的第二个民宅）
    ["民宅2|s"] = {
      name = "民宅2",
      exits = {
        ["s"] = "碎石路|e,n,w",
      },
    },

  },
}

-- mapAliases：房间名 -&gt; 拼音缩写
mapper.maps["xsc"].mapAliases = {

  ["打谷场"]   = "dgc",
  ["西村口"]   = "xck",
  ["东村口"]   = "dck",
  ["南村口"]   = "nck",

  ["碎石路"]   = "ssl",
  ["碎石路1"]  = "ssl1",
  ["碎石路2"]  = "ssl2",

  ["民宅"]     = "mz",
  ["民宅2"]    = "mz2",
  ["民房"]     = "mf",

  ["杂货店"]   = "zhd",
  ["铁匠铺"]   = "tjp",
  ["小房间"]   = "xfj",
  ["草棚"]     = "cp",

  ["玄坛庙"]   = "xtm",
  ["石阶"]     = "sj",

  ["中原马车行"] = "mch",

  ["前厅"]     = "qt",
  ["内室"]     = "ns",

  ["小巷"]     = "xx",
  ["小巷尽头"] = "xxjt",

  ["小土房"]   = "xtf",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>中原 - zhongyuan</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["zhongyuan"] = {
  region = {
    key  = "zhongyuan",
    name = "中原",
  },
mapNodes = {

["轩辕关|nw,sw"] = {
  name = "轩辕关",
  exits = {
    ["sw"] = "鹅岭口|ne,sd",
  },
},

["鹅岭口|ne,sd"] = {
  name = "鹅岭口",
  exits = {
    ["ne"] = "轩辕关|nw,sw",
    ["sd"] = "山间道|eu,ne,nu,nw,sd",
  },
},

  ["山间道|eu,ne,nu,nw,sd"] = {
    name = "山间道",
    exits = {
      ["nu"] = "鹅岭口|ne,sd",
      ["sd"] = "登封|e,nu,nw,w",
    },
  },
  
  ["上蔡|nw,s,se"] = {
    name = "上蔡",
    exits = {
      ["nw"] = "郾城|nw,s,se",
      ["s"] = "蔡州|n,sw",
      ["se"] = "山路|nw,su",
    },
  },
  ["中原马车总行|s"] = {
    name = "中原马车总行",
    exits = {
      ["s"] = "许昌城|e,n,nw,se,sw,w",
    },
  },
  ["伊川|e,n,se,sw"] = {
    name = "伊川",
    exits = {
      ["e"] = "驿道|e,w",
      ["se"] = "驿道|e,nw",
    },
  },
  ["六合门|nw"] = {
    name = "六合门",
    exits = {
      ["nw"] = "郑州|nw,s,se,wu",
    },
  },
  ["大官道|nw,se"] = {
    name = "大官道",
    exits = {
      ["se"] = "郑州|nw,s,se,wu",
    },
  },
  ["大驿道|e,s"] = {
    name = "大驿道",
    exits = {
      ["e"] = "大驿道|ne,w",
      ["s"] = "大驿道|n,sw",
    },
  },
  ["大驿道|n,ne,sw"] = {
    name = "大驿道",
    exits = {
      ["n"] = "襄城县|nw,s",
      ["ne"] = "大驿道|n,sw",
      ["sw"] = "白河东岸|e,n,ne,sw,wu",
    },
  },
  ["大驿道|n,sw"] = {
    name = "大驿道",
    exits = {
      ["n"] = "大驿道|e,s",
      ["sw"] = "大驿道|n,ne,sw",
    },
  },
  ["大驿道|ne,nw,s,w"] = {
    name = "大驿道",
    exits = {
      ["ne"] = "郏县|e,se,sw",
      ["nw"] = "汝州|se,w",
      ["s"] = "鲁山|enter,n,sw,w",
    },
  },
  ["大驿道|ne,s,w"] = {
    name = "大驿道",
    exits = {
      ["ne"] = "鲁山|enter,n,sw,w",
      ["s"] = "白河东岸|e,n,ne,sw,wu",
    },
  },
  ["大驿道|ne,sw"] = {
    name = "大驿道",
    exits = {
      ["ne"] = "许昌城|e,n,nw,se,sw,w",
      ["sw"] = "大驿道|ne,w",
    },
  },
  ["大驿道|ne,w"] = {
    name = "大驿道",
    exits = {
      ["ne"] = "大驿道|ne,sw",
      ["w"] = "大驿道|e,s",
    },
  },
  ["大驿道|nw,se,w"] = {
    name = "大驿道",
    exits = {
      ["nw"] = "新郑|n,se,sw",
      ["se"] = "许昌城|e,n,nw,se,sw,w",
      ["w"] = "登封|e,nu,nw,w",
    },
  },
  ["天光云影亭|ne,sd"] = {
    name = "天光云影亭",
    exits = {
      ["ne"] = "新郑|n,se,sw",
    },
  },
  ["官道|n,s"] = {
    name = "官道",
    exits = {
      ["n"] = "郾城|nw,s,se",
      ["s"] = "驻马店|n,s",
    },
  },
  ["官道|n,sw,w"] = {
    name = "官道",
    exits = {
    },
  },
  ["客店二楼|d"] = {
    name = "客店二楼",
    exits = {
      ["d"] = "悦来客栈|u,w",
    },
  },
  ["小商桥|nw,se"] = {
    name = "小商桥",
    exits = {
      ["nw"] = "许昌城|e,n,nw,se,sw,w",
      ["se"] = "郾城|nw,s,se",
    },
  },
  ["山路|nw,su"] = {
    name = "山路",
    exits = {
      ["nw"] = "上蔡|nw,s,se",
      ["su"] = "擂鼓山|nd",
    },
  },

  ["市集|se"] = {
    name = "市集",
    exits = {
      ["se"] = "登封|e,nu,nw,w",
    },
  },
  ["悦来客栈|u,w"] = {
    name = "悦来客栈",
    exits = {
      ["u"] = "客店二楼|d",
      ["w"] = "白河东岸|e,n,ne,sw,wu",
    },
  },
  ["擂鼓山|nd"] = {
    name = "擂鼓山",
    exits = {
      ["nd"] = "山路|nw,su",
    },
  },
  ["新郑|n,se,sw"] = {
    name = "新郑",
    exits = {
      ["n"] = "郑州|nw,s,se,wu",
      ["se"] = "大驿道|nw,se,w",
      ["sw"] = "天光云影亭|ne,sd",
    },
  },
  ["汝州|se,w"] = {
    name = "汝州",
    exits = {
      ["se"] = "大驿道|ne,nw,s,w",
      ["w"] = "驿道|e,nw",
    },
  },
  ["环翠峪|ed,nd,sw"] = {
    name = "环翠峪",
    exits = {
      ["ed"] = "郑州|nw,s,se,wu",
    },
  },
  ["登封|e,nu,nw,w"] = {
    name = "登封",
    exits = {
      ["e"] = "大驿道|nw,se,w",
      ["nu"] = "山间道|eu,ne,nu,nw,sd",
      ["nw"] = "市集|se",
      ["w"] = "驿道|e,w",
    },
  },
  ["白河东岸|e,n,ne,sw,wu"] = {
    name = "白河东岸",
    exits = {
      ["e"] = "悦来客栈|u,w",
      ["n"] = "大驿道|ne,s,w",
      ["ne"] = "大驿道|n,ne,sw",
    },
  },

  ["蔡州|n,sw"] = {
    name = "蔡州",
    exits = {
      ["n"] = "上蔡|nw,s,se",
      ["sw"] = "长台关|n,ne,s,w",
    },
  },
  ["襄城县|nw,s"] = {
    name = "襄城县",
    exits = {
      ["nw"] = "郏县|e,se,sw",
      ["s"] = "大驿道|n,ne,sw",
    },
  },
  ["许昌城|e,n,nw,se,sw,w"] = {
    name = "许昌城",
    exits = {
      ["e"] = "青石大道|se,w",
      ["n"] = "中原马车总行|s",
      ["nw"] = "大驿道|nw,se,w",
      ["se"] = "小商桥|nw,se",
      ["sw"] = "大驿道|ne,sw",
      ["w"] = "郏县|e,se,sw",
    },
  },
  ["郏县|e,se,sw"] = {
    name = "郏县",
    exits = {
      ["e"] = "许昌城|e,n,nw,se,sw,w",
      ["se"] = "襄城县|nw,s",
      ["sw"] = "大驿道|ne,nw,s,w",
    },
  },
  ["郑州|nw,s,se,wu"] = {
    name = "郑州",
    exits = {
      ["nw"] = "大官道|nw,se",
      ["s"] = "新郑|n,se,sw",
      ["se"] = "六合门|nw",
      ["wu"] = "环翠峪|ed,nd,sw",
    },
  },
  ["郾城|nw,s,se"] = {
    name = "郾城",
    exits = {
      ["nw"] = "小商桥|nw,se",
      ["s"] = "官道|n,s",
      ["se"] = "上蔡|nw,s,se",
    },
  },
  ["长台关|n,ne,s,w"] = {
    name = "长台关",
    exits = {
      ["n"] = "驻马店|n,s",
      ["ne"] = "蔡州|n,sw",
    },
  },
  ["青石大道|se,w"] = {
    name = "青石大道",
    exits = {
      ["w"] = "许昌城|e,n,nw,se,sw,w",
    },
  },
  ["驻马店|n,s"] = {
    name = "驻马店",
    exits = {
      ["n"] = "官道|n,s",
      ["s"] = "长台关|n,ne,s,w",
    },
  },
  ["驿道|e,nw"] = {
    name = "驿道",
    exits = {
      ["e"] = "汝州|se,w",
      ["nw"] = "伊川|e,n,se,sw",
    },
  },
  ["驿道|e,w"] = {
    name = "驿道",
    exits = {
      ["e"] = "登封|e,nu,nw,w",
      ["w"] = "伊川|e,n,se,sw",
    },
  },
  ["鲁山|enter,n,sw,w"] = {
    name = "鲁山",
    exits = {
      ["n"] = "大驿道|ne,nw,s,w",
      ["sw"] = "大驿道|ne,s,w",
    },
  },
}
}

-- mapAliases（房间名 -&gt; 拼音缩写）
mapper.maps["zhongyuan"].mapAliases = {
  ["轩辕关"]       = "xyg",
  ["鹅岭口"]       = "elk",
  ["山间道"]       = "sjd",

  ["上蔡"]         = "sc",
  ["蔡州"]         = "cz",
  ["驻马店"]       = "zmd",
  ["长台关"]       = "ctg",

  ["郾城"]         = "yc",
  ["小商桥"]       = "xsq",

  ["许昌城"]       = "origin",
  ["中原马车总行"] = "mch",
  ["青石大道"]     = "qsdd",

  ["郏县"]         = "jx",
  ["襄城县"]       = "xcx",

  ["郑州"]         = "zz",
  ["新郑"]         = "xz",
  ["六合门"]       = "lhm",
  ["大官道"]       = "dgd",

  ["登封"]         = "df",
  ["市集"]         = "sj",

  ["汝州"]         = "rz",
  ["伊川"]         = "yc2", 
  ["驿道"]         = "yd",

  ["白河东岸"]     = "bhda",
  ["悦来客栈"]     = "ylkz",
  ["客店二楼"]     = "kdel",

  ["鲁山"]         = "ls",

  ["山路"]         = "sl",
  ["擂鼓山"]       = "lgs",

  ["天光云影亭"]   = "tgyyt",

  ["环翠峪"]       = "hcy",

  ["官道"]         = "gd",
  ["大驿道"]       = "dyd",
}

</script>
					<eventHandlerList />
				</Script>
			</ScriptGroup>
			<ScriptGroup isActive="yes" isFolder="yes">
				<name>山东地区</name>
				<packageName></packageName>
				<script></script>
				<eventHandlerList />
				<Script isActive="yes" isFolder="no">
					<name>泰安 - taian</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["taian"] = {
  region = {
    key  = "taian",
    name = "泰安",
  },

  mapNodes = {
    ["东院|w"] = {
      name = "东院",
      exits = {
        ["w"] = "回廊1|e,n,w",
      },
    },

    ["北大街|e,n,s,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "客栈|se,u,w",
        ["n"] = "北门|e,n,s,sw,w",
        ["s"] = "县衙|enter,n,s",
        ["w"] = "杂货铺|e",
      },
    },

    ["北门|e,n,s,sw,w"] = {
      name = "北门",
      exits = {
        ["n"] = "山路|nu,s",
        ["s"] = "北大街|e,n,s,w",
        ["w"] = "驿道|e,nw,w",
      },
    },

    ["县衙|enter,n,s"] = {
      name = "县衙",
      exits = {
        ["n"] = "北大街|e,n,s,w",
        ["s"] = "钟鼓楼|e,n,s,w",
      },
    },

    ["右厢|w"] = {
      name = "右厢",
      exits = {
        ["w"] = "大厅|e,nd,s,w",
      },
    },

    ["后堂|n"] = {
      name = "后堂",
      exits = {
        ["n"] = "大厅|e,nd,s,w",
      },
    },

    ["回廊|e,n,w"] = {
      name = "回廊1",
      exits = {
        ["e"] = "练武场|e,n,su,w",
        ["n"] = "回廊|e,ne,s,w",
        ["w"] = "西院|e",
      },
    },

    ["西院|e"] = {
      name = "西院",
      exits = {
        ["e"] = "回廊|e,n,w",
      },
    },

    ["回廊1|e,n,w"] = {
      name = "回廊2",
      exits = {
        ["e"] = "东院|w",
        ["n"] = "回廊|e,nw,s,w",
        ["w"] = "练武场|e,n,su,w",
      },
    },

    ["回廊|e,ne,s,w"] = {
      name = "回廊3",
      exits = {
        ["e"] = "水井|e,s,w",
        ["ne"] = "影壁|n,se,sw",
        ["s"] = "回廊|e,n,w",
        ["w"] = "饭厅|e",
      },
    },

    ["回廊|e,nw,s,w"] = {
      name = "回廊4",
      exits = {
        ["e"] = "柴房|w",
        ["nw"] = "影壁|n,se,sw",
        ["s"] = "回廊1|e,n,w",
        ["w"] = "水井|e,s,w",
      },
    },

    ["土路|ne,s,w"] = {
      name = "土路",
      exits = {
        ["ne"] = "山脚小路|e,ne,sw",
        ["s"] = "庄门|n,s",
        ["w"] = "大东门|e,n,ne,s,w",
      },
    },

    ["大东门|e,n,ne,s,w"] = {
      name = "大东门",
      exits = {
        ["e"] = "土路|ne,s,w",
        ["n"] = "钱庄|nw,s",
        ["w"] = "钟鼓楼|e,n,s,w",
      },
    },

    ["大厅|e,nd,s,w"] = {
      name = "大厅",
      exits = {
        ["e"] = "右厢|w",
        ["nd"] = "练武场|e,n,su,w",
        ["s"] = "后堂|n",
        ["w"] = "左厢|e",
      },
    },

    ["大驿道|ed,n,sd,sw"] = {
      name = "大驿道",
      exits = {
        ["sd"] = "山路|e,nu,sd",
      },
    },

    ["天平湖边|se"] = {
      name = "天平湖边",
      exits = {
        ["se"] = "驿道|e,nw,w",
      },
    },

    ["客栈|se,u,w"] = {
      name = "客栈",
      exits = {
        ["se"] = "钱庄|nw,s",
        ["u"] = "客栈二层|d",
        ["w"] = "北大街|e,n,s,w",
      },
    },

    ["客栈二层|d"] = {
      name = "客栈二层",
      exits = {
        ["d"] = "客栈|se,u,w",
      },
    },

    ["山脚小路|e,ne,sw"] = {
      name = "山脚小路",
      exits = {
        ["sw"] = "土路|ne,s,w",
      },
    },

    ["山路|e,nu,sd"] = {
      name = "山路1",
      exits = {
        ["e"] = "普照寺|w",
        ["nu"] = "大驿道|ed,n,sd,sw",
        ["sd"] = "山路|nu,s",
      },
    },

    ["山路|nu,s"] = {
      name = "山路2",
      exits = {
        ["nu"] = "山路|e,nu,sd",
        ["s"] = "北门|e,n,s,sw,w",
      },
    },

    ["左厢|e"] = {
      name = "左厢",
      exits = {
        ["e"] = "大厅|e,nd,s,w",
      },
    },

    ["庄门|n,s"] = {
      name = "庄门",
      exits = {
        ["n"] = "土路|ne,s,w",
        ["s"] = "影壁|n,se,sw",
      },
    },

    ["影壁|n,se,sw"] = {
      name = "影壁",
      exits = {
        ["n"] = "庄门|n,s",
        ["se"] = "回廊|e,nw,s,w",
        ["sw"] = "回廊|e,ne,s,w",
      },
    },

    ["普照寺|w"] = {
      name = "普照寺",
      exits = {
        ["w"] = "山路|e,nu,sd",
      },
    },

    ["杂货铺|e"] = {
      name = "杂货铺",
      exits = {
        ["e"] = "北大街|e,n,s,w",
      },
    },

    ["柴房|w"] = {
      name = "柴房",
      exits = {
        ["w"] = "回廊|e,nw,s,w",
      },
    },

    ["正阳门|e,n,su,w"] = {
      name = "正阳门",
      exits = {
        ["n"] = "钟鼓楼|e,n,s,w",
        ["su"] = "石桥|nd,sd",
      },
    },

    ["水井|e,s,w"] = {
      name = "水井",
      exits = {
        ["e"] = "回廊|e,nw,s,w",
        ["s"] = "练武场|e,n,su,w",
        ["w"] = "回廊|e,ne,s,w",
      },
    },

    ["石桥|nd,sd"] = {
      name = "石桥",
      exits = {
        ["nd"] = "正阳门|e,n,su,w",
      },
    },

    ["练武场|e,n,su,w"] = {
      name = "练武场",
      exits = {
        ["e"] = "回廊1|e,n,w",
        ["n"] = "水井|e,s,w",
        ["su"] = "大厅|e,nd,s,w",
        ["w"] = "回廊|e,n,w",
      },
    },

    ["肥城|e,nw,s,w"] = {
      name = "肥城",
      exits = {
        ["e"] = "西门|e,n,ne,s,w",
        ["s"] = "霸王墓|n",
      },
    },
["霸王墓|n"] = {
  name = "霸王墓",
  exits = {
    ["n"] = "肥城|e,nw,s,w",
  },
},
    ["西大街|e,s,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "钟鼓楼|e,n,s,w",
        ["s"] = "饭馆|n",
        ["w"] = "西门|e,n,ne,s,w",
      },
    },

    ["西门|e,n,ne,s,w"] = {
      name = "西门",
      exits = {
        ["e"] = "西大街|e,s,w",
        ["n"] = "驿道|n,s",
        ["w"] = "肥城|e,nw,s,w",
      },
    },

    ["钟鼓楼|e,n,s,w"] = {
      name = "钟鼓楼",
      exits = {
        ["e"] = "大东门|e,n,ne,s,w",
        ["n"] = "县衙|enter,n,s",
        ["s"] = "正阳门|e,n,su,w",
        ["w"] = "西大街|e,s,w",
      },
    },

    ["钱庄|nw,s"] = {
      name = "钱庄",
      exits = {
        ["nw"] = "客栈|se,u,w",
        ["s"] = "大东门|e,n,ne,s,w",
      },
    },

    ["饭厅|e"] = {
      name = "饭厅",
      exits = {
        ["e"] = "回廊|e,ne,s,w",
      },
    },

    ["饭馆|n"] = {
      name = "饭馆",
      exits = {
        ["n"] = "西大街|e,s,w",
      },
    },

    ["驿道|e,nw,w"] = {
      name = "驿道1",
      exits = {
        ["e"] = "北门|e,n,s,sw,w",
        ["nw"] = "天平湖边|se",
        ["w"] = "驿道|e,s",
      },
    },

    ["驿道|e,s"] = {
      name = "驿道2",
      exits = {
        ["e"] = "驿道|e,nw,w",
        ["s"] = "驿道|n,s",
      },
    },

    ["驿道|n,s"] = {
      name = "驿道3",
      exits = {
        ["n"] = "驿道|e,s",
        ["s"] = "西门|e,n,ne,s,w",
      },
    },
  },

  -- ✅ 生成 mapAliases（name -&gt; 拼音缩写/编号）
  mapAliases = {
    -- 重名：回廊
    ["回廊1"] = "hl1",
    ["回廊2"] = "hl2",
    ["回廊3"] = "hl3",
    ["回廊4"] = "hl4",

    -- 重名：山路
    ["山路1"] = "sl1",
    ["山路2"] = "sl2",

    -- 重名：驿道
    ["驿道1"] = "yd1",
    ["驿道2"] = "yd2",
    ["驿道3"] = "yd3",

    -- 唯一名
    ["东院"] = "dy",
    ["北大街"] = "bdj",
    ["北门"] = "bm",
    ["县衙"] = "xy",
    ["右厢"] = "yx",
    ["后堂"] = "ht",
    ["西院"] = "xy2",
    ["土路"] = "tl",
    ["大东门"] = "ddm",
    ["大厅"] = "dt",
    ["大驿道"] = "dyd",
    ["天平湖边"] = "tphb",
    ["客栈"] = "kz",
    ["客栈二层"] = "kzec",
    ["山脚小路"] = "sjxl",
    ["左厢"] = "zx",
    ["庄门"] = "zm",
    ["影壁"] = "yb",
    ["普照寺"] = "pzs",
    ["杂货铺"] = "zhp",
    ["柴房"] = "cf",
    ["正阳门"] = "zym",
    ["水井"] = "sj",
    ["石桥"] = "sq",
    ["练武场"] = "lwc",
    ["肥城"] = "fc",
    ["西大街"] = "xdj",
    ["西门"] = "xm",
    ["钟鼓楼"] = "origin",
    ["钱庄"] = "qz",
    ["饭厅"] = "ft",
    ["饭馆"] = "fg",
    ["霸王墓"] = "bwm",
  },
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>曲阜 - qufu</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["qufu"] = {
  region = {
    key  = "qufu",
    name = "曲阜",
  },

  mapNodes = {
    ["鼓楼大街|e,n,s,w"] = {
      name = "鼓楼大街",
      exits = {
        ["e"] = "秉礼门|ne,w",
        ["n"] = "鼓楼|e,n,s",
        ["s"] = "鼓楼大街3|e,n,s,w",
        ["w"] = "孔庙|e,enter,s,w",
      },
    },
    ["鼓楼大街3|e,n,s,w"] = {
      name = "鼓楼大街3",
      exits = {
        ["e"] = "陬邑客栈|enter,w",
        ["n"] = "鼓楼大街|e,n,s,w",
        ["s"] = "仰圣门|n,s",
        ["w"] = "西大街|e,n,w",
      },
    },    
["陬邑客栈|enter,w"] = {
  name = "陬邑客栈",
  exits = {
    ["enter"] = "客房|out",
    ["w"] = "鼓楼大街3|e,n,s,w",
  },
},
["客房|out"] = {
  name = "客房",
  exits = {
    ["out"] = "陬邑客栈|enter,w",
  },
},
    ["鼓楼大街|n,s,w"] = {
      name = "鼓楼大街2",
      exits = {
        ["n"] = "延恩门|n,s",
        ["s"] = "鼓楼|e,n,s",
        ["w"] = "孔府|e,w",
      },
    },  
    ["东门大街|n,w"] = {
      name = "东门大街",
      exits = {
        ["n"] = "颜回庙|s",
        ["w"] = "鼓楼|e,n,s",
      },
    },

    ["中原马车行|e,s"] = {
      name = "中原马车行",
      exits = {
        ["e"] = "孔府|e,w",
        ["s"] = "西大街|n,s,w",
      },
    },

    ["九龙山|ne,wd"] = {
      name = "九龙山",
      exits = {
        ["ne"] = "摩崖石刻|sw",
        ["wd"] = "青石大道|eu,n,s",
      },
    },

    ["仰圣门|n,s"] = {
      name = "仰圣门",
      exits = {
        ["n"] = "鼓楼大街|e,n,s,w",
        ["s"] = "青石大道|e,n,s,sw,w",
      },
    },

    ["兖州|e,ne,sw"] = {
      name = "兖州",
      exits = {
        ["e"] = "大兴隆寺|enter,w",
        ["ne"] = "青石大道|e,sw",
        ["sw"] = "青石大道|ne,sw",
      },
    },

    ["兴隆塔|out"] = {
      name = "兴隆塔",
      exits = {
        ["out"] = "大兴隆寺|enter,w",
      },
    },

    ["利国镇|ne,s"] = {
      name = "利国镇",
      exits = {
        ["ne"] = "青石大道|e,n,sw",
      },
    },

    -- 土路（原同名 2 个 -&gt; 土路1..2）
    ["土路|ne,sw"] = {
      name = "土路1",
      exits = {
        ["ne"] = "青石大道|e,n,s,sw,w",
      },
    },

    ["土路|nu,s,se"] = {
      name = "土路2",
      exits = {
        ["s"] = "青石大道|eu,n,su,sw",
        ["se"] = "泗水|nw,wu",
      },
    },

    ["墨池|w"] = {
      name = "墨池",
      exits = {
        ["w"] = "青石大道|e,n,s,sw,w",
      },
    },

    ["大兴隆寺|enter,w"] = {
      name = "大兴隆寺",
      exits = {
        ["enter"] = "兴隆塔|out",
        ["w"] = "兖州|e,ne,sw",
      },
    },

    ["大成殿|out"] = {
      name = "大成殿",
      exits = {
        ["out"] = "孔庙|e,enter,s,w",
      },
    },

    ["大驿道|e,se,sw"] = {
      name = "大驿道",
      exits = {
        ["sw"] = "青石大道|e,ne,nw,s",
      },
    },

    ["孔庙|e,enter,s,w"] = {
      name = "孔庙",
      exits = {
        ["e"] = "鼓楼大街|e,n,s,w",
        ["enter"] = "大成殿|out",
        ["s"] = "西大街|e,n,w",
        ["w"] = "西大街|e,n,s",
      },
    },

    ["孔府|e,w"] = {
      name = "孔府",
      exits = {
        ["e"] = "鼓楼大街|n,s,w",
        ["w"] = "中原马车行|e,s",
      },
    },

    ["宗鲁门|e,w"] = {
      name = "宗鲁门",
      exits = {
        ["e"] = "西大街|n,s,w",
        ["w"] = "青石大道|e,sw",
      },
    },

    ["少昊陵|nd"] = {
      name = "少昊陵",
      exits = {
        ["nd"] = "青石大道|eu,n,su,sw",
      },
    },

    ["延恩门|n,s"] = {
      name = "延恩门",
      exits = {
        ["n"] = "青石大道|e,ne,nw,s",
        ["s"] = "鼓楼大街|n,s,w",
      },
    },

    ["摩崖石刻|sw"] = {
      name = "摩崖石刻",
      exits = {
        ["sw"] = "九龙山|ne,wd",
      },
    },

    ["摩崖题字|w"] = {
      name = "摩崖题字",
      exits = {
        ["w"] = "青石大道|e,n,sw",
      },
    },

    ["泗水|nw,wu"] = {
      name = "泗水",
      exits = {
        ["nw"] = "土路|nu,s,se",
        ["wu"] = "石门山|ed,enter,wd",
      },
    },

    ["清池|e"] = {
      name = "清池",
      exits = {
        ["e"] = "青石大道|e,n,s,sw,w",
      },
    },

    ["石门寺|out"] = {
      name = "石门寺",
      exits = {
        ["out"] = "石门山|ed,enter,wd",
      },
    },

    ["石门山|ed,enter,wd"] = {
      name = "石门山",
      exits = {
        ["ed"] = "泗水|nw,wu",
        ["enter"] = "石门寺|out",
        ["wd"] = "青石大道|eu,n,su,sw",
      },
    },

    ["秉礼门|ne,w"] = {
      name = "秉礼门",
      exits = {
        ["ne"] = "青石大道|eu,n,su,sw",
        ["w"] = "鼓楼大街|e,n,s,w",
      },
    },

    ["肥城|e,nw,s,w"] = {
      name = "肥城",
      exits = {
        ["w"] = "青石官道|e,nw,sw",
      },
    },

    -- 西大街（原同名 4 个 -&gt; 西大街1..4）
    ["西大街|e,n"] = {
      name = "西大街1",
      exits = {
        ["e"] = "西大街|e,n,w",
        ["n"] = "西大街|e,n,s",
      },
    },

    ["西大街|e,n,s"] = {
      name = "西大街2",
      exits = {
        ["e"] = "孔庙|e,enter,s,w",
        ["n"] = "西大街|n,s,w",
        ["s"] = "西大街|e,n",
      },
    },

    ["西大街|e,n,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "鼓楼大街|e,n,s,w",
        ["n"] = "孔庙|e,enter,s,w",
        ["w"] = "西大街|e,n",
      },
    },

    ["西大街|n,s,w"] = {
      name = "西大街4",
      exits = {
        ["n"] = "中原马车行|e,s",
        ["s"] = "西大街|e,n,s",
        ["w"] = "宗鲁门|e,w",
      },
    },

    -- 青石大道（原同名 10 个 -&gt; 青石大道1..10）
    ["青石大道|e,n,s,sw,w"] = {
      name = "青石大道",
      exits = {
        ["e"] = "墨池|w",
        ["n"] = "仰圣门|n,s",
        ["s"] = "青石大道|eu,n,s",
        ["sw"] = "土路|ne,sw",
        ["w"] = "清池|e",
      },
    },

    ["青石大道|e,n,sw"] = {
      name = "青石大道2",
      exits = {
        ["e"] = "摩崖题字|w",
        ["n"] = "青石大道|eu,n,s",
        ["sw"] = "利国镇|ne,s",
      },
    },

    ["青石大道|e,ne,nw,s"] = {
      name = "青石大道3",
      exits = {
        ["e"] = "青石大道|e,w",
        ["ne"] = "大驿道|e,se,sw",
        ["nw"] = "青石大道|nw,se",
        ["s"] = "延恩门|n,s",
      },
    },

    ["青石大道|e,sw"] = {
      name = "青石大道4",
      exits = {
        ["e"] = "宗鲁门|e,w",
        ["sw"] = "兖州|e,ne,sw",
      },
    },

    ["青石大道|e,w"] = {
      name = "青石大道5",
      exits = {
        ["e"] = "青石大道|n,w",
        ["w"] = "青石大道|e,ne,nw,s",
      },
    },

    ["青石大道|eu,n,s"] = {
      name = "青石大道6",
      exits = {
        ["eu"] = "九龙山|ne,wd",
        ["n"] = "青石大道|e,n,s,sw,w",
        ["s"] = "青石大道|e,n,sw",
      },
    },

    ["青石大道|eu,n,su,sw"] = {
      name = "青石大道7",
      exits = {
        ["eu"] = "石门山|ed,enter,wd",
        ["n"] = "土路|nu,s,se",
        ["su"] = "少昊陵|nd",
        ["sw"] = "秉礼门|ne,w",
      },
    },

    ["青石大道|n,w"] = {
      name = "青石大道8",
      exits = {
        ["n"] = "青石官道|ne,s",
        ["w"] = "青石大道|e,w",
      },
    },

    ["青石大道|ne,sw"] = {
      name = "青石大道9",
      exits = {
        ["ne"] = "兖州|e,ne,sw",
        ["sw"] = "青石大道|ne,sw",
      },
    },

    ["青石大道|nw,se"] = {
      name = "青石大道10",
      exits = {
        ["nw"] = "青石大道|nw,se",
        ["se"] = "青石大道|e,ne,nw,s",
      },
    },

    -- 青石官道（原同名 2 个 -&gt; 青石官道1..2）
    ["青石官道|e,nw,sw"] = {
      name = "青石官道",
      exits = {
        ["e"] = "肥城|e,nw,s,w",
        ["nw"] = "驿道|nw,se",
        ["sw"] = "青石官道|ne,s",
      },
    },

    ["青石官道|ne,s"] = {
      name = "青石官道2",
      exits = {
        ["ne"] = "青石官道|e,nw,sw",
        ["s"] = "青石大道|n,w",
      },
    },

    ["颜回庙|s"] = {
      name = "颜回庙",
      exits = {
        ["s"] = "东门大街|n,w",
      },
    },

    ["驿道|nw,se"] = {
      name = "驿道",
      exits = {
        ["se"] = "青石官道|e,nw,sw",
      },
    },

    ["鼓楼|e,n,s"] = {
      name = "鼓楼",
      exits = {
        ["e"] = "东门大街|n,w",
        ["n"] = "鼓楼大街|n,s,w",
        ["s"] = "鼓楼大街|e,n,s,w",
      },
    },
  },

  mapAliases = {
    ["东门大街"]   = "dmdj",
    ["中原马车行"] = "mch",
    ["九龙山"]     = "jls",
    ["仰圣门"]     = "ysm",
    ["兖州"]       = "yz",
    ["兴隆塔"]     = "xlt",
    ["利国镇"]     = "lgz",

    ["土路1"] = "tl1",
    ["土路2"] = "tl2",

    ["墨池"]       = "mc",
    ["大兴隆寺"]   = "dxls",
    ["大成殿"]     = "dcd",
    ["大驿道"]     = "dyd",
    ["孔庙"]       = "km",
    ["孔府"]       = "kf",
    ["宗鲁门"]     = "zlm",
    ["少昊陵"]     = "shl",
    ["延恩门"]     = "yem",
    ["摩崖石刻"]   = "mysk",
    ["摩崖题字"]   = "mytz",
    ["泗水"]       = "ss",
    ["清池"]       = "qc",
    ["石门寺"]     = "sms",
    ["石门山"]     = "smsh",
    ["秉礼门"]     = "blm",
    ["肥城"]       = "fc",

    ["西大街1"] = "xdj1",
    ["西大街2"] = "xdj2",
    ["西大街"] = "xdj",
    ["西大街4"] = "xdj4",

    ["青石大道"]  = "qsdd",
    ["青石大道2"]  = "qsdd2",
    ["青石大道3"]  = "qsdd3",
    ["青石大道4"]  = "qsdd4",
    ["青石大道5"]  = "qsdd5",
    ["青石大道6"]  = "qsdd6",
    ["青石大道7"]  = "qsdd7",
    ["青石大道8"]  = "qsdd8",
    ["青石大道9"]  = "qsdd9",
    ["青石大道10"] = "qsdd10",

    ["青石官道"] = "qsgd",
    ["青石官道2"] = "qsgd2",

    ["颜回庙"] = "yhm",
    ["驿道"]   = "yd",

    -- 原来写成 origin，这里建议统一成拼音缩写
    ["鼓楼"]   = "origin",

    ["鼓楼大街"] = "gldj",
    ["鼓楼大街2"] = "gldj2",
    ["鼓楼大街3"] = "gldj3",
    ["陬邑客栈"]   = "zykz",
    ["客房"]       = "kf2",
  },

}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>威海卫 - whw</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["whw"] = {
  region = {
    key  = "whw",
    name = "威海卫",
  },

  mapNodes = {

    ["威海卫南路|e,n,s,w"] = {
      name = "威海卫南路",
      exits = {
        ["e"] = "海滩|w",
        ["n"] = "威海卫中心|e,n,s,w",
        ["s"] = "威海卫南路1|e,n,s,w",
        ["w"] = "杂货铺|e",
      },
    },
["杂货铺|e"] = {
  name = "杂货铺",
  exits = {
    ["e"] = "威海卫南路|e,n,s,w",
  },
},    
    ["威海卫南路1|e,n,s,w"] = {
      name = "威海卫南路1",
      exits = {
        ["e"] = "临海楼|enter,u,w",
        ["n"] = "威海卫南路|e,n,s,w",
        ["s"] = "小荒地|n",
        ["w"] = "破屋|e",
      },
    },
["小荒地|n"] = {
  name = "小荒地",
  exits = {
    ["n"] = "威海卫南路1|e,n,s,w",
  },
},    
["临海楼|enter,u,w"] = {
  name = "临海楼",
  exits = {
    ["enter"] = "客房|out",
    ["u"] = "",
    ["w"] = "威海卫南路1|e,n,s,w",
  },
},  
["客房|out"] = {
  name = "客房",
  exits = {
    ["out"] = "临海楼|enter,u,w",
  },
},  
    ["兵营|e"] = {
      name = "兵营1",
      exits = {
        ["e"] = "威海卫北路|e,n,ne,s,w",
      },
    },

    ["兵营|s"] = {
      name = "兵营",
      exits = {
        ["s"] = "威海卫东路|e,n,w",
      },
    },

    ["兵营1|s"] = {
      name = "兵营3",
      exits = {
        ["s"] = "威海卫东路1|e,n,w",
      },
    },

    ["兵营2|s"] = {
      name = "兵营4",
      exits = {
        ["s"] = "威海卫北路|e,n,ne,s,w",
      },
    },

    ["兵营|w"] = {
      name = "兵营",
      exits = {
        ["w"] = "威海卫北路|e,n,ne,s,w",
      },
    },

    ["威海卫东路|e,n,w"] = {
      name = "威海卫东路",
      exits = {
        ["e"] = "威海卫东路1|e,n,w",
        ["n"] = "兵营|s",
        ["w"] = "威海卫中心|e,n,s,w",
      },
    },

    ["威海卫东路1|e,n,w"] = {
      name = "威海卫东路1",
      exits = {
        ["e"] = "海边基地|w,广乙,济远",
        ["n"] = "兵营1|s",
        ["w"] = "威海卫东路|e,n,w",
      },
    },

    ["海边基地|w,广乙,济远"] = {
      name = "海边基地",
      exits = {
        ["w"] = "威海卫东路1|e,n,w",
      },
    },

    ["威海卫中心|e,n,s,w"] = {
      name = "威海卫中心",
      exits = {
        ["e"] = "威海卫东路|e,n,w",
        ["n"] = "威海卫北路|e,n,ne,s,w",
        ["s"] = "威海卫南路|e,n,s,w",
        ["w"] = "威海卫湾西路|e,n,s,w",
      },
    },

    ["威海卫北路|e,n,ne,s,w"] = {
      name = "威海卫北路",
      exits = {
        ["e"]  = "兵营|w",
        ["n"]  = "兵营2|s",
        ["ne"] = "水师营附近|sw",
        ["s"]  = "威海卫中心|e,n,s,w",
        ["w"]  = "兵营|e",
      },
    },

    ["威海卫湾西路|e,n,s,w"] = {
      name = "威海卫湾西路",
      exits = {
        ["e"] = "威海卫中心|e,n,s,w",
        ["n"] = "威海卫米行|s",
        ["s"] = "旧屋|n",
        ["w"] = "威海卫西路|e,s,w",
      },
    },

    ["威海卫米行|s"] = {
      name = "威海卫米行",
      exits = {
        ["s"] = "威海卫湾西路|e,n,s,w",
      },
    },

    ["威海卫西口|e,w"] = {
      name = "威海卫西口",
      exits = {
        ["e"] = "威海卫西路|e,s,w",
        ["w"] = "西驿道|e,w",
      },
    },

    ["威海卫西路|e,s,w"] = {
      name = "威海卫西路",
      exits = {
        ["e"] = "威海卫湾西路|e,n,s,w",
        ["s"] = "计氏马车分行|n",
        ["w"] = "威海卫西口|e,w",
      },
    },

    ["旧屋|n"] = {
      name = "旧屋",
      exits = {
        ["n"] = "威海卫湾西路|e,n,s,w",
      },
    },

    ["水师营附近|sw"] = {
      name = "水师营附近",
      exits = {
        ["sw"] = "威海卫北路|e,n,ne,s,w",
      },
    },

    ["海滩|w"] = {
      name = "海滩",
      exits = {
        ["w"] = "威海卫南路|e,n,s,w",
      },
    },

    ["破屋|e"] = {
      name = "破屋",
      exits = {
        ["e"] = "威海卫南路1|e,n,s,w",
      },
    },

    ["西驿道|e,w"] = {
      name = "西驿道",
      exits = {
        ["e"] = "威海卫西口|e,w",
      },
    },

    ["计氏马车分行|n"] = {
      name = "计氏马车分行",
      exits = {
        ["n"] = "威海卫西路|e,s,w",
      },
    },
  },
}

mapper.maps["whw"].mapAliases = {

  -- ===== 原点 / 核心 =====
  ["威海卫中心"] = "origin",

  -- ===== 主干道路 =====
  ["威海卫北路"]   = "whwbl",
  ["威海卫南路"]   = "whwnl",
  ["威海卫东路"]   = "whwdl",
  ["威海卫东路1"]  = "whwdl1",
  ["威海卫湾西路"] = "whwwxl",
  ["威海卫西路"]   = "whwxl",
  ["威海卫西口"]   = "whwxk",
  ["西驿道"]       = "xyd",

  -- ===== 兵营（编号别名）=====
  ["兵营1"] = "by1",
  ["兵营2"] = "by2",
  ["兵营3"] = "by3",
  ["兵营4"] = "by4",
  ["兵营"] = "by",

  -- ===== 场所 / 建筑 =====
  ["威海卫米行"]   = "mx",
  ["旧屋"]         = "jw",
  ["破屋"]         = "pw",
  ["海滩"]         = "ht",
  ["水师营附近"]   = "ssyfj",
  ["计氏马车分行"] = "mch",
  ["海边基地"]     = "hbjd",
    -- ===== 补全缺失 =====
  ["威海卫南路1"] = "whwnl1",
  ["杂货铺"]       = "zhp",
  ["小荒地"]       = "xhd",
  ["临海楼"]       = "lhl",
  ["客房"]         = "kf",
}

</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>登州 - dengzhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["dengzhou"] = {
  region = {
    key  = "dengzhou",
    name = "登州",
  },
  mapNodes = {

    ["城西小路|n,se"] = {
      name = "城西小路",
      exits = {
        ["n"] = "城西小路|ne,s",
        ["se"] = "迎恩门|e,nw",
      },
    },
    ["城西小路|ne,s"] = {
      name = "城西小路2",
      exits = {
        ["ne"] = "城西小路|ne,sw",
        ["s"] = "城西小路|n,se",
      },
    },
    ["城西小路|ne,sw"] = {
      name = "城西小路3",
      exits = {
        ["ne"] = "城西小路1|ne,sw",
        ["sw"] = "城西小路|ne,s",
      },
    },
    ["城西小路1|ne,sw"] = {
      name = "城西小路4",
      exits = {
        ["sw"] = "城西小路|ne,sw",
      },
    },

    ["城东小路|nw,su"] = {
      name = "城东小路",
      exits = {
        ["nw"] = "城东小路|nw,se",
        ["su"] = "宜春门|e,nd,w",
      },
    },
    ["城东小路|nw,se"] = {
      name = "城东小路2",
      exits = {
        ["nw"] = "城东小路1|nw,se",
        ["se"] = "城东小路|nw,su",
      },
    },
    ["城东小路1|nw,se"] = {
      name = "城东小路3",
      exits = {
        ["nw"] = "海边小路|se,w",
        ["se"] = "城东小路|nw,se",
      },
    },

    ["北大街|e,s,wd"] = {
      name = "北大街",
      exits = {
        ["e"] = "北大街|e,s,w",
        ["s"] = "土地庙|n",
        ["wd"] = "北门大街|eu,n,s",
      },
    },

    ["北大街|e,s,w"] = {
      name = "北大街2",
      exits = {
        ["e"] = "北大街|s,w",
        ["s"] = "预备仓|n",
        ["w"] = "北大街|e,s,wd",
      },
    },

    ["北大街|s,w"] = {
      name = "北大街3",
      exits = {
        ["s"] = "太平营|n",
        ["w"] = "北大街|e,s,w",
      },
    },

    ["北大街|e,su,w"] = {
      name = "北大街4",
      exits = {
        ["e"] = "北大街1|e,su,w",
        ["su"] = "钱庄|nd",
        ["w"] = "北门大街|e,n,su",
      },
    },

    ["钱庄|nd"] = {
      name = "钱庄",
      exits = {
        ["nd"] = "北大街|e,su,w",
      },
    },

    ["北大街1|e,su,w"] = {
      name = "北大街5",
      exits = {
        ["e"] = "北大街|su,w",
        ["su"] = "福田院|nd",
        ["w"] = "北大街|e,su,w",
      },
    },

    ["北大街|su,w"] = {
      name = "北大街6",
      exits = {
        ["su"] = "当铺|nd",
        ["w"] = "北大街1|e,su,w",
      },
    },

    ["当铺|nd"] = {
      name = "当铺",
      exits = {
        ["nd"] = "北大街|su,w",
      },
    },

    ["东大街|e,su,wd"] = {
      name = "东大街",
      exits = {
        ["e"] = "宜春门|e,nd,w",
        ["su"] = "杂货铺|nd",
        ["wd"] = "东大街|eu,s,w",
      },
    },
    ["东大街|eu,s,w"] = {
      name = "东大街2",
      exits = {
        ["eu"] = "东大街|e,su,wd",
        ["s"] = "后土庙|n",
        ["w"] = "钟楼|e,nd,s,wd",
      },
    },
    ["出城小路|nw,s"] = {
      name = "出城小路",
      exits = {
        ["nw"] = "海边小路|e,nd,se",
        ["s"] = "镇海门|n,s",
      },
    },
    ["前厅|n,s"] = {
      name = "前厅",
      exits = {
        ["n"] = "正厅|n,s",
        ["s"] = "巡抚衙门大门|n,s",
      },
    },
    ["前院|n,s"] = {
      name = "前院",
      exits = {
        ["n"] = "大厅|e,s,w",
        ["s"] = "登州府大门|n,s",
      },
    },
    ["北门大街|e,n,su"] = {
      name = "北门大街",
      exits = {
        ["e"] = "北大街|e,su,w",
        ["n"] = "北门大街|eu,n,s",
        ["su"] = "钟楼|e,nd,s,wd",
      },
    },
    ["北门大街|eu,n,s"] = {
      name = "北门大街2",
      exits = {
        ["eu"] = "北大街|e,s,wd",
        ["n"] = "镇海门|n,s",
        ["s"] = "北门大街|e,n,su",
      },
    },
    ["南大街|eu,n,su,wd"] = {
      name = "南大街",
      exits = {
        ["eu"] = "马车行|wd",
        ["n"] = "钟楼|e,nd,s,wd",
        ["su"] = "朝天门|nd,s",
        ["wd"] = "酒楼|eu",
      },
    },
    ["古钟亭|n"] = {
      name = "古钟亭",
      exits = {
        ["n"] = "观音寺|nd,s",
      },
    },
    ["右耳房|e"] = {
      name = "右耳房",
      exits = {
        ["e"] = "大厅|e,s,w",
      },
    },
    ["后土庙|n"] = {
      name = "后土庙",
      exits = {
        ["n"] = "东大街|eu,s,w",
      },
    },
    ["后院|s"] = {
      name = "后院",
      exits = {
        ["s"] = "正厅|n,s",
      },
    },
    ["土地庙|n"] = {
      name = "土地庙",
      exits = {
        ["n"] = "北大街|e,s,wd",
      },
    },
    ["城南大道|nd,sw"] = {
      name = "城南大道",
      exits = {
        ["nd"] = "朝天门外|n,su",
      },
    },
    ["大厅|e,s,w"] = {
      name = "大厅",
      exits = {
        ["e"] = "左耳房|w",
        ["s"] = "前院|n,s",
        ["w"] = "右耳房|e",
      },
    },
    ["太平营|n"] = {
      name = "太平营",
      exits = {
        ["n"] = "北大街|s,w",
      },
    },
    ["宜春门|e,nd,w"] = {
      name = "宜春门",
      exits = {
        ["e"] = "驿道|ne,w",
        ["nd"] = "城东小路|nw,su",
        ["w"] = "东大街|e,su,wd",
      },
    },
    ["巡抚衙门大门|n,s"] = {
      name = "巡抚衙门大门",
      exits = {
        ["n"] = "前厅|n,s",
        ["s"] = "草桥|eu,n,w",
      },
    },
    ["左耳房|w"] = {
      name = "左耳房",
      exits = {
        ["w"] = "大厅|e,s,w",
      },
    },
    ["朝天门|nd,s"] = {
      name = "朝天门",
      exits = {
        ["nd"] = "南大街|eu,n,su,wd",
        ["s"] = "朝天门外|n,su",
      },
    },
    ["朝天门外|n,su"] = {
      name = "朝天门外",
      exits = {
        ["n"] = "朝天门|nd,s",
        ["su"] = "城南大道|nd,sw",
      },
    },
    ["杂货铺|nd"] = {
      name = "杂货铺",
      exits = {
        ["nd"] = "东大街|e,su,wd",
      },
    },
    ["正厅|n,s"] = {
      name = "正厅",
      exits = {
        ["n"] = "后院|s",
        ["s"] = "前厅|n,s",
      },
    },
    ["水军军营|nd"] = {
      name = "水军军营",
      exits = {
        ["nd"] = "西大街|eu,n,su,w",
      },
    },
    ["海滩|e,nw,su"] = {
      name = "海滩",
      exits = {
        ["e"] = "海滩|ed,w",
        ["nw"] = "海滩|nw,se",
        ["su"] = "海边小路|e,nd,se",
      },
    },
    ["海滩|ed,w"] = {
      name = "海滩2",
      exits = {
        ["ed"] = "码头|su,wu",
        ["w"] = "海滩|e,nw,su",
      },
    },
    ["海滩|nw,se"] = {
      name = "海滩3",
      exits = {
        ["se"] = "海滩|e,nw,su",
      },
    },
    ["海边小路|e,nd,se"] = {
      name = "海边小路",
      exits = {
        ["e"] = "海边小路|e,nd,w",
        ["nd"] = "海滩|e,nw,su",
        ["se"] = "出城小路|nw,s",
      },
    },
    ["海边小路|e,nd,w"] = {
      name = "海边小路2",
      exits = {
        ["e"] = "海边小路|se,w",
        ["nd"] = "码头|su,wu",
        ["w"] = "海边小路|e,nd,se",
      },
    },
    ["海边小路|se,w"] = {
      name = "海边小路3",
      exits = {
        ["se"] = "城东小路1|nw,se",
        ["w"] = "海边小路|e,nd,w",
      },
    },
    ["登州府大门|n,s"] = {
      name = "登州府大门",
      exits = {
        ["n"] = "前院|n,s",
        ["s"] = "西大街|eu,n,su,w",
      },
    },
    ["码头|su,wu"] = {
      name = "码头",
      exits = {
        ["su"] = "海边小路|e,nd,w",
        ["wu"] = "海滩|ed,w",
      },
    },
    ["福田院|nd"] = {
      name = "福田院",
      exits = {
        ["nd"] = "北大街1|e,su,w",
      },
    },
    ["草桥|eu,n,w"] = {
      name = "草桥",
      exits = {
        ["eu"] = "钟楼|e,nd,s,wd",
        ["n"] = "巡抚衙门大门|n,s",
        ["w"] = "鼓楼|e,su,wd",
      },
    },
    ["西大街|eu,n,su,w"] = {
      name = "西大街",
      exits = {
        ["eu"] = "鼓楼|e,su,wd",
        ["n"] = "登州府大门|n,s",
        ["su"] = "水军军营|nd",
        ["w"] = "迎恩门|e,nw",
      },
    },
    ["观音寺|nd,s"] = {
      name = "观音寺",
      exits = {
        ["nd"] = "鼓楼|e,su,wd",
        ["s"] = "古钟亭|n",
      },
    },
    ["迎恩门|e,nw"] = {
      name = "迎恩门",
      exits = {
        ["e"] = "西大街|eu,n,su,w",
        ["nw"] = "城西小路|n,se",
      },
    },
    ["酒楼|eu"] = {
      name = "酒楼",
      exits = {
        ["eu"] = "南大街|eu,n,su,wd",
      },
    },
    ["钟楼|e,nd,s,wd"] = {
      name = "钟楼",
      exits = {
        ["e"] = "东大街|eu,s,w",
        ["nd"] = "北门大街|e,n,su",
        ["s"] = "南大街|eu,n,su,wd",
        ["wd"] = "草桥|eu,n,w",
      },
    },
    ["镇海门|n,s"] = {
      name = "镇海门",
      exits = {
        ["n"] = "出城小路|nw,s",
        ["s"] = "北门大街|eu,n,s",
      },
    },
    ["预备仓|n"] = {
      name = "预备仓",
      exits = {
        ["n"] = "北大街|e,s,w",
      },
    },
    ["马车行|wd"] = {
      name = "马车行",
      exits = {
        ["wd"] = "南大街|eu,n,su,wd",
      },
    },
    ["驿道|ne,w"] = {
      name = "驿道",
      exits = {
        ["w"] = "宜春门|e,nd,w",
      },
    },
    ["鼓楼|e,su,wd"] = {
      name = "鼓楼",
      exits = {
        ["e"] = "草桥|eu,n,w",
        ["su"] = "观音寺|nd,s",
        ["wd"] = "西大街|eu,n,su,w",
      },
    },
  },
}

mapper.maps["dengzhou"].mapAliases = {

    ["城西小路"] = "cxxl",
    ["城西小路2"] = "cxxl2",
    ["城西小路3"] = "cxxl3",
    ["城西小路4"] = "cxxl4",

    ["城东小路"] = "cdxl",
    ["城东小路2"] = "cdxl2",
    ["城东小路3"] = "cdxl3",

    ["北大街"] = "bjd",
    ["北大街2"] = "bjd2",
    ["北大街3"] = "bjd3",
    ["北大街4"] = "bjd4",
    ["北大街5"] = "bjd5",
    ["北大街6"] = "bjd6",

    ["钱庄"] = "qz",
    ["当铺"] = "dp",

    ["东大街"] = "ddj",
    ["东大街2"] = "ddj2",

    ["出城小路"] = "ccxl",
    ["前厅"] = "qt",
    ["前院"] = "qy",

    ["北门大街"] = "bmdj",
    ["北门大街2"] = "bmdj2",

    ["南大街"] = "ndj",
    ["古钟亭"] = "gzt",
    ["右耳房"] = "yef",
    ["后土庙"] = "htm",
    ["后院"] = "hy",
    ["土地庙"] = "tdm",
    ["城南大道"] = "cndd",
    ["大厅"] = "dt",
    ["太平营"] = "tpy",
    ["宜春门"] = "ycm",
    ["巡抚衙门大门"] = "xfymdm",
    ["左耳房"] = "zef",
    ["朝天门"] = "ctm",
    ["朝天门外"] = "ctmw",
    ["杂货铺"] = "zhp",
    ["正厅"] = "zt",
    ["水军军营"] = "sjjy",

    ["海滩"] = "ht",
    ["海滩2"] = "ht2",
    ["海滩3"] = "ht3",

    ["海边小路"] = "hbxl",
    ["海边小路2"] = "hbxl2",
    ["海边小路3"] = "hbxl3",

    ["登州府大门"] = "dzfdm",
    ["码头"] = "mt",
    ["福田院"] = "fty",
    ["草桥"] = "cq",
    ["西大街"] = "xdj",
    ["观音寺"] = "gys",
    ["迎恩门"] = "yem",
    ["酒楼"] = "jl",
    ["钟楼"] = "origin",
    ["镇海门"] = "zhm",
    ["预备仓"] = "ybc",
    ["马车行"] = "mch",
    ["驿道"] = "yd",
    ["鼓楼"] = "gl",
}</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>青州 - qingzhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["qingzhou"] = {
  region = {
    key  = "qingzhou",
    name = "青州",
  },

  mapNodes = {
    ["七级宝塔|wd"] = {
      name = "七级宝塔",
      exits = {
        ["wd"] = "苍龙峡底|eu,nu,wu",
      },
    },

    ["云峰山|ne,sw"] = {
      name = "云峰山",
      exits = {
        ["ne"] = "驿道|n,sw",
        ["sw"] = "虎头崖|ne,su",
      },
    },

    ["官道|ne,w"] = {
      name = "官道",
      exits = {
        ["ne"] = "山间道|nu,sw",
        ["w"]  = "苍龙峡|e,sd,w",
      },
    },

    ["客房|out"] = {
      name = "客房",
      exits = {
        ["out"] = "望峡楼|ed,enter,u",
      },
    },

    ["山间道|nu,sw"] = {
      name = "山间道",
      exits = {
        ["nu"] = "淄河西岸|e,sd",
        ["sw"] = "官道|ne,w",
      },
    },

    ["归城|ne,s"] = {
      name = "归城",
      exits = {
        ["s"] = "驿道|n,sw",
      },
    },

    ["望峡楼|ed,enter,u"] = {
      name = "望峡楼",
      exits = {
        ["ed"]    = "苍龙峡底|eu,nu,wu",
        ["enter"] = "客房|out",
        ["u"]     = "望峡楼二层|d",
      },
    },

    ["望峡楼二层|d"] = {
      name = "望峡楼二层",
      exits = {
        ["d"] = "望峡楼|ed,enter,u",
      },
    },

    ["浮烟山|ne,sw"] = {
      name = "浮烟山",
      exits = {
        ["ne"] = "青州府|nd,sw",
        ["sw"] = "淄河东岸|ne,w",
      },
    },

    ["淄河东岸|ne,w"] = {
      name = "淄河东岸",
      exits = {
        ["ne"] = "浮烟山|ne,sw",
        ["w"]  = "淄河西岸|e,sd",
      },
    },

    ["淄河西岸|e,sd"] = {
      name = "淄河西岸",
      exits = {
        ["e"]  = "淄河东岸|ne,w",
        ["sd"] = "山间道|nu,sw",
      },
    },

    ["苍龙峡|e,sd,w"] = {
      name = "苍龙峡",
      exits = {
        ["e"]  = "官道|ne,w",
        ["sd"] = "苍龙峡底|eu,nu,wu",
        ["w"]  = "锦阳关|e,nd,sw,wu",
      },
    },

    ["苍龙峡底|eu,nu,wu"] = {
      name = "苍龙峡底",
      exits = {
        ["eu"] = "七级宝塔|wd",
        ["nu"] = "苍龙峡|e,sd,w",
        ["wu"] = "望峡楼|ed,enter,u",
      },
    },

    ["虎头崖|ne,su"] = {
      name = "虎头崖",
      exits = {
        ["ne"] = "云峰山|ne,sw",
        ["su"] = "青州府|nd,sw",
      },
    },

    ["锦阳关|e,nd,sw,wu"] = {
      name = "锦阳关",
      exits = {
        ["e"] = "苍龙峡|e,sd,w",
      },
    },

    ["青州府|nd,sw"] = {
      name = "青州府",
      exits = {
        ["nd"] = "虎头崖|ne,su",
        ["sw"] = "浮烟山|ne,sw",
      },
    },

    ["驿道|n,sw"] = {
      name = "驿道",
      exits = {
        ["n"]  = "归城|ne,s",
        ["sw"] = "云峰山|ne,sw",
      },
    },
  },

  -- ✅ mapAliases：key=房间name，value=拼音缩写
  mapAliases = {
    ["七级宝塔"]   = "qjbt",
    ["云峰山"]     = "yfs",
    ["官道"]       = "gd",
    ["客房"]       = "kf",
    ["山间道"]     = "sjd",
    ["归城"]       = "gc",
    ["望峡楼"]     = "wxl",
    ["望峡楼二层"] = "wxlec",
    ["浮烟山"]     = "fys",
    ["淄河东岸"]   = "zhda",
    ["淄河西岸"]   = "zhxa",
    ["苍龙峡"]     = "clx",
    ["苍龙峡底"]   = "clxd",
    ["虎头崖"]     = "hty",
    ["锦阳关"]     = "jyg",
    ["青州府"]     = "origin",
    ["驿道"]       = "yd",
  },
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>徐州 - xuzhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["xuzhou"] = {
  region = {
    key  = "xuzhou",
    name = "徐州",
  },
  mapNodes = {

    -- ===== 东大街（重名处理）=====
    ["东大街|e,n,s,w"] = {
      name = "东大街",
      exits = {
        ["e"] = "东大街1|e,n,s,w",
        ["n"] = "酒楼|e,s,w",
        ["s"] = "客店|e,n,s,u,w",
        ["w"] = "戏马台|e,n,s,w",
      },
    },

    ["东大街1|e,n,s,w"] = {
      name = "东大街2",
      exits = {
        ["e"] = "明德门|e,n,s,w",
        ["n"] = "钱庄|s,w",
        ["s"] = "杂货铺|n,s,w",
        ["w"] = "东大街|e,n,s,w",
      },
    },

    -- ===== 城墙（重名处理）=====
    ["城墙|se,w"] = {
      name = "城墙1",
      exits = {
        ["se"] = "黄楼|nw,se",
        ["w"]  = "拱极门|e,n,s,sw",
      },
    },

    ["城墙|nw,s"] = {
      name = "城墙2",
      exits = {
        ["nw"] = "黄楼|nw,se",
        ["s"]  = "明德门|e,n,s,w",
      },
    },

    ["城墙|n,s"] = {
      name = "城墙3",
      exits = {
        ["n"] = "明德门|e,n,s,w",
        ["s"] = "拐角楼|n,w",
      },
    },

    ["城墙|e,w"] = {
      name = "城墙4",
      exits = {
        ["e"] = "拐角楼|n,w",
        ["w"] = "城墙1|e,w",
      },
    },

    ["城墙1|e,w"] = {
      name = "城墙5",
      exits = {
        ["e"] = "城墙|e,w",
        ["w"] = "奎光门|e,n,s,w",
      },
    },

    ["城墙2|e,w"] = {
      name = "城墙6",
      exits = {
        ["e"] = "奎光门|e,n,s,w",
        ["w"] = "燕子楼|e,n",
      },
    },

    ["城墙1|n,s"] = {
      name = "城墙7",
      exits = {
        ["n"] = "威远门|e,n,s,w",
        ["s"] = "燕子楼|e,n",
      },
    },

    ["城墙|ne,s"] = {
      name = "城墙",
      exits = {
        ["ne"] = "城墙|ne,sw",
        ["s"]  = "威远门|e,n,s,w",
      },
    },

    ["城墙|ne,sw"] = {
      name = "城墙9",
      exits = {
        ["ne"] = "拱极门|e,n,s,sw",
        ["sw"] = "城墙|ne,s",
      },
    },

    ["拐角楼|n,w"] = {
      name = "拐角楼",
      exits = {
        ["n"] = "城墙|n,s",
        ["w"] = "城墙|e,w",
      },
    },

    ["燕子楼|e,n"] = {
      name = "燕子楼",
      exits = {
        ["e"] = "城墙2|e,w",
        ["n"] = "城墙1|n,s",
      },
    },

    ["二楼|d"] = {
      name = "二楼",
      exits = {
        ["d"] = "客店|e,n,s,u,w",
      },
    },

    ["云龙山|nd,wd"] = {
      name = "云龙山",
      exits = {
        ["nd"] = "青石大道|e,n,se,su",
        ["wd"] = "云龙湖|eu",
      },
    },

    ["云龙湖|eu"] = {
      name = "云龙湖",
      exits = {
        ["eu"] = "云龙山|nd,wd",
      },
    },

    ["兵营|e"] = {
      name = "兵营",
      exits = {
        ["e"] = "北大街|e,n,s,w",
      },
    },

    ["利国镇|ne,s"] = {
      name = "利国镇",
      exits = {
        ["s"] = "青石大道|n,s",
      },
    },

    -- ===== 北大街（重名处理）=====
    ["北大街|e,n,s"] = {
      name = "北大街1",
      exits = {
        ["e"] = "府衙大门|enter,w",
        ["n"] = "拱极门|e,n,s,sw",
        ["s"] = "北大街|e,n,s,w",
      },
    },

    ["北大街|e,n,s,w"] = {
      name = "北大街",
      exits = {
        ["e"] = "酒楼|e,s,w",
        ["n"] = "北大街|e,n,s",
        ["s"] = "戏马台|e,n,s,w",
        ["w"] = "兵营|e",
      },
    },

    ["南大街|e,n,s,w"] = {
      name = "南大街",
      exits = {
        ["e"] = "客店|e,n,s,u,w",
        ["n"] = "戏马台|e,n,s,w",
        ["s"] = "奎光门|e,n,s,w",
        ["w"] = "小广场|e,n,ne,nw,s",
      },
    },

    ["土路|ne,sw"] = {
      name = "土路",
      exits = {
        ["sw"] = "城外小路|ne,w",
      },
    },

    -- ===== 城外小路（重名处理）=====
    ["城外小路|e,nu,w"] = {
      name = "城外小路",
      exits = {
        ["e"]  = "城外小路|ne,w",
        ["nu"] = "骆驼山|sd,u",
        ["w"]  = "明德门|e,n,s,w",
      },
    },

    ["城外小路|ne,w"] = {
      name = "城外小路2",
      exits = {
        ["ne"] = "土路|ne,sw",
        ["w"]  = "城外小路|e,nu,w",
      },
    },

    ["奎光门|e,n,s,w"] = {
      name = "奎光门",
      exits = {
        ["e"] = "城墙1|e,w",
        ["n"] = "南大街|e,n,s,w",
        ["s"] = "青石大道|e,n,se,su",
        ["w"] = "城墙2|e,w",
      },
    },

    ["如意坊|n"] = {
      name = "如意坊",
      exits = {
        ["n"] = "小广场|e,n,ne,nw,s",
      },
    },

    ["威远门|e,n,s,w"] = {
      name = "威远门",
      exits = {
        ["e"] = "西大街|e,s,w",
        ["n"] = "城墙|ne,s",
        ["s"] = "城墙1|n,s",
      },
    },

    ["宝应|nw,s"] = {
      name = "宝应",
      exits = {
        ["nw"] = "楚州|n,se",
      },
    },

    ["客店|e,n,s,u,w"] = {
      name = "客店",
      exits = {
        ["e"] = "当铺|e,w",
        ["n"] = "东大街|e,n,s,w",
        ["s"] = "茶馆|e,n",
        ["u"] = "二楼|d",
        ["w"] = "南大街|e,n,s,w",
      },
    },

    ["寺庙后|enter"] = {
      name = "寺庙后",
      exits = {
        ["enter"] = "竹林寺|d,out",
      },
    },

    ["小广场|e,n,ne,nw,s"] = {
      name = "小广场",
      exits = {
        ["e"]  = "南大街|e,n,s,w",
        ["n"]  = "西大街|e,s,w",
        ["ne"] = "青木堂|sw",
        ["nw"] = "广武镖局|se",
        ["s"]  = "如意坊|n",
      },
    },

    ["巷尾|n,w"] = {
      name = "巷尾",
      exits = {
        ["n"] = "杂货铺|n,s,w",
        ["w"] = "药铺|e,w",
      },
    },

    ["广武镖局|se"] = {
      name = "广武镖局",
      exits = {
        ["se"] = "小广场|e,n,ne,nw,s",
      },
    },

    ["府署|out"] = {
      name = "府署",
      exits = {
        ["out"] = "府衙大门|enter,w",
      },
    },

    ["府衙大门|enter,w"] = {
      name = "府衙大门",
      exits = {
        ["enter"] = "府署|out",
        ["w"]     = "北大街|e,n,s",
      },
    },

    ["当铺|e,w"] = {
      name = "当铺",
      exits = {
        ["e"] = "杂货铺|n,s,w",
        ["w"] = "客店|e,n,s,u,w",
      },
    },

    ["彭城马车行|w"] = {
      name = "彭城马车行",
      exits = {
        ["w"] = "青石大道|e,n,se,su",
      },
    },

    ["戏马台|e,n,s,w"] = {
      name = "戏马台",
      exits = {
        ["e"] = "东大街|e,n,s,w",
        ["n"] = "北大街|e,n,s,w",
        ["s"] = "南大街|e,n,s,w",
        ["w"] = "西大街|e,s,w",
      },
    },

    ["拱极门|e,n,s,sw"] = {
      name = "拱极门",
      exits = {
        ["e"]  = "城墙|se,w",
        ["n"]  = "青石大道|n,s",
        ["s"]  = "北大街|e,n,s",
        ["sw"] = "城墙|ne,sw",
      },
    },

    ["明德门|e,n,s,w"] = {
      name = "明德门",
      exits = {
        ["e"] = "城外小路|e,nu,w",
        ["n"] = "城墙|nw,s",
        ["s"] = "城墙|n,s",
        ["w"] = "东大街1|e,n,s,w",
      },
    },

    ["杂货铺|n,s,w"] = {
      name = "杂货铺",
      exits = {
        ["n"] = "东大街1|e,n,s,w",
        ["s"] = "巷尾|n,w",
        ["w"] = "当铺|e,w",
      },
    },

    ["楚州|n,se"] = {
      name = "楚州",
      exits = {
        ["n"]  = "泗阳集|e,nw,s",
        ["se"] = "宝应|nw,s",
      },
    },

    ["泗阳集|e,nw,s"] = {
      name = "泗阳集",
      exits = {
        ["e"]  = "驿站|w",
        ["nw"] = "青石大道|n,se",
        ["s"]  = "楚州|n,se",
      },
    },

    ["竹林寺|d,out"] = {
      name = "竹林寺",
      exits = {
        ["d"]   = "骆驼山|sd,u",
        ["out"] = "寺庙后|enter",
      },
    },

    ["茶馆|e,n"] = {
      name = "茶馆",
      exits = {
        ["e"] = "药铺|e,w",
        ["n"] = "客店|e,n,s,u,w",
      },
    },

    ["药铺|e,w"] = {
      name = "药铺",
      exits = {
        ["e"] = "巷尾|n,w",
        ["w"] = "茶馆|e,n",
      },
    },

    ["西大街|e,s,w"] = {
      name = "西大街",
      exits = {
        ["e"] = "戏马台|e,n,s,w",
        ["s"] = "小广场|e,n,ne,nw,s",
        ["w"] = "威远门|e,n,s,w",
      },
    },

    ["酒楼|e,s,w"] = {
      name = "酒楼",
      exits = {
        ["e"] = "钱庄|s,w",
        ["s"] = "东大街|e,n,s,w",
        ["w"] = "北大街|e,n,s,w",
      },
    },

    ["钱庄|s,w"] = {
      name = "钱庄",
      exits = {
        ["s"] = "东大街1|e,n,s,w",
        ["w"] = "酒楼|e,s,w",
      },
    },

    ["青木堂|sw"] = {
      name = "青木堂",
      exits = {
        ["sw"] = "小广场|e,n,ne,nw,s",
      },
    },

    -- ===== 青石大道（重名处理）=====
    ["青石大道|e,n,se,su"] = {
      name = "青石大道",
      exits = {
        ["e"]  = "彭城马车行|w",
        ["n"]  = "奎光门|e,n,s,w",
        ["se"] = "青石大道|nw,s,se",
        ["su"] = "云龙山|nd,wd",
      },
    },

    ["青石大道|eu,nw,s"] = {
      name = "青石大道2",
      exits = {
        ["eu"] = "马陵山|wd",
        ["nw"] = "青石大道|nw,s,se",
        ["s"]  = "青石大道|n,se",
      },
    },

    ["青石大道|n,s"] = {
      name = "青石大道3",
      exits = {
        ["n"] = "利国镇|ne,s",
        ["s"] = "拱极门|e,n,s,sw",
      },
    },

    ["青石大道|n,se"] = {
      name = "青石大道4",
      exits = {
        ["n"]  = "青石大道|eu,nw,s",
        ["se"] = "泗阳集|e,nw,s",
      },
    },

    ["青石大道|nw,s,se"] = {
      name = "青石大道5",
      exits = {
        ["nw"] = "青石大道|e,n,se,su",
        ["s"]  = "骆马湖畔|n",
        ["se"] = "青石大道|eu,nw,s",
      },
    },

    ["马陵山|wd"] = {
      name = "马陵山",
      exits = {
        ["wd"] = "青石大道|eu,nw,s",
      },
    },

    ["驿站|w"] = {
      name = "驿站",
      exits = {
        ["w"] = "泗阳集|e,nw,s",
      },
    },

    ["骆马湖畔|n"] = {
      name = "骆马湖畔",
      exits = {
        ["n"] = "青石大道|nw,s,se",
      },
    },

    ["骆驼山|sd,u"] = {
      name = "骆驼山",
      exits = {
        ["sd"] = "城外小路|e,nu,w",
        ["u"]  = "竹林寺|d,out",
      },
    },

    ["黄楼|nw,se"] = {
      name = "黄楼",
      exits = {
        ["nw"] = "城墙|se,w",
        ["se"] = "城墙|nw,s",
      },
    },
  },
}

mapper.maps["xuzhou"].mapAliases = {

  -- ===== 原点（建议：戏马台作为城内中心）=====
  ["戏马台"] = "origin",

  -- ===== 主干道 / 广场 =====
  ["东大街"]   = "ddj",
  ["东大街2"]   = "ddj2",
  ["北大街1"]   = "bdj1",
  ["北大街"]   = "bdj",
  ["南大街"]    = "ndj",
  ["西大街"]    = "xdj",
  ["小广场"]    = "xgc",
  ["青石大道"] = "qsdd",
  ["青石大道2"] = "qsdd2",
  ["青石大道3"] = "qsdd3",
  ["青石大道4"] = "qsdd4",
  ["青石大道5"] = "qsdd5",

  -- ===== 城门 / 城墙 =====
  ["明德门"] = "mdm",
  ["奎光门"] = "kgm",
  ["拱极门"] = "gjm",
  ["威远门"] = "wym",

  ["城墙1"] = "cq1",
  ["城墙2"] = "cq2",
  ["城墙3"] = "cq3",
  ["城墙4"] = "cq4",
  ["城墙5"] = "cq5",
  ["城墙6"] = "cq6",
  ["城墙7"] = "cq7",
  ["城墙"] = "cq",
  ["城墙9"] = "cq9",

  ["拐角楼"] = "gjl",
  ["黄楼"]   = "hl",
  ["燕子楼"] = "yzl",

  -- ===== 官署 / 商铺 / 客店 =====
  ["府衙大门"]   = "fydm",
  ["府署"]       = "fs",
  ["酒楼"]       = "jl",
  ["钱庄"]       = "qz",
  ["杂货铺"]     = "zhp",
  ["当铺"]       = "dp",
  ["客店"]       = "kd",
  ["二楼"]       = "el",
  ["茶馆"]       = "cg",
  ["药铺"]       = "yp",
  ["巷尾"]       = "xw",
  ["如意坊"]     = "ryf",
  ["青木堂"]     = "qmt",
  ["广武镖局"]   = "gwbj",
  ["彭城马车行"] = "mch",

  -- ===== 城外 / 地名 =====
  ["城外小路"] = "cwxl",
  ["城外小路2"] = "cwxl2",
  ["土路"]       = "tl",
  ["骆驼山"]     = "lts",
  ["竹林寺"]     = "zls",
  ["寺庙后"]     = "smh",

  ["利国镇"]   = "lgz",
  ["云龙山"]   = "yls",
  ["云龙湖"]   = "ylh",
  ["马陵山"]   = "mls",
  ["骆马湖畔"] = "lmhp",
  ["驿站"]     = "yz",
  ["泗阳集"]   = "syj",
  ["楚州"]     = "cz",
  ["宝应"]     = "by",
}
</script>
					<eventHandlerList />
				</Script>
			</ScriptGroup>
			<ScriptGroup isActive="yes" isFolder="yes">
				<name>关陇</name>
				<packageName></packageName>
				<script></script>
				<eventHandlerList />
				<Script isActive="yes" isFolder="no">
					<name>秦州 - qinzhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["qinzhou"] = {
  region = {
    key  = "qinzhou",      -- 区域代号，用在 goto wx.xxx 里
    name = "秦州",    -- 纯注释/显示用
  },
mapNodes = {

  ["通仙桥|ed,n"] = {
    name = "通仙桥",
    exits = {
      ["ed"] = "街亭古战场|nw,se,wu",
      ["n"] = "人间天上坊|nu,s",
      ["open;wd"] = "大门|wd",
    },
  },

  ["大门|wd"] = {
    name = "大门",
    exits = {
      ["wd"] = "遇仙桥|eu,w",
      ["knock;eu"] = "通仙桥|ed,n",
    },
  },
  
  ["北门|e,nw,s,w"] = {
    name = "北门",
    exits = {
      ["s"] = "北大街|e,n,s,w",
      ["nw"] = "山路|ed,nu,sd,se",
    },
  },
  
  ["西门|e,n,nu,nw,s"] = {
    name = "西门",
    exits = {
      ["e"] = "十字大街1|e,n,s,w",
      ["nu"] = "山路|nu,sd",
      ["nw"] = "山路|nw,se",
    },
  },
  
  ["南门|e,n,su,sw,w"] = {
    name = "南门",
    exits = {
      ["n"] = "南大街2|e,n,s,w",
      ["su"] = "石马坪|ed,nd,su",
      ["sw"] = "神仙台|ne,wu",
    },
  },  
  
  ["东门|e,n,s,w"] = {
    name = "东门",
    exits = {
      ["e"] = "耤河南岸|e,se,w",
      ["w"] = "十字大街6|e,n,s,w",
    },
  },
    

  ["中央广场|e,n,s,w"] = {
    name = "中央广场",
    exits = {
      ["e"] = "十字大街4|e,n,s,w",
      ["n"] = "北大街|e,n,s,w",
      ["s"] = "南大街1|e,n,s,w",
      ["w"] = "十字大街3|e,n,s,w",
    },
  },

["南大街1|e,n,s,w"] = {
  name = "南大街1",
  exits = {
    ["e"] = "当铺|n,s,w",
    ["n"] = "中央广场|e,n,s,w",
    ["s"] = "南大街2|e,n,s,w",
    ["w"] = "怡玉阁|e,n",
  },
},

["怡玉阁|e,n"] = {
  name = "怡玉阁",
  exits = {
    ["e"] = "南大街1|e,n,s,w",
    ["n"] = "十字大街3|e,n,s,w",
  },
},  

 ["当铺|n,s,w"] = {
  name = "当铺",
  exits = {
    ["n"] = "十字大街4|e,n,s,w",
    ["s"] = "后巷|e,n,w",
    ["w"] = "南大街1|e,n,s,w",
  },
},

["后巷|e,n,w"] = {
  name = "后巷",
  exits = {
    ["n"] = "当铺|n,s,w",
    ["w"] = "南大街2|e,n,s,w",
  },
},

["南大街2|e,n,s,w"] = {
  name = "南大街2",
  exits = {
    ["e"] = "后巷|e,n,w",
    ["n"] = "南大街1|e,n,s,w",
    ["s"] = "南门|e,n,su,sw,w",
    ["w"] = "水井坊|e",
  },
},  
  
  ["水井坊|e"] = {
  name = "水井坊",
  exits = {
    ["e"] = "南大街2|e,n,s,w",
  },
},

   ["十字大街3|e,n,s,w"] = {
    name = "十字大街3",
    exits = {
      ["e"] = "中央广场|e,n,s,w",
      ["n"] = "军营|s",
      ["s"] = "怡玉阁|e,n",
      ["w"] = "十字大街2|e,n,s,w",     
    },
  },

["军营|s"] = {
  name = "军营",
  exits = {
    ["s"] = "十字大街3|e,n,s,w",
  },
},


  
  ["十字大街4|e,n,s,w"] = {
    name = "十字大街4",
    exits = {
      ["e"] = "十字大街5|e,n,s,w",
      ["n"] = "钱庄|n,s",   
      ["s"] = "当铺|n,s,w",   
      ["w"] = "中央广场|e,n,s,w",  
    },
  },
 


  ["十字大街5|e,n,s,w"] = {
    name = "十字大街5",
    exits = {
      ["e"] = "十字大街6|e,n,s,w",
      ["s"] = "食铺|n,s",
      ["n"] = "客栈|enter,nw,s",
      ["w"] = "十字大街4|e,n,s,w",      
    },
  },

["食铺|n,s"] = {
  name = "食铺",
  exits = {
    ["n"] = "十字大街5|e,n,s,w",
  },
},

  ["十字大街6|e,n,s,w"] = {
    name = "十字大街6",
    exits = {
      ["e"] = "东门|e,n,s,w",
      ["n"] = "车马行|n,s",
      ["s"] = "杂货铺|n,s",
      ["w"] = "十字大街5|e,n,s,w",      
    },
  },

["杂货铺|n,s"] = {
  name = "杂货铺",
  exits = {
    ["n"] = "十字大街6|e,n,s,w",
  },
},  
  
["民居|n"] = {
  name = "民居",
  exits = {
    ["n"] = "十字大街1|e,n,s,w",
  },
},

["驿站|s"] = {
  name = "驿站",
  exits = {
    ["s"] = "十字大街1|e,n,s,w",
  },
},
  
  ["北大街|e,n,s,w"] = {
    name = "北大街",
    exits = {
      ["e"] = "城隍庙|e,s,se,w",
      ["n"] = "北门|e,nw,s,w",
      ["s"] = "中央广场|e,n,s,w",
      ["w"] = "守将府|e,enter",
    },
  },

  ["十字大街1|e,n,s,w"] = {
    name = "十字大街1",
    exits = {
      ["e"] = "十字大街2|e,n,s,w",
      ["n"] = "驿站|s",    
      ["s"] = "民居|n",  
      ["w"] = "西门|e,n,nu,nw,s",
    },
  },
  
  
  ["十字大街2|e,n,s,w"] = {
    name = "十字大街2",
    exits = {
      ["e"] = "十字大街3|e,n,s,w",
      ["n"] = "民居|s",    
      ["s"] = "西关巷|n",        
      ["w"] = "十字大街1|e,n,s,w",
    },
  },
  
 ["西关巷|n"] = {
  name = "西关巷",
  exits = {
    ["n"] = "十字大街2|e,n,s,w",
  },
},

["民居|s"] = {
  name = "民居",
  exits = {
    ["s"] = "十字大街2|e,n,s,w",
  },
},
    
  
  ["右耳房|n"] = {
    name = "右耳房",
    exits = {
      ["n"] = "大厅|n,out,s,w",
    },
  },
  ["后宅|e"] = {
    name = "后宅",
    exits = {
      ["e"] = "大厅|n,out,s,w",
    },
  },
  ["城隍庙|e,s,se,w"] = {
    name = "城隍庙",
    exits = {
      ["e"] = "小广场|s,w",
      ["s"] = "钱庄|n,s",
      ["se"] = "客栈|enter,nw,s",
      ["w"] = "北大街|e,n,s,w",
    },
  },
  ["大厅|n,out,s,w"] = {
    name = "大厅",
    exits = {
      ["n"] = "左耳房|s",
      ["out"] = "守将府|e,enter",
      ["s"] = "右耳房|n",
      ["w"] = "后宅|e",
    },
  },
  ["守将府|e,enter"] = {
    name = "守将府",
    exits = {
      ["e"] = "北大街|e,n,s,w",
      ["enter"] = "大厅|n,out,s,w",
    },
  },
  ["客栈|enter,nw,s"] = {
    name = "客栈",
    exits = {
      ["enter"] = "里间|out",
      ["nw"] = "城隍庙|e,s,se,w",
      ["s"] = "十字大街5|e,n,s,w",
    },
  },
  ["小广场|s,w"] = {
    name = "小广场",
    exits = {
      ["s"] = "车马行|n,s",
      ["w"] = "城隍庙|e,s,se,w",
    },
  },
  ["左耳房|s"] = {
    name = "左耳房",
    exits = {
      ["s"] = "大厅|n,out,s,w",
    },
  },
  ["车马行|n,s"] = {
    name = "车马行",
    exits = {
      ["n"] = "小广场|s,w",
      ["s"] = "十字大街6|e,n,s,w",
    },
  },
  ["里间|out"] = {
    name = "里间",
    exits = {
      ["out"] = "客栈|enter,nw,s",
    },
  },
  ["钱庄|n,s"] = {
    name = "钱庄",
    exits = {
      ["n"] = "城隍庙|e,s,se,w",
      ["s"] = "十字大街4|e,n,s,w",
    },
  },

  ["南山寺|out"] = {
    name = "南山寺",
    exits = {
      ["out"] = "慧音山|enter,nd,se,sw",
    },
  },

  ["神仙台|ne,wu"] = {
    name = "神仙台",
    exits = {
      ["ne"] = "南门|e,n,su,sw,w",
      ["wu"] = "老君庙|ed",
    },
  },
  ["老君庙|ed"] = {
    name = "老君庙",
    exits = {
      ["ed"] = "神仙台|ne,wu",
    },
  },  
  ["和县|n,sw,w"] = {
    name = "和县",
    exits = {
      ["n"] = "石堡|ne,s",
      ["sw"] = "石峡关|ne,se",
      ["w"] = "小路|e,s",
    },
  },
  ["太石渡|nw,w"] = {
    name = "太石渡",
    exits = {
      ["nw"] = "石峡关|ne,se",
      ["w"] = "小路|e,n",
      ["ride"] = "镡河渡|eu",
    },
  },
    ["镡河渡|eu"] = {
    name = "镡河渡",
    exits = {
      ["eu"] = "白马关|ed,wd",
      ["ride"] = "太石渡|nw,w",
    },
  },  

  ["小路|e,n"] = {
    name = "小路",
    exits = {
      ["e"] = "太石渡|nw,w",
      ["n"] = "小路|n,s",
    },
  },
  ["小路|e,s"] = {
    name = "小路",
    exits = {
      ["e"] = "和县|n,sw,w",
      ["s"] = "小路|n,s",
    },
  },
  ["小路|n,s"] = {
    name = "小路",
    exits = {
      ["n"] = "小路|e,s",
      ["s"] = "小路|e,n",
    },
  },
  ["慧音山|enter,nd,se,sw"] = {
    name = "慧音山",
    exits = {
      ["enter"] = "南山寺|out",
      ["nd"] = "石马坪|ed,nd,su",
      ["se"] = "马跑泉|enter,nw",
      ["sw"] = "罗家堡|ne,sw",
    },
  },
  ["晒经寺|out"] = {
    name = "晒经寺",
    exits = {
      ["out"] = "马跑泉|enter,nw",
    },
  },
  ["李广墓|wu"] = {
    name = "李广墓",
    exits = {
      ["wu"] = "石马坪|ed,nd,su",
    },
  },
  ["盐关|ne,sw"] = {
    name = "盐关",
    exits = {
      ["ne"] = "罗家堡|ne,sw",
      ["sw"] = "祁山堡|ne,s",
    },
  },
  ["石堡|ne,s"] = {
    name = "石堡",
    exits = {
      ["ne"] = "长道|n,sw",
      ["s"] = "和县|n,sw,w",
    },
  },
  ["石峡关|ne,se"] = {
    name = "石峡关",
    exits = {
      ["ne"] = "和县|n,sw,w",
      ["se"] = "太石渡|nw,w",
    },
  },
  ["石马坪|ed,nd,su"] = {
    name = "石马坪",
    exits = {
      ["ed"] = "李广墓|wu",
      ["nd"] = "南门|e,n,su,sw,w",
      ["su"] = "慧音山|enter,nd,se,sw",
    },
  },
  ["祁山堡|ne,s"] = {
    name = "祁山堡",
    exits = {
      ["ne"] = "盐关|ne,sw",
      ["s"] = "长道|n,sw",
    },
  },
  ["罗家堡|ne,sw"] = {
    name = "罗家堡",
    exits = {
      ["ne"] = "慧音山|enter,nd,se,sw",
      ["sw"] = "盐关|ne,sw",
    },
  },
  ["长道|n,sw"] = {
    name = "长道",
    exits = {
      ["n"] = "祁山堡|ne,s",
      ["sw"] = "石堡|ne,s",
    },
  },
  ["马跑泉|enter,nw"] = {
    name = "马跑泉",
    exits = {
      ["enter"] = "晒经寺|out",
      ["nw"] = "慧音山|enter,nd,se,sw",
    },
  },
  ["两河口|w"] = {
    name = "两河口",
    exits = {
      ["w"] = "大兰驿|e,wu",
      ["tang"] = "横现河|se",
    },
  },
  ["横现河|se"] = {
  name = "横现河",
  exits = {
    ["tang"] = "两河口|w",
  },
},

  ["大兰驿|e,wu"] = {
    name = "大兰驿",
    exits = {
      ["e"] = "两河口|w",
      ["wu"] = "白马关|ed,wd",
    },
  },
  ["白马关|ed,wd"] = {
    name = "白马关",
    exits = {
      ["ed"] = "大兰驿|e,wu",
      ["wd"] = "镡河渡|eu",
    },
  },
  ["三官殿|n,ne,nw,su"] = {
    name = "三官殿",
    exits = {
      ["n"] = "三清阁|ne,nw,s",
      ["ne"] = "诸葛祠|sw",
      ["nw"] = "雷祖庙|se",
      ["su"] = "山顶|nd,sd",
    },
  },
  ["三清殿|e,nu,sd,w"] = {
    name = "三清殿",
    exits = {
      ["e"] = "偏殿|w",
      ["nu"] = "山顶|nd,sd",
      ["sd"] = "第一山牌坊|nu,s",
      ["w"] = "伙房|e",
    },
  },
  ["三清阁|ne,nw,s"] = {
    name = "三清阁",
    exits = {
      ["ne"] = "后山小路|enter,s,sw",
      ["nw"] = "后山小路|enter,s,se",
      ["s"] = "三官殿|n,ne,nw,su",
    },
  },
  ["人间天上坊|nu,s"] = {
    name = "人间天上坊",
    exits = {
      ["enter qinglong"] = "青龙殿|out",
      ["enter baihu"] = "白虎殿|out",
      ["nu"] = "玉泉阁|n,sd",
      ["s"] = "通仙桥|ed,n",
    },
  },

  ["白虎殿|out"] = {
  name = "白虎殿",
  exits = {
    ["out"] = "人间天上坊|nu,s",
  },
},

  ["青龙殿|out"] = {
  name = "青龙殿",
  exits = {
    ["out"] = "人间天上坊|nu,s",
  },
},

  ["伙房|e"] = {
    name = "伙房",
    exits = {
      ["e"] = "三清殿|e,nu,sd,w",
    },
  },
  ["偏殿|w"] = {
    name = "偏殿",
    exits = {
      ["w"] = "三清殿|e,nu,sd,w",
    },
  },
  ["后山小路|enter,s,se"] = {
    name = "后山小路",
    exits = {
      ["enter"] = "选胜亭|out",
      ["s"] = "苍圣殿|n",
      ["se"] = "三清阁|ne,nw,s",
    },
  },
  ["后山小路|enter,s,sw"] = {
    name = "后山小路",
    exits = {
      ["enter"] = "静观亭|out",
      ["s"] = "玉泉井|n",
      ["sw"] = "三清阁|ne,nw,s",
    },
  },
  ["山顶|nd,sd"] = {
    name = "山顶",
    exits = {
      ["nd"] = "三官殿|n,ne,nw,su",
      ["sd"] = "三清殿|e,nu,sd,w",
    },
  },
  ["渭水西岸|nw,se"] = {
    name = "渭水西岸",
    exits = {
      ["nw"] = "渭水西岸|se,w",
      ["se"] = "街亭古战场|nw,se,wu",
    },
  },
  ["渭水西岸|se,w"] = {
    name = "渭水西岸",
    exits = {
      ["se"] = "渭水西岸|nw,se",
      ["w"] = "陇西县城|e,nu",
    },
  },
  ["玉泉井|n"] = {
    name = "玉泉井",
    exits = {
      ["n"] = "后山小路|enter,s,sw",
    },
  },
  ["玉泉阁|n,sd"] = {
    name = "玉泉阁",
    exits = {
      ["n"] = "第一山牌坊|nu,s",
      ["sd"] = "人间天上坊|nu,s",
    },
  },
  ["第一山牌坊|nu,s"] = {
    name = "第一山牌坊",
    exits = {
      ["nu"] = "三清殿|e,nu,sd,w",
      ["s"] = "玉泉阁|n,sd",
    },
  },
  ["耤河北岸|nw"] = {
    name = "耤河北岸",
    exits = {
      ["nw"] = "街亭古战场|nw,se,wu",
    },
  },
  ["苍圣殿|n"] = {
    name = "苍圣殿",
    exits = {
      ["n"] = "后山小路|enter,s,se",
    },
  },
  ["街亭古战场|nw,se,wu"] = {
    name = "街亭古战场",
    exits = {
      ["nw"] = "渭水西岸|nw,se",
      ["se"] = "耤河北岸|nw",
      ["wu"] = "通仙桥|ed,n",
    },
  },
  ["诸葛祠|sw"] = {
    name = "诸葛祠",
    exits = {
      ["sw"] = "三官殿|n,ne,nw,su",
    },
  },
  ["选胜亭|out"] = {
    name = "选胜亭",
    exits = {
      ["out"] = "后山小路|enter,s,se",
    },
  },

  ["陇西县城|e,nu"] = {
    name = "陇西县城",
    exits = {
      ["e"] = "渭水西岸|se,w",
    },
  },
  ["雷祖庙|se"] = {
    name = "雷祖庙",
    exits = {
      ["se"] = "三官殿|n,ne,nw,su",
    },
  },
  ["静观亭|out"] = {
    name = "静观亭",
    exits = {
      ["out"] = "后山小路|enter,s,sw",
    },
  },  

  ["卦台山|sd"] = {
    name = "卦台山",
    exits = {
      ["sd"] = "山路|ed,nu,sd,se",
    },
  },

  ["天靖山麓|e,wu"] = {
    name = "天靖山麓",
    exits = {
      ["e"] = "山门|e,w",
      ["wu"] = "山路|ed,nu,sd,se",
    },
  },
  
  ["山路|ed,nu,sd,se"] = {
    name = "山路",
    exits = {
      ["ed"] = "天靖山麓|e,wu",
      ["nu"] = "卦台山|sd",
      ["sd"] = "山路|nu,sd",
      ["se"] = "北门|e,nw,s,w",
    },
  },
  ["山路|nu,sd"] = {
    name = "山路",
    exits = {
      ["nu"] = "山路|ed,nu,sd,se",
      ["sd"] = "西门|e,n,nu,nw,s",
    },
  },
  ["山路|nw,se"] = {
    name = "山路",
    exits = {
      ["nw"] = "山路|se,wu",
      ["se"] = "西门|e,n,nu,nw,s",
    },
  },
  ["山路|se,wu"] = {
    name = "山路",
    exits = {
      ["se"] = "山路|nw,se",
      ["wu"] = "黄土地|ed,wu",
    },
  },
  ["山门|e,w"] = {
    name = "山门",
    exits = {
      ["e"] = "遇仙桥|eu,w",
      ["w"] = "天靖山麓|e,wu",
    },
  },

  ["遇仙桥|eu,w"] = {
    name = "遇仙桥",
    exits = {
      ["eu"] = "大门|wd",
      ["w"] = "山门|e,w",
    },
  },
  ["黄土地|ed,wu"] = {
    name = "黄土地",
    exits = {
      ["ed"] = "山路|se,wu",
    },
  },  
  ["仙人崖|enter,eu,nw"] = {
    name = "仙人崖",
    exits = {
      ["enter"] = "仙人崖石窟|out",
      ["eu"] = "南天门|eu,wd",
      ["nw"] = "耤河南岸|eu,se,w",
    },
  },
  ["仙人崖石窟|out"] = {
    name = "仙人崖石窟",
    exits = {
      ["out"] = "仙人崖|enter,eu,nw",
    },
  },
  ["南天门|eu,wd"] = {
    name = "南天门",
    exits = {
      ["eu"] = "燃灯阁|u,wd",
      ["wd"] = "仙人崖|enter,eu,nw",
    },
  },
  ["山路|eu,ne,wd"] = {
    name = "山路",
    exits = {
      ["eu"] = "花石崖|wd",
      ["ne"] = "渭水北岸|e,sw",
      ["wd"] = "耤河南岸|eu,se,w",
    },
  },
  ["渭水北岸|e,sw"] = {
    name = "渭水北岸",
    exits = {
      ["sw"] = "山路|eu,ne,wd",
    },
  },
  ["燃灯阁|u,wd"] = {
    name = "燃灯阁",
    exits = {
      ["u"] = "玉皇阁|d",
      ["wd"] = "南天门|eu,wd",
    },
  },
  ["玉皇阁|d"] = {
    name = "玉皇阁",
    exits = {
      ["d"] = "燃灯阁|u,wd",
    },
  },
  ["耤河南岸|e,se,w"] = {
    name = "耤河南岸",
    exits = {
      ["e"] = "耤河南岸|eu,se,w",
      ["se"] = "麦积山脚|enter,nw",
      ["w"] = "东门|e,n,s,w",
    },
  },
  ["耤河南岸|eu,se,w"] = {
    name = "耤河南岸",
    exits = {
      ["eu"] = "山路|eu,ne,wd",
      ["se"] = "仙人崖|enter,eu,nw",
      ["w"] = "耤河南岸|e,se,w",
    },
  },
  ["花石崖|wd"] = {
    name = "花石崖",
    exits = {
      ["wd"] = "山路|eu,ne,wd",
    },
  },
  ["麦积山脚|enter,nw"] = {
    name = "麦积山脚",
    exits = {
      ["enter"] = "麦积石窟|out",
      ["nw"] = "耤河南岸|e,se,w",
    },
  },
  ["麦积石窟|out"] = {
    name = "麦积石窟",
    exits = {
      ["out"] = "麦积山脚|enter,nw",
    },
  },  
}
}

-- mapAliases 放外面（房间名 -&gt; 拼音缩写）
mapper.maps["qinzhou"].mapAliases = {

  -- ===== 城门/主干 =====
  ["北门"]     = "bm",
  ["西门"]     = "xm",
  ["南门"]     = "nm",
  ["东门"]     = "dm",
  ["中央广场"] = "origin",
  ["北大街"]   = "bdj",
  ["南大街1"]  = "ndj",
  ["南大街2"]  = "ndj2",

  ["十字大街1"] = "szdj1",
  ["十字大街2"] = "szdj2",
  ["十字大街3"] = "szdj",
  ["十字大街4"] = "szdj4",
  ["十字大街5"] = "szdj5",
  ["十字大街6"] = "szdj6",

  -- ===== 商铺/民居 =====
  ["怡玉阁"]   = "yyg",
  ["当铺"]     = "dp",
  ["后巷"]     = "hx",
  ["水井坊"]   = "sjf",
  ["食铺"]     = "sp",
  ["杂货铺"]   = "zhp",
  ["民居"]     = "mj",     -- 注意：你有两个“民居”节点（|n 与 |s），这里会歧义
  ["驿站"]     = "yz",
  ["西关巷"]   = "xgx",

  -- ===== 官署/客栈/城隍庙 =====
  ["军营"]     = "jy",
  ["钱庄"]     = "qz",
  ["城隍庙"]   = "chm",
  ["小广场"]   = "xgc",
  ["车马行"]   = "mch",
  ["客栈"]     = "kz",
  ["里间"]     = "lj",
  ["守将府"]   = "sjfu",
  ["大厅"]     = "dt",
  ["左耳房"]   = "zef",
  ["右耳房"]   = "yef",
  ["后宅"]     = "hz",

  -- ===== 南门外 / 神仙台线 =====
  ["神仙台"]   = "sxt",
  ["老君庙"]   = "ljm",
  ["石马坪"]   = "smp",
  ["李广墓"]   = "lgm",
  ["慧音山"]   = "hys",
  ["南山寺"]   = "nss",
  ["马跑泉"]   = "mpq",
  ["晒经寺"]   = "sjs",

  ["罗家堡"]   = "ljb",
  ["盐关"]     = "yg",
  ["祁山堡"]   = "qsb",
  ["长道"]     = "cd",
  ["石堡"]     = "sb",
  ["和县"]     = "hex",
  ["石峡关"]   = "sxg",

  ["小路"]     = "xl",     -- 注意：你有 3 个“小路”节点，这里会歧义
  ["太石渡"]   = "tsd",
  ["镡河渡"]   = "thd",
  ["大兰驿"]   = "dly",
  ["白马关"]   = "bmg",
  ["两河口"]   = "lhk",
  ["横现河"]   = "hxh",

  -- ===== 三清/山顶/通仙桥/街亭古战场 =====
  ["三官殿"]     = "sgd",
  ["三清阁"]     = "sqg",
  ["三清殿"]     = "sqd",
  ["山顶"]       = "sd",
  ["第一山牌坊"] = "dyspf",
  ["玉泉阁"]     = "yqg",
  ["玉泉井"]     = "yqj",
  ["苍圣殿"]     = "csd",
  ["雷祖庙"]     = "lzm",
  ["诸葛祠"]     = "zgc",
  ["选胜亭"]     = "xst",
  ["静观亭"]     = "jgt",
  ["通仙桥"]     = "txq",
  ["街亭古战场"] = "jtgzc",
  ["渭水西岸"]   = "wsxa",   -- 注意：你有 2 个“渭水西岸”节点
  ["陇西县城"]   = "lxxc",

  ["伙房"]     = "hf",
  ["偏殿"]     = "pd",
  ["后山小路"] = "hsxl",     -- 注意：你有 2 个“后山小路”节点

  -- ===== 天靖山麓/遇仙桥/麦积山线 =====
  ["卦台山"]   = "gts",
  ["天靖山麓"] = "tjsl",
  ["山门"]     = "sm",
  ["遇仙桥"]   = "yxq",
  ["大门"]     = "dam",
  ["黄土地"]   = "htd",
  ["山路"]     = "sl",       -- 注意：你有多条“山路”节点，这里会歧义

  ["仙人崖"]     = "xry",
  ["仙人崖石窟"] = "xrysk",
  ["南天门"]     = "ntm",
  ["燃灯阁"]     = "rdg",
  ["玉皇阁"]     = "yhg",
  ["花石崖"]     = "hsy",

  ["渭水北岸"] = "wsba",
  ["耤河南岸"] = "jhnan",    -- 注意：你有 2 个“耤河南岸”节点
  ["耤河北岸"] = "jhnbei",

  ["麦积山脚"] = "mjsj",
  ["麦积石窟"] = "mjsk",

  -- ===== 其它（如果后续你补了）=====
  -- ["东门外"] = "dmw",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>灵州 - lingzhou</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["lingzhou"] = {
  region = {
    key  = "lingzhou",      -- 区域代号，用在 goto wx.xxx 里
    name = "灵州",    -- 纯注释/显示用
  },

  mapNodes = {
  ["一品堂大门|s"] = {
    name = "一品堂大门",
    exits = {
      ["s"] = "西大街|e,n,s,w",
    },
  },
  ["东大街|e,n,s,w"] = {
    name = "东大街",
    exits = {
      ["e"] = "灵州东门|e,n,w",
      ["n"] = "衙门|s",
      ["s"] = "大将军府|n,s",
      ["w"] = "城中心|e,n,s,w",
    },
  },
  ["休息室|e"] = {
    name = "休息室",
    exits = {
      ["e"] = "皇宫后殿|e,n,s,w",
    },
  },
  ["偏殿|e"] = {
    name = "偏殿",
    exits = {
      ["e"] = "皇宫正殿|e,n,s,w",
    },
  },
  ["偏殿|w"] = {
    name = "偏殿",
    exits = {
      ["w"] = "皇宫正殿|e,n,s,w",
    },
  },
  ["公主寝宫|e,w"] = {
    name = "公主寝宫",
    exits = {
      ["e"] = "花园|s,w",
      ["w"] = "竹林|e,n,s,w",
    },
  },
  ["关中马车行|e"] = {
    name = "关中马车行",
    exits = {
      ["e"] = "酒馆|e,w",
    },
  },
  ["冷宫|e"] = {
    name = "冷宫",
    exits = {
      ["e"] = "太监宿处|e,w",
    },
  },
  ["刀店|n"] = {
    name = "刀店",
    exits = {
      ["n"] = "西大街|e,n,s,w",
    },
  },
  ["北大街|n,s"] = {
    name = "北大街",
    exits = {
      ["n"] = "皇宫大门|n,s",
      ["s"] = "城中心|e,n,s,w",
    },
  },
  ["南大街|e,n,s,w"] = {
    name = "南大街",
    exits = {
      ["e"] = "车马店|e,u,w",
      ["n"] = "城中心|e,n,s,w",
      ["s"] = "灵州南门|n,s",
      ["w"] = "酒馆|e,w",
    },
  },
  ["卫士宿处|e,n"] = {
    name = "卫士宿处",
    exits = {
      ["e"] = "皇宫广场|e,n,s,w",
      ["n"] = "花房|n,s",
    },
  },
  ["城中心|e,n,s,w"] = {
    name = "城中心",
    exits = {
      ["e"] = "东大街|e,n,s,w",
      ["n"] = "北大街|n,s",
      ["s"] = "南大街|e,n,s,w",
      ["w"] = "西大街|e,n,s,w",
    },
  },
  ["大将军府|n,s"] = {
    name = "大将军府",
    exits = {
      ["n"] = "东大街|e,n,s,w",
      ["s"] = "将军府大院|n",
    },
  },
  ["大路|n,s"] = {
    name = "大路",
    exits = {
      ["n"] = "灵州南门|n,s",
    },
  },
  ["太医院|n,s"] = {
    name = "太医院",
    exits = {
      ["n"] = "棋房|n,s,w",
      ["s"] = "库房|n,s",
    },
  },
  ["太监宿处|e,w"] = {
    name = "太监宿处",
    exits = {
      ["e"] = "御书院|e,s,w",
      ["w"] = "冷宫|e",
    },
  },
  ["宫女宿处|e,w"] = {
    name = "宫女宿处",
    exits = {
      ["e"] = "浴室|w",
      ["w"] = "御书院|e,s,w",
    },
  },
  ["将军府大院|n"] = {
    name = "将军府大院",
    exits = {
      ["n"] = "大将军府|n,s",
    },
  },
  ["小校场|n"] = {
    name = "小校场",
    exits = {
      ["n"] = "骠骑营|e,n,nw,s,w",
    },
  },
  ["小路|e,w"] = {
    name = "小路",
    exits = {
      ["w"] = "灵州东门|e,n,w",
    },
  },
  ["库房|n,s"] = {
    name = "库房",
    exits = {
      ["n"] = "太医院|n,s",
      ["s"] = "车马房|n,w",
    },
  },
  ["御书院|e,s,w"] = {
    name = "御书院",
    exits = {
      ["e"] = "宫女宿处|e,w",
      ["s"] = "竹林|e,n,s,w",
      ["w"] = "太监宿处|e,w",
    },
  },
  ["御学堂|e,s"] = {
    name = "御学堂",
    exits = {
      ["e"] = "王子寝宫|e,w",
      ["s"] = "琴房|e,n,s",
    },
  },
  ["御膳房|n,s"] = {
    name = "御膳房",
    exits = {
      ["n"] = "琴房|e,n,s",
      ["s"] = "花房|n,s",
    },
  },
  ["棋房|n,s,w"] = {
    name = "棋房",
    exits = {
      ["n"] = "花园|s,w",
      ["s"] = "太医院|n,s",
    },
  },
  ["浴室|w"] = {
    name = "浴室",
    exits = {
      ["w"] = "宫女宿处|e,w",
    },
  },
  ["灵州东门|e,n,w"] = {
    name = "灵州东门",
    exits = {
      ["e"] = "小路|e,w",
      ["n"] = "玄武塔大门|enter,s",
      ["w"] = "东大街|e,n,s,w",
    },
  },
  ["灵州南门|n,s"] = {
    name = "灵州南门",
    exits = {
      ["n"] = "南大街|e,n,s,w",
      ["s"] = "大路|n,s",
    },
  },
  ["玄武塔大厅|out"] = {
    name = "玄武塔大厅",
    exits = {
      ["out"] = "玄武塔大门|enter,s",
    },
  },
  ["玄武塔大门|enter,s"] = {
    name = "玄武塔大门",
    exits = {
      ["enter"] = "玄武塔大厅|out",
      ["s"] = "灵州东门|e,n,w",
    },
  },
  ["王子寝宫|e,w"] = {
    name = "王子寝宫",
    exits = {
      ["e"] = "竹林|e,n,s,w",
      ["w"] = "御学堂|e,s",
    },
  },
  ["珍宝室|w"] = {
    name = "珍宝室",
    exits = {
      ["w"] = "皇宫后殿|e,n,s,w",
    },
  },
  ["琴房|e,n,s"] = {
    name = "琴房",
    exits = {
      ["n"] = "御学堂|e,s",
      ["s"] = "御膳房|n,s",
    },
  },
  ["皇后寝宫|e,n,s,w"] = {
    name = "皇后寝宫",
    exits = {
      ["n"] = "竹林|e,n,s,w",
      ["s"] = "皇宫后殿|e,n,s,w",
    },
  },
  ["皇宫后殿|e,n,s,w"] = {
    name = "皇宫后殿",
    exits = {
      ["e"] = "珍宝室|w",
      ["n"] = "皇后寝宫|e,n,s,w",
      ["s"] = "皇宫正殿|e,n,s,w",
      ["w"] = "休息室|e",
    },
  },
  ["皇宫大门|n,s"] = {
    name = "皇宫大门",
    exits = {
      ["n"] = "皇宫广场|e,n,s,w",
      ["s"] = "北大街|n,s",
    },
  },
  ["皇宫广场|e,n,s,w"] = {
    name = "皇宫广场",
    exits = {
      ["e"] = "车马房|n,w",
      ["n"] = "皇宫正殿|e,n,s,w",
      ["s"] = "皇宫大门|n,s",
      ["w"] = "卫士宿处|e,n",
    },
  },
  ["皇宫正殿|e,n,s,w"] = {
    name = "皇宫正殿",
    exits = {
      ["e"] = "偏殿|w",
      ["n"] = "皇宫后殿|e,n,s,w",
      ["s"] = "皇宫广场|e,n,s,w",
      ["w"] = "偏殿|e",
    },
  },
  ["竹林|e,n,s,w"] = {
    name = "竹林",
    exits = {
      ["e"] = "公主寝宫|e,w",
      ["n"] = "御书院|e,s,w",
      ["s"] = "皇后寝宫|e,n,s,w",
      ["w"] = "王子寝宫|e,w",
    },
  },
  ["花园|s,w"] = {
    name = "花园",
    exits = {
      ["s"] = "棋房|n,s,w",
      ["w"] = "公主寝宫|e,w",
    },
  },
  ["花房|n,s"] = {
    name = "花房",
    exits = {
      ["n"] = "御膳房|n,s",
      ["s"] = "卫士宿处|e,n",
    },
  },
  ["营房|s"] = {
    name = "营房",
    exits = {
      ["s"] = "骠骑营|e,n,nw,s,w",
    },
  },
  ["衙门|s"] = {
    name = "衙门",
    exits = {
      ["s"] = "东大街|e,n,s,w",
    },
  },
  ["西大街|e,n,s,w"] = {
    name = "西大街",
    exits = {
      ["e"] = "城中心|e,n,s,w",
      ["n"] = "一品堂大门|s",
      ["s"] = "刀店|n",
      ["w"] = "骠骑营|e,n,nw,s,w",
    },
  },
  ["车马店|e,u,w"] = {
    name = "车马店",
    exits = {
      ["e"] = "马厩|w",
      ["u"] = "车马店二楼|d",
      ["w"] = "南大街|e,n,s,w",
    },
  },
  ["车马店二楼|d"] = {
    name = "车马店二楼",
    exits = {
      ["d"] = "车马店|e,u,w",
    },
  },
  ["车马房|n,w"] = {
    name = "车马房",
    exits = {
      ["n"] = "库房|n,s",
      ["w"] = "皇宫广场|e,n,s,w",
    },
  },
  ["酒馆|e,w"] = {
    name = "酒馆",
    exits = {
      ["e"] = "南大街|e,n,s,w",
      ["w"] = "关中马车行|e",
    },
  },
  ["马厩|w"] = {
    name = "马厩",
    exits = {
      ["w"] = "车马店|e,u,w",
    },
  },
  ["马栏|e"] = {
    name = "马栏",
    exits = {
      ["e"] = "骠骑营|e,n,nw,s,w",
    },
  },
  ["骠骑营|e,n,nw,s,w"] = {
    name = "骠骑营",
    exits = {
      ["e"] = "西大街|e,n,s,w",
      ["n"] = "营房|s",
      ["s"] = "小校场|n",
      ["w"] = "马栏|e",
    },
  },
}
}

-- mapAliases 放外面（房间名 -&gt; 拼音缩写）
mapper.maps["lingzhou"].mapAliases = {

  -- ===== 城区主干 =====
  ["城中心"]   = "origin",
  ["东大街"]   = "ddj",
  ["西大街"]   = "xdj",
  ["南大街"]   = "ndj",
  ["北大街"]   = "bdj",

  ["灵州东门"] = "lzdm",
  ["灵州南门"] = "lznm",

  -- ===== 官署/帮会/店铺 =====
  ["衙门"]       = "ym",
  ["一品堂大门"] = "yptdm",
  ["刀店"]       = "dd",
  ["酒馆"]       = "jg",
  ["关中马车行"] = "mch",
  ["车马店"]     = "cmd",
  ["车马店二楼"] = "cmd2",
  ["马厩"]       = "mj",
  ["车马房"]     = "cmf",

  -- ===== 将军府/军营 =====
  ["大将军府"]   = "djjf",
  ["将军府大院"] = "jjfdy",
  ["骠骑营"]     = "pqy",
  ["营房"]       = "yf",
  ["小校场"]     = "xxc",
  ["马栏"]       = "ml",

  -- ===== 宫城（皇宫） =====
  ["皇宫大门"]   = "hgdm",
  ["皇宫广场"]   = "hggc",
  ["皇宫正殿"]   = "hgzd",
  ["皇宫后殿"]   = "hghd",
  ["皇后寝宫"]   = "hhqg",
  ["御书院"]     = "ysy",
  ["御学堂"]     = "yxt",
  ["御膳房"]     = "ysf",
  ["琴房"]       = "qf",
  ["棋房"]       = "qf2",   -- “棋房”会和“琴房(qf)”撞，所以我用 qf2
  ["竹林"]       = "zl",
  ["公主寝宫"]   = "gzqg",
  ["王子寝宫"]   = "wzqg",
  ["花园"]       = "hy",
  ["花房"]       = "hf",
  ["珍宝室"]     = "zbs",
  ["休息室"]     = "xxs",

  -- 偏殿有两条节点（|e 与 |w），房间名相同：这里只能给一个别名
  ["偏殿"]       = "pd",

  -- ===== 宫内杂役区 =====
  ["太医院"]     = "tyy",
  ["库房"]       = "kf",
  ["太监宿处"]   = "tjsc",
  ["宫女宿处"]   = "gnsc",
  ["浴室"]       = "ys",
  ["冷宫"]       = "lg",
  ["卫士宿处"]   = "wssc",

  -- ===== 玄武塔 =====
  ["玄武塔大门"] = "xwtdm",
  ["玄武塔大厅"] = "xwtdt",

  -- ===== 城外/道路 =====
  ["大路"] = "dl",
  ["小路"] = "xl",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>汉中 - hanzhong</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["hanzhong"] = {
  region = {
    key  = "hanzhong",      -- 区域代号，用在 goto wx.xxx 里
    name = "汉中",    -- 纯注释/显示用
  },
mapNodes = {

  ["广场|e,n,s,w"] = {
    name = "广场",
    exits = {
      ["e"] = "关正街|e,n,w",
      ["n"] = "北大街|n,s,w",
      ["s"] = "南大街|e,n,s,w",
      ["w"] = "西门|e,n,s,wu",
    },
  },  

["南大街|e,n,s,w"] = {
  name = "南大街",
  exits = {
    ["e"] = "药铺|w",
    ["n"] = "广场|e,n,s,w",
    ["s"] = "南大街1|e,n,s,w",
    ["w"] = "客店|e,enter",
  },
},
["客店|e,enter"] = {
  name = "客店",
  exits = {
    ["e"] = "南大街|e,n,s,w",
    ["enter"] = "通铺|out",
  },
},

["通铺|out"] = {
  name = "通铺",
  exits = {
    ["out"] = "客店|e,enter",
  },
},

["药铺|w"] = {
  name = "药铺",
  exits = {
    ["w"] = "南大街|e,n,s,w",
  },
},
["南大街1|e,n,s,w"] = {
  name = "南大街1",
  exits = {
    ["e"] = "当铺|w",
    ["n"] = "南大街|e,n,s,w",
    ["s"] = "南大街|n,ne,s,se,w",
    ["w"] = "钱庄|e",
  },
},

  ["南大街|n,ne,s,se,w"] = {
    name = "南大街2",
    exits = {
      ["n"] = "南大街1|e,n,s,w",
      ["ne"] = "东湖北岸|e,sw",
      ["s"] = "南门|e,n,s,w",
      ["se"] = "东湖南岸|e,nw",
      ["w"] = "拜将台|e",
    },
  },
["拜将台|e"] = {
  name = "拜将台",
  exits = {
    ["e"] = "南大街|n,ne,s,se,w",
  },
},

["当铺|w"] = {
  name = "当铺",
  exits = {
    ["w"] = "南大街1|e,n,s,w",
  },
},
["钱庄|e"] = {
  name = "钱庄",
  exits = {
    ["e"] = "南大街1|e,n,s,w",
  },
},

  ["东门|e,n,s,w"] = {
    name = "东门",
    exits = {
      ["e"] = "田间土路|e,n,s,w",
      ["w"] = "关正街|e,n,w",
    },
  },
  ["关正街|e,n,w"] = {
    name = "关正街",
    exits = {
      ["e"] = "东门|e,n,s,w",
      ["n"] = "净明寺|ne,s",
      ["w"] = "广场|e,n,s,w",
    },
  },
  ["净明寺|ne,s"] = {
    name = "净明寺",
    exits = {
      ["ne"] = "净明寺塔|sw",
      ["s"] = "关正街|e,n,w",
    },
  },
  ["净明寺塔|sw"] = {
    name = "净明寺塔",
    exits = {
      ["sw"] = "净明寺|ne,s",
    },
  },

  ["山路|ed,wu"] = {
    name = "山路",
    exits = {
      ["ed"] = "西门|e,n,s,wu",
      ["wu"] = "木桥|ed,wd",
    },
  },
  ["木桥|ed,wd"] = {
    name = "木桥",
    exits = {
      ["ed"] = "山路|ed,wu",
      ["wd"] = "土路|eu,s,w",
    },
  },
  ["田间土路|e,n,s,w"] = {
    name = "田间土路",
    exits = {
      ["w"] = "东门|e,n,s,w",
    },
  },
  ["西门|e,n,s,wu"] = {
    name = "西门",
    exits = {
      ["e"] = "广场|e,n,s,w",
      ["wu"] = "山路|ed,wu",
    },
  },

  ["南门|e,n,s,w"] = {
    name = "南门",
    exits = {
      ["n"] = "南大街|n,ne,s,se,w",
      ["s"] = "汉水北渡|n,w",
    },
  },
  ["小土坡|sd"] = {
    name = "小土坡",
    exits = {
      ["sd"] = "汉水北岸|e,nu,nw",
    },
  },
  ["桥下|sw"] = {
    name = "桥下",
    exits = {
      ["sw"] = "汉水北岸|n,ne,se",
    },
  },
  ["汉水北岸|e,nu,nw"] = {
    name = "汉水北岸",
    exits = {
      ["e"] = "汉水北渡|n,w",
      ["nu"] = "小土坡|sd",
      ["nw"] = "汉水北岸|nw,se",
    },
  },
  ["汉水北岸|n,ne,se"] = {
    name = "汉水北岸",
    exits = {
      ["n"] = "土路|eu,s,w",
      ["ne"] = "桥下|sw",
      ["se"] = "汉水北岸|nw,se",
    },
  },
["土路|eu,s,w"] = {
  name = "土路",
  exits = {
    ["eu"] = "木桥|ed,wd",
    ["s"] = "汉水北岸|n,ne,se",
    ["w"] = "沔县|e,nw,su,sw",
  },
},  

["沔县|e,nw,su,sw"] = {
  name = "沔县",
  exits = {
    ["e"] = "土路|eu,s,w",
    ["su"] = "定军山|nd",
  },
},

["定军山|nd"] = {
  name = "定军山",
  exits = {
    ["nd"] = "沔县|e,nw,su,sw",
  },
},

  ["汉水北岸|nw,se"] = {
    name = "汉水北岸",
    exits = {
      ["nw"] = "汉水北岸|n,ne,se",
      ["se"] = "汉水北岸|e,nu,nw",
    },
  },
  ["汉水北渡|n,w"] = {
    name = "汉水北渡",
    exits = {
      ["n"] = "南门|e,n,s,w",
      ["w"] = "汉水北岸|e,nu,nw",
    },
  },
  ["东湖北岸|e,sw"] = {
    name = "东湖北岸",
    exits = {
      ["e"] = "东湖北岸|se,w",
      ["sw"] = "南大街|n,ne,s,se,w",
    },
  },
  ["东湖北岸|se,w"] = {
    name = "东湖北岸",
    exits = {
      ["se"] = "汉台|nw,sw,u",
      ["w"] = "东湖北岸|e,sw",
    },
  },
  ["东湖南岸|e,nw"] = {
    name = "东湖南岸",
    exits = {
      ["e"] = "东湖南岸|ne,w",
      ["nw"] = "南大街|n,ne,s,se,w",
    },
  },
  ["东湖南岸|ne,w"] = {
    name = "东湖南岸",
    exits = {
      ["ne"] = "汉台|nw,sw,u",
      ["w"] = "东湖南岸|e,nw",
    },
  },

  ["汉台|nw,sw,u"] = {
    name = "汉台",
    exits = {
      ["nw"] = "东湖北岸|se,w",
      ["sw"] = "东湖南岸|ne,w",
      ["u"] = "汉台之上|d",
    },
  },
  ["汉台之上|d"] = {
    name = "汉台之上",
    exits = {
      ["d"] = "汉台|nw,sw,u",
    },
  },  
  ["军营|e"] = {
    name = "军营",
    exits = {
      ["e"] = "北大街|e,n,s,w",
    },
  },
  ["北大街|e,n,s,w"] = {
    name = "北大街",
    exits = {
      ["e"] = "守将府|w",
      ["n"] = "北门|e,nu,s,w",
      ["s"] = "北大街|n,s,w",
      ["w"] = "军营|e",
    },
  },
  ["北大街|n,s,w"] = {
    name = "北大街",
    exits = {
      ["n"] = "北大街|e,n,s,w",
      ["s"] = "广场|e,n,s,w",
      ["w"] = "食肆|e",
    },
  },
  ["北门|e,nu,s,w"] = {
    name = "北门",
    exits = {
      ["nu"] = "山河堰|n,sd",
      ["s"] = "北大街|e,n,s,w",
    },
  },
  ["守将府|w"] = {
    name = "守将府",
    exits = {
      ["w"] = "北大街|e,n,s,w",
    },
  },
  ["山河堰|n,sd"] = {
    name = "山河堰",
    exits = {
      ["n"] = "褒谷|nu,s",
      ["sd"] = "北门|e,nu,s,w",
    },
  },

  ["褒谷|nu,s"] = {
    name = "褒谷",
    exits = {
      ["s"] = "山河堰|n,sd",
    },
  },
  ["食肆|e"] = {
    name = "食肆",
    exits = {
      ["e"] = "北大街|n,s,w",
    },
  },
}
}

-- mapAliases 放外面（房间名 -&gt; 拼音缩写）
mapper.maps["hanzhong"].mapAliases = {

  -- ===== 城内主干 =====
  ["广场"]     = "origin",
  ["关正街"]   = "gzj",
  ["南大街"]   = "ndj",
  ["南大街1"]  = "ndj1",
  ["南大街2"]  = "ndj2",
  ["北大街"]   = "bdj",

  ["东门"]     = "dm",
  ["西门"]     = "xm",
  ["南门"]     = "nm",
  ["北门"]     = "bm",

  -- ===== 店铺/建筑 =====
  ["客店"]     = "kd",
  ["通铺"]     = "tp",
  ["药铺"]     = "yp",
  ["当铺"]     = "dp",
  ["钱庄"]     = "qz",
  ["食肆"]     = "ss",

  -- ===== 寺庙/景点 =====
  ["净明寺"]     = "jms",
  ["净明寺塔"]   = "jmst",
  ["拜将台"]     = "bjt",
  ["汉台"]       = "ht",
  ["汉台之上"]   = "htzs",

  -- ===== 军政 =====
  ["军营"]     = "jy",
  ["守将府"]   = "sjf",

  -- ===== 城外/道路 =====
  ["田间土路"] = "tjtl",
  ["山路"]     = "sl",
  ["木桥"]     = "mq",
  ["山河堰"]   = "she",
  ["褒谷"]     = "bg",

  -- ===== 汉水/河岸 =====
  ["汉水北渡"] = "hsbd",
  ["汉水北岸"] = "hsba",
  ["小土坡"]   = "xtp",
  ["桥下"]     = "qx",

  -- ===== 东湖 =====
  ["东湖北岸"] = "dhba",
  ["东湖南岸"] = "dhna",
}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>长安 - ca</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["ca"] = {
  region = {
    key  = "ca",      -- 区域代号，用在 goto wx.xxx 里
    name = "长安",    -- 纯注释/显示用
  },
mapNodes = {

["灞桥|e,n,se,w"] = {
  name = "灞桥",
  exits = {
    ["w"] = "通化门|e,nu,su,w",
  },
},

["通化门|e,nu,su,w"] = {
  name = "通化门",
  exits = {
    ["e"] = "灞桥|e,n,se,w",
    ["w"] = "通化门大街1|e,n,s,w",
  },
},

["官道|e,s,sw,w"] = {
  name = "官道",
  exits = {
    ["e"] = "金光门|e,nu,su,w",
    ["s"] = "骡马市|n",
    ["sw"] = "鄠邑|ne,nw",
    ["w"] = "陈仓|e,ne,nu,se,sw,w",
  },
},

["鄠邑|ne,nw"] = {
  name = "鄠邑",
  exits = {
    ["ne"] = "官道|e,s,sw,w",
    ["nw"] = "陈仓|e,ne,nu,se,sw,w",
  },
},

["明德门|eu,n,s,wu"] = {
  name = "明德门",
  exits = {
    ["n"] = "朱雀大街3|e,n,s,w",
    ["s"] = "官道|n,s",
  },
},

["官道|n,s"] = {
  name = "官道",
  exits = {
    ["n"] = "明德门|eu,n,s,wu",
    ["s"] = "官道|n,se,sw",
  },
},

["普光寺|nw,sw"] = {
  name = "普光寺",
  exits = {
    ["nw"] = "樊川|nw,se,su",
    ["sw"] = "",
  },
},

["樊川|nw,se,su"] = {
  name = "樊川",
  exits = {
    ["nw"] = "官道|n,se,sw",
    ["se"] = "普光寺|nw,sw",
  },
},

["官道|n,se,sw"] = {
  name = "官道",
  exits = {
    ["n"] = "官道|n,s",
    ["se"] = "樊川|nw,se,su",
    ["sw"] = "官道|ne,sw",
  },
},

["官道|ne,sw"] = {
  name = "官道",
  exits = {
    ["ne"] = "官道|n,se,sw",
    ["sw"] = "杜陵|ne,sw",
  },
},

["杜陵|ne,sw"] = {
  name = "杜陵",
  exits = {
    ["ne"] = "官道|ne,sw",
    ["sw"] = "褒斜道|ne,sw",
  },
},

["褒斜道|ne,sw"] = {
  name = "褒斜道",
  exits = {
    ["ne"] = "杜陵|ne,sw",
    ["sw"] = "褒斜道|ne,sd,w",
  },
},

["褒斜道|ne,sd,w"] = {
  name = "褒斜道",
  exits = {
    ["ne"] = "褒斜道|ne,sw",
    ["w"] = "连云道|e,w",
  },
},

["连云道|e,w"] = {
  name = "连云道",
  exits = {
    ["e"] = "褒斜道|ne,sd,w",
    ["w"] = "连云道|e,nw",
  },
},

["连云道|e,nw"] = {
  name = "连云道",
  exits = {
    ["e"] = "连云道|e,w",
    ["nw"] = "陈仓道|nu,se",
  },
},

["陈仓道|nu,se"] = {
  name = "陈仓道",
  exits = {
    ["nu"] = "陈仓道|nd,sd",
    ["se"] = "连云道|e,nw",
  },
},


["陈仓道|nd,sd"] = {
  name = "陈仓道",
  exits = {
    ["nd"] = "大散关|ne,su",
    ["sd"] = "陈仓道|nu,se",
  },
},

["大散关|ne,su"] = {
  name = "大散关",
  exits = {
    ["ne"] = "陈仓|e,ne,nu,se,sw,w",
    ["su"] = "陈仓道|nd,sd",
  },
},

["小路|ne,sw"] = {
  name = "小路",
  exits = {
    ["sw"] = "陈仓|e,ne,nu,se,sw,w",
  },
},

["陈仓|e,ne,nu,se,sw,w"] = {
  name = "陈仓",
  exits = {
    ["e"] = "官道|e,s,sw,w",
    ["ne"] = "小路|ne,sw",
    ["se"] = "鄠邑|ne,nw",
    ["sw"] = "大散关|ne,su",
  },
},

["骡马市|n"] = {
  name = "骡马市",
  exits = {
    ["n"] = "官道|e,s,sw,w",
  },
},

["金光门|e,nu,su,w"] = {
  name = "金光门",
  exits = {
    ["e"] = "金光门大街2|e,n,s,w",
    ["w"] = "官道|e,s,sw,w",
  },
},


  ["顺街|e,n"] = {
  name = "顺街",
  exits = {
    ["e"] = "朱雀大街2|e,n,s,w",
    ["n"] = "西市3|e,n,s,w",
  },
},
["顺街|n,se,w"] = {
  name = "顺街",
  exits = {
    ["n"] = "东市|n,s,se,w",
    ["se"] = "大慈恩寺|e,nw,se,w",
    ["w"] = "朱雀大街2|e,n,s,w",
  },
},

["古董店|e"] = {
  name = "古董店",
  exits = {
    ["e"] = "西市|e,n,s,w",
  },
},
["胭脂铺|w"] = {
  name = "胭脂铺",
  exits = {
    ["w"] = "西市|e,n,s,w",
  },
},

["西市|e,n,s,w"] = {
  name = "西市",
  exits = {
    ["e"] = "胭脂铺|w",
    ["n"] = "金光门大街1|e,n,s,w",
    ["s"] = "西市1|e,n,s,w",
    ["w"] = "古董店|e",
  },
},

  ["千金堂|e"] = {
  name = "千金堂",
  exits = {
    ["e"] = "西市2|e,n,s,w",
  },
},
["函谷书肆|w"] = {
  name = "函谷书肆",
  exits = {
    ["w"] = "西市2|e,n,s,w",
  },
},
["西市2|e,n,s,w"] = {
  name = "西市2",
  exits = {
    ["e"] = "函谷书肆|w",
    ["n"] = "西市1|e,n,s,w",
    ["s"] = "西市3|e,n,s,w",
    ["w"] = "千金堂|e",
  },
},

["打铁铺|e"] = {
  name = "打铁铺",
  exits = {
    ["e"] = "西市1|e,n,s,w",
  },
},

["酒肆|w"] = {
  name = "酒肆",
  exits = {
    ["w"] = "西市1|e,n,s,w",
  },
},

["西市1|e,n,s,w"] = {
  name = "西市1",
  exits = {
    ["e"] = "酒肆|w",
    ["n"] = "西市|e,n,s,w",
    ["s"] = "西市2|e,n,s,w",
    ["w"] = "打铁铺|e",
  },
},

["市集|e"] = {
  name = "市集",
  exits = {
    ["e"] = "西市3|e,n,s,w",
  },
},
["欧氏军器坊|w"] = {
  name = "欧氏军器坊",
  exits = {
    ["w"] = "西市3|e,n,s,w",
  },
},

["西市3|e,n,s,w"] = {
  name = "西市3",
  exits = {
    ["e"] = "欧氏军器坊|w",
    ["n"] = "西市2|e,n,s,w",
    ["s"] = "顺街|e,n",
    ["w"] = "市集|e",
  },
},


  ["东市|e,n,s,w"] = {
    name = "东市",
    exits = {
      ["e"] = "当铺|w",
      ["n"] = "春明门大街1|e,n,s,w",
      ["s"] = "东市1|e,n,s,w",
      ["w"] = "月记银号|e",
    },
  },  
["当铺|w"] = {
  name = "当铺",
  exits = {
    ["w"] = "东市|e,n,s,w",
  },
},  
["月记银号|e"] = {
  name = "月记银号",
  exits = {
    ["e"] = "东市|e,n,s,w",
  },
},
["三秦客栈|e,enter"] = {
  name = "三秦客栈",
  exits = {
    ["e"] = "东市1|e,n,s,w",
    ["enter"] = "客店内室|out",
  },
},

["客店内室|out"] = {
  name = "客店内室",
  exits = {
    ["out"] = "三秦客栈|e,enter",
  },
},

  ["东市1|e,n,s,w"] = {
    name = "东市1",
    exits = {
      ["e"] = "榷场|w",
      ["n"] = "东市|e,n,s,w",
      ["s"] = "东市|n,s,se,w",
      ["w"] = "三秦客栈|e,enter",
    },
  },    
["榷场|w"] = {
  name = "榷场",
  exits = {
    ["w"] = "东市1|e,n,s,w",
  },
},

["月记金店|e"] = {
  name = "月记金店",
  exits = {
    ["e"] = "东市|n,s,se,w",
  },
},

["小酒馆|nw"] = {
  name = "小酒馆",
  exits = {
    ["nw"] = "东市|n,s,se,w",
  },
},

["东市|n,s,se,w"] = {
  name = "东市",
  exits = {
    ["n"] = "东市1|e,n,s,w",
    ["s"] = "顺街|n,se,w",
    ["se"] = "小酒馆|nw",
    ["w"] = "月记金店|e",
  },
},

  ["朱雀门|eu,n,s,wu"] = {
  name = "朱雀门",
  exits = {
    ["n"] = "承天门大街2|e,n,s,w",
    ["s"] = "朱雀大街|e,n,s,w",
  },
},  
["朱雀大街|e,n,s,w"] = {
  name = "朱雀大街",
  exits = {
    ["e"] = "春明门大街|e,n,s,w",
    ["n"] = "朱雀门|eu,n,s,wu",
    ["s"] = "朱雀大街1|e,n,s,w",
    ["w"] = "金光门大街|e,n,s,w",
  },
},
["长安宠物店|e"] = {
  name = "长安宠物店",
  exits = {
    ["e"] = "朱雀大街1|e,n,s,w",
  },
},

["荐福寺|e,w"] = {
  name = "荐福寺",
  exits = {
    ["w"] = "朱雀大街1|e,n,s,w",
  },
},

["朱雀大街1|e,n,s,w"] = {
  name = "朱雀大街1",
  exits = {
    ["e"] = "荐福寺|e,w",
    ["n"] = "朱雀大街|e,n,s,w",
    ["s"] = "朱雀大街2|e,n,s,w",
    ["w"] = "长安宠物店|e",
  },
},

["朱雀大街2|e,n,s,w"] = {
  name = "朱雀大街2",
  exits = {
    ["e"] = "顺街|n,se,w",
    ["n"] = "朱雀大街1|e,n,s,w",
    ["s"] = "朱雀大街3|e,n,s,w",
    ["w"] = "顺街|e,n",
  },
},
["玄都观|e"] = {
  name = "玄都观",
  exits = {
    ["e"] = "朱雀大街3|e,n,s,w",
  },
},

["大雁塔|w"] = {
  name = "大雁塔",
  exits = {
    ["w"] = "大慈恩寺|e,nw,se,w",
  },
},

["大慈恩寺|e,nw,se,w"] = {
  name = "大慈恩寺",
  exits = {
    ["e"] = "大雁塔|w",
    ["nw"] = "顺街|n,se,w",
    ["se"] = "曲江池边|nw",
    ["w"] = "朱雀大街3|e,n,s,w",
  },
},

["曲江池边|nw"] = {
  name = "曲江池边",
  exits = {
    ["nw"] = "大慈恩寺|e,nw,se,w",
  },
},

["朱雀大街3|e,n,s,w"] = {
  name = "朱雀大街3",
  exits = {
    ["e"] = "大慈恩寺|e,nw,se,w",
    ["n"] = "朱雀大街2|e,n,s,w",
    ["s"] = "明德门|eu,n,s,wu",
    ["w"] = "玄都观|e",
  },
},

["函谷琴苑|n"] = {
  name = "函谷琴苑",
  exits = {
    ["n"] = "春明门大街|e,n,s,w",
  },
},
  ["春明门大街|e,n,s,w"] = {
    name = "春明门大街",
    exits = {
      ["e"] = "春明门大街1|e,n,s,w",
      ["n"] = "国子监|e,n,ne,s,w",
      ["s"] = "函谷琴苑|n",
      ["w"] = "朱雀大街|e,n,s,w",
    },
  },   

  ["春明门大街1|e,n,s,w"] = {
    name = "春明门大街1",
    exits = {
      ["e"] = "春明门大街|e,n,w",
      ["n"] = "丹凤门大街|e,n,s",
      ["s"] = "东市|e,n,s,w",
      ["w"] = "春明门大街|e,n,s,w",      
    },
  },

  ["春明门大街|e,n,w"] = {
    name = "春明门大街",
    exits = {
      ["e"] = "春明门|e,nu,su,w",
      ["n"] = "通阳门|s,w",
      ["w"] = "春明门大街1|e,n,s,w",
    },
  },
["春明门|e,nu,su,w"] = {
  name = "春明门",
  exits = {
    ["e"] = "",
    ["w"] = "春明门大街|e,n,w",
  },
},



["金光门大街2|e,n,s,w"] = {
  name = "金光门大街2",
  exits = {
    ["e"] = "金光门大街1|e,n,s,w",
    ["n"] = "关中马车行|s",
    ["s"] = "飞马镖局|n",
    ["w"] = "金光门|e,nu,su,w",
  },
},

["飞马镖局|n"] = {
  name = "飞马镖局",
  exits = {
    ["n"] = "金光门大街2|e,n,s,w",
  },
},

["关中马车行|s"] = {
  name = "关中马车行",
  exits = {
    ["s"] = "金光门大街2|e,n,s,w",
  },
},

["金光门大街1|e,n,s,w"] = {
  name = "金光门大街1",
  exits = {
    ["e"] = "金光门大街|e,n,s,w",
    ["n"] = "善堂|s",
    ["s"] = "西市|e,n,s,w",
    ["w"] = "金光门大街2|e,n,s,w",
  },
},

["善堂|s"] = {
  name = "善堂",
  exits = {
    ["s"] = "金光门大街1|e,n,s,w",
  },
},

["金光门大街|e,n,s,w"] = {
  name = "金光门大街",
  exits = {
    ["e"] = "朱雀大街|e,n,s,w",
    ["n"] = "三门大街|n,s",
    ["s"] = "京兆府|n,w",
    ["w"] = "金光门大街1|e,n,s,w",
  },
},

["京兆府|n,w"] = {
  name = "京兆府",
  exits = {
    ["n"] = "金光门大街|e,n,s,w",
    ["w"] = "京兆府侧厅|e",
  },
},

["京兆府侧厅|e"] = {
  name = "京兆府侧厅",
  exits = {
    ["e"] = "京兆府|n,w",
  },
},


["安远门|e,nu,su,w"] = {
  name = "安远门",
  exits = {
    ["e;e;e"] = "通化门大街|e,s,w",
    ["w"] = "",
  },
},

["通化门大街|e,s,w"] = {
  name = "通化门大街",
  exits = {
    ["e"] = "安福门|ne,nu,se,su,w",
    ["s"] = "三门大街|n,s",
    ["w;w;w"] = "安远门|e,nu,su,w",
  },
},

["三门大街|n,s"] = {
  name = "三门大街",
  exits = {
    ["n"] = "通化门大街|e,s,w",
    ["s"] = "金光门大街|e,n,s,w",
  },
},

["安福门|ne,nu,se,su,w"] = {
  name = "安福门",
  exits = {
    ["se;e"] = "承天门横街|e,n,s,w",
    ["w"] = "通化门大街|e,s,w",
  },
},
  


["延喜门|e,nu,nw,su,sw"] = {
  name = "延喜门",
  exits = {
    ["e"] = "通化门大街|e,w",
    ["sw;w"] = "承天门横街|e,n,s,w",
  },
},

["通化门大街|e,w"] = {
  name = "通化门大街",
  exits = {
    ["e"] = "通化门大街|e,n,s,w",
    ["w"] = "延喜门|e,nu,nw,su,sw",
  },
},
 ["丹凤门|eu,n,s,wu"] = {
    name = "丹凤门",
    exits = {
      ["n"] = "丹凤门广场|ne,nu,nw,s",
      ["s"] = "丹凤门大街|n,s",
    },
  },

["丹凤门大街|n,s"] = {
  name = "丹凤门大街",
  exits = {
    ["n"] = "丹凤门|eu,n,s,wu",
    ["s"] = "通化门大街|e,n,s,w",
  },
},
    ["通化门大街|e,n,s,w"] = {
    name = "通化门大街",
    exits = {
      ["e"] = "通化门大街1|e,n,s,w",
      ["n"] = "丹凤门大街|n,s",
      ["s"] = "丹凤门大街|e,n,s",
      ["w"] = "通化门大街|e,w",
    },
  },

    ["通化门大街1|e,n,s,w"] = {
    name = "通化门大街1",
    exits = {
      ["e"] = "通化门|e,nu,su,w",
      ["n"] = "长乐坊|s,w",
      ["s"] = "跃龙门|n,s",
      ["w"] = "通化门大街|e,n,s,w",
    },
  },

  ["长乐坊|s,w"] = {
  name = "长乐坊",
  exits = {
    ["s"] = "通化门大街1|e,n,s,w",
    ["w"] = "怡红院|e",
  },
},
["怡红院|e"] = {
  name = "怡红院",
  exits = {
    ["e"] = "长乐坊|s,w",
  },
},

  ["承天门大街|e,n,s,w"] = {
    name = "承天门大街",
    exits = {
      ["e"] = "左金吾卫府|w",
      ["n"] = "承天门横街|e,n,s,w",
      ["s"] = "承天门大街1|e,n,s,w",
      ["w"] = "右金吾卫府|e",      
    },
  },
["右金吾卫府|e"] = {
  name = "右金吾卫府",
  exits = {
    ["e"] = "承天门大街|e,n,s,w",
  },
},

["左金吾卫府|w"] = {
  name = "左金吾卫府",
  exits = {
    ["w"] = "承天门大街|e,n,s,w",
  },
},

  ["承天门大街1|e,n,s,w"] = {
    name = "承天门大街1",
    exits = {
      ["e"] = "敬时楼|e,w",
      ["n"] = "承天门大街|e,n,s,w",
      ["s"] = "承天门大街2|e,n,s,w",
      ["w"] = "鸿胪寺|e",  
    },
  },

  ["鸿胪寺|e"] = {
  name = "鸿胪寺",
  exits = {
    ["e"] = "承天门大街1|e,n,s,w",
  },
},
  
  ["承天门大街2|e,n,s,w"] = {
    name = "承天门大街2",
    exits = {
      ["e"] = "太常寺|e,s,w",
      ["n"] = "承天门大街1|e,n,s,w",
      ["s"] = "朱雀门|eu,n,s,wu",
      ["w"] = "斗鸡场|e,w",  
    },
  },



  ["斗鸡场|e,w"] = {
  name = "斗鸡场",
  exits = {
    ["e"] = "承天门大街2|e,n,s,w",
    ["w"] = "宠物竞技场|e,u",
  },
},

["宠物竞技场|e,u"] = {
  name = "宠物竞技场",
  exits = {
    ["e"] = "斗鸡场|e,w",
  },
},

  ["承天门横街|e,n,s,w"] = {
  name = "承天门横街",
  exits = {
    ["e;ne"] = "延喜门|e,nu,nw,su,sw",
    ["n;n"] = "承天门|eu,n,s,wu",
    ["s"] = "承天门大街|e,n,s,w",
    ["w;nw"] = "安福门|ne,nu,se,su,w",
  },
},  


  ["承天门|eu,n,s,wu"] = {
    name = "承天门",
    exits = {
      ["n"] = "太极门|e,nu,s,w",
      ["s;s"] = "承天门横街|e,n,s,w",
    },
  },

  ["东内苑|s,w"] = {
    name = "东内苑",
    exits = {
      ["s"] = "龙首殿|n",
      ["w"] = "左银台门|e,nw,w",
    },
  },
  ["东朝堂|nw,sw"] = {
    name = "东朝堂",
    exits = {
      ["nw"] = "含元殿|n,sd,se,sw",
      ["sw"] = "丹凤门广场|ne,nu,nw,s",
    },
  },
  ["两仪殿|nd,sd"] = {
    name = "两仪殿",
    exits = {
      ["nd"] = "甘露殿|e,n,su,w",
      ["sd"] = "两仪门|nu,su",
    },
  },
  ["两仪门|nu,su"] = {
    name = "两仪门",
    exits = {
      ["nu"] = "两仪殿|nd,sd",
      ["su"] = "太极殿|nd,sd",
    },
  },
  ["中书内省|e,sw"] = {
    name = "中书内省",
    exits = {
      ["e"] = "太极门|e,nu,s,w",
      ["sw"] = "通明门|ne,w",
    },
  },
 
  ["丹凤门广场|ne,nu,nw,s"] = {
    name = "丹凤门广场",
    exits = {
      ["ne"] = "东朝堂|nw,sw",
      ["nu"] = "含元殿|n,sd,se,sw",
      ["nw"] = "西朝堂|ne,se",
      ["s"] = "丹凤门|eu,n,s,wu",
    },
  },
  ["丽正殿|s"] = {
    name = "丽正殿",
    exits = {
      ["s"] = "崇教殿|n,nw,s",
    },
  },
  ["内侍省|ne"] = {
    name = "内侍省",
    exits = {
      ["ne"] = "掖庭宫|e,n,ne,sw",
    },
  },
  ["凌烟阁|w"] = {
    name = "凌烟阁",
    exits = {
      ["w"] = "甘露殿|e,n,su,w",
    },
  },
  ["右羽林军营|e"] = {
    name = "右羽林军营",
    exits = {
      ["e"] = "玄武门|e,n,s,w",
    },
  },
  ["右银台门|e,ne,w"] = {
    name = "右银台门",
    exits = {
      ["e"] = "紫宸殿|e,ne,nw,s,w",
      ["ne"] = "麟德殿|ne,nw,se,sw",
      ["w"] = "含光殿|e,s",
    },
  },
  ["含元殿|n,sd,se,sw"] = {
    name = "含元殿",
    exits = {
      ["n"] = "宣政殿|n,s",
      ["sd"] = "丹凤门广场|ne,nu,nw,s",
      ["se"] = "东朝堂|nw,sw",
      ["sw"] = "西朝堂|ne,se",
    },
  },
  ["含光殿|e,s"] = {
    name = "含光殿",
    exits = {
      ["e"] = "右银台门|e,ne,w",
      ["s"] = "西内苑|n,w",
    },
  },
  ["嘉猷门|e,sw,w"] = {
    name = "嘉猷门",
    exits = {
      ["e"] = "淑景殿|e,w",
      ["sw"] = "掖庭宫|e,n,ne,sw",
      ["w"] = "太仓|e,s",
    },
  },
  ["大安宫|e,sd"] = {
    name = "大安宫",
    exits = {
      ["e"] = "西内苑|n,w",
      ["sd"] = "西内苑|nu,s",
    },
  },
  ["太仓|e,s"] = {
    name = "太仓",
    exits = {
      ["e"] = "嘉猷门|e,sw,w",
      ["s"] = "掖庭宫|e,n,ne,sw",
    },
  },
  ["太极殿|nd,sd"] = {
    name = "太极殿",
    exits = {
      ["nd"] = "两仪门|nu,su",
      ["sd"] = "太极门|e,nu,s,w",
    },
  },
  ["太极门|e,nu,s,w"] = {
    name = "太极门",
    exits = {
      ["e"] = "门下内省|se,w",
      ["nu"] = "太极殿|nd,sd",
      ["s"] = "承天门|eu,n,s,wu",
      ["w"] = "中书内省|e,sw",
    },
  },
  ["太液池畔|e,nw,sw"] = {
    name = "太液池畔",
    exits = {
      ["e"] = "梨园|w",
      ["nw"] = "太液池畔|n,se,sw",
      ["sw"] = "太液池畔|ne,nw,se,sw",
    },
  },
  ["太液池畔|n,se,sw"] = {
    name = "太液池畔",
    exits = {
      ["n"] = "玄武殿|n,s",
      ["se"] = "太液池畔|e,nw,sw",
      ["sw"] = "太液池畔|ne,se",
    },
  },
  ["太液池畔|ne,nw,se,sw"] = {
    name = "太液池畔",
    exits = {
      ["ne"] = "太液池畔|e,nw,sw",
      ["nw"] = "太液池畔|ne,se",
      ["se"] = "蓬莱殿|nw,se,sw",
      ["sw"] = "麟德殿|ne,nw,se,sw",
    },
  },
  ["太液池畔|ne,se"] = {
    name = "太液池畔",
    exits = {
      ["ne"] = "太液池畔|n,se,sw",
      ["se"] = "太液池畔|ne,nw,se,sw",
    },
  },
  ["官道|e,n,s,w"] = {
    name = "官道",
    exits = {
      ["s"] = "玄武门|e,n,s,w",
    },
  },
  ["宣政殿|n,s"] = {
    name = "宣政殿",
    exits = {
      ["n"] = "紫宸殿|e,ne,nw,s,w",
      ["s"] = "含元殿|n,sd,se,sw",
    },
  },
  ["崇教殿|n,nw,s"] = {
    name = "崇教殿",
    exits = {
      ["n"] = "丽正殿|s",
      ["nw"] = "崇文馆|se",
      ["s"] = "明德殿|n,sw",
    },
  },
  ["崇文馆|se"] = {
    name = "崇文馆",
    exits = {
      ["se"] = "崇教殿|n,nw,s",
    },
  },
  ["左羽林军营|w"] = {
    name = "左羽林军营",
    exits = {
      ["w"] = "玄武门|e,n,s,w",
    },
  },
  ["左银台门|e,nw,w"] = {
    name = "左银台门",
    exits = {
      ["e"] = "东内苑|s,w",
      ["nw"] = "蓬莱殿|nw,se,sw",
      ["w"] = "紫宸殿|e,ne,nw,s,w",
    },
  },
  ["延嘉殿|n,s"] = {
    name = "延嘉殿",
    exits = {
      ["n"] = "承香殿|n,s",
      ["s"] = "甘露殿|e,n,su,w",
    },
  },

  ["承香殿|n,s"] = {
    name = "承香殿",
    exits = {
      ["n"] = "玄武门|eu,n,s,wu",
      ["s"] = "延嘉殿|n,s",
    },
  },
  ["掖庭宫|e,n,ne,sw"] = {
    name = "掖庭宫",
    exits = {
      ["e"] = "通明门|ne,w",
      ["n"] = "太仓|e,s",
      ["ne"] = "嘉猷门|e,sw,w",
      ["sw"] = "内侍省|ne",
    },
  },
  ["明德殿|n,sw"] = {
    name = "明德殿",
    exits = {
      ["n"] = "崇教殿|n,nw,s",
      ["sw"] = "通训门|ne,nw",
    },
  },
  ["梨园|w"] = {
    name = "梨园",
    exits = {
      ["w"] = "太液池畔|e,nw,sw",
    },
  },
  ["淑景殿|e,w"] = {
    name = "淑景殿",
    exits = {
      ["e"] = "甘露殿|e,n,su,w",
      ["w"] = "嘉猷门|e,sw,w",
    },
  },
  ["玄武殿|n,s"] = {
    name = "玄武殿",
    exits = {
      ["n"] = "玄武门|e,n,s,w",
      ["s"] = "太液池畔|n,se,sw",
    },
  },
  ["玄武门|e,n,s,w"] = {
    name = "玄武门",
    exits = {
      ["e"] = "左羽林军营|w",
      ["n"] = "官道|e,n,s,w",
      ["s"] = "玄武殿|n,s",
      ["w"] = "右羽林军营|e",
    },
  },
  ["玄武门|eu,n,s,wu"] = {
    name = "玄武门",
    exits = {
      ["n"] = "西内苑|nu,s",
      ["s"] = "承香殿|n,s",
    },
  },
  ["甘露殿|e,n,su,w"] = {
    name = "甘露殿",
    exits = {
      ["e"] = "凌烟阁|w",
      ["n"] = "延嘉殿|n,s",
      ["su"] = "两仪殿|nd,sd",
      ["w"] = "淑景殿|e,w",
    },
  },
  ["紫宸殿|e,ne,nw,s,w"] = {
    name = "紫宸殿",
    exits = {
      ["e"] = "左银台门|e,nw,w",
      ["ne"] = "蓬莱殿|nw,se,sw",
      ["nw"] = "麟德殿|ne,nw,se,sw",
      ["s"] = "宣政殿|n,s",
      ["w"] = "右银台门|e,ne,w",
    },
  },
  ["翰林院|se"] = {
    name = "翰林院",
    exits = {
      ["se"] = "麟德殿|ne,nw,se,sw",
    },
  },
  ["蓬莱殿|nw,se,sw"] = {
    name = "蓬莱殿",
    exits = {
      ["nw"] = "太液池畔|ne,nw,se,sw",
      ["se"] = "左银台门|e,nw,w",
      ["sw"] = "紫宸殿|e,ne,nw,s,w",
    },
  },
  ["西内苑|n,w"] = {
    name = "西内苑",
    exits = {
      ["n"] = "含光殿|e,s",
      ["w"] = "大安宫|e,sd",
    },
  },
  ["西内苑|nu,s"] = {
    name = "西内苑",
    exits = {
      ["nu"] = "大安宫|e,sd",
      ["s"] = "玄武门|eu,n,s,wu",
    },
  },
  ["西朝堂|ne,se"] = {
    name = "西朝堂",
    exits = {
      ["ne"] = "含元殿|n,sd,se,sw",
      ["se"] = "丹凤门广场|ne,nu,nw,s",
    },
  },
  ["通明门|ne,w"] = {
    name = "通明门",
    exits = {
      ["ne"] = "中书内省|e,sw",
      ["w"] = "掖庭宫|e,n,ne,sw",
    },
  },
  ["通训门|ne,nw"] = {
    name = "通训门",
    exits = {
      ["ne"] = "明德殿|n,sw",
      ["nw"] = "门下内省|se,w",
    },
  },
  ["门下内省|se,w"] = {
    name = "门下内省",
    exits = {
      ["se"] = "通训门|ne,nw",
      ["w"] = "太极门|e,nu,s,w",
    },
  },
  ["麟德殿|ne,nw,se,sw"] = {
    name = "麟德殿",
    exits = {
      ["ne"] = "太液池畔|ne,nw,se,sw",
      ["nw"] = "翰林院|se",
      ["se"] = "紫宸殿|e,ne,nw,s,w",
      ["sw"] = "右银台门|e,ne,w",
    },
  },
  ["龙首殿|n"] = {
    name = "龙首殿",
    exits = {
      ["n"] = "东内苑|s,w",
    },
  },

  ["兵部衙门|n"] = {
    name = "兵部衙门",
    exits = {
      ["n"] = "走廊|e,n,nd,nu,s,w",
    },
  },
  ["内教坊|n,s"] = {
    name = "内教坊",
    exits = {
      ["n"] = "太常寺|e,s,w",
    },
  },
  ["吏部衙门|s"] = {
    name = "吏部衙门",
    exits = {
      ["s"] = "走廊|e,n,s,sd,su,w",
    },
  },
  ["太常寺|e,s,w"] = {
    name = "太常寺",
    exits = {
      ["e"] = "太庙|e,w",
      ["s"] = "内教坊|n,s",
      ["w"] = "承天门大街2|e,n,s,w",
    },
  },
  ["太庙|e,w"] = {
    name = "太庙",
    exits = {
      ["e"] = "碑林|nw,w",
      ["w"] = "太常寺|e,s,w",
    },
  },
  ["尚书省|nu,se,su,w"] = {
    name = "尚书省",
    exits = {
      ["nu"] = "走廊|e,n,s,sd,su,w",
      ["se"] = "碑林|nw,w",
      ["su"] = "走廊|e,n,nd,nu,s,w",
      ["w"] = "敬时楼|e,w",
    },
  },
  ["工部衙门|n"] = {
    name = "工部衙门",
    exits = {
      ["n"] = "走廊|e,s",
    },
  },
  ["户部库房|e,su,w"] = {
    name = "户部库房",
    exits = {
      ["e"] = "杂物库房|w",
      ["su"] = "户部衙门|nd,s",
      ["w"] = "装备库房|e",
    },
  },
  ["户部衙门|nd,s"] = {
    name = "户部衙门",
    exits = {
      ["nd"] = "户部库房|e,su,w",
      ["s"] = "走廊|n,w",
    },
  },

  ["敬时楼|e,w"] = {
    name = "敬时楼",
    exits = {
      ["e"] = "尚书省|nu,se,su,w",
      ["w"] = "承天门大街1|e,n,s,w",
    },
  },
  ["杂物库房|w"] = {
    name = "杂物库房",
    exits = {
      ["w"] = "户部库房|e,su,w",
    },
  },
  ["碑林|nw,w"] = {
    name = "碑林",
    exits = {
      ["nw"] = "尚书省|nu,se,su,w",
      ["w"] = "太庙|e,w",
    },
  },
  ["礼部衙门|s"] = {
    name = "礼部衙门",
    exits = {
      ["s"] = "走廊|e,n",
    },
  },
  ["装备库房|e"] = {
    name = "装备库房",
    exits = {
      ["e"] = "户部库房|e,su,w",
    },
  },
  ["走廊|e,n"] = {
    name = "走廊",
    exits = {
      ["e"] = "走廊|e,n,s,sd,su,w",
      ["n"] = "礼部衙门|s",
    },
  },
  ["走廊|e,n,nd,nu,s,w"] = {
    name = "走廊",
    exits = {
      ["e"] = "走廊|s,w",
      ["n"] = "走廊|n,s",
      ["nd"] = "尚书省|nu,se,su,w",
      ["nu"] = "都堂|e,nd,sd,w",
      ["s"] = "兵部衙门|n",
      ["w"] = "走廊|e,s",
    },
  },
  ["走廊|e,n,s,sd,su,w"] = {
    name = "走廊",
    exits = {
      ["e"] = "走廊|n,w",
      ["n"] = "吏部衙门|s",
      ["s"] = "走廊|n,s",
      ["sd"] = "尚书省|nu,se,su,w",
      ["su"] = "都堂|e,nd,sd,w",
      ["w"] = "走廊|e,n",
    },
  },
  ["走廊|e,s"] = {
    name = "走廊",
    exits = {
      ["e"] = "走廊|e,n,nd,nu,s,w",
      ["s"] = "工部衙门|n",
    },
  },
  ["走廊|n,s"] = {
    name = "走廊",
    exits = {
      ["n"] = "走廊|e,n,s,sd,su,w",
      ["s"] = "走廊|e,n,nd,nu,s,w",
    },
  },
  ["走廊|n,w"] = {
    name = "走廊",
    exits = {
      ["n"] = "户部衙门|nd,s",
      ["w"] = "走廊|e,n,s,sd,su,w",
    },
  },
  ["走廊|s,w"] = {
    name = "走廊",
    exits = {
      ["s"] = "邢部衙门|n",
      ["w"] = "走廊|e,n,nd,nu,s,w",
    },
  },
  ["邢部衙门|n"] = {
    name = "邢部衙门",
    exits = {
      ["n"] = "走廊|s,w",
    },
  },
  ["都堂|e"] = {
    name = "都堂",
    exits = {
      ["e"] = "都堂|e,nd,sd,w",
    },
  },
  ["都堂|e,nd,sd,w"] = {
    name = "都堂",
    exits = {
      ["e"] = "都堂|w",
      ["nd"] = "走廊|e,n,s,sd,su,w",
      ["sd"] = "走廊|e,n,nd,nu,s,w",
      ["w"] = "都堂|e",
    },
  },
  ["都堂|w"] = {
    name = "都堂",
    exits = {
      ["w"] = "都堂|e,nd,sd,w",
    },
  },  


  ["书学|n,s,w"] = {
    name = "书学",
    exits = {
      ["n"] = "书学学堂|s",
      ["s"] = "书学学堂|n",
      ["w"] = "国子监|e,n,ne,s,w",
    },
  },
  ["书学学堂|n"] = {
    name = "书学学堂",
    exits = {
      ["n"] = "书学|n,s,w",
    },
  },
  ["书学学堂|s"] = {
    name = "书学学堂",
    exits = {
      ["s"] = "书学|n,s,w",
    },
  },
  ["四门馆|e,n,ne,nw,se,sw,w"] = {
    name = "四门馆",
    exits = {
      ["e"] = "四门馆学堂|w",
      ["n"] = "四门馆学堂|s",
      ["ne"] = "四门馆学堂|sw",
      ["nw"] = "四门馆学堂|se",
      ["se"] = "四门馆学堂|nw",
      ["sw"] = "国子监|e,n,ne,s,w",
      ["w"] = "四门馆学堂|e",
    },
  },
  ["四门馆学堂|e"] = {
    name = "四门馆学堂",
    exits = {
      ["e"] = "四门馆|e,n,ne,nw,se,sw,w",
    },
  },
  ["四门馆学堂|nw"] = {
    name = "四门馆学堂",
    exits = {
      ["nw"] = "四门馆|e,n,ne,nw,se,sw,w",
    },
  },
  ["四门馆学堂|s"] = {
    name = "四门馆学堂",
    exits = {
      ["s"] = "四门馆|e,n,ne,nw,se,sw,w",
    },
  },
  ["四门馆学堂|se"] = {
    name = "四门馆学堂",
    exits = {
      ["se"] = "四门馆|e,n,ne,nw,se,sw,w",
    },
  },
  ["四门馆学堂|sw"] = {
    name = "四门馆学堂",
    exits = {
      ["sw"] = "四门馆|e,n,ne,nw,se,sw,w",
    },
  },
  ["四门馆学堂|w"] = {
    name = "四门馆学堂",
    exits = {
      ["w"] = "四门馆|e,n,ne,nw,se,sw,w",
    },
  },
  ["国子学|e,n,s,se,sw,w"] = {
    name = "国子学",
    exits = {
      ["e"] = "国子监|e,n,ne,s,w",
      ["n"] = "国子学堂|s",
      ["s"] = "国子学堂|n",
      ["se"] = "国子学堂|nw",
      ["sw"] = "国子学堂|ne",
      ["w"] = "国子学堂|e",
    },
  },
  ["国子学堂|e"] = {
    name = "国子学堂",
    exits = {
      ["e"] = "国子学|e,n,s,se,sw,w",
    },
  },
  ["国子学堂|n"] = {
    name = "国子学堂",
    exits = {
      ["n"] = "国子学|e,n,s,se,sw,w",
    },
  },
  ["国子学堂|ne"] = {
    name = "国子学堂",
    exits = {
      ["ne"] = "国子学|e,n,s,se,sw,w",
    },
  },
  ["国子学堂|nw"] = {
    name = "国子学堂",
    exits = {
      ["nw"] = "国子学|e,n,s,se,sw,w",
    },
  },
  ["国子学堂|s"] = {
    name = "国子学堂",
    exits = {
      ["s"] = "国子学|e,n,s,se,sw,w",
    },
  },
  ["国子监|e,n,ne,s,w"] = {
    name = "国子监",
    exits = {
      ["e"] = "书学|n,s,w",
      ["n"] = "太学|e,ne,nw,s,se,sw,w",
      ["ne"] = "四门馆|e,n,ne,nw,se,sw,w",
      ["s"] = "春明门大街|e,n,s,w",
      ["w"] = "国子学|e,n,s,se,sw,w",
    },
  },
  ["太学|e,ne,nw,s,se,sw,w"] = {
    name = "太学",
    exits = {
      ["e"] = "太学学堂|w",
      ["ne"] = "太学学堂|sw",
      ["nw"] = "太学学堂|se",
      ["s"] = "国子监|e,n,ne,s,w",
      ["se"] = "太学学堂|nw",
      ["sw"] = "太学学堂|ne",
      ["w"] = "太学学堂|e",
    },
  },
  ["太学学堂|e"] = {
    name = "太学学堂",
    exits = {
      ["e"] = "太学|e,ne,nw,s,se,sw,w",
    },
  },
  ["太学学堂|ne"] = {
    name = "太学学堂",
    exits = {
      ["ne"] = "太学|e,ne,nw,s,se,sw,w",
    },
  },
  ["太学学堂|nw"] = {
    name = "太学学堂",
    exits = {
      ["nw"] = "太学|e,ne,nw,s,se,sw,w",
    },
  },
  ["太学学堂|se"] = {
    name = "太学学堂",
    exits = {
      ["se"] = "太学|e,ne,nw,s,se,sw,w",
    },
  },
  ["太学学堂|sw"] = {
    name = "太学学堂",
    exits = {
      ["sw"] = "太学|e,ne,nw,s,se,sw,w",
    },
  },
  ["太学学堂|w"] = {
    name = "太学学堂",
    exits = {
      ["w"] = "太学|e,ne,nw,s,se,sw,w",
    },
  },
 

  ["丹凤门大街|e,n,s"] = {
    name = "丹凤门大街",
    exits = {
      ["e"] = "兴庆门|e,w",
      ["n"] = "通化门大街|e,n,s,w",
      ["s"] = "春明门大街1|e,n,s,w",
    },
  },
  ["兴庆殿|e,w"] = {
    name = "兴庆殿",
    exits = {
      ["e"] = "南薰殿|n,s,w",
      ["w"] = "兴庆门|e,w",
    },
  },
  ["兴庆门|e,w"] = {
    name = "兴庆门",
    exits = {
      ["e"] = "兴庆殿|e,w",
      ["w"] = "丹凤门大街|e,n,s",
    },
  },
  ["勤政务本楼|e,nw"] = {
    name = "勤政务本楼",
    exits = {
      ["e"] = "通阳门|s,w",
      ["nw"] = "花萼相辉楼|ne,se",
    },
  },
  ["南薰殿|n,s,w"] = {
    name = "南薰殿",
    exits = {
      ["n"] = "跃龙门|n,s",
      ["s"] = "龙池湖畔|n,ne,sw",
      ["w"] = "兴庆殿|e,w",
    },
  },

  ["沉香亭|sw"] = {
    name = "沉香亭",
    exits = {
      ["sw"] = "龙池湖畔|n,ne,sw",
    },
  },
  ["花萼相辉楼|ne,se"] = {
    name = "花萼相辉楼",
    exits = {
      ["ne"] = "龙池湖畔|n,ne,sw",
      ["se"] = "勤政务本楼|e,nw",
    },
  },
  ["跃龙门|n,s"] = {
    name = "跃龙门",
    exits = {
      ["n"] = "通化门大街1|e,n,s,w",
      ["s"] = "南薰殿|n,s,w",
    },
  },

  ["通阳门|s,w"] = {
    name = "通阳门",
    exits = {
      ["s"] = "春明门大街|e,n,w",
      ["w"] = "勤政务本楼|e,nw",
    },
  },
  ["龙池湖畔|n,ne,sw"] = {
    name = "龙池湖畔",
    exits = {
      ["n"] = "南薰殿|n,s,w",
      ["ne"] = "沉香亭|sw",
      ["sw"] = "花萼相辉楼|ne,se",
    },
  },  

}
}

-- mapAliases（房间名 -&gt; 拼音缩写）
mapper.maps["ca"].mapAliases = {

  -- ====== 城外/道路/关口 ======
  ["官道"]     = "gd",
  ["鄠邑"]     = "hy",
  ["明德门"]   = "mdm",
  ["普光寺"]   = "pgs",
  ["樊川"]     = "fc",
  ["杜陵"]     = "dl",
  ["褒斜道"]   = "bxd",
  ["连云道"]   = "lyd",
  ["陈仓道"]   = "ccd",
  ["大散关"]   = "dsg",
  ["小路"]     = "xl",
  ["陈仓"]     = "cc",
  ["骡马市"]   = "lms",
  ["金光门"]   = "jgm",

  -- ====== 西市 ======
  ["顺街"]     = "sj",
  ["古董店"]   = "gdd",
  ["胭脂铺"]   = "yzp",
  ["西市"]     = "xs",
  ["千金堂"]   = "qjt",
  ["函谷书肆"] = "hgss",
  ["西市1"]    = "xs1",
  ["西市2"]    = "xs2",
  ["西市3"]    = "xs3",
  ["打铁铺"]   = "dtp",
  ["酒肆"]     = "js",
  ["市集"]     = "shj",
  ["欧氏军器坊"] = "osjqf",

  -- ====== 东市 ======
  ["东市"]     = "ds",
  ["东市1"]    = "ds1",
  ["当铺"]     = "dp",
  ["月记银号"] = "yjyy",
  ["三秦客栈"] = "sqkz",
  ["客店内室"] = "kdns",
  ["榷场"]     = "qc",
  ["月记金店"] = "yjjd",
  ["小酒馆"]   = "xjg",

  -- ====== 朱雀大街/寺塔/曲江 ======
  ["朱雀门"]     = "zqm",
  ["朱雀大街"]   = "zqdj",
  ["朱雀大街1"]  = "zqdj1",
  ["朱雀大街2"]  = "zqdj2",
  ["朱雀大街3"]  = "zqdj3",
  ["长安宠物店"] = "cacwd",
  ["荐福寺"]     = "jfs",
  ["玄都观"]     = "xdg",
  ["大慈恩寺"]   = "dces",
  ["大雁塔"]     = "dyt",
  ["曲江池边"]   = "qjcb",

  -- ====== 春明门大街/国子监一带 ======
  ["函谷琴苑"]     = "hgqy",
  ["春明门大街"]   = "cmmdj",
  ["春明门大街1"]  = "cmmdj1",
  ["春明门"]       = "cmm",
  ["国子监"]       = "gzj",
  ["书学"]         = "sx",
  ["书学学堂"]     = "sxxt",
  ["四门馆"]       = "smg",
  ["四门馆学堂"]   = "smgxt",
  ["国子学"]       = "gzx",
  ["国子学堂"]     = "gzxxt",
  ["太学"]         = "tx",
  ["太学学堂"]     = "txxt",

  -- ====== 金光门大街/京兆府 ======
  ["金光门大街"]   = "jgmdj",
  ["金光门大街1"]  = "jgmdj1",
  ["金光门大街2"]  = "jgmdj2",
  ["飞马镖局"]     = "fmbj",
  ["关中马车行"]   = "mch",
  ["善堂"]         = "st",
  ["京兆府"]       = "jzf",
  ["京兆府侧厅"]   = "jzfct",

  -- ====== 城北/东：通化门一带 ======
  ["安远门"]       = "aym",
  ["通化门大街"]   = "thmdj",
  ["三门大街"]     = "smdj",
  ["安福门"]       = "afm",
  ["延喜门"]       = "yxm",
  ["丹凤门"]       = "dfm",
  ["丹凤门大街"]   = "dfmdj",
  ["通化门大街1"]  = "thmdj1",
  ["通化门"]       = "thm",
  ["灞桥"]         = "bq",
  ["长乐坊"]       = "clf",
  ["怡红院"]       = "yhy",

  -- ====== 承天门/金吾卫/斗鸡场 ======
  ["承天门大街"]   = "ctmdj",
  ["承天门大街1"]  = "ctmdj1",
  ["承天门大街2"]  = "ctmdj2",
  ["承天门横街"]   = "ctmhj",
  ["承天门"]       = "ctm",
  ["左金吾卫府"]   = "zjwwf",
  ["右金吾卫府"]   = "yjwwf",
  ["鸿胪寺"]       = "hls",
  ["斗鸡场"]       = "djc",
  ["宠物竞技场"]   = "cwjjc",
  ["太常寺"]       = "tcs",
  ["内教坊"]       = "njf",
  ["太庙"]         = "tm",
  ["碑林"]         = "bl",
  ["尚书省"]       = "sss",

  -- ====== 尚书省走廊/六部/都堂 ======
  ["兵部衙门"]   = "bby",
  ["吏部衙门"]   = "lby",
  ["礼部衙门"]   = "lby2",
  ["户部衙门"]   = "hby",
  ["户部库房"]   = "hbkf",
  ["杂物库房"]   = "zwkf",
  ["装备库房"]   = "zbkf",
  ["工部衙门"]   = "gby",
  ["邢部衙门"]   = "xby",   -- 你原文如此写（常见是“刑部”）
  ["走廊"]       = "zl",
  ["都堂"]       = "dt",
  ["敬时楼"]     = "jsl",

  -- ====== 宫城：殿门苑池 ======
  ["东内苑"]       = "dny",
  ["东朝堂"]       = "dct",
  ["西朝堂"]       = "xct",
  ["丹凤门广场"]   = "dfmgc",
  ["含元殿"]       = "hyd",
  ["宣政殿"]       = "xzd",
  ["紫宸殿"]       = "zcd",
  ["右银台门"]     = "yytm",
  ["左银台门"]     = "zytm",
  ["含光殿"]       = "hgd",
  ["西内苑"]       = "xny",
  ["大安宫"]       = "dag",
  ["嘉猷门"]       = "jym",
  ["太仓"]         = "tc",
  ["掖庭宫"]       = "ytg",
  ["内侍省"]       = "nss",
  ["通明门"]       = "tmm",
  ["中书内省"]     = "zsns",
  ["门下内省"]     = "mxns",
  ["通训门"]       = "txm",
  ["太极门"]       = "tjm",
  ["太极殿"]       = "tjd",
  ["两仪门"]       = "lym",
  ["两仪殿"]       = "lyd",
  ["甘露殿"]       = "gld",
  ["延嘉殿"]       = "yjd",
  ["承香殿"]       = "cxd",
  ["淑景殿"]       = "sjd",
  ["凌烟阁"]       = "lyg",
  ["崇教殿"]       = "cjd",
  ["丽正殿"]       = "lzd",
  ["崇文馆"]       = "cwg",
  ["梨园"]         = "ly",
  ["蓬莱殿"]       = "pld",
  ["麟德殿"]       = "ldd",
  ["翰林院"]       = "hly",
  ["龙首殿"]       = "lsd",

  -- ====== 太液池/玄武门 ======
  ["太液池畔"]     = "tycp",
  ["玄武殿"]       = "xwd",
  ["玄武门"]       = "xwm",
  ["左羽林军营"]   = "zyljy",
  ["右羽林军营"]   = "yyljy",

  -- ====== 兴庆宫一带 ======
  ["兴庆门"]       = "xqm",
  ["兴庆殿"]       = "xqd",
  ["南薰殿"]       = "nxd",
  ["跃龙门"]       = "ylm",
  ["勤政务本楼"]   = "qzwbl",
  ["花萼相辉楼"]   = "haxhl",
  ["龙池湖畔"]     = "lchp",
  ["沉香亭"]       = "cxt",
  ["通阳门"]       = "tym",

}
</script>
					<eventHandlerList />
				</Script>
				<Script isActive="yes" isFolder="no">
					<name>潼关 - tongguan</name>
					<packageName></packageName>
					<script>mapper = mapper or {}
mapper.maps = mapper.maps or {}

mapper.maps["tongguan"] = {
  region = {
    key  = "tongguan",      -- 区域代号，用在 goto wx.xxx 里
    name = "潼关",    -- 纯注释/显示用
  },


mapNodes = {

  ["官道|e,s,w"] = {
    name = "官道",
    exits = {
      ["s"] = "潼关县|e,n,nw,se",
      ["w"] = "潼关|e,nd,nw,sd,se",
    },
  },
  ["官道|n,s,w"] = {
    name = "官道",
    exits = {
      ["n"] = "韦林镇|s,se,w",
      ["s"] = "华阴|n,su",
    },
  },

    ["华阴|n,su"] = {
    name = "华阴",
    exits = {
      ["n"] = "官道|n,s,w",
      ["su"] = "山脚下|nd,su",
    },
  },

  ["乱石滩|nu"] = {
    name = "乱石滩",
    exits = {
      ["nu"] = "深谷|nw,sd",
    },
  },
  ["关城马车行|nw"] = {
    name = "关城马车行",
    exits = {
      ["nw"] = "潼关县|e,n,nw,se",
    },
  },

  ["客房|out"] = {
    name = "客房",
    exits = {
      ["out"] = "悦来客栈|enter,w",
    },
  },
  ["幽谷|nu,se"] = {
    name = "幽谷",
    exits = {
      ["nu"] = "深谷|nu,sd",
      ["se"] = "深谷|nw,sd",
    },
  },
  ["悦来客栈|enter,w"] = {
    name = "悦来客栈",
    exits = {
      ["enter"] = "客房|out",
      ["w"] = "潼关县|e,n,nw,se",
    },
  },
  ["深谷|nu,sd"] = {
    name = "深谷",
    exits = {
      ["nu"] = "潼关|e,nd,nw,sd,se",
      ["sd"] = "幽谷|nu,se",
    },
  },
  ["深谷|nw,sd"] = {
    name = "深谷",
    exits = {
      ["nw"] = "幽谷|nu,se",
      ["sd"] = "乱石滩|nu",
    },
  },
  ["潼关|e,nd,nw,sd,se"] = {
    name = "潼关",
    exits = {
      ["e"] = "官道|e,s,w",
      ["nd"] = "黄河古渡|nw,se,su",
      ["nw"] = "韦林镇|s,se,w",
      ["sd"] = "深谷|nu,sd",
      ["se"] = "潼关县|e,n,nw,se",
    },
  },
  ["潼关县|e,n,nw,se"] = {
    name = "潼关县",
    exits = {
      ["e"] = "悦来客栈|enter,w",
      ["n"] = "官道|e,s,w",
      ["nw"] = "潼关|e,nd,nw,sd,se",
      ["se"] = "关城马车行|nw",
    },
  },
  ["灞桥|e,n,se,w"] = {
    name = "灞桥",
    exits = {
      ["e"] = "韦林镇|s,se,w",
    },
  },
  ["韦林镇|s,se,w"] = {
    name = "韦林镇",
    exits = {
      ["s"] = "官道|n,s,w",
      ["se"] = "潼关|e,nd,nw,sd,se",
      ["w"] = "灞桥|e,n,se,w",
    },
  },
  ["黄河古渡|nw,se,su"] = {
    name = "黄河古渡",
    exits = {
      ["su"] = "潼关|e,nd,nw,sd,se",
    },
  },

  ["乱石滩|su"] = {
    name = "乱石滩",
    exits = {
      ["su"] = "陡坡|nd,wu",
    },
  },
  ["仙姑观|e,enter"] = {
    name = "仙姑观",
    exits = {
      ["e"] = "山路|nd,su,w",
      ["enter"] = "庵堂|out",
    },
  },

  ["山脚下|nd,su"] = {
    name = "山脚下",
    exits = {
      ["nd"] = "华阴|n,su",
      ["su"] = "山路|nd,su,w",
    },
  },
  ["山路|nd,s"] = {
    name = "山路",
    exits = {
      ["nd"] = "牛心峪|ed,nd,su",
      ["s"] = "苍龙岭|n,nw,su,wu",
    },
  },
  ["山路|nd,su,w"] = {
    name = "山路",
    exits = {
      ["nd"] = "山脚下|nd,su",
      ["su"] = "牛心峪|ed,nd,su",
      ["w"] = "仙姑观|e,enter",
    },
  },
  ["庵堂|out"] = {
    name = "庵堂",
    exits = {
      ["out"] = "仙姑观|e,enter",
    },
  },
  ["牛心峪|ed,nd,su"] = {
    name = "牛心峪",
    exits = {
      ["ed"] = "陡坡|nd,wu",
      ["nd"] = "山路|nd,su,w",
      ["su"] = "山路|nd,s",
    },
  },
  ["苍龙岭|n,nw,su,wu"] = {
    name = "苍龙岭",
    exits = {
      ["n"] = "山路|nd,s",
    },
  },
  ["陡坡|nd,wu"] = {
    name = "陡坡",
    exits = {
      ["nd"] = "乱石滩|su",
      ["wu"] = "牛心峪|ed,nd,su",
    },
  },
}
}

-- mapAliases（房间名 -&gt; 拼音缩写）
mapper.maps["tongguan"].mapAliases = {
  ["官道"]     = "gd",
  ["潼关县"]   = "tgx",
  ["潼关"]     = "tg",
  ["华阴"]     = "hy",
  ["乱石滩"]   = "lst",
  ["深谷"]     = "sg",
  ["幽谷"]     = "yg",
  ["关城马车行"] = "mch",
  ["悦来客栈"] = "ylkz",
  ["客房"]     = "kf",
  ["灞桥"]     = "bq",
  ["韦林镇"]   = "wlz",
  ["黄河古渡"] = "hhgd",
  ["仙姑观"]   = "xgg",
  ["山脚下"]   = "sjx",
  ["山路"]     = "sl",
  ["庵堂"]     = "at",
  ["牛心峪"]   = "nxy",
  ["苍龙岭"]   = "cll",
  ["陡坡"]     = "dp",
}
</script>
					<eventHandlerList />
				</Script>
			</ScriptGroup>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>node 节点</name>
			<packageName></packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>base</name>
				<packageName></packageName>
				<script>node_city = node_city or {}

-- 记录已定义的节点，用于重复检测
node_city._defined = node_city._defined or {}

function node_city.add(name, data)
  if node_city._defined[name] then
    cecho("&lt;yellow&gt;[node_city]&lt;/yellow&gt; duplicate key: " .. name .. "\n")
  end

  node_city._defined[name] = true
  node_city[name] = data
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>江南</name>
				<packageName></packageName>
				<script>-- jiangnan.lua
node_city = node_city or {}
local add = node_city.add or function(name, data) node_city[name] = data end

add("岳阳", { --
  short_name = "yy", 
  back_mrf     = "node walk yy_mrf",
  back_pozhen  = "node walk yy_pozhen",
  back_hsz     = "node walk yy_hsz",
  back_mzj     = "node walk yy_mzj",
  back_yangzhou= "node walk yy_jdk",  
})

add("正厅", { -- 林镇南
  job_done = "ask lin about finish",
  job_fail = "ask lin about fail",
})

add("无锡", { -- 无锡
  back_mrf     = "walk suzhou",
  back_pozhen  = "walk suzhou",
  back_hsz     = "walk suzhou",
  back_yangzhou= "walk suzhou",
})

-- 任务/人物点（江南）
add("孟之经", {
  short_name = "mzj",
  ask_job    = "ask meng about job",
  job_done   = "ask meng about finish",
  job_fail   = "ask meng about fail",
  back_mrf     = "node walk mzj_mrf",
  back_pozhen  = "node walk mzj_pozhen",
  back_hsz     = "node walk mzj_hsz",
  back_yangzhou= "node walk mzj_zjdk",
})

add("韩世忠", {
  short_name = "hsz",
  ask_job    = "ask han about job;;unset forced_act;;set wimpy 50;;jiali 0",
  job_done   = "ask han about finish",
  job_fail   = "ask han about fail",
  back_pozhen  = "node walk hsz_pozhen",
  back_yangzhou= "node walk hsz_zjdk3",
})

-- 城门/路由点（江南一带）
add("正阳门", {
  back_mrf    = "walk chaoyang",
  back_pozhen = "walk guiyun",
})

add("清凉门", {
  back_mrf    = "walk chaoyang",
  back_pozhen = "walk zhengyang",
})

add("朝阳门", {
  back_mrf    = "walk suzhou",
  back_pozhen = "walk zhengyang",
})

add("神策门", {
  back_mrf    = "walk chaoyang",
  back_pozhen = "walk zhengyang",
})

-- 浙闽粤线路
add("金华府", {
  back_mrf    = "walk quzhou",
  back_pozhen = "walk quzhou",
})

add("绍兴", {
  back_mrf    = "walk jinhua",
  back_pozhen = "walk jinhua",
})

add("衢州", {
  back_mrf    = "walk shangrao",
  back_pozhen = "walk shangrao",
})

add("上饶", {
  back_mrf    = "walk qianshan",
  back_pozhen = "walk qianshan",
})

add("铅山", {
  back_mrf    = "walk jiangzhou",
  back_pozhen = "walk jiangzhou",
})

add("武夷山", {
  back_mrf    = "walk quanzhou",
  back_pozhen = "walk quanzhou",
})

add("龙泉镇", {
  back_mrf    = "walk wuyi",
  back_pozhen = "walk wuyi",
})

add("雁荡山", {
  back_mrf    = "walk mingzhou",
  back_pozhen = "walk mingzhou",
})

add("处州府", {
  back_mrf    = "walk yandang",
  back_pozhen = "walk yandang",
})

add("温州", {
  back_mrf    = "walk fuzhou",
  back_pozhen = "walk fuzhou",
})

-- 节点化城市（node walk）
add("明州", {
  short_name = "mz",
  back_mrf    = "node walk mz_mrf",
  back_pozhen = "node walk mz_mrf",
  back_hsz    = "node walk mz_hsz",
})

add("闽中", {
  short_name = "fz",
  back_mrf    = "node walk fz_mrf",
  back_pozhen = "node walk fz_pozhen",
  back_hsz    = "node walk fz_hsz",
})

add("泉州", {
  short_name = "qz",
  back_mrf    = "node walk qz_mrf",
  back_pozhen = "node walk qz_pozhen",
  back_hsz    = "node walk qz_hsz2",
})

add("建宁府", {
  short_name = "jn",
  back_mrf    = "node walk jn_mrf",
  back_pozhen = "node walk jn_pozhen",
})

add("西湖岸边", {
  short_name = "xhab",
  back_mrf    = "node walk xhab_mrf",
  back_pozhen = "node walk xhab_pozhen",
  back_hsz    = "node walk xhab_hsz",
})

add("潮州", {
  short_name = "cz",
  ask_job    = "ask xing about job",
  job_done   = "ask xing about finish",
  job_fail   = "ask xing about fail",
  back_mrf    = "node walk cz_mrf",
  back_pozhen = "node walk cz_pozhen",
  back_hsz    = "node walk cz_hsz",
})

-- 苏州/湖州/镇江/扬州/杭州圈
add("义兴", {
  back_mrf    = "walk wuxi",
  back_pozhen = "walk wuxi",
})

add("盛巷桥", {
  back_mrf    = "walk suzhou",
  back_pozhen = "walk suzhou",
})

add("沧浪亭", {
  short_name = "szclt",
  back_hangzhou = "s;;s;;ne;;node walk mrf_hz",
  back_pozhen   = "node walk szclt_pozhen",
  back_yangzhou = "node walk sz_zjdk",
  back_hua      = "node walk sz_zjdk",
})

add("湖州", {
  short_name = "hzf",
  back_mrf    = "node walk hzf_mrf",
  back_pozhen = "node walk hzf_pozhen",
  back_yangzhou = "node walk hzf_mrf",
  back_hua      = "node walk hzf_pozhen",
})

add("扬子津", {
  ask_job      = "ask shao gong about jiang;;enter",
  back_yangzhou= "walk yangzhou",
})

-- 注意：京口渡 / 镇江渡口 都是渡口点，short_name 都是 zjdk（如果你未来按 short_name 反查要小心）
add("京口渡", {
  short_name = "zjdk",
  ask_job      = "ask shao gong about jiang;;enter",
  back_yangzhou = "walk yangzhou",
  back_hangzhou = "node walk zjdk_hz",
  back_pozhen   = "node walk zjdk_pozhen",
  back_mrf      = "node walk zjdk_mrf",
  back_hsz      = "node walk zjdk_hsz",
})

add("扬州", {
  short_name = "yz",
  back_mrf    = "walk zhenjiang",
  back_pozhen = "walk zhenjiang",
  back_changan= "node walk yz_ca",
  back_hua    = "node walk yz_qinz",
  back_hyd = "node walk yz_lydk",
})

-- 任务主城/核心点
add("慕容复", {
  short_name = "mrf",
  ask_job    = "ask pu about job;;unset forced_act;;jiali 0;;set wimpy 40",
  job_done   = "give pu xin",
  job_fail   = "ask pu about fail",
  back_hangzhou = "node walk mrf_hz",
  back_yangzhou = "node walk mrf_zjdk",
  back_pozhen   = "node walk mrf_pozhen",
  back_hsz      = "node walk mrf_hsz",
})

add("归云庄", {
  short_name = "pozhen",
  ask_job    = "ask lu about pozhen;;set forced_act;;jiali max;;set wimpy 0",
  job_done   = "ask lu about 破阵奖励;;tell feixuex 治疗",
  job_fail   = "ask lu about 破阵失败;tell feixuex 治疗",
  back_hangzhou = "node walk pozhen_hz",
  back_yangzhou = "node walk pozhen_zjdk",
  back_mrf      = "node walk pozhen_mrf",
  back_hsz      = "node walk pozhen_hsz",
})

add("归云庄大门", {
  short_name = "gyz",
  back_hangzhou = "node walk gyz_hz",
  back_pozhen   = "node walk gyz_lcf",
  back_mrf      = "node walk gyz_mrf",
})

add("大理寺", {
  short_name = "hz",
  ask_job    = "ask zhang about job",
  job_done   = "give zhang core",
  job_fail   = "ask zhang about 失败",
  back_yangzhou= "node walk hz_zjdk",
  back_pozhen = "node walk hz_pozhen",
  back_mrf    = "node walk hz_mrf",
})

add("建康", {
  short_name = "jk",
  back_hangzhou = "node walk jk_hz",
  back_pozhen   = "node walk jk_pozhen",
  back_mrf      = "node walk jk_mrf",
  back_hsz      = "node walk jkf_hsz",
})

add("桃花岛", {
  back_hangzhou = "node walk hys_ht",
  back_pozhen   = "node walk hys_ht",
  back_mrf      = "node walk hys_ht",
})

add("燕子坞", {
  short_name = "mr",
  back_hangzhou = "node walk mr_hz",
  back_pozhen   = "node walk mr_pozhen",
  back_mrf      = "node walk mr_mrf",
  back_hsz      = "node walk mr_hsz",
})

add("提督府", {
  short_name = "tdf",
  back_hangzhou = "node walk tdf_hz",
  back_pozhen   = "node walk tdf_pozhen",
  back_mrf      = "node walk tdf_mrf",
})

add("岳王墓", {
  short_name = "ywm",
  back_hangzhou = "node walk ywm_hz",
  back_pozhen   = "node walk ywm_pozhen",
  back_mrf      = "node walk ywm_mrf",
  back_hsz      = "node walk ywm_hsz",
})

add("镇江", {
  short_name = "zj",
  back_hangzhou = "node walk zj_hz",
  back_pozhen   = "node walk zj_pozhen",
  back_mrf      = "node walk zj_mrf",
})

add("江州", {
  short_name = "jz",
  back_hangzhou = "node walk jz_hz",
  back_pozhen   = "node walk jz_pozhen",
  back_mrf      = "node walk jz_mrf",
  back_hsz      = "node walk jz_hsz",
})

add("铜官镇", {
  short_name = "tgz",
  back_hangzhou = "node walk tgz_hz",
  back_pozhen   = "node walk tgz_pozhen",
  back_mrf      = "node walk tgz_mrf",
  back_hsz      = "node walk tgz_hsz",
})

add("嘉兴", {
  short_name = "jx",
  back_hangzhou = "node walk jx_hz",
  back_pozhen   = "node walk jx_pozhen",
  back_mrf      = "node walk jx_mrf",
  back_hsz      = "node walk jx_hsz",
})

</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>华北地区</name>
				<packageName></packageName>
				<script>-- huabei.lua
node_city = node_city or {}
local add = node_city.add or function(name, data) node_city[name] = data end

add("濮阳黄河渡口", {
  short_name = "",
  back_yangzhou = "ask shao gong about huanghe;enter",
  back_hyd = "node walk hhbkd3_hyd",
  ask_job  = "ask shao gong about huanghe;enter",
})

add("岱宗坊", {
  short_name = "",
  back_yangzhou = "node walk ts_yz1",
  back_hyd = "walk qufu",
})


add("青州府", {
  short_name = "qingz",
  back_yangzhou = "node walk qingz_yz1",
  back_hyd = "walk qufu",
})

add("曲阜", {
  short_name = "qf",
  back_yangzhou = "node walk qf_yz",
  back_hyd = "walk puyang",
})

add("泰安", {
  short_name = "",
  back_yangzhou = "walk qufu",
  back_hyd = "walk qufu",
})

add("威海卫中心", {
  short_name = "whw",
  back_yangzhou = "node walk whw_yz1",
  back_hyd = "node walk whw_qfdk",
})

add("恒山山门", {
  short_name = "hssm",
  back_hyd = "node walk hssm_dz",
})

-- 渡口/中转
add("济源渡口", {
  short_name = "jydk",
  back_hyd = "node walk jydk_hyd",
  ask_job  = "ask shao gong about huanghe;enter",
})

add("孟津渡", {
  short_name = "lydk",
  back_yangzhou = "node walk lydk_yz",
  ask_job  = "ask shao gong about huanghe;enter",
})

-- 城市节点（华北）
add("黑木崖", {
  short_name = "ry",
  back_hyd      = "node walk ry_hyd",
  back_yangzhou = "node walk ry_jydk",
  back_shandong = "node walk ry_qf",
})

add("张家口", {
  short_name = "zjk",
  back_hyd      = "node walk zjk_hyd",
  back_yangzhou = "node walk zjk_jydk",
  back_shandong = "node walk zjk_qf",
})

add("晋阳", { -- 晋阳
  short_name = "jy",
  back_hyd      = "node walk jy_hyd",
  back_yangzhou = "node walk jy_jydk",
  back_shandong = "node walk jy_qf",
})

add("大同魁星楼", { -- 大同
  short_name = "dt",
  back_hyd      = "node walk dt_hyd",
  back_yangzhou = "node walk dt_jydk",
  back_shandong = "node walk dt_qf",
})

add("云冈石窟", {
  short_name = "ygsk",
  back_hyd      = "node walk ygsk_bj",
})

add("永安门", {
  short_name = "bj",
})

add("代州", {
  short_name = "dz",
  back_hyd      = "node walk dz_hyd",
  back_shandong = "node walk dz_qf",
  back_mrf      = "node walk dz_jydk",
  back_pozhen   = "node walk dz_jydk",
  back_hsz      = "node walk dz_jydk",
  back_yangzhou = "node walk dz_jydk",
})

-- 任务点
add("高粱地", { -- 胡一刀
  ask_job  = "ask hu about job",
  job_done = "give hu map",
  job_fail = "ask hu about cancel",
  short_name = "hyd",
  back_yangzhou = "node walk hyd_jydk",
  back_shandong = "node walk hyd_pydk",
})


add("塘沽口", { -- 塘沽口
  short_name = "tgk",
  back_hyd = "node walk tgk_hyd",
  back_yangzhou = "node walk tgk_pydk",
})


add("濮阳", { -- 濮阳
  short_name = "py",
  back_hyd = "node walk py_hyd",
  back_yangzhou = "node walk py_hyd",
})


add("风陵渡", {
  ask_job = "ask shao gong about huanghe;enter",
})
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>中原地区</name>
				<packageName></packageName>
				<script>-- zhongyuan.lua
node_city = node_city or {}
local add = node_city.add or function(name, data) node_city[name] = data end

-- 任务/人物点（中原）

add("公孙止", {
  ask_job  = "ask zhi about job",
  job_done   = "ask zhi about finish",
})


add("茅屋", {
  ask_job  = "ask ji about job;;set wimpy 50;;unset forced_act",
  job_fail = "ask meng about fail",
})

add("洛阳中心广场", {
    back_yangzhou = "node walk ly_yz",
    back_hyd = "walk jiyuan",
})

add("万安塔", {
  short_name = "wat",
  ask_job    = "set wimpy 0;;jiali 0;;ask ke about 进塔",
  job_done   = "qiao luo",
  job_fail   = "qiao luo",
  back_mrf     = "node walk wat_yz",
  back_pozhen  = "node walk wat_yz",
  back_hsz     = "node walk wat_yz",
  back_yangzhou= "node walk wat_yz",
})

-- 航运/河道点
add("陵矶", {
  ask_job = "ask shao gong about jiang;enter",
})

add("陵矶北", {
  short_name = "ljdk",
  ask_job = "ask shao gong about jiang;enter",
  back_yangzhou= "node walk lj_yz",
})

add("黄河渡口", {
  ask_job = "ask shao gong about 过河;;enter",
})


-- 交通枢纽/中转点
add("舜耕山", {
  short_name = "jxf",
  back_mrf     = "node walk jxf_yz",
  back_pozhen  = "node walk jxf_yz",
  back_hsz     = "node walk jxf_yz",
  back_yangzhou= "node walk jxf_yz",
})

-- 长安/洛阳相关
add("富贵花圃", {
  back_changan  = "w;;s;;s;;node walk ly_ca",
  back_yangzhou = "w;;s;;s;;node walk ly_yz",
})

add("朱雀大街", {
  back_luoyang  = "node walk ca_ly",
  back_yangzhou = "node walk ca_yz",
})

add("金光门", {
  back_changan = "node walk jgm_ca",
})

add("小广场", {
  ask_job = "ask hua about job",
  back_changan  = "w;;w;;s;;walk changan",
  back_yangzhou = "w;;w;;s;;walk huijiang",
})
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>西部地区</name>
				<packageName></packageName>
				<script>node_city = node_city or {}
local add = node_city.add or function(name, data) node_city[name] = data end

add("百丈涧", {
  back_yangzhou= "node walk ljg_yz",
})

add("雪峰脚下", {
  back_yangzhou= "node walk taolin_yz",
})</script>
				<eventHandlerList />
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>walk node</name>
			<packageName></packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>长江以南</name>
				<packageName></packageName>
				<script>walk_node = walk_node or {}

walk_node["京口渡"] = {region = "京口渡", map = "zhenj",
  edges = {
    	{node = "镇江", path = "walk zhenjiang"},--
  }
}

walk_node["富池口古渡"] = {region = "信阳", map = "", --- not draw yet.
  edges = {
    	{node = "江州", path = "walk jiangzhou"},----
    {node = "信阳长江渡口", path = "ask shao gong about jiang;enter"},----
  }
}

walk_node["岳阳长江渡口"] = {region = "荆州府", map = "yy",
  edges = {
    {node = "岳阳", path = "walk yueyang"}, --
    {node = "荆州长江渡口", path = "ask shao gong about jiang;enter"}, --
  }
}

walk_node["温州瓯江北岸"] = {region = "温州", map = "wenz",
  edges = {
    {node = "处州府", path = "walk chuzhou"}, --
    {node = "处州府瓯江南岸-温州", path = "ride"}, --
  }
}

walk_node["处州府瓯江南岸-温州"] = {region = "处州府", map = "chuz",
  edges = {
    {node = "温州", path = "walk wenzhou"}, 
    {node = "温州瓯江北岸", path = "ride"}, --
  }
}

walk_node["处州府瓯江南岸"] = {region = "处州府", map = "chuz", -- not draw yet
  edges = {
    {node = "龙泉镇", path = "walk longquan"}, -- 
    {node = "龙泉镇瓯江北岸", path = "ride"}, -- 
    
  }
}

walk_node["龙泉镇瓯江北岸"] = {region = "龙泉镇", map = "lqz",
  edges = {
    {node = "处州府", path = "walk chuzhou"}, --
    {node = "处州府瓯江南岸", path = "ride"}, -- 
  }
}

walk_node["晋江西岸"] = {region = "晋江西岸", map = "cz",
  edges = {
    {node = "潮州", path = "walk chaozhou"}, --
    {node = "晋江东岸", path = "ride"}, --
  }
}

walk_node["晋江东岸"] = {region = "晋江东岸", map = "qz",
  edges = {
    {node = "泉州", path = "walk quanzhou"}, --
    {node = "晋江西岸", path = "ride"}, --
  }
}


walk_node["西镇渡口"] = {region = "西镇渡口", map = "jn",
  edges = {
    {node = "建宁", path = "walk jianning"}, --
    {node = "北津", path = "ride"}, --
  }
}

walk_node["北津"] = {region = "建宁府", map = "jn",
  edges = {
    {node = "泉州", path = "walk quanzhou"}, --
    {node = "武夷山", path = "walk wuyi"}, ---
    {node = "西镇渡口", path = "ride"}, --
  }
}

walk_node["燕子矶"] = {region = "长江南岸", map = "",
  edges = {
    	{node = "建康府神策门", path = "walk jiankang"},--
    {node = "长江扬州西渡口", path = "ask shao gong about jiang;enter"},--
  }
}

walk_node["沧浪亭"] = {region = "苏州", map = "sz",
  edges = {
    	{node = "归云庄大门", path = "walk guiyun"}, --
    	{node = "建康府朝阳门", path = "walk jiankang"},--
    	{node = "嘉兴城", path = "walk jiaxing"}, -- 
    	{node = "姑苏慕容", path = "walk murong"},--
    	{node = "铁岭关", path = "walk tieling"}, --
    	{node = "无锡", path = "walk wuxi"}, --
    	{node = "镇江", path = "walk zhenjiang"}, -- 
  }
}

walk_node["姑苏慕容"] = {region = "姑苏慕容", map = "mr",
  edges = {
    	{node = "归云庄大门", path = "walk guiyun"},--
    {node = "沧浪亭", path = "walk suzhou"},--  
  }
}

walk_node["归云庄大门"] = {region = "归云庄", map = "gyz",
  edges = {
    	{node = "建康府正阳门", path = "walk jiankang"},--
    	{node = "姑苏慕容", path = "walk murong"},--
    	{node = "沧浪亭", path = "walk suzhou"},--
  }
}

walk_node["建康府朝阳门"] = {region = "建康府东", map = "jk",
  root_region="建康府",
  arrive_regions = {"建康府", "建康府东"}, 
  edges = {
    	{node = "建康府清凉门", path = "walk qingliang"},--
    	{node = "建康府神策门", path = "walk shence"},--
    	{node = "沧浪亭", path = "walk suzhou"},--
    {node = "无锡", path = "walk wuxi"},--
    {node = "义兴县", path = "walk yixing"},--
    {node = "建康府正阳门", path = "walk zhengyang"},--
    {node = "镇江", path = "walk zhenjiang"},--
  }
}

walk_node["嘉兴城"] = {region = "嘉兴", map = "jx",
  edges = {
    	{node = "建康府正阳门", path = "walk jiankang"}, --
    	{node = "姑苏慕容", path = "walk murong"}, --
    	{node = "沧浪亭", path = "walk suzhou"}, --
    	{node = "湖州府", path = "walk huzhou"},--
    	{node = "大理寺", path = "walk linan"},--
    	{node = "陆家庄", path = "walk lujiazhuang"},--      
  }
}

walk_node["铁岭关"] = {region = "铁岭关", map = "sz",
  edges = {
    	{node = "无锡", path = "walk wuxi"},--
    {node = "沧浪亭", path = "walk suzhou"},--
  }
}

walk_node["无锡"] = {region = "无锡", map = "wx",
  edges = {
    	{node = "建康府朝阳门", path = "walk jiankang"},--
    {node = "沧浪亭", path = "walk suzhou"}, --
    {node = "铁岭关", path = "walk tieling"},  --
    	{node = "义兴县", path = "walk yixing"}, --
    	{node = "镇江", path = "walk zhenjiang"}, ---
  }
}

walk_node["镇江"] = {region = "镇江", map = "zhenj",
  edges = {
    	{node = "建康府朝阳门", path = "walk jiankang"}, --
    {node = "沧浪亭", path = "walk suzhou"}, -- 
    {node = "无锡", path = "walk wuxi"}, -- 
    	{node = "京口渡", path = "walk yangzhou"}, --
  }
}

walk_node["建康府正阳门"] = {region = "建康府南", map = "jk",
  root_region="建康府",
  arrive_regions = {"建康府", "建康府南"},
  edges = {
    	{node = "建康府朝阳门", path = "walk chaoyang"}, --
    {node = "归云庄大门", path = "walk guiyun"}, --
    {node = "湖州府", path = "walk huzhou"}, -- 
    	{node = "嘉兴城", path = "walk jiaxing"}, --
    	{node = "大理寺", path = "walk linan"}, -- 
    {node = "建康府清凉门", path = "walk qingliang"}, --
    {node = "建康府神策门", path = "walk shence"}, --
    	{node = "义兴县", path = "walk yixing"},--       
  }
}

walk_node["建康府清凉门"] = {region = "建康府西", map = "jk",
  root_region="建康府",
  arrive_regions = {"建康府", "建康府西"},
  edges = {
    	{node = "建康府朝阳门", path = "walk chaoyang"}, --
    	{node = "建康府神策门", path = "walk shence"}, --
    	{node = "铜官山", path = "walk tongguan"}, --
    {node = "建康府正阳门", path = "walk zhengyang"}, -- 
  }
}

walk_node["建康府神策门"] = {region = "建康府北", map = "jk",
  root_region="建康府",
  arrive_regions = {"建康府", "建康府北"},
  edges = {
    {node = "建康府朝阳门", path = "walk chaoyang"},--
    	{node = "建康府清凉门", path = "walk qingliang"},--
    	{node = "燕子矶", path = "walk yanziji"},--
    {node = "建康府正阳门", path = "walk zhengyang"},--
  }
}

walk_node["义兴县"] = {region = "义兴县", map = "yx",
  edges = {
    	{node = "建康府朝阳门", path = "walk jiankang-chaoyang"}, --
    {node = "建康府正阳门", path = "walk jiankang-zhengyang"}, --
    {node = "无锡", path = "walk wuxi"},  --
  }
}

walk_node["湖州府"] = {region = "湖州府", map = "hzf",
  edges = {
    	{node = "建康府正阳门", path = "walk jiankang"}, --
    {node = "嘉兴城", path = "walk jiaxing"}, --
    {node = "大理寺", path = "walk linan"}, -- 
    {node = "铜官山", path = "walk tongguan"}, --
  }
}

walk_node["钱塘北渡口"] = {region = "钱塘北渡口", map = "hz",
  edges = {
    	{node = "大理寺", path = "walk linan"}, --
    {node = "钱塘东渡口", path = "ride"}, --
  }
}
walk_node["钱塘西渡口"] = {region = "钱塘西渡口", map = "hz",
  edges = {
    	{node = "大理寺", path = "walk linan"}, --
    {node = "钱塘东渡口", path = "ride"}, --
  }
}

walk_node["钱塘东渡口"] = {region = "临安府", map = "hz",
  edges = {
    {node = "金华府", path = "walk jinhua"}, ---
    {node = "明州", path = "walk mingzhou"}, 
    {node = "绍兴府", path = "walk shaoxing"}, --
    {node = "钱塘北渡口", path = "ride north"}, --
    {node = "钱塘西渡口", path = "ride west"}, --
  }
}

walk_node["大理寺"] = {region = "临安府", map = "hz",
  edges = {
    {node = "钱塘北渡口", path = "walk beidukou"}, --
    {node = "黄山", path = "walk huangshan"}, --
    {node = "湖州府", path = "walk huzhou"}, --
    {node = "建康府正阳门", path = "walk jiankang"}, --
    {node = "嘉兴城", path = "walk jiaxing"}, --
    	{node = "梅庄", path = "walk meizhuang"}, --
    	{node = "钱塘西渡口", path = "walk xidukou"}, --    
    {node = "岳王墓", path = "walk yuewangmu"},
  }
}

walk_node["陆家庄"] = {region = "陆家庄", map = "jx",
  edges = {
    	{node = "归云庄大门", path = "walk guiyun"},--
    {node = "沧浪亭", path = "walk suzhou"}, -- 
  }
}

walk_node["铜官山"] = {region = "铜官山", map = "tgz",
  edges = {
    {node = "湖州府", path = "walk huzhou"}, --
    	{node = "江州", path = "walk jiangzhou"},--
    {node = "建康府清凉门", path = "walk jiankang"},--
    	{node = "祁门县", path = "walk qimen"},--
  }
}

walk_node["黄山"] = {region = "黄山", map = "huangshan", -- not draw yet.
  edges = {
    	{node = "大理寺", path = "walk linan"},--
    {node = "祁门县", path = "walk qimen"},--  
  }
}

walk_node["梅庄"] = {region = "梅庄", map = "", -- not draw yet
  edges = {
    	{node = "大理寺", path = "walk linan"}, ---
    {node = "岳王墓", path = "walk yuewangmu"},  ---
  }
}

walk_node["岳王墓"] = {region = "岳王墓", map = "", -- not draw yet
  edges = {
    	{node = "大理寺", path = "walk linan"}, --
    {node = "梅庄", path = "walk meizhuang"},  --
  }
}

walk_node["祁门县"] = {region = "祁门县", map = "", --- not draw yet.
  edges = {
    {node = "黄山", path = "walk huangshan"}, --
    	{node = "江州", path = "walk jiangzhou"}, --
    {node = "铜官山", path = "walk tongguan"}, --
  }
}

walk_node["江州"] = {region = "江州", map = "jiangz", -- not draw yet.
  edges = {
    	{node = "富池口", path = "walk fuchikou"},---
    {node = "南昌", path = "walk nanchang"}, --- 
    {node = "祁门县", path = "walk qimen"}, --
    {node = "铅山县", path = "walk shangrao"},--  
    {node = "铜官山", path = "walk tongguan"}, -- 
    {node = "富池口古渡", path = "walk xinyang"},  -- to 信阳
    {node = "岳阳", path = "walk yueyang"}, --
  }
}

walk_node["南昌"] = {region = "南昌", map = "nc", 
  edges = {
    {node = "长沙", path = "walk changsha"}, --
    {node = "江州", path = "walk jiangzhou"}, --
    {node = "龙虎山", path = "walk longhu"}, --
    {node = "庐陵", path = "walk luzhou"}, --
    {node = "袁州", path = "walk yuanzhou"}, -- 袁水北岸
    {node = "岳阳", path = "walk yueyang"}, --
  }
}
walk_node["江夏"] = {region = "江夏", map = "jiangxia", --- not draw yet.
  edges = {
    {node = "富池口", path = "walk fuchikou"},--
    {node = "岳阳", path = "walk yueyang"}, --
  }
}
walk_node["富池口"] = {region = "富池口", map = "", --- not draw yet.
  edges = {
    {node = "江夏", path = "walk jiangxia"},--
    {node = "江州", path = "walk jiangzhou"},--
  }
}
walk_node["铅山县"] = {region = "上饶县", map = "sr",
  edges = {
    {node = "江州", path = "walk jiangzhou"}, --
    {node = "龙虎山", path = "walk longhu"}, --
    {node = "上饶县", path = "walk shangrao"},--
  }
}


walk_node["岳阳"] = {region = "岳阳", map = "yy", 
  edges = {
    {node = "长沙", path = "walk changsha"}, --
    {node = "江州", path = "walk jiangzhou"}, -- 
    {node = "江夏", path = "walk jiangxia"}, -- 
    {node = "岳阳长江渡口", path = "walk jingzhou"}, -- 陵矶
    {node = "南昌", path = "walk nanchang"},---     
  }
}

walk_node["长沙"] = {region = "长沙", map = "csha", 
  edges = {
    {node = "衡山", path = "walk hengshan"}, -- 
    {node = "衡州", path = "walk hengzhou"}, -- 
    {node = "南昌", path = "walk nanchang"}, --
    {node = "袁水北岸", path = "walk yuanzhou"},--
    {node = "岳阳", path = "walk yueyang"}, --           
  }
}

walk_node["龙虎山"] = {region = "龙虎山", map = "lhs", 
  edges = {
    {node = "龙泉镇", path = "walk longquan"}, --
    {node = "庐陵", path = "walk luling"},--
    {node = "南昌", path = "walk nanchang"},--
    {node = "铅山县", path = "walk shangrao"}, --
    {node = "仙霞岭", path = "walk xianxia"}, --
    {node = "袁州", path = "walk yuanzhou"}, --  
  }
}

walk_node["仙霞岭"] = {region = "仙霞岭", map = "", -- not draw yet
  edges = {
    {node = "龙虎山", path = "walk longhu"},--
    {node = "龙泉镇", path = "walk longquan"},--
    {node = "乌溪江南岸", path = "walk quzhou"}, -- 衢州府
    {node = "上饶县", path = "walk shangrao"}, -- 
  }
}

walk_node["庐陵"] = {region = "庐陵", map = "lling",
  edges = {
    {node = "龙虎山", path = "walk longhu"},--
    {node = "南昌", path = "walk nanchang"},--
    {node = "袁州", path = "walk yuanzhou"}, --
    {node = "越城岭山口", path = "walk yuechengling"}, --
  }
}

walk_node["袁水北岸"] = {region = "袁州", map = "yzhou",
  edges = {
    {node = "长沙", path = "walk changsha"}, --
    {node = "南昌", path = "walk nanchang"}, --
  }
}

walk_node["上饶县"] = {region = "上饶县", map = "sr",
  edges = {
    {node = "铅山县", path = "walk qianshan"}, ---
    {node = "衢州府", path = "walk quzhou"}, --
    {node = "仙霞岭", path = "walk xianxia"}, --
  }
}

walk_node["衡山"] = {region = "衡山", map = "", -- not draw yet.
  edges = {
    {node = "长沙", path = "walk changsha"}, --
    {node = "衡州", path = "walk hengzhou"}, --
  }
}

walk_node["衡州"] = {region = "衡州", map = "hengz", 
  edges = {
    {node = "长沙", path = "walk changsha"}, --
    {node = "衡山", path = "walk hengshan"}, -- 
    {node = "苗岭边缘", path = "walk miaojiang"}, --
    {node = "五岭湘江渡口", path = "walk wuling"}, --
  }
}

walk_node["袁州"] = {region = "袁州", map = "yzhou", -- not draw yet
  edges = {
    {node = "龙虎山", path = "walk longhu"},--
    {node = "庐陵", path = "walk luling"},--
  }
}

walk_node["乌溪江南岸"] = {region = "衢州", map = "quz", -- not draw yet
  edges = {
    {node = "仙霞岭", path = "walk xianxia"}, -- 
  }
}

walk_node["龙泉镇"] = {region = "龙泉镇", map = "lqz", -- not draw yet
  edges = {
    {node = "处州府瓯江南岸", path = "walk chuzhou"},  -- to │处州府
    {node = "龙虎山", path = "walk longhu"}, --
    {node = "武夷山", path = "walk wuyi"}, --
    {node = "仙霞岭", path = "walk xianxia"}, --
  }
}


walk_node["越城岭山口"] = {region = "越城岭山口", map = "", -- not draw yet
  edges = {
    {node = "庐陵", path = "walk luling"}, --
    {node = "衡州湘江东岸", path = "walk xiangjiang"}, -- to │衡州
  }
}
walk_node["衡州湘江东岸"] = {region = "衡州", map = "", -- not draw yet
  edges = {
    {node = "越城岭山口", path = "walk luling"}, --
  }
}

walk_node["苗岭边缘"] = {region = "苗疆", map = "", -- not draw yet
  edges = {
    {node = "衡州", path = "walk hengyang"}, --
  }
}

walk_node["五岭湘江渡口"] = {region = "五岭", map = "hengz", -- not draw yet
  edges = {
    {node = "衡州", path = "walk hengzhou"}, --
  }
}

walk_node["衢州府乌溪江北岸"] = {region = "仙霞岭", map = "quz",
  edges = {
    {node = "衢州府", path = "walk quzhou"}, 
  }
}

walk_node["衢州府"] = {region = "衢州府", map = "quz",
  edges = {
    {node = "上饶县", path = "walk shangrao"}, ---
    {node = "金华府", path = "walk shaoxing"}, --
    {node = "衢州府乌溪江北岸", path = "walk xianxia"}, -- to │仙霞岭
  }
}

walk_node["金华府"] = {region = "绍兴府", map = "sx",
  edges = {
    {node = "钱塘东渡口", path = "walk linan"}, ---
    {node = "衢州府", path = "walk quzhou"}, -- 
    {node = "绍兴府", path = "walk shaoxing"}, --
    {node = "天台县", path = "walk tiantai"}, --
  }
}

walk_node["绍兴府"] = {region = "绍兴府", map = "sx",
  edges = {
    {node = "金华府", path = "walk jinhua"}, ---
    {node = "钱塘东渡口", path = "walk linan"}, --
    {node = "明州", path = "walk mingzhou"},  --
    {node = "天台县", path = "walk tiantai"}, --
  }
}

walk_node["台州府灵江西岸"] = {region = "台州府", map = "tzf",
  edges = {
    {node = "明州", path = "walk mingzhou"}, -- 
    {node = "天台县", path = "walk tiantai"},
  }
}

walk_node["天台山"] = {region = "天台山", map = "tt",
  edges = {
    {node = "天台县", path = "walk tiantai"}, --
  }
}

walk_node["天台县"] = {region = "天台县", map = "tt",
  edges = {
    {node = "金华府", path = "walk jinhua"}, --
    {node = "明州", path = "walk mingzhou"}, -- 
    {node = "绍兴府", path = "walk shaoxing"}, --
    {node = "台州府灵江西岸", path = "walk taizhou"}, --
    {node = "天台山", path = "walk tiantaishan"}, --
    {node = "雁荡山", path = "walk yandang"}, 
  }
}

walk_node["明州"] = {region = "明州", map = "mz",
  edges = {
    {node = "钱塘东渡口", path = "walk linan"}, --
    {node = "绍兴府", path = "walk shaoxing"},--
    {node = "台州府灵江西岸", path = "walk taizhou"},--
    {node = "天台县", path = "walk tiantai"},--
    {node = "雁荡山", path = "walk yandang"},--
  }
}

walk_node["台州府灵江南岸"] = {region = "台州府", map = "tzf",
  edges = {
    {node = "雁荡山", path = "walk yandang"}, --
  }
}

walk_node["雁荡山"] = {region = "雁荡山", map = "yds",
  edges = {
    {node = "处州府", path = "walk chuzhou"}, --
    {node = "明州", path = "walk mingzhou"}, --
    {node = "台州府灵江南岸", path = "walk taizhou"},  -- 
    {node = "天台县", path = "walk tiantai"}, --
    {node = "温州瓯江北岸", path = "walk wenzhou"}, --
  }
}

walk_node["处州府"] = {region = "处州府", map = "chuz",
  edges = {
    {node = "龙泉镇瓯江北岸", path = "walk longquan"}, --
    {node = "温州瓯江北岸", path = "walk wenzhou"}, --
    {node = "雁荡山", path = "walk yandang"}, --
  }
}

walk_node["温州"] = {region = "温州", map = "wenz",
  edges = {
    {node = "处州府瓯江南岸-温州", path = "walk chuzhou"}, --
    {node = "闽中", path = "walk fuzhou"}, 
  }
}

walk_node["闽中"] = {region = "闽中", map = "fz",
  edges = {
    {node = "建宁府", path = "walk jianning"}, --
    {node = "莆田", path = "walk putian"}, --
    {node = "泉州", path = "walk quanzhou"},--
    {node = "温州", path = "walk wenzhou"},--
  }
}

walk_node["建宁"] = {region = "建宁府", map = "jn",
  edges = {
    {node = "西镇渡口", path = "walk xizhen"}, --
    {node = "闽中", path = "walk fuzhou"}, --
  }
}

walk_node["莆田"] = {region = "莆田", map = "fz",
  edges = {
    {node = "泉州", path = "walk quanzhou"}, --
    {node = "闽中", path = "walk fuzhou"}, ---
  }
}

walk_node["泉州"] = {region = "泉州", map = "qz",
  edges = {
    {node = "闽中", path = "walk fuzhou"}, --
    {node = "北津", path = "walk jianning"}, --
    {node = "晋江东岸", path = "walk jinjiang"},--
    {node = "南少林", path = "walk nanshaolin"}, --
    {node = "莆田", path = "walk putian"}, --
    {node = "武夷山", path = "walk wuyi"}, --
  }
}

walk_node["武夷山"] = {region = "武夷山", map = "wuyi",
  edges = {
    {node = "北津", path = "walk jianning"}, --
    {node = "龙泉镇", path = "walk longquan"}, --
    {node = "泉州", path = "walk quanzhou"}, --
  }
}

walk_node["南少林"] = {region = "南少林", map = "qz",
  edges = {
    {node = "泉州", path = "walk quanzhou"}, --
    {node = "潮州", path = "walk chaozhou"}, --
  }
}



walk_node["潮州"] = {region = "潮州", map = "cz",
  edges = {
    {node = "晋江西岸", path = "walk jinjiang"}, --
    {node = "南少林", path = "walk nanshaolin"}, --
    {node = "圣峰嶂", path = "walk shengfeng"}, --
  }
}

walk_node["圣峰嶂"] = {region = "圣峰嶂", map = "",
  edges = {
    {node = "圣峰嶂西部", path = "walk xi"}, --
    {node = "潮州", path = "walk chaozhou"}, --
  }
}

walk_node["圣峰嶂西部"] = {region = "圣峰嶂", map = "",
  edges = {
    {node = "圣峰嶂", path = "walk dong"}, --
    {node = "广州府", path = "walk guangzhou"}, --
  }
}

walk_node["老林"] = {region = "老林", map = "",
  edges = {
    {node = "广州府", path = "walk guangzhou"}, --
  }
}

walk_node["广州府"] = {region = "广州府", map = "",
  edges = {
    {node = "圣峰嶂西部", path = "walk shengfeng"}, --
    {node = "珠江北岸", path = "walk foshan"}, 
    {node = "老林", path = "walk laolin"}, --
  }
}

walk_node["珠江北岸"] = {region = "佛山", map = "",
  edges = {
    {node = "广州府", path = "walk guangzhou"}, --
  }
}

</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>中原地区</name>
				<packageName></packageName>
				<script>walk_node = walk_node or {}

walk_node["灵州黄河渡口"] = {region = "灵州黄河渡口", map = "",
  edges = {
    {node = "灵州", path = "walk lingzhou"}, --
    {node = "扬州", path = "node walk lzdk_yz"}, --
    {node = "明教渡口", path = "ask shao gong about huanghe;enter"}, --
  }
}

walk_node["秦州黄河渡口"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "湟中-秦州渡口", path = "ask shao gong about huanghe;enter"}, -- 
    {node = "洛阳", path = "node walk hh_ly"}, --
  }
}

walk_node["灵鹫宫"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "扬州", path = "node walk ljg_yz"}, --
  }
}

walk_node["扬州"] = {region = "扬州", map = "",
  edges = {
    {node = "灵鹫宫", path = "node walk yz_ljg"}, --
    {node = "兰州", path = "node walk yz_lanz"}, --
    {node = "秦州黄河渡口", path = "node walk yz_xxdk"}, --
    {node = "灵州黄河渡口", path = "node walk yz_lzdk"}, --
    {node = "少林寺", path = "node walk yz_sl"}, --
    {node = "全真派", path = "node walk yz_quanzhen1"}, --
    {node = "古墓派", path = "node walk yz_gm"}, --
    {node = "华山村", path = "node walk yz_xsc1"}, --
    {node = "武当", path = "node walk yz_wdsm"}, --
    {node = "扬州丐帮分舵", path = "walk gaibang"}, --
    {node = "信阳", path = "walk xinyang"}, -- 
    {node = "庐州", path = "walk luzhou"}, --
    {node = "长江扬州西渡口", path = "walk jiankang"}, -- 这里过河可以去建康
    {node = "往生堂", path = "walk shashou"}, --
    {node = "徐州", path = "walk xuzhou"}, --
    {node = "濠州府", path = "walk haozhou"}, --
    {node = "纪晓芙", path = "node walk yz_jxf"}, --
    {node = "长江扬州东渡口", path = "walk zhenjiang"}, -- 这里过河可以去镇江
    {node = "曲阜黄河渡口", path = "node walk yz_qfdk"}, --
    {node = "威海卫", path = "node walk yz_whw"}, --
    {node = "许昌", path = "node walk yz_xc"}, --
    {node = "曲阜", path = "node walk yz_qf"}, --
    {node = "青州", path = "node walk yz_qingz"}, --
    {node = "麒麟村", path = "node walk yz_qlc"}, --
    {node = "洛阳", path = "node walk yz_ly"}, --
    {node = "萧峰", path = "node walk yz_xf"}, --
  }
}

walk_node["萧峰"] = {region = "萧峰", map = "ly",
  edges = {
    {node = "麒麟村", path = "node walk xf_qlc"}, -- 
    {node = "扬州", path = "node walk xf_yz"}, -- 
    {node = "灵州", path = "node walk xf_lingzh"}, -- 
    {node = "洛阳黄河渡口", path = "node walk xf_lydk"}, -- 
    {node = "洛阳", path = "node walk xf_ly"}, -- 
  }
}

walk_node["纪晓芙"] = {region = "纪晓芙", map = "haozhou",
  edges = {
    {node = "信阳", path = "node walk jxf_xiny"}, -- 
    {node = "扬州", path = "node walk jxf_yz"}, -- 
    {node = "灵州", path = "node walk jxf_lz"}, -- 
    {node = "荆州", path = "node walk jxf_jingz"}, -- 
    {node = "襄阳", path = "node walk jxf_xy"}, -- 
  }
}

walk_node["信阳长江渡口"] = {region = "信阳长江渡口", map = "",
  edges = {
    {node = "信阳", path = "walk xinyang"}, --
    {node = "汉口镇", path = "walk hankou"}, --
    {node = "富池口古渡", path = "ask shao gong about jiang;enter"}, --
  }
}


walk_node["荆州汉水西岸"] = {region = "荆州汉水西岸", map = "",
  edges = {
    {node = "荆州府", path = "walk jingzhou"}, -- 
    {node = "汉口镇汉水渡口", path = "ride"}, -- 
  }
}

walk_node["汉口镇汉水渡口"] = {region = "汉口镇汉水渡口", map = "",
  edges = {
    {node = "汉口镇", path = "walk hankou"}, --
    {node = "荆州汉水西岸", path = "ride"}, --
  }
}

walk_node["鸡鸣渡东"] = {region = "鸡鸣渡东", map = "",
  edges = {
    {node = "汉口镇", path = "walk hankou"}, -- 
    {node = "鸡鸣渡西", path = "ride"}, -- 
  }
}

walk_node["鸡鸣渡西"] = {region = "鸡鸣渡西", map = "",
  edges = {
    {node = "襄阳", path = "walk xiangyang"},--
    {node = "鸡鸣渡东", path = "ride"}, -- 
  }
}


walk_node["荆州长江渡口"] = {region = "荆州长江渡口", map = "",
  edges = {
    {node = "纪晓芙", path = "node walk ljdk_jxf"}, -- 
    {node = "荆州府", path = "walk jingzhou"}, -- 
    {node = "岳阳长江渡口", path = "ask shao gong about jiang;enter"}, -- 
  }
}

walk_node["长江扬州东渡口"] = {region = "长江扬州东渡口", map = "",
  edges = {
    {node = "扬州", path = "walk yangzhou"}, -- 
    {node = "京口渡", path = "ask shao gong about jiang;enter"}, -- 
  }
}

walk_node["长江扬州西渡口"] = {region = "长江扬州西渡口", map = "",
  edges = {
    {node = "往生堂", path = "walk shashou"}, -- 
    {node = "扬州", path = "walk yangzhou"}, --
    {node = "燕子矶", path = "ask shao gong about jiang;enter"}, --
  }
}

walk_node["泰山"] = {region = "泰山", map = "",
  edges = {
    {node = "曲阜", path = "walk qufu"}, --
    {node = "泰安", path = "walk taian"}, --
    {node = "青州", path = "walk qingzhou"}, --
  }
}

walk_node["泰安"] = {region = "泰安", map = "taian",
  edges = {
    {node = "曲阜", path = "walk qufu"}, --
    {node = "泰山", path = "walk taishan"}, --
    {node = "青州", path = "walk qingzhou"}, --
  }
}

walk_node["徐州"] = {region = "徐州", map = "xuzhou",
  edges = {
    {node = "扬州", path = "walk yangzhou"}, --
    {node = "曲阜", path = "walk qufu"}, --
    {node = "淮北", path = "walk huaibei"}, --
  }
}

walk_node["曲阜黄河渡口"] = {region = "曲阜黄河渡口", map = "",
  edges = {
    {node = "扬州", path = "node walk dk_yz"}, --
    {node = "曲阜", path = "walk qufu"}, --
    {node = "濮阳黄河渡口", path = "ask shao gong about huanghe;enter"}, --
  }
}


walk_node["曲阜"] = {region = "曲阜", map = "qufu",
  edges = {
    {node = "徐州", path = "walk xuzhou"}, --
    {node = "泰安", path = "walk taian"}, --
    {node = "泰山", path = "walk taishan"}, --
    {node = "淮北", path = "walk huaibei"}, --
    {node = "曲阜黄河渡口", path = "walk puyang"}, -- 在这个渡口可以去濮阳
    {node = "青州", path = "walk qingzhou"}, --
    {node = "扬州", path = "node walk qf_yz"}, --
    {node = "纪晓芙", path = "node walk qf_jxf"}, --
  }
}

walk_node["青州"] = {region = "青州", map = "qingzhou",
  edges = {
    {node = "曲阜", path = "walk qufu"},--
    {node = "泰安", path = "walk taian"}, --
    {node = "泰山", path = "walk taishan"}, -- 
    {node = "登州", path = "walk dengzhou"}, --
    {node = "扬州", path = "node walk qingz_yz1"}, --
  }
}

walk_node["登州"] = {region = "登州", map = "dengzhou",
  edges = {
    {node = "威海卫", path = "walk weihaiwei"}, --
    {node = "青州", path = "walk qingzhou"}, -- 
  }
}

walk_node["威海卫"] = {region = "威海卫", map = "whw",
  edges = {
    {node = "登州", path = "walk dengzhou"}, --
  }
}


walk_node["淮北"] = {region = "淮北", map = "",
  edges = {
    {node = "徐州", path = "walk xuzhou"}, --
    {node = "曲阜", path = "walk qufu"}, -- 
    {node = "许昌", path = "walk xuchang"}, --
  }
}

walk_node["许昌"] = {region = "许昌", map = "",
  edges = {
    {node = "信阳", path = "walk xinyang"}, --
    {node = "白河东岸", path = "walk nanyang"}, --
    {node = "南阳城", path = "walk nanyangcheng"}, --
    {node = "淮北", path = "walk huaibei"}, --
    {node = "郑州", path = "walk zhengzhou"}, --
    {node = "扬州", path = "node walk xc_yz"}, --
  }
}

walk_node["白河东岸"] = {region = "白河东岸", map = "",
  edges = {
    {node = "南阳城", path = "walk chengnei"}, -- 
    {node = "洛阳", path = "walk luoyang"}, --
    {node = "登封", path = "walk dengfeng"}, --
    {node = "襄阳", path = "walk xiangyang"}, --
    {node = "许昌", path = "walk xuchang"}, --
  }
}

walk_node["信阳"] = {region = "信阳", map = "xinyang",
  edges = {
    {node = "南阳城", path = "walk nanyang"}, --
    {node = "庐州", path = "walk luzhou"}, --
    {node = "往生堂", path = "walk shashou"}, --
    {node = "扬州", path = "walk yangzhou"}, --
    {node = "汉口镇", path = "walk hankou"}, -- 
    {node = "信阳长江渡口", path = "walk jiangzhou"}, --
    {node = "濠州府", path = "walk haozhou"}, -- 
    {node = "荆州府", path = "walk jingzhou"}, -- 
    {node = "襄阳", path = "walk xiangyang"}, -- 
    {node = "许昌", path = "walk xuchang"}, --
    {node = "纪晓芙", path = "node walk xiny_jxf"}, --
  }
}

walk_node["南阳城"] = {region = "南阳城", map = "nanyang",
  edges = {
    {node = "伏牛山", path = "walk funiu"}, --
    {node = "信阳", path = "walk xinyang"}, --
    {node = "商州", path = "walk shangzhou"},--
    {node = "白河东岸", path = "walk baihe"},--
    {node = "襄阳", path = "walk xiangyang"},--
    {node = "许昌", path = "walk xuchang"}, --
  }
}

walk_node["郑州"] = {region = "郑州", map = "",
  edges = {
    {node = "峻极宫前", path = "walk junji"}, -- 
    {node = "洛阳", path = "walk luoyang"}, --
    {node = "许昌", path = "walk xuchang"}, --
  }
}

walk_node["洛阳黄河渡口"] = {region = "洛阳黄河渡口", map = "",
  edges = {
    {node = "洛阳", path = "walk luoyang"}, --
    {node = "济源渡", path = "ask shao gong about huanghe;enter"}, --
  }
}

walk_node["麒麟村"] = {region = "麒麟村", map = "qlc",
  edges = {
    {node = "洛阳", path = "walk luoyang"}, --
    {node = "扬州", path = "node walk qlc_yz1"}, --
    
  }
}

walk_node["洛阳"] = {region = "洛阳", map = "ly",
  edges = {
    {node = "白河东岸", path = "walk nanyang"}, --
    {node = "卢氏县", path = "walk lushi"}, --
    {node = "洛阳黄河渡口", path = "walk jiyuan"}, -- 这里过河可以去济源
    {node = "登封", path = "walk dengfeng"}, --
    {node = "郑州", path = "walk zhengzhou"}, --
    {node = "长安通化门", path = "walk changan"}, -- 
    {node = "麒麟村", path = "walk qilincun"}, --
  }
}

walk_node["少林寺"] = {region = "少林寺", map = "",
  edges = {
    {node = "登封", path = "walk dengfeng"}, --
    {node = "扬州", path = "node walk sl_yz"},
  }
}

walk_node["登封"] = {region = "登封", map = "",
  edges = {
    {node = "伏牛山", path = "walk funiu"}, -- 
    {node = "白河东岸", path = "walk nanyang"}, --
    {node = "少林寺", path = "walk shaolin"}, --
    {node = "峻极宫前", path = "walk junji"}, --
    {node = "洛阳", path = "walk luoyang"}, --
  }
}

walk_node["武当"] = {region = "武当", map = "",
  edges = {
    {node = "襄阳", path = "walk xiangyang"}, --
    {node = "扬州", path = "node walk wd_yz"}, --
  }
}

walk_node["襄阳"] = {region = "襄阳", map = "xiangyang",
  edges = {
    {node = "信阳", path = "walk xinyang"}, --
    {node = "白河东岸", path = "walk nanyang"}, --
    {node = "南阳城", path = "walk nanyangcheng"}, --
    {node = "武当", path = "walk wudang"}, --
    {node = "鸡鸣渡西", path = "walk hankou"}, -- 
    {node = "荆州府", path = "walk jingzhou"}, --
    {node = "纪晓芙", path = "node walk xy_jxf"}, --
  }
}

walk_node["庐州"] = {region = "庐州", map = "luzhou",
  edges = {
    {node = "信阳", path = "walk xinyang"}, -- 
    {node = "往生堂", path = "walk shashou"}, --
    {node = "扬州", path = "walk yangzhou"}, --
    {node = "濠州府", path = "walk haozhou"}, -- 
  }
}

walk_node["往生堂"] = {region = "杀手帮", map = "",
  edges = {
    {node = "信阳", path = "walk xinyang"}, --
    {node = "庐州", path = "walk luzhou"}, --
    {node = "长江扬州西渡口", path = "walk jiankang"}, --
    {node = "扬州", path = "walk yangzhou"}, --
  }
}

walk_node["汉口镇"] = {region = "汉口镇", map = "hankou",
  edges = {
    {node = "信阳", path = "walk xinyang"}, -- 
    {node = "信阳长江渡口", path = "walk jiangzhou"}, -- 这里过河可以去江州
    {node = "汉口镇汉水渡口", path = "walk jingzhou"}, -- 这里过河可以去荆州
    {node = "鸡鸣渡东", path = "walk xiangyang"}, -- 这里过河可以去襄阳
  }
}

walk_node["荆州码头"] = {region = "荆州府", map = "jingzhou",
  edges = {
    {node = "荆州府", path = "ne;n;n;w;w;ne;ne;n;n"}, --
    {node = "朝天门码头", path = "enter"}, --
  }
}

walk_node["荆州府"] = {region = "荆州府", map = "jingzhou",
  edges = {
    {node = "荆州码头", path = "s;s;e;s;e;s;s;s;sw"}, --
    {node = "信阳", path = "walk xinyang"}, --
    {node = "荆州长江渡口", path = "walk yueyang"}, --
    {node = "荆州汉水西岸", path = "walk hankou"}, -- 
    {node = "襄阳", path = "walk xiangyang"}, -- 
    {node = "纪晓芙", path = "node walk jz_jxf"}, -- 
  }
}

walk_node["伏牛派"] = {region = "伏牛派", map = "",
  edges = {
    {node = "伏牛山", path = "walk muzha"},--
  }
}

walk_node["伏牛山"] = {region = "伏牛山", map = "funiu",
  edges = {
    {node = "伏牛派", path = "walk funiupai"}, --
    {node = "南阳城", path = "walk nanyang"}, --
    {node = "卢氏县南", path = "walk lushi"}, --
    {node = "商州", path = "walk shangzhou"}, --
    {node = "登封", path = "walk dengfeng"},
  }
}

walk_node["商州"] = {region = "商州", map = "shangzhou",
  edges = {
    {node = "伏牛山", path = "walk funiu"}, --
    {node = "华山派", path = "walk huashan"}, -- 
    {node = "南阳城", path = "walk nanyang"}, --
    {node = "卢氏县南", path = "walk lushi"}, --
    {node = "古墓派", path = "walk gumu"}, --
    {node = "长安通化门", path = "walk changan"}, --
  }
}

walk_node["峻极宫前"] = {region = "峻极宫前", map = "",
  edges = {
    {node = "登封", path = "walk dengfeng"}, --
    {node = "郑州", path = "walk zhengzhou"}, --
  }
}

walk_node["濠州府"] = {region = "濠州府", map = "haozhou",
  edges = {
    {node = "信阳", path = "walk xinyang"}, --
    {node = "庐州", path = "walk luzhou"}, --
    {node = "扬州", path = "walk yangzhou"}, --
  }
}

walk_node["卢氏县"] = {region = "卢氏县", map = "lushi",
  edges = {
    {node = "洛阳", path = "walk luoyang"}, --
    {node = "卢氏县南", path = "s;ride"}, --
  }
}

walk_node["卢氏县南"] = {region = "卢氏县南", map = "",
  edges = {
    {node = "伏牛山", path = "walk funiu"}, --
    {node = "商州", path = "walk shangzhou"}, --
  }
}

walk_node["长安通化门"] = {region = "长安通化门", map = "",
  edges = {
    {node = "华山派", path = "walk huashan"}, --
    {node = "商州", path = "walk shangzhou"}, -- 
    {node = "洛阳", path = "walk luoyang"}, -- 
    {node = "长安明德门", path = "walk mingde"}, -- 
    {node = "长安金光门", path = "walk jinguang"}, --
  }
}

walk_node["华山派"] = {region = "华山", map = "",
  edges = {
    {node = "华山村", path = "walk huashancun"}, --
    {node = "商州", path = "walk shangzhou"}, --
    {node = "长安通化门", path = "walk changan"}, --
  }
}

walk_node["华山"] = {region = "华山脚下", map = "",
  edges = {
    {node = "华山村", path = "node walk hsjx_xsc"}, --
  }
}


walk_node["华山村"] = {region = "华山村", map = "",
  edges = {
    {node = "全真派", path = "walk quanzhen"}, --
    {node = "华山派", path = "walk huashan"}, --
    {node = "华山", path = "node walk xsc_hsjx"}, --
    {node = "扬州", path = "node walk xsc_yz"}, --
  }
}

walk_node["全真派"] = {region = "全真派", map = "",
  edges = {
    {node = "华山村", path = "walk huashancun"},--
    {node = "古墓派", path = "walk gumu"}, --
    {node = "长安明德门", path = "walk changan"}, --
  }
}

walk_node["古墓派"] = {region = "古墓派", map = "",
  edges = {
    {node = "全真派", path = "walk quanzhen"}, -- 
    {node = "商州", path = "walk shangzhou"}, --
    {node = "扬州", path = "node walk gm_yz"}, --
  }
}

walk_node["长安明德门"] = {region = "长安明德门", map = "",
  edges = {
    {node = "全真派", path = "walk quanzhen"}, --
    {node = "汉中", path = "walk hanzhong"}, -- 
    {node = "长安通化门", path = "walk tonghua"}, --
    {node = "长安金光门", path = "walk jinguang"}, --
  }
}

walk_node["汉中"] = {region = "汉中", map = "",
  edges = {
    {node = "金牛县渡口", path = "walk guangyuan"}, --
    {node = "汉水北渡", path = "walk chengdu"},--
    {node = "长安明德门", path = "walk changan"}, -- 
  }
}

walk_node["金牛县渡口"] = {region = "金牛县渡口", map = "",
  edges = {
    {node = "汉中", path = "walk hanzhong"}, --
  }
}

walk_node["汉水北渡"] = {region = "汉水北渡", map = "",
  edges = {
    {node = "汉中", path = "walk hanzhong"}, -- 
  }
}

walk_node["长安金光门"] = {region = "长安金光门", map = "",
  edges = {
    {node = "回族小镇", path = "walk huijiang"}, --
    {node = "秦州", path = "walk qinzhou"}, --
    {node = "长安通化门", path = "walk tonghua"}, --
    {node = "长安明德门", path = "walk mingde"}, --
  }
}

walk_node["秦州"] = {region = "秦州", map = "",
  edges = {
    {node = "回族小镇", path = "walk huijiang"}, --
    {node = "长安金光门", path = "walk changan"}, -- 
    {node = "秦州黄河渡口", path = "walk huanghe"}, --
  }
}

walk_node["灵鹫宫"] = {region = "灵鹫宫", map = "",
  edges = {
    {node = "回族小镇", path = "walk huijiang"}, --
  }
}

walk_node["回族小镇"] = {region = "回族小镇", map = "",
  edges = {
    {node = "灵州", path = "walk lingzhou"}, -- 
    {node = "灵鹫宫", path = "walk lingjiu"}, --
    {node = "秦州", path = "walk qinzhou"}, --
    {node = "长安金光门", path = "walk changan"}, --
  }
}

walk_node["灵州"] = {region = "灵州", map = "",
  edges = {
    {node = "回族小镇", path = "walk huijiang"}, --
    {node = "灵州黄河渡口", path = "walk mingjiao"}, -- 
    {node = "纪晓芙", path = "node walk lz_jxf"}, --
  }
}

walk_node["扬州丐帮分舵"] = {region = "扬州丐帮分舵", map = "",
  edges = {
    {node = "扬州", path = "walk yangzhou"}, -- 
  }
}
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>hub_fp</name>
				<packageName></packageName>
				<script>hub_fp = hub_fp or {}

hub_fp["sz"] = {
  ["沧浪亭|n,s,se,sw"] = "沧浪亭",
  ["铁岭关|nw,s"] = "铁岭关",
}

hub_fp["mr"] = {
  ["湖边|n"] = "姑苏慕容",
}

hub_fp["gyz"] = {
  ["归云庄大门|enter,w"] = "归云庄大门",
}

hub_fp["wx"] = {
  ["盛巷桥|n,se,w"] = "无锡",
}

hub_fp["zhenj"] = {
  ["广场|e,n,s,w"] = "镇江",
  ["京口渡|e,se,w"] = "京口渡",
}

hub_fp["jx"] = {
  ["嘉兴城|e,n,nw,s,w"] = "嘉兴城",
  ["陆家庄|enter,n"] = "陆家庄",
}

hub_fp["jk"] = {
  ["朝阳门|e,n,nw,s,w"] = "建康府朝阳门",
  ["正阳门|e,n,s,w"] = "建康府正阳门",
  ["清凉门|e,nw,s,se,wu"] = "建康府清凉门",
  ["神策门|e,n,s,w"] = "建康府神策门",
  ["燕子矶|e,w"] = "燕子矶",
}

hub_fp["yx"] = {
  ["义兴县城|e,enter,n,s,w"] = "义兴县",
}

hub_fp["hzf"] = {
  ["广场|e,n,s,w"] = "湖州府",
}

hub_fp["hz"] = {
  ["大理寺|e,n,se,w"] = "大理寺",
  ["钱塘北渡口|e"] = "钱塘北渡口",
  ["钱塘西渡口|wu"] = "钱塘西渡口",
  ["钱塘东渡口|e,sw"] = "临安府钱塘东渡口",
}

hub_fp["tgz"] = {
  ["铜官镇|e,n,ne,nw,su,sw"] = "铜官山",
}

hub_fp["huangshan"] = {
  ["歙县|ne,nw,s"] = "黄山",
  ["祁门县|ne,swu,w"] = "祁门县",
}

hub_fp["meizhuang"] = {
  ["孤山梅庄|ne"] = "梅庄",
}

hub_fp["ywm"] = {
  ["岳飞墓|nw,s"] = "岳王墓",
}

hub_fp["jiangz"] = {
  ["中央广场|n,ne,s,sw"] = "江州",
}

hub_fp["fck"] = {
  ["镇中心|e,n,s,w"] = "富池口",
  ["富池口古渡|nw,se,sw"] = "富池口古渡",
}

hub_fp["jiangxia"] = {
  ["府前街|e,n,s,w"] = "江夏",
}

hub_fp["yy"] = {
  ["城中心|e,n,s,w"] = "岳阳",
  ["陵矶|e,w"] = "岳阳长江渡口",
}

hub_fp["nc"] = {
  ["城中心|e,n,s,w"] = "南昌",
}

hub_fp["csha"] = {
  ["走马楼|e,ne,nw,s,w"] = "长沙",
  ["袁水北岸|ne,nw,sw"] = "袁水北岸",
}

hub_fp["hshan"] = {
  ["山门|eu,nu,s"] = "衡山",
}

hub_fp["hengz"] = {
  ["青草桥头|e,n,ne,nw,s,w"] = "衡州",
  ["湘江东岸|eu"] = "衡州湘江东岸",
  ["湘江渡口|ne,nw"] = "五岭湘江渡口",
}

hub_fp["yzhou"] = {
  ["鼓楼|e,n,s,w"] = "袁州",
}

hub_fp["miaojiang"] = {
  ["苗岭边缘|ed,enter,n"] = "苗岭边缘",
}

hub_fp["lhs"] = {
  ["正一观|e,enter,su,w"] = "龙虎山",
}

hub_fp["lling"] = {
  ["嘉和门|e,ne,nw,sw,w"] = "庐陵",
  ["山间道|ed,wu"] = "越城岭山口",
}

hub_fp["sr"] = {
  ["中央广场|e,n,nw,s,sw"] = "上饶县",
  ["铅山县|ne,nw,s,sw"] = "铅山县",
}

hub_fp["xianxia"] = {
  ["关顶|nd,sd"] = "仙霞岭",
}

hub_fp["quz"] = {
  ["北广场|e,n,s,w"] = "衢州府",
  ["乌溪江南岸|eu,sw"] = "乌溪江南岸",
  ["乌溪江边|n"] = "衢州府乌溪江北岸",
}

hub_fp["sx"] = {
  ["八字桥|e,n,s"] = "绍兴府",
  ["金华府|e,n,s,sw,w"] = "金华府",
}

hub_fp["tt"] = {
  ["市口|e,n,w"] = "天台县",
  ["弥勒殿|out,s"] = "天台山",
}

hub_fp["mz"] = {
  ["鼓楼|e,n,s,w"] = "明州",
}

hub_fp["tzf"] = {
  ["灵江西岸|nw"] = "台州府灵江西岸",
  ["灵江南岸|sw"] = "台州府灵江南岸",
}

hub_fp["yds"] = {
  ["碧霄峰|eu,ne,sd,wd"] = "雁荡山",
}

hub_fp["lqz"] = {
  ["水井|e,n,s,w"] = "龙泉镇",
}

hub_fp["chuz"] = {
  ["中央广场|e,n,ne,s,se,sw,w"] = "处州府",
  ["瓯江北岸|e,n"] = "龙泉镇瓯江北岸",
  ["瓯江南岸|su,w"] = "处州府瓯江南岸",
}

hub_fp["wenz"] = {
  ["集市|e,n,s,w"] = "温州",
  ["瓯江南岸|s,w"] = "处州府瓯江南岸-温州",
  ["瓯江北岸|ne,nw"] = "温州瓯江北岸",
}

hub_fp["fz"] = {
  ["城中心|e,n,s,w"] = "闽中",
  ["中心广场|e,n,s,w"] = "莆田",
}

hub_fp["jn"] = {
  ["南街头|e,n,s,w"] = "建宁",
  ["西镇|s"] = "西镇渡口",
  ["北津|n"] = "北津",
}

hub_fp["qz"] = {
  ["城中心|e,n,ne,s,w"] = "泉州",
  ["晋江东岸|e"] = "晋江东岸",
  ["山门|n,sd"] = "南少林",
}

hub_fp["cz"] = {
  ["中央广场|e,n,s,w"] = "潮州",
  ["晋江西岸|wu"] = "晋江西岸",
}

hub_fp["wuyi"] = {
  ["九龙窠|ne,nw,su,sw,u"] = "武夷山",
}

hub_fp["guangzhou"] = {
  ["市口|e,n,s,w"] = "广州府",
  ["珠江北岸|e,nw"] = "珠江北岸",
  ["老林尽头|n,se,w"] = "老林",
}

hub_fp["unknown"] = {
  ["山间小路|ne,w"] = "圣峰嶂西部",
  ["山间小路|ne,nw"] = "圣峰嶂",
}</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>walk_capture</name>
				<packageName></packageName>
				<script>-- walk_capture.lua
walk_capture = walk_capture or {}

walk_capture.active  = walk_capture.active or false
walk_capture.hubCN   = walk_capture.hubCN   or nil   -- 表头里的“扬州”
walk_capture.rows    = walk_capture.rows    or {}    -- { {regionCN, spotCN, py}, ... }

local function trim(s)
  s = tostring(s or "")
  return (s:gsub("^%s+", ""):gsub("%s+$", ""))
end

local function wprint(msg)
  if cecho then
    cecho("\n&lt;cyan&gt;[WalkCap]&lt;reset&gt; " .. msg .. "\n")
  else
    print("[WalkCap] " .. msg)
  end
end

function walk_capture.reset()
  walk_capture.active = false
  walk_capture.hubCN  = nil
  walk_capture.rows   = {}
end

-- 解析一行“数据行”
-- 例：│建康府  ◇ 长江渡口                   │jiankang                            │
function walk_capture.ingestRowLine(line)
  -- 用竖线分列（注意这里是全角/制表框的 │ ）
  local a, b = line:match("^│(.-)│(.-)│%s*$")
  if not a or not b then return end

  a = trim(a)
  b = trim(b)

  -- 拼音列一般就是 [a-z]，但为了稳妥：取第一个连续字母/数字/下划线
  local py = b:match("([%w_]+)")
  if not py then return end
  py = trim(py):lower()

  -- 左列： "建康府  ◇ 长江渡口"
  local regionCN, spotCN = a:match("^(.-)%s*◇%s*(.-)$")
  regionCN = trim(regionCN or a)
  spotCN   = trim(spotCN or "")

  table.insert(walk_capture.rows, {
    regionCN = regionCN,
    spotCN   = spotCN,
    py       = py,
  })
end

-- 输出：1) region_key_map 增量片段；2) edges 片段；3) 同时给出“落点信息”
function walk_capture.finishAndPrint()
  local hub = walk_capture.hubCN or "(未知hub)"
  local rows = walk_capture.rows or {}

  wprint(string.format("采集完成：hub=%s，目的地=%d 条", hub, #rows))
  if #rows == 0 then
    walk_capture.reset()
    return
  end

  -- 1) region_key_map 增量（中文 -&gt; 拼音key）
  wprint("===== 建议追加到 region_key_map 的片段（中文 -&gt; 拼音） =====")
  if echo then echo("\n-- from walk list @ " .. hub .. "\n") end
  if echo then echo("region_key_map = region_key_map or {}\n") end

  -- 去重：同一个中文只输出一次
  local seenCN = {}
  for _, r in ipairs(rows) do
    if r.regionCN ~= "" and r.py ~= "" and not seenCN[r.regionCN] then
      seenCN[r.regionCN] = true
      if echo then
        echo(string.format('region_key_map["%s"] = "%s"\n', r.regionCN, r.py))
      else
        print(string.format('region_key_map["%s"] = "%s"', r.regionCN, r.py))
      end
    end
  end

  -- 2) edges 片段（给你手工贴进 walk_node["某hub"].edges）
  -- 注意：这里“node”我先用 regionCN（目的地区域名），你也可以后续改成你自己的 nodeKey
  wprint("===== edges 片段（可贴到 walk_node[\"&lt;你的hub节点key&gt;\"].edges） =====")
  if echo then echo("\nedges = {\n") end
  for _, r in ipairs(rows) do
    local nodeName = r.regionCN
    local cmd = "walk " .. r.py
    if echo then
      echo(string.format('  {node = "%s", path = "%s"}, -- ◇ %s\n', nodeName, cmd, r.spotCN))
    else
      print(string.format('{node="%s", path="%s"} -- ◇ %s', nodeName, cmd, r.spotCN))
    end
  end
  if echo then echo("}\n") end

  -- 3) 额外信息：落点（spotCN）
  wprint("（备注）每条目的的落点房间：用 r.spotCN 可做 hub_fp/到达判定/自动定位。")

  walk_capture.reset()
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>华北地区</name>
				<packageName></packageName>
				<script>walk_node = walk_node or {}

walk_node["云冈石窟"] = {region = "云冈石窟", map = "",
  edges = {
    {node = "代州", path = "node walk ygsk_dz"}, 
    {node = "北京南永安门", path = "node walk ygsk_bj"},
    {node = "大同", path = "node walk ygsk_dt"},
    {node = "濮阳", path = "node walk ygsk_py"},
    {node = "济源渡", path = "node walk ygsk_jydk"},
    {node = "濮阳黄河渡口", path = "node walk ygsk_pydk"},
  }
}

walk_node["胡一刀"] = {region = "胡一刀", map = "bj",
  edges = {
    {node = "代州", path = "node walk hyd_dz"}, 
    {node = "北京南永安门", path = "node walk hyd_bj"},
    {node = "大同", path = "node walk hyd_dt"},
    {node = "亲王府", path = "node walk hyd_kqw"},
    {node = "张家口", path = "node walk hyd_zjk"},
    {node = "晋阳", path = "node walk hyd_jy"},
    {node = "塘沽口", path = "node walk hyd_tgk"},
    {node = "濮阳", path = "node walk hyd_py"},
    {node = "济源渡", path = "node walk hyd_jydk"},
    {node = "濮阳黄河渡口", path = "node walk hyd_pydk"},
    {node = "日月神教", path = "node walk hyd_ry"},
  }
}

walk_node["亲王府"] = {region = "亲王府", map = "bj",
  edges = {
    {node = "胡一刀", path = "node walk kqw_hyd"},
  }
}

walk_node["滹沱河北岸"] = {region = "滹沱河北岸", map = "",
  edges = {
    {node = "代州", path = "walk daizhou"}, --
    {node = "滹沱河南岸", path = "ride"}, --
    
  }
}

walk_node["滹沱河南岸"] = {region = "滹沱河南岸", map = "",
  edges = {
    {node = "晋阳", path = "walk jinyang"}, --
    {node = "滹沱河北岸", path = "ride"}, --
  }
}


walk_node["洋河北渡口"] = {region = "洋河北渡口", map = "",
  edges = {
    {node = "张家口", path = "walk zhangjiakou"}, --
    {node = "洋河南渡口", path = "ride"}, --
  }
}

walk_node["洋河南渡口"] = {region = "洋河南渡口", map = "",
  edges = {
    {node = "大同", path = "walk datong"}, --
    {node = "洋河北渡口", path = "ride"}, --
  }
}

walk_node["济源"] = {region = "济源", map = "",
  edges = {
    {node = "晋州", path = "walk jinzhou"}, --
    {node = "濮阳", path = "walk puyang"}, --
    {node = "邯郸", path = "walk handan"}, --
    {node = "铜雀台", path = "walk tongquetai"}, --
    {node = "济源渡", path = "sd"}, --
  }
}

walk_node["济源渡"] = {region = "济源渡", map = "",
  edges = {
    {node = "济源", path = "nu"},
    {node = "胡一刀", path = "node walk jydk_hyd"},
    {node = "洛阳黄河渡口", path = "ask shao gong about huanghe;enter"}, --
  }
}

walk_node["风陵渡"] = {region = "风陵渡", map = "",
  edges = {
    {node = "晋州", path = "walk jinzhou"}, --
  }
}

walk_node["晋州"] = {region = "晋州", map = "",
  edges = {
    {node = "晋阳", path = "walk jinyang"}, --
    {node = "济源", path = "walk jiyuan"}, -- 
    {node = "风陵渡", path = "walk fenglingdu"}, --
  }
}

walk_node["晋阳"] = {region = "晋阳", map = "",
  edges = {
    {node = "滹沱河南岸", path = "walk daizhou"}, -- 这里可以去代州
    {node = "日月神教", path = "walk riyue"}, --
    {node = "晋州", path = "walk jinzhou"}, --
    {node = "正定镇", path = "walk zhengding"}, -- 
    {node = "胡一刀", path = "node walk jy_hyd"}, -- 
  }
}

walk_node["正定镇"] = {region = "正定镇", map = "",
  edges = {
    {node = "保州", path = "walk baozhou"},
    {node = "日月神教", path = "walk riyue"}, -- 
    {node = "晋阳", path = "walk jinyang"}, -- 
    {node = "邯郸", path = "walk handan"}, -- 
    {node = "铜雀台", path = "walk tongquetai"}, --
  }
}

walk_node["保州"] = {region = "保州", map = "",
  edges = {
    {node = "代州", path = "walk daizhou"}, --
    {node = "北京南永安门", path = "walk beijing"}, --
    {node = "塘沽口", path = "walk tanggu"}, --
    {node = "正定镇", path = "walk zhengding"}, --
    {node = "沧州", path = "walk cangzhou"}, --
    {node = "邯郸", path = "walk handan"}, --
    {node = "铜雀台", path = "walk tongquetai"}, --
  }
}

walk_node["沧州"] = {region = "沧州", map = "",
  edges = {
    {node = "保州", path = "walk baozhou"}, --
    {node = "塘沽口", path = "walk tanggu"}, -- 
    {node = "濮阳", path = "walk puyang"}, --
    {node = "铜雀台", path = "walk tongquetai"}, --
  }
}

walk_node["塘沽口"] = {region = "塘沽口", map = "",
  edges = {
    {node = "保州", path = "walk baozhou"}, -- 
    {node = "北京南永安门", path = "walk beijing"}, --
    {node = "沧州", path = "walk cangzhou"}, -- 
    {node = "铜雀台", path = "walk tongquetai"}, --
    {node = "胡一刀", path = "node walk tgk_hyd"}, --
  }
}

walk_node["北京南永安门"] = {region = "北京南永安门", map = "",
  edges = {
    {node = "保州", path = "walk baozhou"}, --
    {node = "北京北安定门", path = "walk anding"}, --
    {node = "北京广安门", path = "walk guangan"}, -- 
    {node = "北京德胜门", path = "walk desheng"}, --
    {node = "塘沽口", path = "walk tanggu"}, --
    {node = "胡一刀", path = "node walk bj_hyd"}, --
    
  }
}

walk_node["北京德胜门"] = {region = "北京德胜门", map = "",
  edges = {
    {node = "北京北安定门", path = "walk anding"}, --
    {node = "北京南永安门", path = "walk yongan"}, -- 
    {node = "北京广安门", path = "walk guangan"}, -- 
    {node = "张家口", path = "walk zhangjiakou"}, -- 
  }
}


walk_node["北京广安门"] = {region = "北京广安门", map = "",
  edges = {
    {node = "北京北安定门", path = "walk anding"}, --
    {node = "北京南永安门", path = "walk yongan"}, --
    {node = "北京德胜门", path = "walk desheng"}, --
  }
}



walk_node["张家口"] = {region = "张家口", map = "",
  edges = {
    {node = "代州", path = "walk daizhou"}, --
    {node = "北京德胜门", path = "walk beijing"}, --
    {node = "洋河北渡口", path = "walk datong"}, -- to 大同
    {node = "蒙古", path = "walk menggu"}, -- 
    {node = "胡一刀", path = "node walk zjk_hyd"}, -- 
  }
}

walk_node["蒙古"] = {region = "蒙古", map = "",
  edges = {
    {node = "张家口", path = "walk zhangjiakou"}, --
  }
}



walk_node["大同"] = {region = "大同", map = "",
  edges = {
    {node = "云冈石窟", path = "node walk dt_ygsk"}, --
    {node = "代州", path = "walk daizhou"}, --
    {node = "胡一刀", path = "node walk dt_hyd"}, --
    {node = "洋河南渡口", path = "walk zhangjiakou"}, --
  }
}

walk_node["北京北安定门"] = {region = "北京北安定门", map = "",
  edges = {
    {node = "关外", path = "walk guanwai"}, -- 
    {node = "北京南永安门", path = "walk yongan"}, --
    {node = "北京广安门", path = "walk guangan"}, --
    {node = "北京德胜门", path = "walk desheng"}, --
  }
}

walk_node["关外"] = {region = "关外", map = "",
  edges = {
    {node = "北京北安定门", path = "walk beijing"}, --
  }
}



walk_node["代州"] = {region = "代州", map = "",
  edges = {
    {node = "保州", path = "walk baozhou"}, --
    {node = "大同", path = "walk datong"}, -- 
    {node = "张家口", path = "walk zhangjiakou"}, --
    {node = "滹沱河北岸", path = "walk jinyang"}, -- to 晋阳
    {node = "胡一刀", path = "node walk dz_hyd"}, --
  }
}


walk_node["日月神教"] = {region = "日月神教", map = "",
  edges = {
    {node = "晋阳", path = "walk jinyang"}, --
    {node = "正定镇", path = "walk zhengding"}, --
    {node = "胡一刀", path = "node walk ry_hyd"},
  }
}



walk_node["濮阳黄河渡口"] = {region = "濮阳黄河渡口", map = "",
  edges = {
    {node = "濮阳", path = "walk puyang"},
    {node = "胡一刀", path = "node walk hhbkd3_hyd"},
    {node = "曲阜黄河渡口", path = "ask shao gong about huanghe;enter"},
  }
}

walk_node["濮阳"] = {region = "濮阳", map = "",
  edges = {
    {node = "濮阳黄河渡口", path = "walk qufu"}, -- to 曲阜
    {node = "沧州", path = "walk cangzhou"}, --
    {node = "济源", path = "walk jiyuan"}, --
    {node = "邯郸", path = "walk handan"}, --
    {node = "铜雀台", path = "walk tongquetai"}, --
    {node = "胡一刀", path = "node walk py_hyd"}, --
    {node = "云冈石窟", path = "node walk py_ygsk"}, --
  }
}
--

walk_node["邯郸"] = {region = "邯郸", map = "",
  edges = {
    {node = "保州", path = "walk baozhou"}, -- 
    {node = "正定镇", path = "walk zhengding"}, --
    {node = "济源", path = "walk jiyuan"}, --
    {node = "濮阳", path = "walk puyang"}, --
    {node = "铜雀台", path = "walk tongquetai"}, --
  }
}

walk_node["铜雀台"] = {region = "铜雀台", map = "",
  edges = {
    {node = "保州", path = "walk baozhou"},
    {node = "沧州", path = "walk cangzhou"},
    {node = "邯郸", path = "walk handan"},
    {node = "济源", path = "walk jiyuan"},
    {node = "濮阳", path = "walk puyang"},
    {node = "塘沽口", path = "walk tanggu"},
    {node = "正定镇", path = "walk zhengding"},
  }
}</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>西部</name>
				<packageName></packageName>
				<script>walk_node = walk_node or {}

walk_node["兰州"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "扬州", path = "node walk lanz_yz"}, -- 
    {node = "赤套渡", path = "walk chitaodu"}, -- 
  }
}

walk_node["赤套渡"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "赤套渡北渡口", path = "ask shao gong about huanghe;enter"}, -- 
    {node = "兰州", path = "walk lanzhou"}, -- 
  }
}

walk_node["凉州"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "赤套渡北渡口", path = "walk chitaodu"}, -- 
    {node = "赤套渡", path = "ask shao gong about huanghe;enter"}, -- 
  }
}

walk_node["赤套渡北渡口"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "凉州", path = "walk liangzhou"}, -- 
  }
}

walk_node["湟中"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "湟中-秦州渡口", path = "walk qinzhou"}, -- 
    {node = "青唐大车行", path = "do 3 n;e"}, -- 
  }
}

walk_node["白驼山"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "白驼山马车行", path = "sd;sd;s;s;e;e;n"}, -- 
  }
}

walk_node["白驼山马车行"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "白驼山", path = "s;w;w;n;n;nu;nu"}, -- 
  }
}

walk_node["青唐大车行"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "白驼山马车行", path = "gu;qu baituoshan"}, -- 
  }
}


walk_node["湟中-秦州渡口"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "秦州黄河渡口", path = "ask shao gong about huanghe;enter"}, -- 
    {node = "湟中-星宿渡口", path = "node walk hh_xx"}, -- 
    {node = "湟中", path = "walk huangzhong"}, --
  }
}

walk_node["湟中-星宿渡口"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "湟中", path = "walk huangzhong"}, -- 
    {node = "星宿黄河渡口", path = "sheshui"}, -- 
  }
}

walk_node["星宿派"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "荆棘林入口", path = "walk jinjilin"}, -- 
  }
}

walk_node["荆棘林入口"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "星宿黄河渡口", path = "ne;w"}, -- 
    {node = "星宿派", path = "walk xingxiu"}, -- 
  }
}

walk_node["星宿黄河渡口"] = {region = "秦州黄河渡口", map = "",
  edges = {
    {node = "湟中-星宿渡口", path = "sheshui"}, -- 
    {node = "湟中-荆棘林入口", path = "w;l jingji lin;southwest"}, -- 
  }
}

walk_node["明教渡口"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "灵州黄河渡口", path = "ask shao gong about huanghe;enter"}, --
    {node = "明教", path = "nw;do 7 w;do 3 n;do 3 w;nw;n;nw;nu;do 3 nu;"}, --
  }
}

walk_node["明教"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "明教渡口", path = "node walk mj_dk"}, --
  }
}

walk_node["成都"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "大树堡", path = "walk dashubao"}, --
    {node = "峨嵋山", path = "walk emei"}, --
    {node = "岷江东岸", path = "walk qingcheng"}, --
    {node = "大轮寺", path = "node walk cd_dls"}, --
    {node = "赞普广场", path = "walk zanpu"}, --
  }
}

walk_node["赞普广场"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "成都", path = "walk chengdu"}, --
    {node = "大轮寺", path = "walk dalunsi"}, --
  }
}

walk_node["大轮寺"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "赞普广场", path = "walk zanpu"}, --
  }
}


walk_node["朝天门码头"] = {region = "渝州", map = "yuzhou",
  edges = {
    {node = "荆州码头", path = "enter"}, --
    {node = "渝州小广场", path = "sw;do 4 s;w;sw"}, --
  }
}

walk_node["岷江东岸"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "成都", path = "walk chengdu"}, --
    {node = "岷江西岸", path = "ride"}, --
  }
}

walk_node["岷江西岸"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "岷江东岸", path = "ride"}, --
    {node = "青城后山", path = "walk houshan"}, --
  }
}

walk_node["青城后山"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "岷江西岸", path = "walk chengdu"}, --
    {node = "青城派", path = "walk songfeng"}, --
  }
}

walk_node["青城派"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "青城后山", path = "walk houshan"}, --
  }
}

walk_node["大轮寺"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "成都", path = "node walk dls_cd"}, --
  }
}

walk_node["大树堡"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "成都", path = "walk chengdu"}, --
    {node = "玉龙雪山北渡口", path = "walk yulong"}, --
  }
}


walk_node["玉龙雪山北渡口"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "大树堡", path = "walk dashubao"}, --
    {node = "玉龙雪山南渡口", path = "ride"}, --
  }
}

walk_node["玉龙雪山南渡口"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "玉龙雪山北渡口", path = "ride"}, --
    {node = "天龙寺", path = "walk tianlong"}, --
    
  }
}

walk_node["天龙寺"] = {region = "成都", map = "成都", -- 成都
  edges = {
    {node = "玉龙雪山南渡口", path = "walk yulong"}, --
  }
}

walk_node["峨嵋"] = {region = "峨嵋山", map = "峨嵋山", -- 洪椿坪
  edges = {
    {node = "峨嵋山", path = "walk shanmen"}, --
  }
}

walk_node["峨嵋山"] = {region = "峨嵋山", map = "yuzhou",
  edges = {
    {node = "渝州小广场", path = "walk yuzhou"}, --
    {node = "峨嵋", path = "walk hongchun"}, --
    {node = "成都", path = "walk chengdu"}, --
  }
}

walk_node["渝州小广场"] = {region = "渝州", map = "yuzhou",
  edges = {
    {node = "朝天门码头", path = "ne;e;do 4 n;ne"}, --
    {node = "峨嵋山", path = "walk emei"}, --
  }
}
</script>
				<eventHandlerList />
			</Script>
		</ScriptGroup>
		<ScriptGroup isActive="yes" isFolder="yes">
			<name>跨城路由</name>
			<packageName></packageName>
			<script></script>
			<eventHandlerList />
			<Script isActive="yes" isFolder="no">
				<name>travel - 跨区规划</name>
				<packageName></packageName>
				<script>-- ======================================================
-- travel.lua (BASELINE - 可覆盖版)  [PATCHED]
-- 只负责：跨 region 规划（walk_node 图上 BFS）+ 分段输出
-- 不负责：send / GMCP / 成功判定 / 自动 mload / fp 反查 / 自动定位当前region
--
-- 依赖：
--   - walk_node: 你的跨城 hub 图（nodeKey -&gt; {region,map,edges...}）
--   - region_key_map:  中文名 -&gt; 拼音key   （例如 ["苏州"]="suzhou"）
--   - region_name_by_key: 拼音key -&gt; 中文名（由 region_key_map 反向生成）
--
-- 用法（基线）：
--   set from suzhou      -- 或 set from 苏州
--   travel chaozhou      -- 或 travel 潮州
--   travel.next()        -- 外部在“上一段完成”时调用，拿到下一段 cmd
--   travel.show()        -- 查看剩余 hops
--   travel.reset()       -- 清空计划
-- ======================================================

travel = travel or {}

travel.planCache     = travel.planCache or nil
travel.fromRegionKey = travel.fromRegionKey or nil  -- 拼音key（suzhou）
travel.fromRegionCN  = travel.fromRegionCN  or nil  -- 中文名（苏州）

-------------------------------------------------------
-- 打印
-------------------------------------------------------
local function tprint(msg)
  if cecho then
    cecho("\n&lt;orange&gt;[Travel]&lt;reset&gt; " .. msg .. "\n")
  else
    print("[Travel] " .. msg)
  end
end

-------------------------------------------------------
-- 反向表：regionKey -&gt; 中文名（如未建立则尝试建立）
-------------------------------------------------------
local function ensureRegionReverseIndex()
  region_name_by_key = region_name_by_key or {}
  if region_key_map and type(region_key_map) == "table" then
    for cn, key in pairs(region_key_map) do
      if type(cn) == "string" and type(key) == "string" then
        region_name_by_key[key] = region_name_by_key[key] or cn
      end
    end
  end
end

-------------------------------------------------------
-- 解析 region 输入（支持中文 / 拼音key）
-- 返回：拼音key（例如 "suzhou"）
-------------------------------------------------------
function resolveRegionKey(x)
  ensureRegionReverseIndex()

  local raw = tostring(x or ""):gsub("^%s+", ""):gsub("%s+$", "")
  if raw == "" then return nil end

  -- 1) 直接输入拼音key（大小写都行）
  local low = raw:lower()
  if region_name_by_key and region_name_by_key[low] then
    return low
  end

  -- 2) 输入中文（严格按原文查）
  if region_key_map and region_key_map[raw] then
    return region_key_map[raw]
  end

  return nil
end

-------------------------------------------------------
-- 工具：把 key 转中文名（用于与 walk_node[*].region 对齐）
-------------------------------------------------------
local function keyToCN(key)
  ensureRegionReverseIndex()
  if not key then return nil end
  return region_name_by_key and region_name_by_key[key] or nil
end

-------------------------------------------------------
-- 工具：从“中文region名”找到对应的 hub nodeKey 列表
-- 规则：walk_node[nodeKey].region == &lt;中文region名&gt; 时视为该 region 的 hub
-------------------------------------------------------
local function hubsByRegionCN(regionCN)
  local list = {}
  if not regionCN or regionCN == "" then return list end

  for nodeKey, node in pairs(walk_node or {}) do
    if type(node) == "table" and node.region == regionCN then
      table.insert(list, nodeKey)
    end
  end

  table.sort(list)
  return list
end

-------------------------------------------------------
-- 工具：在 walk_node 图上 BFS（节点是 hub nodeKey）
-- 输出：nodeKey 路径（含起点终点）
-------------------------------------------------------
local function bfsNodePath(startNodeKey, targetNodeKey)
  if startNodeKey == targetNodeKey then
    return { startNodeKey }
  end
  if not (walk_node and walk_node[startNodeKey]) then return nil end
  if not (walk_node and walk_node[targetNodeKey]) then return nil end

  local q = { startNodeKey }
  local head = 1
  local visited = { [startNodeKey] = true }
  local prev = {} -- nodeKey -&gt; {from=nodeKey, edgeIndex=i}

  while head &lt;= #q do
    local cur = q[head]; head = head + 1
    if cur == targetNodeKey then break end

    local curNode = walk_node[cur]
    local edges = curNode and curNode.edges or {}
    for i, e in ipairs(edges) do
      local nxt = e and e.node
      if nxt and not visited[nxt] and walk_node[nxt] then
        visited[nxt] = true
        prev[nxt] = { from = cur, edgeIndex = i }
        table.insert(q, nxt)
      end
    end
  end

  if not visited[targetNodeKey] then return nil end

  local path = {}
  local k = targetNodeKey
  while k do
    table.insert(path, 1, k)
    if k == startNodeKey then break end
    local p = prev[k]
    if not p then return nil end
    k = p.from
  end
  return path
end

-------------------------------------------------------
-- 工具：从 nodeKey 路径生成 hops（每段含 cmd=edge.path）
-------------------------------------------------------
local function buildHopsFromNodePath(nodePath)
  local hops = {}
  for i = 1, (#nodePath - 1) do
    local a = nodePath[i]
    local b = nodePath[i + 1]
    local aNode = walk_node[a]
    local cmd = nil

    if aNode and aNode.edges then
      for _, e in ipairs(aNode.edges) do
        if e and e.node == b then
          cmd = e.path
          break
        end
      end
    end

    table.insert(hops, {
      fromNode = a,
      toNode   = b,
      cmd      = cmd or "",
    })
  end
  return hops
end

-------------------------------------------------------
-- 内部：统一把目的地显示名算出来（永不 nil）
-------------------------------------------------------
local function destDisplay(plan)
  local toKey = tostring((plan and plan.toKey) or "?")
  local toCN  = (plan and plan.toCN) or keyToCN(toKey)
  return tostring(toCN or toKey)
end

-------------------------------------------------------
-- 规划：fromKey -&gt; toKey（key 是拼音）
-- 关键点：找 hub 时用中文（walk_node.region 是中文）
-------------------------------------------------------
function travel.plan(fromRegionKey, toRegionKey)
  ensureRegionReverseIndex()

  local fromKey = fromRegionKey or travel.fromRegionKey
  local toKey   = toRegionKey

  fromKey = tostring(fromKey or ""):lower()
  toKey   = tostring(toKey or ""):lower()

  if fromKey == "" then
    tprint("请先 set from &lt;region&gt;（中文或拼音都行），例如：set from suzhou / set from 苏州")
    return nil
  end
  if toKey == "" then
    tprint("用法：travel &lt;region&gt;（中文或拼音都行），例如：travel chaozhou / travel 潮州")
    return nil
  end
  if not walk_node then
    tprint("walk_node 不存在，无法规划。")
    return nil
  end

  local fromCN = keyToCN(fromKey) or fromKey
  local toCN   = keyToCN(toKey)   or toKey

  local fromHubs = hubsByRegionCN(fromCN)
  local toHubs   = hubsByRegionCN(toCN)

  if #fromHubs == 0 then
    tprint("fromRegion 没有 hub：region=" .. tostring(fromCN) .. "（key=" .. tostring(fromKey) .. "）")
    return nil
  end
  if #toHubs == 0 then
    tprint("toRegion 没有 hub：region=" .. tostring(toCN) .. "（key=" .. tostring(toKey) .. "）")
    return nil
  end

  -- 基线策略：各取第一个 hub
  local startHub  = fromHubs[1]
  local targetHub = toHubs[1]

  local nodePath = bfsNodePath(startHub, targetHub)
  if not nodePath then
    tprint(string.format("跨城图上找不到路径：%s(%s) -&gt; %s(%s)",
      tostring(fromCN), tostring(startHub), tostring(toCN), tostring(targetHub)
    ))
    return nil
  end

  local hops = buildHopsFromNodePath(nodePath)

  local plan = {
    fromKey    = fromKey,
    fromCN     = fromCN,
    toKey      = toKey,
    toCN       = toCN,
    startHub   = startHub,
    targetHub  = targetHub,
    nodePath   = nodePath,
    hops       = hops,
    idx        = 1, -- 下一段 hop 索引
  }

  travel.planCache = plan
  return plan
end

-------------------------------------------------------
-- start：规划并展示
-------------------------------------------------------
function travel.start(toRegionKey, fromRegionKey)
  local plan = travel.plan(fromRegionKey, toRegionKey)
  if not plan then return nil end

  tprint(string.format(
    "已规划：%s(%s) -&gt; %s(%s)（hub: %s -&gt; %s），共 %d 段。",
    tostring(plan.fromKey), tostring(plan.fromCN),
    tostring(plan.toKey),   tostring(plan.toCN),
    tostring(plan.startHub), tostring(plan.targetHub),
    #plan.hops
  ))

  travel.show()
  tprint("外部执行：每段完成后调用 travel.next() 取下一段 cmd，交给 walker/trigger 去跑。")
  return plan
end

-------------------------------------------------------
-- next：返回下一段命令（字符串），并前进 idx
-------------------------------------------------------
function travel.next()
  local plan = travel.planCache
  if not plan then
    tprint("没有行程计划。先 travel &lt;目标&gt;")
    return nil
  end

  -- 行程完成：idx 已经越过最后一段
  if plan.idx == (#plan.hops + 1) then
    tprint(string.format("已到达 %s，行程完成。", destDisplay(plan)))
    travel.reset()
    return nil
  end

  local total = #plan.hops
  local idx   = plan.idx

  if idx &gt; total then
    tprint("行程已完成。")
    return nil
  end

  local hop = plan.hops[idx] or {}
  plan.idx = idx + 1

  local cmd  = hop.cmd
  local left = total - idx

  if not cmd or cmd == "" then
    tprint(string.format(
      "第 %d/%d 段：%s -&gt; %s（无 cmd，请检查 walk_node）",
      idx, total,
      tostring(hop.fromNode),
      tostring(hop.toNode)
    ))
    return ""
  end

  tprint(string.format(
    "执行第 %d/%d 段：%s -&gt; %s，cmd = %s（剩余 %d 段）",
    idx, total,
    tostring(hop.fromNode),
    tostring(hop.toNode),
    tostring(cmd),
    left
  ))

  -- 如果这是最后一段，提前提示完成
  if idx == total then
    tprint(string.format(
      "这是最后一段（%d/%d），执行完即到达 %s。",
      idx, total, destDisplay(plan)
    ))
  end

  return cmd
end

-------------------------------------------------------
-- show：打印剩余段
-------------------------------------------------------
function travel.show()
  local plan = travel.planCache
  if not plan then
    tprint("没有行程计划。")
    return
  end

  tprint("---- 行程 hops（未完成部分）----")
  for i = plan.idx, #plan.hops do
    local h = plan.hops[i]
    local cmd = (h.cmd and h.cmd ~= "") and h.cmd or "(NO_CMD)"
    tprint(string.format("  [%d] %s -&gt; %s : %s", i, h.fromNode, h.toNode, cmd))
  end
  if plan.idx &gt; #plan.hops then
    tprint("  (none) 已全部完成")
  end
end

function travel.moves(n)
  n = tonumber(n)
  if not n or n &lt;= 0 then
    tprint("用法：moves &lt;数量&gt;   例如：moves 3")
    return
  end

  local plan = travel.planCache
  if not plan then
    tprint("没有行程计划。")
    return
  end

  tprint(string.format("连续执行 %d 段：", n))

  for i = 1, n do
    local cmd = travel.next()
    if not cmd then return end
    if cmd == "" then return end

    if not travel.exec(cmd) then
      return
    end
  end
end

-- 统一执行一条命令：trim + 明确回显 + 捕获 send 异常
function travel.exec(cmd)
  cmd = tostring(cmd or "")
  cmd = cmd:gsub("\r", ""):gsub("\n", "")
  cmd = cmd:match("^%s*(.-)%s*$") or ""

  if cmd == "" then
    tprint("exec: cmd 为空，跳过")
    return false
  end

  tprint("SEND &gt;&gt; " .. cmd)

  local ok, err = pcall(function()
    send(cmd)
  end)

  if not ok then
    tprint("&lt;red&gt;send 出错: " .. tostring(err) .. "&lt;/red&gt;")
    return false
  end

  return true
end

-- 单步执行一段（给 alias: move 用）
function travel.move()
  return travel.moves(1)
end

-------------------------------------------------------
-- reset：清空
-------------------------------------------------------
function travel.reset()
  travel.planCache = nil
  tprint("已清空 travel 行程缓存。")
end

-------------------------------------------------------
-- 用户接口：set from &lt;region&gt;
-- 支持中文/拼音
-------------------------------------------------------
function travel.setFrom(x)
  local key = resolveRegionKey(x)
  if not key then
    if cecho then
      cecho("\n&lt;red&gt;[Travel] 未知 region: " .. tostring(x) .. "&lt;/red&gt;\n")
    else
      print("[Travel] 未知 region: " .. tostring(x))
    end
    return
  end

  travel.fromRegionKey = tostring(key):lower()
  travel.fromRegionCN  = keyToCN(travel.fromRegionKey)

  if cecho then
    cecho(string.format("\n&lt;green&gt;[Travel] from = %s (%s)&lt;/green&gt;\n", travel.fromRegionKey, travel.fromRegionCN or "?"))
  else
    print(string.format("[Travel] from = %s (%s)", travel.fromRegionKey, travel.fromRegionCN or "?"))
  end
end

-------------------------------------------------------
-- 用户接口：travel &lt;region&gt;
-- 只负责规划 + 打印，不自动走
-------------------------------------------------------
function travel.to(x)
  local toKey = resolveRegionKey(x)
  if not toKey then
    if cecho then
      cecho("\n&lt;red&gt;[Travel] 未知 region: " .. tostring(x) .. "&lt;/red&gt;\n")
    else
      print("[Travel] 未知 region: " .. tostring(x))
    end
    return
  end

  if not travel.fromRegionKey then
    if cecho then
      cecho("\n&lt;yellow&gt;[Travel] 请先 set from &lt;region&gt;，例如：set from suzhou / set from 苏州&lt;/yellow&gt;\n")
    else
      print("[Travel] 请先 set from &lt;region&gt;")
    end
    return
  end

  local plan = travel.start(tostring(toKey):lower(), travel.fromRegionKey)
  if not plan then return end
end

function travel.lockFromByGMCPShort(short)
  if not short or short == "" then return false end
  local hit = gmcp_room_to_region_cn and gmcp_room_to_region_cn[short]
  if not hit or not hit.region then return false end

  local key = resolveRegionKey(hit.region)  -- 支持中文/拼音；这里传中文
  if not key then
    cecho(string.format("\n&lt;red&gt;[Travel] lockFrom: region_key_map 缺少 %s&lt;/red&gt;\n", hit.region))
    return false
  end

  travel.setFrom(key) -- 这里 setFrom 支持拼音key
  return true
end
</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>region_key_map</name>
				<packageName></packageName>
				<script>-- ======================================================
-- region_key_map.lua
-- 中文语义区域名 &lt;-&gt; regionKey（拼音）
-- 不依赖 mapper / nav / travel
-- ======================================================
region_key_map = region_key_map or {

  -- 江南 / 江浙
  ["苏州"]     = "suzhou",
  ["姑苏慕容"] = "murong",
  ["归云庄"]   = "guiyun",
  ["嘉兴"]     = "jiaxing",
  ["无锡"]     = "wuxi",
  ["镇江"]     = "zhenjiang",
  ["扬州"]     = "yangzhou",
  ["义兴县"]   = "yixing",
  ["湖州府"]   = "huzhou",
  ["临安府"]   = "linan",
  ["钱塘北渡口"] = "beidukou", -- 连通
  ["钱塘西渡口"] = "xidukou",-- 连通
  ["钱塘东渡口"] = "dongdukou",-- 连通

  -- 建康 / 周边
  ["建康府"]   = "jiankang",
  ["建康府东"] = "jiankang_east",
  ["建康府南"] = "jiankang_south",
  ["建康府西"] = "jiankang_west",
  ["建康府北"] = "jiankang_north",
  ["长江南岸"] = "changjiang_nanan", -- 连通
  ["京口渡"] = "jingkoudu",

  -- 皖赣一带
  ["铜官山"]   = "tongguan",
  ["黄山"]     = "huangshan",
  ["祁门县"]   = "qimen",
  ["江州"]     = "jiangzhou",
  ["南昌"]     = "nanchang",
  ["上饶县"]   = "shangrao",
  ["铅山县"]   = "qianshan",
  ["富池口"]   = "fuchikou",
  ["信阳"]     = "xinyang",

  -- 湘鄂
  ["岳阳"]     = "yueyang",
  ["荆州府"]   = "jingzhou",
  ["江夏"]     = "jiangxia",
  ["长沙"]     = "changsha",
  ["衡山"]     = "hengshan",
  ["衡州"]     = "hengzhou",
  ["苗疆"]     = "miaojiang",
  ["五岭"]     = "wuling",
  ["袁州"]     = "yuanzhou",
  ["庐陵"]     = "luling",

  -- 浙东 / 浙南
  ["衢州府"]   = "quzhou",
  ["衢州"]     = "quzhou_city",
  ["仙霞岭"]   = "xianxia",
  ["龙泉镇"]   = "longquan",
  ["处州府"]   = "chuzhou",
  ["温州"]     = "wenzhou",
  ["明州"]     = "mingzhou",
  ["绍兴府"]   = "shaoxing",
  ["金华府"]   = "jinhua",
  ["天台县"]   = "tiantai",
  ["天台山"]   = "tiantaishan",
  ["台州府"]   = "taizhou",
  ["雁荡山"]   = "yandang",

  -- 闽中 / 闽北 / 闽南
  ["闽中"]     = "minzhong",
  ["莆田"]     = "putian",
  ["建宁府"]   = "jianning",
  ["西镇渡口"] = "xizhen", -- 连通
  ["北津"] = "beijin", -- 连通
  ["泉州"]     = "quanzhou",
  ["晋江东岸"] = "jinjiang_east",-- 连通
  ["南少林"]   = "nanshaolin",
  ["武夷山"]   = "wuyi",

  -- 粤东 / 粤中
  ["潮州"]     = "chaozhou",
  ["晋江西岸"] = "jinjiang_west",-- 连通
  ["圣峰嶂"]   = "shengfeng",
  ["广州府"]   = "guangzhou",
  ["佛山"]     = "foshan",
  ["老林"]     = "laolin",
  
    -- ===== 山东 / 北地 =====
  ["泰山"]         = "taishan",
  ["泰安"]         = "taian",
  ["曲阜"]         = "qufu",
  ["青州"]         = "qingzhou",
  ["登州"]         = "dengzhou",
  ["威海卫"]       = "weihaiwei",
  ["徐州"]         = "xuzhou",
  ["淮北"]         = "huaibei",

  -- ===== 河南 =====
  ["许昌"]         = "xuchang",
  ["郑州"]         = "zhengzhou",
  ["洛阳"]         = "luoyang",
  ["萧峰"]         = "xiaofeng",
  ["登封"]         = "dengfeng",
  ["少林寺"]       = "shaolin",
  ["峻极宫前"]     = "junji",
  ["麒麟村"]       = "qilincun",
  ["卢氏县"]       = "lushi",
  ["卢氏县南"]     = "lushinan",
  ["伏牛山"]       = "funiushan",
  ["伏牛派"]       = "funiupai",

  -- ===== 南阳 / 白河 =====
  ["南阳城"]       = "nanyang",
  ["白河东岸"]     = "baihe",
  ["商州"]         = "shangzhou",

  -- ===== 湖北 =====
  ["信阳"]         = "xinyang",
  ["襄阳"]         = "xiangyang",
  ["武当"]       = "wudang",
  ["汉口镇"]       = "hankou",
  ["荆州府"]       = "jingzhou",

  -- ===== 水路 / 渡口 =====
  ["曲阜黄河渡口"] = "qufudu",
  ["济源渡"] = "jiyuandu",
  ["洛阳黄河渡口"] = "luoyangdu",
  ["信阳长江渡口"] = "xinyangdu",
  ["荆州长江渡口"] = "jingzhoudu",
  ["荆州汉水西岸"] = "hanshuixi",
  ["汉口镇汉水渡口"] = "hanshuidu",
  ["鸡鸣渡西"]     = "jimingxi",
  ["鸡鸣渡东"]     = "jingmingdong",

  -- ===== 江淮 =====
  ["庐州"]         = "luzhou",
  ["濠州府"]       = "haozhou",
  ["纪晓芙"]       = "jxf",

  -- ===== 扬州 =====
  ["扬州"]         = "yangzhou",
  ["扬州丐帮分舵"] = "gaibang",
  ["长江扬州西渡口"] = "yangzhouxd",
  ["长江扬州东渡口"] = "yangzhoudd",

  -- ===== 帮派 / 特殊 =====
  ["往生堂"]       = "shashou",

  -- ===== 关中 =====
  ["长安通化门"]   = "tonghuamen",
  ["长安明德门"]   = "mingdemen",
  ["长安金光门"]   = "jinguangmen",

  ["华山派"]       = "huashanpai",
  ["华山村"]       = "huashancun",
  ["全真派"]       = "quanzhen",
  ["古墓派"]       = "gumu",

  -- ===== 汉中 =====
  ["汉中"]         = "hanzhong",
  ["金牛县渡口"]   = "jiniudu",
  ["汉水北渡"]     = "hanshuibd",

  -- ===== 西北 =====
  ["秦州"]         = "qinzhou",
  ["秦州黄河渡口"] = "huanghe-qz",
  ["回族小镇"]     = "huijiang",
  ["灵鹫宫"]       = "lingjiu",
  ["灵州"]         = "lingzhou",
  ["灵州黄河渡口"] = "huanghe-lz",
  ["济源"]       = "jiyuan",
  ["风陵渡"]     = "fenglingdu",
  ["晋州"]       = "jinzhou",
  ["晋阳"]       = "jinyang",
  ["正定镇"]     = "zhengding",
  ["保州"]       = "baozhou",
  ["沧州"]       = "cangzhou",
  ["塘沽口"]     = "tanggu",

  ["代州"]       = "daizhou",
  ["大同"]       = "datong",
  ["张家口"]     = "zjk",
  ["蒙古"]       = "menggu",
  ["云冈石窟"]       = "ygsk",

  ["关外"]       = "guanwai",

  ["濮阳"]       = "puyang",
  ["濮阳黄河渡口"] = "puyangdu",
  ["邯郸"]       = "handan",
  ["铜雀台"]     = "tongquetai",

  ["日月神教"]   = "hmy",

  -- ===== 河流 / 渡口 / ride 点 =====
  ["滹沱河北岸"] = "hthebei",
  ["滹沱河南岸"] = "hthenan",

  ["洋河北渡口"] = "yhbei",
  ["洋河南渡口"] = "yhenan", -- 你若更想用 “yanghenandukou” 也行（见下面说明）

  -- ===== 北京城门（建议保持唯一）=====
  ["北京南永安门"] = "yonganmen",
  ["北京北安定门"] = "andingmen",
  ["北京德胜门"]   = "deshengmen",
  ["北京广安门"]   = "guanganmen",  
  ["胡一刀"] = "hyd",
  ["亲王府"] = "qwf"
}

-- 反向表：regionKey -&gt; 中文名
region_name_by_key = region_name_by_key or {}
for cn, key in pairs(region_key_map) do
  region_name_by_key[key] = cn
end

-- ------------------------------------------------------
-- 工具函数：解析 region 输入
-- 支持：
--   resolveRegionKey("苏州")
--   resolveRegionKey("suzhou")
-- ------------------------------------------------------
function resolveRegionKey(x)
  local raw = tostring(x or ""):gsub("^%s+", ""):gsub("%s+$", "")
  if raw == "" then return nil end

  -- 1) 直接输入拼音 key（大小写都行）
  local low = raw:lower()
  if region_name_by_key and region_name_by_key[low] then
    return low
  end

  -- 2) 输入中文（不要 lower 再查，直接按原文查）
  if region_key_map and region_key_map[raw] then
    return region_key_map[raw]
  end

  return nil
end

</script>
				<eventHandlerList />
			</Script>
			<Script isActive="yes" isFolder="no">
				<name>gmcp room to walk node</name>
				<packageName></packageName>
				<script>gmcp_room_to_region_cn = {

  ["京口渡"] = {
    region   = "京口渡",
  },

  ["孟津渡"] = {
    region   = "洛阳黄河渡口",
  },

  ["望星楼二层"] = {
    region   = "萧峰",
  },

  ["水井"] = {
    region   = "龙泉镇",
  },

  ["九龙窠"] = {
    region   = "武夷山",
  },

  ["走马楼"] = {
    region   = "长沙",
  },

  ["舜耕山"] = {
    region   = "纪晓芙",
  },

  ["魁星楼"] = {
    region   = "大同",
  },
  
  ["高粱地"] = {
    region = "胡一刀",
  },

  ["永安门"] = {
    region = "北京南永安门",
  },    
  ["府前大街"] = {
    region = "代州",
  },     
  ["王府大门"] = {
    region = "亲王府",
  },    
  
  ["塘沽口"] = {
    region = "塘沽口",
  },   

  ["濮阳"] = {
    region = "濮阳",
  },     
  
  ["小村庄"] = {
    region = "日月神教",
  },     
  
  -- 这里是黄河北岸的渡口，往北通向濮阳。渡过河去就是山东地界了。
  ["濮阳黄河渡口"] = {
    region = "濮阳黄河渡口",
  },     
     
  ["济源"] = {
    region = "济源",
  },     

  ["邯郸"] = {
    region = "邯郸",
  },   

  ["铜雀台下"] = {
    region = "铜雀台",
  },  

  ["正定镇"] = {
    region = "正定镇",
  },       

  ["保州"] = {
    region = "保州",
  },       

  ["沧州"] = {
    region = "沧州",
  },    

  ["德胜门"] = {
    region = "北京德胜门",
  },    

  ["广安门"] = {
    region = "北京广安门",
  },   
        
  ["安定门"] = {
    region = "北京北安定门",
  },   
}
</script>
				<eventHandlerList />
			</Script>
		</ScriptGroup>
		<Script isActive="yes" isFolder="no">
			<name>获得任务目标地址+并启动</name>
			<packageName></packageName>
			<script>local to_dest = {}
to_dest["hyd-1"] = { -- 胡一刀任务
  ["河北"] = "node walk hyd_tgk",
  ["云冈石窟"] = "s;sw;s;s;do 4 sw;do 5 nw;sw;w;do 3 sw;do 2 w;do 2 n;nu;nw;do 2 ne;do 6 n;do 2 n;nw",
  ["神龙岛"] = "node walk hyd_tgk",
  ["天坛"] = "s;ne;n;n;e;n;e",
  ["黑木崖"] = "node walk hyd_ry",
  ["晋阳"] = "node walk hyd_jy",
  ["康亲王府"] = "node walk hyd_kqw",
  ["大同"] = "node walk hyd_dt",  
  ["代州"] = "node walk hyd_dz",  
  ["恒山"] = "node walk hyd_dz", 
  ["紫禁城"] = "node walk hyd_bj",  
  ["张家口"] = "node walk hyd_zjk",  
  
  ["中原"] = "node walk hyd_jydk",
  ["杀手帮"] = "node walk hyd_jydk",
  ["扬州"] = "node walk hyd_jydk",
  ["伏牛山"] = "node walk hyd_jydk",
  ["南阳"] = "node walk hyd_jydk",
  ["丐帮"] = "node walk hyd_jydk",
  ["信阳"] = "node walk hyd_jydk", 
  ["洛阳"] = "node walk hyd_jydk", 
  ["濠州府"] = "node walk hyd_jydk", 
  ["徐州"] = "node walk hyd_jydk", 
  ["麒麟村"] = "node walk hyd_jydk",
  
  ["青州"] = "node walk hyd_pydk",   
  ["泰安"] = "node walk hyd_pydk", 
  ["曲阜"] = "node walk hyd_pydk", 
  ["登州"] = "node walk hyd_jydk", 
  ["泰山"] = "node walk hyd_jydk", 
}

function kaiba() -- 开拔
  local type = get_task_type()
  cecho("\n---&gt; task type: &lt;yellow&gt;"..type)
  local city = primary_dest().city
  cecho("\n---&gt; target city: &lt;yellow&gt;" ..city)
  
  local path
  if type == "hyd-1" then 
    path = to_dest[type][city]
  end  
  cecho ("\n+++ &gt; path: &lt;yellow&gt;"..path.."\n")
  if path ~= nil then
    send(path)
  end
end


</script>
			<eventHandlerList />
		</Script>
	</ScriptPackage>
	<KeyPackage />
	<VariablePackage>
		<HiddenVariables>
			<name>eat_interval</name>
		</HiddenVariables>
		<Variable>
			<name>current_learning_skills</name>
			<keyType>4</keyType>
			<value>lingwu dodge</value>
			<valueType>4</valueType>
		</Variable>
		<VariableGroup>
			<name>murong_task</name>
			<keyType>4</keyType>
			<value></value>
			<valueType>5</valueType>
			<Variable>
				<name>current_mrf_location</name>
				<keyType>4</keyType>
				<value>node walk tgz_mrf</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>murong_target_city</name>
				<keyType>4</keyType>
				<value>闽中</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>murong_target_room</name>
				<keyType>4</keyType>
				<value>山路</value>
				<valueType>4</valueType>
			</Variable>
		</VariableGroup>
		<VariableGroup>
			<name>hp_constants</name>
			<keyType>4</keyType>
			<value></value>
			<valueType>5</valueType>
			<Variable>
				<name>tineng_good</name>
				<keyType>4</keyType>
				<value>体能良好</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>need_sleep</name>
				<keyType>4</keyType>
				<value>需要睡眠</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>hunger</name>
				<keyType>4</keyType>
				<value>"饥饿状态"</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>short_of_neili</name>
				<keyType>4</keyType>
				<value>内力不足</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>short_of_shen</name>
				<keyType>4</keyType>
				<value>神不足</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>thirthty</name>
				<keyType>4</keyType>
				<value>"饥渴状态"</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>short_of_xue</name>
				<keyType>4</keyType>
				<value>血不足</value>
				<valueType>4</valueType>
			</Variable>
		</VariableGroup>
		<VariableGroup>
			<name>skill_info</name>
			<keyType>4</keyType>
			<value></value>
			<valueType>5</valueType>
			<Variable>
				<name>sword_level</name>
				<keyType>4</keyType>
				<value>50</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>dodge_level</name>
				<keyType>4</keyType>
				<value>50</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>taiji_quan_level</name>
				<keyType>4</keyType>
				<value>50</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>force_level</name>
				<keyType>4</keyType>
				<value>50</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>taiji_sword_level</name>
				<keyType>4</keyType>
				<value>50</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>cuff_level</name>
				<keyType>4</keyType>
				<value>50</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>parry_level</name>
				<keyType>4</keyType>
				<value>50</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>tiyunzong_level</name>
				<keyType>4</keyType>
				<value>50</value>
				<valueType>3</valueType>
			</Variable>
		</VariableGroup>
		<VariableGroup>
			<name>current_luren</name>
			<keyType>4</keyType>
			<value></value>
			<valueType>5</valueType>
			<Variable>
				<name>cloth_color</name>
				<keyType>4</keyType>
				<value>3</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>shoes_color_type</name>
				<keyType>4</keyType>
				<value>深色</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>gender</name>
				<keyType>4</keyType>
				<value>她</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>age</name>
				<keyType>4</keyType>
				<value>二十</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>gender_type</name>
				<keyType>4</keyType>
				<value>女</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>chinese_name</name>
				<keyType>4</keyType>
				<value>萧霄娅</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>shoes_color</name>
				<keyType>4</keyType>
				<value>4</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>cloth_type</name>
				<keyType>4</keyType>
				<value>布衣</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>cloth</name>
				<keyType>4</keyType>
				<value>百褶裙</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>full_name</name>
				<keyType>4</keyType>
				<value>xiao xiaoya</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>cloth_color_type</name>
				<keyType>4</keyType>
				<value>深色</value>
				<valueType>4</valueType>
			</Variable>
		</VariableGroup>
		<VariableGroup>
			<name>skill_learning_set</name>
			<keyType>4</keyType>
			<value></value>
			<valueType>5</valueType>
			<Variable>
				<name>1</name>
				<keyType>3</keyType>
				<value>lingwu cuff</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>2</name>
				<keyType>3</keyType>
				<value>lingwu dodge</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>3</name>
				<keyType>3</keyType>
				<value>lingwu force</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>4</name>
				<keyType>3</keyType>
				<value>lingwu parry</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>5</name>
				<keyType>3</keyType>
				<value>lingwu sword</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>6</name>
				<keyType>3</keyType>
				<value>lian cuff 40</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>7</name>
				<keyType>3</keyType>
				<value>do 10 lian dodge 1</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>8</name>
				<keyType>3</keyType>
				<value>lian sword 20</value>
				<valueType>4</valueType>
			</Variable>
		</VariableGroup>
		<VariableGroup>
			<name>hp_info</name>
			<keyType>4</keyType>
			<value></value>
			<valueType>5</valueType>
			<Variable>
				<name>base_xue</name>
				<keyType>4</keyType>
				<value>693</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>max_neili</name>
				<keyType>4</keyType>
				<value>2014</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>food</name>
				<keyType>4</keyType>
				<value>184</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>current_shen</name>
				<keyType>4</keyType>
				<value>464</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>max_xue</name>
				<keyType>4</keyType>
				<value>693</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>max_shen</name>
				<keyType>4</keyType>
				<value>464</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>base_neili</name>
				<keyType>4</keyType>
				<value>1093</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>base_jingli</name>
				<keyType>4</keyType>
				<value>991</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>current_neili</name>
				<keyType>4</keyType>
				<value>1432</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>current_xue</name>
				<keyType>4</keyType>
				<value>693</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>current_jingli</name>
				<keyType>4</keyType>
				<value>1982</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>base_shen</name>
				<keyType>4</keyType>
				<value>464</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>water</name>
				<keyType>4</keyType>
				<value>68</value>
				<valueType>4</valueType>
			</Variable>
		</VariableGroup>
		<VariableGroup>
			<name>maps</name>
			<keyType>4</keyType>
			<value></value>
			<valueType>5</valueType>
		</VariableGroup>
		<VariableGroup>
			<name>luren_set</name>
			<keyType>4</keyType>
			<value></value>
			<valueType>5</valueType>
		</VariableGroup>
		<VariableGroup>
			<name>stat</name>
			<keyType>4</keyType>
			<value></value>
			<valueType>5</valueType>
			<Variable>
				<name>water</name>
				<keyType>4</keyType>
				<value>297</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>qi</name>
				<keyType>4</keyType>
				<value>4679</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>jing</name>
				<keyType>4</keyType>
				<value>3661</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>food</name>
				<keyType>4</keyType>
				<value>284</value>
				<valueType>3</valueType>
			</Variable>
		</VariableGroup>
		<VariableGroup>
			<name>skill_constants</name>
			<keyType>4</keyType>
			<value></value>
			<valueType>5</valueType>
			<Variable>
				<name>basic_skill_higher_cannot_lingwu</name>
				<keyType>4</keyType>
				<value>你的基本功夫比你的高级功夫还高！</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>need_improve_basic_cannot_lian</name>
				<keyType>4</keyType>
				<value>你需要提高基本功，不然练得再多也没有用。</value>
				<valueType>4</valueType>
			</Variable>
			<Variable>
				<name>learning_index</name>
				<keyType>4</keyType>
				<value>2</value>
				<valueType>3</valueType>
			</Variable>
			<Variable>
				<name>current_learning_skills</name>
				<keyType>4</keyType>
				<value>lingwu cuff</value>
				<valueType>4</valueType>
			</Variable>
		</VariableGroup>
	</VariablePackage>
</MudletPackage>
